(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function dw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nm={exports:{}},zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function hw(){if(hv)return zo;hv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:d}}return zo.Fragment=e,zo.jsx=s,zo.jsxs=s,zo}var fv;function fw(){return fv||(fv=1,nm.exports=hw()),nm.exports}var c=fw(),sm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function mw(){if(mv)return Fe;mv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function q(S){return S===null||typeof S!="object"?null:(S=A&&S[A]||S["@@iterator"],typeof S=="function"?S:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,z={};function ee(S,P,se){this.props=S,this.context=P,this.refs=z,this.updater=se||J}ee.prototype.isReactComponent={},ee.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},ee.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function W(){}W.prototype=ee.prototype;function fe(S,P,se){this.props=S,this.context=P,this.refs=z,this.updater=se||J}var de=fe.prototype=new W;de.constructor=fe,X(de,ee.prototype),de.isPureReactComponent=!0;var xe=Array.isArray;function Ee(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function j(S,P,se){var O=se.ref;return{$$typeof:r,type:S,key:P,ref:O!==void 0?O:null,props:se}}function k(S,P){return j(S.type,P,S.props)}function C(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function L(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(se){return P[se]})}var I=/\/+/g;function le(S,P){return typeof S=="object"&&S!==null&&S.key!=null?L(""+S.key):P.toString(36)}function Ie(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Ee,Ee):(S.status="pending",S.then(function(P){S.status==="pending"&&(S.status="fulfilled",S.value=P)},function(P){S.status==="pending"&&(S.status="rejected",S.reason=P)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function Y(S,P,se,O,M){var Z=typeof S;(Z==="undefined"||Z==="boolean")&&(S=null);var oe=!1;if(S===null)oe=!0;else switch(Z){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(S.$$typeof){case r:case e:oe=!0;break;case _:return oe=S._init,Y(oe(S._payload),P,se,O,M)}}if(oe)return M=M(S),oe=O===""?"."+le(S,0):O,xe(M)?(se="",oe!=null&&(se=oe.replace(I,"$&/")+"/"),Y(M,P,se,"",function(Ye){return Ye})):M!=null&&(C(M)&&(M=k(M,se+(M.key==null||S&&S.key===M.key?"":(""+M.key).replace(I,"$&/")+"/")+oe)),P.push(M)),1;oe=0;var Ne=O===""?".":O+":";if(xe(S))for(var ke=0;ke<S.length;ke++)O=S[ke],Z=Ne+le(O,ke),oe+=Y(O,P,se,Z,M);else if(ke=q(S),typeof ke=="function")for(S=ke.call(S),ke=0;!(O=S.next()).done;)O=O.value,Z=Ne+le(O,ke++),oe+=Y(O,P,se,Z,M);else if(Z==="object"){if(typeof S.then=="function")return Y(Ie(S),P,se,O,M);throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return oe}function he(S,P,se){if(S==null)return S;var O=[],M=0;return Y(S,O,"","",function(Z){return P.call(se,Z,M++)}),O}function _e(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(se){(S._status===0||S._status===-1)&&(S._status=1,S._result=se)},function(se){(S._status===0||S._status===-1)&&(S._status=2,S._result=se)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var Be=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},Xe={map:he,forEach:function(S,P,se){he(S,function(){P.apply(this,arguments)},se)},count:function(S){var P=0;return he(S,function(){P++}),P},toArray:function(S){return he(S,function(P){return P})||[]},only:function(S){if(!C(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Fe.Activity=E,Fe.Children=Xe,Fe.Component=ee,Fe.Fragment=s,Fe.Profiler=o,Fe.PureComponent=fe,Fe.StrictMode=i,Fe.Suspense=v,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return R.H.useMemoCache(S)}},Fe.cache=function(S){return function(){return S.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(S,P,se){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var O=X({},S.props),M=S.key;if(P!=null)for(Z in P.key!==void 0&&(M=""+P.key),P)!T.call(P,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&P.ref===void 0||(O[Z]=P[Z]);var Z=arguments.length-2;if(Z===1)O.children=se;else if(1<Z){for(var oe=Array(Z),Ne=0;Ne<Z;Ne++)oe[Ne]=arguments[Ne+2];O.children=oe}return j(S.type,M,O)},Fe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:d,_context:S},S},Fe.createElement=function(S,P,se){var O,M={},Z=null;if(P!=null)for(O in P.key!==void 0&&(Z=""+P.key),P)T.call(P,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(M[O]=P[O]);var oe=arguments.length-2;if(oe===1)M.children=se;else if(1<oe){for(var Ne=Array(oe),ke=0;ke<oe;ke++)Ne[ke]=arguments[ke+2];M.children=Ne}if(S&&S.defaultProps)for(O in oe=S.defaultProps,oe)M[O]===void 0&&(M[O]=oe[O]);return j(S,Z,M)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(S){return{$$typeof:p,render:S}},Fe.isValidElement=C,Fe.lazy=function(S){return{$$typeof:_,_payload:{_status:-1,_result:S},_init:_e}},Fe.memo=function(S,P){return{$$typeof:y,type:S,compare:P===void 0?null:P}},Fe.startTransition=function(S){var P=R.T,se={};R.T=se;try{var O=S(),M=R.S;M!==null&&M(se,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(Ee,Be)}catch(Z){Be(Z)}finally{P!==null&&se.types!==null&&(P.types=se.types),R.T=P}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(S){return R.H.use(S)},Fe.useActionState=function(S,P,se){return R.H.useActionState(S,P,se)},Fe.useCallback=function(S,P){return R.H.useCallback(S,P)},Fe.useContext=function(S){return R.H.useContext(S)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(S,P){return R.H.useDeferredValue(S,P)},Fe.useEffect=function(S,P){return R.H.useEffect(S,P)},Fe.useEffectEvent=function(S){return R.H.useEffectEvent(S)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(S,P,se){return R.H.useImperativeHandle(S,P,se)},Fe.useInsertionEffect=function(S,P){return R.H.useInsertionEffect(S,P)},Fe.useLayoutEffect=function(S,P){return R.H.useLayoutEffect(S,P)},Fe.useMemo=function(S,P){return R.H.useMemo(S,P)},Fe.useOptimistic=function(S,P){return R.H.useOptimistic(S,P)},Fe.useReducer=function(S,P,se){return R.H.useReducer(S,P,se)},Fe.useRef=function(S){return R.H.useRef(S)},Fe.useState=function(S){return R.H.useState(S)},Fe.useSyncExternalStore=function(S,P,se){return R.H.useSyncExternalStore(S,P,se)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.2.0",Fe}var gv;function Zm(){return gv||(gv=1,sm.exports=mw()),sm.exports}var ne=Zm();const rb=dw(ne);var rm={exports:{}},Bo={},im={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function gw(){return pv||(pv=1,(function(r){function e(Y,he){var _e=Y.length;Y.push(he);e:for(;0<_e;){var Be=_e-1>>>1,Xe=Y[Be];if(0<o(Xe,he))Y[Be]=he,Y[_e]=Xe,_e=Be;else break e}}function s(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var he=Y[0],_e=Y.pop();if(_e!==he){Y[0]=_e;e:for(var Be=0,Xe=Y.length,S=Xe>>>1;Be<S;){var P=2*(Be+1)-1,se=Y[P],O=P+1,M=Y[O];if(0>o(se,_e))O<Xe&&0>o(M,se)?(Y[Be]=M,Y[O]=_e,Be=O):(Y[Be]=se,Y[P]=_e,Be=P);else if(O<Xe&&0>o(M,_e))Y[Be]=M,Y[O]=_e,Be=O;else break e}}return he}function o(Y,he){var _e=Y.sortIndex-he.sortIndex;return _e!==0?_e:Y.id-he.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var v=[],y=[],_=1,E=null,A=3,q=!1,J=!1,X=!1,z=!1,ee=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function de(Y){for(var he=s(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=Y)i(y),he.sortIndex=he.expirationTime,e(v,he);else break;he=s(y)}}function xe(Y){if(X=!1,de(Y),!J)if(s(v)!==null)J=!0,Ee||(Ee=!0,L());else{var he=s(y);he!==null&&Ie(xe,he.startTime-Y)}}var Ee=!1,R=-1,T=5,j=-1;function k(){return z?!0:!(r.unstable_now()-j<T)}function C(){if(z=!1,Ee){var Y=r.unstable_now();j=Y;var he=!0;try{e:{J=!1,X&&(X=!1,W(R),R=-1),q=!0;var _e=A;try{t:{for(de(Y),E=s(v);E!==null&&!(E.expirationTime>Y&&k());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,A=E.priorityLevel;var Xe=Be(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof Xe=="function"){E.callback=Xe,de(Y),he=!0;break t}E===s(v)&&i(v),de(Y)}else i(v);E=s(v)}if(E!==null)he=!0;else{var S=s(y);S!==null&&Ie(xe,S.startTime-Y),he=!1}}break e}finally{E=null,A=_e,q=!1}he=void 0}}finally{he?L():Ee=!1}}}var L;if(typeof fe=="function")L=function(){fe(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,le=I.port2;I.port1.onmessage=C,L=function(){le.postMessage(null)}}else L=function(){ee(C,0)};function Ie(Y,he){R=ee(function(){Y(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var he=3;break;default:he=A}var _e=A;A=he;try{return Y()}finally{A=_e}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=A;A=Y;try{return he()}finally{A=_e}},r.unstable_scheduleCallback=function(Y,he,_e){var Be=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,Y){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=_e+Xe,Y={id:_++,callback:he,priorityLevel:Y,startTime:_e,expirationTime:Xe,sortIndex:-1},_e>Be?(Y.sortIndex=_e,e(y,Y),s(v)===null&&Y===s(y)&&(X?(W(R),R=-1):X=!0,Ie(xe,_e-Be))):(Y.sortIndex=Xe,e(v,Y),J||q||(J=!0,Ee||(Ee=!0,L()))),Y},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(Y){var he=A;return function(){var _e=A;A=he;try{return Y.apply(this,arguments)}finally{A=_e}}}})(am)),am}var yv;function pw(){return yv||(yv=1,im.exports=gw()),im.exports}var lm={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function yw(){if(vv)return hn;vv=1;var r=Zm();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:v,containerInfo:y,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(v,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(v,y,null,_)},hn.flushSync=function(v){var y=f.T,_=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=y,i.p=_,i.d.f()}},hn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(v,y))},hn.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},hn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:q}):_==="script"&&i.d.X(v,{crossOrigin:E,integrity:A,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},hn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);i.d.M(v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(v)},hn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin);i.d.L(v,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},hn.preloadModule=function(v,y){if(typeof v=="string")if(y){var _=p(y.as,y.crossOrigin);i.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(v)},hn.requestFormReset=function(v){i.d.r(v)},hn.unstable_batchedUpdates=function(v,y){return v(y)},hn.useFormState=function(v,y,_){return f.H.useFormState(v,y,_)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.0",hn}var xv;function vw(){if(xv)return lm.exports;xv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=yw(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function xw(){if(bv)return Bo;bv=1;var r=pw(),e=Zm(),s=vw();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(i(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return v(h),t;if(m===l)return v(h),n;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,w=h.child;w;){if(w===a){x=!0,a=h,l=m;break}if(w===l){x=!0,l=h,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,l=h;break}if(w===l){x=!0,l=m,a=h;break}w=w.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case ee:return"Profiler";case z:return"StrictMode";case xe:return"Suspense";case Ee:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case J:return"Portal";case fe:return t.displayName||"Context";case W:return(t._context.displayName||"Context")+".Consumer";case de:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:le(t.type)||"Memo";case T:n=t._payload,t=t._init;try{return le(t(n))}catch{}}return null}var Ie=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Xe=-1;function S(t){return{current:t}}function P(t){0>Xe||(t.current=Be[Xe],Be[Xe]=null,Xe--)}function se(t,n){Xe++,Be[Xe]=t.current,t.current=n}var O=S(null),M=S(null),Z=S(null),oe=S(null);function Ne(t,n){switch(se(Z,n),se(M,t),se(O,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Oy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Oy(n),t=Vy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(O),se(O,t)}function ke(){P(O),P(M),P(Z)}function Ye(t){t.memoizedState!==null&&se(oe,t);var n=O.current,a=Vy(n,t.type);n!==a&&(se(M,t),se(O,a))}function ce(t){M.current===t&&(P(O),P(M)),oe.current===t&&(P(oe),Vo._currentValue=_e)}var be,ge;function Oe(t){if(be===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);be=n&&n[1]||"",ge=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+t+ge}var Ae=!1;function Re(t,n){if(!t||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Q){var G=Q}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Q){G=Q}t.call(ae.prototype)}}else{try{throw Error()}catch(Q){G=Q}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var D=x.split(`
`),F=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var te=`
`+D[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=h);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Oe(a):""}function $(t,n){switch(t.tag){case 26:case 27:case 5:return Oe(t.type);case 16:return Oe("Lazy");case 13:return t.child!==n&&n!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return Re(t.type,!1);case 11:return Re(t.type.render,!1);case 1:return Re(t.type,!0);case 31:return Oe("Activity");default:return""}}function pe(t){try{var n="",a=null;do n+=$(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ye=Object.prototype.hasOwnProperty,Ve=r.unstable_scheduleCallback,me=r.unstable_cancelCallback,je=r.unstable_shouldYield,We=r.unstable_requestPaint,jt=r.unstable_now,Rn=r.unstable_getCurrentPriorityLevel,cs=r.unstable_ImmediatePriority,As=r.unstable_UserBlockingPriority,js=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,Na=r.unstable_IdlePriority,Sc=r.log,Nc=r.unstable_setDisableYieldValue,us=null,nn=null;function Gn(t){if(typeof Sc=="function"&&Nc(t),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(us,t)}catch{}}var It=Math.clz32?Math.clz32:jc,Ac=Math.log,Aa=Math.LN2;function jc(t){return t>>>=0,t===0?32:31-(Ac(t)/Aa|0)|0}var Cs=256,Ui=262144,Pt=4194304;function Rs(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Is(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=Rs(l):(x&=w,x!==0?h=Rs(x):a||(a=w&~t,a!==0&&(h=Rs(a))))):(w=l&~m,w!==0?h=Rs(w):x!==0?h=Rs(x):a||(a=l&~t,a!==0&&(h=Rs(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function ds(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ih(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var t=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),t}function ks(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function zi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ah(t,n,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=x&~a;0<a;){var te=31-It(a),ae=1<<te;w[te]=0,D[te]=-1;var G=F[te];if(G!==null)for(F[te]=null,te=0;te<G.length;te++){var Q=G[te];Q!==null&&(Q.lane&=-536870913)}a&=~ae}l!==0&&Bi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~n))}function Bi(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-It(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function zl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-It(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function Bl(t,n){var a=n&-n;return a=(a&42)!==0?1:qi(a),(a&(t.suspendedLanes|n))!==0?0:a}function qi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ar(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rc(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:iv(t.type))}function hs(t,n){var a=he.p;try{return he.p=t,n()}finally{he.p=a}}var fs=Math.random().toString(36).slice(2),Ut="__reactFiber$"+fs,Zt="__reactProps$"+fs,Ds="__reactContainer$"+fs,ja="__reactEvents$"+fs,lh="__reactListeners$"+fs,Ic="__reactHandles$"+fs,kc="__reactResources$"+fs,Ms="__reactMarker$"+fs;function Ca(t){delete t[Ut],delete t[Zt],delete t[ja],delete t[lh],delete t[Ic]}function Os(t){var n=t[Ut];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Ds]||a[Ut]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Hy(t);t!==null;){if(a=t[Ut])return a;t=Hy(t)}return n}t=a,a=t.parentNode}return null}function Yn(t){if(t=t[Ut]||t[Ds]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function In(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Vs(t){var n=t[kc];return n||(n=t[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function zt(t){t[Ms]=!0}var ql=new Set,Hl={};function Ls(t,n){Ps(t,n),Ps(t+"Capture",n)}function Ps(t,n){for(Hl[t]=n,t=0;t<n.length;t++)ql.add(n[t])}var Fl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gl={},Yl={};function Dc(t){return ye.call(Yl,t)?!0:ye.call(Gl,t)?!1:Fl.test(t)?Yl[t]=!0:(Gl[t]=!0,!1)}function Ra(t,n,a){if(Dc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function kn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Bt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Kl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ht(t){if(!t._valueTracker){var n=Pr(t)?"checked":"value";t._valueTracker=Kl(t,n,""+t[n])}}function Hi(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Pr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fi=/[\n"\\]/g;function _n(t){return t.replace(Fi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ia(t,n,a,l,h,m,x,w){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Jt(n)):t.value!==""+Jt(n)&&(t.value=""+Jt(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Ql(t,x,Jt(n)):a!=null?Ql(t,x,Jt(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Jt(w):t.removeAttribute("name")}function Mc(t,n,a,l,h,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ht(t);return}a=a!=null?""+Jt(a):"",n=n!=null?""+Jt(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),ht(t)}function Ql(t,n,a){n==="number"&&Us(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ur(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Jt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Oc(t,n,a){if(n!=null&&(n=""+Jt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Jt(a):""}function zr(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(Ie(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Jt(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ht(t)}function wn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $l(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Vc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Xl(t,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&$l(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&$l(t,m,n[m])}function ka(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(t){return Br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ms(){}var Wl=null;function Kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qr=null,zs=null;function Gi(t){var n=Yn(t);if(n&&(t=n.stateNode)){var a=t[Zt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ia(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[Zt]||null;if(!h)throw Error(i(90));Ia(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Hi(l)}break e;case"textarea":Oc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ur(t,!!a.multiple,n,!1)}}}var Ma=!1;function Hr(t,n,a){if(Ma)return t(n,a);Ma=!0;try{var l=t(n);return l}finally{if(Ma=!1,(qr!==null||zs!==null)&&(Ru(),qr&&(n=qr,t=zs,zs=qr=null,Gi(n),t)))for(n=0;n<t.length;n++)Gi(t[n])}}function gs(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Zt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yi=!1;if(Qn)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Yi=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Yi=!1}var Bs=null,Zl=null,Ki=null;function Jl(){if(Ki)return Ki;var t,n=Zl,a=n.length,l,h="value"in Bs?Bs.value:Bs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[m-l];l++);return Ki=h.slice(t,1<l?1-l:void 0)}function Qi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function lr(){return!0}function ps(){return!1}function sn(t){function n(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lr:ps,this.isPropagationStopped=ps,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),n}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qs=sn(or),Fr=E({},or,{view:0,detail:0}),eo=sn(Fr),Gr,Oa,Hs,Va=E({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hs&&(Hs&&t.type==="mousemove"?(Gr=t.screenX-Hs.screenX,Oa=t.screenY-Hs.screenY):Oa=Gr=0,Hs=t),Gr)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),to=sn(Va),$i=E({},Va,{dataTransfer:0}),Pc=sn($i),Uc=E({},Fr,{relatedTarget:0}),Xi=sn(Uc),no=E({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=sn(no),La=E({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bc=sn(La),qc=E({},or,{data:0}),Fs=sn(qc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Gc[t])?!!n[t]:!1}function Yr(){return Yc}var yn=E({},Fr,{key:function(t){if(t.key){var n=Hc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(t){return t.type==="keypress"?Qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kc=sn(yn),Qc=E({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cr=sn(Qc),u=E({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),g=sn(u),b=E({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=sn(b),B=E({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=sn(B),ve=E({},or,{newState:0,oldState:0}),Ke=sn(ve),kt=[9,13,27,32],ct=Qn&&"CompositionEvent"in window,St=null;Qn&&"documentMode"in document&&(St=document.documentMode);var $n=Qn&&"TextEvent"in window&&!St,Gs=Qn&&(!ct||St&&8<St&&11>=St),ys=" ",vs=!1;function Wi(t,n){switch(t){case"keyup":return kt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function O1(t,n){switch(t){case"compositionend":return Pa(n);case"keypress":return n.which!==32?null:(vs=!0,ys);case"textInput":return t=n.data,t===ys&&vs?null:t;default:return null}}function V1(t,n){if(Ua)return t==="compositionend"||!ct&&Wi(t,n)?(t=Jl(),Ki=Zl=Bs=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gs&&n.locale!=="ko"?null:n.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!L1[t.type]:n==="textarea"}function Kg(t,n,a,l){qr?zs?zs.push(l):zs=[l]:qr=l,n=Lu(n,"onChange"),0<n.length&&(a=new qs("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var so=null,ro=null;function P1(t){Cy(t,0)}function $c(t){var n=In(t);if(Hi(n))return t}function Qg(t,n){if(t==="change")return n}var $g=!1;if(Qn){var oh;if(Qn){var ch="oninput"in document;if(!ch){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),ch=typeof Xg.oninput=="function"}oh=ch}else oh=!1;$g=oh&&(!document.documentMode||9<document.documentMode)}function Wg(){so&&(so.detachEvent("onpropertychange",Zg),ro=so=null)}function Zg(t){if(t.propertyName==="value"&&$c(ro)){var n=[];Kg(n,ro,t,Kn(t)),Hr(P1,n)}}function U1(t,n,a){t==="focusin"?(Wg(),so=n,ro=a,so.attachEvent("onpropertychange",Zg)):t==="focusout"&&Wg()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(ro)}function B1(t,n){if(t==="click")return $c(n)}function q1(t,n){if(t==="input"||t==="change")return $c(n)}function H1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Dn=typeof Object.is=="function"?Object.is:H1;function io(t,n){if(Dn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ye.call(n,h)||!Dn(t[h],n[h]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,n){var a=Jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jg(a)}}function tp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?tp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function np(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Us(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Us(t.document)}return n}function uh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var F1=Qn&&"documentMode"in document&&11>=document.documentMode,za=null,dh=null,ao=null,hh=!1;function sp(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hh||za==null||za!==Us(l)||(l=za,"selectionStart"in l&&uh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ao&&io(ao,l)||(ao=l,l=Lu(dh,"onSelect"),0<l.length&&(n=new qs("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=za)))}function Zi(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ba={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},fh={},rp={};Qn&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Ji(t){if(fh[t])return fh[t];if(!Ba[t])return t;var n=Ba[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in rp)return fh[t]=n[a];return t}var ip=Ji("animationend"),ap=Ji("animationiteration"),lp=Ji("animationstart"),G1=Ji("transitionrun"),Y1=Ji("transitionstart"),K1=Ji("transitioncancel"),op=Ji("transitionend"),cp=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function xs(t,n){cp.set(t,n),Ls(n,[t])}var Xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xn=[],qa=0,gh=0;function Wc(){for(var t=qa,n=gh=qa=0;n<t;){var a=Xn[n];Xn[n++]=null;var l=Xn[n];Xn[n++]=null;var h=Xn[n];Xn[n++]=null;var m=Xn[n];if(Xn[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&up(a,h,m)}}function Zc(t,n,a,l){Xn[qa++]=t,Xn[qa++]=n,Xn[qa++]=a,Xn[qa++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ph(t,n,a,l){return Zc(t,n,a,l),Jc(t)}function ea(t,n){return Zc(t,null,null,n),Jc(t)}function up(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-It(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Jc(t){if(50<Co)throw Co=0,Nf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ha={};function Q1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,n,a,l){return new Q1(t,n,a,l)}function yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ur(t,n){var a=t.alternate;return a===null?(a=Mn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function eu(t,n,a,l,h,m){var x=0;if(l=t,typeof t=="function")yh(t)&&(x=1);else if(typeof t=="string")x=J2(t,a,O.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Mn(31,a,n,h),t.elementType=j,t.lanes=m,t;case X:return ta(a.children,h,m,n);case z:x=8,h|=24;break;case ee:return t=Mn(12,a,n,h|2),t.elementType=ee,t.lanes=m,t;case xe:return t=Mn(13,a,n,h),t.elementType=xe,t.lanes=m,t;case Ee:return t=Mn(19,a,n,h),t.elementType=Ee,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fe:x=10;break e;case W:x=9;break e;case de:x=11;break e;case R:x=14;break e;case T:x=16,l=null;break e}x=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return n=Mn(x,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function ta(t,n,a,l){return t=Mn(7,t,l,n),t.lanes=a,t}function vh(t,n,a){return t=Mn(6,t,null,n),t.lanes=a,t}function hp(t){var n=Mn(18,null,null,0);return n.stateNode=t,n}function xh(t,n,a){return n=Mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var fp=new WeakMap;function Wn(t,n){if(typeof t=="object"&&t!==null){var a=fp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:pe(n)},fp.set(t,n),n)}return{value:t,source:n,stack:pe(n)}}var Fa=[],Ga=0,tu=null,lo=0,Zn=[],Jn=0,Kr=null,Ys=1,Ks="";function dr(t,n){Fa[Ga++]=lo,Fa[Ga++]=tu,tu=t,lo=n}function mp(t,n,a){Zn[Jn++]=Ys,Zn[Jn++]=Ks,Zn[Jn++]=Kr,Kr=t;var l=Ys;t=Ks;var h=32-It(l)-1;l&=~(1<<h),a+=1;var m=32-It(n)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Ys=1<<32-It(n)+h|a<<h|l,Ks=m+t}else Ys=1<<m|a<<h|l,Ks=t}function bh(t){t.return!==null&&(dr(t,1),mp(t,1,0))}function _h(t){for(;t===tu;)tu=Fa[--Ga],Fa[Ga]=null,lo=Fa[--Ga],Fa[Ga]=null;for(;t===Kr;)Kr=Zn[--Jn],Zn[Jn]=null,Ks=Zn[--Jn],Zn[Jn]=null,Ys=Zn[--Jn],Zn[Jn]=null}function gp(t,n){Zn[Jn++]=Ys,Zn[Jn++]=Ks,Zn[Jn++]=Kr,Ys=n.id,Ks=n.overflow,Kr=t}var rn=null,_t=null,it=!1,Qr=null,es=!1,wh=Error(i(519));function $r(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oo(Wn(n,t)),wh}function pp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Ut]=t,n[Zt]=l,a){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(a=0;a<Io.length;a++)Je(Io[a],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":Je("invalid",n),Mc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Je("invalid",n);break;case"textarea":Je("invalid",n),zr(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Dy(n.textContent,a)?(l.popover!=null&&(Je("beforetoggle",n),Je("toggle",n)),l.onScroll!=null&&Je("scroll",n),l.onScrollEnd!=null&&Je("scrollend",n),l.onClick!=null&&(n.onclick=ms),n=!0):n=!1,n||$r(t,!0)}function yp(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:es=!1;return;case 27:case 3:es=!0;return;default:rn=rn.return}}function Ya(t){if(t!==rn)return!1;if(!it)return yp(t),it=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Bf(t.type,t.memoizedProps)),a=!a),a&&_t&&$r(t),yp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=qy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=qy(t)}else n===27?(n=_t,ci(t.type)?(t=Yf,Yf=null,_t=t):_t=n):_t=rn?ns(t.stateNode.nextSibling):null;return!0}function na(){_t=rn=null,it=!1}function Eh(){var t=Qr;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),Qr=null),t}function oo(t){Qr===null?Qr=[t]:Qr.push(t)}var Th=S(null),sa=null,hr=null;function Xr(t,n,a){se(Th,n._currentValue),n._currentValue=a}function fr(t){t._currentValue=Th.current,P(Th)}function Sh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Nh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Sh(m.return,a,t),l||(x=null);break e}m=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Sh(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Ka(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var w=h.type;Dn(h.pendingProps.value,x.value)||(t!==null?t.push(w):t=[w])}}else if(h===oe.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Vo):t=[Vo])}h=h.return}t!==null&&Nh(n,t,a,l),n.flags|=262144}function nu(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){sa=t,hr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return vp(sa,t)}function su(t,n){return sa===null&&ra(t),vp(t,n)}function vp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},hr===null){if(t===null)throw Error(i(308));hr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else hr=hr.next=n;return a}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},X1=r.unstable_scheduleCallback,W1=r.unstable_NormalPriority,qt={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new $1,data:new Map,refCount:0}}function co(t){t.refCount--,t.refCount===0&&X1(W1,function(){t.controller.abort()})}var uo=null,jh=0,Qa=0,$a=null;function Z1(t,n){if(uo===null){var a=uo=[];jh=0,Qa=kf(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jh++,n.then(xp,xp),n}function xp(){if(--jh===0&&uo!==null){$a!==null&&($a.status="fulfilled");var t=uo;uo=null,Qa=0,$a=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function J1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var bp=Y.S;Y.S=function(t,n){sy=jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Z1(t,n),bp!==null&&bp(t,n)};var ia=S(null);function Ch(){var t=ia.current;return t!==null?t:xt.pooledCache}function ru(t,n){n===null?se(ia,ia.current):se(ia,n.pool)}function _p(){var t=Ch();return t===null?null:{parent:qt._currentValue,pool:t}}var Xa=Error(i(460)),Rh=Error(i(474)),iu=Error(i(542)),au={then:function(){}};function wp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ep(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(ms,ms),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(ms,ms);else{if(t=xt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw la=n,Xa}}function aa(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(la=a,Xa):a}}var la=null;function Tp(){if(la===null)throw Error(i(459));var t=la;return la=null,t}function Sp(t){if(t===Xa||t===iu)throw Error(i(483))}var Wa=null,ho=0;function lu(t){var n=ho;return ho+=1,Wa===null&&(Wa=[]),Ep(Wa,t,n)}function fo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ou(t,n){throw n.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Np(t){function n(U,V){if(t){var H=U.deletions;H===null?(U.deletions=[V],U.flags|=16):H.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)n(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=ur(U,V),U.index=0,U.sibling=null,U}function m(U,V,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<V?(U.flags|=67108866,V):H):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,V,H,re){return V===null||V.tag!==6?(V=vh(H,U.mode,re),V.return=U,V):(V=h(V,H),V.return=U,V)}function D(U,V,H,re){var De=H.type;return De===X?te(U,V,H.props.children,re,H.key):V!==null&&(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&aa(De)===V.type)?(V=h(V,H.props),fo(V,H),V.return=U,V):(V=eu(H.type,H.key,H.props,null,U.mode,re),fo(V,H),V.return=U,V)}function F(U,V,H,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=xh(H,U.mode,re),V.return=U,V):(V=h(V,H.children||[]),V.return=U,V)}function te(U,V,H,re,De){return V===null||V.tag!==7?(V=ta(H,U.mode,re,De),V.return=U,V):(V=h(V,H),V.return=U,V)}function ae(U,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=vh(""+V,U.mode,H),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case q:return H=eu(V.type,V.key,V.props,null,U.mode,H),fo(H,V),H.return=U,H;case J:return V=xh(V,U.mode,H),V.return=U,V;case T:return V=aa(V),ae(U,V,H)}if(Ie(V)||L(V))return V=ta(V,U.mode,H,null),V.return=U,V;if(typeof V.then=="function")return ae(U,lu(V),H);if(V.$$typeof===fe)return ae(U,su(U,V),H);ou(U,V)}return null}function G(U,V,H,re){var De=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return De!==null?null:w(U,V,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case q:return H.key===De?D(U,V,H,re):null;case J:return H.key===De?F(U,V,H,re):null;case T:return H=aa(H),G(U,V,H,re)}if(Ie(H)||L(H))return De!==null?null:te(U,V,H,re,null);if(typeof H.then=="function")return G(U,V,lu(H),re);if(H.$$typeof===fe)return G(U,V,su(U,H),re);ou(U,H)}return null}function Q(U,V,H,re,De){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(H)||null,w(V,U,""+re,De);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case q:return U=U.get(re.key===null?H:re.key)||null,D(V,U,re,De);case J:return U=U.get(re.key===null?H:re.key)||null,F(V,U,re,De);case T:return re=aa(re),Q(U,V,H,re,De)}if(Ie(re)||L(re))return U=U.get(H)||null,te(V,U,re,De,null);if(typeof re.then=="function")return Q(U,V,H,lu(re),De);if(re.$$typeof===fe)return Q(U,V,H,su(V,re),De);ou(V,re)}return null}function Se(U,V,H,re){for(var De=null,lt=null,Ce=V,$e=V=0,tt=null;Ce!==null&&$e<H.length;$e++){Ce.index>$e?(tt=Ce,Ce=null):tt=Ce.sibling;var ot=G(U,Ce,H[$e],re);if(ot===null){Ce===null&&(Ce=tt);break}t&&Ce&&ot.alternate===null&&n(U,Ce),V=m(ot,V,$e),lt===null?De=ot:lt.sibling=ot,lt=ot,Ce=tt}if($e===H.length)return a(U,Ce),it&&dr(U,$e),De;if(Ce===null){for(;$e<H.length;$e++)Ce=ae(U,H[$e],re),Ce!==null&&(V=m(Ce,V,$e),lt===null?De=Ce:lt.sibling=Ce,lt=Ce);return it&&dr(U,$e),De}for(Ce=l(Ce);$e<H.length;$e++)tt=Q(Ce,U,$e,H[$e],re),tt!==null&&(t&&tt.alternate!==null&&Ce.delete(tt.key===null?$e:tt.key),V=m(tt,V,$e),lt===null?De=tt:lt.sibling=tt,lt=tt);return t&&Ce.forEach(function(mi){return n(U,mi)}),it&&dr(U,$e),De}function Le(U,V,H,re){if(H==null)throw Error(i(151));for(var De=null,lt=null,Ce=V,$e=V=0,tt=null,ot=H.next();Ce!==null&&!ot.done;$e++,ot=H.next()){Ce.index>$e?(tt=Ce,Ce=null):tt=Ce.sibling;var mi=G(U,Ce,ot.value,re);if(mi===null){Ce===null&&(Ce=tt);break}t&&Ce&&mi.alternate===null&&n(U,Ce),V=m(mi,V,$e),lt===null?De=mi:lt.sibling=mi,lt=mi,Ce=tt}if(ot.done)return a(U,Ce),it&&dr(U,$e),De;if(Ce===null){for(;!ot.done;$e++,ot=H.next())ot=ae(U,ot.value,re),ot!==null&&(V=m(ot,V,$e),lt===null?De=ot:lt.sibling=ot,lt=ot);return it&&dr(U,$e),De}for(Ce=l(Ce);!ot.done;$e++,ot=H.next())ot=Q(Ce,U,$e,ot.value,re),ot!==null&&(t&&ot.alternate!==null&&Ce.delete(ot.key===null?$e:ot.key),V=m(ot,V,$e),lt===null?De=ot:lt.sibling=ot,lt=ot);return t&&Ce.forEach(function(uw){return n(U,uw)}),it&&dr(U,$e),De}function vt(U,V,H,re){if(typeof H=="object"&&H!==null&&H.type===X&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case q:e:{for(var De=H.key;V!==null;){if(V.key===De){if(De=H.type,De===X){if(V.tag===7){a(U,V.sibling),re=h(V,H.props.children),re.return=U,U=re;break e}}else if(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&aa(De)===V.type){a(U,V.sibling),re=h(V,H.props),fo(re,H),re.return=U,U=re;break e}a(U,V);break}else n(U,V);V=V.sibling}H.type===X?(re=ta(H.props.children,U.mode,re,H.key),re.return=U,U=re):(re=eu(H.type,H.key,H.props,null,U.mode,re),fo(re,H),re.return=U,U=re)}return x(U);case J:e:{for(De=H.key;V!==null;){if(V.key===De)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(U,V.sibling),re=h(V,H.children||[]),re.return=U,U=re;break e}else{a(U,V);break}else n(U,V);V=V.sibling}re=xh(H,U.mode,re),re.return=U,U=re}return x(U);case T:return H=aa(H),vt(U,V,H,re)}if(Ie(H))return Se(U,V,H,re);if(L(H)){if(De=L(H),typeof De!="function")throw Error(i(150));return H=De.call(H),Le(U,V,H,re)}if(typeof H.then=="function")return vt(U,V,lu(H),re);if(H.$$typeof===fe)return vt(U,V,su(U,H),re);ou(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(U,V.sibling),re=h(V,H),re.return=U,U=re):(a(U,V),re=vh(H,U.mode,re),re.return=U,U=re),x(U)):a(U,V)}return function(U,V,H,re){try{ho=0;var De=vt(U,V,H,re);return Wa=null,De}catch(Ce){if(Ce===Xa||Ce===iu)throw Ce;var lt=Mn(29,Ce,null,U.mode);return lt.lanes=re,lt.return=U,lt}finally{}}}var oa=Np(!0),Ap=Np(!1),Wr=!1;function Ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Jc(t),up(t,null,a),n}return Zc(t,l,n,a),Jc(t)}function mo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,zl(t,a)}}function Dh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Mh=!1;function go(){if(Mh){var t=$a;if(t!==null)throw t}}function po(t,n,a,l){Mh=!1;var h=t.updateQueue;Wr=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,F=D.next;D.next=null,x===null?m=F:x.next=F,x=D;var te=t.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==x&&(w===null?te.firstBaseUpdate=F:w.next=F,te.lastBaseUpdate=D))}if(m!==null){var ae=h.baseState;x=0,te=F=D=null,w=m;do{var G=w.lane&-536870913,Q=G!==w.lane;if(Q?(et&G)===G:(l&G)===G){G!==0&&G===Qa&&(Mh=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,Le=w;G=n;var vt=a;switch(Le.tag){case 1:if(Se=Le.payload,typeof Se=="function"){ae=Se.call(vt,ae,G);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Le.payload,G=typeof Se=="function"?Se.call(vt,ae,G):Se,G==null)break e;ae=E({},ae,G);break e;case 2:Wr=!0}}G=w.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(F=te=Q,D=ae):te=te.next=Q,x|=G;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);te===null&&(D=ae),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=te,m===null&&(h.shared.lanes=0),ri|=x,t.lanes=x,t.memoizedState=ae}}function jp(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Cp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)jp(a[t],n)}var Za=S(null),cu=S(0);function Rp(t,n){t=wr,se(cu,t),se(Za,n),wr=t|n.baseLanes}function Oh(){se(cu,wr),se(Za,Za.current)}function Vh(){wr=cu.current,P(Za),P(cu)}var On=S(null),ts=null;function ei(t){var n=t.alternate;se(Dt,Dt.current&1),se(On,t),ts===null&&(n===null||Za.current!==null||n.memoizedState!==null)&&(ts=t)}function Lh(t){se(Dt,Dt.current),se(On,t),ts===null&&(ts=t)}function Ip(t){t.tag===22?(se(Dt,Dt.current),se(On,t),ts===null&&(ts=t)):ti()}function ti(){se(Dt,Dt.current),se(On,On.current)}function Vn(t){P(On),ts===t&&(ts=null),P(Dt)}var Dt=S(0);function uu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ff(a)||Gf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var mr=0,Qe=null,pt=null,Ht=null,du=!1,Ja=!1,ca=!1,hu=0,yo=0,el=null,e2=0;function Ct(){throw Error(i(321))}function Ph(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Dn(t[a],n[a]))return!1;return!0}function Uh(t,n,a,l,h,m){return mr=m,Qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?m0:ef,ca=!1,m=a(l,h),ca=!1,Ja&&(m=Dp(n,a,l,h)),kp(t),m}function kp(t){Y.H=bo;var n=pt!==null&&pt.next!==null;if(mr=0,Ht=pt=Qe=null,du=!1,yo=0,el=null,n)throw Error(i(300));t===null||Ft||(t=t.dependencies,t!==null&&nu(t)&&(Ft=!0))}function Dp(t,n,a,l){Qe=t;var h=0;do{if(Ja&&(el=null),yo=0,Ja=!1,25<=h)throw Error(i(301));if(h+=1,Ht=pt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=g0,m=n(a,l)}while(Ja);return m}function t2(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?vo(n):n,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(Qe.flags|=1024),n}function zh(){var t=hu!==0;return hu=0,t}function Bh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function qh(t){if(du){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}du=!1}mr=0,Ht=pt=Qe=null,Ja=!1,yo=hu=0,el=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Qe.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Mt(){if(pt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var n=Ht===null?Qe.memoizedState:Ht.next;if(n!==null)Ht=n,pt=t;else{if(t===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ht===null?Qe.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(t){var n=yo;return yo+=1,el===null&&(el=[]),t=Ep(el,t,n),n=Qe,(Ht===null?n.memoizedState:Ht.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?m0:ef),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vo(t);if(t.$$typeof===fe)return an(t)}throw Error(i(438,String(t)))}function Hh(t){var n=null,a=Qe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=fu(),Qe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function gr(t,n){return typeof n=="function"?n(t):n}function gu(t){var n=Mt();return Fh(n,pt,t)}function Fh(t,n,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=x=null,D=null,F=n,te=!1;do{var ae=F.lane&-536870913;if(ae!==F.lane?(et&ae)===ae:(mr&ae)===ae){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ae===Qa&&(te=!0);else if((mr&G)===G){F=F.next,G===Qa&&(te=!0);continue}else ae={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=ae,x=m):D=D.next=ae,Qe.lanes|=G,ri|=G;ae=F.action,ca&&a(m,ae),m=F.hasEagerState?F.eagerState:a(m,ae)}else G={lane:ae,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=G,x=m):D=D.next=G,Qe.lanes|=ae,ri|=ae;F=F.next}while(F!==null&&F!==n);if(D===null?x=m:D.next=w,!Dn(m,t.memoizedState)&&(Ft=!0,te&&(a=$a,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gh(t){var n=Mt(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);Dn(m,n.memoizedState)||(Ft=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Mp(t,n,a){var l=Qe,h=Mt(),m=it;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=n();var x=!Dn((pt||h).memoizedState,a);if(x&&(h.memoizedState=a,Ft=!0),h=h.queue,Qh(Lp.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||Ht!==null&&Ht.memoizedState.tag&1){if(l.flags|=2048,tl(9,{destroy:void 0},Vp.bind(null,l,h,a,n),null),xt===null)throw Error(i(349));m||(mr&127)!==0||Op(l,n,a)}return a}function Op(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Qe.updateQueue,n===null?(n=fu(),Qe.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Vp(t,n,a,l){n.value=a,n.getSnapshot=l,Pp(n)&&Up(t)}function Lp(t,n,a){return a(function(){Pp(n)&&Up(t)})}function Pp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Dn(t,a)}catch{return!0}}function Up(t){var n=ea(t,2);n!==null&&An(n,t,2)}function Yh(t){var n=vn();if(typeof t=="function"){var a=t;if(t=a(),ca){Gn(!0);try{a()}finally{Gn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:t},n}function zp(t,n,a,l){return t.baseState=a,Fh(t,pt,typeof l=="function"?l:gr)}function n2(t,n,a,l,h){if(vu(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Bp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Bp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=Y.T,x={};Y.T=x;try{var w=a(h,l),D=Y.S;D!==null&&D(x,w),qp(t,n,w)}catch(F){Kh(t,n,F)}finally{m!==null&&x.types!==null&&(m.types=x.types),Y.T=m}}else try{m=a(h,l),qp(t,n,m)}catch(F){Kh(t,n,F)}}function qp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hp(t,n,l)},function(l){return Kh(t,n,l)}):Hp(t,n,a)}function Hp(t,n,a){n.status="fulfilled",n.value=a,Fp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Bp(t,a)))}function Kh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Fp(n),n=n.next;while(n!==l)}t.action=null}function Fp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Gp(t,n){return n}function Yp(t,n){if(it){var a=xt.formState;if(a!==null){e:{var l=Qe;if(it){if(_t){t:{for(var h=_t,m=es;h.nodeType!==8;){if(!m){h=null;break t}if(h=ns(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){_t=ns(h.nextSibling),l=h.data==="F!";break e}}$r(l)}l=!1}l&&(n=a[0])}}return a=vn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:n},a.queue=l,a=d0.bind(null,Qe,l),l.dispatch=a,l=Yh(!1),m=Jh.bind(null,Qe,!1,l.queue),l=vn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=n2.bind(null,Qe,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Kp(t){var n=Mt();return Qp(n,pt,t)}function Qp(t,n,a){if(n=Fh(t,n,Gp)[0],t=gu(gr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=vo(n)}catch(x){throw x===Xa?iu:x}else l=n;n=Mt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Qe.flags|=2048,tl(9,{destroy:void 0},s2.bind(null,h,a),null)),[l,m,t]}function s2(t,n){t.action=n}function $p(t){var n=Mt(),a=pt;if(a!==null)return Qp(n,a,t);Mt(),n=n.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function tl(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Qe.updateQueue,n===null&&(n=fu(),Qe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Xp(){return Mt().memoizedState}function pu(t,n,a,l){var h=vn();Qe.flags|=t,h.memoizedState=tl(1|n,{destroy:void 0},a,l===void 0?null:l)}function yu(t,n,a,l){var h=Mt();l=l===void 0?null:l;var m=h.memoizedState.inst;pt!==null&&l!==null&&Ph(l,pt.memoizedState.deps)?h.memoizedState=tl(n,m,a,l):(Qe.flags|=t,h.memoizedState=tl(1|n,m,a,l))}function Wp(t,n){pu(8390656,8,t,n)}function Qh(t,n){yu(2048,8,t,n)}function r2(t){Qe.flags|=4;var n=Qe.updateQueue;if(n===null)n=fu(),Qe.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Zp(t){var n=Mt().memoizedState;return r2({ref:n,nextImpl:t}),function(){if((ut&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Jp(t,n){return yu(4,2,t,n)}function e0(t,n){return yu(4,4,t,n)}function t0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function n0(t,n,a){a=a!=null?a.concat([t]):null,yu(4,4,t0.bind(null,n,t),a)}function $h(){}function s0(t,n){var a=Mt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Ph(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function r0(t,n){var a=Mt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Ph(n,l[1]))return l[0];if(l=t(),ca){Gn(!0);try{t()}finally{Gn(!1)}}return a.memoizedState=[l,n],l}function Xh(t,n,a){return a===void 0||(mr&1073741824)!==0&&(et&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=iy(),Qe.lanes|=t,ri|=t,a)}function i0(t,n,a,l){return Dn(a,n)?a:Za.current!==null?(t=Xh(t,a,l),Dn(t,n)||(Ft=!0),t):(mr&42)===0||(mr&1073741824)!==0&&(et&261930)===0?(Ft=!0,t.memoizedState=a):(t=iy(),Qe.lanes|=t,ri|=t,n)}function a0(t,n,a,l,h){var m=he.p;he.p=m!==0&&8>m?m:8;var x=Y.T,w={};Y.T=w,Jh(t,!1,n,a);try{var D=h(),F=Y.S;if(F!==null&&F(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=J1(D,l);xo(t,n,te,Un(t))}else xo(t,n,l,Un(t))}catch(ae){xo(t,n,{then:function(){},status:"rejected",reason:ae},Un())}finally{he.p=m,x!==null&&w.types!==null&&(x.types=w.types),Y.T=x}}function i2(){}function Wh(t,n,a,l){if(t.tag!==5)throw Error(i(476));var h=l0(t).queue;a0(t,h,n,_e,a===null?i2:function(){return o0(t),a(l)})}function l0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:_e},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function o0(t){var n=l0(t);n.next===null&&(n=t.alternate.memoizedState),xo(t,n.next.queue,{},Un())}function Zh(){return an(Vo)}function c0(){return Mt().memoizedState}function u0(){return Mt().memoizedState}function a2(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Un();t=Zr(a);var l=Jr(n,t,a);l!==null&&(An(l,n,a),mo(l,n,a)),n={cache:Ah()},t.payload=n;return}n=n.return}}function l2(t,n,a){var l=Un();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vu(t)?h0(n,a):(a=ph(t,n,a,l),a!==null&&(An(a,t,l),f0(a,n,l)))}function d0(t,n,a){var l=Un();xo(t,n,a,l)}function xo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(t))h0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,w=m(x,a);if(h.hasEagerState=!0,h.eagerState=w,Dn(w,x))return Zc(t,n,h,0),xt===null&&Wc(),!1}catch{}finally{}if(a=ph(t,n,h,l),a!==null)return An(a,t,l),f0(a,n,l),!0}return!1}function Jh(t,n,a,l){if(l={lane:2,revertLane:kf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vu(t)){if(n)throw Error(i(479))}else n=ph(t,a,l,2),n!==null&&An(n,t,2)}function vu(t){var n=t.alternate;return t===Qe||n!==null&&n===Qe}function h0(t,n){Ja=du=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function f0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,zl(t,a)}}var bo={readContext:an,use:mu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};bo.useEffectEvent=Ct;var m0={readContext:an,use:mu,useCallback:function(t,n){return vn().memoizedState=[t,n===void 0?null:n],t},useContext:an,useEffect:Wp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,pu(4194308,4,t0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return pu(4194308,4,t,n)},useInsertionEffect:function(t,n){pu(4,2,t,n)},useMemo:function(t,n){var a=vn();n=n===void 0?null:n;var l=t();if(ca){Gn(!0);try{t()}finally{Gn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=vn();if(a!==void 0){var h=a(n);if(ca){Gn(!0);try{a(n)}finally{Gn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=l2.bind(null,Qe,t),[l.memoizedState,t]},useRef:function(t){var n=vn();return t={current:t},n.memoizedState=t},useState:function(t){t=Yh(t);var n=t.queue,a=d0.bind(null,Qe,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:$h,useDeferredValue:function(t,n){var a=vn();return Xh(a,t,n)},useTransition:function(){var t=Yh(!1);return t=a0.bind(null,Qe,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Qe,h=vn();if(it){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),xt===null)throw Error(i(349));(et&127)!==0||Op(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Wp(Lp.bind(null,l,m,t),[t]),l.flags|=2048,tl(9,{destroy:void 0},Vp.bind(null,l,m,a,n),null),a},useId:function(){var t=vn(),n=xt.identifierPrefix;if(it){var a=Ks,l=Ys;a=(l&~(1<<32-It(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=hu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=e2++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Zh,useFormState:Yp,useActionState:Yp,useOptimistic:function(t){var n=vn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Jh.bind(null,Qe,!0,a),a.dispatch=n,[t,n]},useMemoCache:Hh,useCacheRefresh:function(){return vn().memoizedState=a2.bind(null,Qe)},useEffectEvent:function(t){var n=vn(),a={impl:t};return n.memoizedState=a,function(){if((ut&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},ef={readContext:an,use:mu,useCallback:s0,useContext:an,useEffect:Qh,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:r0,useReducer:gu,useRef:Xp,useState:function(){return gu(gr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Mt();return i0(a,pt.memoizedState,t,n)},useTransition:function(){var t=gu(gr)[0],n=Mt().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var a=Mt();return zp(a,pt,t,n)},useMemoCache:Hh,useCacheRefresh:u0};ef.useEffectEvent=Zp;var g0={readContext:an,use:mu,useCallback:s0,useContext:an,useEffect:Qh,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:r0,useReducer:Gh,useRef:Xp,useState:function(){return Gh(gr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Mt();return pt===null?Xh(a,t,n):i0(a,pt.memoizedState,t,n)},useTransition:function(){var t=Gh(gr)[0],n=Mt().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var a=Mt();return pt!==null?zp(a,pt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:u0};g0.useEffectEvent=Zp;function tf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:E({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var nf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Un(),h=Zr(l);h.payload=n,a!=null&&(h.callback=a),n=Jr(t,h,l),n!==null&&(An(n,t,l),mo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Un(),h=Zr(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Jr(t,h,l),n!==null&&(An(n,t,l),mo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Un(),l=Zr(a);l.tag=2,n!=null&&(l.callback=n),n=Jr(t,l,a),n!==null&&(An(n,t,a),mo(n,t,a))}};function p0(t,n,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!io(a,l)||!io(h,m):!0}function y0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&nf.enqueueReplaceState(n,n.state,null)}function ua(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function v0(t){Xc(t)}function x0(t){console.error(t)}function b0(t){Xc(t)}function xu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sf(t,n,a){return a=Zr(a),a.tag=3,a.payload={element:null},a.callback=function(){xu(t,n)},a}function w0(t){return t=Zr(t),t.tag=3,t}function E0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){_0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){_0(n,a,l),typeof h!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function o2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ka(n,a,h,!0),a=On.current,a!==null){switch(a.tag){case 31:case 13:return ts===null?Iu():a.alternate===null&&Rt===0&&(Rt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===au?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Cf(t,l,h)),!1;case 22:return a.flags|=65536,l===au?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Cf(t,l,h)),!1}throw Error(i(435,a.tag))}return Cf(t,l,h),Iu(),!1}if(it)return n=On.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==wh&&(t=Error(i(422),{cause:l}),oo(Wn(t,a)))):(l!==wh&&(n=Error(i(423),{cause:l}),oo(Wn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Wn(l,a),h=sf(t.stateNode,l,h),Dh(t,h),Rt!==4&&(Rt=2)),!1;var m=Error(i(520),{cause:l});if(m=Wn(m,a),jo===null?jo=[m]:jo.push(m),Rt!==4&&(Rt=2),n===null)return!0;l=Wn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=sf(a.stateNode,l,t),Dh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ii===null||!ii.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=w0(h),E0(h,t,a,l),Dh(a,h),!1}a=a.return}while(a!==null);return!1}var rf=Error(i(461)),Ft=!1;function ln(t,n,a,l){n.child=t===null?Ap(n,null,a,l):oa(n,t.child,a,l)}function T0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return ra(n),l=Uh(t,n,a,x,m,h),w=zh(),t!==null&&!Ft?(Bh(t,n,h),pr(t,n,h)):(it&&w&&bh(n),n.flags|=1,ln(t,n,l,h),n.child)}function S0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!yh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,N0(t,n,m,l,h)):(t=eu(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!ff(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:io,a(x,l)&&t.ref===n.ref)return pr(t,n,h)}return n.flags|=1,t=ur(m,l),t.ref=n.ref,t.return=n,n.child=t}function N0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(io(m,l)&&t.ref===n.ref)if(Ft=!1,n.pendingProps=l=m,ff(t,h))(t.flags&131072)!==0&&(Ft=!0);else return n.lanes=t.lanes,pr(t,n,h)}return af(t,n,a,l,h)}function A0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return j0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(n,m!==null?m.cachePool:null),m!==null?Rp(n,m):Oh(),Ip(n);else return l=n.lanes=536870912,j0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ru(n,m.cachePool),Rp(n,m),ti(),n.memoizedState=null):(t!==null&&ru(n,null),Oh(),ti());return ln(t,n,h,a),n.child}function _o(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function j0(t,n,a,l,h){var m=Ch();return m=m===null?null:{parent:qt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&ru(n,null),Oh(),Ip(n),t!==null&&Ka(t,n,l,!0),n.childLanes=h,null}function bu(t,n){return n=wu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function C0(t,n,a){return oa(n,t.child,null,a),t=bu(n,n.pendingProps),t.flags|=2,Vn(n),n.memoizedState=null,t}function c2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(it){if(l.mode==="hidden")return t=bu(n,l),n.lanes=536870912,_o(null,t);if(Lh(n),(t=_t)?(t=By(t,es),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Ys,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,rn=n,_t=null)):t=null,t===null)throw $r(n);return n.lanes=536870912,null}return bu(n,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Lh(n),h)if(n.flags&256)n.flags&=-257,n=C0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(Ft||Ka(t,n,a,!1),h=(a&t.childLanes)!==0,Ft||h){if(l=xt,l!==null&&(x=Bl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,ea(t,x),An(l,t,x),rf;Iu(),n=C0(t,n,a)}else t=m.treeContext,_t=ns(x.nextSibling),rn=n,it=!0,Qr=null,es=!1,t!==null&&gp(n,t),n=bu(n,l),n.flags|=4096;return n}return t=ur(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function _u(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function af(t,n,a,l,h){return ra(n),a=Uh(t,n,a,l,void 0,h),l=zh(),t!==null&&!Ft?(Bh(t,n,h),pr(t,n,h)):(it&&l&&bh(n),n.flags|=1,ln(t,n,a,h),n.child)}function R0(t,n,a,l,h,m){return ra(n),n.updateQueue=null,a=Dp(n,l,a,h),kp(t),l=zh(),t!==null&&!Ft?(Bh(t,n,m),pr(t,n,m)):(it&&l&&bh(n),n.flags|=1,ln(t,n,a,m),n.child)}function I0(t,n,a,l,h){if(ra(n),n.stateNode===null){var m=Ha,x=a.contextType;typeof x=="object"&&x!==null&&(m=an(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=nf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Ih(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?an(x):Ha,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(tf(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&nf.enqueueReplaceState(m,m.state,null),po(n,l,m,h),go(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=ua(a,w);m.props=D;var F=m.context,te=a.contextType;x=Ha,typeof te=="object"&&te!==null&&(x=an(te));var ae=a.getDerivedStateFromProps;te=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==x)&&y0(n,m,l,x),Wr=!1;var G=n.memoizedState;m.state=G,po(n,l,m,h),go(),F=n.memoizedState,w||G!==F||Wr?(typeof ae=="function"&&(tf(n,a,ae,l),F=n.memoizedState),(D=Wr||p0(n,a,D,l,G,F,x))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),m.props=l,m.state=F,m.context=x,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,kh(t,n),x=n.memoizedProps,te=ua(a,x),m.props=te,ae=n.pendingProps,G=m.context,F=a.contextType,D=Ha,typeof F=="object"&&F!==null&&(D=an(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ae||G!==D)&&y0(n,m,l,D),Wr=!1,G=n.memoizedState,m.state=G,po(n,l,m,h),go();var Q=n.memoizedState;x!==ae||G!==Q||Wr||t!==null&&t.dependencies!==null&&nu(t.dependencies)?(typeof w=="function"&&(tf(n,a,w,l),Q=n.memoizedState),(te=Wr||p0(n,a,te,l,G,Q,D)||t!==null&&t.dependencies!==null&&nu(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),m.props=l,m.state=Q,m.context=D,l=te):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,_u(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=oa(n,t.child,null,h),n.child=oa(n,null,a,h)):ln(t,n,a,h),n.memoizedState=m.state,t=n.child):t=pr(t,n,h),t}function k0(t,n,a,l){return na(),n.flags|=256,ln(t,n,a,l),n.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function of(t){return{baseLanes:t,cachePool:_p()}}function cf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Pn),t}function D0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(it){if(h?ei(n):ti(),(t=_t)?(t=By(t,es),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Ys,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,rn=n,_t=null)):t=null,t===null)throw $r(n);return Gf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(ti(),h=n.mode,w=wu({mode:"hidden",children:w},h),l=ta(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,x,a),n.memoizedState=lf,_o(null,l)):(ei(n),uf(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(ei(n),n.flags&=-257,n=df(t,n,a)):n.memoizedState!==null?(ti(),n.child=t.child,n.flags|=128,n=null):(ti(),w=l.fallback,h=n.mode,l=wu({mode:"visible",children:l.children},h),w=ta(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,oa(n,t.child,null,a),l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,x,a),n.memoizedState=lf,n=_o(null,l));else if(ei(n),Gf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var F=x.dgst;x=F,l=Error(i(419)),l.stack="",l.digest=x,oo({value:l,source:null,stack:null}),n=df(t,n,a)}else if(Ft||Ka(t,n,a,!1),x=(a&t.childLanes)!==0,Ft||x){if(x=xt,x!==null&&(l=Bl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ea(t,l),An(x,t,l),rf;Ff(w)||Iu(),n=df(t,n,a)}else Ff(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,_t=ns(w.nextSibling),rn=n,it=!0,Qr=null,es=!1,t!==null&&gp(n,t),n=uf(n,l.children),n.flags|=4096);return n}return h?(ti(),w=l.fallback,h=n.mode,D=t.child,F=D.sibling,l=ur(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?w=ur(F,w):(w=ta(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,_o(null,l),l=n.child,w=t.child.memoizedState,w===null?w=of(a):(h=w.cachePool,h!==null?(D=qt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=_p(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=cf(t,x,a),n.memoizedState=lf,_o(t.child,l)):(ei(n),a=t.child,t=a.sibling,a=ur(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function uf(t,n){return n=wu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function wu(t,n){return t=Mn(22,t,null,n),t.lanes=0,t}function df(t,n,a){return oa(n,t.child,null,a),t=uf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function M0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Sh(t.return,n,a)}function hf(t,n,a,l,h,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=m)}function O0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var x=Dt.current,w=(x&2)!==0;if(w?(x=x&1|2,n.flags|=128):x&=1,se(Dt,x),ln(t,n,l,a),l=it?lo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,a,n);else if(t.tag===19)M0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),hf(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&uu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}hf(n,!0,a,null,m,l);break;case"together":hf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function pr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ri|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ka(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,a=ur(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=ur(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function ff(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&nu(t)))}function u2(t,n,a){switch(n.tag){case 3:Ne(n,n.stateNode.containerInfo),Xr(n,qt,t.memoizedState.cache),na();break;case 27:case 5:Ye(n);break;case 4:Ne(n,n.stateNode.containerInfo);break;case 10:Xr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Lh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ei(n),n.flags|=128,null):(a&n.child.childLanes)!==0?D0(t,n,a):(ei(n),t=pr(t,n,a),t!==null?t.sibling:null);ei(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ka(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return O0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Dt,Dt.current),l)break;return null;case 22:return n.lanes=0,A0(t,n,a,n.pendingProps);case 24:Xr(n,qt,t.memoizedState.cache)}return pr(t,n,a)}function V0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ft=!0;else{if(!ff(t,a)&&(n.flags&128)===0)return Ft=!1,u2(t,n,a);Ft=(t.flags&131072)!==0}else Ft=!1,it&&(n.flags&1048576)!==0&&mp(n,lo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=aa(n.elementType),n.type=t,typeof t=="function")yh(t)?(l=ua(t,l),n.tag=1,n=I0(null,n,t,l,a)):(n.tag=0,n=af(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===de){n.tag=11,n=T0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=S0(null,n,t,l,a);break e}}throw n=le(t)||t,Error(i(306,n,""))}}return n;case 0:return af(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=ua(l,n.pendingProps),I0(t,n,l,h,a);case 3:e:{if(Ne(n,n.stateNode.containerInfo),t===null)throw Error(i(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,kh(t,n),po(n,l,null,a);var x=n.memoizedState;if(l=x.cache,Xr(n,qt,l),l!==m.cache&&Nh(n,[qt],a,!0),go(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=k0(t,n,l,a);break e}else if(l!==h){h=Wn(Error(i(424)),n),oo(h),n=k0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=ns(t.firstChild),rn=n,it=!0,Qr=null,es=!0,a=Ap(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(na(),l===h){n=pr(t,n,a);break e}ln(t,n,l,a)}n=n.child}return n;case 26:return _u(t,n),t===null?(a=Ky(n.type,null,n.pendingProps,null))?n.memoizedState=a:it||(a=n.type,t=n.pendingProps,l=Pu(Z.current).createElement(a),l[Ut]=n,l[Zt]=t,on(l,a,t),zt(l),n.stateNode=l):n.memoizedState=Ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Ye(n),t===null&&it&&(l=n.stateNode=Fy(n.type,n.pendingProps,Z.current),rn=n,es=!0,h=_t,ci(n.type)?(Yf=h,_t=ns(l.firstChild)):_t=h),ln(t,n,n.pendingProps.children,a),_u(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&it&&((h=l=_t)&&(l=z2(l,n.type,n.pendingProps,es),l!==null?(n.stateNode=l,rn=n,_t=ns(l.firstChild),es=!1,h=!0):h=!1),h||$r(n)),Ye(n),h=n.type,m=n.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,Bf(h,m)?l=null:x!==null&&Bf(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=Uh(t,n,t2,null,null,a),Vo._currentValue=h),_u(t,n),ln(t,n,l,a),n.child;case 6:return t===null&&it&&((t=a=_t)&&(a=B2(a,n.pendingProps,es),a!==null?(n.stateNode=a,rn=n,_t=null,t=!0):t=!1),t||$r(n)),null;case 13:return D0(t,n,a);case 4:return Ne(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=oa(n,null,l,a):ln(t,n,l,a),n.child;case 11:return T0(t,n,n.type,n.pendingProps,a);case 7:return ln(t,n,n.pendingProps,a),n.child;case 8:return ln(t,n,n.pendingProps.children,a),n.child;case 12:return ln(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Xr(n,n.type,l.value),ln(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ra(n),h=an(h),l=l(h),n.flags|=1,ln(t,n,l,a),n.child;case 14:return S0(t,n,n.type,n.pendingProps,a);case 15:return N0(t,n,n.type,n.pendingProps,a);case 19:return O0(t,n,a);case 31:return c2(t,n,a);case 22:return A0(t,n,a,n.pendingProps);case 24:return ra(n),l=an(qt),t===null?(h=Ch(),h===null&&(h=xt,m=Ah(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},Ih(n),Xr(n,qt,h)):((t.lanes&a)!==0&&(kh(t,n),po(n,null,null,a),go()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Xr(n,qt,l)):(l=m.cache,Xr(n,qt,l),l!==h.cache&&Nh(n,[qt],a,!0))),ln(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function yr(t){t.flags|=4}function mf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(cy())t.flags|=8192;else throw la=au,Rh}else t.flags&=-16777217}function L0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zy(n))if(cy())t.flags|=8192;else throw la=au,Rh}function Eu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Cc():536870912,t.lanes|=n,il|=n)}function wo(t,n){if(!it)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function wt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function d2(t,n,a){var l=n.pendingProps;switch(_h(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(n),null;case 1:return wt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),fr(qt),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ya(n)?yr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Eh())),wt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(yr(n),m!==null?(wt(n),L0(n,m)):(wt(n),mf(n,h,null,l,a))):m?m!==t.memoizedState?(yr(n),wt(n),L0(n,m)):(wt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&yr(n),wt(n),mf(n,h,t,l,a)),null;case 27:if(ce(n),a=Z.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&yr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return wt(n),null}t=O.current,Ya(n)?pp(n):(t=Fy(h,l,a),n.stateNode=t,yr(n))}return wt(n),null;case 5:if(ce(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&yr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return wt(n),null}if(m=O.current,Ya(n))pp(n);else{var x=Pu(Z.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}m[Ut]=n,m[Zt]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;e:switch(on(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&yr(n)}}return wt(n),mf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&yr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(t=Z.current,Ya(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ut]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dy(t.nodeValue,a)),t||$r(n,!0)}else t=Pu(t).createTextNode(l),t[Ut]=n,n.stateNode=t}return wt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ya(n),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ut]=n}else na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;wt(n),t=!1}else a=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Vn(n),n):(Vn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return wt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ya(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ut]=n}else na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;wt(n),h=!1}else h=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Vn(n),n):(Vn(n),null)}return Vn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Eu(n,n.updateQueue),wt(n),null);case 4:return ke(),t===null&&Vf(n.stateNode.containerInfo),wt(n),null;case 10:return fr(n.type),wt(n),null;case 19:if(P(Dt),l=n.memoizedState,l===null)return wt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)wo(l,!1);else{if(Rt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=uu(t),m!==null){for(n.flags|=128,wo(l,!1),t=m.updateQueue,n.updateQueue=t,Eu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)dp(a,t),a=a.sibling;return se(Dt,Dt.current&1|2),it&&dr(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&jt()>ju&&(n.flags|=128,h=!0,wo(l,!1),n.lanes=4194304)}else{if(!h)if(t=uu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Eu(n,t),wo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!it)return wt(n),null}else 2*jt()-l.renderingStartTime>ju&&a!==536870912&&(n.flags|=128,h=!0,wo(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jt(),t.sibling=null,a=Dt.current,se(Dt,h?a&1|2:a&1),it&&dr(n,l.treeForkCount),t):(wt(n),null);case 22:case 23:return Vn(n),Vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(wt(n),n.subtreeFlags&6&&(n.flags|=8192)):wt(n),a=n.updateQueue,a!==null&&Eu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&P(ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),fr(qt),wt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function h2(t,n){switch(_h(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return fr(qt),ke(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return ce(n),null;case 31:if(n.memoizedState!==null){if(Vn(n),n.alternate===null)throw Error(i(340));na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Vn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(Dt),null;case 4:return ke(),null;case 10:return fr(n.type),null;case 22:case 23:return Vn(n),Vh(),t!==null&&P(ia),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return fr(qt),null;case 25:return null;default:return null}}function P0(t,n){switch(_h(n),n.tag){case 3:fr(qt),ke();break;case 26:case 27:case 5:ce(n);break;case 4:ke();break;case 31:n.memoizedState!==null&&Vn(n);break;case 13:Vn(n);break;case 19:P(Dt);break;case 10:fr(n.type);break;case 22:case 23:Vn(n),Vh(),t!==null&&P(ia);break;case 24:fr(qt)}}function Eo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(w){mt(n,n.return,w)}}function ni(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=n;var D=a,F=w;try{F()}catch(te){mt(h,D,te)}}}l=l.next}while(l!==m)}}catch(te){mt(n,n.return,te)}}function U0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Cp(n,a)}catch(l){mt(t,t.return,l)}}}function z0(t,n,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){mt(t,n,l)}}function To(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){mt(t,n,h)}}function Qs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){mt(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){mt(t,n,h)}else a.current=null}function B0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){mt(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;M2(l,t.type,a,n),l[Zt]=n}catch(h){mt(t,t.return,h)}}function q0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ci(t.type)||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ms));else if(l!==4&&(l===27&&ci(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(yf(t,n,a),t=t.sibling;t!==null;)yf(t,n,a),t=t.sibling}function Tu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ci(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tu(t,n,a),t=t.sibling;t!==null;)Tu(t,n,a),t=t.sibling}function H0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);on(n,l,a),n[Ut]=t,n[Zt]=a}catch(m){mt(t,t.return,m)}}var vr=!1,Gt=!1,vf=!1,F0=typeof WeakSet=="function"?WeakSet:Set,en=null;function f2(t,n){if(t=t.containerInfo,Uf=Gu,t=np(t),uh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,w=-1,D=-1,F=0,te=0,ae=t,G=null;t:for(;;){for(var Q;ae!==a||h!==0&&ae.nodeType!==3||(w=x+h),ae!==m||l!==0&&ae.nodeType!==3||(D=x+l),ae.nodeType===3&&(x+=ae.nodeValue.length),(Q=ae.firstChild)!==null;)G=ae,ae=Q;for(;;){if(ae===t)break t;if(G===a&&++F===h&&(w=x),G===m&&++te===l&&(D=x),(Q=ae.nextSibling)!==null)break;ae=G,G=ae.parentNode}ae=Q}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(zf={focusedElem:t,selectionRange:a},Gu=!1,en=n;en!==null;)if(n=en,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,en=t;else for(;en!==null;){switch(n=en,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Se=ua(a.type,h);t=l.getSnapshotBeforeUpdate(Se,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Le){mt(a,a.return,Le)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Hf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,en=t;break}en=n.return}}function G0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:br(t,a),l&4&&Eo(5,a);break;case 1:if(br(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){mt(a,a.return,x)}else{var h=ua(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){mt(a,a.return,x)}}l&64&&U0(a),l&512&&To(a,a.return);break;case 3:if(br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Cp(t,n)}catch(x){mt(a,a.return,x)}}break;case 27:n===null&&l&4&&H0(a);case 26:case 5:br(t,a),n===null&&l&4&&B0(a),l&512&&To(a,a.return);break;case 12:br(t,a);break;case 31:br(t,a),l&4&&Q0(t,a);break;case 13:br(t,a),l&4&&$0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=w2.bind(null,a),q2(t,a))));break;case 22:if(l=a.memoizedState!==null||vr,!l){n=n!==null&&n.memoizedState!==null||Gt,h=vr;var m=Gt;vr=l,(Gt=n)&&!m?_r(t,a,(a.subtreeFlags&8772)!==0):br(t,a),vr=h,Gt=m}break;case 30:break;default:br(t,a)}}function Y0(t){var n=t.alternate;n!==null&&(t.alternate=null,Y0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ca(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nt=null,En=!1;function xr(t,n,a){for(a=a.child;a!==null;)K0(t,n,a),a=a.sibling}function K0(t,n,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(us,a)}catch{}switch(a.tag){case 26:Gt||Qs(a,n),xr(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||Qs(a,n);var l=Nt,h=En;ci(a.type)&&(Nt=a.stateNode,En=!1),xr(t,n,a),Do(a.stateNode),Nt=l,En=h;break;case 5:Gt||Qs(a,n);case 6:if(l=Nt,h=En,Nt=null,xr(t,n,a),Nt=l,En=h,Nt!==null)if(En)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(a.stateNode)}catch(m){mt(a,n,m)}else try{Nt.removeChild(a.stateNode)}catch(m){mt(a,n,m)}break;case 18:Nt!==null&&(En?(t=Nt,Uy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fl(t)):Uy(Nt,a.stateNode));break;case 4:l=Nt,h=En,Nt=a.stateNode.containerInfo,En=!0,xr(t,n,a),Nt=l,En=h;break;case 0:case 11:case 14:case 15:ni(2,a,n),Gt||ni(4,a,n),xr(t,n,a);break;case 1:Gt||(Qs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&z0(a,n,l)),xr(t,n,a);break;case 21:xr(t,n,a);break;case 22:Gt=(l=Gt)||a.memoizedState!==null,xr(t,n,a),Gt=l;break;default:xr(t,n,a)}}function Q0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fl(t)}catch(a){mt(n,n.return,a)}}}function $0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(a){mt(n,n.return,a)}}function m2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new F0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new F0),n;default:throw Error(i(435,t.tag))}}function Su(t,n){var a=m2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=E2.bind(null,t,l);l.then(h,h)}})}function Tn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(ci(w.type)){Nt=w.stateNode,En=!1;break e}break;case 5:Nt=w.stateNode,En=!1;break e;case 3:case 4:Nt=w.stateNode.containerInfo,En=!0;break e}w=w.return}if(Nt===null)throw Error(i(160));K0(m,x,h),Nt=null,En=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)X0(n,t),n=n.sibling}var bs=null;function X0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(n,t),Sn(t),l&4&&(ni(3,t,t.return),Eo(3,t),ni(5,t,t.return));break;case 1:Tn(n,t),Sn(t),l&512&&(Gt||a===null||Qs(a,a.return)),l&64&&vr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=bs;if(Tn(n,t),Sn(t),l&512&&(Gt||a===null||Qs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ms]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),on(m,l,a),m[Ut]=t,zt(m),l=m;break e;case"link":var x=Xy("link","href",h).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;case"meta":if(x=Xy("meta","content",h).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ut]=t,zt(m),l=m}t.stateNode=l}else Wy(h,t.type,t.stateNode);else t.stateNode=$y(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Wy(h,t.type,t.stateNode):$y(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Tn(n,t),Sn(t),l&512&&(Gt||a===null||Qs(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Tn(n,t),Sn(t),l&512&&(Gt||a===null||Qs(a,a.return)),t.flags&32){h=t.stateNode;try{wn(h,"")}catch(Se){mt(t,t.return,Se)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(vf=!0);break;case 6:if(Tn(n,t),Sn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Se){mt(t,t.return,Se)}}break;case 3:if(Bu=null,h=bs,bs=Uu(n.containerInfo),Tn(n,t),bs=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fl(n.containerInfo)}catch(Se){mt(t,t.return,Se)}vf&&(vf=!1,W0(t));break;case 4:l=bs,bs=Uu(t.stateNode.containerInfo),Tn(n,t),Sn(t),bs=l;break;case 12:Tn(n,t),Sn(t);break;case 31:Tn(n,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Tn(n,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Au=jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=vr,te=Gt;if(vr=F||h,Gt=te||D,Tn(n,t),Gt=te,vr=F,Sn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||vr||Gt||da(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=D.stateNode;var ae=D.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Se){mt(D,D.return,Se)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Se){mt(D,D.return,Se)}}}else if(n.tag===18){if(a===null){D=n;try{var Q=D.stateNode;h?zy(Q,!0):zy(D.stateNode,!1)}catch(Se){mt(D,D.return,Se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Su(t,a))));break;case 19:Tn(n,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Tn(n,t),Sn(t)}}function Sn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(q0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=pf(t);Tu(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(wn(x,""),a.flags&=-33);var w=pf(t);Tu(t,w,x);break;case 3:case 4:var D=a.stateNode.containerInfo,F=pf(t);yf(t,F,D);break;default:throw Error(i(161))}}catch(te){mt(t,t.return,te)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function W0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;W0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function br(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)G0(t,n.alternate,n),n=n.sibling}function da(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ni(4,n,n.return),da(n);break;case 1:Qs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&z0(n,n.return,a),da(n);break;case 27:Do(n.stateNode);case 26:case 5:Qs(n,n.return),da(n);break;case 22:n.memoizedState===null&&da(n);break;case 30:da(n);break;default:da(n)}t=t.sibling}}function _r(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:_r(h,m,a),Eo(4,m);break;case 1:if(_r(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){mt(l,l.return,F)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)jp(D[h],w)}catch(F){mt(l,l.return,F)}}a&&x&64&&U0(m),To(m,m.return);break;case 27:H0(m);case 26:case 5:_r(h,m,a),a&&l===null&&x&4&&B0(m),To(m,m.return);break;case 12:_r(h,m,a);break;case 31:_r(h,m,a),a&&x&4&&Q0(h,m);break;case 13:_r(h,m,a),a&&x&4&&$0(h,m);break;case 22:m.memoizedState===null&&_r(h,m,a),To(m,m.return);break;case 30:break;default:_r(h,m,a)}n=n.sibling}}function xf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&co(a))}function bf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&co(t))}function _s(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Z0(t,n,a,l),n=n.sibling}function Z0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:_s(t,n,a,l),h&2048&&Eo(9,n);break;case 1:_s(t,n,a,l);break;case 3:_s(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&co(t)));break;case 12:if(h&2048){_s(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){mt(n,n.return,D)}}else _s(t,n,a,l);break;case 31:_s(t,n,a,l);break;case 13:_s(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?_s(t,n,a,l):So(t,n):m._visibility&2?_s(t,n,a,l):(m._visibility|=2,nl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&xf(x,n);break;case 24:_s(t,n,a,l),h&2048&&bf(n.alternate,n);break;default:_s(t,n,a,l)}}function nl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,x=n,w=a,D=l,F=x.flags;switch(x.tag){case 0:case 11:case 15:nl(m,x,w,D,h),Eo(8,x);break;case 23:break;case 22:var te=x.stateNode;x.memoizedState!==null?te._visibility&2?nl(m,x,w,D,h):So(m,x):(te._visibility|=2,nl(m,x,w,D,h)),h&&F&2048&&xf(x.alternate,x);break;case 24:nl(m,x,w,D,h),h&&F&2048&&bf(x.alternate,x);break;default:nl(m,x,w,D,h)}n=n.sibling}}function So(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:So(a,l),h&2048&&xf(l.alternate,l);break;case 24:So(a,l),h&2048&&bf(l.alternate,l);break;default:So(a,l)}n=n.sibling}}var No=8192;function sl(t,n,a){if(t.subtreeFlags&No)for(t=t.child;t!==null;)J0(t,n,a),t=t.sibling}function J0(t,n,a){switch(t.tag){case 26:sl(t,n,a),t.flags&No&&t.memoizedState!==null&&ew(a,bs,t.memoizedState,t.memoizedProps);break;case 5:sl(t,n,a);break;case 3:case 4:var l=bs;bs=Uu(t.stateNode.containerInfo),sl(t,n,a),bs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=No,No=16777216,sl(t,n,a),No=l):sl(t,n,a));break;default:sl(t,n,a)}}function ey(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ao(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];en=l,ny(l,t)}ey(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ty(t),t=t.sibling}function ty(t){switch(t.tag){case 0:case 11:case 15:Ao(t),t.flags&2048&&ni(9,t,t.return);break;case 3:Ao(t);break;case 12:Ao(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Nu(t)):Ao(t);break;default:Ao(t)}}function Nu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];en=l,ny(l,t)}ey(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ni(8,n,n.return),Nu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(n));break;default:Nu(n)}t=t.sibling}}function ny(t,n){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:ni(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:co(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,en=l;else e:for(a=t;en!==null;){l=en;var h=l.sibling,m=l.return;if(Y0(l),l===a){en=null;break e}if(h!==null){h.return=m,en=h;break e}en=m}}}var g2={getCacheForType:function(t){var n=an(qt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return an(qt).controller.signal}},p2=typeof WeakMap=="function"?WeakMap:Map,ut=0,xt=null,Ze=null,et=0,ft=0,Ln=null,si=!1,rl=!1,_f=!1,wr=0,Rt=0,ri=0,ha=0,wf=0,Pn=0,il=0,jo=null,Nn=null,Ef=!1,Au=0,sy=0,ju=1/0,Cu=null,ii=null,Xt=0,ai=null,al=null,Er=0,Tf=0,Sf=null,ry=null,Co=0,Nf=null;function Un(){return(ut&2)!==0&&et!==0?et&-et:Y.T!==null?kf():Rc()}function iy(){if(Pn===0)if((et&536870912)===0||it){var t=Ui;Ui<<=1,(Ui&3932160)===0&&(Ui=262144),Pn=t}else Pn=536870912;return t=On.current,t!==null&&(t.flags|=32),Pn}function An(t,n,a){(t===xt&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(ll(t,0),li(t,et,Pn,!1)),zi(t,a),((ut&2)===0||t!==xt)&&(t===xt&&((ut&2)===0&&(ha|=a),Rt===4&&li(t,et,Pn,!1)),$s(t))}function ay(t,n,a){if((ut&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||ds(t,n),h=l?x2(t,n):jf(t,n,!0),m=l;do{if(h===0){rl&&!l&&li(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!y2(a)){h=jf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var w=t;h=jo;var D=w.current.memoizedState.isDehydrated;if(D&&(ll(w,x).flags|=256),x=jf(w,x,!1),x!==2){if(_f&&!D){w.errorRecoveryDisabledLanes|=m,ha|=m,h=4;break e}m=Nn,Nn=h,m!==null&&(Nn===null?Nn=m:Nn.push.apply(Nn,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){ll(t,0),li(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:li(l,n,Pn,!si);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Au+300-jt(),10<h)){if(li(l,n,Pn,!si),Is(l,0,!0)!==0)break e;Er=n,l.timeoutHandle=Ly(ly.bind(null,l,a,Nn,Cu,Ef,n,Pn,ha,il,si,m,"Throttled",-0,0),h);break e}ly(l,a,Nn,Cu,Ef,n,Pn,ha,il,si,m,null,-0,0)}}break}while(!0);$s(t)}function ly(t,n,a,l,h,m,x,w,D,F,te,ae,G,Q){if(t.timeoutHandle=-1,ae=n.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},J0(n,m,ae);var Se=(m&62914560)===m?Au-jt():(m&4194048)===m?sy-jt():0;if(Se=tw(ae,Se),Se!==null){Er=m,t.cancelPendingCommit=Se(gy.bind(null,t,n,m,a,l,h,x,w,D,te,ae,null,G,Q)),li(t,m,x,!F);return}}gy(t,n,m,a,l,h,x,w,D)}function y2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Dn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function li(t,n,a,l){n&=~wf,n&=~ha,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-It(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Bi(t,a,n)}function Ru(){return(ut&6)===0?(Ro(0),!1):!0}function Af(){if(Ze!==null){if(ft===0)var t=Ze.return;else t=Ze,hr=sa=null,qh(t),Wa=null,ho=0,t=Ze;for(;t!==null;)P0(t.alternate,t),t=t.return;Ze=null}}function ll(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,L2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Er=0,Af(),xt=t,Ze=a=ur(t.current,null),et=n,ft=0,Ln=null,si=!1,rl=ds(t,n),_f=!1,il=Pn=wf=ha=ri=Rt=0,Nn=jo=null,Ef=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-It(l),m=1<<h;n|=t[h],l&=~m}return wr=n,Wc(),a}function oy(t,n){Qe=null,Y.H=bo,n===Xa||n===iu?(n=Tp(),ft=3):n===Rh?(n=Tp(),ft=4):ft=n===rf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,Ze===null&&(Rt=1,xu(t,Wn(n,t.current)))}function cy(){var t=On.current;return t===null?!0:(et&4194048)===et?ts===null:(et&62914560)===et||(et&536870912)!==0?t===ts:!1}function uy(){var t=Y.H;return Y.H=bo,t===null?bo:t}function dy(){var t=Y.A;return Y.A=g2,t}function Iu(){Rt=4,si||(et&4194048)!==et&&On.current!==null||(rl=!0),(ri&134217727)===0&&(ha&134217727)===0||xt===null||li(xt,et,Pn,!1)}function jf(t,n,a){var l=ut;ut|=2;var h=uy(),m=dy();(xt!==t||et!==n)&&(Cu=null,ll(t,n)),n=!1;var x=Rt;e:do try{if(ft!==0&&Ze!==null){var w=Ze,D=Ln;switch(ft){case 8:Af(),x=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(n=!0);var F=ft;if(ft=0,Ln=null,ol(t,w,D,F),a&&rl){x=0;break e}break;default:F=ft,ft=0,Ln=null,ol(t,w,D,F)}}v2(),x=Rt;break}catch(te){oy(t,te)}while(!0);return n&&t.shellSuspendCounter++,hr=sa=null,ut=l,Y.H=h,Y.A=m,Ze===null&&(xt=null,et=0,Wc()),x}function v2(){for(;Ze!==null;)hy(Ze)}function x2(t,n){var a=ut;ut|=2;var l=uy(),h=dy();xt!==t||et!==n?(Cu=null,ju=jt()+500,ll(t,n)):rl=ds(t,n);e:do try{if(ft!==0&&Ze!==null){n=Ze;var m=Ln;t:switch(ft){case 1:ft=0,Ln=null,ol(t,n,m,1);break;case 2:case 9:if(wp(m)){ft=0,Ln=null,fy(n);break}n=function(){ft!==2&&ft!==9||xt!==t||(ft=7),$s(t)},m.then(n,n);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:wp(m)?(ft=0,Ln=null,fy(n)):(ft=0,Ln=null,ol(t,n,m,7));break;case 5:var x=null;switch(Ze.tag){case 26:x=Ze.memoizedState;case 5:case 27:var w=Ze;if(x?Zy(x):w.stateNode.complete){ft=0,Ln=null;var D=w.sibling;if(D!==null)Ze=D;else{var F=w.return;F!==null?(Ze=F,ku(F)):Ze=null}break t}}ft=0,Ln=null,ol(t,n,m,5);break;case 6:ft=0,Ln=null,ol(t,n,m,6);break;case 8:Af(),Rt=6;break e;default:throw Error(i(462))}}b2();break}catch(te){oy(t,te)}while(!0);return hr=sa=null,Y.H=l,Y.A=h,ut=a,Ze!==null?0:(xt=null,et=0,Wc(),Rt)}function b2(){for(;Ze!==null&&!je();)hy(Ze)}function hy(t){var n=V0(t.alternate,t,wr);t.memoizedProps=t.pendingProps,n===null?ku(t):Ze=n}function fy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=R0(a,n,n.pendingProps,n.type,void 0,et);break;case 11:n=R0(a,n,n.pendingProps,n.type.render,n.ref,et);break;case 5:qh(n);default:P0(a,n),n=Ze=dp(n,wr),n=V0(a,n,wr)}t.memoizedProps=t.pendingProps,n===null?ku(t):Ze=n}function ol(t,n,a,l){hr=sa=null,qh(n),Wa=null,ho=0;var h=n.return;try{if(o2(t,h,n,a,et)){Rt=1,xu(t,Wn(a,t.current)),Ze=null;return}}catch(m){if(h!==null)throw Ze=h,m;Rt=1,xu(t,Wn(a,t.current)),Ze=null;return}n.flags&32768?(it||l===1?t=!0:rl||(et&536870912)!==0?t=!1:(si=t=!0,(l===2||l===9||l===3||l===6)&&(l=On.current,l!==null&&l.tag===13&&(l.flags|=16384))),my(n,t)):ku(n)}function ku(t){var n=t;do{if((n.flags&32768)!==0){my(n,si);return}t=n.return;var a=d2(n.alternate,n,wr);if(a!==null){Ze=a;return}if(n=n.sibling,n!==null){Ze=n;return}Ze=n=t}while(n!==null);Rt===0&&(Rt=5)}function my(t,n){do{var a=h2(t.alternate,t);if(a!==null){a.flags&=32767,Ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=a}while(t!==null);Rt=6,Ze=null}function gy(t,n,a,l,h,m,x,w,D){t.cancelPendingCommit=null;do Du();while(Xt!==0);if((ut&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=gh,ah(t,a,m,x,w,D),t===xt&&(Ze=xt=null,et=0),al=n,ai=t,Er=a,Tf=m,Sf=h,ry=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T2(js,function(){return by(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,h=he.p,he.p=2,x=ut,ut|=4;try{f2(t,n,a)}finally{ut=x,he.p=h,Y.T=l}}Xt=1,py(),yy(),vy()}}function py(){if(Xt===1){Xt=0;var t=ai,n=al,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=he.p;he.p=2;var h=ut;ut|=4;try{X0(n,t);var m=zf,x=np(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&tp(w.ownerDocument.documentElement,w)){if(D!==null&&uh(w)){var F=D.start,te=D.end;if(te===void 0&&(te=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(te,w.value.length);else{var ae=w.ownerDocument||document,G=ae&&ae.defaultView||window;if(G.getSelection){var Q=G.getSelection(),Se=w.textContent.length,Le=Math.min(D.start,Se),vt=D.end===void 0?Le:Math.min(D.end,Se);!Q.extend&&Le>vt&&(x=vt,vt=Le,Le=x);var U=ep(w,Le),V=ep(w,vt);if(U&&V&&(Q.rangeCount!==1||Q.anchorNode!==U.node||Q.anchorOffset!==U.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var H=ae.createRange();H.setStart(U.node,U.offset),Q.removeAllRanges(),Le>vt?(Q.addRange(H),Q.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),Q.addRange(H))}}}}for(ae=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ae.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var re=ae[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Gu=!!Uf,zf=Uf=null}finally{ut=h,he.p=l,Y.T=a}}t.current=n,Xt=2}}function yy(){if(Xt===2){Xt=0;var t=ai,n=al,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=he.p;he.p=2;var h=ut;ut|=4;try{G0(t,n.alternate,n)}finally{ut=h,he.p=l,Y.T=a}}Xt=3}}function vy(){if(Xt===4||Xt===3){Xt=0,We();var t=ai,n=al,a=Er,l=ry;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xt=5:(Xt=0,al=ai=null,xy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ii=null),ar(a),n=n.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(us,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Y.T,h=he.p,he.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var w=l[x];m(w.value,{componentStack:w.stack})}}finally{Y.T=n,he.p=h}}(Er&3)!==0&&Du(),$s(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Nf?Co++:(Co=0,Nf=t):Co=0,Ro(0)}}function xy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,co(n)))}function Du(){return py(),yy(),vy(),by()}function by(){if(Xt!==5)return!1;var t=ai,n=Tf;Tf=0;var a=ar(Er),l=Y.T,h=he.p;try{he.p=32>a?32:a,Y.T=null,a=Sf,Sf=null;var m=ai,x=Er;if(Xt=0,al=ai=null,Er=0,(ut&6)!==0)throw Error(i(331));var w=ut;if(ut|=4,ty(m.current),Z0(m,m.current,x,a),ut=w,Ro(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(us,m)}catch{}return!0}finally{he.p=h,Y.T=l,xy(t,n)}}function _y(t,n,a){n=Wn(a,n),n=sf(t.stateNode,n,2),t=Jr(t,n,2),t!==null&&(zi(t,2),$s(t))}function mt(t,n,a){if(t.tag===3)_y(t,t,a);else for(;n!==null;){if(n.tag===3){_y(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ii===null||!ii.has(l))){t=Wn(a,t),a=w0(2),l=Jr(n,a,2),l!==null&&(E0(a,l,n,t),zi(l,2),$s(l));break}}n=n.return}}function Cf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new p2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(_f=!0,h.add(a),t=_2.bind(null,t,n,a),n.then(t,t))}function _2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,xt===t&&(et&a)===a&&(Rt===4||Rt===3&&(et&62914560)===et&&300>jt()-Au?(ut&2)===0&&ll(t,0):wf|=a,il===et&&(il=0)),$s(t)}function wy(t,n){n===0&&(n=Cc()),t=ea(t,n),t!==null&&(zi(t,n),$s(t))}function w2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),wy(t,a)}function E2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),wy(t,a)}function T2(t,n){return Ve(t,n)}var Mu=null,cl=null,Rf=!1,Ou=!1,If=!1,oi=0;function $s(t){t!==cl&&t.next===null&&(cl===null?Mu=cl=t:cl=cl.next=t),Ou=!0,Rf||(Rf=!0,N2())}function Ro(t,n){if(!If&&Ou){If=!0;do for(var a=!1,l=Mu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-It(42|t)+1)-1,m&=h&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ny(l,m))}else m=et,m=Is(l,l===xt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ds(l,m)||(a=!0,Ny(l,m));l=l.next}while(a);If=!1}}function S2(){Ey()}function Ey(){Ou=Rf=!1;var t=0;oi!==0&&V2()&&(t=oi);for(var n=jt(),a=null,l=Mu;l!==null;){var h=l.next,m=Ty(l,n);m===0?(l.next=null,a===null?Mu=h:a.next=h,h===null&&(cl=a)):(a=l,(t!==0||(m&3)!==0)&&(Ou=!0)),l=h}Xt!==0&&Xt!==5||Ro(t),oi!==0&&(oi=0)}function Ty(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-It(m),w=1<<x,D=h[x];D===-1?((w&a)===0||(w&l)!==0)&&(h[x]=ih(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=xt,a=et,a=Is(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&me(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ds(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&me(l),ar(a)){case 2:case 8:a=As;break;case 32:a=js;break;case 268435456:a=Na;break;default:a=js}return l=Sy.bind(null,t),a=Ve(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&me(l),t.callbackPriority=2,t.callbackNode=null,2}function Sy(t,n){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Du()&&t.callbackNode!==a)return null;var l=et;return l=Is(t,t===xt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ay(t,l,n),Ty(t,jt()),t.callbackNode!=null&&t.callbackNode===a?Sy.bind(null,t):null)}function Ny(t,n){if(Du())return null;ay(t,n,!0)}function N2(){P2(function(){(ut&6)!==0?Ve(cs,S2):Ey()})}function kf(){if(oi===0){var t=Qa;t===0&&(t=Cs,Cs<<=1,(Cs&261888)===0&&(Cs=256)),oi=t}return oi}function Ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Da(""+t)}function jy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function A2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ay((h[Zt]||null).action),x=l.submitter;x&&(n=(n=x[Zt]||null)?Ay(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var w=new qs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(oi!==0){var D=x?jy(h,x):new FormData(h);Wh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=x?jy(h,x):new FormData(h),Wh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],j2=Mf.toLowerCase(),C2=Mf[0].toUpperCase()+Mf.slice(1);xs(j2,"on"+C2)}xs(ip,"onAnimationEnd"),xs(ap,"onAnimationIteration"),xs(lp,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(G1,"onTransitionRun"),xs(Y1,"onTransitionStart"),xs(K1,"onTransitionCancel"),xs(op,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function Cy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var w=l[x],D=w.instance,F=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(te){Xc(te)}h.currentTarget=null,m=D}else for(x=0;x<l.length;x++){if(w=l[x],D=w.instance,F=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(te){Xc(te)}h.currentTarget=null,m=D}}}}function Je(t,n){var a=n[ja];a===void 0&&(a=n[ja]=new Set);var l=t+"__bubble";a.has(l)||(Ry(n,t,2,!1),a.add(l))}function Of(t,n,a){var l=0;n&&(l|=4),Ry(a,t,l,n)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Vu]){t[Vu]=!0,ql.forEach(function(a){a!=="selectionchange"&&(R2.has(a)||Of(a,!1,t),Of(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Vu]||(n[Vu]=!0,Of("selectionchange",!1,n))}}function Ry(t,n,a,l){switch(iv(n)){case 2:var h=rw;break;case 8:h=iw;break;default:h=Wf}a=h.bind(null,n,a,t),h=void 0,!Yi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Lf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=Os(w),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=m=x;continue e}w=w.parentNode}}l=l.return}Hr(function(){var F=m,te=Kn(a),ae=[];e:{var G=cp.get(t);if(G!==void 0){var Q=qs,Se=t;switch(t){case"keypress":if(Qi(a)===0)break e;case"keydown":case"keyup":Q=Kc;break;case"focusin":Se="focus",Q=Xi;break;case"focusout":Se="blur",Q=Xi;break;case"beforeblur":case"afterblur":Q=Xi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case ip:case ap:case lp:Q=zc;break;case op:Q=N;break;case"scroll":case"scrollend":Q=eo;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cr;break;case"toggle":case"beforetoggle":Q=Ke}var Le=(n&4)!==0,vt=!Le&&(t==="scroll"||t==="scrollend"),U=Le?G!==null?G+"Capture":null:G;Le=[];for(var V=F,H;V!==null;){var re=V;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||U===null||(re=gs(V,U),re!=null&&Le.push(ko(V,re,H))),vt)break;V=V.return}0<Le.length&&(G=new Q(G,Se,null,a,te),ae.push({event:G,listeners:Le}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==Wl&&(Se=a.relatedTarget||a.fromElement)&&(Os(Se)||Se[Ds]))break e;if((Q||G)&&(G=te.window===te?te:(G=te.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(Se=a.relatedTarget||a.toElement,Q=F,Se=Se?Os(Se):null,Se!==null&&(vt=d(Se),Le=Se.tag,Se!==vt||Le!==5&&Le!==27&&Le!==6)&&(Se=null)):(Q=null,Se=F),Q!==Se)){if(Le=to,re="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Le=cr,re="onPointerLeave",U="onPointerEnter",V="pointer"),vt=Q==null?G:In(Q),H=Se==null?G:In(Se),G=new Le(re,V+"leave",Q,a,te),G.target=vt,G.relatedTarget=H,re=null,Os(te)===F&&(Le=new Le(U,V+"enter",Se,a,te),Le.target=H,Le.relatedTarget=vt,re=Le),vt=re,Q&&Se)t:{for(Le=I2,U=Q,V=Se,H=0,re=U;re;re=Le(re))H++;re=0;for(var De=V;De;De=Le(De))re++;for(;0<H-re;)U=Le(U),H--;for(;0<re-H;)V=Le(V),re--;for(;H--;){if(U===V||V!==null&&U===V.alternate){Le=U;break t}U=Le(U),V=Le(V)}Le=null}else Le=null;Q!==null&&Iy(ae,G,Q,Le,!1),Se!==null&&vt!==null&&Iy(ae,vt,Se,Le,!0)}}e:{if(G=F?In(F):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var lt=Qg;else if(Yg(G))if($g)lt=q1;else{lt=z1;var Ce=U1}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&ka(F.elementType)&&(lt=Qg):lt=B1;if(lt&&(lt=lt(t,F))){Kg(ae,lt,a,te);break e}Ce&&Ce(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Ql(G,"number",G.value)}switch(Ce=F?In(F):window,t){case"focusin":(Yg(Ce)||Ce.contentEditable==="true")&&(za=Ce,dh=F,ao=null);break;case"focusout":ao=dh=za=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,sp(ae,a,te);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":sp(ae,a,te)}var $e;if(ct)e:{switch(t){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ua?Wi(t,a)&&(tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(tt="onCompositionStart");tt&&(Gs&&a.locale!=="ko"&&(Ua||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ua&&($e=Jl()):(Bs=te,Zl="value"in Bs?Bs.value:Bs.textContent,Ua=!0)),Ce=Lu(F,tt),0<Ce.length&&(tt=new Fs(tt,t,null,a,te),ae.push({event:tt,listeners:Ce}),$e?tt.data=$e:($e=Pa(a),$e!==null&&(tt.data=$e)))),($e=$n?O1(t,a):V1(t,a))&&(tt=Lu(F,"onBeforeInput"),0<tt.length&&(Ce=new Fs("onBeforeInput","beforeinput",null,a,te),ae.push({event:Ce,listeners:tt}),Ce.data=$e)),A2(ae,t,F,a,te)}Cy(ae,n)})}function ko(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Lu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=gs(t,a),h!=null&&l.unshift(ko(t,h,m)),h=gs(t,n),h!=null&&l.push(ko(t,h,m))),t.tag===3)return l;t=t.return}return[]}function I2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Iy(t,n,a,l,h){for(var m=n._reactName,x=[];a!==null&&a!==l;){var w=a,D=w.alternate,F=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||F===null||(D=F,h?(F=gs(a,m),F!=null&&x.unshift(ko(a,F,D))):h||(F=gs(a,m),F!=null&&x.push(ko(a,F,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var k2=/\r\n?/g,D2=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(D2,"")}function Dy(t,n){return n=ky(n),ky(t)===n}function yt(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&wn(t,""+l);break;case"className":kn(t,"class",l);break;case"tabIndex":kn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,a,l);break;case"style":Xl(t,l,m);break;case"data":if(n!=="object"){kn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&yt(t,n,"name",h.name,h,null),yt(t,n,"formEncType",h.formEncType,h,null),yt(t,n,"formMethod",h.formMethod,h,null),yt(t,n,"formTarget",h.formTarget,h,null)):(yt(t,n,"encType",h.encType,h,null),yt(t,n,"method",h.method,h,null),yt(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ms);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Je("beforetoggle",t),Je("toggle",t),Ra(t,"popover",l);break;case"xlinkActuate":Bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Bt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Bt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Bt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Bt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ra(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Lc.get(a)||a,Ra(t,a,l))}}function Pf(t,n,a,l,h,m){switch(a){case"style":Xl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[Zt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ra(t,a,l)}}}function on(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",t),Je("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:yt(t,n,m,x,a,null)}}h&&yt(t,n,"srcSet",a.srcSet,a,null),l&&yt(t,n,"src",a.src,a,null);return;case"input":Je("invalid",t);var w=m=x=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":h=te;break;case"type":x=te;break;case"checked":D=te;break;case"defaultChecked":F=te;break;case"value":m=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,n));break;default:yt(t,n,l,te,a,null)}}Mc(t,m,w,D,F,x,h,!1);return;case"select":Je("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:yt(t,n,h,w,a,null)}n=m,a=x,t.multiple=!!l,n!=null?Ur(t,!!l,n,!1):a!=null&&Ur(t,!!l,a,!0);return;case"textarea":Je("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:yt(t,n,x,w,a,null)}zr(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:yt(t,n,D,l,a,null)}return;case"dialog":Je("beforetoggle",t),Je("toggle",t),Je("cancel",t),Je("close",t);break;case"iframe":case"object":Je("load",t);break;case"video":case"audio":for(l=0;l<Io.length;l++)Je(Io[l],t);break;case"image":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"embed":case"source":case"link":Je("error",t),Je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:yt(t,n,F,l,a,null)}return;default:if(ka(n)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Pf(t,n,te,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&yt(t,n,w,l,a,null))}function M2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,w=null,D=null,F=null,te=null;for(Q in a){var ae=a[Q];if(a.hasOwnProperty(Q)&&ae!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=ae;default:l.hasOwnProperty(Q)||yt(t,n,Q,null,l,ae)}}for(var G in l){var Q=l[G];if(ae=a[G],l.hasOwnProperty(G)&&(Q!=null||ae!=null))switch(G){case"type":m=Q;break;case"name":h=Q;break;case"checked":F=Q;break;case"defaultChecked":te=Q;break;case"value":x=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,n));break;default:Q!==ae&&yt(t,n,G,Q,l,ae)}}Ia(t,x,w,D,F,te,m,h);return;case"select":Q=x=w=G=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Q=D;default:l.hasOwnProperty(m)||yt(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==D&&yt(t,n,h,m,l,D)}n=w,a=x,l=Q,G!=null?Ur(t,!!a,G,!1):!!l!=!!a&&(n!=null?Ur(t,!!a,n,!0):Ur(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:yt(t,n,w,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":G=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&yt(t,n,x,h,l,m)}Oc(t,G,Q);return;case"option":for(var Se in a)if(G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:yt(t,n,Se,null,l,G)}for(D in l)if(G=l[D],Q=a[D],l.hasOwnProperty(D)&&G!==Q&&(G!=null||Q!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:yt(t,n,D,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)G=a[Le],a.hasOwnProperty(Le)&&G!=null&&!l.hasOwnProperty(Le)&&yt(t,n,Le,null,l,G);for(F in l)if(G=l[F],Q=a[F],l.hasOwnProperty(F)&&G!==Q&&(G!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,n));break;default:yt(t,n,F,G,l,Q)}return;default:if(ka(n)){for(var vt in a)G=a[vt],a.hasOwnProperty(vt)&&G!==void 0&&!l.hasOwnProperty(vt)&&Pf(t,n,vt,void 0,l,G);for(te in l)G=l[te],Q=a[te],!l.hasOwnProperty(te)||G===Q||G===void 0&&Q===void 0||Pf(t,n,te,G,l,Q);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&yt(t,n,U,null,l,G);for(ae in l)G=l[ae],Q=a[ae],!l.hasOwnProperty(ae)||G===Q||G==null&&Q==null||yt(t,n,ae,G,l,Q)}function My(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,x=h.initiatorType,w=h.duration;if(m&&w&&My(x)){for(x=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],F=D.startTime;if(F>w)break;var te=D.transferSize,ae=D.initiatorType;te&&My(ae)&&(D=D.responseEnd,x+=te*(D<w?1:(w-F)/(D-F)))}if(--l,n+=8*(m+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Uf=null,zf=null;function Pu(t){return t.nodeType===9?t:t.ownerDocument}function Oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qf=null;function V2(){var t=window.event;return t&&t.type==="popstate"?t===qf?!1:(qf=t,!0):(qf=null,!1)}var Ly=typeof setTimeout=="function"?setTimeout:void 0,L2=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(U2)}:Ly;function U2(t){setTimeout(function(){throw t})}function ci(t){return t==="head"}function Uy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),fl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Do(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Do(a);for(var m=a.firstChild;m;){var x=m.nextSibling,w=m.nodeName;m[Ms]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Do(t.ownerDocument.body);a=h}while(a);fl(n)}function zy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Hf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hf(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function z2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ms])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ns(t.nextSibling),t===null)break}return null}function B2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ns(t.nextSibling),t===null))return null;return t}function By(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ns(t.nextSibling),t===null))return null;return t}function Ff(t){return t.data==="$?"||t.data==="$~"}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function q2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ns(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Yf=null;function qy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return ns(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Hy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Fy(t,n,a){switch(n=Pu(a),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Do(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ca(t)}var ss=new Map,Gy=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Tr=he.d;he.d={f:H2,r:F2,D:G2,C:Y2,L:K2,m:Q2,X:X2,S:$2,M:W2};function H2(){var t=Tr.f(),n=Ru();return t||n}function F2(t){var n=Yn(t);n!==null&&n.tag===5&&n.type==="form"?o0(n):Tr.r(t)}var ul=typeof document>"u"?null:document;function Yy(t,n,a){var l=ul;if(l&&typeof n=="string"&&n){var h=_n(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gy.has(h)||(Gy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),on(n,"link",t),zt(n),l.head.appendChild(n)))}}function G2(t){Tr.D(t),Yy("dns-prefetch",t,null)}function Y2(t,n){Tr.C(t,n),Yy("preconnect",t,n)}function K2(t,n,a){Tr.L(t,n,a);var l=ul;if(l&&t&&n){var h='link[rel="preload"][as="'+_n(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+_n(a.imageSizes)+'"]')):h+='[href="'+_n(t)+'"]';var m=h;switch(n){case"style":m=dl(t);break;case"script":m=hl(t)}ss.has(m)||(t=E({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ss.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Mo(m))||n==="script"&&l.querySelector(Oo(m))||(n=l.createElement("link"),on(n,"link",t),zt(n),l.head.appendChild(n)))}}function Q2(t,n){Tr.m(t,n);var a=ul;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+_n(l)+'"][href="'+_n(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=hl(t)}if(!ss.has(m)&&(t=E({rel:"modulepreload",href:t},n),ss.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Oo(m)))return}l=a.createElement("link"),on(l,"link",t),zt(l),a.head.appendChild(l)}}}function $2(t,n,a){Tr.S(t,n,a);var l=ul;if(l&&t){var h=Vs(l).hoistableStyles,m=dl(t);n=n||"default";var x=h.get(m);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(Mo(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ss.get(m))&&Kf(t,a);var D=x=l.createElement("link");zt(D),on(D,"link",t),D._p=new Promise(function(F,te){D.onload=F,D.onerror=te}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,zu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(m,x)}}}function X2(t,n){Tr.X(t,n);var a=ul;if(a&&t){var l=Vs(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Oo(h)),m||(t=E({src:t,async:!0},n),(n=ss.get(h))&&Qf(t,n),m=a.createElement("script"),zt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function W2(t,n){Tr.M(t,n);var a=ul;if(a&&t){var l=Vs(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Oo(h)),m||(t=E({src:t,async:!0,type:"module"},n),(n=ss.get(h))&&Qf(t,n),m=a.createElement("script"),zt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Ky(t,n,a,l){var h=(h=Z.current)?Uu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=dl(a.href),a=Vs(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=dl(a.href);var m=Vs(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Mo(t)))&&!m._p&&(x.instance=m,x.state.loading=5),ss.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ss.set(t,a),m||Z2(h,t,a,x.state))),n&&l===null)throw Error(i(528,""));return x}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=hl(a),a=Vs(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function dl(t){return'href="'+_n(t)+'"'}function Mo(t){return'link[rel="stylesheet"]['+t+"]"}function Qy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Z2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),on(n,"link",a),zt(n),t.head.appendChild(n))}function hl(t){return'[src="'+_n(t)+'"]'}function Oo(t){return"script[async]"+t}function $y(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+_n(a.href)+'"]');if(l)return n.instance=l,zt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),zt(l),on(l,"style",h),zu(l,a.precedence,t),n.instance=l;case"stylesheet":h=dl(a.href);var m=t.querySelector(Mo(h));if(m)return n.state.loading|=4,n.instance=m,zt(m),m;l=Qy(a),(h=ss.get(h))&&Kf(l,h),m=(t.ownerDocument||t).createElement("link"),zt(m);var x=m;return x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),on(m,"link",l),n.state.loading|=4,zu(m,a.precedence,t),n.instance=m;case"script":return m=hl(a.src),(h=t.querySelector(Oo(m)))?(n.instance=h,zt(h),h):(l=a,(h=ss.get(m))&&(l=E({},a),Qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),zt(h),on(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,zu(l,a.precedence,t));return n.instance}function zu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Bu=null;function Xy(t,n,a){if(Bu===null){var l=new Map,h=Bu=new Map;h.set(a,l)}else h=Bu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Ms]||m[Ut]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=t+x;var w=l.get(x);w?w.push(m):l.set(x,[m])}}return l}function Wy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function J2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Zy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ew(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=dl(l.href),m=n.querySelector(Mo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=qu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,zt(m);return}m=n.ownerDocument||n,l=Qy(l),(h=ss.get(h))&&Kf(l,h),m=m.createElement("link"),zt(m);var x=m;x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),on(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=qu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var $f=0;function tw(t,n){return t.stylesheets&&t.count===0&&Fu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&$f===0&&($f=62500*O2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>$f?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hu=null;function Fu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hu=new Map,n.forEach(nw,t),Hu=null,qu.call(t))}function nw(t,n){if(!(n.state.loading&4)){var a=Hu.get(t);if(a)var l=a.get(null);else{a=new Map,Hu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=qu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Vo={$$typeof:fe,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function sw(t,n,a,l,h,m,x,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.hiddenUpdates=ks(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Jy(t,n,a,l,h,m,x,w,D,F,te,ae){return t=new sw(t,n,a,x,D,F,te,ae,w),n=1,m===!0&&(n|=24),m=Mn(3,null,null,n),t.current=m,m.stateNode=t,n=Ah(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Ih(m),t}function ev(t){return t?(t=Ha,t):Ha}function tv(t,n,a,l,h,m){h=ev(h),l.context===null?l.context=h:l.pendingContext=h,l=Zr(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Jr(t,l,n),a!==null&&(An(a,t,n),mo(a,t,n))}function nv(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Xf(t,n){nv(t,n),(t=t.alternate)&&nv(t,n)}function sv(t){if(t.tag===13||t.tag===31){var n=ea(t,67108864);n!==null&&An(n,t,67108864),Xf(t,67108864)}}function rv(t){if(t.tag===13||t.tag===31){var n=Un();n=qi(n);var a=ea(t,n);a!==null&&An(a,t,n),Xf(t,n)}}var Gu=!0;function rw(t,n,a,l){var h=Y.T;Y.T=null;var m=he.p;try{he.p=2,Wf(t,n,a,l)}finally{he.p=m,Y.T=h}}function iw(t,n,a,l){var h=Y.T;Y.T=null;var m=he.p;try{he.p=8,Wf(t,n,a,l)}finally{he.p=m,Y.T=h}}function Wf(t,n,a,l){if(Gu){var h=Zf(l);if(h===null)Lf(t,n,l,Yu,a),av(t,l);else if(lw(h,t,n,a,l))l.stopPropagation();else if(av(t,l),n&4&&-1<aw.indexOf(t)){for(;h!==null;){var m=Yn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Rs(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var D=1<<31-It(x);w.entanglements[1]|=D,x&=~D}$s(m),(ut&6)===0&&(ju=jt()+500,Ro(0))}}break;case 31:case 13:w=ea(m,2),w!==null&&An(w,m,2),Ru(),Xf(m,2)}if(m=Zf(l),m===null&&Lf(t,n,l,Yu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Lf(t,n,l,null,a)}}function Zf(t){return t=Kn(t),Jf(t)}var Yu=null;function Jf(t){if(Yu=null,t=Os(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Yu=t,null}function iv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case cs:return 2;case As:return 8;case js:case Fn:return 32;case Na:return 268435456;default:return 32}default:return 32}}var em=!1,ui=null,di=null,hi=null,Lo=new Map,Po=new Map,fi=[],aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function av(t,n){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":Lo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(n.pointerId)}}function Uo(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=Yn(n),n!==null&&sv(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function lw(t,n,a,l,h){switch(n){case"focusin":return ui=Uo(ui,t,n,a,l,h),!0;case"dragenter":return di=Uo(di,t,n,a,l,h),!0;case"mouseover":return hi=Uo(hi,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Lo.set(m,Uo(Lo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Po.set(m,Uo(Po.get(m)||null,t,n,a,l,h)),!0}return!1}function lv(t){var n=Os(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,hs(t.priority,function(){rv(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,hs(t.priority,function(){rv(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ku(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Zf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Wl=l,a.target.dispatchEvent(l),Wl=null}else return n=Yn(a),n!==null&&sv(n),t.blockedOn=a,!1;n.shift()}return!0}function ov(t,n,a){Ku(t)&&a.delete(n)}function ow(){em=!1,ui!==null&&Ku(ui)&&(ui=null),di!==null&&Ku(di)&&(di=null),hi!==null&&Ku(hi)&&(hi=null),Lo.forEach(ov),Po.forEach(ov)}function Qu(t,n){t.blockedOn===n&&(t.blockedOn=null,em||(em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ow)))}var $u=null;function cv(t){$u!==t&&($u=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$u===t&&($u=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Jf(l||a)===null)continue;break}var m=Yn(a);m!==null&&(t.splice(n,3),n-=3,Wh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function fl(t){function n(D){return Qu(D,t)}ui!==null&&Qu(ui,t),di!==null&&Qu(di,t),hi!==null&&Qu(hi,t),Lo.forEach(n),Po.forEach(n);for(var a=0;a<fi.length;a++){var l=fi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<fi.length&&(a=fi[0],a.blockedOn===null);)lv(a),a.blockedOn===null&&fi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[Zt]||null;if(typeof m=="function")x||cv(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[Zt]||null)w=x.formAction;else if(Jf(h)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),cv(a)}}}function uv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function tm(t){this._internalRoot=t}Xu.prototype.render=tm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Un();tv(a,l,t,n,null,null)},Xu.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;tv(t.current,2,null,t,null,null),Ru(),n[Ds]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Rc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<fi.length&&n!==0&&n<fi[a].priority;a++);fi.splice(a,0,t),a===0&&lv(t)}};var dv=e.version;if(dv!=="19.2.0")throw Error(i(527,dv,"19.2.0"));he.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var cw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{us=Wu.inject(cw),nn=Wu}catch{}}return Bo.createRoot=function(t,n){if(!o(t))throw Error(i(299));var a=!1,l="",h=v0,m=x0,x=b0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Jy(t,1,!1,null,null,a,l,null,h,m,x,uv),t[Ds]=n.current,Vf(t),new tm(n)},Bo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=v0,x=x0,w=b0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Jy(t,1,!0,n,a??null,l,h,D,m,x,w,uv),n.context=ev(null),a=n.current,l=Un(),l=qi(l),h=Zr(l),h.callback=null,Jr(a,h,l),a=l,n.current.lanes=a,zi(n,a),$s(n),t[Ds]=n.current,Vf(t),new Xu(n)},Bo.version="19.2.0",Bo}var _v;function bw(){if(_v)return rm.exports;_v=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=xw(),rm.exports}var _w=bw();const ww=()=>{};var wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=function(r){const e=[];let s=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},Ew=function(r){const e=[];let s=0,i=0;for(;s<r.length;){const o=r[s++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const d=r[s++];e[i++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=r[s++],f=r[s++],p=r[s++],v=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const d=r[s++],f=r[s++];e[i++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const d=r[o],f=o+1<r.length,p=f?r[o+1]:0,v=o+2<r.length,y=v?r[o+2]:0,_=d>>2,E=(d&3)<<4|p>>4;let A=(p&15)<<2|y>>6,q=y&63;v||(q=64,f||(A=64)),i.push(s[_],s[E],s[A],s[q])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ib(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Ew(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const d=s[r.charAt(o++)],p=o<r.length?s[r.charAt(o)]:0;++o;const y=o<r.length?s[r.charAt(o)]:64;++o;const E=o<r.length?s[r.charAt(o)]:64;if(++o,d==null||p==null||y==null||E==null)throw new Tw;const A=d<<2|p>>4;if(i.push(A),y!==64){const q=p<<4&240|y>>2;if(i.push(q),E!==64){const J=y<<6&192|E;i.push(J)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sw=function(r){const e=ib(r);return ab.encodeByteArray(e,!0)},pd=function(r){return Sw(r).replace(/\./g,"")},lb=function(r){try{return ab.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=()=>Nw().__FIREBASE_DEFAULTS__,jw=()=>{if(typeof process>"u"||typeof wv>"u")return;const r=wv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Cw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&lb(r[1]);return e&&JSON.parse(e)},Vd=()=>{try{return ww()||Aw()||jw()||Cw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ob=r=>Vd()?.emulatorHosts?.[r],Rw=r=>{const e=ob(r);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),i]:[e.substring(0,s),i]},cb=()=>Vd()?.config,ub=r=>Vd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function db(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[pd(JSON.stringify(s)),pd(JSON.stringify(f)),""].join(".")}const Qo={};function Dw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?r.emulator.push(e):r.prod.push(e);return r}function Mw(r){let e=document.getElementById(r),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),s=!0),{created:s,element:e}}let Ev=!1;function hb(r,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Qo[r]===e||Qo[r]||Ev)return;Qo[r]=e;function s(A){return`__firebase__banner__${A}`}const i="__firebase__banner",d=Dw().prod.length>0;function f(){const A=document.getElementById(i);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,q){A.setAttribute("width","24"),A.setAttribute("id",q),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ev=!0,f()},A}function _(A,q){A.setAttribute("id",q),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Mw(i),q=s("text"),J=document.getElementById(q)||document.createElement("span"),X=s("learnmore"),z=document.getElementById(X)||document.createElement("a"),ee=s("preprendIcon"),W=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const fe=A.element;p(fe),_(z,X);const de=y();v(W,ee),fe.append(W,J,z,de),document.body.appendChild(fe)}d?(J.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Vw(){const r=Vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Uw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zw(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Bw(){return!Vw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Hw(){return new Promise((r,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="FirebaseError";class Or extends Error{constructor(e,s,i){super(s),this.code=e,this.customData=i,this.name=Fw,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,s,i){this.service=e,this.serviceName=s,this.errors=i}create(e,...s){const i=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?Gw(d,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Or(o,p,i)}}function Gw(r,e){return r.replace(Yw,(s,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Yw=/\{\$([^}]+)}/g;function Kw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const s=Object.keys(r),i=Object.keys(e);for(const o of s){if(!i.includes(o))return!1;const d=r[o],f=e[o];if(Tv(d)&&Tv(f)){if(!va(d,f))return!1}else if(d!==f)return!1}for(const o of i)if(!s.includes(o))return!1;return!0}function Tv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r){const e=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,d]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function Ho(r){const e=r.indexOf("?");if(!e)return"";const s=r.indexOf("#",e);return r.substring(e,s>0?s:void 0)}function Qw(r,e){const s=new $w(r,e);return s.subscribe.bind(s)}class $w{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,i){let o;if(e===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");Xw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:i},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xw(r,e){if(typeof r!="object"||r===null)return!1;for(const s of e)if(s in r&&typeof r[s]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r){return r&&r._delegate?r._delegate:r}class xa{constructor(e,s,i){this.name=e,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const i=new Iw;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jw(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});i.resolve(d)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);i===p&&f.resolve(o)}return o}onInit(e,s){const i=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const d=this.instances.get(i);return d&&e(d,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const i=this.onInitCallbacks.get(s);if(i)for(const o of i)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Zw(e),options:s}),this.instances.set(e,i),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zw(r){return r===ma?void 0:r}function Jw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Ww(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(nt||(nt={}));const tE={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},nE=nt.INFO,sE={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},rE=(r,e,...s)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=sE[e];if(o)console[o](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=nE,this._logHandler=rE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const iE=(r,e)=>e.some(s=>r instanceof s);let Sv,Nv;function aE(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lE(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Sm=new WeakMap,mb=new WeakMap,cm=new WeakMap,eg=new WeakMap;function oE(r){const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{s(wi(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&fb.set(s,r)}).catch(()=>{}),eg.set(e,r),e}function cE(r){if(Sm.has(r))return;const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});Sm.set(r,e)}let Nm={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return Sm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||mb.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wi(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function uE(r){Nm=r(Nm)}function dE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const i=r.call(um(this),e,...s);return mb.set(i,e.sort?e.sort():[e]),wi(i)}:lE().includes(r)?function(...e){return r.apply(um(this),e),wi(fb.get(this))}:function(...e){return wi(r.apply(um(this),e))}}function hE(r){return typeof r=="function"?dE(r):(r instanceof IDBTransaction&&cE(r),iE(r,aE())?new Proxy(r,Nm):r)}function wi(r){if(r instanceof IDBRequest)return oE(r);if(cm.has(r))return cm.get(r);const e=hE(r);return e!==r&&(cm.set(r,e),eg.set(e,r)),e}const um=r=>eg.get(r);function fE(r,e,{blocked:s,upgrade:i,blocking:o,terminated:d}={}){const f=indexedDB.open(r,e),p=wi(f);return i&&f.addEventListener("upgradeneeded",v=>{i(wi(f.result),v.oldVersion,v.newVersion,wi(f.transaction),v)}),s&&f.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const mE=["get","getKey","getAll","getAllKeys","count"],gE=["put","add","delete","clear"],dm=new Map;function Av(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,o=gE.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(o||mE.includes(s)))return;const d=async function(f,...p){const v=this.transaction(f,o?"readwrite":"readonly");let y=v.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&v.done]))[0]};return dm.set(e,d),d}uE(r=>({...r,get:(e,s,i)=>Av(e,s)||r.get(e,s,i),has:(e,s)=>!!Av(e,s)||r.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(yE(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function yE(r){return r.getComponent()?.type==="VERSION"}const Am="@firebase/app",jv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Jm("@firebase/app"),vE="@firebase/app-compat",xE="@firebase/analytics-compat",bE="@firebase/analytics",_E="@firebase/app-check-compat",wE="@firebase/app-check",EE="@firebase/auth",TE="@firebase/auth-compat",SE="@firebase/database",NE="@firebase/data-connect",AE="@firebase/database-compat",jE="@firebase/functions",CE="@firebase/functions-compat",RE="@firebase/installations",IE="@firebase/installations-compat",kE="@firebase/messaging",DE="@firebase/messaging-compat",ME="@firebase/performance",OE="@firebase/performance-compat",VE="@firebase/remote-config",LE="@firebase/remote-config-compat",PE="@firebase/storage",UE="@firebase/storage-compat",zE="@firebase/firestore",BE="@firebase/ai",qE="@firebase/firestore-compat",HE="firebase",FE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",GE={[Am]:"fire-core",[vE]:"fire-core-compat",[bE]:"fire-analytics",[xE]:"fire-analytics-compat",[wE]:"fire-app-check",[_E]:"fire-app-check-compat",[EE]:"fire-auth",[TE]:"fire-auth-compat",[SE]:"fire-rtdb",[NE]:"fire-data-connect",[AE]:"fire-rtdb-compat",[jE]:"fire-fn",[CE]:"fire-fn-compat",[RE]:"fire-iid",[IE]:"fire-iid-compat",[kE]:"fire-fcm",[DE]:"fire-fcm-compat",[ME]:"fire-perf",[OE]:"fire-perf-compat",[VE]:"fire-rc",[LE]:"fire-rc-compat",[PE]:"fire-gcs",[UE]:"fire-gcs-compat",[zE]:"fire-fst",[qE]:"fire-fst-compat",[BE]:"fire-vertex","fire-js":"fire-js",[HE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,YE=new Map,Cm=new Map;function Cv(r,e){try{r.container.addComponent(e)}catch(s){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function Sl(r){const e=r.name;if(Cm.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,r);for(const s of yd.values())Cv(s,r);for(const s of YE.values())Cv(s,r);return!0}function tg(r,e){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(e)}function is(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new uc("app","Firebase",KE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,s,i){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=FE;function gb(r,e={}){let s=r;typeof e!="object"&&(e={name:e});const i={name:jm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(s||(s=cb()),!s)throw Ei.create("no-options");const d=yd.get(o);if(d){if(va(s,d.options)&&va(i,d.config))return d;throw Ei.create("duplicate-app",{appName:o})}const f=new eE(o);for(const v of Cm.values())f.addComponent(v);const p=new QE(s,i,f);return yd.set(o,p),p}function pb(r=jm){const e=yd.get(r);if(!e&&r===jm&&cb())return gb();if(!e)throw Ei.create("no-app",{appName:r});return e}function Ti(r,e,s){let i=GE[r]??r;s&&(i+=`-${s}`);const o=i.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(f.join(" "));return}Sl(new xa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",XE=1,ec="firebase-heartbeat-store";let hm=null;function yb(){return hm||(hm=fE($E,XE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ec)}catch(s){console.warn(s)}}}}).catch(r=>{throw Ei.create("idb-open",{originalErrorMessage:r.message})})),hm}async function WE(r){try{const s=(await yb()).transaction(ec),i=await s.objectStore(ec).get(vb(r));return await s.done,i}catch(e){if(e instanceof Or)Rr.warn(e.message);else{const s=Ei.create("idb-get",{originalErrorMessage:e?.message});Rr.warn(s.message)}}}async function Rv(r,e){try{const i=(await yb()).transaction(ec,"readwrite");await i.objectStore(ec).put(e,vb(r)),await i.done}catch(s){if(s instanceof Or)Rr.warn(s.message);else{const i=Ei.create("idb-set",{originalErrorMessage:s?.message});Rr.warn(i.message)}}}function vb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1024,JE=30;class eT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new nT(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>JE){const o=sT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Iv(),{heartbeatsToSend:s,unsentEntries:i}=tT(this._heartbeatsCache.heartbeats),o=pd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Rr.warn(e),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function tT(r,e=ZE){const s=[];let i=r.slice();for(const o of r){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),kv(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),kv(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class nT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qw()?Hw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await WE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function kv(r){return pd(JSON.stringify({version:2,heartbeats:r})).length}function sT(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(r){Sl(new xa("platform-logger",e=>new pE(e),"PRIVATE")),Sl(new xa("heartbeat",e=>new eT(e),"PRIVATE")),Ti(Am,jv,r),Ti(Am,jv,"esm2020"),Ti("fire-js","")}rT("");function xb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iT=xb,bb=new uc("auth","Firebase",xb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Jm("@firebase/auth");function aT(r,...e){vd.logLevel<=nt.WARN&&vd.warn(`Auth (${Dl}): ${r}`,...e)}function ad(r,...e){vd.logLevel<=nt.ERROR&&vd.error(`Auth (${Dl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(r,...e){throw ng(r,...e)}function Zs(r,...e){return ng(r,...e)}function _b(r,e,s){const i={...iT(),[e]:s};return new uc("auth","Firebase",i).create(e,{appName:r.name})}function jr(r){return _b(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const s=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return bb.create(r,...e)}function Pe(r,e,...s){if(!r)throw ng(e,...s)}function Nr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ad(e),new Error(e)}function Ir(r,e){r||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return typeof self<"u"&&self.location?.href||""}function lT(){return Dv()==="http:"||Dv()==="https:"}function Dv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lT()||Pw()||"connection"in navigator)?navigator.onLine:!0}function cT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ir(s>e,"Short delay should be less than long delay!"),this.isMobile=Ow()||Uw()}get(){return oT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r,e){Ir(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static initialize(e,s,i){this.fetchImpl=e,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hT=new hc(3e4,6e4);function Vr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Lr(r,e,s,i,o={}){return Eb(r,o,async()=>{let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});const p=dc({key:r.config.apiKey,...f}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:v,...d};return Lw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&kl(r.emulatorConfig.host)&&(y.credentials="include"),wb.fetch()(await Tb(r,r.config.apiHost,s,p),y)})}async function Eb(r,e,s){r._canInitEmulator=!1;const i={...uT,...e};try{const o=new mT(r),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Zu(r,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[v,y]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Zu(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw Zu(r,"user-disabled",f);const _=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _b(r,_,y);Ss(r,_)}}catch(o){if(o instanceof Or)throw o;Ss(r,"network-request-failed",{message:String(o)})}}async function fc(r,e,s,i,o={}){const d=await Lr(r,e,s,i,o);return"mfaPendingCredential"in d&&Ss(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function Tb(r,e,s,i){const o=`${e}${s}?${i}`,d=r,f=d.config.emulator?sg(r.config,o):`${r.config.apiScheme}://${o}`;return dT.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function fT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(Zs(this.auth,"network-request-failed")),hT.get())})}}function Zu(r,e,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const o=Zs(r,e,i);return o.customData._tokenResponse=s,o}function Mv(r){return r!==void 0&&r.enterprise!==void 0}class gT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return fT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pT(r,e){return Lr(r,"GET","/v2/recaptchaConfig",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(r,e){return Lr(r,"POST","/v1/accounts:delete",e)}async function xd(r,e){return Lr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vT(r,e=!1){const s=Lt(r),i=await s.getIdToken(e),o=rg(i);Pe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:i,authTime:$o(fm(o.auth_time)),issuedAtTime:$o(fm(o.iat)),expirationTime:$o(fm(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function fm(r){return Number(r)*1e3}function rg(r){const[e,s,i]=r.split(".");if(e===void 0||s===void 0||i===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const o=lb(s);return o?JSON.parse(o):(ad("Failed to decode base64 JWT payload"),null)}catch(o){return ad("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ov(r){const e=rg(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(r,e,s=!1){if(s)return e;try{return await e}catch(i){throw i instanceof Or&&xT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function xT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(r){const e=r.auth,s=await r.getIdToken(),i=await tc(r,xd(e,{idToken:s}));Pe(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const d=o.providerUserInfo?.length?Sb(o.providerUserInfo):[],f=wT(r.providerData,d),p=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!f?.length,y=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function _T(r){const e=Lt(r);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sb(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(r,e){const s=await Eb(r,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=r.config,f=await Tb(r,o,"/v1/token",`key=${d}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:i};return r.emulatorConfig&&kl(r.emulatorConfig.host)&&(v.credentials="include"),wb.fetch()(f,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function TT(r,e){return Lr(r,"POST","/v2/accounts:revokeToken",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ov(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const s=Ov(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:i,refreshToken:o,expiresIn:d}=await ET(e,s);this.updateTokensAndExpiration(i,o,Number(d))}updateTokensAndExpiration(e,s,i){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,s){const{refreshToken:i,accessToken:o,expirationTime:d}=s,f=new bl;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(Pe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Pe(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ts{constructor({uid:e,auth:s,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new bT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await tc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return vT(this,e)}reload(){return _T(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Ts({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),s&&await bd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await tc(this,yT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const i=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,v=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:q,providerData:J,stsTokenManager:X}=s;Pe(E&&X,e,"internal-error");const z=bl.fromJSON(this.name,X);Pe(typeof E=="string",e,"internal-error"),gi(i,e.name),gi(o,e.name),Pe(typeof A=="boolean",e,"internal-error"),Pe(typeof q=="boolean",e,"internal-error"),gi(d,e.name),gi(f,e.name),gi(p,e.name),gi(v,e.name),gi(y,e.name),gi(_,e.name);const ee=new Ts({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:q,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:_});return J&&Array.isArray(J)&&(ee.providerData=J.map(W=>({...W}))),v&&(ee._redirectEventId=v),ee}static async _fromIdTokenResponse(e,s,i=!1){const o=new bl;o.updateFromServerResponse(s);const d=new Ts({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await bd(d),d}static async _fromGetAccountInfoResponse(e,s,i){const o=s.users[0];Pe(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new bl;p.updateFromIdToken(i);const v=new Ts({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new Map;function Ar(r){Ir(r instanceof Function,"Expected a class definition");let e=Vv.get(r);return e?(Ir(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Vv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Nb.type="NONE";const Lv=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(r,e,s){return`firebase:${r}:${e}:${s}`}class _l{constructor(e,s,i){this.persistence=e,this.auth=s,this.userKey=i;const{config:o,name:d}=this.auth;this.fullUserKey=ld(this.userKey,o.apiKey,d),this.fullPersistenceKey=ld("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await xd(this.auth,{idToken:e}).catch(()=>{});return s?Ts._fromGetAccountInfoResponse(this.auth,s,e):null}return Ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,i="authUser"){if(!s.length)return new _l(Ar(Lv),e,i);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||Ar(Lv);const f=ld(i,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let E;if(typeof _=="string"){const A=await xd(e,{idToken:_}).catch(()=>{});if(!A)break;E=await Ts._fromGetAccountInfoResponse(e,A,_)}else E=Ts._fromJSON(e,_);y!==d&&(p=E),d=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new _l(d,e,i):(d=v[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new _l(d,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ab(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Db(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(Ib(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function Ab(r=pn()){return/firefox\//i.test(r)}function jb(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(r=pn()){return/crios\//i.test(r)}function Rb(r=pn()){return/iemobile/i.test(r)}function Ib(r=pn()){return/android/i.test(r)}function kb(r=pn()){return/blackberry/i.test(r)}function Db(r=pn()){return/webos/i.test(r)}function ig(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ST(r=pn()){return ig(r)&&!!window.navigator?.standalone}function NT(){return zw()&&document.documentMode===10}function Mb(r=pn()){return ig(r)||Ib(r)||Db(r)||kb(r)||/windows phone/i.test(r)||Rb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r,e=[]){let s;switch(r){case"Browser":s=Pv(pn());break;case"Worker":s=`${Pv(pn())}-${r}`;break;default:s=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Dl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const i=d=>new Promise((f,p)=>{try{const v=e(d);f(v)}catch(v){p(v)}});i.onAbort=s,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const i of this.queue)await i(e),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(r,e={}){return Lr(r,"GET","/v2/passwordPolicy",Vr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=6;class RT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??CT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=e.length>=i),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,s,i,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,s,i,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uv(this),this.idTokenSubscription=new Uv(this),this.beforeStateQueue=new AT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Ar(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await xd(this,{idToken:e}),i=await Ts._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(jr(this));const s=e?Lt(e):null;return s&&Pe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jT(this),s=new RT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,s,i){return this.registerStateListener(this.authStateSubscription,e,s,i)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,i){return this.registerStateListener(this.idTokenSubscription,e,s,i)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await TT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const i=await this.getOrInitRedirectPersistenceManager(s);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Ar(e)||this._popupRedirectResolver;Pe(s,this,"argument-error"),this.redirectPersistenceManager=await _l.create(this,[Ar(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,i,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,i,o);return()=>{f=!0,v()}}else{const v=e.addObserver(s);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Oi(r){return Lt(r)}class Uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qw(s=>this.observer=s)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kT(r){Ld=r}function Vb(r){return Ld.loadJS(r)}function DT(){return Ld.recaptchaEnterpriseScript}function MT(){return Ld.gapiScript}function OT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class VT{constructor(){this.enterprise=new LT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class LT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const PT="recaptcha-enterprise",Lb="NO_RECAPTCHA";class UT{constructor(e){this.type=PT,this.auth=Oi(e)}async verify(e="verify",s=!1){async function i(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{pT(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new gT(v);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(v=>{p(v)})})}function o(d,f,p){const v=window.grecaptcha;Mv(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(Lb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{i(this.auth).then(p=>{if(!s&&Mv(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=DT();v.length!==0&&(v+=p),Vb(v).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function zv(r,e,s,i=!1,o=!1){const d=new UT(r);let f;if(o)f=Lb;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function _d(r,e,s,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await zv(r,e,s,s==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await zv(r,e,s,s==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r,e){const s=tg(r,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(va(d,e??{}))return o;Ss(o,"already-initialized")}return s.initialize({options:e})}function BT(r,e){const s=e?.persistence||[],i=(Array.isArray(s)?s:[s]).map(Ar);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function qT(r,e,s){const i=Oi(r);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,d=Pb(e),{host:f,port:p}=HT(e),v=p===null?"":`:${p}`,y={url:`${d}//${f}${v}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(va(y,i.config.emulator)&&va(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,kl(f)?(db(`${d}//${f}${v}`),hb("Auth",!0)):FT()}function Pb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function HT(r){const e=Pb(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const d=o[1];return{host:d,port:Bv(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:Bv(f)}}}function Bv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FT(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,s){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function GT(r,e){return Lr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(r,e){return fc(r,"POST","/v1/accounts:signInWithPassword",Vr(r,e))}async function KT(r,e){return Lr(r,"POST","/v1/accounts:sendOobCode",Vr(r,e))}async function QT(r,e){return KT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(r,e){return fc(r,"POST","/v1/accounts:signInWithEmailLink",Vr(r,e))}async function XT(r,e){return fc(r,"POST","/v1/accounts:signInWithEmailLink",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends ag{constructor(e,s,i,o=null){super("password",i),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new nc(e,s,"password")}static _fromEmailAndCode(e,s,i=null){return new nc(e,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,s,"signInWithPassword",YT);case"emailLink":return $T(e,{email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,i,"signUpPassword",GT);case"emailLink":return XT(e,{idToken:s,email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e){return fc(r,"POST","/v1/accounts:signInWithIdp",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="http://localhost";class ba extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Ss("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...d}=s;if(!i||!o)return null;const f=new ba(i,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return wl(e,s)}_linkToIdToken(e,s){const i=this.buildRequest();return i.idToken=s,wl(e,i)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,wl(e,s)}buildRequest(){const e={requestUri:WT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=dc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JT(r){const e=qo(Ho(r)).link,s=e?qo(Ho(e)).deep_link_id:null,i=qo(Ho(r)).deep_link_id;return(i?qo(Ho(i)).link:null)||i||s||e||r}class lg{constructor(e){const s=qo(Ho(e)),i=s.apiKey??null,o=s.oobCode??null,d=ZT(s.mode??null);Pe(i&&o&&d,"argument-error"),this.apiKey=i,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=JT(e);try{return new lg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(e,s){return nc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const i=lg.parseLink(s);return Pe(i,"argument-error"),nc._fromEmailAndCode(e,i.code,i.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends mc{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return ba._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:i}=e;if(!s&&!i)return null;try{return vi.credential(s,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends mc{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends mc{constructor(){super("twitter.com")}static credential(e,s){return ba._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=e;if(!s||!i)return null;try{return bi.credential(s,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e){return fc(r,"POST","/v1/accounts:signUp",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,i,o=!1){const d=await Ts._fromIdTokenResponse(e,i,o),f=qv(i);return new _a({user:d,providerId:f,_tokenResponse:i,operationType:s})}static async _forOperation(e,s,i){await e._updateTokensIfNecessary(i,!0);const o=qv(i);return new _a({user:e,providerId:o,_tokenResponse:i,operationType:s})}}function qv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends Or{constructor(e,s,i,o){super(s.code,s.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,s,i,o){return new wd(e,s,i,o)}}function zb(r,e,s,i){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(r,d,e,i):d})}async function tS(r,e,s=!1){const i=await tc(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return _a._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(r,e,s=!1){const{auth:i}=r;if(is(i.app))return Promise.reject(jr(i));const o="reauthenticate";try{const d=await tc(r,zb(i,o,e,r),s);Pe(d.idToken,i,"internal-error");const f=rg(d.idToken);Pe(f,i,"internal-error");const{sub:p}=f;return Pe(r.uid===p,i,"user-mismatch"),_a._forOperation(r,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&Ss(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(r,e,s=!1){if(is(r.app))return Promise.reject(jr(r));const i="signIn",o=await zb(r,i,e),d=await _a._fromIdTokenResponse(r,i,o);return s||await r._updateCurrentUser(d.user),d}async function sS(r,e){return Bb(Oi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(r){const e=Oi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rS(r,e,s){const i=Oi(r);await _d(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",QT)}async function iS(r,e,s){if(is(r.app))return Promise.reject(jr(r));const i=Oi(r),f=await _d(i,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eS).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&qb(r),v}),p=await _a._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function aS(r,e,s){return is(r.app)?Promise.reject(jr(r)):sS(Lt(r),Ml.credential(e,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qb(r),i})}function lS(r,e,s,i){return Lt(r).onIdTokenChanged(e,s,i)}function oS(r,e,s){return Lt(r).beforeAuthStateChanged(e,s)}function cS(r,e,s,i){return Lt(r).onAuthStateChanged(e,s,i)}function uS(r){return Lt(r).signOut()}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1e3,hS=10;class Fb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),o=this.localCache[s];i!==o&&e(s,o,i)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,v)=>{this.notifyListeners(f,v)});return}const i=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!s&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);NT()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hS):o()}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:i}),!0)})},dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const fS=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Gb.type="SESSION";const Yb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const i=new Pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:i,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),v=await mS(p);s.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(r="",e=10){let s="";for(let i=0;i<e;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,v)=>{const y=og("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(A.data.response);break;default:clearTimeout(_),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){return window}function pS(r){Js().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function yS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){return navigator?.serviceWorker?.controller||null}function xS(){return Kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",bS=1,Td="firebaseLocalStorage",$b="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ud(r,e){return r.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function _S(){const r=indexedDB.deleteDatabase(Qb);return new gc(r).toPromise()}function km(){const r=indexedDB.open(Qb,bS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Td,{keyPath:$b})}catch(o){s(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Td)?e(i):(i.close(),await _S(),e(await km()))})})}async function Hv(r,e,s){const i=Ud(r,!0).put({[$b]:e,value:s});return new gc(i).toPromise()}async function wS(r,e){const s=Ud(r,!1).get(e),i=await new gc(s).toPromise();return i===void 0?null:i.value}function Fv(r,e){const s=Ud(r,!0).delete(e);return new gc(s).toPromise()}const ES=800,TS=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let s=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(s++>TS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(xS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Hv(e,Ed,"1"),await Fv(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>Hv(i,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(i=>wS(i,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Ud(o,!1).getAll();return new gc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const SS=Xb;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r,e){return e?Ar(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return wl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function AS(r){return Bb(r.auth,new cg(r),r.bypassAuthState)}function jS(r){const{auth:e,user:s}=r;return Pe(s,e,"internal-error"),nS(s,new cg(r),r.bypassAuthState)}async function CS(r){const{auth:e,user:s}=r;return Pe(s,e,"internal-error"),tS(s,new cg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,s,i,o,d=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:i,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:s,sessionId:i,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AS;case"linkViaPopup":case"linkViaRedirect":return CS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:Ss(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new hc(2e3,1e4);class xl extends Wb{constructor(e,s,i,o,d){super(e,s,o,d),this.provider=i,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",od=new Map;class kS extends Wb{constructor(e,s,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const i=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(s){e=()=>Promise.reject(s)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(r,e){const s=VS(e),i=OS(r);if(!await i._isAvailable())return!1;const o=await i._get(s)==="true";return await i._remove(s),o}function MS(r,e){od.set(r._key(),e)}function OS(r){return Ar(r._redirectPersistence)}function VS(r){return ld(IS,r.config.apiKey,r.name)}async function LS(r,e,s=!1){if(is(r.app))return Promise.reject(jr(r));const i=Oi(r),o=NS(i,e),f=await new kS(i,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=600*1e3;class US{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(s=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Zb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Zs(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const i=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Zb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(r,e={}){return Lr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;async function FS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BS(r);for(const s of e)try{if(GS(s))return}catch{}Ss(r,"unauthorized-domain")}function GS(r){const e=Rm(),{protocol:s,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===i}if(!HS.test(s))return!1;if(qS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new hc(3e4,6e4);function Yv(){const r=Js().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function KS(r){return new Promise((e,s)=>{function i(){Yv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yv(),s(Zs(r,"network-request-failed"))},timeout:YS.get()})}if(Js().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Js().gapi?.load)i();else{const o=OT("iframefcb");return Js()[o]=()=>{gapi.load?i():s(Zs(r,"network-request-failed"))},Vb(`${MT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw cd=null,e})}let cd=null;function QS(r){return cd=cd||KS(r),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new hc(5e3,15e3),XS="__/auth/iframe",WS="emulator/auth/iframe",ZS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?sg(e,WS):`https://${r.config.authDomain}/${XS}`,i={apiKey:e.apiKey,appName:r.name,v:Dl},o=JS.get(r.config.apiHost);o&&(i.eid=o);const d=r._getFrameworks();return d.length&&(i.fw=d.join(",")),`${s}?${dc(i).slice(1)}`}async function tN(r){const e=await QS(r),s=Js().gapi;return Pe(s,r,"internal-error"),e.open({where:document.body,url:eN(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZS,dontclear:!0},i=>new Promise(async(o,d)=>{await i.restyle({setHideOnLeave:!1});const f=Zs(r,"network-request-failed"),p=Js().setTimeout(()=>{d(f)},$S.get());function v(){Js().clearTimeout(p),o(i)}i.ping(v).then(v,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sN=500,rN=600,iN="_blank",aN="http://localhost";class Kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(r,e,s,i=sN,o=rN){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const v={...nN,width:i.toString(),height:o.toString(),top:d,left:f},y=pn().toLowerCase();s&&(p=Cb(y)?iN:s),Ab(y)&&(e=e||aN,v.scrollbars="yes");const _=Object.entries(v).reduce((A,[q,J])=>`${A}${q}=${J},`,"");if(ST(y)&&p!=="_self")return oN(e||"",p),new Kv(null);const E=window.open(e||"",p,_);Pe(E,r,"popup-blocked");try{E.focus()}catch{}return new Kv(E)}function oN(r,e){const s=document.createElement("a");s.href=r,s.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",uN="emulator/auth/handler",dN=encodeURIComponent("fac");async function Qv(r,e,s,i,o,d){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Dl,eventId:o};if(e instanceof Ub){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Kw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof mc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await r._getAppCheckToken(),y=v?`#${dN}=${encodeURIComponent(v)}`:"";return`${hN(r)}?${dc(p).slice(1)}${y}`}function hN({config:r}){return r.emulator?sg(r,uN):`https://${r.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=LS,this._overrideRedirectResult=MS}async _openPopup(e,s,i,o){Ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Qv(e,s,i,Rm(),o);return lN(e,d,og())}async _openRedirect(e,s,i,o){await this._originValidation(e);const d=await Qv(e,s,i,Rm(),o);return pS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Ir(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(e);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(e){const s=await tN(e),i=new US(e);return s.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=s,i}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(mm,{type:mm},o=>{const d=o?.[0]?.[mm];d!==void 0&&s(!!d),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=FS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Mb()||jb()||ig()}}const mN=fN;var $v="@firebase/auth",Xv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(r){Sl(new xa("auth",(e,{options:s})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;Pe(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(r)},y=new IT(i,o,d,v);return BT(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,i)=>{e.getProvider("auth-internal").initialize()})),Sl(new xa("auth-internal",e=>{const s=Oi(e.getProvider("auth").getImmediate());return(i=>new gN(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti($v,Xv,pN(r)),Ti($v,Xv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=300,xN=ub("authIdTokenMaxAge")||vN;let Wv=null;const bN=r=>async e=>{const s=e&&await e.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>xN)return;const o=s?.token;Wv!==o&&(Wv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _N(r=pb()){const e=tg(r,"auth");if(e.isInitialized())return e.getImmediate();const s=zT(r,{popupRedirectResolver:mN,persistence:[SS,fS,Yb]}),i=ub("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(i,location.origin);if(location.origin===d.origin){const f=bN(d.toString());oS(s,f,()=>f(s.currentUser)),lS(s,p=>f(p))}}const o=ob("auth");return o&&qT(s,`http://${o}`),s}function wN(){return document.getElementsByTagName("head")?.[0]??document}kT({loadJS(r){return new Promise((e,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const d=Zs("internal-error");d.customData=o,s(d)},i.type="text/javascript",i.charset="UTF-8",wN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");var EN="firebase",TN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(EN,TN,"app");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,Jb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function j(){}j.prototype=T.prototype,R.F=T.prototype,R.prototype=new j,R.prototype.constructor=R,R.D=function(k,C,L){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return T.prototype[C].apply(k,I)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,j){j||(j=0);const k=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)k[C]=T.charCodeAt(j++)|T.charCodeAt(j++)<<8|T.charCodeAt(j++)<<16|T.charCodeAt(j++)<<24;else for(C=0;C<16;++C)k[C]=T[j++]|T[j++]<<8|T[j++]<<16|T[j++]<<24;T=R.g[0],j=R.g[1],C=R.g[2];let L=R.g[3],I;I=T+(L^j&(C^L))+k[0]+3614090360&4294967295,T=j+(I<<7&4294967295|I>>>25),I=L+(C^T&(j^C))+k[1]+3905402710&4294967295,L=T+(I<<12&4294967295|I>>>20),I=C+(j^L&(T^j))+k[2]+606105819&4294967295,C=L+(I<<17&4294967295|I>>>15),I=j+(T^C&(L^T))+k[3]+3250441966&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(L^j&(C^L))+k[4]+4118548399&4294967295,T=j+(I<<7&4294967295|I>>>25),I=L+(C^T&(j^C))+k[5]+1200080426&4294967295,L=T+(I<<12&4294967295|I>>>20),I=C+(j^L&(T^j))+k[6]+2821735955&4294967295,C=L+(I<<17&4294967295|I>>>15),I=j+(T^C&(L^T))+k[7]+4249261313&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(L^j&(C^L))+k[8]+1770035416&4294967295,T=j+(I<<7&4294967295|I>>>25),I=L+(C^T&(j^C))+k[9]+2336552879&4294967295,L=T+(I<<12&4294967295|I>>>20),I=C+(j^L&(T^j))+k[10]+4294925233&4294967295,C=L+(I<<17&4294967295|I>>>15),I=j+(T^C&(L^T))+k[11]+2304563134&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(L^j&(C^L))+k[12]+1804603682&4294967295,T=j+(I<<7&4294967295|I>>>25),I=L+(C^T&(j^C))+k[13]+4254626195&4294967295,L=T+(I<<12&4294967295|I>>>20),I=C+(j^L&(T^j))+k[14]+2792965006&4294967295,C=L+(I<<17&4294967295|I>>>15),I=j+(T^C&(L^T))+k[15]+1236535329&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(C^L&(j^C))+k[1]+4129170786&4294967295,T=j+(I<<5&4294967295|I>>>27),I=L+(j^C&(T^j))+k[6]+3225465664&4294967295,L=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(L^T))+k[11]+643717713&4294967295,C=L+(I<<14&4294967295|I>>>18),I=j+(L^T&(C^L))+k[0]+3921069994&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^L&(j^C))+k[5]+3593408605&4294967295,T=j+(I<<5&4294967295|I>>>27),I=L+(j^C&(T^j))+k[10]+38016083&4294967295,L=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(L^T))+k[15]+3634488961&4294967295,C=L+(I<<14&4294967295|I>>>18),I=j+(L^T&(C^L))+k[4]+3889429448&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^L&(j^C))+k[9]+568446438&4294967295,T=j+(I<<5&4294967295|I>>>27),I=L+(j^C&(T^j))+k[14]+3275163606&4294967295,L=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(L^T))+k[3]+4107603335&4294967295,C=L+(I<<14&4294967295|I>>>18),I=j+(L^T&(C^L))+k[8]+1163531501&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^L&(j^C))+k[13]+2850285829&4294967295,T=j+(I<<5&4294967295|I>>>27),I=L+(j^C&(T^j))+k[2]+4243563512&4294967295,L=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(L^T))+k[7]+1735328473&4294967295,C=L+(I<<14&4294967295|I>>>18),I=j+(L^T&(C^L))+k[12]+2368359562&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(j^C^L)+k[5]+4294588738&4294967295,T=j+(I<<4&4294967295|I>>>28),I=L+(T^j^C)+k[8]+2272392833&4294967295,L=T+(I<<11&4294967295|I>>>21),I=C+(L^T^j)+k[11]+1839030562&4294967295,C=L+(I<<16&4294967295|I>>>16),I=j+(C^L^T)+k[14]+4259657740&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^L)+k[1]+2763975236&4294967295,T=j+(I<<4&4294967295|I>>>28),I=L+(T^j^C)+k[4]+1272893353&4294967295,L=T+(I<<11&4294967295|I>>>21),I=C+(L^T^j)+k[7]+4139469664&4294967295,C=L+(I<<16&4294967295|I>>>16),I=j+(C^L^T)+k[10]+3200236656&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^L)+k[13]+681279174&4294967295,T=j+(I<<4&4294967295|I>>>28),I=L+(T^j^C)+k[0]+3936430074&4294967295,L=T+(I<<11&4294967295|I>>>21),I=C+(L^T^j)+k[3]+3572445317&4294967295,C=L+(I<<16&4294967295|I>>>16),I=j+(C^L^T)+k[6]+76029189&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^L)+k[9]+3654602809&4294967295,T=j+(I<<4&4294967295|I>>>28),I=L+(T^j^C)+k[12]+3873151461&4294967295,L=T+(I<<11&4294967295|I>>>21),I=C+(L^T^j)+k[15]+530742520&4294967295,C=L+(I<<16&4294967295|I>>>16),I=j+(C^L^T)+k[2]+3299628645&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(C^(j|~L))+k[0]+4096336452&4294967295,T=j+(I<<6&4294967295|I>>>26),I=L+(j^(T|~C))+k[7]+1126891415&4294967295,L=T+(I<<10&4294967295|I>>>22),I=C+(T^(L|~j))+k[14]+2878612391&4294967295,C=L+(I<<15&4294967295|I>>>17),I=j+(L^(C|~T))+k[5]+4237533241&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~L))+k[12]+1700485571&4294967295,T=j+(I<<6&4294967295|I>>>26),I=L+(j^(T|~C))+k[3]+2399980690&4294967295,L=T+(I<<10&4294967295|I>>>22),I=C+(T^(L|~j))+k[10]+4293915773&4294967295,C=L+(I<<15&4294967295|I>>>17),I=j+(L^(C|~T))+k[1]+2240044497&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~L))+k[8]+1873313359&4294967295,T=j+(I<<6&4294967295|I>>>26),I=L+(j^(T|~C))+k[15]+4264355552&4294967295,L=T+(I<<10&4294967295|I>>>22),I=C+(T^(L|~j))+k[6]+2734768916&4294967295,C=L+(I<<15&4294967295|I>>>17),I=j+(L^(C|~T))+k[13]+1309151649&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~L))+k[4]+4149444226&4294967295,T=j+(I<<6&4294967295|I>>>26),I=L+(j^(T|~C))+k[11]+3174756917&4294967295,L=T+(I<<10&4294967295|I>>>22),I=C+(T^(L|~j))+k[2]+718787259&4294967295,C=L+(I<<15&4294967295|I>>>17),I=j+(L^(C|~T))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+L&4294967295}i.prototype.v=function(R,T){T===void 0&&(T=R.length);const j=T-this.blockSize,k=this.C;let C=this.h,L=0;for(;L<T;){if(C==0)for(;L<=j;)o(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<T;)if(k[C++]=R.charCodeAt(L++),C==this.blockSize){o(this,k),C=0;break}}else for(;L<T;)if(k[C++]=R[L++],C==this.blockSize){o(this,k),C=0;break}}this.h=C,this.o+=T},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var j=R.length-8;j<R.length;++j)R[j]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)R[T++]=this.g[j]>>>k&255;return R};function d(R,T){var j=p;return Object.prototype.hasOwnProperty.call(j,R)?j[R]:j[R]=T(R)}function f(R,T){this.h=T;const j=[];let k=!0;for(let C=R.length-1;C>=0;C--){const L=R[C]|0;k&&L==T||(j[C]=L,k=!1)}this.g=j}var p={};function v(R){return-128<=R&&R<128?d(R,function(T){return new f([T|0],T<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(y(-R));const T=[];let j=1;for(let k=0;R>=j;k++)T[k]=R/j|0,j*=4294967296;return new f(T,0)}function _(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return z(_(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=y(Math.pow(T,8));let k=E;for(let L=0;L<R.length;L+=8){var C=Math.min(8,R.length-L);const I=parseInt(R.substring(L,L+C),T);C<8?(C=y(Math.pow(T,C)),k=k.j(C).add(y(I))):(k=k.j(j),k=k.add(y(I)))}return k}var E=v(0),A=v(1),q=v(16777216);r=f.prototype,r.m=function(){if(X(this))return-z(this).m();let R=0,T=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);R+=(k>=0?k:4294967296+k)*T,T*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(J(this))return"0";if(X(this))return"-"+z(this).toString(R);const T=y(Math.pow(R,6));var j=this;let k="";for(;;){const C=de(j,T).g;j=ee(j,C.j(T));let L=((j.g.length>0?j.g[0]:j.h)>>>0).toString(R);if(j=C,J(j))return L+k;for(;L.length<6;)L="0"+L;k=L+k}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function J(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function X(R){return R.h==-1}r.l=function(R){return R=ee(this,R),X(R)?-1:J(R)?0:1};function z(R){const T=R.g.length,j=[];for(let k=0;k<T;k++)j[k]=~R.g[k];return new f(j,~R.h).add(A)}r.abs=function(){return X(this)?z(this):this},r.add=function(R){const T=Math.max(this.g.length,R.g.length),j=[];let k=0;for(let C=0;C<=T;C++){let L=k+(this.i(C)&65535)+(R.i(C)&65535),I=(L>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);k=I>>>16,L&=65535,I&=65535,j[C]=I<<16|L}return new f(j,j[j.length-1]&-2147483648?-1:0)};function ee(R,T){return R.add(z(T))}r.j=function(R){if(J(this)||J(R))return E;if(X(this))return X(R)?z(this).j(z(R)):z(z(this).j(R));if(X(R))return z(this.j(z(R)));if(this.l(q)<0&&R.l(q)<0)return y(this.m()*R.m());const T=this.g.length+R.g.length,j=[];for(var k=0;k<2*T;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let C=0;C<R.g.length;C++){const L=this.i(k)>>>16,I=this.i(k)&65535,le=R.i(C)>>>16,Ie=R.i(C)&65535;j[2*k+2*C]+=I*Ie,W(j,2*k+2*C),j[2*k+2*C+1]+=L*Ie,W(j,2*k+2*C+1),j[2*k+2*C+1]+=I*le,W(j,2*k+2*C+1),j[2*k+2*C+2]+=L*le,W(j,2*k+2*C+2)}for(R=0;R<T;R++)j[R]=j[2*R+1]<<16|j[2*R];for(R=T;R<2*T;R++)j[R]=0;return new f(j,0)};function W(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function fe(R,T){this.g=R,this.h=T}function de(R,T){if(J(T))throw Error("division by zero");if(J(R))return new fe(E,E);if(X(R))return T=de(z(R),T),new fe(z(T.g),z(T.h));if(X(T))return T=de(R,z(T)),new fe(z(T.g),T.h);if(R.g.length>30){if(X(R)||X(T))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=T;k.l(R)<=0;)j=xe(j),k=xe(k);var C=Ee(j,1),L=Ee(k,1);for(k=Ee(k,2),j=Ee(j,2);!J(k);){var I=L.add(k);I.l(R)<=0&&(C=C.add(j),L=I),k=Ee(k,1),j=Ee(j,1)}return T=ee(R,C.j(T)),new fe(C,T)}for(C=E;R.l(T)>=0;){for(j=Math.max(1,Math.floor(R.m()/T.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),L=y(j),I=L.j(T);X(I)||I.l(R)>0;)j-=k,L=y(j),I=L.j(T);J(L)&&(L=A),C=C.add(L),R=ee(R,I)}return new fe(C,R)}r.B=function(R){return de(this,R).h},r.and=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)&R.i(k);return new f(j,this.h&R.h)},r.or=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)|R.i(k);return new f(j,this.h|R.h)},r.xor=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)^R.i(k);return new f(j,this.h^R.h)};function xe(R){const T=R.g.length+1,j=[];for(let k=0;k<T;k++)j[k]=R.i(k)<<1|R.i(k-1)>>>31;return new f(j,R.h)}function Ee(R,T){const j=T>>5;T%=32;const k=R.g.length-j,C=[];for(let L=0;L<k;L++)C[L]=T>0?R.i(L+j)>>>T|R.i(L+j+1)<<32-T:R.i(L+j);return new f(C,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Jb=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,Si=f}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e_,Fo,t_,ud,Dm,n_,s_,r_;(function(){var r,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function o(u,g){if(g)e:{var b=i;u=u.split(".");for(var N=0;N<u.length-1;N++){var B=u[N];if(!(B in b))break e;b=b[B]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=v,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function E(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(N,B,K){for(var ve=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ve[Ke-2]=arguments[Ke];return g.prototype[B].apply(N,ve)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function q(u){const g=u.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function J(u,g){for(let N=1;N<arguments.length;N++){const B=arguments[N];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const K=B.length||0;u.length=b+K;for(let ve=0;ve<K;ve++)u[b+ve]=B[ve]}else u.push(B)}}class X{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(u){f.setTimeout(()=>{throw u},0)}function ee(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class W{constructor(){this.h=this.g=null}add(g,b){const N=fe.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var fe=new X(()=>new de,u=>u.reset());class de{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,Ee=!1,R=new W,T=()=>{const u=Promise.resolve(void 0);xe=()=>{u.then(j)}};function j(){for(var u;u=ee();){try{u.h.call(u.g)}catch(b){z(b)}var g=fe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function le(u,g){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(le,C),le.prototype.init=function(u,g){const b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),Y=0;function he(u,g,b,N,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=B,this.key=++Y,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Be(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function Xe(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function S(u){const g={};for(const b in u)g[b]=u[b];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,g){let b,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(b in N)u[b]=N[b];for(let K=0;K<P.length;K++)b=P[K],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function O(u){this.src=u,this.g={},this.h=0}O.prototype.add=function(u,g,b,N,B){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const ve=Z(u,g,N,B);return ve>-1?(g=u[ve],b||(g.fa=!1)):(g=new he(g,this.src,K,!!N,B),g.fa=b,u.push(g)),g};function M(u,g){const b=g.type;if(b in u.g){var N=u.g[b],B=Array.prototype.indexOf.call(N,g,void 0),K;(K=B>=0)&&Array.prototype.splice.call(N,B,1),K&&(_e(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Z(u,g,b,N){for(let B=0;B<u.length;++B){const K=u[B];if(!K.da&&K.listener==g&&K.capture==!!b&&K.ha==N)return B}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Ne={};function ke(u,g,b,N,B){if(Array.isArray(g)){for(let K=0;K<g.length;K++)ke(u,g[K],b,N,B);return null}return b=pe(b),u&&u[Ie]?u.J(g,b,p(N)?!!N.capture:!1,B):Ye(u,g,b,!1,N,B)}function Ye(u,g,b,N,B,K){if(!g)throw Error("Invalid event type");const ve=p(B)?!!B.capture:!!B;let Ke=Re(u);if(Ke||(u[oe]=Ke=new O(u)),b=Ke.add(g,b,N,ve,K),b.proxy)return b;if(N=ce(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)L||(B=ve),B===void 0&&(B=!1),u.addEventListener(g.toString(),N,B);else if(u.attachEvent)u.attachEvent(Oe(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ce(){function u(b){return g.call(u.src,u.listener,b)}const g=Ae;return u}function be(u,g,b,N,B){if(Array.isArray(g))for(var K=0;K<g.length;K++)be(u,g[K],b,N,B);else N=p(N)?!!N.capture:!!N,b=pe(b),u&&u[Ie]?(u=u.i,K=String(g).toString(),K in u.g&&(g=u.g[K],b=Z(g,b,N,B),b>-1&&(_e(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[K],u.h--)))):u&&(u=Re(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Z(g,b,N,B)),(b=u>-1?g[u]:null)&&ge(b))}function ge(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ie])M(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(Oe(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=Re(g))?(M(b,u),b.h==0&&(b.src=null,g[oe]=null)):_e(u)}}}function Oe(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function Ae(u,g){if(u.da)u=!0;else{g=new le(g,this);const b=u.listener,N=u.ha||u.src;u.fa&&ge(u),u=b.call(N,g)}return u}function Re(u){return u=u[oe],u instanceof O?u:null}var $="__closure_events_fn_"+(Math.random()*1e9>>>0);function pe(u){return typeof u=="function"?u:(u[$]||(u[$]=function(g){return u.handleEvent(g)}),u[$])}function ye(){k.call(this),this.i=new O(this),this.M=this,this.G=null}E(ye,k),ye.prototype[Ie]=!0,ye.prototype.removeEventListener=function(u,g,b,N){be(this,u,g,b,N)};function Ve(u,g){var b,N=u.G;if(N)for(b=[];N;N=N.G)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new C(g,u);else if(g instanceof C)g.target=g.target||u;else{var B=g;g=new C(N,u),se(g,B)}B=!0;let K,ve;if(b)for(ve=b.length-1;ve>=0;ve--)K=g.g=b[ve],B=me(K,N,!0,g)&&B;if(K=g.g=u,B=me(K,N,!0,g)&&B,B=me(K,N,!1,g)&&B,b)for(ve=0;ve<b.length;ve++)K=g.g=b[ve],B=me(K,N,!1,g)&&B}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let N=0;N<b.length;N++)_e(b[N]);delete u.g[g],u.h--}}this.G=null},ye.prototype.J=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},ye.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function me(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let K=0;K<g.length;++K){const ve=g[K];if(ve&&!ve.da&&ve.capture==b){const Ke=ve.listener,kt=ve.ha||ve.src;ve.fa&&M(u.i,ve),B=Ke.call(kt,N)!==!1&&B}}return B&&!N.defaultPrevented}function je(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function We(u){u.g=je(()=>{u.g=null,u.i&&(u.i=!1,We(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class jt extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(u){k.call(this),this.h=u,this.g={}}E(Rn,k);var cs=[];function As(u){Be(u.g,function(g,b){this.g.hasOwnProperty(b)&&ge(g)},u),u.g={}}Rn.prototype.N=function(){Rn.Z.N.call(this),As(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=f.JSON.stringify,Fn=f.JSON.parse,Na=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Sc(){}function Nc(){}var us={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){C.call(this,"d")}E(nn,C);function Gn(){C.call(this,"c")}E(Gn,C);var It={},Ac=null;function Aa(){return Ac=Ac||new ye}It.Ia="serverreachability";function jc(u){C.call(this,It.Ia,u)}E(jc,C);function Cs(u){const g=Aa();Ve(g,new jc(g))}It.STAT_EVENT="statevent";function Ui(u,g){C.call(this,It.STAT_EVENT,u),this.stat=g}E(Ui,C);function Pt(u){const g=Aa();Ve(g,new Ui(g,u))}It.Ja="timingevent";function Rs(u,g){C.call(this,It.Ja,u),this.size=g}E(Rs,C);function Is(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function ds(){this.g=!0}ds.prototype.ua=function(){this.g=!1};function ih(u,g,b,N,B,K){u.info(function(){if(u.g)if(K){var ve="",Ke=K.split("&");for(let ct=0;ct<Ke.length;ct++){var kt=Ke[ct].split("=");if(kt.length>1){const St=kt[0];kt=kt[1];const $n=St.split("_");ve=$n.length>=2&&$n[1]=="type"?ve+(St+"="+kt+"&"):ve+(St+"=redacted&")}}}else ve=null;else ve=K;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+g+`
`+b+`
`+ve})}function Cc(u,g,b,N,B,K,ve){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+g+`
`+b+`
`+K+" "+ve})}function ks(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ah(u,b)+(N?" "+N:"")})}function zi(u,g){u.info(function(){return"TIMEOUT: "+g})}ds.prototype.info=function(){};function ah(u,g){if(!u.g)return g;if(!g)return null;try{const K=JSON.parse(g);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var b=K[u];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ve=1;ve<N.length;ve++)N[ve]=""}}}}return js(K)}catch{return g}}var Bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bl;function qi(){}E(qi,Sc),qi.prototype.g=function(){return new XMLHttpRequest},Bl=new qi;function ar(u){return encodeURIComponent(String(u))}function Rc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function hs(u,g,b,N){this.j=u,this.i=g,this.l=b,this.S=N||1,this.V=new Rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fs}function fs(){this.i=null,this.g="",this.h=!1}var Ut={},Zt={};function Ds(u,g,b){u.M=1,u.A=Hi(Bt(g)),u.u=b,u.R=!0,ja(u,null)}function ja(u,g){u.F=Date.now(),Ms(u),u.B=Bt(u.A);var b=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),ka(b.i,"t",N),u.C=0,b=u.j.L,u.h=new fs,u.g=Gc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new jt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,N=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(cs[0]=B.toString()),B=cs);for(let K=0;K<B.length;K++){const ve=ke(b,B[K],N||g.handleEvent,!1,g.h||g);if(!ve)break;g.g[ve.key]=ve}g=u.J?S(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Cs(),ih(u.i,u.v,u.B,u.l,u.S,u.u)}hs.prototype.ba=function(u){u=u.target;const g=this.O;g&&ps(u)==3?g.j():this.Y(u)},hs.prototype.Y=function(u){try{if(u==this.g)e:{const Ke=ps(this.g),kt=this.g.ya(),ct=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Ke!=4||kt==7||(kt==8||ct<=0?Cs(3):Cs(2)),Os(this);var g=this.g.ca();this.X=g;var b=lh(this);if(this.o=g==200,Cc(this.i,this.v,this.B,this.l,this.S,Ke,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var K=N;break t}}K=null}if(u=K)ks(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vs(this,u);else{this.o=!1,this.m=3,Pt(12),In(this),Yn(this);break e}}if(this.R){u=!0;let St;for(;!this.K&&this.C<b.length;)if(St=kc(this,b),St==Zt){Ke==4&&(this.m=4,Pt(14),u=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Ut){this.m=4,Pt(15),ks(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else ks(this.i,this.l,St,null),Vs(this,St);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||b.length!=0||this.h.h||(this.m=1,Pt(16),u=!1),this.o=this.o&&u,!u)ks(this.i,this.l,b,"[Invalid Chunked Response]"),In(this),Yn(this);else if(b.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),no(ve),ve.P=!0,Pt(11))}}else ks(this.i,this.l,b,null),Vs(this,b);Ke==4&&In(this),this.o&&!this.K&&(Ke==4?Bc(this.j,this):(this.o=!1,Ms(this)))}else or(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),In(this),Yn(this)}}}catch{}finally{}};function lh(u){if(!Ic(u))return u.g.la();const g=sn(u.g);if(g==="")return"";let b="";const N=g.length,B=ps(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return In(u),Yn(u),"";u.h.i=new f.TextDecoder}for(let K=0;K<N;K++)u.h.h=!0,b+=u.h.i.decode(g[K],{stream:!(B&&K==N-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Ic(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kc(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?Zt:(b=Number(g.substring(b,N)),isNaN(b)?Ut:(N+=1,N+b>g.length?Zt:(g=g.slice(N,N+b),u.C=N+b,g)))}hs.prototype.cancel=function(){this.K=!0,In(this)};function Ms(u){u.T=Date.now()+u.H,Ca(u,u.H)}function Ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Is(y(u.aa,u),g)}function Os(u){u.D&&(f.clearTimeout(u.D),u.D=null)}hs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(zi(this.i,this.B),this.M!=2&&(Cs(),Pt(17)),In(this),this.m=2,Yn(this)):Ca(this,this.T-u)};function Yn(u){u.j.I==0||u.K||Bc(u.j,u)}function In(u){Os(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,As(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Vs(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ps(b.h,u))){if(!u.L&&Ps(b.h,u)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)La(b),Gr(b);else break e;Xi(b),Pt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Is(y(b.Va,b),6e3));Ls(b.h)<=1&&b.ta&&(b.ta=void 0)}else Fs(b,11)}else if((u.L||b.g==u)&&La(b),!I(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let ct=B[g];const St=ct[0];if(!(St<=b.K))if(b.K=St,ct=ct[1],b.I==2)if(ct[0]=="c"){b.M=ct[1],b.ba=ct[2];const $n=ct[3];$n!=null&&(b.ka=$n,b.j.info("VER="+b.ka));const Gs=ct[4];Gs!=null&&(b.za=Gs,b.j.info("SVER="+b.za));const ys=ct[5];ys!=null&&typeof ys=="number"&&ys>0&&(N=1.5*ys,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const vs=u.g;if(vs){const Wi=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var K=N.h;K.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Fl(K,K.h),K.h=null))}if(N.G){const Pa=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(N.wa=Pa,ht(N.J,N.G,Pa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var ve=u;if(N.na=Fc(N,N.L?N.ba:null,N.W),ve.L){Gl(N.h,ve);var Ke=ve,kt=N.O;kt&&(Ke.H=kt),Ke.D&&(Os(Ke),Ms(Ke)),N.g=ve}else Uc(N);b.i.length>0&&Hs(b)}else ct[0]!="stop"&&ct[0]!="close"||Fs(b,7);else b.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Fs(b,7):eo(b):ct[0]!="noop"&&b.l&&b.l.qa(ct),b.A=0)}}Cs(4)}catch{}}var zt=class{constructor(u,g){this.g=u,this.map=g}};function ql(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ls(u){return u.h?1:u.g?u.g.size:0}function Ps(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Fl(u,g){u.g?u.g.add(g):u.h=g}function Gl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ql.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return q(u.i)}var Dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const N=u[b].indexOf("=");let B,K=null;N>=0?(B=u[b].substring(0,N),K=u[b].substring(N+1)):B=u[b],g(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof kn?(this.l=u.l,Jt(this,u.j),this.o=u.o,this.g=u.g,Pr(this,u.u),this.h=u.h,Kl(this,Lc(u.i)),this.m=u.m):u&&(g=String(u).match(Dc))?(this.l=!1,Jt(this,g[1]||"",!0),this.o=Us(g[2]||""),this.g=Us(g[3]||"",!0),Pr(this,g[4]),this.h=Us(g[5]||"",!0),Kl(this,g[6]||"",!0),this.m=Us(g[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}kn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Fi(g,Ia,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Fi(g,Ia,!0),"@"),u.push(ar(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Fi(b,b.charAt(0)=="/"?Ql:Mc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Fi(b,Oc)),u.join("")},kn.prototype.resolve=function(u){const g=Bt(this);let b=!!u.j;b?Jt(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var N=u.h;if(b)Pr(g,u.u);else if(b=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=g.h.lastIndexOf("/");B!=-1&&(N=g.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let ve=0;ve<B.length;){const Ke=B[ve++];Ke=="."?N&&ve==B.length&&K.push(""):Ke==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),N&&ve==B.length&&K.push("")):(K.push(Ke),N=!0)}N=K.join("/")}else N=B}return b?g.h=N:b=u.i.toString()!=="",b?Kl(g,Lc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Bt(u){return new kn(u)}function Jt(u,g,b){u.j=b?Us(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Pr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Kl(u,g,b){g instanceof zr?(u.i=g,Da(u.i,u.l)):(b||(g=Fi(g,Ur)),u.i=new zr(g,u.l))}function ht(u,g,b){u.i.set(g,b)}function Hi(u){return ht(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Us(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fi(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,_n),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function _n(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ia=/[#\/\?@]/g,Mc=/[#\?:]/g,Ql=/[#\?]/g,Ur=/[#\?@]/g,Oc=/#/g;function zr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ra(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=zr.prototype,r.add=function(u,g){wn(this),this.i=null,u=Br(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Vc(u,g){wn(u),g=Br(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function $l(u,g){return wn(u),g=Br(u,g),u.g.has(g)}r.forEach=function(u,g){wn(this),this.g.forEach(function(b,N){b.forEach(function(B){u.call(g,B,N,this)},this)},this)};function Xl(u,g){wn(u);let b=[];if(typeof g=="string")$l(u,g)&&(b=b.concat(u.g.get(Br(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return wn(this),this.i=null,u=Br(this,u),$l(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=Xl(this,u),u.length>0?String(u[0]):g):g};function ka(u,g,b){Vc(u,g),b.length>0&&(u.i=null,u.g.set(Br(u,g),q(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const B=ar(b);b=Xl(this,b);for(let K=0;K<b.length;K++){let ve=B;b[K]!==""&&(ve+="="+ar(b[K])),u.push(ve)}}return this.i=u.join("&")};function Lc(u){const g=new zr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Br(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Da(u,g){g&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(b,N){const B=N.toLowerCase();N!=B&&(Vc(this,N),ka(this,B,b))},u)),u.j=g}function ms(u,g){const b=new ds;if(f.Image){const N=new Image;N.onload=_(Kn,b,"TestLoadImage: loaded",!0,g,N),N.onerror=_(Kn,b,"TestLoadImage: error",!1,g,N),N.onabort=_(Kn,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=_(Kn,b,"TestLoadImage: timeout",!1,g,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function Wl(u,g){const b=new ds,N=new AbortController,B=setTimeout(()=>{N.abort(),Kn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(K=>{clearTimeout(B),K.ok?Kn(b,"TestPingServer: ok",!0,g):Kn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Kn(b,"TestPingServer: error",!1,g)})}function Kn(u,g,b,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(b)}catch{}}function qr(){this.g=new Na}function zs(u){this.i=u.Sb||null,this.h=u.ab||!1}E(zs,Sc),zs.prototype.g=function(){return new Gi(this.i,this.h)};function Gi(u,g){ye.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Gi,ye),r=Gi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,gs(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Hr(this):gs(this),this.readyState==3&&Ma(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Hr(this))},r.Na=function(u){this.g&&(this.response=u,Hr(this))},r.ga=function(){this.g&&Hr(this)};function Hr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,gs(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function gs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qn(u){let g="";return Be(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Yi(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Qn(b),typeof u=="string"?b!=null&&ar(b):ht(u,g,b))}function gt(u){ye.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(gt,ye);var Bs=/^https?$/i,Zl=["POST","PUT"];r=gt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){Ki(this,K);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)b.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const K of N.keys())b.set(K,N.get(K));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Zl,g,void 0)>=0)||N||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ve]of b)this.g.setRequestHeader(K,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Ki(this,K)}};function Ki(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Jl(u),lr(u)}function Jl(u){u.A||(u.A=!0,Ve(u,"complete"),Ve(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ve(this,"complete"),Ve(this,"abort"),lr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),gt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Qi(this):this.Xa())},r.Xa=function(){Qi(this)};function Qi(u){if(u.h&&typeof d<"u"){if(u.v&&ps(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ve(u,"readystatechange"),ps(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=K===0){let ve=String(u.D).match(Dc)[1]||null;!ve&&f.self&&f.self.location&&(ve=f.self.location.protocol.slice(0,-1)),N=!Bs.test(ve?ve.toLowerCase():"")}b=N}if(b)Ve(u,"complete"),Ve(u,"success");else{u.o=6;try{var B=ps(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Jl(u)}}finally{lr(u)}}}}function lr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Ve(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ps(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ps(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Fn(g)}};function sn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function or(u){const g={};u=(u.g&&ps(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(I(u[N]))continue;var b=Rc(u[N]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=g[B]||[];g[B]=K,K.push(b)}Xe(g,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Fr(u){this.za=0,this.i=[],this.j=new ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qs("baseRetryDelayMs",5e3,u),this.Za=qs("retryDelaySeedMs",1e4,u),this.Ta=qs("forwardChannelMaxRetries",2,u),this.va=qs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ql(u&&u.concurrentRequestLimit),this.Ba=new qr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fr.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,N){Pt(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Fc(this,null,this.W),Hs(this)};function eo(u){if(Oa(u),u.I==3){var g=u.V++,b=Bt(u.J);if(ht(b,"SID",u.M),ht(b,"RID",g),ht(b,"TYPE","terminate"),$i(u,b),g=new hs(u,u.j,g),g.M=2,g.A=Hi(Bt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Gc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ms(g)}Hc(u)}function Gr(u){u.g&&(no(u),u.g.cancel(),u.g=null)}function Oa(u){Gr(u),u.v&&(f.clearTimeout(u.v),u.v=null),La(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Hs(u){if(!Hl(u.h)&&!u.m){u.m=!0;var g=u.Ea;xe||T(),Ee||(xe(),Ee=!0),R.add(g,u),u.D=0}}function Va(u,g){return Ls(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Is(y(u.Ea,u,g),qc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new hs(this,this.j,u);let K=this.o;if(this.U&&(K?(K=S(K),se(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Pc(this,B,g),b=Bt(this.J),ht(b,"RID",u),ht(b,"CVER",22),this.G&&ht(b,"X-HTTP-Session-Id",this.G),$i(this,b),K&&(this.R?g="headers="+ar(Qn(K))+"&"+g:this.u&&Yi(b,this.u,K)),Fl(this.h,B),this.Ra&&ht(b,"TYPE","init"),this.S?(ht(b,"$req",g),ht(b,"SID","null"),B.U=!0,Ds(B,b,null)):Ds(B,b,g),this.I=2}}else this.I==3&&(u?to(this,u):this.i.length==0||Hl(this.h)||to(this))};function to(u,g){var b;g?b=g.l:b=u.V++;const N=Bt(u.J);ht(N,"SID",u.M),ht(N,"RID",b),ht(N,"AID",u.K),$i(u,N),u.u&&u.o&&Yi(N,u.u,u.o),b=new hs(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Pc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Fl(u.h,b),Ds(b,N,g)}function $i(u,g){u.H&&Be(u.H,function(b,N){ht(g,N,b)}),u.l&&Be({},function(b,N){ht(g,N,b)})}function Pc(u,g,b){b=Math.min(u.i.length,b);const N=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let Ke=-1;for(;;){const kt=["count="+b];Ke==-1?b>0?(Ke=B[0].g,kt.push("ofs="+Ke)):Ke=0:kt.push("ofs="+Ke);let ct=!0;for(let St=0;St<b;St++){var K=B[St].g;const $n=B[St].map;if(K-=Ke,K<0)Ke=Math.max(0,B[St].g-100),ct=!1;else try{K="req"+K+"_"||"";try{var ve=$n instanceof Map?$n:Object.entries($n);for(const[Gs,ys]of ve){let vs=ys;p(ys)&&(vs=js(ys)),kt.push(K+Gs+"="+encodeURIComponent(vs))}}catch(Gs){throw kt.push(K+"type="+encodeURIComponent("_badmap")),Gs}}catch{N&&N($n)}}if(ct){ve=kt.join("&");break e}}ve=void 0}return u=u.i.splice(0,b),g.G=u,ve}function Uc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;xe||T(),Ee||(xe(),Ee=!0),R.add(g,u),u.A=0}}function Xi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Is(y(u.Da,u),qc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Is(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Gr(this),zc(this))};function no(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function zc(u){u.g=new hs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Bt(u.na);ht(g,"RID","rpc"),ht(g,"SID",u.M),ht(g,"AID",u.K),ht(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ht(g,"TO",u.ia),ht(g,"TYPE","xmlhttp"),$i(u,g),u.u&&u.o&&Yi(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Hi(Bt(g)),b.u=null,b.R=!0,ja(b,u)}r.Va=function(){this.C!=null&&(this.C=null,Gr(this),Xi(this),Pt(19))};function La(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Bc(u,g){var b=null;if(u.g==g){La(u),no(u),u.g=null;var N=2}else if(Ps(u.h,g))b=g.G,Gl(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;N=Aa(),Ve(N,new Rs(N,b)),Hs(u)}else Uc(u);else if(B=g.m,B==3||B==0&&g.X>0||!(N==1&&Va(u,g)||N==2&&Xi(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Fs(u,5);break;case 4:Fs(u,10);break;case 3:Fs(u,6);break;default:Fs(u,2)}}}function qc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Fs(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),N=u.Ua;const B=!N;N=new kn(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Jt(N,"https"),Hi(N),B?ms(N.toString(),b):Wl(N.toString(),b)}else Pt(2);u.I=0,u.l&&u.l.pa(g),Hc(u),Oa(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Hc(u){if(u.I=0,u.ja=[],u.l){const g=Yl(u.h);(g.length!=0||u.i.length!=0)&&(J(u.ja,g),J(u.ja,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.oa()}}function Fc(u,g,b){var N=b instanceof kn?Bt(b):new kn(b);if(N.g!="")g&&(N.g=g+"."+N.g),Pr(N,N.u);else{var B=f.location;N=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const K=new kn(null);N&&Jt(K,N),g&&(K.g=g),B&&Pr(K,B),b&&(K.h=b),N=K}return b=u.G,g=u.wa,b&&g&&ht(N,b,g),ht(N,"VER",u.ka),$i(u,N),N}function Gc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new gt(new zs({ab:b})):new gt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}r=Yc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Yr(){}Yr.prototype.g=function(u,g){return new yn(u,g)};function yn(u,g){ye.call(this),this.g=new Fr(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new cr(this)}E(yn,ye),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){eo(this.g)},yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=js(u),u=b);g.i.push(new zt(g.Ya++,u)),g.I==3&&Hs(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,yn.Z.N.call(this)};function Kc(u){nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Kc,nn);function Qc(){Gn.call(this),this.status=1}E(Qc,Gn);function cr(u){this.g=u}E(cr,Yc),cr.prototype.ra=function(){Ve(this.g,"a")},cr.prototype.qa=function(u){Ve(this.g,new Kc(u))},cr.prototype.pa=function(u){Ve(this.g,new Qc)},cr.prototype.oa=function(){Ve(this.g,"b")},Yr.prototype.createWebChannel=Yr.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,r_=function(){return new Yr},s_=function(){return Aa()},n_=It,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,ud=Bi,zl.COMPLETE="complete",t_=zl,Nc.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",ye.prototype.listen=ye.prototype.J,Fo=Nc,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,e_=gt}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});const Jv="@firebase/firestore",ex="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Jm("@firebase/firestore");function gl(){return wa.logLevel}function Te(r,...e){if(wa.logLevel<=nt.DEBUG){const s=e.map(ug);wa.debug(`Firestore (${Ol}): ${r}`,...s)}}function kr(r,...e){if(wa.logLevel<=nt.ERROR){const s=e.map(ug);wa.error(`Firestore (${Ol}): ${r}`,...s)}}function Nl(r,...e){if(wa.logLevel<=nt.WARN){const s=e.map(ug);wa.warn(`Firestore (${Ol}): ${r}`,...s)}}function ug(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(r,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,i_(r,i,s)}function i_(r,e,s){let i=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw kr(i),new Error(i)}function dt(r,e,s,i){let o="Unexpected state";typeof s=="string"?o=s:i=s,r||i_(e,o,i)}function Ge(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Or{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(mn.UNAUTHENTICATED)))}shutdown(){}}class NN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class AN{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){dt(this.o===void 0,42304);let i=this.i;const o=v=>this.i!==i?(i=this.i,s(v)):Promise.resolve();let d=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ni,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ni)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new a_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class jN{constructor(e,s,i){this.P=e,this.T=s,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CN{constructor(e,s,i){this.P=e,this.T=s,this.I=i}getToken(){return Promise.resolve(new jN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){dt(this.o===void 0,3512);const i=d=>{d.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>i(d)))};const o=d=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(dt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new tx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=IN(40);for(let d=0;d<o.length;++d)i.length<20&&o[d]<s&&(i+=e.charAt(o[d]%62))}return i}}function st(r,e){return r<e?-1:r>e?1:0}function Mm(r,e){const s=Math.min(r.length,e.length);for(let i=0;i<s;i++){const o=r.charAt(i),d=e.charAt(i);if(o!==d)return gm(o)===gm(d)?st(o,d):gm(o)?1:-1}return st(r.length,e.length)}const kN=55296,DN=57343;function gm(r){const e=r.charCodeAt(0);return e>=kN&&e<=DN}function Al(r,e,s){return r.length===e.length&&r.every(((i,o)=>s(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="__name__";class Ws{constructor(e,s,i){s===void 0?s=0:s>e.length&&Ue(637,{offset:s,range:e.length}),i===void 0?i=e.length-s:i>e.length-s&&Ue(1746,{length:i,range:e.length-s}),this.segments=e,this.offset=s,this.len=i}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach((i=>{s.push(i)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,i=this.limit();s<i;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const i=Math.min(e.length,s.length);for(let o=0;o<i;o++){const d=Ws.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return st(e.length,s.length)}static compareSegments(e,s){const i=Ws.isNumericId(e),o=Ws.isNumericId(s);return i&&!o?-1:!i&&o?1:i&&o?Ws.extractNumericId(e).compare(Ws.extractNumericId(s)):Mm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class bt extends Ws{construct(e,s,i){return new bt(e,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((o=>o.length>0)))}return new bt(s)}static emptyPath(){return new bt([])}}const MN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Ws{construct(e,s,i){return new un(e,s,i)}static isValidIdentifier(e){return MN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nx}static keyField(){return new un([nx])}static fromServerFormat(e){const s=[];let i="",o=0;const d=()=>{if(i.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new we(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new we(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(d(),o++)}if(d(),f)throw new we(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(s)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(bt.fromString(e))}static fromName(e){return new Me(bt.fromString(e).popFirst(5))}static empty(){return new Me(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return bt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r,e,s){if(!s)throw new we(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ON(r,e,s,i){if(e===!0&&i===!0)throw new we(ie.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function sx(r){if(!Me.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rx(r){if(Me.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function o_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ue(12329,{type:typeof r})}function qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=zd(r);throw new we(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,e){const s={typeString:r};return e&&(s.value=e),s}function pc(r,e){if(!o_(r))throw new we(ie.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in e)if(e[i]){const o=e[i].typeString,d="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){s=`JSON field '${i}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${i}' field to equal '${d.value}'`;break}}if(s)throw new we(ie.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=-62135596800,ax=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),i=Math.floor((e-1e3*s)*ax);return new Et(s,i)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<ix)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ax}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Qt("string",Et._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Et(0,0))}static max(){return new qe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;function VN(r,e){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(i===1e9?new Et(s+1,0):new Et(s,i));return new ji(o,Me.empty(),e)}function LN(r){return new ji(r.readTime,r.key,sc)}class ji{constructor(e,s,i){this.readTime=e,this.documentKey=s,this.largestBatchId=i}static min(){return new ji(qe.min(),Me.empty(),sc)}static max(){return new ji(qe.max(),Me.empty(),sc)}}function PN(r,e){let s=r.readTime.compareTo(e.readTime);return s!==0?s:(s=Me.comparator(r.documentKey,e.documentKey),s!==0?s:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==UN)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ue(((i,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(i,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(i,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ue?s:ue.resolve(s)}catch(s){return ue.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.reject(s)}static resolve(e){return new ue(((s,i)=>{s(e)}))}static reject(e){return new ue(((s,i)=>{i(e)}))}static waitFor(e){return new ue(((s,i)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(v=>i(v)))})),f=!0,d===o&&s()}))}static or(e){let s=ue.resolve(!1);for(const i of e)s=s.next((o=>o?ue.resolve(o):i()));return s}static forEach(e,s){const i=[];return e.forEach(((o,d)=>{i.push(s.call(this,o,d))})),this.waitFor(i)}static mapArray(e,s){return new ue(((i,o)=>{const d=e.length,f=new Array(d);let p=0;for(let v=0;v<d;v++){const y=v;s(e[y]).next((_=>{f[y]=_,++p,p===d&&i(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new ue(((i,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):i()};d()}))}}function BN(r){const e=r.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ll(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function qd(r){return r==null}function Sd(r){return r===0&&1/r==-1/0}function qN(r){return typeof r=="number"&&Number.isInteger(r)&&!Sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function HN(r){let e="";for(let s=0;s<r.length;s++)e.length>0&&(e=lx(e)),e=FN(r.get(s),e);return lx(e)}function FN(r,e){let s=e;const i=r.length;for(let o=0;o<i;o++){const d=r.charAt(o);switch(d){case"\0":s+="";break;case c_:s+="";break;default:s+=d}}return s}function lx(r){return r+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(r){let e=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e++;return e}function Vi(r,e){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e(s,r[s])}function u_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,s){this.comparator=e,this.root=s||cn.EMPTY}insert(e,s){return new At(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(e){let s=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return s+i.left.size;o<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,i)=>(e(s,i),!1)))}toString(){const e=[];return this.inorderTraversal(((s,i)=>(e.push(`${s}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,s,i,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?i(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,s,i,o,d){this.key=e,this.value=s,this.color=i??cn.RED,this.left=o??cn.EMPTY,this.right=d??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,i,o,d){return new cn(e??this.key,s??this.value,i??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,i){let o=this;const d=i(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,i),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let i,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,s,i,o,d){return this}insert(e,s,i){return new cn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,i)=>(e(s),!1)))}forEachInRange(e,s){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new cx(this.data.getIterator())}getIteratorFrom(e){return new cx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((i=>{s=s.add(i)})),s}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const s=this.data.getIterator(),i=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Wt(this.comparator);return s.data=e,s}}class cx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Bn([])}unionWith(e){let s=new Wt(un.comparator);for(const i of this.fields)s=s.add(i);for(const i of e)s=s.add(i);return new Bn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new d_("Invalid base64 string: "+d):d}})(e);return new dn(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new dn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const s=GN.exec(r);if(dt(!!s,46558,{timestamp:r}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ri(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="server_timestamp",f_="__type__",m_="__previous_value__",g_="__local_write_time__";function fg(r){return(r?.mapValue?.fields||{})[f_]?.stringValue===h_}function Hd(r){const e=r.mapValue.fields[m_];return fg(e)?Hd(e):e}function rc(r){const e=Ci(r.mapValue.fields[g_].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,s,i,o,d,f,p,v,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=i,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=_}}const Nd="(default)";class ic{constructor(e,s){this.projectId=e,this.database=s||Nd}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",KN="__max__",td={mapValue:{}},y_="__vector__",Ad="value";function Ii(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?fg(r)?4:$N(r)?9007199254740991:QN(r)?10:11:Ue(28295,{value:r})}function rr(r,e){if(r===e)return!0;const s=Ii(r);if(s!==Ii(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return rc(r).isEqual(rc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Ci(o.timestampValue),p=Ci(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,d){return Ri(o.bytesValue).isEqual(Ri(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,d){return Ot(o.geoPointValue.latitude)===Ot(d.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(d.geoPointValue.longitude)})(r,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return Ot(o.integerValue)===Ot(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=Ot(o.doubleValue),p=Ot(d.doubleValue);return f===p?Sd(f)===Sd(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return Al(r.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(ox(f)!==ox(p))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(p[v]===void 0||!rr(f[v],p[v])))return!1;return!0})(r,e);default:return Ue(52216,{left:r})}}function ac(r,e){return(r.values||[]).find((s=>rr(s,e)))!==void 0}function jl(r,e){if(r===e)return 0;const s=Ii(r),i=Ii(e);if(s!==i)return st(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=Ot(d.integerValue||d.doubleValue),v=Ot(f.integerValue||f.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(r,e);case 3:return ux(r.timestampValue,e.timestampValue);case 4:return ux(rc(r),rc(e));case 5:return Mm(r.stringValue,e.stringValue);case 6:return(function(d,f){const p=Ri(d),v=Ri(f);return p.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),v=f.split("/");for(let y=0;y<p.length&&y<v.length;y++){const _=st(p[y],v[y]);if(_!==0)return _}return st(p.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=st(Ot(d.latitude),Ot(f.latitude));return p!==0?p:st(Ot(d.longitude),Ot(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return dx(r.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},v=f.fields||{},y=p[Ad]?.arrayValue,_=v[Ad]?.arrayValue,E=st(y?.values?.length||0,_?.values?.length||0);return E!==0?E:dx(y,_)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===td.mapValue&&f===td.mapValue)return 0;if(d===td.mapValue)return 1;if(f===td.mapValue)return-1;const p=d.fields||{},v=Object.keys(p),y=f.fields||{},_=Object.keys(y);v.sort(),_.sort();for(let E=0;E<v.length&&E<_.length;++E){const A=Mm(v[E],_[E]);if(A!==0)return A;const q=jl(p[v[E]],y[_[E]]);if(q!==0)return q}return st(v.length,_.length)})(r.mapValue,e.mapValue);default:throw Ue(23264,{he:s})}}function ux(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const s=Ci(r),i=Ci(e),o=st(s.seconds,i.seconds);return o!==0?o:st(s.nanos,i.nanos)}function dx(r,e){const s=r.values||[],i=e.values||[];for(let o=0;o<s.length&&o<i.length;++o){const d=jl(s[o],i[o]);if(d)return d}return st(s.length,i.length)}function Cl(r){return Om(r)}function Om(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ci(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ri(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Me.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",o=!0;for(const d of s.values||[])o?o=!1:i+=",",i+=Om(d);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of i)d?d=!1:o+=",",o+=`${f}:${Om(s.fields[f])}`;return o+"}"})(r.mapValue):Ue(61005,{value:r})}function dd(r){switch(Ii(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(r);return e?16+dd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ri(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,d)=>o+dd(d)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Vi(i.fields,((d,f)=>{o+=d.length+dd(f)})),o})(r.mapValue);default:throw Ue(13486,{value:r})}}function hx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Vm(r){return!!r&&"integerValue"in r}function mg(r){return!!r&&"arrayValue"in r}function fx(r){return!!r&&"nullValue"in r}function mx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hd(r){return!!r&&"mapValue"in r}function QN(r){return(r?.mapValue?.fields||{})[p_]?.stringValue===y_}function Xo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Vi(r.mapValue.fields,((s,i)=>e.mapValue.fields[s]=Xo(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Xo(r.arrayValue.values[s]);return e}return{...r}}function $N(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===KN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let i=0;i<e.length-1;++i)if(s=(s.mapValue.fields||{})[e.get(i)],!hd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(s)}setAll(e){let s=un.emptyPath(),i={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,i,o),i={},o=[],s=p.popLast()}f?i[p.lastSegment()]=Xo(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,i,o)}delete(e){const s=this.field(e.popLast());hd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=s.mapValue.fields[e.get(i)];hd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(i)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,i){Vi(s,((o,d)=>e[o]=d));for(const o of i)delete e[o]}clone(){return new Cn(Xo(this.value))}}function v_(r){const e=[];return Vi(r.fields,((s,i)=>{const o=new un([s]);if(hd(i)){const d=v_(i.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,s,i,o,d,f,p){this.key=e,this.documentType=s,this.version=i,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new gn(e,0,qe.min(),qe.min(),qe.min(),Cn.empty(),0)}static newFoundDocument(e,s,i,o){return new gn(e,1,s,qe.min(),i,o,0)}static newNoDocument(e,s){return new gn(e,2,s,qe.min(),qe.min(),Cn.empty(),0)}static newUnknownDocument(e,s){return new gn(e,3,s,qe.min(),qe.min(),Cn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,s){this.position=e,this.inclusive=s}}function gx(r,e,s){let i=0;for(let o=0;o<r.position.length;o++){const d=e[o],f=r.position[o];if(d.field.isKeyField()?i=Me.comparator(Me.fromName(f.referenceValue),s.key):i=jl(f,s.data.field(d.field)),d.dir==="desc"&&(i*=-1),i!==0)break}return i}function px(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!rr(r.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,s="asc"){this.field=e,this.dir=s}}function XN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class Kt extends x_{constructor(e,s,i){super(),this.field=e,this.op=s,this.value=i}static create(e,s,i){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,i):new ZN(e,s,i):s==="array-contains"?new tA(e,i):s==="in"?new nA(e,i):s==="not-in"?new sA(e,i):s==="array-contains-any"?new rA(e,i):new Kt(e,s,i)}static createKeyFieldInFilter(e,s,i){return s==="in"?new JN(e,i):new eA(e,i)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(jl(s,this.value)):s!==null&&Ii(this.value)===Ii(s)&&this.matchesComparison(jl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends x_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Ns(e,s)}matches(e){return b_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b_(r){return r.op==="and"}function __(r){return WN(r)&&b_(r)}function WN(r){for(const e of r.filters)if(e instanceof Ns)return!1;return!0}function Lm(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+Cl(r.value);if(__(r))return r.filters.map((e=>Lm(e))).join(",");{const e=r.filters.map((s=>Lm(s))).join(",");return`${r.op}(${e})`}}function w_(r,e){return r instanceof Kt?(function(i,o){return o instanceof Kt&&i.op===o.op&&i.field.isEqual(o.field)&&rr(i.value,o.value)})(r,e):r instanceof Ns?(function(i,o){return o instanceof Ns&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((d,f,p)=>d&&w_(f,o.filters[p])),!0):!1})(r,e):void Ue(19439)}function E_(r){return r instanceof Kt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Cl(s.value)}`})(r):r instanceof Ns?(function(s){return s.op.toString()+" {"+s.getFilters().map(E_).join(" ,")+"}"})(r):"Filter"}class ZN extends Kt{constructor(e,s,i){super(e,s,i),this.key=Me.fromName(i.referenceValue)}matches(e){const s=Me.comparator(e.key,this.key);return this.matchesComparison(s)}}class JN extends Kt{constructor(e,s){super(e,"in",s),this.keys=T_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class eA extends Kt{constructor(e,s){super(e,"not-in",s),this.keys=T_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function T_(r,e){return(e.arrayValue?.values||[]).map((s=>Me.fromName(s.referenceValue)))}class tA extends Kt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return mg(s)&&ac(s.arrayValue,this.value)}}class nA extends Kt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ac(this.value.arrayValue,s)}}class sA extends Kt{constructor(e,s){super(e,"not-in",s)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ac(this.value.arrayValue,s)}}class rA extends Kt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!mg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>ac(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,s=null,i=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=i,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function yx(r,e=null,s=[],i=[],o=null,d=null,f=null){return new iA(r,e,s,i,o,d,f)}function gg(r){const e=Ge(r);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((i=>Lm(i))).join(","),s+="|ob:",s+=e.orderBy.map((i=>(function(d){return d.field.canonicalString()+d.dir})(i))).join(","),qd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>Cl(i))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>Cl(i))).join(",")),e.Te=s}return e.Te}function pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!XN(r.orderBy[s],e.orderBy[s]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!w_(r.filters[s],e.filters[s]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!px(r.startAt,e.startAt)&&px(r.endAt,e.endAt)}function Pm(r){return Me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,s=null,i=[],o=[],d=null,f="F",p=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aA(r,e,s,i,o,d,f,p){return new Pl(r,e,s,i,o,d,f,p)}function yg(r){return new Pl(r)}function vx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function S_(r){return r.collectionGroup!==null}function Wo(r){const e=Ge(r);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Wt(un.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new lc(d,i))})),s.has(un.keyField().canonicalString())||e.Ie.push(new lc(un.keyField(),i))}return e.Ie}function er(r){const e=Ge(r);return e.Ee||(e.Ee=lA(e,Wo(r))),e.Ee}function lA(r,e){if(r.limitType==="F")return yx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new lc(o.field,d)}));const s=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return yx(r.path,r.collectionGroup,e,r.filters,r.limit,s,i)}}function Um(r,e){const s=r.filters.concat([e]);return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function zm(r,e,s){return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,s,r.startAt,r.endAt)}function Fd(r,e){return pg(er(r),er(e))&&r.limitType===e.limitType}function N_(r){return`${gg(er(r))}|lt:${r.limitType}`}function pl(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((o=>E_(o))).join(", ")}]`),qd(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((o=>Cl(o))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((o=>Cl(o))).join(",")),`Target(${i})`})(er(r))}; limitType=${r.limitType})`}function Gd(r,e){return e.isFoundDocument()&&(function(i,o){const d=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(d):Me.isDocumentKey(i.path)?i.path.isEqual(d):i.path.isImmediateParentOf(d)})(r,e)&&(function(i,o){for(const d of Wo(i))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const d of i.filters)if(!d.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,p,v){const y=gx(f,p,v);return f.inclusive?y<=0:y<0})(i.startAt,Wo(i),o)||i.endAt&&!(function(f,p,v){const y=gx(f,p,v);return f.inclusive?y>=0:y>0})(i.endAt,Wo(i),o))})(r,e)}function oA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function A_(r){return(e,s)=>{let i=!1;for(const o of Wo(r)){const d=cA(o,e,s);if(d!==0)return d;i=i||o.field.isKeyField()}return 0}}function cA(r,e,s){const i=r.field.isKeyField()?Me.comparator(e.key,s.key):(function(d,f,p){const v=f.data.field(d),y=p.data.field(d);return v!==null&&y!==null?jl(v,y):Ue(42886)})(r.field,e,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ue(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i!==void 0){for(const[o,d]of i)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[s]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vi(this.inner,((s,i)=>{for(const[o,d]of i)e(o,d)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new At(Me.comparator);function Dr(){return uA}const j_=new At(Me.comparator);function Go(...r){let e=j_;for(const s of r)e=e.insert(s.key,s);return e}function C_(r){let e=j_;return r.forEach(((s,i)=>e=e.insert(s,i.overlayedDocument))),e}function ga(){return Zo()}function R_(){return Zo()}function Zo(){return new Ta((r=>r.toString()),((r,e)=>r.isEqual(e)))}const dA=new At(Me.comparator),hA=new Wt(Me.comparator);function rt(...r){let e=hA;for(const s of r)e=e.add(s);return e}const fA=new Wt(st);function mA(){return fA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function I_(r){return{integerValue:""+r}}function gA(r,e){return qN(e)?I_(e):vg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function pA(r,e,s){return r instanceof Cd?(function(o,d){const f={fields:{[f_]:{stringValue:h_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&fg(d)&&(d=Hd(d)),d&&(f.fields[m_]=d),{mapValue:f}})(s,e):r instanceof oc?D_(r,e):r instanceof cc?M_(r,e):(function(o,d){const f=k_(o,d),p=xx(f)+xx(o.Ae);return Vm(f)&&Vm(o.Ae)?I_(p):vg(o.serializer,p)})(r,e)}function yA(r,e,s){return r instanceof oc?D_(r,e):r instanceof cc?M_(r,e):s}function k_(r,e){return r instanceof Rd?(function(i){return Vm(i)||(function(d){return!!d&&"doubleValue"in d})(i)})(e)?e:{integerValue:0}:null}class Cd extends Yd{}class oc extends Yd{constructor(e){super(),this.elements=e}}function D_(r,e){const s=O_(e);for(const i of r.elements)s.some((o=>rr(o,i)))||s.push(i);return{arrayValue:{values:s}}}class cc extends Yd{constructor(e){super(),this.elements=e}}function M_(r,e){let s=O_(e);for(const i of r.elements)s=s.filter((o=>!rr(o,i)));return{arrayValue:{values:s}}}class Rd extends Yd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function xx(r){return Ot(r.integerValue||r.doubleValue)}function O_(r){return mg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function vA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof oc&&o instanceof oc||i instanceof cc&&o instanceof cc?Al(i.elements,o.elements,rr):i instanceof Rd&&o instanceof Rd?rr(i.Ae,o.Ae):i instanceof Cd&&o instanceof Cd})(r.transform,e.transform)}class xA{constructor(e,s){this.version=e,this.transformResults=s}}class bn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kd{}function V_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qd(r.key,bn.none()):new yc(r.key,r.data,bn.none());{const s=r.data,i=Cn.empty();let o=new Wt(un.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?i.delete(d):i.set(d,f),o=o.add(d)}return new Li(r.key,i,new Bn(o.toArray()),bn.none())}}function bA(r,e,s){r instanceof yc?(function(o,d,f){const p=o.value.clone(),v=_x(o.fieldTransforms,d,f.transformResults);p.setAll(v),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,s):r instanceof Li?(function(o,d,f){if(!fd(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=_x(o.fieldTransforms,d,f.transformResults),v=d.data;v.setAll(L_(o)),v.setAll(p),d.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Jo(r,e,s,i){return r instanceof yc?(function(d,f,p,v){if(!fd(d.precondition,f))return p;const y=d.value.clone(),_=wx(d.fieldTransforms,v,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,s,i):r instanceof Li?(function(d,f,p,v){if(!fd(d.precondition,f))return p;const y=wx(d.fieldTransforms,v,f),_=f.data;return _.setAll(L_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((E=>E.field)))})(r,e,s,i):(function(d,f,p){return fd(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,s)}function _A(r,e){let s=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),d=k_(i.transform,o||null);d!=null&&(s===null&&(s=Cn.empty()),s.set(i.field,d))}return s||null}function bx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Al(i,o,((d,f)=>vA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yc extends Kd{constructor(e,s,i,o=[]){super(),this.key=e,this.value=s,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Li extends Kd{constructor(e,s,i,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=i,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function L_(r){const e=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);e.set(s,i)}})),e}function _x(r,e,s){const i=new Map;dt(r.length===s.length,32656,{Re:s.length,Ve:r.length});for(let o=0;o<s.length;o++){const d=r[o],f=d.transform,p=e.data.field(d.field);i.set(d.field,yA(f,p,s[o]))}return i}function wx(r,e,s){const i=new Map;for(const o of r){const d=o.transform,f=s.data.field(o.field);i.set(o.field,pA(d,f,e))}return i}class Qd extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s,i,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,s){const i=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&bA(d,e,i[o])}}applyToLocalView(e,s){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(s=Jo(i,e,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(s=Jo(i,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const i=R_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const v=V_(f,p);v!==null&&i.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(qe.min())})),i}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),rt())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((s,i)=>bx(s,i)))&&Al(this.baseMutations,e.baseMutations,((s,i)=>bx(s,i)))}}class xg{constructor(e,s,i,o){this.batch=e,this.commitVersion=s,this.mutationResults=i,this.docVersions=o}static from(e,s,i){dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return dA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,i[f].version);return new xg(e,s,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,at;function NA(r){switch(r){case ie.OK:return Ue(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ue(15467,{code:r})}}function P_(r){if(r===void 0)return kr("GRPC error has no .code"),ie.UNKNOWN;switch(r){case Yt.OK:return ie.OK;case Yt.CANCELLED:return ie.CANCELLED;case Yt.UNKNOWN:return ie.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ie.INTERNAL;case Yt.UNAVAILABLE:return ie.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ie.NOT_FOUND;case Yt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Yt.ABORTED:return ie.ABORTED;case Yt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Yt.DATA_LOSS:return ie.DATA_LOSS;default:return Ue(39323,{code:r})}}(at=Yt||(Yt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new Si([4294967295,4294967295],0);function Ex(r){const e=AA().encode(r),s=new Jb;return s.update(e),new Uint8Array(s.digest())}function Tx(r){const e=new DataView(r.buffer),s=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Si([s,i],0),new Si([o,d],0)]}class bg{constructor(e,s,i){if(this.bitmap=e,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Yo(`Invalid padding: ${s}`);if(i<0)throw new Yo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${i}`);if(e.length===0&&s!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Si.fromNumber(this.ge)}ye(e,s,i){let o=e.add(s.multiply(Si.fromNumber(i)));return o.compare(jA)===1&&(o=new Si([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Ex(e),[i,o]=Tx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);if(!this.we(f))return!1}return!0}static create(e,s,i){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new bg(d,o,s);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=Ex(e),[i,o]=Tx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),i=e%8;this.bitmap[s]|=1<<i}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,s,i,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,i){const o=new Map;return o.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,s,i)),new $d(qe.min(),o,new At(st),Dr(),rt())}}class vc{constructor(e,s,i,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,i){return new vc(i,s,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,s,i,o){this.be=e,this.removedTargetIds=s,this.key=i,this.De=o}}class U_{constructor(e,s){this.targetId=e,this.Ce=s}}class z_{constructor(e,s,i=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=i,this.cause=o}}class Sx{constructor(){this.ve=0,this.Fe=Nx(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),s=rt(),i=rt();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:i=i.add(o);break;default:Ue(38017,{changeType:d})}})),new vc(this.Me,this.xe,e,s,i)}qe(){this.Oe=!1,this.Fe=Nx()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dr(),this.Je=nd(),this.He=nd(),this.Ye=new At(st)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const i=this.nt(s);switch(e.state){case 0:this.rt(s)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((i,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,i=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Pm(d))if(i===0){const f=new Me(d.path);this.et(s,f,gn.newNoDocument(f,qe.min()))}else dt(i===1,20013,{expectedCount:i});else{const f=this._t(s);if(f!==i){const p=this.ut(e),v=p?this.ct(p,e,f):1;if(v!==0){this.it(s);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Ri(i).toUint8Array()}catch(v){if(v instanceof d_)return Nl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new bg(f,o,d)}catch(v){return Nl(v instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,s,i){return s.Ce.count===i-this.Pt(e,s.targetId)?0:2}Pt(e,s){const i=this.Ge.getRemoteKeysForTarget(s);let o=0;return i.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Pm(p.target)){const v=new Me(p.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,gn.newNoDocument(v,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let i=rt();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new $d(e,s,this.Ye,this.je,i);return this.je=Dr(),this.Je=nd(),this.He=nd(),this.Ye=new At(st),o}Xe(e,s){if(!this.rt(e))return;const i=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,i),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),i&&(this.je=this.je.insert(s,i))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Sx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Wt(st),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Wt(st),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Te("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function nd(){return new At(Me.comparator)}function Nx(){return new At(Me.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},IA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kA={and:"AND",or:"OR"};class DA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Bm(r,e){return r.useProto3Json||qd(e)?e:{value:e}}function Id(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MA(r,e){return Id(r,e.toTimestamp())}function tr(r){return dt(!!r,49232),qe.fromTimestamp((function(s){const i=Ci(s);return new Et(i.seconds,i.nanos)})(r))}function _g(r,e){return qm(r,e).canonicalString()}function qm(r,e){const s=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?s:s.child(e)}function q_(r){const e=bt.fromString(r);return dt(K_(e),10190,{key:e.toString()}),e}function Hm(r,e){return _g(r.databaseId,e.path)}function pm(r,e){const s=q_(e);if(s.get(1)!==r.databaseId.projectId)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Me(F_(s))}function H_(r,e){return _g(r.databaseId,e)}function OA(r){const e=q_(r);return e.length===4?bt.emptyPath():F_(e)}function Fm(r){return new bt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function F_(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ax(r,e,s){return{name:Hm(r,e),fields:s.value.mapValue.fields}}function VA(r,e){let s;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ue(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(dt(_===void 0||typeof _=="string",58123),dn.fromBase64String(_||"")):(dt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),dn.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?ie.UNKNOWN:P_(y.code);return new we(_,y.message||"")})(f);s=new z_(i,o,d,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(r,i.document.name),d=tr(i.document.updateTime),f=i.document.createTime?tr(i.document.createTime):qe.min(),p=new Cn({mapValue:{fields:i.document.fields}}),v=gn.newFoundDocument(o,d,f,p),y=i.targetIds||[],_=i.removedTargetIds||[];s=new md(y,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(r,i.document),d=i.readTime?tr(i.readTime):qe.min(),f=gn.newNoDocument(o,d),p=i.removedTargetIds||[];s=new md([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(r,i.document),d=i.removedTargetIds||[];s=new md([],d,o,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:d}=i,f=new SA(o,d),p=i.targetId;s=new U_(p,f)}}return s}function LA(r,e){let s;if(e instanceof yc)s={update:Ax(r,e.key,e.value)};else if(e instanceof Qd)s={delete:Hm(r,e.key)};else if(e instanceof Li)s={update:Ax(r,e.key,e.data),updateMask:YA(e.fieldMask)};else{if(!(e instanceof wA))return Ue(16599,{Vt:e.type});s={verify:Hm(r,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((i=>(function(d,f){const p=f.transform;if(p instanceof Cd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof oc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof cc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Rd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ue(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:MA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Ue(27497)})(r,e.precondition)),s}function PA(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map((s=>(function(o,d){let f=o.updateTime?tr(o.updateTime):tr(d);return f.isEqual(qe.min())&&(f=tr(d)),new xA(f,o.transformResults||[])})(s,e)))):[]}function UA(r,e){return{documents:[H_(r,e.path)]}}function zA(r,e){const s={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=H_(r,o);const d=(function(y){if(y.length!==0)return Y_(Ns.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:yl(A.field),direction:HA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=Bm(r,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function BA(r){let e=OA(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let o=null;if(i>0){dt(i===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(E){const A=G_(E);return A instanceof Ns&&__(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(E){return E.map((A=>(function(J){return new lc(vl(J.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(A)))})(s.orderBy));let p=null;s.limit&&(p=(function(E){let A;return A=typeof E=="object"?E.value:E,qd(A)?null:A})(s.limit));let v=null;s.startAt&&(v=(function(E){const A=!!E.before,q=E.values||[];return new jd(q,A)})(s.startAt));let y=null;return s.endAt&&(y=(function(E){const A=!E.before,q=E.values||[];return new jd(q,A)})(s.endAt)),aA(e,o,f,d,p,"F",v,y)}function qA(r,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function G_(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=vl(s.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=vl(s.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=vl(s.unaryFilter.field);return Kt.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=vl(s.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Kt.create(vl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return Ns.create(s.compositeFilter.filters.map((i=>G_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(s.compositeFilter.op))})(r):Ue(30097,{filter:r})}function HA(r){return RA[r]}function FA(r){return IA[r]}function GA(r){return kA[r]}function yl(r){return{fieldPath:r.canonicalString()}}function vl(r){return un.fromServerFormat(r.fieldPath)}function Y_(r){return r instanceof Kt?(function(s){if(s.op==="=="){if(mx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NAN"}};if(fx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(mx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NAN"}};if(fx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(s.field),op:FA(s.op),value:s.value}}})(r):r instanceof Ns?(function(s){const i=s.getFilters().map((o=>Y_(o)));return i.length===1?i[0]:{compositeFilter:{op:GA(s.op),filters:i}}})(r):Ue(54877,{filter:r})}function YA(r){const e=[];return r.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function K_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,s,i,o,d=qe.min(),f=qe.min(),p=dn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.yt=e}}function QA(r){const e=BA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Cn=new XA}addToCollectionParentIndex(e,s){return this.Cn.add(s),ue.resolve()}getCollectionParents(e,s){return ue.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ue.resolve()}deleteFieldIndex(e,s){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,s){return ue.resolve()}getDocumentsMatchingTarget(e,s){return ue.resolve(null)}getIndexType(e,s){return ue.resolve(0)}getFieldIndexes(e,s){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,s){return ue.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,s){return ue.resolve(ji.min())}updateCollectionGroup(e,s,i){return ue.resolve()}updateIndexEntries(e,s){return ue.resolve()}}class XA{constructor(){this.index={}}add(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s]||new Wt(bt.comparator),d=!o.has(i);return this.index[s]=o.add(i),d}has(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Wt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(Q_,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rl(0)}static cr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="LruGarbageCollector",WA=1048576;function Rx([r,e],[s,i]){const o=st(r,s);return o===0?st(e,i):o}class ZA{constructor(e){this.Ir=e,this.buffer=new Wt(Rx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Rx(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,s,i){this.garbageCollector=e,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(Cx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ll(s)?Te(Cx,"Ignoring IndexedDB error during garbage collection: ",s):await Vl(s)}await this.Vr(3e5)}))}}class ej{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(e,s){if(s===0)return ue.resolve(Bd.ce);const i=new ZA(s);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,s,i){return this.mr.removeTargets(e,s,i)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(jx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let i,o,d,f,p,v,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,s)))).next((E=>(d=E,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),gl()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(v-p)+`ms
	Removed ${E} documents in `+(y-v)+`ms
Total Duration: ${y-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:E}))))}}function tj(r,e){return new ej(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.changes=new Ta((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?ue.resolve(i):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,s,i,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,s){let i=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(i!==null&&Jo(i.mutation,o,Bn.empty(),Et.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.getLocalViewOfDocuments(e,i,rt()).next((()=>i))))}getLocalViewOfDocuments(e,s,i=rt()){const o=ga();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,i).next((d=>{let f=Go();return d.forEach(((p,v)=>{f=f.insert(p,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const i=ga();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,rt())))}populateOverlays(e,s,i){const o=[];return i.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,i,o){let d=Dr();const f=Zo(),p=(function(){return Zo()})();return s.forEach(((v,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Li)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Jo(_.mutation,y,_.mutation.getFieldMask(),Et.now())):f.set(y.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new sj(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const i=Zo();let o=new At(((f,p)=>f-p)),d=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((v=>{const y=s.get(v);if(y===null)return;let _=i.get(v)||Bn.empty();_=p.applyToLocalView(y,_),i.set(v,_);const E=(o.get(p.batchId)||rt()).add(v);o=o.insert(p.batchId,E)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),y=v.key,_=v.value,E=R_();_.forEach((A=>{if(!d.has(A)){const q=V_(s.get(A),i.get(A));q!==null&&E.set(A,q),d=d.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ue.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,s,i,o){return(function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):S_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,i,o):this.getDocumentsMatchingCollectionQuery(e,s,i,o)}getNextDocuments(e,s,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,i,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,i.largestBatchId,o-d.size):ue.resolve(ga());let p=sc,v=d;return f.next((y=>ue.forEach(y,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),d.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{v=v.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,v,y,rt()))).next((_=>({batchId:p,changes:C_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Me(s)).next((i=>{let o=Go();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,i,o){const d=s.collectionGroup;let f=Go();return this.indexManager.getCollectionParents(e,d).next((p=>ue.forEach(p,(v=>{const y=(function(E,A){return new Pl(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,A)=>{f=f.insert(E,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,i,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,i.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,i,d,o)))).next((f=>{d.forEach(((v,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,gn.newInvalidDocument(_)))}));let p=Go();return f.forEach(((v,y)=>{const _=d.get(v);_!==void 0&&Jo(_.mutation,y,Bn.empty(),Et.now()),Gd(s,y)&&(p=p.insert(v,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ue.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}})(s)),ue.resolve()}getNamedQuery(e,s){return ue.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:QA(o.bundledQuery),readTime:tr(o.readTime)}})(s)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.overlays=new At(Me.comparator),this.qr=new Map}getOverlay(e,s){return ue.resolve(this.overlays.get(s))}getOverlays(e,s){const i=ga();return ue.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&i.set(o,d)})))).next((()=>i))}saveOverlays(e,s,i){return i.forEach(((o,d)=>{this.St(e,s,d)})),ue.resolve()}removeOverlaysForBatchId(e,s,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,s,i){const o=ga(),d=s.length+1,f=new Me(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const v=p.getNext().value,y=v.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&v.largestBatchId>i&&o.set(v.getKey(),v)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,s,i,o){let d=new At(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>i){let _=d.get(y.largestBatchId);_===null&&(_=ga(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=ga(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return ue.resolve(p)}St(e,s,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new TA(s,i));let d=this.qr.get(s);d===void 0&&(d=rt(),this.qr.set(s,d)),this.qr.set(s,d.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Qr=new Wt(tn.$r),this.Ur=new Wt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const i=new tn(e,s);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,s){e.forEach((i=>this.addReference(i,s)))}removeReference(e,s){this.Gr(new tn(e,s))}zr(e,s){e.forEach((i=>this.removeReference(i,s)))}jr(e){const s=new Me(new bt([])),i=new tn(s,e),o=new tn(s,e+1),d=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Me(new bt([])),i=new tn(s,e),o=new tn(s,e+1);let d=rt();return this.Ur.forEachInRange([i,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new tn(e,0),i=this.Qr.firstAfterOrEqual(s);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Me.comparator(e.key,s.key)||st(e.Yr,s.Yr)}static Kr(e,s){return st(e.Yr,s.Yr)||Me.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(tn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,i,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new EA(d,s,i,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new tn(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,s){return ue.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const i=s+1,o=this.ei(i),d=o<0?0:o;return ue.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const i=new tn(s,0),o=new tn(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([i,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),ue.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let i=new Wt(st);return s.forEach((o=>{const d=new tn(o,0),f=new tn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{i=i.add(p.Yr)}))})),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,s){const i=s.path,o=i.length+1;let d=i;Me.isDocumentKey(d)||(d=d.child(""));const f=new tn(new Me(d),0);let p=new Wt(st);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(v.Yr)),!0)}),f),ue.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){dt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(s.mutations,(o=>{const d=new tn(o.key,s.batchId);return i=i.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,s){const i=new tn(s,0),o=this.Zr.firstAfterOrEqual(i);return ue.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.ri=e,this.docs=(function(){return new At(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const i=s.key,o=this.docs.get(i),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const i=this.docs.get(s);return ue.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(s))}getEntries(e,s){let i=Dr();return s.forEach((o=>{const d=this.docs.get(o);i=i.insert(o,d?d.document.mutableCopy():gn.newInvalidDocument(o))})),ue.resolve(i)}getDocumentsMatchingQuery(e,s,i,o){let d=Dr();const f=s.path,p=new Me(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:y,value:{document:_}}=v.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||PN(LN(_),i)<=0||(o.has(_.key)||Gd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return ue.resolve(d)}getAllFromCollectionGroup(e,s,i,o){Ue(9500)}ii(e,s){return ue.forEach(this.docs,(i=>s(i)))}newChangeBuffer(e){return new uj(this)}getSize(e){return ue.resolve(this.size)}}class uj extends nj{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ue.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.si=new Ta((s=>gg(s)),pg),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=Rl.ur()}forEachTarget(e,s){return this.si.forEach(((i,o)=>s(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.oi&&(this.oi=s),ue.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Rl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ue.resolve()}updateTargetData(e,s){return this.Pr(s),ue.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,s,i){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ue.waitFor(d).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,s){const i=this.si.get(s)||null;return ue.resolve(i)}addMatchingKeys(e,s,i){return this._i.Wr(s,i),ue.resolve()}removeMatchingKeys(e,s,i){this._i.zr(s,i);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ue.resolve()}getMatchingKeysForTargetId(e,s){const i=this._i.Hr(s);return ue.resolve(i)}containsKey(e,s){return ue.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Bd(0),this.li=!1,this.li=!0,this.hi=new lj,this.referenceDelegate=e(this),this.Pi=new dj(this),this.indexManager=new $A,this.remoteDocumentCache=(function(o){return new cj(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new KA(s),this.Ii=new ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new aj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let i=this.ui[e.toKey()];return i||(i=new oj(s,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,i){Te("MemoryPersistence","Starting transaction:",e);const o=new hj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return ue.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,s))))}}class hj extends zN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new wg,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,s,i){return this.Ri.addReference(i,s),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,s,i){return this.Ri.removeReference(i,s),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ue.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>i.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(i=>{const o=Me.fromPath(i);return this.gi(e,o).next((d=>{d||s.removeEntry(o,qe.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((i=>{i?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ue.or([()=>ue.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class kd{constructor(e,s){this.persistence=e,this.pi=new Ta((i=>HN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=tj(this,s)}static mi(e,s){return new kd(e,s)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>s.next((o=>i+o))))}wr(e){let s=0;return this.pr(e,(i=>{s++})).next((()=>s))}pr(e,s){return ue.forEach(this.pi,((i,o)=>this.br(e,i,o).next((d=>d?ue.resolve():s(o)))))}removeTargets(e,s,i){return this.persistence.getTargetCache().removeTargets(e,s,i)}removeOrphanedDocuments(e,s){let i=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(i++,d.removeEntry(f,qe.min()))})))).next((()=>d.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeTarget(e,s){const i=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=dd(e.data.value)),s}br(e,s,i){return ue.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ue.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,s,i,o){this.targetId=e,this.fromCache=s,this.Es=i,this.ds=o}static As(e,s){let i=rt(),o=rt();for(const d of s.docChanges)switch(d.type){case 0:i=i.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new Tg(e,s.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Bw()?8:BN(pn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,i,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,i).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new fj;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,i,o){return i.documentReadCount<this.fs?(gl()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",pl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(gl()<=nt.DEBUG&&Te("QueryEngine","Query:",pl(s),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(gl()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",pl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(s))):ue.resolve())}ys(e,s){if(vx(s))return ue.resolve(null);let i=er(s);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=zm(s,null,"F"),i=er(s)),this.indexManager.getDocumentsMatchingTarget(e,i).next((d=>{const f=rt(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((v=>{const y=this.Ds(s,p);return this.Cs(s,y,f,v.readTime)?this.ys(e,zm(s,null,"F")):this.vs(e,y,s,v)}))))})))))}ws(e,s,i,o){return vx(s)||o.isEqual(qe.min())?ue.resolve(null):this.ps.getDocuments(e,i).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,i,o)?ue.resolve(null):(gl()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pl(s)),this.vs(e,f,s,VN(o,sc)).next((p=>p)))}))}Ds(e,s){let i=new Wt(A_(e));return s.forEach(((o,d)=>{Gd(e,d)&&(i=i.add(d))})),i}Cs(e,s,i,o){if(e.limit===null)return!1;if(i.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,i){return gl()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",pl(s)),this.ps.getDocumentsMatchingQuery(e,s,ji.min(),i)}vs(e,s,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="LocalStore",gj=3e8;class pj{constructor(e,s,i,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new At(st),this.xs=new Ta((d=>gg(d)),pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function yj(r,e,s,i){return new pj(r,e,s,i)}async function X_(r,e){const s=Ge(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return s.mutationQueue.getAllMutationBatches(i).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(i)))).next((d=>{const f=[],p=[];let v=rt();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(i,v).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function vj(r,e){const s=Ge(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,y,_){const E=y.batch,A=E.keys();let q=ue.resolve();return A.forEach((J=>{q=q.next((()=>_.getEntry(v,J))).next((X=>{const z=y.docVersions.get(J);dt(z!==null,48541),X.version.compareTo(z)<0&&(E.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),_.addEntry(X)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(v,E)))})(s,i,e,d).next((()=>d.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let v=rt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(v=v.add(p.batch.mutations[y].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(i,o)))}))}function W_(r){const e=Ge(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function xj(r,e){const s=Ge(r),i=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,E))));let q=A.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(E)!==null?q=q.withResumeToken(dn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,i)),o=o.insert(E,q),(function(X,z,ee){return X.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=gj?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,q,_)&&p.push(s.Pi.updateTargetData(d,q))}));let v=Dr(),y=rt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(bj(d,f,e.documentUpdates).next((_=>{v=_.ks,y=_.qs}))),!i.isEqual(qe.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((E=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,i)));p.push(_)}return ue.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,v,y))).next((()=>v))})).then((d=>(s.Ms=o,d)))}function bj(r,e,s){let i=rt(),o=rt();return s.forEach((d=>i=i.add(d))),e.getEntries(r,i).next((d=>{let f=Dr();return s.forEach(((p,v)=>{const y=d.get(p);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(qe.min())?(e.removeEntry(p,v.readTime),f=f.insert(p,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),f=f.insert(p,v)):Te(Sg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function _j(r,e){const s=Ge(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hg),s.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function wj(r,e){const s=Ge(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return s.Pi.getTargetData(i,e).next((d=>d?(o=d,ue.resolve(o)):s.Pi.allocateTargetId(i).next((f=>(o=new _i(e,f,"TargetPurposeListen",i.currentSequenceNumber),s.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=s.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(i.targetId,i),s.xs.set(e,i.targetId)),i}))}async function Gm(r,e,s){const i=Ge(r),o=i.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",d,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ll(f))throw f;Te(Sg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Ix(r,e,s){const i=Ge(r);let o=qe.min(),d=rt();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,y,_){const E=Ge(v),A=E.xs.get(_);return A!==void 0?ue.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,_)})(i,f,er(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,p.targetId).next((v=>{d=v}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,s?o:qe.min(),s?d:rt()))).next((p=>(Ej(i,oA(e),p),{documents:p,Qs:d})))))}function Ej(r,e,s){let i=r.Os.get(e)||qe.min();s.forEach(((o,d)=>{d.readTime.compareTo(i)>0&&(i=d.readTime)})),r.Os.set(e,i)}class kx{constructor(){this.activeTargetIds=mA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tj{constructor(){this.Mo=new kx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,i){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,i){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kx,Promise.resolve()}handleUserChange(e,s,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="ConnectivityMonitor";class Mx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(Dx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(Dx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function Ym(){return sd===null?sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,s,i,o,d){const f=Ym(),p=this.zo(e,s.toUriEncodedString());Te(ym,`Sending RPC '${e}' ${f}:`,p,i);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,d);const{host:y}=new URL(p),_=kl(y);return this.Jo(e,p,v,i,_).then((E=>(Te(ym,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Nl(ym,`RPC '${e}' ${f} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,s,i,o,d,f){return this.Go(e,s,i,o,d)}jo(e,s,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),i&&i.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const i=Nj[e];return`${this.Uo}/v1/${s}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class Cj extends Aj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,i,o,d){const f=Ym();return new Promise(((p,v)=>{const y=new e_;y.setWithCredentials(!0),y.listenOnce(t_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ud.NO_ERROR:const E=y.getResponseJson();Te(fn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),p(E);break;case ud.TIMEOUT:Te(fn,`RPC '${e}' ${f} timed out`),v(new we(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const A=y.getStatus();if(Te(fn,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const J=q?.error;if(J&&J.status&&J.message){const X=(function(ee){const W=ee.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(W)>=0?W:ie.UNKNOWN})(J.status);v(new we(X,J.message))}else v(new we(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new we(ie.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Te(fn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Te(fn,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,i,15)}))}T_(e,s,i){const o=Ym(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=r_(),p=s_(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,i),v.encodeInitMessageHeaders=!0;const _=d.join("");Te(fn,`Creating RPC '${e}' stream ${o}: ${_}`,v);const E=f.createWebChannel(_,v);this.I_(E);let A=!1,q=!1;const J=new jj({Yo:z=>{q?Te(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(Te(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),Te(fn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},Zo:()=>E.close()}),X=(z,ee,W)=>{z.listen(ee,(fe=>{try{W(fe)}catch(de){setTimeout((()=>{throw de}),0)}}))};return X(E,Fo.EventType.OPEN,(()=>{q||(Te(fn,`RPC '${e}' stream ${o} transport opened.`),J.o_())})),X(E,Fo.EventType.CLOSE,(()=>{q||(q=!0,Te(fn,`RPC '${e}' stream ${o} transport closed`),J.a_(),this.E_(E))})),X(E,Fo.EventType.ERROR,(z=>{q||(q=!0,Nl(fn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),J.a_(new we(ie.UNAVAILABLE,"The operation could not be completed")))})),X(E,Fo.EventType.MESSAGE,(z=>{if(!q){const ee=z.data[0];dt(!!ee,16349);const W=ee,fe=W?.error||W[0]?.error;if(fe){Te(fn,`RPC '${e}' stream ${o} received error:`,fe);const de=fe.status;let xe=(function(T){const j=Yt[T];if(j!==void 0)return P_(j)})(de),Ee=fe.message;xe===void 0&&(xe=ie.INTERNAL,Ee="Unknown error status: "+de+" with message "+fe.message),q=!0,J.a_(new we(xe,Ee)),E.close()}else Te(fn,`RPC '${e}' stream ${o} received:`,ee),J.u_(ee)}})),X(p,n_.STAT_EVENT,(z=>{z.stat===Dm.PROXY?Te(fn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Dm.NOPROXY&&Te(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(r){return new DA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,s,i=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=i,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="PersistentStream";class J_{constructor(e,s,i,o,d,f,p,v){this.Mi=e,this.S_=i,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ie.RESOURCE_EXHAUSTED?(kr(s.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===s&&this.G_(i,o)}),(i=>{e((()=>{const o=new we(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,s){const i=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Te(Ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rj extends J_{constructor(e,s,i,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=VA(this.serializer,e),i=(function(d){if(!("targetChange"in d))return qe.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?qe.min():f.readTime?tr(f.readTime):qe.min()})(e);return this.listener.H_(s,i)}Y_(e){const s={};s.database=Fm(this.serializer),s.addTarget=(function(d,f){let p;const v=f.target;if(p=Pm(v)?{documents:UA(d,v)}:{query:zA(d,v).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=B_(d,f.resumeToken);const y=Bm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(qe.min())>0){p.readTime=Id(d,f.snapshotVersion.toTimestamp());const y=Bm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=qA(this.serializer,e);i&&(s.labels=i),this.q_(s)}Z_(e){const s={};s.database=Fm(this.serializer),s.removeTarget=e,this.q_(s)}}class Ij extends J_{constructor(e,s,i,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=PA(e.writeResults,e.commitTime),i=tr(e.commitTime);return this.listener.na(i,s)}ra(){const e={};e.database=Fm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((i=>LA(this.serializer,i)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{}class Dj extends kj{constructor(e,s,i,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,qm(s,i),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new we(ie.UNKNOWN,d.toString())}))}Ho(e,s,i,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,qm(s,i),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new we(ie.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Mj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(s),this.aa=!1):Te("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class Oj{constructor(e,s,i,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{Sa(this)&&(Te(Ea,"Restarting streams for network reachability change."),await(async function(v){const y=Ge(v);y.Ea.add(4),await xc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Wd(y)})(this))}))})),this.Ra=new Mj(i,o)}}async function Wd(r){if(Sa(r))for(const e of r.da)await e(!0)}async function xc(r){for(const e of r.da)await e(!1)}function e1(r,e){const s=Ge(r);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Cg(s)?jg(s):Ul(s).O_()&&Ag(s,e))}function Ng(r,e){const s=Ge(r),i=Ul(s);s.Ia.delete(e),i.O_()&&t1(s,e),s.Ia.size===0&&(i.O_()?i.L_():Sa(s)&&s.Ra.set("Unknown"))}function Ag(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ul(r).Y_(e)}function t1(r,e){r.Va.Ue(e),Ul(r).Z_(e)}function jg(r){r.Va=new CA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ul(r).start(),r.Ra.ua()}function Cg(r){return Sa(r)&&!Ul(r).x_()&&r.Ia.size>0}function Sa(r){return Ge(r).Ea.size===0}function n1(r){r.Va=void 0}async function Vj(r){r.Ra.set("Online")}async function Lj(r){r.Ia.forEach(((e,s)=>{Ag(r,e)}))}async function Pj(r,e){n1(r),Cg(r)?(r.Ra.ha(e),jg(r)):r.Ra.set("Unknown")}async function Uj(r,e,s){if(r.Ra.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){Te(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dd(r,i)}else if(e instanceof md?r.Va.Ze(e):e instanceof U_?r.Va.st(e):r.Va.tt(e),!s.isEqual(qe.min()))try{const i=await W_(r.localStore);s.compareTo(i)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(v.resumeToken,f))}})),p.targetMismatches.forEach(((v,y)=>{const _=d.Ia.get(v);if(!_)return;d.Ia.set(v,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),t1(d,v);const E=new _i(_.target,v,y,_.sequenceNumber);Ag(d,E)})),d.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){Te(Ea,"Failed to raise snapshot:",i),await Dd(r,i)}}async function Dd(r,e,s){if(!Ll(e))throw e;r.Ea.add(1),await xc(r),r.Ra.set("Offline"),s||(s=()=>W_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Ea,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Wd(r)}))}function s1(r,e){return e().catch((s=>Dd(r,s,e)))}async function Zd(r){const e=Ge(r),s=ki(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;zj(e);)try{const o=await _j(e.localStore,i);if(o===null){e.Ta.length===0&&s.L_();break}i=o.batchId,Bj(e,o)}catch(o){await Dd(e,o)}r1(e)&&i1(e)}function zj(r){return Sa(r)&&r.Ta.length<10}function Bj(r,e){r.Ta.push(e);const s=ki(r);s.O_()&&s.X_&&s.ea(e.mutations)}function r1(r){return Sa(r)&&!ki(r).x_()&&r.Ta.length>0}function i1(r){ki(r).start()}async function qj(r){ki(r).ra()}async function Hj(r){const e=ki(r);for(const s of r.Ta)e.ea(s.mutations)}async function Fj(r,e,s){const i=r.Ta.shift(),o=xg.from(i,e,s);await s1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Zd(r)}async function Gj(r,e){e&&ki(r).X_&&await(async function(i,o){if((function(f){return NA(f)&&f!==ie.ABORTED})(o.code)){const d=i.Ta.shift();ki(i).B_(),await s1(i,(()=>i.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Zd(i)}})(r,e),r1(r)&&i1(r)}async function Vx(r,e){const s=Ge(r);s.asyncQueue.verifyOperationInProgress(),Te(Ea,"RemoteStore received new credentials");const i=Sa(s);s.Ea.add(3),await xc(s),i&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Wd(s)}async function Yj(r,e){const s=Ge(r);e?(s.Ea.delete(2),await Wd(s)):e||(s.Ea.add(2),await xc(s),s.Ra.set("Unknown"))}function Ul(r){return r.ma||(r.ma=(function(s,i,o){const d=Ge(s);return d.sa(),new Rj(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Vj.bind(null,r),t_:Lj.bind(null,r),r_:Pj.bind(null,r),H_:Uj.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?jg(r):r.Ra.set("Unknown")):(await r.ma.stop(),n1(r))}))),r.ma}function ki(r){return r.fa||(r.fa=(function(s,i,o){const d=Ge(s);return d.sa(),new Ij(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:qj.bind(null,r),r_:Gj.bind(null,r),ta:Hj.bind(null,r),na:Fj.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Zd(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(Ea,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,s,i,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=i,this.op=o,this.removalCallback=d,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,i,o,d){const f=Date.now()+i,p=new Rg(e,s,f,o,d);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(r,e){if(kr("AsyncQueue",`${e}: ${r}`),Ll(r))return new we(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(s,i)=>e(s,i)||Me.comparator(s.key,i.key):(s,i)=>Me.comparator(s.key,i.key),this.keyedMap=Go(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,i)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const i=new El;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.ga=new At(Me.comparator)}track(e){const s=e.doc.key,i=this.ga.get(s);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(s,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(s):e.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,i)=>{e.push(i)})),e}}class Il{constructor(e,s,i,o,d,f,p,v,y){this.query=e,this.docs=s,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,s,i,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Il(e,s,El.emptySet(s),f,i,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,i=e.docChanges;if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==i[o].type||!s[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Qj{constructor(){this.queries=Px(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const o=Ge(s),d=o.queries;o.queries=Px(),d.forEach(((f,p)=>{for(const v of p.Sa)v.onError(i)}))})(this,new we(ie.ABORTED,"Firestore shutting down"))}}function Px(){return new Ta((r=>N_(r)),Fd)}async function a1(r,e){const s=Ge(r);let i=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(i=2):(d=new Kj,i=e.Da()?0:1);try{switch(i){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Ig(f,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&kg(s)}async function l1(r,e){const s=Ge(r),i=e.query;let o=3;const d=s.queries.get(i);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function $j(r,e){const s=Ge(r);let i=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(i=!0);f.wa=o}}i&&kg(s)}function Xj(r,e,s){const i=Ge(r),o=i.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);i.queries.delete(e)}function kg(r){r.Ca.forEach((e=>{e.next()}))}var Km,Ux;(Ux=Km||(Km={})).Ma="default",Ux.Cache="cache";class o1{constructor(e,s,i){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Wj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=A_(e),this.tu=new El(this.eu)}get nu(){return this.Ya}ru(e,s){const i=s?s.iu:new Lx,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),q=Gd(this.query,E)?E:null,J=!!A&&this.mutatedKeys.has(A.key),X=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let z=!1;A&&q?A.data.isEqual(q.data)?J!==X&&(i.track({type:3,doc:q}),z=!0):this.su(A,q)||(i.track({type:2,doc:q}),z=!0,(v&&this.eu(q,v)>0||y&&this.eu(q,y)<0)&&(p=!0)):!A&&q?(i.track({type:0,doc:q}),z=!0):A&&!q&&(i.track({type:1,doc:A}),z=!0,(v||y)&&(p=!0)),z&&(q?(f=f.add(q),d=X?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,i,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(q,J){const X=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:z})}};return X(q)-X(J)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const p=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,f.length!==0||y?{snapshot:new Il(this.query,e.tu,d,f,e.mutatedKeys,v===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const s=[];return e.forEach((i=>{this.Xa.has(i)||s.push(new u1(i))})),this.Xa.forEach((i=>{e.has(i)||s.push(new c1(i))})),s}cu(e){this.Ya=e.Qs,this.Xa=rt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class Zj{constructor(e,s,i){this.query=e,this.targetId=s,this.view=i}}class Jj{constructor(e){this.key=e,this.hu=!1}}class e4{constructor(e,s,i,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=i,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ta((p=>N_(p)),Fd),this.Iu=new Map,this.Eu=new Set,this.du=new At(Me.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=Rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t4(r,e,s=!0){const i=p1(r);let o;const d=i.Tu.get(e);return d?(i.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await d1(i,e,s,!0),o}async function n4(r,e){const s=p1(r);await d1(s,e,!0,!1)}async function d1(r,e,s,i){const o=await wj(r.localStore,er(e)),d=o.targetId,f=r.sharedClientState.addLocalQueryTarget(d,s);let p;return i&&(p=await s4(r,e,d,f==="current",o.resumeToken)),r.isPrimaryClient&&s&&e1(r.remoteStore,o),p}async function s4(r,e,s,i,o){r.pu=(E,A,q)=>(async function(X,z,ee,W){let fe=z.view.ru(ee);fe.Cs&&(fe=await Ix(X.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,fe))));const de=W&&W.targetChanges.get(z.targetId),xe=W&&W.targetMismatches.get(z.targetId)!=null,Ee=z.view.applyChanges(fe,X.isPrimaryClient,de,xe);return Bx(X,z.targetId,Ee.au),Ee.snapshot})(r,E,A,q);const d=await Ix(r.localStore,e,!0),f=new Wj(e,d.Qs),p=f.ru(d.documents),v=vc.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,v);Bx(r,s,y.au);const _=new Zj(e,s,f);return r.Tu.set(e,_),r.Iu.has(s)?r.Iu.get(s).push(e):r.Iu.set(s,[e]),y.snapshot}async function r4(r,e,s){const i=Ge(r),o=i.Tu.get(e),d=i.Iu.get(o.targetId);if(d.length>1)return i.Iu.set(o.targetId,d.filter((f=>!Fd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),s&&Ng(i.remoteStore,o.targetId),Qm(i,o.targetId)})).catch(Vl)):(Qm(i,o.targetId),await Gm(i.localStore,o.targetId,!0))}async function i4(r,e){const s=Ge(r),i=s.Tu.get(e),o=s.Iu.get(i.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Ng(s.remoteStore,i.targetId))}async function a4(r,e,s){const i=f4(r);try{const o=await(function(f,p){const v=Ge(f),y=Et.now(),_=p.reduce(((q,J)=>q.add(J.key)),rt());let E,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let J=Dr(),X=rt();return v.Ns.getEntries(q,_).next((z=>{J=z,J.forEach(((ee,W)=>{W.isValidDocument()||(X=X.add(ee))}))})).next((()=>v.localDocuments.getOverlayedDocuments(q,J))).next((z=>{E=z;const ee=[];for(const W of p){const fe=_A(W,E.get(W.key).overlayedDocument);fe!=null&&ee.push(new Li(W.key,fe,v_(fe.value.mapValue),bn.exists(!0)))}return v.mutationQueue.addMutationBatch(q,y,ee,p)})).next((z=>{A=z;const ee=z.applyToLocalDocumentSet(E,X);return v.documentOverlayCache.saveOverlays(q,z.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:C_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,p,v){let y=f.Vu[f.currentUser.toKey()];y||(y=new At(st)),y=y.insert(p,v),f.Vu[f.currentUser.toKey()]=y})(i,o.batchId,s),await bc(i,o.changes),await Zd(i.remoteStore)}catch(o){const d=Ig(o,"Failed to persist write");s.reject(d)}}async function h1(r,e){const s=Ge(r);try{const i=await xj(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?dt(f.hu,14607):o.removedDocuments.size>0&&(dt(f.hu,42227),f.hu=!1))})),await bc(s,i,e)}catch(i){await Vl(i)}}function zx(r,e,s){const i=Ge(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const o=[];i.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const v=Ge(f);v.onlineState=p;let y=!1;v.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(p)&&(y=!0)})),y&&kg(v)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function l4(r,e,s){const i=Ge(r);i.sharedClientState.updateQueryState(e,"rejected",s);const o=i.Au.get(e),d=o&&o.key;if(d){let f=new At(Me.comparator);f=f.insert(d,gn.newNoDocument(d,qe.min()));const p=rt().add(d),v=new $d(qe.min(),new Map,new At(st),f,p);await h1(i,v),i.du=i.du.remove(d),i.Au.delete(e),Mg(i)}else await Gm(i.localStore,e,!1).then((()=>Qm(i,e,s))).catch(Vl)}async function o4(r,e){const s=Ge(r),i=e.batch.batchId;try{const o=await vj(s.localStore,e);m1(s,i,null),f1(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await bc(s,o)}catch(o){await Vl(o)}}async function c4(r,e,s){const i=Ge(r);try{const o=await(function(f,p){const v=Ge(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return v.mutationQueue.lookupMutationBatch(y,p).next((E=>(dt(E!==null,37113),_=E.keys(),v.mutationQueue.removeMutationBatch(y,E)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>v.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);m1(i,e,s),f1(i,e),i.sharedClientState.updateMutationState(e,"rejected",s),await bc(i,o)}catch(o){await Vl(o)}}function f1(r,e){(r.mu.get(e)||[]).forEach((s=>{s.resolve()})),r.mu.delete(e)}function m1(r,e,s){const i=Ge(r);let o=i.Vu[i.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Qm(r,e,s=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||g1(r,i)}))}function g1(r,e){r.Eu.delete(e.path.canonicalString());const s=r.du.get(e);s!==null&&(Ng(r.remoteStore,s),r.du=r.du.remove(e),r.Au.delete(s),Mg(r))}function Bx(r,e,s){for(const i of s)i instanceof c1?(r.Ru.addReference(i.key,e),u4(r,i)):i instanceof u1?(Te(Dg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||g1(r,i.key)):Ue(19791,{wu:i})}function u4(r,e){const s=e.key,i=s.path.canonicalString();r.du.get(s)||r.Eu.has(i)||(Te(Dg,"New document in limbo: "+s),r.Eu.add(i),Mg(r))}function Mg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const s=new Me(bt.fromString(e)),i=r.fu.next();r.Au.set(i,new Jj(s)),r.du=r.du.insert(s,i),e1(r.remoteStore,new _i(er(yg(s.path)),i,"TargetPurposeLimboResolution",Bd.ce))}}async function bc(r,e,s){const i=Ge(r),o=[],d=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,v)=>{f.push(i.pu(v,e,s).then((y=>{if((y||s)&&i.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(v.targetId)?.current;i.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Tg.As(v.targetId,y);d.push(_)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(v,y){const _=Ge(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(y,(A=>ue.forEach(A.Es,(q=>_.persistence.referenceDelegate.addReference(E,A.targetId,q))).next((()=>ue.forEach(A.ds,(q=>_.persistence.referenceDelegate.removeReference(E,A.targetId,q)))))))))}catch(E){if(!Ll(E))throw E;Te(Sg,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const q=_.Ms.get(A),J=q.snapshotVersion,X=q.withLastLimboFreeSnapshotVersion(J);_.Ms=_.Ms.insert(A,X)}}})(i.localStore,d))}async function d4(r,e){const s=Ge(r);if(!s.currentUser.isEqual(e)){Te(Dg,"User change. New user:",e.toKey());const i=await X_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((v=>{v.reject(new we(ie.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bc(s,i.Ls)}}function h4(r,e){const s=Ge(r),i=s.Au.get(e);if(i&&i.hu)return rt().add(i.key);{let o=rt();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function p1(r){const e=Ge(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l4.bind(null,e),e.Pu.H_=$j.bind(null,e.eventManager),e.Pu.yu=Xj.bind(null,e.eventManager),e}function f4(r){const e=Ge(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c4.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return yj(this.persistence,new mj,e.initialUser,this.serializer)}Cu(e){return new $_(Eg.mi,this.serializer)}Du(e){return new Tj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class m4 extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){dt(this.persistence.referenceDelegate instanceof kd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JA(i,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new $_((i=>kd.mi(i,s)),this.serializer)}}class $m{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d4.bind(null,this.syncEngine),await Yj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qj})()}createDatastore(e){const s=Xd(e.databaseInfo.databaseId),i=(function(d){return new Cj(d)})(e.databaseInfo);return(function(d,f,p,v){return new Dj(d,f,p,v)})(e.authCredentials,e.appCheckCredentials,i,s)}createRemoteStore(e){return(function(i,o,d,f,p){return new Oj(i,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>zx(this.syncEngine,s,0)),(function(){return Mx.v()?new Mx:new Sj})())}createSyncEngine(e,s){return(function(o,d,f,p,v,y,_){const E=new e4(o,d,f,p,v,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const i=Ge(s);Te(Ea,"RemoteStore shutting down."),i.Ea.add(5),await xc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="FirestoreClient";class g4{constructor(e,s,i,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=i,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(i,(async f=>{Te(Di,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Te(Di,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const i=Ig(s,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xm(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Di,"Initializing OfflineComponentProvider");const s=r.configuration;await e.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await X_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function qx(r,e){r.asyncQueue.verifyOperationInProgress();const s=await p4(r);Te(Di,"Initializing OnlineComponentProvider"),await e.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Vx(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Vx(e.remoteStore,o))),r._onlineComponents=e}async function p4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Di,"Using user provided OfflineComponentProvider");try{await xm(r,r._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Nl("Error using user provided cache. Falling back to memory cache: "+s),await xm(r,new Md)}}else Te(Di,"Using default OfflineComponentProvider"),await xm(r,new m4(void 0));return r._offlineComponents}async function v1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Di,"Using user provided OnlineComponentProvider"),await qx(r,r._uninitializedComponentsProvider._online)):(Te(Di,"Using default OnlineComponentProvider"),await qx(r,new $m))),r._onlineComponents}function y4(r){return v1(r).then((e=>e.syncEngine))}async function Xm(r){const e=await v1(r),s=e.eventManager;return s.onListen=t4.bind(null,e.syncEngine),s.onUnlisten=r4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=n4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),s}function v4(r,e,s={}){const i=new Ni;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,v,y){const _=new y1({next:A=>{_.Nu(),f.enqueueAndForget((()=>l1(d,E))),A.fromCache&&v.source==="server"?y.reject(new we(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new o1(p,_,{includeMetadataChanges:!0,qa:!0});return a1(d,E)})(await Xm(r),r.asyncQueue,e,s,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firestore.googleapis.com",Fx=!0;class Gx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b1,this.ssl=Fx}else this.host=e.host,this.ssl=e.ssl??Fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WA)throw new we(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ON("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,s,i,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new SN;switch(i.type){case"firstParty":return new CN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=Hx.get(s);i&&(Te("ComponentProvider","Removing Datastore"),Hx.delete(s),i.terminate())})(this),Promise.resolve()}}function x4(r,e,s,i={}){r=qn(r,Jd);const o=kl(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${s}`;o&&(db(`https://${p}`),hb("Firestore",!0)),d.host!==b1&&d.host!==p&&Nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...d,host:p,ssl:o,emulatorOptions:i};if(!va(v,f)&&(r._setSettings(v),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=mn.MOCK_USER;else{y=kw(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new we(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new mn(E)}r._authCredentials=new NN(new a_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Vt{constructor(e,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,i){if(pc(s,Vt._jsonSchema))return new Vt(e,i||null,new Me(bt.fromString(s.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Qt("string",Vt._jsonSchemaVersion),referencePath:Qt("string")};class Ai extends Pi{constructor(e,s,i){super(e,s,yg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Me(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function Tt(r,e,...s){if(r=Lt(r),l_("collection","path",e),r instanceof Jd){const i=bt.fromString(e,...s);return rx(i),new Ai(r,null,i)}{if(!(r instanceof Vt||r instanceof Ai))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(bt.fromString(e,...s));return rx(i),new Ai(r.firestore,null,i)}}function $t(r,e,...s){if(r=Lt(r),arguments.length===1&&(e=dg.newId()),l_("doc","path",e),r instanceof Jd){const i=bt.fromString(e,...s);return sx(i),new Vt(r,null,new Me(i))}{if(!(r instanceof Vt||r instanceof Ai))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(bt.fromString(e,...s));return sx(i),new Vt(r.firestore,r instanceof Ai?r.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="AsyncQueue";class Kx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z_(this,"async_queue_retry"),this._c=()=>{const i=vm();i&&Te(Yx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const s=vm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=vm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ni;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ll(e))throw e;Te(Yx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",Qx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(e,s,i){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Rg.createAndSchedule(this,e,s,i,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Ue(47125,{Pc:Qx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Qx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r){return(function(s,i){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of i)if(d in o&&typeof o[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Mr extends Jd{constructor(e,s,i,o){super(e,s,i,o),this.type="firestore",this._queue=new Kx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kx(e),this._firestoreClient=void 0,await e}}}function b4(r,e){const s=typeof r=="object"?r:pb(),i=typeof r=="string"?r:Nd,o=tg(s,"firestore").getImmediate({identifier:i});if(!o._initialized){const d=Rw("firestore");d&&x4(o,...d)}return o}function eh(r){if(r._terminated)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||_4(r),r._firestoreClient}function _4(r){const e=r._freezeSettings(),s=(function(o,d,f,p){return new YN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new g4(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(dn.fromBase64String(e))}catch(s){throw new we(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new as(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:as._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,as._jsonSchema))return as.fromBase64String(e.bytes)}}as._jsonSchemaVersion="firestore/bytes/1.0",as._jsonSchema={type:Qt("string",as._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new we(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new we(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new we(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nr._jsonSchemaVersion}}static fromJSON(e){if(pc(e,nr._jsonSchema))return new nr(e.latitude,e.longitude)}}nr._jsonSchemaVersion="firestore/geoPoint/1.0",nr._jsonSchema={type:Qt("string",nr._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let d=0;d<i.length;++d)if(i[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new sr(e.vectorValues);throw new we(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sr._jsonSchemaVersion="firestore/vectorValue/1.0",sr._jsonSchema={type:Qt("string",sr._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^__.*__$/;class E4{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return this.fieldMask!==null?new Li(e,this.data,this.fieldMask,s,this.fieldTransforms):new yc(e,this.data,s,this.fieldTransforms)}}class _1{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return new Li(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function w1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:r})}}class Vg{constructor(e,s,i,o,d,f){this.settings=e,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w1(this.Ac)&&w4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T4{constructor(e,s,i){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=i||Xd(e)}Cc(e,s,i,o=!1){return new Vg({Ac:e,methodName:s,Dc:i,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(r){const e=r._freezeSettings(),s=Xd(r._databaseId);return new T4(r._databaseId,!!e.ignoreUndefinedProperties,s)}function Lg(r,e,s,i,o,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,s,o);Pg("Data must be an object, but it was:",f,i);const p=S1(i,f);let v,y;if(d.merge)v=new Bn(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const E of d.mergeFields){const A=Wm(e,E,s);if(!f.contains(A))throw new we(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);A1(_,A)||_.push(A)}v=new Bn(_),y=f.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,y=f.fieldTransforms;return new E4(new Cn(p),v,y)}class th extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function E1(r,e,s,i){const o=r.Cc(1,e,s);Pg("Data must be an object, but it was:",o,i);const d=[],f=Cn.empty();Vi(i,((v,y)=>{const _=Ug(e,v,s);y=Lt(y);const E=o.yc(_);if(y instanceof th)d.push(_);else{const A=Ec(y,E);A!=null&&(d.push(_),f.set(_,A))}}));const p=new Bn(d);return new _1(f,p,o.fieldTransforms)}function T1(r,e,s,i,o,d){const f=r.Cc(1,e,s),p=[Wm(e,i,s)],v=[o];if(d.length%2!=0)throw new we(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)p.push(Wm(e,d[A])),v.push(d[A+1]);const y=[],_=Cn.empty();for(let A=p.length-1;A>=0;--A)if(!A1(y,p[A])){const q=p[A];let J=v[A];J=Lt(J);const X=f.yc(q);if(J instanceof th)y.push(q);else{const z=Ec(J,X);z!=null&&(y.push(q),_.set(q,z))}}const E=new Bn(y);return new _1(_,E,f.fieldTransforms)}function S4(r,e,s,i=!1){return Ec(s,r.Cc(i?4:3,e))}function Ec(r,e){if(N1(r=Lt(r)))return Pg("Unsupported field value:",e,r),S1(r,e);if(r instanceof Og)return(function(i,o){if(!w1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const d=i._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const d=[];let f=0;for(const p of i){let v=Ec(p,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),f++}return{arrayValue:{values:d}}})(r,e)}return(function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const d=Et.fromDate(i);return{timestampValue:Id(o.serializer,d)}}if(i instanceof Et){const d=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Id(o.serializer,d)}}if(i instanceof nr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof as)return{bytesValue:B_(o.serializer,i._byteString)};if(i instanceof Vt){const d=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:_g(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof sr)return(function(f,p){return{mapValue:{fields:{[p_]:{stringValue:y_},[Ad]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return vg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${zd(i)}`)})(r,e)}function S1(r,e){const s={};return u_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(r,((i,o)=>{const d=Ec(o,e.mc(i));d!=null&&(s[i]=d)})),{mapValue:{fields:s}}}function N1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Et||r instanceof nr||r instanceof as||r instanceof Vt||r instanceof Og||r instanceof sr)}function Pg(r,e,s){if(!N1(s)||!o_(s)){const i=zd(s);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Wm(r,e,s){if((e=Lt(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Ug(r,e);throw Od("Field path arguments must be of type string or ",r,!1,void 0,s)}const N4=new RegExp("[~\\*/\\[\\]]");function Ug(r,e,s){if(e.search(N4)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new _c(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Od(r,e,s,i,o){const d=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(d||f)&&(v+=" (found",d&&(v+=` in field ${i}`),f&&(v+=` in document ${o}`),v+=")"),new we(ie.INVALID_ARGUMENT,p+r+v)}function A1(r,e){return r.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,i,o,d){this._firestore=e,this._userDataWriter=s,this._key=i,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(nh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class A4 extends j1{data(){return super.data()}}function nh(r,e){return typeof e=="string"?Ug(r,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class R1 extends zg{}function Hn(r,e,...s){let i=[];e instanceof zg&&i.push(e),i=i.concat(s),(function(d){const f=d.filter((v=>v instanceof Bg)).length,p=d.filter((v=>v instanceof sh)).length;if(f>1||f>0&&p>0)throw new we(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class sh extends R1{constructor(e,s,i){super(),this._field=e,this._op=s,this._value=i,this.type="where"}static _create(e,s,i){return new sh(e,s,i)}_apply(e){const s=this._parse(e);return I1(e._query,s),new Pi(e.firestore,e.converter,Um(e._query,s))}_parse(e){const s=wc(e.firestore);return(function(d,f,p,v,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Wx(E,_);const J=[];for(const X of E)J.push(Xx(v,d,X));A={arrayValue:{values:J}}}else A=Xx(v,d,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Wx(E,_),A=S4(p,f,E,_==="in"||_==="not-in");return Kt.create(y,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function j4(r,e,s){const i=e,o=nh("where",r);return sh._create(o,i,s)}class Bg extends zg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Bg(e,s)}_parse(e){const s=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:Ns.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const v of p)I1(f,v),f=Um(f,v)})(e._query,s),new Pi(e.firestore,e.converter,Um(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends R1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new qg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new we(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new we(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(d,f)})(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Pl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function os(r,e="asc"){const s=e,i=nh("orderBy",r);return qg._create(i,s)}function Xx(r,e,s){if(typeof(s=Lt(s))=="string"){if(s==="")throw new we(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&s.indexOf("/")!==-1)throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=e.path.child(bt.fromString(s));if(!Me.isDocumentKey(i))throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hx(r,new Me(i))}if(s instanceof Vt)return hx(r,s._key);throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(s)}.`)}function Wx(r,e){if(!Array.isArray(r)||r.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(r,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class C4{convertValue(e,s="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const i={};return Vi(e,((o,d)=>{i[o]=this.convertValue(d,s)})),i}convertVectorValue(e){const s=e.fields?.[Ad].arrayValue?.values?.map((i=>Ot(i.doubleValue)));return new sr(s)}convertGeoPoint(e){return new nr(Ot(e.latitude),Ot(e.longitude))}convertArray(e,s){return(e.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const s=Ci(e);return new Et(s.seconds,s.nanos)}convertDocumentKey(e,s){const i=bt.fromString(e);dt(K_(i),9688,{name:e});const o=new ic(i.get(1),i.get(3)),d=new Me(i.popFirst(5));return o.isEqual(s)||kr(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(r,e,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(e,s):r.toFirestore(e):e,i}class Ko{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pa extends j1{constructor(e,s,i,o,d,f){super(e,s,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const i=this._document.data.field(nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=pa._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",pa._jsonSchema={type:Qt("string",pa._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class gd extends pa{data(e={}){return super.data(e)}}class ya{constructor(e,s,i,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Ko(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((i=>{e.call(s,new gd(this._firestore,this._userDataWriter,i.key,i,new Ko(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new we(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const v=new gd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const v=new gd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:R4(p.type),doc:v,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),i.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:r})}}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Qt("string",ya._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Fg extends C4{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,s)}}function I4(r){r=qn(r,Pi);const e=qn(r.firestore,Mr),s=eh(e),i=new Fg(e);return C1(r._query),v4(s,r._query).then((o=>new ya(e,i,r,o)))}function k4(r,e,s){r=qn(r,Vt);const i=qn(r.firestore,Mr),o=Hg(r.converter,e,s);return Tc(i,[Lg(wc(i),"setDoc",r._key,o,r.converter!==null,s).toMutation(r._key,bn.none())])}function ir(r,e,s,...i){r=qn(r,Vt);const o=qn(r.firestore,Mr),d=wc(o);let f;return f=typeof(e=Lt(e))=="string"||e instanceof _c?T1(d,"updateDoc",r._key,e,s,i):E1(d,"updateDoc",r._key,e),Tc(o,[f.toMutation(r._key,bn.exists(!0))])}function Mi(r){return Tc(qn(r.firestore,Mr),[new Qd(r._key,bn.none())])}function Cr(r,e){const s=qn(r.firestore,Mr),i=$t(r),o=Hg(r.converter,e);return Tc(s,[Lg(wc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,bn.exists(!1))]).then((()=>i))}function xn(r,...e){r=Lt(r);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||$x(e[i])||(s=e[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($x(e[i])){const v=e[i];e[i]=v.next?.bind(v),e[i+1]=v.error?.bind(v),e[i+2]=v.complete?.bind(v)}let d,f,p;if(r instanceof Vt)f=qn(r.firestore,Mr),p=yg(r._key.path),d={next:v=>{e[i]&&e[i](D4(f,r,v))},error:e[i+1],complete:e[i+2]};else{const v=qn(r,Pi);f=qn(v.firestore,Mr),p=v._query;const y=new Fg(f);d={next:_=>{e[i]&&e[i](new ya(f,y,v,_))},error:e[i+1],complete:e[i+2]},C1(r._query)}return(function(y,_,E,A){const q=new y1(A),J=new o1(_,q,E);return y.asyncQueue.enqueueAndForget((async()=>a1(await Xm(y),J))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>l1(await Xm(y),J)))}})(eh(f),p,o,d)}function Tc(r,e){return(function(i,o){const d=new Ni;return i.asyncQueue.enqueueAndForget((async()=>a4(await y4(i),o,d))),d.promise})(eh(r),e)}function D4(r,e,s){const i=s.docs.get(e._key),o=new Fg(r);return new pa(r,o,e._key,i,new Ko(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=wc(e)}set(e,s,i){this._verifyNotCommitted();const o=bm(e,this._firestore),d=Hg(o.converter,s,i),f=Lg(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,bn.none())),this}update(e,s,i,...o){this._verifyNotCommitted();const d=bm(e,this._firestore);let f;return f=typeof(s=Lt(s))=="string"||s instanceof _c?T1(this._dataReader,"WriteBatch.update",d._key,s,i,o):E1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=bm(e,this._firestore);return this._mutations=this._mutations.concat(new Qd(s._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(r,e){if((r=Lt(r)).firestore!==e)throw new we(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(r){return eh(r=qn(r,Mr)),new M4(r,(e=>Tc(r,e)))}(function(e,s=!0){(function(o){Ol=o})(Dl),Sl(new xa("firestore",((i,{instanceIdentifier:o,options:d})=>{const f=i.getProvider("app").getImmediate(),p=new Mr(new AN(i.getProvider("auth-internal")),new RN(f,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),Ti(Jv,ex,e),Ti(Jv,ex,"esm2020")})();const V4={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},k1=gb(V4),ls=_N(k1),He=b4(k1),_m={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function L4(){const[r,e]=ne.useState(!0),[s,i]=ne.useState(""),[o,d]=ne.useState(""),[f,p]=ne.useState(""),[v,y]=ne.useState(""),[_,E]=ne.useState(!1),A=async X=>{X.preventDefault(),p(""),y(""),E(!0);try{if(r)await aS(ls,s,o);else{const ee=(await iS(ls,s,o)).user;await k4($t(He,"users",ee.uid),{email:ee.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(z){p(J(z.code))}finally{E(!1)}},q=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await rS(ls,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(X){p(J(X.code))}},J=X=>{switch(X){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+X}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),v&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:v}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:X=>i(X.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:X=>d(X.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:q,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(_m.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const pi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},P4=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,i=20,o=Math.max(...r.map(p=>p.value))||100,d=r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return`${E},${A}`}).join(" "),f=`${d} ${s-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:s-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return c.jsx("circle",{cx:E,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},rd=({title:r,value:e,subtext:s,icon:i,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(pi.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(i,{})})]});function Zx({onNavigate:r=()=>{}}){const[e,s]=ne.useState(null),[i,o]=ne.useState(!0),[d,f]=ne.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,v]=ne.useState([]),[y,_]=ne.useState([]),[E,A]=ne.useState([]),[q,J]=ne.useState([]);return ne.useEffect(()=>{const X=ls.onAuthStateChanged(de=>{s(de),o(!1)}),z=xn(Hn(Tt(He,"siparisler"),os("createdAt","desc")),de=>{const xe=de.docs.map(T=>T.data());_(xe.slice(0,5));const Ee={};xe.forEach(T=>{const j=T.date?T.date.slice(0,7):"N/A";Ee[j]=(Ee[j]||0)+1});const R=Object.entries(Ee).map(([T,j])=>({label:T,value:j})).sort((T,j)=>T.label.localeCompare(j.label));J(R),f(T=>({...T,activeOrders:xe.length}))}),ee=xn(Tt(He,"teklifler"),de=>{f(xe=>({...xe,pendingProposals:de.size}))}),W=xn(Tt(He,"employees"),de=>{const xe=de.docs.map(T=>T.data());f(T=>({...T,totalWorkers:xe.length}));const Ee=new Date().toISOString().split("T")[0],R=xe.filter(T=>{const j=T.attendance?.[Ee];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});v(R)}),fe=xn(Tt(He,"inventory_movements"),de=>{const xe=de.docs.map(T=>T.data()),Ee={};xe.forEach(T=>{const j=Number(T.quantity)||0,k=T.action==="add"?j:-j;Ee[T.productName]||(Ee[T.productName]=0),Ee[T.productName]+=k});const R=Object.entries(Ee).filter(([T,j])=>j<100).map(([T,j])=>({name:T,qty:j}));A(R.slice(0,5)),f(T=>({...T,inventoryCount:Object.keys(Ee).length}))});return()=>{X(),z(),ee(),W(),fe()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(pi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(rd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:pi.Cart,color:"bg-indigo-600"}),c.jsx(rd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:pi.Document,color:"bg-purple-600"}),c.jsx(rd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:pi.Box,color:"bg-emerald-600"}),c.jsx(rd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:pi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(P4,{data:q})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((X,z)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",X.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",X.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:X.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},z)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(pi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((X,z)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:X.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:X.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:X.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},z)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(pi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:E.length>0?E.map((X,z)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:X.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[X.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},z)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const ze={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},zn=rb.forwardRef(({className:r="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${r}
    `,...e})),U4=rb.forwardRef(({className:r="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${r}
    `,...e})),Sr=({children:r,variant:e="primary",className:s="",...i})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...i,children:r})},D1=({checked:r,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})})}),Tl=({options:r,selected:e,onChange:s,placeholder:i="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,v]=ne.useState(!1),[y,_]=ne.useState(""),E=ne.useRef(null);ne.useEffect(()=>{const z=ee=>{E.current&&!E.current.contains(ee.target)&&v(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const A=z=>{if(o){const ee=e.includes(z)?e.filter(W=>W!==z):[...e,z];s(ee)}else s(z),v(!1),_("")},q=z=>{_(z.target.value),f&&s(z.target.value)},J=o?e.length>0?`(${e.length})`:"":e||i,X=r.filter(z=>z.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(zn,{placeholder:i,value:e,onChange:q,onFocus:()=>v(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>v(!p),children:c.jsx(ze.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>v(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(ze.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${i} ${J}`:J})]}),c.jsx(ze.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:z=>_(z.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[X.map(z=>{const ee=o?e.includes(z):e===z;return c.jsxs("div",{onClick:()=>f?s(z):A(z),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ee?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ee?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ee&&c.jsx(ze.Check,{})}),c.jsx("span",{className:"truncate",children:z})]}),d&&c.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),d(z)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(ze.Trash,{})})]},z)}),X.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},M1=({isOpen:r,onClose:e,title:s,children:i,maxWidth:o="max-w-xl"})=>r?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:i})]})}):null,Gg=({children:r,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:r}),rh=({startDate:r,endDate:e,onStartChange:s,onEndChange:i})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:r,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>i(o.target.value)})]}),ws=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",z4=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",B4=r=>{if(!r)return 0;const e=r.toString().replace(/\D/g,"");return parseFloat(e)/100},Jx=r=>r?new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)+" ":"";function q4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[v,y]=ne.useState(!1),[_,E]=ne.useState({start:"",end:""}),[A,q]=ne.useState({}),[J,X]=ne.useState(!1),[z,ee]=ne.useState(!1),[W,fe]=ne.useState(!1),[de,xe]=ne.useState(null),[Ee,R]=ne.useState(null),[T,j]=ne.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[k,C]=ne.useState({name:"",company:"",phone:"",email:""}),[L,I]=ne.useState(null),[le,Ie]=ne.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]});if(ne.useEffect(()=>{const $=ls.onAuthStateChanged(je=>{e(je),i(!1)}),pe=Hn(Tt(He,"customers"),os("createdAt","desc")),ye=xn(pe,je=>{d(je.docs.map(We=>({id:We.id,...We.data()})))}),Ve=Hn(Tt(He,"sales"),os("createdAt","desc")),me=xn(Ve,je=>{p(je.docs.map(We=>({id:We.id,...We.data()})))});return()=>{$(),ye(),me()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ze.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const Y=$=>{const pe=parseFloat($.qty)||0,ye=parseFloat($.unitPrice)||0,Ve=parseFloat($.vatRate)||0,me=pe*ye,je=me*(Ve/100);return me+je},he=$=>{if(!$)return{subtotal:0,totalVAT:0,grandTotal:0};const pe=$.reduce((Ve,me)=>Ve+(parseFloat(me.qty)||0)*(parseFloat(me.unitPrice)||0),0),ye=$.reduce((Ve,me)=>Ve+Y(me),0);return{subtotal:pe,totalVAT:ye-pe,grandTotal:ye}},_e=$=>$?$.reduce((pe,ye)=>pe+Y(ye),0):0,Be=$=>{const pe=f.filter(me=>me.customerId===$);let ye=0,Ve=0;return pe.forEach(me=>{if(me.type==="payment"){const je=parseFloat(me.amount)||0;me.direction==="out"?ye+=je:Ve+=je}else ye+=_e(me.items)}),ye-Ve},Xe=$=>{q(pe=>({...pe,[$]:!pe[$]}))},S=$=>{let pe=f.filter(me=>me.customerId===$);pe.sort((me,je)=>new Date(me.date)-new Date(je.date));let ye=0;const Ve=[];return pe.forEach(me=>{if(me.type==="payment"){const je=parseFloat(me.amount)||0,We=me.direction==="out";We?ye+=je:ye-=je,Ve.push({docNo:me.docNo||"-",date:me.date,action:We?"DEME YAPILDI":"DEME ALINDI",type:me.paymentMethod||"-",note:me.note||"",ek:"-",desc:We?"Firmamzdan k":"Firmamza Giri",qty:"-",unitPrice:"-",borc:We?0:je,alacak:We?je:0,balance:ye})}else me.items?.forEach(je=>{const We=Y(je);ye+=We,Ve.push({docNo:me.docNo,date:me.date,action:"SATI",type:"-",note:"-",ek:je.ek||"",desc:je.name,qty:je.qty,unitPrice:je.unitPrice,borc:0,alacak:We,balance:ye})})}),Ve},P=async $=>{$.preventDefault();try{await Cr(Tt(He,"customers"),{...k,createdAt:new Date().toISOString()}),C({name:"",company:"",phone:"",email:""}),ee(!1)}catch(pe){alert("Hata: "+pe.message)}},se=async $=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Mi($t(He,"customers",$))},O=$=>{xe($),I(null);const pe="TH-"+Date.now().toString().slice(-6);Ie({docNo:pe,amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),fe(!0)},M=($,pe)=>{xe(pe),I($),Ie({docNo:$.docNo||"",amount:$.amount,formattedAmount:Jx($.amount),type:$.paymentMethod,direction:$.direction||"in",note:$.note,date:$.date}),fe(!0)},Z=$=>{const pe=$.target.value,ye=B4(pe);Ie({...le,amount:ye,formattedAmount:Jx(ye)})},oe=async $=>{if($.preventDefault(),!!de)try{const pe={customerId:de.id,type:"payment",docNo:le.docNo,amount:le.amount,paymentMethod:le.type,direction:le.direction,note:le.note,date:le.date,createdAt:L?L.createdAt:new Date().toISOString()};L?await ir($t(He,"sales",L.id),pe):await Cr(Tt(He,"sales"),pe),fe(!1)}catch(pe){alert("Hata: "+pe.message)}},Ne=$=>{xe($),R(null);const pe="DOC-"+Date.now().toString().slice(-6);j({docNo:pe,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),X(!0)},ke=($,pe)=>{xe(pe),R($);const ye=($.items||[]).map(Ve=>({...Ve,ek:Ve.ek||""}));j({docNo:$.docNo,date:$.date,description:$.description,status:$.status,items:ye}),X(!0)},Ye=async $=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Mi($t(He,"sales",$))}catch(pe){alert("Hata: "+pe.message)}},ce=async $=>{$.preventDefault();try{const pe={customerId:de.id,...T,type:"sale",createdAt:Ee?Ee.createdAt:new Date().toISOString()};Ee?await ir($t(He,"sales",Ee.id),pe):await Cr(Tt(He,"sales"),pe),X(!1)}catch(pe){alert("Hata: "+pe.message)}},be=($,pe,ye)=>{const Ve=[...T.items];Ve[$][pe]=ye,j({...T,items:Ve})},ge=()=>j({...T,items:[...T.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Oe=$=>j({...T,items:T.items.filter((pe,ye)=>ye!==$)}),Ae=$=>{const pe=S($.id);let ye="data:text/csv;charset=utf-8,\uFEFF";ye+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,pe.forEach(je=>{const We=Rn=>ws(Rn).replace(" ",""),jt=[`"${je.date}"`,`"${je.docNo}"`,`"${je.action}"`,`"${je.type}"`,`"${je.note}"`,`"${je.ek}"`,`"${je.desc}"`,`"${je.qty}"`,`"${je.unitPrice!=="-"?We(je.unitPrice):"-"}"`,`"${We(je.borc)}"`,`"${We(je.alacak)}"`,`"${We(je.balance)}"`].join(",");ye+=jt+`
`});const Ve=encodeURI(ye),me=document.createElement("a");me.setAttribute("href",Ve),me.setAttribute("download",`${$.name}_Ekstre.csv`),document.body.appendChild(me),me.click(),document.body.removeChild(me)},Re=$=>{const pe=S($.id),ye=window.open("","","height=800,width=1000");if(!ye)return;const Ve=`
      <html><head><title>Ekstre - ${$.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:10px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:6px;text-align:left}
        td{border:1px solid #d1d5db;padding:5px}
        .right{text-align:right}
        .center{text-align:center}
        .payment-row-in{background-color:#f0fdf4} /* Green - Payment Received */
        .payment-row-out{background-color:#fef2f2} /* Red - Payment Made */
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
        .col-note { max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
      </style>
      </head><body>
        <h2>${$.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr>
              <th>Tarih</th>
              <th>Belge</th>
              <th>Hareket</th>
              <th>Tip</th>
              <th class="col-note">Not</th>
              <th>Ek</th>
              <th>Aklama</th>
              <th class="right">Miktar</th>
              <th class="right">B.Fiyat</th>
              <th class="right">deme (Alnan)</th>
              <th class="right">Tutar (Bor)</th>
              <th class="right">Bakiye</th>
            </tr>
          </thead>
          <tbody>
            ${pe.map(me=>{let je="sale-row";return me.action==="DEME ALINDI"&&(je="payment-row-in"),me.action==="DEME YAPILDI"&&(je="payment-row-out"),`
              <tr class="${je}">
                <td>${me.date}</td>
                <td>${me.docNo}</td>
                <td>${me.action}</td>
                <td>${me.type}</td>
                <td class="col-note" title="${me.note}">${me.note}</td>
                <td>${me.ek}</td>
                <td>${me.desc}</td>
                <td class="right">${me.qty}</td>
                <td class="right">${me.unitPrice!=="-"?ws(me.unitPrice):"-"}</td>
                <td class="right">${me.borc>0?ws(me.borc):"-"}</td>
                <td class="right">${me.alacak>0?ws(me.alacak):"-"}</td>
                <td class="right bold" style="color:${me.balance>0?"#dc2626":"#059669"}">${ws(me.balance)}</td>
              </tr>
            `}).join("")}
          </tbody>
        </table>
      </body></html>
    `;ye.document.write(Ve),setTimeout(()=>{ye.document.close(),ye.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:$=>E({..._,start:$}),onEndChange:$=>E({..._,end:$})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(D1,{checked:v,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ze.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map($=>{const pe=f.filter(me=>{const je=me.customerId===$.id;let We=!0;return _.start&&me.date<_.start&&(We=!1),_.end&&me.date>_.end&&(We=!1),je&&We}).sort((me,je)=>new Date(je.date)-new Date(me.date)),ye=Be($.id),Ve=A[$.id];return c.jsxs(Gg,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Xe($.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(ze.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:$.name}),c.jsx("p",{className:"text-xs text-gray-500",children:$.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Ve?c.jsx(ze.ChevronDown,{className:"transform rotate-180"}):c.jsx(ze.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${ye>0?"text-red-500":"text-emerald-600"}`,children:ws(ye)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:ye>0?"(Borlu)":"(Alacakl/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Sr,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>O($),children:[c.jsx(ze.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(Sr,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>Ne($),children:[c.jsx(ze.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>Re($),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(ze.Printer,{})}),c.jsx("button",{onClick:()=>Ae($),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(ze.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>se($.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(ze.Trash,{})})]})]})]})]}),Ve&&(pe.length>0?c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:pe.map(me=>{const je=me.type==="payment",We=me.direction==="out",jt=je?me.amount:_e(me.items),Rn=je?We?"bg-red-50/30":"bg-emerald-50/30":"",cs=je?We?"text-red-500":"text-emerald-600":"text-red-500",As=je?We?"+":"-":"+";return c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${Rn}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${je?We?"bg-red-400":"bg-emerald-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:je?We?"DEME YAPILDI":"DEME ALINDI":`SATI #${me.docNo}`}),je&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:me.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:z4(me.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:je?me.note||"-":`${me.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${cs}`,children:[As,ws(jt)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>je?M(me,$):ke(me,$),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(ze.Edit,{})}),c.jsx("button",{onClick:()=>Ye(me.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(ze.Trash,{})})]})]})]},me.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic bg-white/20",children:"Hareket bulunamad."}))]},$.id)})}),z&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.name,onChange:$=>C({...k,name:$.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.company,onChange:$=>C({...k,company:$.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.phone,onChange:$=>C({...k,phone:$.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.email,onChange:$=>C({...k,email:$.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ee(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),W&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:L?"deme Dzenle":"Tahsilat / deme"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:de?.name}),c.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>Ie({...le,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${le.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri)"}),c.jsx("button",{type:"button",onClick:()=>Ie({...le,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${le.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map($=>c.jsx("button",{type:"button",onClick:()=>Ie({...le,type:$}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${le.type===$?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:$},$))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${le.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00 ",value:le.formattedAmount,onChange:Z})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx("input",{placeholder:"Belge/Makbuz No",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:le.docNo,onChange:$=>Ie({...le,docNo:$.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:le.date,onChange:$=>Ie({...le,date:$.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Not / Aklama (Opsiyonel)",value:le.note,onChange:$=>Ie({...le,note:$.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>fe(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:`px-8 py-2.5 text-white rounded-xl shadow-lg font-bold text-sm ${le.direction==="in"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:"Kaydet"})]})]})]})}),J&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:ce,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Ee?"Sat Dzenle":"Yeni Sat"}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(zn,{value:T.docNo,onChange:$=>j({...T,docNo:$.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(zn,{type:"date",required:!0,value:T.date,onChange:$=>j({...T,date:$.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(zn,{value:T.description,onChange:$=>j({...T,description:$.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:T.items.map(($,pe)=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:$.ek,onChange:ye=>be(pe,"ek",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:$.name,onChange:ye=>be(pe,"name",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:$.qty,onChange:ye=>be(pe,"qty",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:$.unitPrice,onChange:ye=>be(pe,"unitPrice",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:$.vatRate,onChange:ye=>be(pe,"vatRate",ye.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3",children:ws(Y($))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Oe(pe),className:"text-gray-400 hover:text-red-500",children:c.jsx(ze.Trash,{})})})]},pe))})]}),c.jsx("button",{type:"button",onClick:ge,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:ws(he(T.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:ws(he(T.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:ws(he(T.items).grandTotal)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const eb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tb=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function H4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[v,y]=ne.useState({start:"",end:""}),[_,E]=ne.useState(!1),[A,q]=ne.useState(!1),[J,X]=ne.useState(!1),[z,ee]=ne.useState({}),[W,fe]=ne.useState({}),de=ne.useRef(null),[xe,Ee]=ne.useState(null),[R,T]=ne.useState(null),[j,k]=ne.useState({en:6,boy:4}),[C,L]=ne.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=ne.useMemo(()=>f.map(ce=>ce.name).sort(),[f]);if(ne.useEffect(()=>{const ce=ls.onAuthStateChanged(Re=>{e(Re),i(!1)}),be=Hn(Tt(He,"customers"),os("name","asc")),ge=xn(be,Re=>{p(Re.docs.map($=>({id:$.id,...$.data()})))}),Oe=Hn(Tt(He,"siparisler"),os("createdAt","desc")),Ae=xn(Oe,Re=>{d(Re.docs.map($=>({id:$.id,...$.data()})))});return()=>{ce(),ge(),Ae()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const le=r?.email==="furkan@avci.jp",Ie=ce=>{if(!ce)return;const be=new FileReader;be.onload=ge=>{const Oe=new Image;Oe.onload=()=>{const Ae=document.createElement("canvas"),Re=800,$=800;let pe=Oe.width,ye=Oe.height;pe>ye?pe>Re&&(ye*=Re/pe,pe=Re):ye>$&&(pe*=$/ye,ye=$),Ae.width=pe,Ae.height=ye,Ae.getContext("2d").drawImage(Oe,0,0,pe,ye);const me=Ae.toDataURL("image/jpeg",.8);L(je=>({...je,image:me}))},Oe.src=ge.target.result},be.readAsDataURL(ce)},Y=ce=>{ce.preventDefault(),X(!0)},he=()=>X(!1),_e=ce=>{ce.preventDefault(),X(!1),ce.dataTransfer.files&&ce.dataTransfer.files[0]&&Ie(ce.dataTransfer.files[0])},Be=ce=>{ce.clipboardData.files&&ce.clipboardData.files[0]&&Ie(ce.clipboardData.files[0])},Xe=()=>{Ee(null);const ce="SP-"+Date.now().toString().slice(-6);L({siparisNo:ce,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),E(!0)},S=ce=>{Ee(ce),L({siparisNo:ce.siparisNo,customerId:ce.customerId,date:ce.date,note:ce.note||"",image:ce.image,items:ce.items||[]}),E(!0)},P=async ce=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Mi($t(He,"siparisler",ce))}catch(be){alert(be.message)}},se=async ce=>{if(ce.preventDefault(),!C.customerId){alert("Ltfen bir mteri seiniz.");return}try{const be={...C,createdAt:xe?xe.createdAt:new Date().toISOString()};xe?await ir($t(He,"siparisler",xe.id),be):await Cr(Tt(He,"siparisler"),{...be,productionStatus:{}}),E(!1)}catch(be){alert(be.message)}},O=(ce,be,ge)=>{const Oe=[...C.items],Ae=Oe[ce];if(Ae[be]=ge,be==="en1"){const Re=parseFloat(ge);isNaN(Re)?ge===""&&(Ae.en2=""):Ae.en2=Re-j.en}if(be==="boy1"){const Re=parseFloat(ge);isNaN(Re)?ge===""&&(Ae.boy2=""):Ae.boy2=Re-j.boy}L({...C,items:Oe})},M=()=>{L({...C,items:[...C.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},Z=ce=>{const be=C.items.filter((ge,Oe)=>Oe!==ce);L({...C,items:be})},oe=(ce,be)=>{const ge=parseFloat(be)||0,Oe={...j,[ce]:ge};k(Oe);const Ae=C.items.map(Re=>({...Re,en2:Re.en1?parseFloat(Re.en1)-Oe.en:Re.en2,boy2:Re.boy1?parseFloat(Re.boy1)-Oe.boy:Re.boy2}));L({...C,items:Ae})},Ne=ce=>{T(ce),q(!0)},ke=async(ce,be)=>{if(!R)return;const ge=R.productionStatus||{},Oe=ge[ce]||{},Ae={...ge,[ce]:{...Oe,[be]:!Oe[be]}};T({...R,productionStatus:Ae}),await ir($t(He,"siparisler",R.id),{productionStatus:Ae})},Ye=ce=>{const be=f.find(Ae=>Ae.id===ce.customerId)||{name:"Bilinmeyen Mteri"},ge=window.open("","","height=800,width=1000");if(!ge){alert("Pop-up engelleyiciyi kapatn.");return}const Oe=`
      <html><head><title>Sipari - ${ce.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 18px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${be.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${ce.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${tb(ce.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${ce.items.map(Ae=>`
              <tr>
                <td class="group-kasa">${Ae.en1||"-"}</td>
                <td class="group-kasa">${Ae.boy1||"-"}</td>
                <td class="group-kasa">${Ae.genislik||"-"}</td>
                <td>${Ae.takim||""}</td>
                <td class="col-desc">${Ae.aciklama||""}</td>
                <td class="group-net"><strong>${Ae.en2||""}</strong></td>
                <td class="group-net"><strong>${Ae.boy2||""}</strong></td>
                <td>${Ae.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${ce.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${ce.note}
          </div>
        `:""}

        ${ce.image?`
          <div class="door-image-container">
            <img src="${ce.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;ge.document.write(Oe),ge.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Be,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:v.start,endDate:v.end,onStartChange:ce=>y({...v,start:ce}),onEndChange:ce=>y({...v,end:ce})}),le&&c.jsxs("button",{onClick:Xe,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ze.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:f.map(ce=>{const be=o.filter(ge=>{const Oe=ge.customerId===ce.id;let Ae=!0;return v.start&&(Ae=Ae&&ge.date>=v.start),v.end&&(Ae=Ae&&ge.date<=v.end),Oe&&Ae});return be.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(ze.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:ce.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[be.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:be.map(ge=>{const Oe=z[ge.id],Ae=W[ge.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:ge.image?c.jsx("img",{src:ge.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",ge.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:tb(ge.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ge.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ee(Re=>({...Re,[ge.id]:!Re[ge.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Oe?c.jsx(ze.ChevronUp,{}):c.jsx(ze.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>fe(Re=>({...Re,[ge.id]:!Re[ge.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Ae?c.jsx(ze.ChevronUp,{}):c.jsx(ze.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>Ne(ge),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(ze.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Ye(ge),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ze.Printer,{})}),le&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>S(ge),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ze.Edit,{})}),c.jsx("button",{onClick:()=>P(ge.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ze.Trash,{})})]})]})]}),Oe&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:ge.items?.map((Re,$)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Re.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Re.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Re.en1||"-"," x ",Re.boy1||"-"," x ",Re.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Re.en2," x ",Re.boy2]}),c.jsx("td",{className:"py-2",children:Re.sekil||"-"})]},$))})]})}),Ae&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(eb).map(([Re,$])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:$.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:$.steps.map(pe=>{const ye=ge.productionStatus?.[Re]?.[pe.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:ye?"text-purple-700 font-medium":"text-gray-400",children:pe.label}),ye?c.jsx(ze.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(ze.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},pe.id)})})]},Re))})})]},ge.id)})})]},ce.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:se,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:xe?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:C.siparisNo,onChange:ce=>L({...C,siparisNo:ce.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Tl,{options:I,selected:C.customerId,onChange:ce=>L({...C,customerId:ce}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:C.date,onChange:ce=>L({...C,date:ce.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${J?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:Y,onDragLeave:he,onDrop:_e,children:[c.jsx("input",{ref:de,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ce=>Ie(ce.target.files[0])}),C.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:C.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(ze.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:J?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:C.note,onChange:ce=>L({...C,note:ce.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:ce=>oe("en",ce.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:ce=>oe("boy",ce.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:C.items.map((ce,be)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ce.en1,onChange:ge=>O(be,"en1",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ce.boy1,onChange:ge=>O(be,"boy1",ge.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:ce.genislik,onChange:ge=>O(be,"genislik",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:ce.takim,onChange:ge=>O(be,"takim",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:ce.aciklama,onChange:ge=>O(be,"aciklama",ge.target.value),onInput:ge=>{ge.target.style.height="auto",ge.target.style.height=ge.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${be}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:ce.sekil,onChange:ge=>O(be,"sekil",ge.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${be}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ce.en2,onChange:ge=>O(be,"en2",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ce.boy2,onChange:ge=>O(be,"boy2",ge.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Z(be),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},be))})]}),c.jsx("button",{type:"button",onClick:M,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:xe?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(eb).map(([ce,be])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:be.title}),c.jsx("div",{className:"space-y-2",children:be.steps.map(ge=>{const Oe=R.productionStatus?.[ce]?.[ge.id];return c.jsxs("button",{onClick:()=>ke(ce,ge.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Oe?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:ge.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Oe?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Oe&&c.jsx(ze.Check,{})})]},ge.id)})})]},ce))})]})})]})}const F4=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",G4=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),nb=({item:r,isAdd:e,onEdit:s,onDelete:i})=>c.jsxs(Gg,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:F4(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(ze.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(ze.Trash,{})})]})]})]});function Y4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState({start:"",end:""}),[v,y]=ne.useState(!1),[_,E]=ne.useState([]),[A,q]=ne.useState(!0),[J,X]=ne.useState(!0),[z,ee]=ne.useState(null),[W,fe]=ne.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),de=ne.useMemo(()=>[...new Set(o.map(le=>le.productName))].sort(),[o]),xe=ne.useMemo(()=>{const le=o.map(Y=>Y.unit).filter(Boolean),Ie=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Ie,...le])].sort()},[o]);ne.useEffect(()=>{const le=ls.onAuthStateChanged(he=>{e(he),i(!1)}),Ie=Hn(Tt(He,"inventory_movements"),os("date","desc")),Y=xn(Ie,he=>{d(he.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{le(),Y()}},[]);const Ee=ne.useMemo(()=>o.filter(le=>{let Ie=!0;if(f.start&&(Ie=Ie&&le.date>=f.start),f.end&&(Ie=Ie&&le.date<=f.end),le.productType==="raw"&&!A||(le.productType==="manufactured"||le.productType==="uretilmis")&&!J)return!1;let Y=!0;return _.length>0&&(Y=_.includes(le.productName)),Ie&&Y}),[o,f,A,J,_]),R=Ee.filter(le=>le.action==="add"),T=Ee.filter(le=>le.action==="remove"),j=async le=>{le.preventDefault();try{const Ie={...W,quantity:Number(W.quantity),createdAt:new Date().toISOString()};z?await ir($t(He,"inventory_movements",z),Ie):await Cr(Tt(He,"inventory_movements"),Ie),I()}catch(Ie){alert("Hata: "+Ie.message)}},k=async le=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Mi($t(He,"inventory_movements",le))},C=async le=>{if(window.confirm(`"${le}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Ie=Hn(Tt(He,"inventory_movements"),j4("productName","==",le)),Y=await I4(Ie),he=O4(He);Y.forEach(_e=>{he.delete(_e.ref)}),await he.commit(),_.includes(le)&&E(_e=>_e.filter(Be=>Be!==le)),W.productName===le&&fe(_e=>({..._e,productName:""}))}catch(Ie){alert("Silme hatas: "+Ie.message)}},L=le=>{ee(le.id),fe({productType:le.productType,productName:le.productName,action:le.action,quantity:le.quantity,unit:le.unit,date:le.date}),y(!0)},I=()=>{y(!1),ee(null),fe({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:le=>p({...f,start:le}),onEndChange:le=>p({...f,end:le})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(G4,{showRaw:A,setShowRaw:q,showManufactured:J,setShowManufactured:X}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Tl,{options:de,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(ze.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(le=>c.jsx(nb,{item:le,isAdd:!0,onEdit:L,onDelete:k},le.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[T.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[T.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),T.map(le=>c.jsx(nb,{item:le,isAdd:!1,onEdit:L,onDelete:k},le.id))]})]})]}),c.jsx(M1,{isOpen:v,onClose:I,title:z?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${W.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:W.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(D1,{checked:W.productType==="manufactured",onChange:le=>fe({...W,productType:le?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Tl,{options:de,selected:W.productName,onChange:le=>fe({...W,productName:le}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:C})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>fe({...W,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>fe({...W,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(zn,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:W.quantity,onChange:le=>fe({...W,quantity:le.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Tl,{options:xe,selected:W.unit,onChange:le=>fe({...W,unit:le}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(zn,{type:"date",required:!0,value:W.date,onChange:le=>fe({...W,date:le.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Sr,{type:"submit",variant:"primary",children:z?"Gncelle":"Kaydet"}),c.jsx(Sr,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const K4=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Q4=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,i=800,o=40,d=i-o*2,f=s-o*2,p=r.flatMap(_=>e.map(E=>_[E]||0)),v=Math.max(...p,10)*1.1,y=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:E,x2:i-o,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(v/4*_)})]},_)}),e.map((_,E)=>{const A=y[E%y.length],q=r.map((J,X)=>{const z=o+X*(d/(r.length-1||1)),ee=J[_]||0,W=s-o-ee/v*f,fe=isNaN(z)?o:z,de=isNaN(W)?s-o:W;return`${fe},${de}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),r.map((J,X)=>{const z=o+X*(d/(r.length-1||1)),ee=J[_]||0,W=s-o-ee/v*f,fe=isNaN(z)?o:z,de=isNaN(W)?s-o:W;return c.jsx("circle",{cx:fe,cy:de,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${J.month} - ${_}: ${ee}`})},X)})]},_)}),r.map((_,E)=>{const A=o+E*(d/(r.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[E%y.length]}}),_]},_))})]})},$4=({name:r,qty:e,unit:s,type:i,change:o,changePercent:d})=>{const f=i==="raw",p=e<0,v=d>10;let y="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});d>10?(y="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(ze.TrendingUp,{})):d<-10&&(y="text-red-600",_="bg-red-100/50",E=c.jsx(ze.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",q=f?"text-pink-900":"text-purple-900",J=f?"text-pink-700/70":"text-purple-700/70";p?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",q="text-red-700",J="text-red-500"):v&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",q="text-emerald-800",J="text-emerald-600");const X=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:X}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:r,children:r})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${q}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${J} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${y} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(d).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function X4(){const[r,e]=ne.useState([]),[s,i]=ne.useState(!0),[o,d]=ne.useState(!0),[f,p]=ne.useState(!0),[v,y]=ne.useState([]),[_,E]=ne.useState("year");ne.useEffect(()=>{const z=Hn(Tt(He,"inventory_movements"),os("date","asc")),ee=xn(z,W=>{const fe=W.docs.map(de=>de.data());e(fe),i(!1)});return()=>ee()},[]);const A=ne.useMemo(()=>{const z={},ee=new Date;return ee.setDate(ee.getDate()-30),r.forEach(W=>{const fe=Number(W.quantity)||0,de=W.action==="add"?fe:-fe,xe=new Date(W.date);z[W.productName]||(z[W.productName]={name:W.productName,qty:0,unit:W.unit,type:W.productType||"raw",change30Days:0}),z[W.productName].qty+=de,z[W.productName].type=W.productType||z[W.productName].type,xe>=ee&&(z[W.productName].change30Days+=de)}),Object.values(z).map(W=>{const fe=W.qty-W.change30Days;let de=0;return fe!==0?de=W.change30Days/Math.abs(fe)*100:W.change30Days!==0&&(de=100),{...W,changePercent:de}})},[r]),q=ne.useMemo(()=>A.filter(z=>!(z.type==="raw"&&!o||(z.type==="manufactured"||z.type==="uretilmis")&&!f||v.length>0&&!v.includes(z.name))),[A,o,f,v]),J=ne.useMemo(()=>A.map(z=>z.name).sort(),[A]),X=ne.useMemo(()=>{const z=q.sort((de,xe)=>Math.abs(xe.qty)-Math.abs(de.qty)).slice(0,5).map(de=>de.name);if(z.length===0)return{data:[],keys:[]};const ee={},W={};return z.forEach(de=>W[de]=0),r.forEach(de=>{if(!z.includes(de.productName))return;const xe=de.date?de.date.slice(0,7):"N/A";if(xe==="N/A")return;if(_==="year"){const T=new Date().getFullYear();if(new Date(de.date).getFullYear()!==T)return}const Ee=Number(de.quantity)||0,R=de.action==="add"?Ee:-Ee;W[de.productName]||(W[de.productName]=0),W[de.productName]+=R,ee[xe]={...W,month:xe}}),{data:Object.values(ee).sort((de,xe)=>de.month.localeCompare(xe.month)),keys:z}},[r,q,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(K4,{showRaw:o,setShowRaw:d,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Tl,{options:J,selected:v,onChange:y,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:q.length>0?q.map((z,ee)=>c.jsx($4,{name:z.name,qty:z.qty,unit:z.unit,type:z.type,change:z.change30Days,changePercent:z.changePercent},ee)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(ze.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),X.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(ze.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:z=>E(z.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(Q4,{data:X.data,keys:X.keys})]})]})]})}const wm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Xs=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",id=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function W4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[v,y]=ne.useState({start:"",end:""}),[_,E]=ne.useState(!1),[A,q]=ne.useState(!1),J=ne.useRef(null),[X,z]=ne.useState(null),[ee,W]=ne.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:wm,images:[],items:[]}),fe=ne.useMemo(()=>f.map(S=>S.name).sort(),[f]);if(ne.useEffect(()=>{const S=ls.onAuthStateChanged(Z=>{e(Z),i(!1)}),P=Hn(Tt(He,"teklifler"),os("createdAt","desc")),se=xn(P,Z=>{d(Z.docs.map(oe=>({id:oe.id,...oe.data()})))}),O=Hn(Tt(He,"customers"),os("name","asc")),M=xn(O,Z=>{p(Z.docs.map(oe=>({id:oe.id,...oe.data()})))});return()=>{S(),se(),M()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ze.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const de=(S,P,se)=>{const O=S*P,M=O*(se/100);return O+M},xe=S=>{if(!S)return{subtotal:0,totalVAT:0,grandTotal:0};const P=S.reduce((O,M)=>O+Number(M.quantity)*Number(M.price),0),se=S.reduce((O,M)=>O+Number(M.quantity)*Number(M.price)*(Number(M.vat)/100),0);return{subtotal:P,totalVAT:se,grandTotal:P+se}},Ee=S=>{const P=Array.from(S.target.files||S.dataTransfer.files);P.length&&P.forEach(se=>{if(!se.type.startsWith("image/"))return;const O=new FileReader;O.onload=M=>{const Z=new Image;Z.onload=()=>{const oe=document.createElement("canvas"),Ne=1e3;let ke=Z.width,Ye=Z.height;ke>Ye?ke>Ne&&(Ye*=Ne/ke,ke=Ne):Ye>Ne&&(ke*=Ne/Ye,Ye=Ne),oe.width=ke,oe.height=Ye,oe.getContext("2d").drawImage(Z,0,0,ke,Ye);const be=oe.toDataURL("image/jpeg",.7);W(ge=>({...ge,images:[...ge.images,be]}))},Z.src=M.target.result},O.readAsDataURL(se)})},R=S=>{W(P=>({...P,images:P.images.filter((se,O)=>O!==S)}))},T=(S,P)=>{const se=[...ee.images];P===-1&&S>0?[se[S],se[S-1]]=[se[S-1],se[S]]:P===1&&S<se.length-1&&([se[S],se[S+1]]=[se[S+1],se[S]]),W({...ee,images:se})},j=S=>{S.preventDefault(),q(!0)},k=()=>q(!1),C=S=>{S.preventDefault(),q(!1),Ee(S)},L=S=>{S.clipboardData.files&&S.clipboardData.files.length>0&&(S.preventDefault(),Ee({target:{files:S.clipboardData.files}}))},I=()=>{z(null);const S="TK-"+Date.now().toString().slice(-6),P=new Date;P.setDate(P.getDate()+7),W({teklifNo:S,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:P.toISOString().split("T")[0],note:wm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},le=S=>{z(S.id),W({teklifNo:S.teklifNo,teklifName:S.teklifName||"",customerName:S.customerName,date:S.date,validityDate:S.validityDate||"",note:S.note||wm,images:S.images||[],items:S.items||[]}),E(!0)},Ie=async S=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Mi($t(He,"teklifler",S))}catch(P){alert(P.message)}},Y=async S=>{if(S.preventDefault(),!ee.customerName){alert("Ltfen mteri ad giriniz.");return}try{const P={...ee,createdAt:new Date().toISOString()};X?await ir($t(He,"teklifler",X),P):await Cr(Tt(He,"teklifler"),P),E(!1)}catch(P){alert(P.message)}},he=(S,P,se)=>{const O=[...ee.items],M=O[S];M[P]=se;const Z=parseFloat(P==="quantity"?se:M.quantity),oe=parseFloat(P==="price"?se:M.price),Ne=parseFloat(P==="vat"?se:M.vat);!isNaN(Z)&&!isNaN(oe)&&!isNaN(Ne)&&(M.total=de(Z,oe,Ne)),W({...ee,items:O})},_e=()=>{W({...ee,items:[...ee.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},Be=S=>{W({...ee,items:ee.items.filter((P,se)=>se!==S)})},Xe=S=>{const P=window.open("","","height=800,width=1000");if(!P){alert("Pop-up engelleyiciyi kapatn.");return}const se=xe(S.items||[]),O=S.images||[],M=`
      <html><head><title>Teklif - ${S.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${S.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${id(S.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${id(S.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${S.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${S.items.map(Z=>`
                <tr>
                  <td>${Z.description}</td>
                  <td class="text-center">${Z.quantity}</td>
                  <td class="text-right">${Xs(Z.price)}</td>
                  <td class="text-center">%${Z.vat}</td>
                  <td class="text-right"><strong>${Xs(Z.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Xs(se.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Xs(se.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Xs(se.grandTotal)}</span></div>
            </div>
          </div>

          ${S.note?`<div class="notes-section"><strong>NOT:</strong><br/>${S.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${O.map(Z=>`<img src="${Z}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;P.document.write(M),P.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?L:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:v.start,endDate:v.end,onStartChange:S=>y({...v,start:S}),onEndChange:S=>y({...v,end:S})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(ze.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(S=>{let P=!0;return v.start&&S.date<v.start&&(P=!1),v.end&&S.date>v.end&&(P=!1),P}).map(S=>{const P=xe(S.items);return c.jsxs(Gg,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(ze.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:S.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",S.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:S.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",id(S.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",id(S.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Xs(P.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Sr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Xe(S),children:c.jsx(ze.Printer,{})}),c.jsx(Sr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>le(S),children:c.jsx(ze.Edit,{})}),c.jsx(Sr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Ie(S.id),children:c.jsx(ze.Trash,{})})]})]})]},S.id)})]}),c.jsx(M1,{isOpen:_,onClose:()=>E(!1),title:X?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(zn,{value:ee.teklifNo,onChange:S=>W({...ee,teklifNo:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(zn,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:ee.teklifName,onChange:S=>W({...ee,teklifName:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Tl,{options:fe,selected:ee.customerName,onChange:S=>W({...ee,customerName:S}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(zn,{type:"date",required:!0,value:ee.date,onChange:S=>W({...ee,date:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(zn,{type:"date",required:!0,value:ee.validityDate,onChange:S=>W({...ee,validityDate:S.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(U4,{rows:"4",value:ee.note,onChange:S=>W({...ee,note:S.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:C,children:[c.jsx("input",{ref:J,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Ee}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(ze.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:ee.images.map((S,P)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:S,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>R(P),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>T(P,-1),disabled:P===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>T(P,1),disabled:P===ee.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},P))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:ee.items.map((S,P)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(zn,{placeholder:"rn/Hizmet aklamas",value:S.description,onChange:se=>he(P,"description",se.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(zn,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.quantity,onChange:se=>he(P,"quantity",se.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(zn,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.price,onChange:se=>he(P,"price",se.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:S.vat,onChange:se=>he(P,"vat",se.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Xs(S.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Be(P),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(ze.Trash,{})})})]},P))})]}),c.jsx("button",{type:"button",onClick:_e,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Xs(xe(ee.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Xs(xe(ee.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Xs(xe(ee.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(Sr,{type:"submit",variant:"primary",children:X?"Kaydet":"Olutur"}),c.jsx(Sr,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const rs={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Z4="86715dfc9d1046e7e8a0d95a",J4=`https://v6.exchangerate-api.com/v6/${Z4}/latest/USD`,Em=({ops:r,onChange:e,allowRefs:s=!1,rows:i=[],constants:o=[],constantsMap:d})=>{const f=(y,_,E)=>{const A=[...r];A[y]={...A[y],[_]:E},_==="type"&&E!=="op"&&(A[y].value=""),e(A)},p=()=>{e([...r,{type:"op",value:"+"},{type:"num",value:0}])},v=y=>{if(y===0)return;const _=[...r];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[r.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:E=>f(_,"type",E.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:E=>f(_,"value",E.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),i.map(E=>c.jsx("option",{value:E.id,children:E.name||"simsiz Satr"},E.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(rs.Plus,{})})]})};function eC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[v,y]=ne.useState({TRY:1,USD:1,EUR:1}),[_,E]=ne.useState(null),[A,q]=ne.useState(!1),[J,X]=ne.useState(!1),[z,ee]=ne.useState(null),[W,fe]=ne.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[de,xe]=ne.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});ne.useEffect(()=>{const M=ls.onAuthStateChanged(Ye=>{e(Ye),i(!1)}),Z=Hn(Tt(He,"pricing_constants"),os("name","asc")),oe=xn(Z,Ye=>{d(Ye.docs.map(ce=>({id:ce.id,...ce.data()})))}),Ne=Hn(Tt(He,"pricing_items"),os("updatedAt","desc")),ke=xn(Ne,Ye=>{p(Ye.docs.map(ce=>({id:ce.id,...ce.data()})))});return Ee(),()=>{M(),oe(),ke()}},[]);const Ee=async()=>{try{const Z=await(await fetch(J4)).json();if(Z&&Z.conversion_rates){const oe=Z.conversion_rates.TRY,Ne=Z.conversion_rates.EUR,ke=oe/Ne;y({TRY:1,USD:oe,EUR:ke}),E(new Date().toLocaleTimeString())}}catch(M){console.error("Rate fetch error",M)}},R=(M,Z)=>{if(!Z||Z==="None"||Z==="TRY")return parseFloat(M)||0;const oe=v[Z]||1;return parseFloat(M)*oe},T=(M,Z)=>{if(Z==="TRY")return M;const oe=v[Z]||1;return M/oe},j=(M,Z={})=>{if(M.type==="num")return parseFloat(M.value)||0;if(M.type==="const"){const oe=o.find(Ne=>Ne.id===M.value);return oe?R(oe.value,oe.currency):0}return M.type==="ref"&&Z[M.value]||0},k=(M,Z={})=>{if(!M||M.length===0)return 0;let oe=j(M[0],Z);for(let Ne=1;Ne<M.length;Ne+=2){const ke=M[Ne].value,Ye=j(M[Ne+1],Z);switch(ke){case"+":oe+=Ye;break;case"-":oe-=Ye;break;case"*":oe*=Ye;break;case"/":oe=Ye!==0?oe/Ye:0;break}}return oe},C=M=>{const Z={};(M.rows||[]).forEach(Ne=>{Z[Ne.id]=k(Ne.ops,Z)});const oe=k(M.finalFormula?.ops,Z);return T(oe,M.finalCurrency||"TRY")},L=M=>k(M,{}),I=ne.useMemo(()=>C(de),[de,o,v]),le=ne.useMemo(()=>L(W.ops),[W.ops,o,v]),Ie=async M=>{M.preventDefault();const Z=L(W.ops),oe={...W,value:Z};z?await ir($t(He,"pricing_constants",z),oe):await Cr(Tt(He,"pricing_constants"),oe),fe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ee(null),q(!1)},Y=async M=>await Mi($t(He,"pricing_constants",M)),he=()=>{const M="row_"+Date.now();xe({...de,rows:[...de.rows,{id:M,name:"",ops:[{type:"num",value:0}]}]})},_e=M=>{const Z=[...de.rows];Z.splice(M,1),xe({...de,rows:Z})},Be=(M,Z)=>{const oe=[...de.rows];oe[M].name=Z,xe({...de,rows:oe})},Xe=(M,Z)=>{const oe=[...de.rows];oe[M].ops=Z,xe({...de,rows:oe})},S=async M=>{M.preventDefault();const Z={...de,updatedAt:new Date().toISOString()};z?await ir($t(He,"pricing_items",z),Z):await Cr(Tt(He,"pricing_items"),Z),xe({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),ee(null),X(!1)},P=M=>{const Z={...M,rows:M.rows||[],finalFormula:M.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:M.finalCurrency||"TRY"};xe(Z),ee(M.id),X(!0)},se=async M=>{window.confirm("Silmek istediinize emin misiniz?")&&await Mi($t(He,"pricing_items",M))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:Ee,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(rs.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{ee(null),fe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),q(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(rs.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{ee(null),xe({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),X(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(rs.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(rs.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(M=>{const Z=R(M.value,M.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:M.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[M.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",M.currency!=="None"?M.currency:"",M.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",M.unit]}):""]}),M.currency!=="TRY"&&M.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",Z.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{fe({...M,ops:M.ops||[{type:"num",value:M.value}]}),ee(M.id),q(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(rs.Edit,{})}),c.jsx("button",{onClick:()=>Y(M.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(rs.Trash,{})})]})]},M.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(M=>{const Z=C(M),oe=M.finalCurrency||"TRY",Ne=Math.random()>.5?"up":"down",ke=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(M.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:M.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:M.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[Z.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",oe]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ne==="up"?"text-emerald-500":"text-red-500"}`,children:[Ne==="up"?c.jsx(rs.TrendingUp,{}):c.jsx(rs.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",ke]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>P(M),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>se(M.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},M.id)})})]})]}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:Ie,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.name,onChange:M=>fe({...W,name:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.unit,onChange:M=>fe({...W,unit:M.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(Em,{ops:W.ops,onChange:M=>fe({...W,ops:M}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:le.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:W.currency,onChange:M=>fe({...W,currency:M.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),J&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:de.title,onChange:M=>xe({...de,title:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:de.unitType,onChange:M=>xe({...de,unitType:M.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:he,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),de.rows.map((M,Z)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:M.name,onChange:oe=>Be(Z,oe.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(Em,{ops:M.ops,onChange:oe=>Xe(Z,oe),allowRefs:!0,rows:de.rows.slice(0,Z),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:k(M.ops,C({...de,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>_e(Z),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(rs.Trash,{})})]})]},M.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(rs.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:de.finalCurrency,onChange:M=>xe({...de,finalCurrency:M.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Em,{ops:de.finalFormula.ops,onChange:M=>xe({...de,finalFormula:{...de.finalFormula,ops:M}}),allowRefs:!0,rows:de.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[I.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:de.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:S,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>X(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(rs.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]})}const fa={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},ml={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},sb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],tC=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Tm=2.5,Es=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function nC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState(new Date),[v,y]=ne.useState(!1),[_,E]=ne.useState(!1),[A,q]=ne.useState(null),[J,X]=ne.useState(new Date),[z,ee]=ne.useState(!1),[W,fe]=ne.useState(new Date().getFullYear()),[de,xe]=ne.useState(!1),[Ee,R]=ne.useState(null),[T,j]=ne.useState({type:"work",overtimeSlots:0,lateness:0}),[k,C]=ne.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});ne.useEffect(()=>{const O=ls.onAuthStateChanged(Ne=>{e(Ne),i(!1)}),M=Hn(Tt(He,"employees"),os("name","asc")),Z=xn(M,Ne=>{d(Ne.docs.map(ke=>({id:ke.id,...ke.data()})))}),oe=setInterval(()=>p(new Date),6e4);return()=>{O(),Z(),clearInterval(oe)}},[]);const L=O=>{const M=f.toISOString().split("T")[0],Z=f.getDay(),oe=f.getHours(),Ne=f.getMinutes(),ke=oe*60+Ne,Ye=O.attendance?.[M];if(Ye){if(["paid_leave","unpaid_leave"].includes(Ye.type))return ml.LEAVE;if(Ye.overtimeSlots>0)return ml.OVERTIME}const[ce,be]=O.startHour.split(":").map(Number),[ge,Oe]=O.endHour.split(":").map(Number),Ae=ce*60+be,Re=ge*60+Oe;return O.workDays.includes(Z)?ke>=Ae&&ke<Re?ml.ONLINE:ke>=Re&&Ye?.overtimeSlots>0?ml.OVERTIME:ml.OFFLINE:ml.OFFLINE},I=O=>{if(!O.attendance)return{used:0,remaining:O.vacationTotal};let M=0;return Object.values(O.attendance).forEach(Z=>{Z.type==="paid_leave"&&M++}),{used:M,remaining:O.vacationTotal-M}},le=(O,M)=>{const Z=M.getFullYear(),oe=M.getMonth(),Ne=new Date(Z,oe+1,0).getDate();let ke=0,Ye=0,ce=0,be=0,ge=0;for(let cs=1;cs<=Ne;cs++){const As=`${Z}-${String(oe+1).padStart(2,"0")}-${String(cs).padStart(2,"0")}`,js=new Date(As).getDay(),Fn=O.attendance?.[As],Na=O.workDays.includes(js);Fn?(Fn.type==="work"&&ke++,Fn.type==="paid_leave"&&ge++,Fn.type==="unpaid_leave"&&be++,Fn.overtimeSlots&&(Ye+=parseInt(Fn.overtimeSlots)),Fn.lateness&&(ce+=parseFloat(Fn.lateness))):Na&&ke++}const Oe=parseFloat(O.salaryAmount)||0,Ae=O.customDailyRate&&parseFloat(O.customDailyRate)>0?parseFloat(O.customDailyRate):Oe/30,Re=parseFloat(O.customDeductionRate),$=!isNaN(Re)&&Re>0?Re:Ae,pe=Ae/9,ye=O.customOvertimeMultiplier?parseFloat(O.customOvertimeMultiplier):1.5,Ve=Ye*Tm,me=Ve*(pe*ye),je=be*$,We=ce*pe,jt=je+We,Rn=Oe+me-jt+(parseFloat(O.insurance)||0)+(parseFloat(O.allowance)||0);return{workedDays:ke,totalOvertimeSlots:Ye,totalOvertimeHours:Ve,unpaidLeaveDays:be,paidLeaveDays:ge,overtimePay:me,totalLatenessHours:ce,latenessDeduction:We,totalDeduction:jt,totalSalary:Rn,dailyRate:Ae,hourlyRate:pe,deductionRate:$}},Ie=(O,M)=>{const Z=new Date(O,M,1);let oe=0;return o.forEach(Ne=>{oe+=le(Ne,Z).totalSalary}),oe},Y=ne.useMemo(()=>{let O=0,M=0;const Z=new Date(J);return Z.setMonth(J.getMonth()-1),o.forEach(oe=>{O+=le(oe,J).totalSalary,M+=le(oe,Z).totalSalary}),{thisMonthTotal:O,lastMonthTotal:M}},[o,J]),he=()=>{E(!1),C({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},_e=()=>{A&&(E(!0),C({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),q(null),y(!0))},Be=async O=>{O.preventDefault();try{const M={...k,updatedAt:new Date().toISOString()};_&&A?await ir($t(He,"employees",A.id),M):await Cr(Tt(He,"employees"),{...M,createdAt:new Date().toISOString()}),y(!1)}catch(M){alert("Hata: "+M.message)}},Xe=async O=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Mi($t(He,"employees",O)),q(null))},S=(O,M)=>{R(O),j({type:M?.type||"work",overtimeSlots:M?.overtimeSlots||0,lateness:M?.lateness||0}),xe(!0)},P=async O=>{if(O.preventDefault(),!A||!Ee)return;const M={...A.attendance};M[Ee]={type:T.type,overtimeSlots:parseInt(T.overtimeSlots)||0,lateness:parseFloat(T.lateness)||0},await ir($t(He,"employees",A.id),{attendance:M}),q({...A,attendance:M}),xe(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(fa.Lock,{})," Yetkisiz Eriim"]});const se=({employee:O,date:M,onDateClick:Z})=>{const oe=M.getFullYear(),Ne=M.getMonth(),ke=new Date(oe,Ne+1,0).getDate(),Ye=new Date(oe,Ne,1).getDay(),ce=[];for(let be=0;be<Ye;be++)ce.push(null);for(let be=1;be<=ke;be++)ce.push(be);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:sb.map((be,ge)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:be.slice(0,3)},ge))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:ce.map((be,ge)=>{if(!be)return c.jsx("div",{},ge);const Oe=`${oe}-${String(Ne+1).padStart(2,"0")}-${String(be).padStart(2,"0")}`,Ae=O.attendance?.[Oe],Re=new Date(Oe).getDay(),$=O.workDays.includes(Re);let pe="bg-gray-50 text-gray-400 border-gray-100";return $&&(pe="bg-white border-emerald-200 text-gray-700 shadow-sm"),Ae&&(Ae.type==="paid_leave"&&(pe="bg-yellow-50 border-yellow-200 text-yellow-700"),Ae.type==="unpaid_leave"&&(pe="bg-red-50 border-red-200 text-red-700"),Ae.type==="work"&&(Ae.overtimeSlots>0||Ae.lateness>0)&&(pe="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),Ae.type==="off"&&(pe="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>Z(Oe,Ae),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${pe}`,children:[c.jsx("span",{className:"text-sm",children:be}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[Ae?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",Ae.overtimeSlots,"M"]}),Ae?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",Ae.lateness,"s"]})]})]},ge)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ee(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",J.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:Es(Y.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(fa.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ee(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:Es(Y.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:he,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(fa.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(O=>{const M=L(O),Z=I(O);return c.jsxs("div",{onClick:()=>q(O),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${M.color} ${M.ring} ring-offset-2 ring-2`,children:M.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(fa.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:O.name}),c.jsx("p",{className:"text-sm text-gray-500",children:O.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[O.startHour," - ",O.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[Z.remaining," gn kald"]})]})]})]},O.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:_e,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(fa.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Xe(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(fa.Trash,{})}),c.jsx("button",{onClick:()=>q(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",J.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const O=le(A,J);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:Es(O.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:Es(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",O.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",Es(O.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",O.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",Es(O.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",O.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",Es(O.totalDeduction-O.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",Es(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Tm," Saat",c.jsx("br",{}),"Saatlik cret = ",Es(O.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",Es(O.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>X(new Date(J.setMonth(J.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:J.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>X(new Date(J.setMonth(J.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(se,{employee:A,date:J,onDateClick:S})]})]})]})}),z&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ee(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(fa.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>fe(O=>O-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:W}),c.jsx("button",{onClick:()=>fe(O=>O+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:tC.map((O,M)=>{const Z=Ie(W,M),oe=new Date().getMonth()===M&&new Date().getFullYear()===W;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${oe?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${oe?"text-indigo-200":"text-gray-400"}`,children:O}),c.jsx("div",{className:`text-lg font-bold ${oe?"text-white":"text-gray-800"}`,children:Z>0?Es(Z):"-"})]},O)})})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:Be,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:O=>C({...k,name:O.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:O=>C({...k,role:O.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:O=>C({...k,salaryType:O.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:O=>C({...k,salaryAmount:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:O=>C({...k,insurance:O.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:O=>C({...k,allowance:O.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:O=>C({...k,customDailyRate:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:O=>C({...k,customOvertimeMultiplier:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:O=>C({...k,customDeductionRate:O.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:O=>C({...k,vacationTotal:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:O=>C({...k,startHour:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:O=>C({...k,endHour:O.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:sb.map((O,M)=>c.jsx("button",{type:"button",onClick:()=>{const Z=k.workDays.includes(M)?k.workDays.filter(oe=>oe!==M):[...k.workDays,M];C({...k,workDays:Z})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(M)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:O.slice(0,3)},O))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),de&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:Ee}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(O=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:O.id,checked:T.type===O.id,onChange:M=>j({...T,type:M.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:O.label})]},O.id))})]}),T.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Tm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(O=>c.jsx("button",{type:"button",onClick:()=>j({...T,overtimeSlots:T.overtimeSlots===O?0:O}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${T.overtimeSlots===O?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:O},O))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:T.lateness,onChange:O=>j({...T,lateness:O.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>xe(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function sC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState("dashboard"),[f,p]=ne.useState(!1);ne.useEffect(()=>{const A=cS(ls,q=>{e(q),i(!1)});return()=>A()},[]);const v=async()=>{try{await uS(ls)}catch(A){console.error("k yaplrken hata:",A)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],E=()=>{switch(o){case"dashboard":return c.jsx(Zx,{onNavigate:d});case"musteriler":return c.jsx(q4,{});case"urunler":return c.jsx(Y4,{});case"stok":return c.jsx(X4,{});case"siparis":return c.jsx(H4,{});case"teklif":return c.jsx(W4,{});case"fiyatlandirma":return c.jsx(eC,{});case"calisan":return c.jsx(nC,{});default:return c.jsx(Zx,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{d(A.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:E()})})]})]}):c.jsx(L4,{})}_w.createRoot(document.getElementById("root")).render(c.jsx(ne.StrictMode,{children:c.jsx(sC,{})}));
