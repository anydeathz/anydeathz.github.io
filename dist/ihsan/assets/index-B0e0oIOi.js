(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function jE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var om={exports:{}},Yo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function CE(){if(Ex)return Yo;Ex=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Yo.Fragment=e,Yo.jsx=n,Yo.jsxs=n,Yo}var Tx;function RE(){return Tx||(Tx=1,om.exports=CE()),om.exports}var c=RE(),cm={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function IE(){if(Sx)return Be;Sx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function z(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,L={};function oe(O,D,I){this.props=O,this.context=D,this.refs=L,this.updater=I||q}oe.prototype.isReactComponent={},oe.prototype.setState=function(O,D){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,D,"setState")},oe.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ne(){}ne.prototype=oe.prototype;function W(O,D,I){this.props=O,this.context=D,this.refs=L,this.updater=I||q}var he=W.prototype=new ne;he.constructor=W,X(he,oe.prototype),he.isPureReactComponent=!0;var Te=Array.isArray;function xe(){}var j={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(O,D,I){var A=I.ref;return{$$typeof:i,type:O,key:D,ref:A!==void 0?A:null,props:I}}function M(O,D){return C(O.type,D,O.props)}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var D={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(I){return D[I]})}var k=/\/+/g;function ie(O,D){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):D.toString(36)}function je(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(xe,xe):(O.status="pending",O.then(function(D){O.status==="pending"&&(O.status="fulfilled",O.value=D)},function(D){O.status==="pending"&&(O.status="rejected",O.reason=D)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,D,I,A,H){var re=typeof O;(re==="undefined"||re==="boolean")&&(O=null);var ge=!1;if(O===null)ge=!0;else switch(re){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(O.$$typeof){case i:case e:ge=!0;break;case _:return ge=O._init,K(ge(O._payload),D,I,A,H)}}if(ge)return H=H(O),ge=A===""?"."+ie(O,0):A,Te(H)?(I="",ge!=null&&(I=ge.replace(k,"$&/")+"/"),K(H,D,I,"",function(at){return at})):H!=null&&(R(H)&&(H=M(H,I+(H.key==null||O&&O.key===H.key?"":(""+H.key).replace(k,"$&/")+"/")+ge)),D.push(H)),1;ge=0;var Ne=A===""?".":A+":";if(Te(O))for(var Re=0;Re<O.length;Re++)A=O[Re],re=Ne+ie(A,Re),ge+=K(A,D,I,re,H);else if(Re=z(O),typeof Re=="function")for(O=Re.call(O),Re=0;!(A=O.next()).done;)A=A.value,re=Ne+ie(A,Re++),ge+=K(A,D,I,re,H);else if(re==="object"){if(typeof O.then=="function")return K(je(O),D,I,A,H);throw D=String(O),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ge}function pe(O,D,I){if(O==null)return O;var A=[],H=0;return K(O,A,"","",function(re){return D.call(I,re,H++)}),A}function F(O){if(O._status===-1){var D=O._result;D=D(),D.then(function(I){(O._status===0||O._status===-1)&&(O._status=1,O._result=I)},function(I){(O._status===0||O._status===-1)&&(O._status=2,O._result=I)}),O._status===-1&&(O._status=0,O._result=D)}if(O._status===1)return O._result.default;throw O._result}var me=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},_e={map:pe,forEach:function(O,D,I){pe(O,function(){D.apply(this,arguments)},I)},count:function(O){var D=0;return pe(O,function(){D++}),D},toArray:function(O){return pe(O,function(D){return D})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Be.Activity=E,Be.Children=_e,Be.Component=oe,Be.Fragment=n,Be.Profiler=l,Be.PureComponent=W,Be.StrictMode=r,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return j.H.useMemoCache(O)}},Be.cache=function(O){return function(){return O.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(O,D,I){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var A=X({},O.props),H=O.key;if(D!=null)for(re in D.key!==void 0&&(H=""+D.key),D)!N.call(D,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&D.ref===void 0||(A[re]=D[re]);var re=arguments.length-2;if(re===1)A.children=I;else if(1<re){for(var ge=Array(re),Ne=0;Ne<re;Ne++)ge[Ne]=arguments[Ne+2];A.children=ge}return C(O.type,H,A)},Be.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Be.createElement=function(O,D,I){var A,H={},re=null;if(D!=null)for(A in D.key!==void 0&&(re=""+D.key),D)N.call(D,A)&&A!=="key"&&A!=="__self"&&A!=="__source"&&(H[A]=D[A]);var ge=arguments.length-2;if(ge===1)H.children=I;else if(1<ge){for(var Ne=Array(ge),Re=0;Re<ge;Re++)Ne[Re]=arguments[Re+2];H.children=Ne}if(O&&O.defaultProps)for(A in ge=O.defaultProps,ge)H[A]===void 0&&(H[A]=ge[A]);return C(O,re,H)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(O){return{$$typeof:p,render:O}},Be.isValidElement=R,Be.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:F}},Be.memo=function(O,D){return{$$typeof:x,type:O,compare:D===void 0?null:D}},Be.startTransition=function(O){var D=j.T,I={};j.T=I;try{var A=O(),H=j.S;H!==null&&H(I,A),typeof A=="object"&&A!==null&&typeof A.then=="function"&&A.then(xe,me)}catch(re){me(re)}finally{D!==null&&I.types!==null&&(D.types=I.types),j.T=D}},Be.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Be.use=function(O){return j.H.use(O)},Be.useActionState=function(O,D,I){return j.H.useActionState(O,D,I)},Be.useCallback=function(O,D){return j.H.useCallback(O,D)},Be.useContext=function(O){return j.H.useContext(O)},Be.useDebugValue=function(){},Be.useDeferredValue=function(O,D){return j.H.useDeferredValue(O,D)},Be.useEffect=function(O,D){return j.H.useEffect(O,D)},Be.useEffectEvent=function(O){return j.H.useEffectEvent(O)},Be.useId=function(){return j.H.useId()},Be.useImperativeHandle=function(O,D,I){return j.H.useImperativeHandle(O,D,I)},Be.useInsertionEffect=function(O,D){return j.H.useInsertionEffect(O,D)},Be.useLayoutEffect=function(O,D){return j.H.useLayoutEffect(O,D)},Be.useMemo=function(O,D){return j.H.useMemo(O,D)},Be.useOptimistic=function(O,D){return j.H.useOptimistic(O,D)},Be.useReducer=function(O,D,I){return j.H.useReducer(O,D,I)},Be.useRef=function(O){return j.H.useRef(O)},Be.useState=function(O){return j.H.useState(O)},Be.useSyncExternalStore=function(O,D,I){return j.H.useSyncExternalStore(O,D,I)},Be.useTransition=function(){return j.H.useTransition()},Be.version="19.2.0",Be}var Nx;function lp(){return Nx||(Nx=1,cm.exports=IE()),cm.exports}var J=lp();const vb=jE(J);var um={exports:{}},$o={},dm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax;function kE(){return Ax||(Ax=1,(function(i){function e(K,pe){var F=K.length;K.push(pe);e:for(;0<F;){var me=F-1>>>1,_e=K[me];if(0<l(_e,pe))K[me]=pe,K[F]=_e,F=me;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var pe=K[0],F=K.pop();if(F!==pe){K[0]=F;e:for(var me=0,_e=K.length,O=_e>>>1;me<O;){var D=2*(me+1)-1,I=K[D],A=D+1,H=K[A];if(0>l(I,F))A<_e&&0>l(H,I)?(K[me]=H,K[A]=F,me=A):(K[me]=I,K[D]=F,me=D);else if(A<_e&&0>l(H,F))K[me]=H,K[A]=F,me=A;else break e}}return pe}function l(K,pe){var F=K.sortIndex-pe.sortIndex;return F!==0?F:K.id-pe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var g=[],x=[],_=1,E=null,T=3,z=!1,q=!1,X=!1,L=!1,oe=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function he(K){for(var pe=n(x);pe!==null;){if(pe.callback===null)r(x);else if(pe.startTime<=K)r(x),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=n(x)}}function Te(K){if(X=!1,he(K),!q)if(n(g)!==null)q=!0,xe||(xe=!0,P());else{var pe=n(x);pe!==null&&je(Te,pe.startTime-K)}}var xe=!1,j=-1,N=5,C=-1;function M(){return L?!0:!(i.unstable_now()-C<N)}function R(){if(L=!1,xe){var K=i.unstable_now();C=K;var pe=!0;try{e:{q=!1,X&&(X=!1,ne(j),j=-1),z=!0;var F=T;try{t:{for(he(K),E=n(g);E!==null&&!(E.expirationTime>K&&M());){var me=E.callback;if(typeof me=="function"){E.callback=null,T=E.priorityLevel;var _e=me(E.expirationTime<=K);if(K=i.unstable_now(),typeof _e=="function"){E.callback=_e,he(K),pe=!0;break t}E===n(g)&&r(g),he(K)}else r(g);E=n(g)}if(E!==null)pe=!0;else{var O=n(x);O!==null&&je(Te,O.startTime-K),pe=!1}}break e}finally{E=null,T=F,z=!1}pe=void 0}}finally{pe?P():xe=!1}}}var P;if(typeof W=="function")P=function(){W(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ie=k.port2;k.port1.onmessage=R,P=function(){ie.postMessage(null)}}else P=function(){oe(R,0)};function je(K,pe){j=oe(function(){K(i.unstable_now())},pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(K){switch(T){case 1:case 2:case 3:var pe=3;break;default:pe=T}var F=T;T=pe;try{return K()}finally{T=F}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(K,pe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=T;T=K;try{return pe()}finally{T=F}},i.unstable_scheduleCallback=function(K,pe,F){var me=i.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?me+F:me):F=me,K){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=F+_e,K={id:_++,callback:pe,priorityLevel:K,startTime:F,expirationTime:_e,sortIndex:-1},F>me?(K.sortIndex=F,e(x,K),n(g)===null&&K===n(x)&&(X?(ne(j),j=-1):X=!0,je(Te,F-me))):(K.sortIndex=_e,e(g,K),q||z||(q=!0,xe||(xe=!0,P()))),K},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(K){var pe=T;return function(){var F=T;T=pe;try{return K.apply(this,arguments)}finally{T=F}}}})(hm)),hm}var jx;function DE(){return jx||(jx=1,dm.exports=kE()),dm.exports}var fm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx;function ME(){if(Cx)return _n;Cx=1;var i=lp();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,x,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:x,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(g,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,_)},_n.flushSync=function(g){var x=f.T,_=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=x,r.p=_,r.d.f()}},_n.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(g,x))},_n.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},_n.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var _=x.as,E=p(_,x.crossOrigin),T=typeof x.integrity=="string"?x.integrity:void 0,z=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:z}):_==="script"&&r.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:z,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},_n.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=p(x.as,x.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(g)},_n.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,E=p(_,x.crossOrigin);r.d.L(g,_,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},_n.preloadModule=function(g,x){if(typeof g=="string")if(x){var _=p(x.as,x.crossOrigin);r.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(g)},_n.requestFormReset=function(g){r.d.r(g)},_n.unstable_batchedUpdates=function(g,x){return g(x)},_n.useFormState=function(g,x,_){return f.H.useFormState(g,x,_)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var Rx;function OE(){if(Rx)return fm.exports;Rx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=ME(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function VE(){if(Ix)return $o;Ix=1;var i=DE(),e=lp(),n=OE();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return g(h),t;if(m===o)return g(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,o=m;break}if(w===o){v=!0,o=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,o=h;break}if(w===o){v=!0,o=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),W=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case oe:return"Profiler";case L:return"StrictMode";case Te:return"Suspense";case xe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case W:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case he:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return s=t.displayName||null,s!==null?s:ie(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return ie(t(s))}catch{}}return null}var je=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},me=[],_e=-1;function O(t){return{current:t}}function D(t){0>_e||(t.current=me[_e],me[_e]=null,_e--)}function I(t,s){_e++,me[_e]=t.current,t.current=s}var A=O(null),H=O(null),re=O(null),ge=O(null);function Ne(t,s){switch(I(re,s),I(H,t),I(A,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Ky(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Ky(s),t=Yy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}D(A),I(A,t)}function Re(){D(A),D(H),D(re)}function at(t){t.memoizedState!==null&&I(ge,t);var s=A.current,a=Yy(s,t.type);s!==a&&(I(H,t),I(A,a))}function ht(t){H.current===t&&(D(A),D(H)),ge.current===t&&(D(ge),qo._currentValue=F)}var $e,ce;function ve(t){if($e===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);$e=s&&s[1]||"",ce=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+t+ce}var fe=!1;function Ie(t,s){if(!t||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var Q=ee}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(ee){Q=ee}t.call(ue.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var V=v.split(`
`),$=w.split(`
`);for(h=o=0;o<V.length&&!V[o].includes("DetermineComponentFrameRoot");)o++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(o===V.length||h===$.length)for(o=V.length-1,h=$.length-1;1<=o&&0<=h&&V[o]!==$[h];)h--;for(;1<=o&&0<=h;o--,h--)if(V[o]!==$[h]){if(o!==1||h!==1)do if(o--,h--,0>h||V[o]!==$[h]){var se=`
`+V[o].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=o&&0<=h);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ve(a):""}function qe(t,s){switch(t.tag){case 26:case 27:case 5:return ve(t.type);case 16:return ve("Lazy");case 13:return t.child!==s&&s!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Ie(t.type,!1);case 11:return Ie(t.type.render,!1);case 1:return Ie(t.type,!0);case 31:return ve("Activity");default:return""}}function be(t){try{var s="",a=null;do s+=qe(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ye=Object.prototype.hasOwnProperty,We=i.unstable_scheduleCallback,te=i.unstable_cancelCallback,ke=i.unstable_shouldYield,Ze=i.unstable_requestPaint,ct=i.unstable_now,vn=i.unstable_getCurrentPriorityLevel,ze=i.unstable_ImmediatePriority,St=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,Cn=i.unstable_LowPriority,Hi=i.unstable_IdlePriority,qr=i.log,ci=i.unstable_setDisableYieldValue,cn=null,Dt=null;function un(t){if(typeof qr=="function"&&ci(t),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(cn,t)}catch{}}var wt=Math.clz32?Math.clz32:Dc,zn=Math.log,qi=Math.LN2;function Dc(t){return t>>>=0,t===0?32:31-(zn(t)/qi|0)|0}var Ds=256,Fr=262144,qt=4194304;function Ms(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Os(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~m,o!==0?h=Ms(o):(v&=w,v!==0?h=Ms(v):a||(a=w&~t,a!==0&&(h=Ms(a))))):(w=o&~m,w!==0?h=Ms(w):v!==0?h=Ms(v):a||(a=o&~t,a!==0&&(h=Ms(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function gs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function dh(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mc(){var t=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),t}function Vs(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Gr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hh(t,s,a,o,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,V=t.expirationTimes,$=t.hiddenUpdates;for(a=v&~a;0<a;){var se=31-wt(a),ue=1<<se;w[se]=0,V[se]=-1;var Q=$[se];if(Q!==null)for($[se]=null,se=0;se<Q.length;se++){var ee=Q[se];ee!==null&&(ee.lane&=-536870913)}a&=~ue}o!==0&&Kr(t,o,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Kr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-wt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Yl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-wt(a),h=1<<o;h&s|t[o]&s&&(t[o]|=s),a&=~h}}function $l(t,s){var a=s&-s;return a=(a&42)!==0?1:Yr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Yr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ui(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oc(){var t=pe.p;return t!==0?t:(t=window.event,t===void 0?32:gx(t.type))}function ys(t,s){var a=pe.p;try{return pe.p=t,s()}finally{pe.p=a}}var xs=Math.random().toString(36).slice(2),Ft="__reactFiber$"+xs,rn="__reactProps$"+xs,Ls="__reactContainer$"+xs,Da="__reactEvents$"+xs,fh="__reactListeners$"+xs,Vc="__reactHandles$"+xs,Lc="__reactResources$"+xs,Ps="__reactMarker$"+xs;function Ma(t){delete t[Ft],delete t[rn],delete t[Da],delete t[fh],delete t[Vc]}function Us(t){var s=t[Ft];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ls]||a[Ft]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=ex(t);t!==null;){if(a=t[Ft])return a;t=ex(t)}return s}t=a,a=t.parentNode}return null}function es(t){if(t=t[Ft]||t[Ls]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Bn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function zs(t){var s=t[Lc];return s||(s=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Gt(t){t[Ps]=!0}var Ql=new Set,Xl={};function Bs(t,s){Hs(t,s),Hs(t+"Capture",s)}function Hs(t,s){for(Xl[t]=s,t=0;t<s.length;t++)Ql.add(s[t])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zl={},Jl={};function Pc(t){return Ye.call(Jl,t)?!0:Ye.call(Zl,t)?!1:Wl.test(t)?Jl[t]=!0:(Zl[t]=!0,!1)}function Oa(t,s,a){if(Pc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Hn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Kt(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function eo(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function pt(t){if(!t._valueTracker){var s=Fi(t)?"checked":"value";t._valueTracker=eo(t,s,""+t[s])}}function $r(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Fi(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qr=/[\n"\\]/g;function Rn(t){return t.replace(Qr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Va(t,s,a,o,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+an(s)):t.value!==""+an(s)&&(t.value=""+an(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?to(t,v,an(s)):a!=null?to(t,v,an(a)):o!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+an(w):t.removeAttribute("name")}function Uc(t,s,a,o,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){pt(t);return}a=a!=null?""+an(a):"",s=s!=null?""+an(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),pt(t)}function to(t,s,a){s==="number"&&qs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Gi(t,s,a,o){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function zc(t,s,a){if(s!=null&&(s=""+an(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+an(a):""}function Ki(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(je(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=an(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),pt(t)}function In(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function no(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Bc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function so(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&a[h]!==o&&no(t,h,o)}else for(var m in s)s.hasOwnProperty(m)&&no(t,m,s[m])}function La(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return Yi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vs(){}var io=null;function ts(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,Fs=null;function Xr(t){var s=es(t);if(s&&(t=s.stateNode)){var a=t[rn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var h=o[rn]||null;if(!h)throw Error(r(90));Va(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&$r(o)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Gi(t,!!a.multiple,s,!1)}}}var Ua=!1;function Qi(t,s,a){if(Ua)return t(s,a);Ua=!0;try{var o=t(s);return o}finally{if(Ua=!1,($i!==null||Fs!==null)&&(Ou(),$i&&(s=$i,t=Fs,Fs=$i=null,Xr(s),t)))for(s=0;s<t.length;s++)Xr(t[s])}}function bs(t,s){var a=t.stateNode;if(a===null)return null;var o=a[rn]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wr=!1;if(ns)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Wr=!1}var Gs=null,ro=null,Zr=null;function ao(){if(Zr)return Zr;var t,s=ro,a=s.length,o,h="value"in Gs?Gs.value:Gs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===h[m-o];o++);return Zr=h.slice(t,1<o?1-o:void 0)}function Jr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function di(){return!0}function _s(){return!1}function dn(t){function s(a,o,h,m,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?di:_s,this.isPropagationStopped=_s,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),s}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=dn(hi),Xi=E({},hi,{view:0,detail:0}),lo=dn(Xi),Wi,za,Ys,Ba=E({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ys&&(Ys&&t.type==="mousemove"?(Wi=t.screenX-Ys.screenX,za=t.screenY-Ys.screenY):za=Wi=0,Ys=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:za}}),oo=dn(Ba),ea=E({},Ba,{dataTransfer:0}),qc=dn(ea),Fc=E({},Xi,{relatedTarget:0}),ta=dn(Fc),co=E({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=dn(co),Ha=E({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kc=dn(Ha),Yc=E({},hi,{data:0}),$s=dn(Yc),$c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Xc[t])?!!s[t]:!1}function Zi(){return Wc}var Nn=E({},Xi,{key:function(t){if(t.key){var s=$c[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(t){return t.type==="keypress"?Jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zc=dn(Nn),Jc=E({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=dn(Jc),d=E({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),y=dn(d),b=E({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=dn(b),G=E({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=dn(G),ye=E({},hi,{newState:0,oldState:0}),Fe=dn(ye),Lt=[9,13,27,32],ut=ns&&"CompositionEvent"in window,Rt=null;ns&&"documentMode"in document&&(Rt=document.documentMode);var ss=ns&&"TextEvent"in window&&!Rt,Qs=ns&&(!ut||Rt&&8<Rt&&11>=Rt),ws=" ",Es=!1;function na(t,s){switch(t){case"keyup":return Lt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function Z1(t,s){switch(t){case"compositionend":return qa(s);case"keypress":return s.which!==32?null:(Es=!0,ws);case"textInput":return t=s.data,t===ws&&Es?null:t;default:return null}}function J1(t,s){if(Fa)return t==="compositionend"||!ut&&na(t,s)?(t=ao(),Zr=ro=Gs=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qs&&s.locale!=="ko"?null:s.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ew[t.type]:s==="textarea"}function ig(t,s,a,o){$i?Fs?Fs.push(o):Fs=[o]:$i=o,s=Hu(s,"onChange"),0<s.length&&(a=new Ks("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var uo=null,ho=null;function tw(t){zy(t,0)}function eu(t){var s=Bn(t);if($r(s))return t}function rg(t,s){if(t==="change")return s}var ag=!1;if(ns){var mh;if(ns){var ph="oninput"in document;if(!ph){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),ph=typeof lg.oninput=="function"}mh=ph}else mh=!1;ag=mh&&(!document.documentMode||9<document.documentMode)}function og(){uo&&(uo.detachEvent("onpropertychange",cg),ho=uo=null)}function cg(t){if(t.propertyName==="value"&&eu(ho)){var s=[];ig(s,ho,t,ts(t)),Qi(tw,s)}}function nw(t,s,a){t==="focusin"?(og(),uo=s,ho=a,uo.attachEvent("onpropertychange",cg)):t==="focusout"&&og()}function sw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(ho)}function iw(t,s){if(t==="click")return eu(s)}function rw(t,s){if(t==="input"||t==="change")return eu(s)}function aw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var qn=typeof Object.is=="function"?Object.is:aw;function fo(t,s){if(qn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Ye.call(s,h)||!qn(t[h],s[h]))return!1}return!0}function ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dg(t,s){var a=ug(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ug(a)}}function hg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?hg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function fg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=qs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=qs(t.document)}return s}function gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var lw=ns&&"documentMode"in document&&11>=document.documentMode,Ga=null,yh=null,mo=null,xh=!1;function mg(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xh||Ga==null||Ga!==qs(o)||(o=Ga,"selectionStart"in o&&gh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&fo(mo,o)||(mo=o,o=Hu(yh,"onSelect"),0<o.length&&(s=new Ks("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ga)))}function sa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ka={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},vh={},pg={};ns&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function ia(t){if(vh[t])return vh[t];if(!Ka[t])return t;var s=Ka[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in pg)return vh[t]=s[a];return t}var gg=ia("animationend"),yg=ia("animationiteration"),xg=ia("animationstart"),ow=ia("transitionrun"),cw=ia("transitionstart"),uw=ia("transitioncancel"),vg=ia("transitionend"),bg=new Map,bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bh.push("scrollEnd");function Ts(t,s){bg.set(t,s),Bs(s,[t])}var tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],Ya=0,_h=0;function nu(){for(var t=Ya,s=_h=Ya=0;s<t;){var a=is[s];is[s++]=null;var o=is[s];is[s++]=null;var h=is[s];is[s++]=null;var m=is[s];if(is[s++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}m!==0&&_g(a,h,m)}}function su(t,s,a,o){is[Ya++]=t,is[Ya++]=s,is[Ya++]=a,is[Ya++]=o,_h|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wh(t,s,a,o){return su(t,s,a,o),iu(t)}function ra(t,s){return su(t,null,null,s),iu(t)}function _g(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-wt(a),t=m.hiddenUpdates,o=t[h],o===null?t[h]=[s]:o.push(s),s.lane=a|536870912),m):null}function iu(t){if(50<Vo)throw Vo=0,kf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var $a={};function dw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,s,a,o){return new dw(t,s,a,o)}function Eh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mi(t,s){var a=t.alternate;return a===null?(a=Fn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function wg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ru(t,s,a,o,h,m){var v=0;if(o=t,typeof t=="function")Eh(t)&&(v=1);else if(typeof t=="string")v=gE(t,a,A.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Fn(31,a,s,h),t.elementType=C,t.lanes=m,t;case X:return aa(a.children,h,m,s);case L:v=8,h|=24;break;case oe:return t=Fn(12,a,s,h|2),t.elementType=oe,t.lanes=m,t;case Te:return t=Fn(13,a,s,h),t.elementType=Te,t.lanes=m,t;case xe:return t=Fn(19,a,s,h),t.elementType=xe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:v=10;break e;case ne:v=9;break e;case he:v=11;break e;case j:v=14;break e;case N:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Fn(v,a,s,h),s.elementType=t,s.type=o,s.lanes=m,s}function aa(t,s,a,o){return t=Fn(7,t,o,s),t.lanes=a,t}function Th(t,s,a){return t=Fn(6,t,null,s),t.lanes=a,t}function Eg(t){var s=Fn(18,null,null,0);return s.stateNode=t,s}function Sh(t,s,a){return s=Fn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Tg=new WeakMap;function rs(t,s){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:be(s)},Tg.set(t,s),s)}return{value:t,source:s,stack:be(s)}}var Qa=[],Xa=0,au=null,po=0,as=[],ls=0,Ji=null,Xs=1,Ws="";function pi(t,s){Qa[Xa++]=po,Qa[Xa++]=au,au=t,po=s}function Sg(t,s,a){as[ls++]=Xs,as[ls++]=Ws,as[ls++]=Ji,Ji=t;var o=Xs;t=Ws;var h=32-wt(o)-1;o&=~(1<<h),a+=1;var m=32-wt(s)+h;if(30<m){var v=h-h%5;m=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Xs=1<<32-wt(s)+h|a<<h|o,Ws=m+t}else Xs=1<<m|a<<h|o,Ws=t}function Nh(t){t.return!==null&&(pi(t,1),Sg(t,1,0))}function Ah(t){for(;t===au;)au=Qa[--Xa],Qa[Xa]=null,po=Qa[--Xa],Qa[Xa]=null;for(;t===Ji;)Ji=as[--ls],as[ls]=null,Ws=as[--ls],as[ls]=null,Xs=as[--ls],as[ls]=null}function Ng(t,s){as[ls++]=Xs,as[ls++]=Ws,as[ls++]=Ji,Xs=s.id,Ws=s.overflow,Ji=t}var hn=null,At=null,it=!1,er=null,os=!1,jh=Error(r(519));function tr(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw go(rs(s,t)),jh}function Ag(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Ft]=t,s[rn]=o,a){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(a=0;a<Po.length;a++)Xe(Po[a],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),Uc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),Ki(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||Fy(s.textContent,a)?(o.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),o.onScroll!=null&&Xe("scroll",s),o.onScrollEnd!=null&&Xe("scrollend",s),o.onClick!=null&&(s.onclick=vs),s=!0):s=!1,s||tr(t,!0)}function jg(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:hn=hn.return}}function Wa(t){if(t!==hn)return!1;if(!it)return jg(t),it=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Yf(t.type,t.memoizedProps)),a=!a),a&&At&&tr(t),jg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));At=Jy(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));At=Jy(t)}else s===27?(s=At,pr(t.type)?(t=Zf,Zf=null,At=t):At=s):At=hn?us(t.stateNode.nextSibling):null;return!0}function la(){At=hn=null,it=!1}function Ch(){var t=er;return t!==null&&(On===null?On=t:On.push.apply(On,t),er=null),t}function go(t){er===null?er=[t]:er.push(t)}var Rh=O(null),oa=null,gi=null;function nr(t,s,a){I(Rh,s._currentValue),s._currentValue=a}function yi(t){t._currentValue=Rh.current,D(Rh)}function Ih(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function kh(t,s,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var V=0;V<s.length;V++)if(w.context===s[V]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Ih(m.return,a,t),o||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Ih(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Za(t,s,a,o){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;qn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===ge.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(qo):t=[qo])}h=h.return}t!==null&&kh(s,t,a,o),s.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){oa=t,gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return Cg(oa,t)}function ou(t,s){return oa===null&&ca(t),Cg(t,s)}function Cg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},gi===null){if(t===null)throw Error(r(308));gi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else gi=gi.next=s;return a}var hw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},fw=i.unstable_scheduleCallback,mw=i.unstable_NormalPriority,Yt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dh(){return{controller:new hw,data:new Map,refCount:0}}function yo(t){t.refCount--,t.refCount===0&&fw(mw,function(){t.controller.abort()})}var xo=null,Mh=0,Ja=0,el=null;function pw(t,s){if(xo===null){var a=xo=[];Mh=0,Ja=Pf(),el={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Mh++,s.then(Rg,Rg),s}function Rg(){if(--Mh===0&&xo!==null){el!==null&&(el.status="fulfilled");var t=xo;xo=null,Ja=0,el=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function gw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Ig=K.S;K.S=function(t,s){my=ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pw(t,s),Ig!==null&&Ig(t,s)};var ua=O(null);function Oh(){var t=ua.current;return t!==null?t:Et.pooledCache}function cu(t,s){s===null?I(ua,ua.current):I(ua,s.pool)}function kg(){var t=Oh();return t===null?null:{parent:Yt._currentValue,pool:t}}var tl=Error(r(460)),Vh=Error(r(474)),uu=Error(r(542)),du={then:function(){}};function Dg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Mg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(vs,vs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vg(t),t;default:if(typeof s.status=="string")s.then(vs,vs);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vg(t),t}throw ha=s,tl}}function da(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ha=a,tl):a}}var ha=null;function Og(){if(ha===null)throw Error(r(459));var t=ha;return ha=null,t}function Vg(t){if(t===tl||t===uu)throw Error(r(483))}var nl=null,vo=0;function hu(t){var s=vo;return vo+=1,nl===null&&(nl=[]),Mg(nl,t,s)}function bo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function fu(t,s){throw s.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Lg(t){function s(B,U){if(t){var Y=B.deletions;Y===null?(B.deletions=[U],B.flags|=16):Y.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function o(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function h(B,U){return B=mi(B,U),B.index=0,B.sibling=null,B}function m(B,U,Y){return B.index=Y,t?(Y=B.alternate,Y!==null?(Y=Y.index,Y<U?(B.flags|=67108866,U):Y):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,Y,ae){return U===null||U.tag!==6?(U=Th(Y,B.mode,ae),U.return=B,U):(U=h(U,Y),U.return=B,U)}function V(B,U,Y,ae){var De=Y.type;return De===X?se(B,U,Y.props.children,ae,Y.key):U!==null&&(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&da(De)===U.type)?(U=h(U,Y.props),bo(U,Y),U.return=B,U):(U=ru(Y.type,Y.key,Y.props,null,B.mode,ae),bo(U,Y),U.return=B,U)}function $(B,U,Y,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==Y.containerInfo||U.stateNode.implementation!==Y.implementation?(U=Sh(Y,B.mode,ae),U.return=B,U):(U=h(U,Y.children||[]),U.return=B,U)}function se(B,U,Y,ae,De){return U===null||U.tag!==7?(U=aa(Y,B.mode,ae,De),U.return=B,U):(U=h(U,Y),U.return=B,U)}function ue(B,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Th(""+U,B.mode,Y),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return Y=ru(U.type,U.key,U.props,null,B.mode,Y),bo(Y,U),Y.return=B,Y;case q:return U=Sh(U,B.mode,Y),U.return=B,U;case N:return U=da(U),ue(B,U,Y)}if(je(U)||P(U))return U=aa(U,B.mode,Y,null),U.return=B,U;if(typeof U.then=="function")return ue(B,hu(U),Y);if(U.$$typeof===W)return ue(B,ou(B,U),Y);fu(B,U)}return null}function Q(B,U,Y,ae){var De=U!==null?U.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return De!==null?null:w(B,U,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return Y.key===De?V(B,U,Y,ae):null;case q:return Y.key===De?$(B,U,Y,ae):null;case N:return Y=da(Y),Q(B,U,Y,ae)}if(je(Y)||P(Y))return De!==null?null:se(B,U,Y,ae,null);if(typeof Y.then=="function")return Q(B,U,hu(Y),ae);if(Y.$$typeof===W)return Q(B,U,ou(B,Y),ae);fu(B,Y)}return null}function ee(B,U,Y,ae,De){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return B=B.get(Y)||null,w(U,B,""+ae,De);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case z:return B=B.get(ae.key===null?Y:ae.key)||null,V(U,B,ae,De);case q:return B=B.get(ae.key===null?Y:ae.key)||null,$(U,B,ae,De);case N:return ae=da(ae),ee(B,U,Y,ae,De)}if(je(ae)||P(ae))return B=B.get(Y)||null,se(U,B,ae,De,null);if(typeof ae.then=="function")return ee(B,U,Y,hu(ae),De);if(ae.$$typeof===W)return ee(B,U,Y,ou(U,ae),De);fu(U,ae)}return null}function Ae(B,U,Y,ae){for(var De=null,lt=null,Ce=U,Ke=U=0,et=null;Ce!==null&&Ke<Y.length;Ke++){Ce.index>Ke?(et=Ce,Ce=null):et=Ce.sibling;var ot=Q(B,Ce,Y[Ke],ae);if(ot===null){Ce===null&&(Ce=et);break}t&&Ce&&ot.alternate===null&&s(B,Ce),U=m(ot,U,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot,Ce=et}if(Ke===Y.length)return a(B,Ce),it&&pi(B,Ke),De;if(Ce===null){for(;Ke<Y.length;Ke++)Ce=ue(B,Y[Ke],ae),Ce!==null&&(U=m(Ce,U,Ke),lt===null?De=Ce:lt.sibling=Ce,lt=Ce);return it&&pi(B,Ke),De}for(Ce=o(Ce);Ke<Y.length;Ke++)et=ee(Ce,B,Ke,Y[Ke],ae),et!==null&&(t&&et.alternate!==null&&Ce.delete(et.key===null?Ke:et.key),U=m(et,U,Ke),lt===null?De=et:lt.sibling=et,lt=et);return t&&Ce.forEach(function(br){return s(B,br)}),it&&pi(B,Ke),De}function Oe(B,U,Y,ae){if(Y==null)throw Error(r(151));for(var De=null,lt=null,Ce=U,Ke=U=0,et=null,ot=Y.next();Ce!==null&&!ot.done;Ke++,ot=Y.next()){Ce.index>Ke?(et=Ce,Ce=null):et=Ce.sibling;var br=Q(B,Ce,ot.value,ae);if(br===null){Ce===null&&(Ce=et);break}t&&Ce&&br.alternate===null&&s(B,Ce),U=m(br,U,Ke),lt===null?De=br:lt.sibling=br,lt=br,Ce=et}if(ot.done)return a(B,Ce),it&&pi(B,Ke),De;if(Ce===null){for(;!ot.done;Ke++,ot=Y.next())ot=ue(B,ot.value,ae),ot!==null&&(U=m(ot,U,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot);return it&&pi(B,Ke),De}for(Ce=o(Ce);!ot.done;Ke++,ot=Y.next())ot=ee(Ce,B,Ke,ot.value,ae),ot!==null&&(t&&ot.alternate!==null&&Ce.delete(ot.key===null?Ke:ot.key),U=m(ot,U,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot);return t&&Ce.forEach(function(AE){return s(B,AE)}),it&&pi(B,Ke),De}function _t(B,U,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===X&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:e:{for(var De=Y.key;U!==null;){if(U.key===De){if(De=Y.type,De===X){if(U.tag===7){a(B,U.sibling),ae=h(U,Y.props.children),ae.return=B,B=ae;break e}}else if(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&da(De)===U.type){a(B,U.sibling),ae=h(U,Y.props),bo(ae,Y),ae.return=B,B=ae;break e}a(B,U);break}else s(B,U);U=U.sibling}Y.type===X?(ae=aa(Y.props.children,B.mode,ae,Y.key),ae.return=B,B=ae):(ae=ru(Y.type,Y.key,Y.props,null,B.mode,ae),bo(ae,Y),ae.return=B,B=ae)}return v(B);case q:e:{for(De=Y.key;U!==null;){if(U.key===De)if(U.tag===4&&U.stateNode.containerInfo===Y.containerInfo&&U.stateNode.implementation===Y.implementation){a(B,U.sibling),ae=h(U,Y.children||[]),ae.return=B,B=ae;break e}else{a(B,U);break}else s(B,U);U=U.sibling}ae=Sh(Y,B.mode,ae),ae.return=B,B=ae}return v(B);case N:return Y=da(Y),_t(B,U,Y,ae)}if(je(Y))return Ae(B,U,Y,ae);if(P(Y)){if(De=P(Y),typeof De!="function")throw Error(r(150));return Y=De.call(Y),Oe(B,U,Y,ae)}if(typeof Y.then=="function")return _t(B,U,hu(Y),ae);if(Y.$$typeof===W)return _t(B,U,ou(B,Y),ae);fu(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,U!==null&&U.tag===6?(a(B,U.sibling),ae=h(U,Y),ae.return=B,B=ae):(a(B,U),ae=Th(Y,B.mode,ae),ae.return=B,B=ae),v(B)):a(B,U)}return function(B,U,Y,ae){try{vo=0;var De=_t(B,U,Y,ae);return nl=null,De}catch(Ce){if(Ce===tl||Ce===uu)throw Ce;var lt=Fn(29,Ce,null,B.mode);return lt.lanes=ae,lt.return=B,lt}finally{}}}var fa=Lg(!0),Pg=Lg(!1),sr=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ph(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function rr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(dt&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=iu(t),_g(t,null,a),s}return su(t,o,s,a),iu(t)}function _o(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Yl(t,a)}}function Uh(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var zh=!1;function wo(){if(zh){var t=el;if(t!==null)throw t}}function Eo(t,s,a,o){zh=!1;var h=t.updateQueue;sr=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var V=w,$=V.next;V.next=null,v===null?m=$:v.next=$,v=V;var se=t.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==v&&(w===null?se.firstBaseUpdate=$:w.next=$,se.lastBaseUpdate=V))}if(m!==null){var ue=h.baseState;v=0,se=$=V=null,w=m;do{var Q=w.lane&-536870913,ee=Q!==w.lane;if(ee?(Je&Q)===Q:(o&Q)===Q){Q!==0&&Q===Ja&&(zh=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=t,Oe=w;Q=s;var _t=a;switch(Oe.tag){case 1:if(Ae=Oe.payload,typeof Ae=="function"){ue=Ae.call(_t,ue,Q);break e}ue=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Oe.payload,Q=typeof Ae=="function"?Ae.call(_t,ue,Q):Ae,Q==null)break e;ue=E({},ue,Q);break e;case 2:sr=!0}}Q=w.callback,Q!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?($=se=ee,V=ue):se=se.next=ee,v|=Q;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;ee=w,w=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);se===null&&(V=ue),h.baseState=V,h.firstBaseUpdate=$,h.lastBaseUpdate=se,m===null&&(h.shared.lanes=0),ur|=v,t.lanes=v,t.memoizedState=ue}}function Ug(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function zg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ug(a[t],s)}var sl=O(null),mu=O(0);function Bg(t,s){t=Ni,I(mu,t),I(sl,s),Ni=t|s.baseLanes}function Bh(){I(mu,Ni),I(sl,sl.current)}function Hh(){Ni=mu.current,D(sl),D(mu)}var Gn=O(null),cs=null;function ar(t){var s=t.alternate;I(Pt,Pt.current&1),I(Gn,t),cs===null&&(s===null||sl.current!==null||s.memoizedState!==null)&&(cs=t)}function qh(t){I(Pt,Pt.current),I(Gn,t),cs===null&&(cs=t)}function Hg(t){t.tag===22?(I(Pt,Pt.current),I(Gn,t),cs===null&&(cs=t)):lr()}function lr(){I(Pt,Pt.current),I(Gn,Gn.current)}function Kn(t){D(Gn),cs===t&&(cs=null),D(Pt)}var Pt=O(0);function pu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xf(a)||Wf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,Ge=null,vt=null,$t=null,gu=!1,il=!1,ma=!1,yu=0,To=0,rl=null,yw=0;function Ot(){throw Error(r(321))}function Fh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!qn(t[a],s[a]))return!1;return!0}function Gh(t,s,a,o,h,m){return xi=m,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?S0:lf,ma=!1,m=a(o,h),ma=!1,il&&(m=Fg(s,a,o,h)),qg(t),m}function qg(t){K.H=Ao;var s=vt!==null&&vt.next!==null;if(xi=0,$t=vt=Ge=null,gu=!1,To=0,rl=null,s)throw Error(r(300));t===null||Qt||(t=t.dependencies,t!==null&&lu(t)&&(Qt=!0))}function Fg(t,s,a,o){Ge=t;var h=0;do{if(il&&(rl=null),To=0,il=!1,25<=h)throw Error(r(301));if(h+=1,$t=vt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=N0,m=s(a,o)}while(il);return m}function xw(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?So(s):s,t=t.useState()[0],(vt!==null?vt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function Kh(){var t=yu!==0;return yu=0,t}function Yh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $h(t){if(gu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}gu=!1}xi=0,$t=vt=Ge=null,il=!1,To=yu=0,rl=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ge.memoizedState=$t=t:$t=$t.next=t,$t}function Ut(){if(vt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var s=$t===null?Ge.memoizedState:$t.next;if(s!==null)$t=s,vt=t;else{if(t===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},$t===null?Ge.memoizedState=$t=t:$t=$t.next=t}return $t}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(t){var s=To;return To+=1,rl===null&&(rl=[]),t=Mg(rl,t,s),s=Ge,($t===null?s.memoizedState:$t.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?S0:lf),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return So(t);if(t.$$typeof===W)return fn(t)}throw Error(r(438,String(t)))}function Qh(t){var s=null,a=Ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ge.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=xu(),Ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=M;return s.index++,a}function vi(t,s){return typeof s=="function"?s(t):s}function bu(t){var s=Ut();return Xh(s,vt,t)}function Xh(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,m=o.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,o.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=v=null,V=null,$=s,se=!1;do{var ue=$.lane&-536870913;if(ue!==$.lane?(Je&ue)===ue:(xi&ue)===ue){var Q=$.revertLane;if(Q===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ue===Ja&&(se=!0);else if((xi&Q)===Q){$=$.next,Q===Ja&&(se=!0);continue}else ue={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(w=V=ue,v=m):V=V.next=ue,Ge.lanes|=Q,ur|=Q;ue=$.action,ma&&a(m,ue),m=$.hasEagerState?$.eagerState:a(m,ue)}else Q={lane:ue,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(w=V=Q,v=m):V=V.next=Q,Ge.lanes|=ue,ur|=ue;$=$.next}while($!==null&&$!==s);if(V===null?v=m:V.next=w,!qn(m,t.memoizedState)&&(Qt=!0,se&&(a=el,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=V,o.lastRenderedState=m}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Wh(t){var s=Ut(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);qn(m,s.memoizedState)||(Qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function Gg(t,s,a){var o=Ge,h=Ut(),m=it;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!qn((vt||h).memoizedState,a);if(v&&(h.memoizedState=a,Qt=!0),h=h.queue,ef($g.bind(null,o,h,t),[t]),h.getSnapshot!==s||v||$t!==null&&$t.memoizedState.tag&1){if(o.flags|=2048,al(9,{destroy:void 0},Yg.bind(null,o,h,a,s),null),Et===null)throw Error(r(349));m||(xi&127)!==0||Kg(o,s,a)}return a}function Kg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ge.updateQueue,s===null?(s=xu(),Ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Yg(t,s,a,o){s.value=a,s.getSnapshot=o,Qg(s)&&Xg(t)}function $g(t,s,a){return a(function(){Qg(s)&&Xg(t)})}function Qg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!qn(t,a)}catch{return!0}}function Xg(t){var s=ra(t,2);s!==null&&Vn(s,t,2)}function Zh(t){var s=An();if(typeof t=="function"){var a=t;if(t=a(),ma){un(!0);try{a()}finally{un(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},s}function Wg(t,s,a,o){return t.baseState=a,Xh(t,vt,typeof o=="function"?o:vi)}function vw(t,s,a,o,h){if(Eu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,Zg(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Zg(t,s){var a=s.action,o=s.payload,h=t.state;if(s.isTransition){var m=K.T,v={};K.T=v;try{var w=a(h,o),V=K.S;V!==null&&V(v,w),Jg(t,s,w)}catch($){Jh(t,s,$)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,o),Jg(t,s,m)}catch($){Jh(t,s,$)}}function Jg(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){e0(t,s,o)},function(o){return Jh(t,s,o)}):e0(t,s,a)}function e0(t,s,a){s.status="fulfilled",s.value=a,t0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Zg(t,a)))}function Jh(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,t0(s),s=s.next;while(s!==o)}t.action=null}function t0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function n0(t,s){return s}function s0(t,s){if(it){var a=Et.formState;if(a!==null){e:{var o=Ge;if(it){if(At){t:{for(var h=At,m=os;h.nodeType!==8;){if(!m){h=null;break t}if(h=us(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){At=us(h.nextSibling),o=h.data==="F!";break e}}tr(o)}o=!1}o&&(s=a[0])}}return a=An(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n0,lastRenderedState:s},a.queue=o,a=w0.bind(null,Ge,o),o.dispatch=a,o=Zh(!1),m=af.bind(null,Ge,!1,o.queue),o=An(),h={state:s,dispatch:null,action:t,pending:null},o.queue=h,a=vw.bind(null,Ge,h,m,a),h.dispatch=a,o.memoizedState=t,[s,a,!1]}function i0(t){var s=Ut();return r0(s,vt,t)}function r0(t,s,a){if(s=Xh(t,s,n0)[0],t=bu(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=So(s)}catch(v){throw v===tl?uu:v}else o=s;s=Ut();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Ge.flags|=2048,al(9,{destroy:void 0},bw.bind(null,h,a),null)),[o,m,t]}function bw(t,s){t.action=s}function a0(t){var s=Ut(),a=vt;if(a!==null)return r0(s,a,t);Ut(),s=s.memoizedState,a=Ut();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function al(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=xu(),Ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function l0(){return Ut().memoizedState}function _u(t,s,a,o){var h=An();Ge.flags|=t,h.memoizedState=al(1|s,{destroy:void 0},a,o===void 0?null:o)}function wu(t,s,a,o){var h=Ut();o=o===void 0?null:o;var m=h.memoizedState.inst;vt!==null&&o!==null&&Fh(o,vt.memoizedState.deps)?h.memoizedState=al(s,m,a,o):(Ge.flags|=t,h.memoizedState=al(1|s,m,a,o))}function o0(t,s){_u(8390656,8,t,s)}function ef(t,s){wu(2048,8,t,s)}function _w(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=xu(),Ge.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function c0(t){var s=Ut().memoizedState;return _w({ref:s,nextImpl:t}),function(){if((dt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function u0(t,s){return wu(4,2,t,s)}function d0(t,s){return wu(4,4,t,s)}function h0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function f0(t,s,a){a=a!=null?a.concat([t]):null,wu(4,4,h0.bind(null,s,t),a)}function tf(){}function m0(t,s){var a=Ut();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Fh(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function p0(t,s){var a=Ut();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Fh(s,o[1]))return o[0];if(o=t(),ma){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[o,s],o}function nf(t,s,a){return a===void 0||(xi&1073741824)!==0&&(Je&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=gy(),Ge.lanes|=t,ur|=t,a)}function g0(t,s,a,o){return qn(a,s)?a:sl.current!==null?(t=nf(t,a,o),qn(t,s)||(Qt=!0),t):(xi&42)===0||(xi&1073741824)!==0&&(Je&261930)===0?(Qt=!0,t.memoizedState=a):(t=gy(),Ge.lanes|=t,ur|=t,s)}function y0(t,s,a,o,h){var m=pe.p;pe.p=m!==0&&8>m?m:8;var v=K.T,w={};K.T=w,af(t,!1,s,a);try{var V=h(),$=K.S;if($!==null&&$(w,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var se=gw(V,o);No(t,s,se,Qn(t))}else No(t,s,o,Qn(t))}catch(ue){No(t,s,{then:function(){},status:"rejected",reason:ue},Qn())}finally{pe.p=m,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function ww(){}function sf(t,s,a,o){if(t.tag!==5)throw Error(r(476));var h=x0(t).queue;y0(t,h,s,F,a===null?ww:function(){return v0(t),a(o)})}function x0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:F},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function v0(t){var s=x0(t);s.next===null&&(s=t.alternate.memoizedState),No(t,s.next.queue,{},Qn())}function rf(){return fn(qo)}function b0(){return Ut().memoizedState}function _0(){return Ut().memoizedState}function Ew(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Qn();t=ir(a);var o=rr(s,t,a);o!==null&&(Vn(o,s,a),_o(o,s,a)),s={cache:Dh()},t.payload=s;return}s=s.return}}function Tw(t,s,a){var o=Qn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?E0(s,a):(a=wh(t,s,a,o),a!==null&&(Vn(a,t,o),T0(a,s,o)))}function w0(t,s,a){var o=Qn();No(t,s,a,o)}function No(t,s,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))E0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,qn(w,v))return su(t,s,h,0),Et===null&&nu(),!1}catch{}finally{}if(a=wh(t,s,h,o),a!==null)return Vn(a,t,o),T0(a,s,o),!0}return!1}function af(t,s,a,o){if(o={lane:2,revertLane:Pf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(s)throw Error(r(479))}else s=wh(t,a,o,2),s!==null&&Vn(s,t,2)}function Eu(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function E0(t,s){il=gu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function T0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Yl(t,a)}}var Ao={readContext:fn,use:vu,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Ao.useEffectEvent=Ot;var S0={readContext:fn,use:vu,useCallback:function(t,s){return An().memoizedState=[t,s===void 0?null:s],t},useContext:fn,useEffect:o0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,_u(4194308,4,h0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return _u(4194308,4,t,s)},useInsertionEffect:function(t,s){_u(4,2,t,s)},useMemo:function(t,s){var a=An();s=s===void 0?null:s;var o=t();if(ma){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=An();if(a!==void 0){var h=a(s);if(ma){un(!0);try{a(s)}finally{un(!1)}}}else h=s;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Tw.bind(null,Ge,t),[o.memoizedState,t]},useRef:function(t){var s=An();return t={current:t},s.memoizedState=t},useState:function(t){t=Zh(t);var s=t.queue,a=w0.bind(null,Ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:tf,useDeferredValue:function(t,s){var a=An();return nf(a,t,s)},useTransition:function(){var t=Zh(!1);return t=y0.bind(null,Ge,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ge,h=An();if(it){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Et===null)throw Error(r(349));(Je&127)!==0||Kg(o,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,o0($g.bind(null,o,m,t),[t]),o.flags|=2048,al(9,{destroy:void 0},Yg.bind(null,o,m,a,s),null),a},useId:function(){var t=An(),s=Et.identifierPrefix;if(it){var a=Ws,o=Xs;a=(o&~(1<<32-wt(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=yu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=yw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:rf,useFormState:s0,useActionState:s0,useOptimistic:function(t){var s=An();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=af.bind(null,Ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:Qh,useCacheRefresh:function(){return An().memoizedState=Ew.bind(null,Ge)},useEffectEvent:function(t){var s=An(),a={impl:t};return s.memoizedState=a,function(){if((dt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},lf={readContext:fn,use:vu,useCallback:m0,useContext:fn,useEffect:ef,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:p0,useReducer:bu,useRef:l0,useState:function(){return bu(vi)},useDebugValue:tf,useDeferredValue:function(t,s){var a=Ut();return g0(a,vt.memoizedState,t,s)},useTransition:function(){var t=bu(vi)[0],s=Ut().memoizedState;return[typeof t=="boolean"?t:So(t),s]},useSyncExternalStore:Gg,useId:b0,useHostTransitionStatus:rf,useFormState:i0,useActionState:i0,useOptimistic:function(t,s){var a=Ut();return Wg(a,vt,t,s)},useMemoCache:Qh,useCacheRefresh:_0};lf.useEffectEvent=c0;var N0={readContext:fn,use:vu,useCallback:m0,useContext:fn,useEffect:ef,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:p0,useReducer:Wh,useRef:l0,useState:function(){return Wh(vi)},useDebugValue:tf,useDeferredValue:function(t,s){var a=Ut();return vt===null?nf(a,t,s):g0(a,vt.memoizedState,t,s)},useTransition:function(){var t=Wh(vi)[0],s=Ut().memoizedState;return[typeof t=="boolean"?t:So(t),s]},useSyncExternalStore:Gg,useId:b0,useHostTransitionStatus:rf,useFormState:a0,useActionState:a0,useOptimistic:function(t,s){var a=Ut();return vt!==null?Wg(a,vt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qh,useCacheRefresh:_0};N0.useEffectEvent=c0;function of(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cf={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Qn(),h=ir(o);h.payload=s,a!=null&&(h.callback=a),s=rr(t,h,o),s!==null&&(Vn(s,t,o),_o(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Qn(),h=ir(o);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=rr(t,h,o),s!==null&&(Vn(s,t,o),_o(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Qn(),o=ir(a);o.tag=2,s!=null&&(o.callback=s),s=rr(t,o,a),s!==null&&(Vn(s,t,a),_o(s,t,a))}};function A0(t,s,a,o,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!fo(a,o)||!fo(h,m):!0}function j0(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&cf.enqueueReplaceState(s,s.state,null)}function pa(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function C0(t){tu(t)}function R0(t){console.error(t)}function I0(t){tu(t)}function Tu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function k0(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,s,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){Tu(t,s)},a}function D0(t){return t=ir(t),t.tag=3,t}function M0(t,s,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;t.payload=function(){return h(m)},t.callback=function(){k0(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){k0(s,a,o),typeof h!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function Sw(t,s,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Za(s,a,h,!0),a=Gn.current,a!==null){switch(a.tag){case 31:case 13:return cs===null?Vu():a.alternate===null&&Vt===0&&(Vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===du?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Of(t,o,h)),!1;case 22:return a.flags|=65536,o===du?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Of(t,o,h)),!1}throw Error(r(435,a.tag))}return Of(t,o,h),Vu(),!1}if(it)return s=Gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==jh&&(t=Error(r(422),{cause:o}),go(rs(t,a)))):(o!==jh&&(s=Error(r(423),{cause:o}),go(rs(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=rs(o,a),h=uf(t.stateNode,o,h),Uh(t,h),Vt!==4&&(Vt=2)),!1;var m=Error(r(520),{cause:o});if(m=rs(m,a),Oo===null?Oo=[m]:Oo.push(m),Vt!==4&&(Vt=2),s===null)return!0;o=rs(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=uf(a.stateNode,o,t),Uh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(dr===null||!dr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=D0(h),M0(h,t,a,o),Uh(a,h),!1}a=a.return}while(a!==null);return!1}var df=Error(r(461)),Qt=!1;function mn(t,s,a,o){s.child=t===null?Pg(s,null,a,o):fa(s,t.child,a,o)}function O0(t,s,a,o,h){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var w in o)w!=="ref"&&(v[w]=o[w])}else v=o;return ca(s),o=Gh(t,s,a,v,m,h),w=Kh(),t!==null&&!Qt?(Yh(t,s,h),bi(t,s,h)):(it&&w&&Nh(s),s.flags|=1,mn(t,s,o,h),s.child)}function V0(t,s,a,o,h){if(t===null){var m=a.type;return typeof m=="function"&&!Eh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,L0(t,s,m,o,h)):(t=ru(a.type,null,o,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!vf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:fo,a(v,o)&&t.ref===s.ref)return bi(t,s,h)}return s.flags|=1,t=mi(m,o),t.ref=s.ref,t.return=s,s.child=t}function L0(t,s,a,o,h){if(t!==null){var m=t.memoizedProps;if(fo(m,o)&&t.ref===s.ref)if(Qt=!1,s.pendingProps=o=m,vf(t,h))(t.flags&131072)!==0&&(Qt=!0);else return s.lanes=t.lanes,bi(t,s,h)}return hf(t,s,a,o,h)}function P0(t,s,a,o){var h=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~m}else o=0,s.child=null;return U0(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(s,m!==null?m.cachePool:null),m!==null?Bg(s,m):Bh(),Hg(s);else return o=s.lanes=536870912,U0(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(cu(s,m.cachePool),Bg(s,m),lr(),s.memoizedState=null):(t!==null&&cu(s,null),Bh(),lr());return mn(t,s,h,a),s.child}function jo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function U0(t,s,a,o,h){var m=Oh();return m=m===null?null:{parent:Yt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&cu(s,null),Bh(),Hg(s),t!==null&&Za(t,s,o,!0),s.childLanes=h,null}function Su(t,s){return s=Au({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function z0(t,s,a){return fa(s,t.child,null,a),t=Su(s,s.pendingProps),t.flags|=2,Kn(s),s.memoizedState=null,t}function Nw(t,s,a){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(it){if(o.mode==="hidden")return t=Su(s,o),s.lanes=536870912,jo(null,t);if(qh(s),(t=At)?(t=Zy(t,os),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},a=Eg(t),a.return=s,s.child=a,hn=s,At=null)):t=null,t===null)throw tr(s);return s.lanes=536870912,null}return Su(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(qh(s),h)if(s.flags&256)s.flags&=-257,s=z0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Qt||Za(t,s,a,!1),h=(a&t.childLanes)!==0,Qt||h){if(o=Et,o!==null&&(v=$l(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ra(t,v),Vn(o,t,v),df;Vu(),s=z0(t,s,a)}else t=m.treeContext,At=us(v.nextSibling),hn=s,it=!0,er=null,os=!1,t!==null&&Ng(s,t),s=Su(s,o),s.flags|=4096;return s}return t=mi(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Nu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function hf(t,s,a,o,h){return ca(s),a=Gh(t,s,a,o,void 0,h),o=Kh(),t!==null&&!Qt?(Yh(t,s,h),bi(t,s,h)):(it&&o&&Nh(s),s.flags|=1,mn(t,s,a,h),s.child)}function B0(t,s,a,o,h,m){return ca(s),s.updateQueue=null,a=Fg(s,o,a,h),qg(t),o=Kh(),t!==null&&!Qt?(Yh(t,s,m),bi(t,s,m)):(it&&o&&Nh(s),s.flags|=1,mn(t,s,a,m),s.child)}function H0(t,s,a,o,h){if(ca(s),s.stateNode===null){var m=$a,v=a.contextType;typeof v=="object"&&v!==null&&(m=fn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Lh(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?fn(v):$a,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(of(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&cf.enqueueReplaceState(m,m.state,null),Eo(s,o,m,h),wo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,V=pa(a,w);m.props=V;var $=m.context,se=a.contextType;v=$a,typeof se=="object"&&se!==null&&(v=fn(se));var ue=a.getDerivedStateFromProps;se=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||$!==v)&&j0(s,m,o,v),sr=!1;var Q=s.memoizedState;m.state=Q,Eo(s,o,m,h),wo(),$=s.memoizedState,w||Q!==$||sr?(typeof ue=="function"&&(of(s,a,ue,o),$=s.memoizedState),(V=sr||A0(s,a,V,o,Q,$,v))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=$),m.props=o,m.state=$,m.context=v,o=V):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Ph(t,s),v=s.memoizedProps,se=pa(a,v),m.props=se,ue=s.pendingProps,Q=m.context,$=a.contextType,V=$a,typeof $=="object"&&$!==null&&(V=fn($)),w=a.getDerivedStateFromProps,($=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ue||Q!==V)&&j0(s,m,o,V),sr=!1,Q=s.memoizedState,m.state=Q,Eo(s,o,m,h),wo();var ee=s.memoizedState;v!==ue||Q!==ee||sr||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof w=="function"&&(of(s,a,w,o),ee=s.memoizedState),(se=sr||A0(s,a,se,o,Q,ee,V)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ee,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ee,V)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=ee),m.props=o,m.state=ee,m.context=V,o=se):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Nu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=fa(s,t.child,null,h),s.child=fa(s,null,a,h)):mn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=bi(t,s,h),t}function q0(t,s,a,o){return la(),s.flags|=256,mn(t,s,a,o),s.child}var ff={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:kg()}}function pf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=$n),t}function F0(t,s,a){var o=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(it){if(h?ar(s):lr(),(t=At)?(t=Zy(t,os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},a=Eg(t),a.return=s,s.child=a,hn=s,At=null)):t=null,t===null)throw tr(s);return Wf(t)?s.lanes=32:s.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(lr(),h=s.mode,w=Au({mode:"hidden",children:w},h),o=aa(o,h,a,null),w.return=s,o.return=s,w.sibling=o,s.child=w,o=s.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),s.memoizedState=ff,jo(null,o)):(ar(s),gf(s,w))}var V=t.memoizedState;if(V!==null&&(w=V.dehydrated,w!==null)){if(m)s.flags&256?(ar(s),s.flags&=-257,s=yf(t,s,a)):s.memoizedState!==null?(lr(),s.child=t.child,s.flags|=128,s=null):(lr(),w=o.fallback,h=s.mode,o=Au({mode:"visible",children:o.children},h),w=aa(w,h,a,null),w.flags|=2,o.return=s,w.return=s,o.sibling=w,s.child=o,fa(s,t.child,null,a),o=s.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),s.memoizedState=ff,s=jo(null,o));else if(ar(s),Wf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var $=v.dgst;v=$,o=Error(r(419)),o.stack="",o.digest=v,go({value:o,source:null,stack:null}),s=yf(t,s,a)}else if(Qt||Za(t,s,a,!1),v=(a&t.childLanes)!==0,Qt||v){if(v=Et,v!==null&&(o=$l(v,a),o!==0&&o!==V.retryLane))throw V.retryLane=o,ra(t,o),Vn(v,t,o),df;Xf(w)||Vu(),s=yf(t,s,a)}else Xf(w)?(s.flags|=192,s.child=t.child,s=null):(t=V.treeContext,At=us(w.nextSibling),hn=s,it=!0,er=null,os=!1,t!==null&&Ng(s,t),s=gf(s,o.children),s.flags|=4096);return s}return h?(lr(),w=o.fallback,h=s.mode,V=t.child,$=V.sibling,o=mi(V,{mode:"hidden",children:o.children}),o.subtreeFlags=V.subtreeFlags&65011712,$!==null?w=mi($,w):(w=aa(w,h,a,null),w.flags|=2),w.return=s,o.return=s,o.sibling=w,s.child=o,jo(null,o),o=s.child,w=t.child.memoizedState,w===null?w=mf(a):(h=w.cachePool,h!==null?(V=Yt._currentValue,h=h.parent!==V?{parent:V,pool:V}:h):h=kg(),w={baseLanes:w.baseLanes|a,cachePool:h}),o.memoizedState=w,o.childLanes=pf(t,v,a),s.memoizedState=ff,jo(t.child,o)):(ar(s),a=t.child,t=a.sibling,a=mi(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function gf(t,s){return s=Au({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Au(t,s){return t=Fn(22,t,null,s),t.lanes=0,t}function yf(t,s,a){return fa(s,t.child,null,a),t=gf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function G0(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Ih(t.return,s,a)}function xf(t,s,a,o,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function K0(t,s,a){var o=s.pendingProps,h=o.revealOrder,m=o.tail;o=o.children;var v=Pt.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,I(Pt,v),mn(t,s,o,a),o=it?po:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G0(t,a,s);else if(t.tag===19)G0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&pu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),xf(s,!1,h,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&pu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}xf(s,!0,a,null,m,o);break;case"together":xf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function bi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ur|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Za(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=mi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=mi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function vf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function Aw(t,s,a){switch(s.tag){case 3:Ne(s,s.stateNode.containerInfo),nr(s,Yt,t.memoizedState.cache),la();break;case 27:case 5:at(s);break;case 4:Ne(s,s.stateNode.containerInfo);break;case 10:nr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,qh(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ar(s),s.flags|=128,null):(a&s.child.childLanes)!==0?F0(t,s,a):(ar(s),t=bi(t,s,a),t!==null?t.sibling:null);ar(s);break;case 19:var h=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Za(t,s,a,!1),o=(a&s.childLanes)!==0),h){if(o)return K0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),I(Pt,Pt.current),o)break;return null;case 22:return s.lanes=0,P0(t,s,a,s.pendingProps);case 24:nr(s,Yt,t.memoizedState.cache)}return bi(t,s,a)}function Y0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Qt=!0;else{if(!vf(t,a)&&(s.flags&128)===0)return Qt=!1,Aw(t,s,a);Qt=(t.flags&131072)!==0}else Qt=!1,it&&(s.flags&1048576)!==0&&Sg(s,po,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=da(s.elementType),s.type=t,typeof t=="function")Eh(t)?(o=pa(t,o),s.tag=1,s=H0(null,s,t,o,a)):(s.tag=0,s=hf(null,s,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===he){s.tag=11,s=O0(null,s,t,o,a);break e}else if(h===j){s.tag=14,s=V0(null,s,t,o,a);break e}}throw s=ie(t)||t,Error(r(306,s,""))}}return s;case 0:return hf(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,h=pa(o,s.pendingProps),H0(t,s,o,h,a);case 3:e:{if(Ne(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;h=m.element,Ph(t,s),Eo(s,o,null,a);var v=s.memoizedState;if(o=v.cache,nr(s,Yt,o),o!==m.cache&&kh(s,[Yt],a,!0),wo(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=q0(t,s,o,a);break e}else if(o!==h){h=rs(Error(r(424)),s),go(h),s=q0(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(At=us(t.firstChild),hn=s,it=!0,er=null,os=!0,a=Pg(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(la(),o===h){s=bi(t,s,a);break e}mn(t,s,o,a)}s=s.child}return s;case 26:return Nu(t,s),t===null?(a=ix(s.type,null,s.pendingProps,null))?s.memoizedState=a:it||(a=s.type,t=s.pendingProps,o=qu(re.current).createElement(a),o[Ft]=s,o[rn]=t,pn(o,a,t),Gt(o),s.stateNode=o):s.memoizedState=ix(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return at(s),t===null&&it&&(o=s.stateNode=tx(s.type,s.pendingProps,re.current),hn=s,os=!0,h=At,pr(s.type)?(Zf=h,At=us(o.firstChild)):At=h),mn(t,s,s.pendingProps.children,a),Nu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&it&&((h=o=At)&&(o=sE(o,s.type,s.pendingProps,os),o!==null?(s.stateNode=o,hn=s,At=us(o.firstChild),os=!1,h=!0):h=!1),h||tr(s)),at(s),h=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Yf(h,m)?o=null:v!==null&&Yf(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Gh(t,s,xw,null,null,a),qo._currentValue=h),Nu(t,s),mn(t,s,o,a),s.child;case 6:return t===null&&it&&((t=a=At)&&(a=iE(a,s.pendingProps,os),a!==null?(s.stateNode=a,hn=s,At=null,t=!0):t=!1),t||tr(s)),null;case 13:return F0(t,s,a);case 4:return Ne(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=fa(s,null,o,a):mn(t,s,o,a),s.child;case 11:return O0(t,s,s.type,s.pendingProps,a);case 7:return mn(t,s,s.pendingProps,a),s.child;case 8:return mn(t,s,s.pendingProps.children,a),s.child;case 12:return mn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,nr(s,s.type,o.value),mn(t,s,o.children,a),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,ca(s),h=fn(h),o=o(h),s.flags|=1,mn(t,s,o,a),s.child;case 14:return V0(t,s,s.type,s.pendingProps,a);case 15:return L0(t,s,s.type,s.pendingProps,a);case 19:return K0(t,s,a);case 31:return Nw(t,s,a);case 22:return P0(t,s,a,s.pendingProps);case 24:return ca(s),o=fn(Yt),t===null?(h=Oh(),h===null&&(h=Et,m=Dh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:o,cache:h},Lh(s),nr(s,Yt,h)):((t.lanes&a)!==0&&(Ph(t,s),Eo(s,null,null,a),wo()),h=t.memoizedState,m=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),nr(s,Yt,o)):(o=m.cache,nr(s,Yt,o),o!==h.cache&&kh(s,[Yt],a,!0))),mn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _i(t){t.flags|=4}function bf(t,s,a,o,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(by())t.flags|=8192;else throw ha=du,Vh}else t.flags&=-16777217}function $0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!cx(s))if(by())t.flags|=8192;else throw ha=du,Vh}function ju(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Mc():536870912,t.lanes|=s,ul|=s)}function Co(t,s){if(!it)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function jt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function jw(t,s,a){var o=s.pendingProps;switch(Ah(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return jt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),yi(Yt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wa(s)?_i(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ch())),jt(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(_i(s),m!==null?(jt(s),$0(s,m)):(jt(s),bf(s,h,null,o,a))):m?m!==t.memoizedState?(_i(s),jt(s),$0(s,m)):(jt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&_i(s),jt(s),bf(s,h,t,o,a)),null;case 27:if(ht(s),a=re.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return jt(s),null}t=A.current,Wa(s)?Ag(s):(t=tx(h,o,a),s.stateNode=t,_i(s))}return jt(s),null;case 5:if(ht(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return jt(s),null}if(m=A.current,Wa(s))Ag(s);else{var v=qu(re.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}m[Ft]=s,m[rn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(pn(m,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&_i(s)}}return jt(s),bf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=re.current,Wa(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,h=hn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Ft]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Fy(t.nodeValue,a)),t||tr(s,!0)}else t=qu(t).createTextNode(o),t[Ft]=s,s.stateNode=t}return jt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Wa(s),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Ft]=s}else la(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),t=!1}else a=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Kn(s),s):(Kn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return jt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Wa(s),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ft]=s}else la(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),h=!1}else h=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Kn(s),s):(Kn(s),null)}return Kn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),ju(s,s.updateQueue),jt(s),null);case 4:return Re(),t===null&&Hf(s.stateNode.containerInfo),jt(s),null;case 10:return yi(s.type),jt(s),null;case 19:if(D(Pt),o=s.memoizedState,o===null)return jt(s),null;if(h=(s.flags&128)!==0,m=o.rendering,m===null)if(h)Co(o,!1);else{if(Vt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=pu(t),m!==null){for(s.flags|=128,Co(o,!1),t=m.updateQueue,s.updateQueue=t,ju(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)wg(a,t),a=a.sibling;return I(Pt,Pt.current&1|2),it&&pi(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&ct()>Du&&(s.flags|=128,h=!0,Co(o,!1),s.lanes=4194304)}else{if(!h)if(t=pu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,ju(s,t),Co(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!it)return jt(s),null}else 2*ct()-o.renderingStartTime>Du&&a!==536870912&&(s.flags|=128,h=!0,Co(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ct(),t.sibling=null,a=Pt.current,I(Pt,h?a&1|2:a&1),it&&pi(s,o.treeForkCount),t):(jt(s),null);case 22:case 23:return Kn(s),Hh(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),a=s.updateQueue,a!==null&&ju(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&D(ua),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),yi(Yt),jt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Cw(t,s){switch(Ah(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return yi(Yt),Re(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ht(s),null;case 31:if(s.memoizedState!==null){if(Kn(s),s.alternate===null)throw Error(r(340));la()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Kn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));la()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return D(Pt),null;case 4:return Re(),null;case 10:return yi(s.type),null;case 22:case 23:return Kn(s),Hh(),t!==null&&D(ua),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return yi(Yt),null;case 25:return null;default:return null}}function Q0(t,s){switch(Ah(s),s.tag){case 3:yi(Yt),Re();break;case 26:case 27:case 5:ht(s);break;case 4:Re();break;case 31:s.memoizedState!==null&&Kn(s);break;case 13:Kn(s);break;case 19:D(Pt);break;case 10:yi(s.type);break;case 22:case 23:Kn(s),Hh(),t!==null&&D(ua);break;case 24:yi(Yt)}}function Ro(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==h)}}catch(w){yt(s,s.return,w)}}function or(t,s,a){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&t)===t){var v=o.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=s;var V=a,$=w;try{$()}catch(se){yt(h,V,se)}}}o=o.next}while(o!==m)}}catch(se){yt(s,s.return,se)}}function X0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{zg(s,a)}catch(o){yt(t,t.return,o)}}}function W0(t,s,a){a.props=pa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){yt(t,s,o)}}function Io(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){yt(t,s,h)}}function Zs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){yt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){yt(t,s,h)}else a.current=null}function Z0(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){yt(t,t.return,h)}}function _f(t,s,a){try{var o=t.stateNode;Ww(o,t.type,a,s),o[rn]=s}catch(h){yt(t,t.return,h)}}function J0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pr(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||J0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vs));else if(o!==4&&(o===27&&pr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ef(t,s,a),t=t.sibling;t!==null;)Ef(t,s,a),t=t.sibling}function Cu(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&pr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,s,a),t=t.sibling;t!==null;)Cu(t,s,a),t=t.sibling}function ey(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);pn(s,o,a),s[Ft]=t,s[rn]=a}catch(m){yt(t,t.return,m)}}var wi=!1,Xt=!1,Tf=!1,ty=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Rw(t,s){if(t=t.containerInfo,Gf=Xu,t=fg(t),gh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,V=-1,$=0,se=0,ue=t,Q=null;t:for(;;){for(var ee;ue!==a||h!==0&&ue.nodeType!==3||(w=v+h),ue!==m||o!==0&&ue.nodeType!==3||(V=v+o),ue.nodeType===3&&(v+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)Q=ue,ue=ee;for(;;){if(ue===t)break t;if(Q===a&&++$===h&&(w=v),Q===m&&++se===o&&(V=v),(ee=ue.nextSibling)!==null)break;ue=Q,Q=ue.parentNode}ue=ee}a=w===-1||V===-1?null:{start:w,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kf={focusedElem:t,selectionRange:a},Xu=!1,ln=s;ln!==null;)if(s=ln,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ln=t;else for(;ln!==null;){switch(s=ln,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var Ae=pa(a.type,h);t=o.getSnapshotBeforeUpdate(Ae,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Oe){yt(a,a.return,Oe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,ln=t;break}ln=s.return}}function ny(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(t,a),o&4&&Ro(5,a);break;case 1:if(Ti(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){yt(a,a.return,v)}else{var h=pa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){yt(a,a.return,v)}}o&64&&X0(a),o&512&&Io(a,a.return);break;case 3:if(Ti(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{zg(t,s)}catch(v){yt(a,a.return,v)}}break;case 27:s===null&&o&4&&ey(a);case 26:case 5:Ti(t,a),s===null&&o&4&&Z0(a),o&512&&Io(a,a.return);break;case 12:Ti(t,a);break;case 31:Ti(t,a),o&4&&ry(t,a);break;case 13:Ti(t,a),o&4&&ay(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Uw.bind(null,a),rE(t,a))));break;case 22:if(o=a.memoizedState!==null||wi,!o){s=s!==null&&s.memoizedState!==null||Xt,h=wi;var m=Xt;wi=o,(Xt=s)&&!m?Si(t,a,(a.subtreeFlags&8772)!==0):Ti(t,a),wi=h,Xt=m}break;case 30:break;default:Ti(t,a)}}function sy(t){var s=t.alternate;s!==null&&(t.alternate=null,sy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ma(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var It=null,kn=!1;function Ei(t,s,a){for(a=a.child;a!==null;)iy(t,s,a),a=a.sibling}function iy(t,s,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(cn,a)}catch{}switch(a.tag){case 26:Xt||Zs(a,s),Ei(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Xt||Zs(a,s);var o=It,h=kn;pr(a.type)&&(It=a.stateNode,kn=!1),Ei(t,s,a),zo(a.stateNode),It=o,kn=h;break;case 5:Xt||Zs(a,s);case 6:if(o=It,h=kn,It=null,Ei(t,s,a),It=o,kn=h,It!==null)if(kn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(a.stateNode)}catch(m){yt(a,s,m)}else try{It.removeChild(a.stateNode)}catch(m){yt(a,s,m)}break;case 18:It!==null&&(kn?(t=It,Xy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xl(t)):Xy(It,a.stateNode));break;case 4:o=It,h=kn,It=a.stateNode.containerInfo,kn=!0,Ei(t,s,a),It=o,kn=h;break;case 0:case 11:case 14:case 15:or(2,a,s),Xt||or(4,a,s),Ei(t,s,a);break;case 1:Xt||(Zs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&W0(a,s,o)),Ei(t,s,a);break;case 21:Ei(t,s,a);break;case 22:Xt=(o=Xt)||a.memoizedState!==null,Ei(t,s,a),Xt=o;break;default:Ei(t,s,a)}}function ry(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(a){yt(s,s.return,a)}}}function ay(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(a){yt(s,s.return,a)}}function Iw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ty),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ty),s;default:throw Error(r(435,t.tag))}}function Ru(t,s){var a=Iw(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var h=zw.bind(null,t,o);o.then(h,h)}})}function Dn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],m=t,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){It=w.stateNode,kn=!1;break e}break;case 5:It=w.stateNode,kn=!1;break e;case 3:case 4:It=w.stateNode.containerInfo,kn=!0;break e}w=w.return}if(It===null)throw Error(r(160));iy(m,v,h),It=null,kn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ly(s,t),s=s.sibling}var Ss=null;function ly(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(s,t),Mn(t),o&4&&(or(3,t,t.return),Ro(3,t),or(5,t,t.return));break;case 1:Dn(s,t),Mn(t),o&512&&(Xt||a===null||Zs(a,a.return)),o&64&&wi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ss;if(Dn(s,t),Mn(t),o&512&&(Xt||a===null||Zs(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ps]||m[Ft]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(o),h.head.insertBefore(m,h.querySelector("head > title"))),pn(m,o,a),m[Ft]=t,Gt(m),o=m;break e;case"link":var v=lx("link","href",h).get(o+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(o),pn(m,o,a),h.head.appendChild(m);break;case"meta":if(v=lx("meta","content",h).get(o+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(o),pn(m,o,a),h.head.appendChild(m);break;default:throw Error(r(468,o))}m[Ft]=t,Gt(m),o=m}t.stateNode=o}else ox(h,t.type,t.stateNode);else t.stateNode=ax(h,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?ox(h,t.type,t.stateNode):ax(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&_f(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(s,t),Mn(t),o&512&&(Xt||a===null||Zs(a,a.return)),a!==null&&o&4&&_f(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(s,t),Mn(t),o&512&&(Xt||a===null||Zs(a,a.return)),t.flags&32){h=t.stateNode;try{In(h,"")}catch(Ae){yt(t,t.return,Ae)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,_f(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Tf=!0);break;case 6:if(Dn(s,t),Mn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Ae){yt(t,t.return,Ae)}}break;case 3:if(Ku=null,h=Ss,Ss=Fu(s.containerInfo),Dn(s,t),Ss=h,Mn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch(Ae){yt(t,t.return,Ae)}Tf&&(Tf=!1,oy(t));break;case 4:o=Ss,Ss=Fu(t.stateNode.containerInfo),Dn(s,t),Mn(t),Ss=o;break;case 12:Dn(s,t),Mn(t);break;case 31:Dn(s,t),Mn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 13:Dn(s,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ku=ct()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 22:h=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,$=wi,se=Xt;if(wi=$||h,Xt=se||V,Dn(s,t),Xt=se,wi=$,Mn(t),o&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||V||wi||Xt||ga(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(m=V.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=V.stateNode;var ue=V.memoizedProps.style,Q=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ae){yt(V,V.return,Ae)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(Ae){yt(V,V.return,Ae)}}}else if(s.tag===18){if(a===null){V=s;try{var ee=V.stateNode;h?Wy(ee,!0):Wy(V.stateNode,!1)}catch(Ae){yt(V,V.return,Ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ru(t,a))));break;case 19:Dn(s,t),Mn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 30:break;case 21:break;default:Dn(s,t),Mn(t)}}function Mn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(J0(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=wf(t);Cu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(In(v,""),a.flags&=-33);var w=wf(t);Cu(t,w,v);break;case 3:case 4:var V=a.stateNode.containerInfo,$=wf(t);Ef(t,$,V);break;default:throw Error(r(161))}}catch(se){yt(t,t.return,se)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function oy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;oy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ti(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ny(t,s.alternate,s),s=s.sibling}function ga(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:or(4,s,s.return),ga(s);break;case 1:Zs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&W0(s,s.return,a),ga(s);break;case 27:zo(s.stateNode);case 26:case 5:Zs(s,s.return),ga(s);break;case 22:s.memoizedState===null&&ga(s);break;case 30:ga(s);break;default:ga(s)}t=t.sibling}}function Si(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Si(h,m,a),Ro(4,m);break;case 1:if(Si(h,m,a),o=m,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){yt(o,o.return,$)}if(o=m,h=o.updateQueue,h!==null){var w=o.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Ug(V[h],w)}catch($){yt(o,o.return,$)}}a&&v&64&&X0(m),Io(m,m.return);break;case 27:ey(m);case 26:case 5:Si(h,m,a),a&&o===null&&v&4&&Z0(m),Io(m,m.return);break;case 12:Si(h,m,a);break;case 31:Si(h,m,a),a&&v&4&&ry(h,m);break;case 13:Si(h,m,a),a&&v&4&&ay(h,m);break;case 22:m.memoizedState===null&&Si(h,m,a),Io(m,m.return);break;case 30:break;default:Si(h,m,a)}s=s.sibling}}function Sf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yo(a))}function Nf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yo(t))}function Ns(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)cy(t,s,a,o),s=s.sibling}function cy(t,s,a,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ns(t,s,a,o),h&2048&&Ro(9,s);break;case 1:Ns(t,s,a,o);break;case 3:Ns(t,s,a,o),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yo(t)));break;case 12:if(h&2048){Ns(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){yt(s,s.return,V)}}else Ns(t,s,a,o);break;case 31:Ns(t,s,a,o);break;case 13:Ns(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?Ns(t,s,a,o):ko(t,s):m._visibility&2?Ns(t,s,a,o):(m._visibility|=2,ll(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Sf(v,s);break;case 24:Ns(t,s,a,o),h&2048&&Nf(s.alternate,s);break;default:Ns(t,s,a,o)}}function ll(t,s,a,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,w=a,V=o,$=v.flags;switch(v.tag){case 0:case 11:case 15:ll(m,v,w,V,h),Ro(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?ll(m,v,w,V,h):ko(m,v):(se._visibility|=2,ll(m,v,w,V,h)),h&&$&2048&&Sf(v.alternate,v);break;case 24:ll(m,v,w,V,h),h&&$&2048&&Nf(v.alternate,v);break;default:ll(m,v,w,V,h)}s=s.sibling}}function ko(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,h=o.flags;switch(o.tag){case 22:ko(a,o),h&2048&&Sf(o.alternate,o);break;case 24:ko(a,o),h&2048&&Nf(o.alternate,o);break;default:ko(a,o)}s=s.sibling}}var Do=8192;function ol(t,s,a){if(t.subtreeFlags&Do)for(t=t.child;t!==null;)uy(t,s,a),t=t.sibling}function uy(t,s,a){switch(t.tag){case 26:ol(t,s,a),t.flags&Do&&t.memoizedState!==null&&yE(a,Ss,t.memoizedState,t.memoizedProps);break;case 5:ol(t,s,a);break;case 3:case 4:var o=Ss;Ss=Fu(t.stateNode.containerInfo),ol(t,s,a),Ss=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Do,Do=16777216,ol(t,s,a),Do=o):ol(t,s,a));break;default:ol(t,s,a)}}function dy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Mo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ln=o,fy(o,t)}dy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hy(t),t=t.sibling}function hy(t){switch(t.tag){case 0:case 11:case 15:Mo(t),t.flags&2048&&or(9,t,t.return);break;case 3:Mo(t);break;case 12:Mo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Iu(t)):Mo(t);break;default:Mo(t)}}function Iu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ln=o,fy(o,t)}dy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:or(8,s,s.return),Iu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Iu(s));break;default:Iu(s)}t=t.sibling}}function fy(t,s){for(;ln!==null;){var a=ln;switch(a.tag){case 0:case 11:case 15:or(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:yo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ln=o;else e:for(a=t;ln!==null;){o=ln;var h=o.sibling,m=o.return;if(sy(o),o===a){ln=null;break e}if(h!==null){h.return=m,ln=h;break e}ln=m}}}var kw={getCacheForType:function(t){var s=fn(Yt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return fn(Yt).controller.signal}},Dw=typeof WeakMap=="function"?WeakMap:Map,dt=0,Et=null,Qe=null,Je=0,gt=0,Yn=null,cr=!1,cl=!1,Af=!1,Ni=0,Vt=0,ur=0,ya=0,jf=0,$n=0,ul=0,Oo=null,On=null,Cf=!1,ku=0,my=0,Du=1/0,Mu=null,dr=null,tn=0,hr=null,dl=null,Ai=0,Rf=0,If=null,py=null,Vo=0,kf=null;function Qn(){return(dt&2)!==0&&Je!==0?Je&-Je:K.T!==null?Pf():Oc()}function gy(){if($n===0)if((Je&536870912)===0||it){var t=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),$n=t}else $n=536870912;return t=Gn.current,t!==null&&(t.flags|=32),$n}function Vn(t,s,a){(t===Et&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(hl(t,0),fr(t,Je,$n,!1)),Gr(t,a),((dt&2)===0||t!==Et)&&(t===Et&&((dt&2)===0&&(ya|=a),Vt===4&&fr(t,Je,$n,!1)),Js(t))}function yy(t,s,a){if((dt&6)!==0)throw Error(r(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||gs(t,s),h=o?Vw(t,s):Mf(t,s,!0),m=o;do{if(h===0){cl&&!o&&fr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!Mw(a)){h=Mf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=t;h=Oo;var V=w.current.memoizedState.isDehydrated;if(V&&(hl(w,v).flags|=256),v=Mf(w,v,!1),v!==2){if(Af&&!V){w.errorRecoveryDisabledLanes|=m,ya|=m,h=4;break e}m=On,On=h,m!==null&&(On===null?On=m:On.push.apply(On,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){hl(t,0),fr(t,s,0,!0);break}e:{switch(o=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:fr(o,s,$n,!cr);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=ku+300-ct(),10<h)){if(fr(o,s,$n,!cr),Os(o,0,!0)!==0)break e;Ai=s,o.timeoutHandle=$y(xy.bind(null,o,a,On,Mu,Cf,s,$n,ya,ul,cr,m,"Throttled",-0,0),h);break e}xy(o,a,On,Mu,Cf,s,$n,ya,ul,cr,m,null,-0,0)}}break}while(!0);Js(t)}function xy(t,s,a,o,h,m,v,w,V,$,se,ue,Q,ee){if(t.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vs},uy(s,m,ue);var Ae=(m&62914560)===m?ku-ct():(m&4194048)===m?my-ct():0;if(Ae=xE(ue,Ae),Ae!==null){Ai=m,t.cancelPendingCommit=Ae(Ny.bind(null,t,s,m,a,o,h,v,w,V,se,ue,null,Q,ee)),fr(t,m,v,!$);return}}Ny(t,s,m,a,o,h,v,w,V)}function Mw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],m=h.getSnapshot;h=h.value;try{if(!qn(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fr(t,s,a,o){s&=~jf,s&=~ya,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var h=s;0<h;){var m=31-wt(h),v=1<<m;o[m]=-1,h&=~v}a!==0&&Kr(t,a,s)}function Ou(){return(dt&6)===0?(Lo(0),!1):!0}function Df(){if(Qe!==null){if(gt===0)var t=Qe.return;else t=Qe,gi=oa=null,$h(t),nl=null,vo=0,t=Qe;for(;t!==null;)Q0(t.alternate,t),t=t.return;Qe=null}}function hl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,eE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ai=0,Df(),Et=t,Qe=a=mi(t.current,null),Je=s,gt=0,Yn=null,cr=!1,cl=gs(t,s),Af=!1,ul=$n=jf=ya=ur=Vt=0,On=Oo=null,Cf=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var h=31-wt(o),m=1<<h;s|=t[h],o&=~m}return Ni=s,nu(),a}function vy(t,s){Ge=null,K.H=Ao,s===tl||s===uu?(s=Og(),gt=3):s===Vh?(s=Og(),gt=4):gt=s===df?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yn=s,Qe===null&&(Vt=1,Tu(t,rs(s,t.current)))}function by(){var t=Gn.current;return t===null?!0:(Je&4194048)===Je?cs===null:(Je&62914560)===Je||(Je&536870912)!==0?t===cs:!1}function _y(){var t=K.H;return K.H=Ao,t===null?Ao:t}function wy(){var t=K.A;return K.A=kw,t}function Vu(){Vt=4,cr||(Je&4194048)!==Je&&Gn.current!==null||(cl=!0),(ur&134217727)===0&&(ya&134217727)===0||Et===null||fr(Et,Je,$n,!1)}function Mf(t,s,a){var o=dt;dt|=2;var h=_y(),m=wy();(Et!==t||Je!==s)&&(Mu=null,hl(t,s)),s=!1;var v=Vt;e:do try{if(gt!==0&&Qe!==null){var w=Qe,V=Yn;switch(gt){case 8:Df(),v=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(s=!0);var $=gt;if(gt=0,Yn=null,fl(t,w,V,$),a&&cl){v=0;break e}break;default:$=gt,gt=0,Yn=null,fl(t,w,V,$)}}Ow(),v=Vt;break}catch(se){vy(t,se)}while(!0);return s&&t.shellSuspendCounter++,gi=oa=null,dt=o,K.H=h,K.A=m,Qe===null&&(Et=null,Je=0,nu()),v}function Ow(){for(;Qe!==null;)Ey(Qe)}function Vw(t,s){var a=dt;dt|=2;var o=_y(),h=wy();Et!==t||Je!==s?(Mu=null,Du=ct()+500,hl(t,s)):cl=gs(t,s);e:do try{if(gt!==0&&Qe!==null){s=Qe;var m=Yn;t:switch(gt){case 1:gt=0,Yn=null,fl(t,s,m,1);break;case 2:case 9:if(Dg(m)){gt=0,Yn=null,Ty(s);break}s=function(){gt!==2&&gt!==9||Et!==t||(gt=7),Js(t)},m.then(s,s);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Dg(m)?(gt=0,Yn=null,Ty(s)):(gt=0,Yn=null,fl(t,s,m,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var w=Qe;if(v?cx(v):w.stateNode.complete){gt=0,Yn=null;var V=w.sibling;if(V!==null)Qe=V;else{var $=w.return;$!==null?(Qe=$,Lu($)):Qe=null}break t}}gt=0,Yn=null,fl(t,s,m,5);break;case 6:gt=0,Yn=null,fl(t,s,m,6);break;case 8:Df(),Vt=6;break e;default:throw Error(r(462))}}Lw();break}catch(se){vy(t,se)}while(!0);return gi=oa=null,K.H=o,K.A=h,dt=a,Qe!==null?0:(Et=null,Je=0,nu(),Vt)}function Lw(){for(;Qe!==null&&!ke();)Ey(Qe)}function Ey(t){var s=Y0(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,s===null?Lu(t):Qe=s}function Ty(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=B0(a,s,s.pendingProps,s.type,void 0,Je);break;case 11:s=B0(a,s,s.pendingProps,s.type.render,s.ref,Je);break;case 5:$h(s);default:Q0(a,s),s=Qe=wg(s,Ni),s=Y0(a,s,Ni)}t.memoizedProps=t.pendingProps,s===null?Lu(t):Qe=s}function fl(t,s,a,o){gi=oa=null,$h(s),nl=null,vo=0;var h=s.return;try{if(Sw(t,h,s,a,Je)){Vt=1,Tu(t,rs(a,t.current)),Qe=null;return}}catch(m){if(h!==null)throw Qe=h,m;Vt=1,Tu(t,rs(a,t.current)),Qe=null;return}s.flags&32768?(it||o===1?t=!0:cl||(Je&536870912)!==0?t=!1:(cr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Gn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Sy(s,t)):Lu(s)}function Lu(t){var s=t;do{if((s.flags&32768)!==0){Sy(s,cr);return}t=s.return;var a=jw(s.alternate,s,Ni);if(a!==null){Qe=a;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=t}while(s!==null);Vt===0&&(Vt=5)}function Sy(t,s){do{var a=Cw(t.alternate,t);if(a!==null){a.flags&=32767,Qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=a}while(t!==null);Vt=6,Qe=null}function Ny(t,s,a,o,h,m,v,w,V){t.cancelPendingCommit=null;do Pu();while(tn!==0);if((dt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=_h,hh(t,a,m,v,w,V),t===Et&&(Qe=Et=null,Je=0),dl=s,hr=t,Ai=a,Rf=m,If=h,py=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bw(bn,function(){return Iy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=pe.p,pe.p=2,v=dt,dt|=4;try{Rw(t,s,a)}finally{dt=v,pe.p=h,K.T=o}}tn=1,Ay(),jy(),Cy()}}function Ay(){if(tn===1){tn=0;var t=hr,s=dl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=pe.p;pe.p=2;var h=dt;dt|=4;try{ly(s,t);var m=Kf,v=fg(t.containerInfo),w=m.focusedElem,V=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&hg(w.ownerDocument.documentElement,w)){if(V!==null&&gh(w)){var $=V.start,se=V.end;if(se===void 0&&(se=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(se,w.value.length);else{var ue=w.ownerDocument||document,Q=ue&&ue.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),Ae=w.textContent.length,Oe=Math.min(V.start,Ae),_t=V.end===void 0?Oe:Math.min(V.end,Ae);!ee.extend&&Oe>_t&&(v=_t,_t=Oe,Oe=v);var B=dg(w,Oe),U=dg(w,_t);if(B&&U&&(ee.rangeCount!==1||ee.anchorNode!==B.node||ee.anchorOffset!==B.offset||ee.focusNode!==U.node||ee.focusOffset!==U.offset)){var Y=ue.createRange();Y.setStart(B.node,B.offset),ee.removeAllRanges(),Oe>_t?(ee.addRange(Y),ee.extend(U.node,U.offset)):(Y.setEnd(U.node,U.offset),ee.addRange(Y))}}}}for(ue=[],ee=w;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ue.length;w++){var ae=ue[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Xu=!!Gf,Kf=Gf=null}finally{dt=h,pe.p=o,K.T=a}}t.current=s,tn=2}}function jy(){if(tn===2){tn=0;var t=hr,s=dl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=pe.p;pe.p=2;var h=dt;dt|=4;try{ny(t,s.alternate,s)}finally{dt=h,pe.p=o,K.T=a}}tn=3}}function Cy(){if(tn===4||tn===3){tn=0,Ze();var t=hr,s=dl,a=Ai,o=py;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,dl=hr=null,Ry(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(dr=null),ui(a),s=s.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(cn,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=K.T,h=pe.p,pe.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var w=o[v];m(w.value,{componentStack:w.stack})}}finally{K.T=s,pe.p=h}}(Ai&3)!==0&&Pu(),Js(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===kf?Vo++:(Vo=0,kf=t):Vo=0,Lo(0)}}function Ry(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,yo(s)))}function Pu(){return Ay(),jy(),Cy(),Iy()}function Iy(){if(tn!==5)return!1;var t=hr,s=Rf;Rf=0;var a=ui(Ai),o=K.T,h=pe.p;try{pe.p=32>a?32:a,K.T=null,a=If,If=null;var m=hr,v=Ai;if(tn=0,dl=hr=null,Ai=0,(dt&6)!==0)throw Error(r(331));var w=dt;if(dt|=4,hy(m.current),cy(m,m.current,v,a),dt=w,Lo(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(cn,m)}catch{}return!0}finally{pe.p=h,K.T=o,Ry(t,s)}}function ky(t,s,a){s=rs(a,s),s=uf(t.stateNode,s,2),t=rr(t,s,2),t!==null&&(Gr(t,2),Js(t))}function yt(t,s,a){if(t.tag===3)ky(t,t,a);else for(;s!==null;){if(s.tag===3){ky(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(dr===null||!dr.has(o))){t=rs(a,t),a=D0(2),o=rr(s,a,2),o!==null&&(M0(a,o,s,t),Gr(o,2),Js(o));break}}s=s.return}}function Of(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Dw;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(a)||(Af=!0,h.add(a),t=Pw.bind(null,t,s,a),s.then(t,t))}function Pw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(Je&a)===a&&(Vt===4||Vt===3&&(Je&62914560)===Je&&300>ct()-ku?(dt&2)===0&&hl(t,0):jf|=a,ul===Je&&(ul=0)),Js(t)}function Dy(t,s){s===0&&(s=Mc()),t=ra(t,s),t!==null&&(Gr(t,s),Js(t))}function Uw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Dy(t,a)}function zw(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),Dy(t,a)}function Bw(t,s){return We(t,s)}var Uu=null,ml=null,Vf=!1,zu=!1,Lf=!1,mr=0;function Js(t){t!==ml&&t.next===null&&(ml===null?Uu=ml=t:ml=ml.next=t),zu=!0,Vf||(Vf=!0,qw())}function Lo(t,s){if(!Lf&&zu){Lf=!0;do for(var a=!1,o=Uu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var m=0;else{var v=o.suspendedLanes,w=o.pingedLanes;m=(1<<31-wt(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ly(o,m))}else m=Je,m=Os(o,o===Et?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||gs(o,m)||(a=!0,Ly(o,m));o=o.next}while(a);Lf=!1}}function Hw(){My()}function My(){zu=Vf=!1;var t=0;mr!==0&&Jw()&&(t=mr);for(var s=ct(),a=null,o=Uu;o!==null;){var h=o.next,m=Oy(o,s);m===0?(o.next=null,a===null?Uu=h:a.next=h,h===null&&(ml=a)):(a=o,(t!==0||(m&3)!==0)&&(zu=!0)),o=h}tn!==0&&tn!==5||Lo(t),mr!==0&&(mr=0)}function Oy(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-wt(m),w=1<<v,V=h[v];V===-1?((w&a)===0||(w&o)!==0)&&(h[v]=dh(w,s)):V<=s&&(t.expiredLanes|=w),m&=~w}if(s=Et,a=Je,a=Os(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&te(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||gs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&te(o),ui(a)){case 2:case 8:a=St;break;case 32:a=bn;break;case 268435456:a=Hi;break;default:a=bn}return o=Vy.bind(null,t),a=We(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&te(o),t.callbackPriority=2,t.callbackNode=null,2}function Vy(t,s){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pu()&&t.callbackNode!==a)return null;var o=Je;return o=Os(t,t===Et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(yy(t,o,s),Oy(t,ct()),t.callbackNode!=null&&t.callbackNode===a?Vy.bind(null,t):null)}function Ly(t,s){if(Pu())return null;yy(t,s,!0)}function qw(){tE(function(){(dt&6)!==0?We(ze,Hw):My()})}function Pf(){if(mr===0){var t=Ja;t===0&&(t=Ds,Ds<<=1,(Ds&261888)===0&&(Ds=256)),mr=t}return mr}function Py(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function Uy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Fw(t,s,a,o,h){if(s==="submit"&&a&&a.stateNode===h){var m=Py((h[rn]||null).action),v=o.submitter;v&&(s=(s=v[rn]||null)?Py(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Ks("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(mr!==0){var V=v?Uy(h,v):new FormData(h);sf(a,{pending:!0,data:V,method:h.method,action:m},null,V)}}else typeof m=="function"&&(w.preventDefault(),V=v?Uy(h,v):new FormData(h),sf(a,{pending:!0,data:V,method:h.method,action:m},m,V))},currentTarget:h}]})}}for(var Uf=0;Uf<bh.length;Uf++){var zf=bh[Uf],Gw=zf.toLowerCase(),Kw=zf[0].toUpperCase()+zf.slice(1);Ts(Gw,"on"+Kw)}Ts(gg,"onAnimationEnd"),Ts(yg,"onAnimationIteration"),Ts(xg,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(ow,"onTransitionRun"),Ts(cw,"onTransitionStart"),Ts(uw,"onTransitionCancel"),Ts(vg,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Po));function zy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var w=o[v],V=w.instance,$=w.currentTarget;if(w=w.listener,V!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=$;try{m(h)}catch(se){tu(se)}h.currentTarget=null,m=V}else for(v=0;v<o.length;v++){if(w=o[v],V=w.instance,$=w.currentTarget,w=w.listener,V!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=$;try{m(h)}catch(se){tu(se)}h.currentTarget=null,m=V}}}}function Xe(t,s){var a=s[Da];a===void 0&&(a=s[Da]=new Set);var o=t+"__bubble";a.has(o)||(By(s,t,2,!1),a.add(o))}function Bf(t,s,a){var o=0;s&&(o|=4),By(a,t,o,s)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Hf(t){if(!t[Bu]){t[Bu]=!0,Ql.forEach(function(a){a!=="selectionchange"&&(Yw.has(a)||Bf(a,!1,t),Bf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Bu]||(s[Bu]=!0,Bf("selectionchange",!1,s))}}function By(t,s,a,o){switch(gx(s)){case 2:var h=_E;break;case 8:h=wE;break;default:h=sm}a=h.bind(null,s,a,t),h=void 0,!Wr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function qf(t,s,a,o,h){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var w=o.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=o.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Us(w),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){o=m=v;continue e}w=w.parentNode}}o=o.return}Qi(function(){var $=m,se=ts(a),ue=[];e:{var Q=bg.get(t);if(Q!==void 0){var ee=Ks,Ae=t;switch(t){case"keypress":if(Jr(a)===0)break e;case"keydown":case"keyup":ee=Zc;break;case"focusin":Ae="focus",ee=ta;break;case"focusout":Ae="blur",ee=ta;break;case"beforeblur":case"afterblur":ee=ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case gg:case yg:case xg:ee=Gc;break;case vg:ee=S;break;case"scroll":case"scrollend":ee=lo;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=fi;break;case"toggle":case"beforetoggle":ee=Fe}var Oe=(s&4)!==0,_t=!Oe&&(t==="scroll"||t==="scrollend"),B=Oe?Q!==null?Q+"Capture":null:Q;Oe=[];for(var U=$,Y;U!==null;){var ae=U;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||B===null||(ae=bs(U,B),ae!=null&&Oe.push(Uo(U,ae,Y))),_t)break;U=U.return}0<Oe.length&&(Q=new ee(Q,Ae,null,a,se),ue.push({event:Q,listeners:Oe}))}}if((s&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",Q&&a!==io&&(Ae=a.relatedTarget||a.fromElement)&&(Us(Ae)||Ae[Ls]))break e;if((ee||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(Ae=a.relatedTarget||a.toElement,ee=$,Ae=Ae?Us(Ae):null,Ae!==null&&(_t=u(Ae),Oe=Ae.tag,Ae!==_t||Oe!==5&&Oe!==27&&Oe!==6)&&(Ae=null)):(ee=null,Ae=$),ee!==Ae)){if(Oe=oo,ae="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=fi,ae="onPointerLeave",B="onPointerEnter",U="pointer"),_t=ee==null?Q:Bn(ee),Y=Ae==null?Q:Bn(Ae),Q=new Oe(ae,U+"leave",ee,a,se),Q.target=_t,Q.relatedTarget=Y,ae=null,Us(se)===$&&(Oe=new Oe(B,U+"enter",Ae,a,se),Oe.target=Y,Oe.relatedTarget=_t,ae=Oe),_t=ae,ee&&Ae)t:{for(Oe=$w,B=ee,U=Ae,Y=0,ae=B;ae;ae=Oe(ae))Y++;ae=0;for(var De=U;De;De=Oe(De))ae++;for(;0<Y-ae;)B=Oe(B),Y--;for(;0<ae-Y;)U=Oe(U),ae--;for(;Y--;){if(B===U||U!==null&&B===U.alternate){Oe=B;break t}B=Oe(B),U=Oe(U)}Oe=null}else Oe=null;ee!==null&&Hy(ue,Q,ee,Oe,!1),Ae!==null&&_t!==null&&Hy(ue,_t,Ae,Oe,!0)}}e:{if(Q=$?Bn($):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var lt=rg;else if(sg(Q))if(ag)lt=rw;else{lt=sw;var Ce=nw}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&La($.elementType)&&(lt=rg):lt=iw;if(lt&&(lt=lt(t,$))){ig(ue,lt,a,se);break e}Ce&&Ce(t,Q,$),t==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&to(Q,"number",Q.value)}switch(Ce=$?Bn($):window,t){case"focusin":(sg(Ce)||Ce.contentEditable==="true")&&(Ga=Ce,yh=$,mo=null);break;case"focusout":mo=yh=Ga=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,mg(ue,a,se);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":mg(ue,a,se)}var Ke;if(ut)e:{switch(t){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Fa?na(t,a)&&(et="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(et="onCompositionStart");et&&(Qs&&a.locale!=="ko"&&(Fa||et!=="onCompositionStart"?et==="onCompositionEnd"&&Fa&&(Ke=ao()):(Gs=se,ro="value"in Gs?Gs.value:Gs.textContent,Fa=!0)),Ce=Hu($,et),0<Ce.length&&(et=new $s(et,t,null,a,se),ue.push({event:et,listeners:Ce}),Ke?et.data=Ke:(Ke=qa(a),Ke!==null&&(et.data=Ke)))),(Ke=ss?Z1(t,a):J1(t,a))&&(et=Hu($,"onBeforeInput"),0<et.length&&(Ce=new $s("onBeforeInput","beforeinput",null,a,se),ue.push({event:Ce,listeners:et}),Ce.data=Ke)),Fw(ue,t,$,a,se)}zy(ue,s)})}function Uo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Hu(t,s){for(var a=s+"Capture",o=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=bs(t,a),h!=null&&o.unshift(Uo(t,h,m)),h=bs(t,s),h!=null&&o.push(Uo(t,h,m))),t.tag===3)return o;t=t.return}return[]}function $w(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Hy(t,s,a,o,h){for(var m=s._reactName,v=[];a!==null&&a!==o;){var w=a,V=w.alternate,$=w.stateNode;if(w=w.tag,V!==null&&V===o)break;w!==5&&w!==26&&w!==27||$===null||(V=$,h?($=bs(a,m),$!=null&&v.unshift(Uo(a,$,V))):h||($=bs(a,m),$!=null&&v.push(Uo(a,$,V)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Qw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function qy(t){return(typeof t=="string"?t:""+t).replace(Qw,`
`).replace(Xw,"")}function Fy(t,s){return s=qy(s),qy(t)===s}function bt(t,s,a,o,h,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||In(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&In(t,""+o);break;case"className":Hn(t,"class",o);break;case"tabIndex":Hn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,a,o);break;case"style":so(t,o,m);break;case"data":if(s!=="object"){Hn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Pa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&bt(t,s,"name",h.name,h,null),bt(t,s,"formEncType",h.formEncType,h,null),bt(t,s,"formMethod",h.formMethod,h,null),bt(t,s,"formTarget",h.formTarget,h,null)):(bt(t,s,"encType",h.encType,h,null),bt(t,s,"method",h.method,h,null),bt(t,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Pa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=vs);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Xe("beforetoggle",t),Xe("toggle",t),Oa(t,"popover",o);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Oa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hc.get(a)||a,Oa(t,a,o))}}function Ff(t,s,a,o,h,m){switch(a){case"style":so(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?In(t,o):(typeof o=="number"||typeof o=="bigint")&&In(t,""+o);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[rn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Oa(t,a,o)}}}function pn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",t),Xe("load",t);var o=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(t,s,m,v,a,null)}}h&&bt(t,s,"srcSet",a.srcSet,a,null),o&&bt(t,s,"src",a.src,a,null);return;case"input":Xe("invalid",t);var w=m=v=h=null,V=null,$=null;for(o in a)if(a.hasOwnProperty(o)){var se=a[o];if(se!=null)switch(o){case"name":h=se;break;case"type":v=se;break;case"checked":V=se;break;case"defaultChecked":$=se;break;case"value":m=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:bt(t,s,o,se,a,null)}}Uc(t,m,w,V,$,v,h,!1);return;case"select":Xe("invalid",t),o=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":o=w;default:bt(t,s,h,w,a,null)}s=m,a=v,t.multiple=!!o,s!=null?Gi(t,!!o,s,!1):a!=null&&Gi(t,!!o,a,!0);return;case"textarea":Xe("invalid",t),m=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":o=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:bt(t,s,v,w,a,null)}Ki(t,o,h,m);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(o=a[V],o!=null))switch(V){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:bt(t,s,V,o,a,null)}return;case"dialog":Xe("beforetoggle",t),Xe("toggle",t),Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":Xe("load",t);break;case"video":case"audio":for(o=0;o<Po.length;o++)Xe(Po[o],t);break;case"image":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"embed":case"source":case"link":Xe("error",t),Xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(o=a[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(t,s,$,o,a,null)}return;default:if(La(s)){for(se in a)a.hasOwnProperty(se)&&(o=a[se],o!==void 0&&Ff(t,s,se,o,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(o=a[w],o!=null&&bt(t,s,w,o,a,null))}function Ww(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,V=null,$=null,se=null;for(ee in a){var ue=a[ee];if(a.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=ue;default:o.hasOwnProperty(ee)||bt(t,s,ee,null,o,ue)}}for(var Q in o){var ee=o[Q];if(ue=a[Q],o.hasOwnProperty(Q)&&(ee!=null||ue!=null))switch(Q){case"type":m=ee;break;case"name":h=ee;break;case"checked":$=ee;break;case"defaultChecked":se=ee;break;case"value":v=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==ue&&bt(t,s,Q,ee,o,ue)}}Va(t,v,w,V,$,se,m,h);return;case"select":ee=v=w=Q=null;for(m in a)if(V=a[m],a.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":ee=V;default:o.hasOwnProperty(m)||bt(t,s,m,null,o,V)}for(h in o)if(m=o[h],V=a[h],o.hasOwnProperty(h)&&(m!=null||V!=null))switch(h){case"value":Q=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==V&&bt(t,s,h,m,o,V)}s=w,a=v,o=ee,Q!=null?Gi(t,!!a,Q,!1):!!o!=!!a&&(s!=null?Gi(t,!!a,s,!0):Gi(t,!!a,a?[]:"",!1));return;case"textarea":ee=Q=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:bt(t,s,w,null,o,h)}for(v in o)if(h=o[v],m=a[v],o.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":Q=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&bt(t,s,v,h,o,m)}zc(t,Q,ee);return;case"option":for(var Ae in a)if(Q=a[Ae],a.hasOwnProperty(Ae)&&Q!=null&&!o.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:bt(t,s,Ae,null,o,Q)}for(V in o)if(Q=o[V],ee=a[V],o.hasOwnProperty(V)&&Q!==ee&&(Q!=null||ee!=null))switch(V){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:bt(t,s,V,Q,o,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)Q=a[Oe],a.hasOwnProperty(Oe)&&Q!=null&&!o.hasOwnProperty(Oe)&&bt(t,s,Oe,null,o,Q);for($ in o)if(Q=o[$],ee=a[$],o.hasOwnProperty($)&&Q!==ee&&(Q!=null||ee!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:bt(t,s,$,Q,o,ee)}return;default:if(La(s)){for(var _t in a)Q=a[_t],a.hasOwnProperty(_t)&&Q!==void 0&&!o.hasOwnProperty(_t)&&Ff(t,s,_t,void 0,o,Q);for(se in o)Q=o[se],ee=a[se],!o.hasOwnProperty(se)||Q===ee||Q===void 0&&ee===void 0||Ff(t,s,se,Q,o,ee);return}}for(var B in a)Q=a[B],a.hasOwnProperty(B)&&Q!=null&&!o.hasOwnProperty(B)&&bt(t,s,B,null,o,Q);for(ue in o)Q=o[ue],ee=a[ue],!o.hasOwnProperty(ue)||Q===ee||Q==null&&ee==null||bt(t,s,ue,Q,o,ee)}function Gy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&Gy(v)){for(v=0,w=h.responseEnd,o+=1;o<a.length;o++){var V=a[o],$=V.startTime;if($>w)break;var se=V.transferSize,ue=V.initiatorType;se&&Gy(ue)&&(V=V.responseEnd,v+=se*(V<w?1:(w-$)/(V-$)))}if(--o,s+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gf=null,Kf=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function Ky(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Yf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function Jw(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,eE=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,tE=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(nE)}:$y;function nE(t){setTimeout(function(){throw t})}function pr(t){return t==="head"}function Xy(t,s){var a=s,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),xl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")zo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,zo(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Ps]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&zo(t.ownerDocument.body);a=h}while(a);xl(s)}function Wy(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Qf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qf(a),Ma(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function sE(t,s,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ps])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=us(t.nextSibling),t===null)break}return null}function iE(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=us(t.nextSibling),t===null))return null;return t}function Zy(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=us(t.nextSibling),t===null))return null;return t}function Xf(t){return t.data==="$?"||t.data==="$~"}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rE(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function us(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Zf=null;function Jy(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return us(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function ex(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function tx(t,s,a){switch(s=qu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function zo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ma(t)}var ds=new Map,nx=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ji=pe.d;pe.d={f:aE,r:lE,D:oE,C:cE,L:uE,m:dE,X:fE,S:hE,M:mE};function aE(){var t=ji.f(),s=Ou();return t||s}function lE(t){var s=es(t);s!==null&&s.tag===5&&s.type==="form"?v0(s):ji.r(t)}var pl=typeof document>"u"?null:document;function sx(t,s,a){var o=pl;if(o&&typeof s=="string"&&s){var h=Rn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),nx.has(h)||(nx.add(h),t={rel:t,crossOrigin:a,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),pn(s,"link",t),Gt(s),o.head.appendChild(s)))}}function oE(t){ji.D(t),sx("dns-prefetch",t,null)}function cE(t,s){ji.C(t,s),sx("preconnect",t,s)}function uE(t,s,a){ji.L(t,s,a);var o=pl;if(o&&t&&s){var h='link[rel="preload"][as="'+Rn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var m=h;switch(s){case"style":m=gl(t);break;case"script":m=yl(t)}ds.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ds.set(m,t),o.querySelector(h)!==null||s==="style"&&o.querySelector(Bo(m))||s==="script"&&o.querySelector(Ho(m))||(s=o.createElement("link"),pn(s,"link",t),Gt(s),o.head.appendChild(s)))}}function dE(t,s){ji.m(t,s);var a=pl;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Rn(o)+'"][href="'+Rn(t)+'"]',m=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!ds.has(m)&&(t=E({rel:"modulepreload",href:t},s),ds.set(m,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ho(m)))return}o=a.createElement("link"),pn(o,"link",t),Gt(o),a.head.appendChild(o)}}}function hE(t,s,a){ji.S(t,s,a);var o=pl;if(o&&t){var h=zs(o).hoistableStyles,m=gl(t);s=s||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=o.querySelector(Bo(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ds.get(m))&&Jf(t,a);var V=v=o.createElement("link");Gt(V),pn(V,"link",t),V._p=new Promise(function($,se){V.onload=$,V.onerror=se}),V.addEventListener("load",function(){w.loading|=1}),V.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gu(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function fE(t,s){ji.X(t,s);var a=pl;if(a&&t){var o=zs(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(Ho(h)),m||(t=E({src:t,async:!0},s),(s=ds.get(h))&&em(t,s),m=a.createElement("script"),Gt(m),pn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function mE(t,s){ji.M(t,s);var a=pl;if(a&&t){var o=zs(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(Ho(h)),m||(t=E({src:t,async:!0,type:"module"},s),(s=ds.get(h))&&em(t,s),m=a.createElement("script"),Gt(m),pn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function ix(t,s,a,o){var h=(h=re.current)?Fu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=gl(a.href),a=zs(h).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=gl(a.href);var m=zs(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Bo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),ds.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ds.set(t,a),m||pE(h,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=yl(a),a=zs(h).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function gl(t){return'href="'+Rn(t)+'"'}function Bo(t){return'link[rel="stylesheet"]['+t+"]"}function rx(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function pE(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),pn(s,"link",a),Gt(s),t.head.appendChild(s))}function yl(t){return'[src="'+Rn(t)+'"]'}function Ho(t){return"script[async]"+t}function ax(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(o)return s.instance=o,Gt(o),o;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Gt(o),pn(o,"style",h),Gu(o,a.precedence,t),s.instance=o;case"stylesheet":h=gl(a.href);var m=t.querySelector(Bo(h));if(m)return s.state.loading|=4,s.instance=m,Gt(m),m;o=rx(a),(h=ds.get(h))&&Jf(o,h),m=(t.ownerDocument||t).createElement("link"),Gt(m);var v=m;return v._p=new Promise(function(w,V){v.onload=w,v.onerror=V}),pn(m,"link",o),s.state.loading|=4,Gu(m,a.precedence,t),s.instance=m;case"script":return m=yl(a.src),(h=t.querySelector(Ho(m)))?(s.instance=h,Gt(h),h):(o=a,(h=ds.get(m))&&(o=E({},a),em(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Gt(h),pn(h,"link",o),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Gu(o,a.precedence,t));return s.instance}function Gu(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,m=h,v=0;v<o.length;v++){var w=o[v];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Jf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function em(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ku=null;function lx(t,s,a){if(Ku===null){var o=new Map,h=Ku=new Map;h.set(a,o)}else h=Ku,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Ps]||m[Ft]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var w=o.get(v);w?w.push(m):o.set(v,[m])}}return o}function ox(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function gE(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function yE(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=gl(o.href),m=s.querySelector(Bo(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Yu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Gt(m);return}m=s.ownerDocument||s,o=rx(o),(h=ds.get(h))&&Jf(o,h),m=m.createElement("link"),Gt(m);var v=m;v._p=new Promise(function(w,V){v.onload=w,v.onerror=V}),pn(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Yu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var tm=0;function xE(t,s){return t.stylesheets&&t.count===0&&Qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&tm===0&&(tm=62500*Zw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>tm?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Qu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,s.forEach(vE,t),$u=null,Yu.call(t))}function vE(t,s){if(!(s.state.loading&4)){var a=$u.get(t);if(a)var o=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,h),a.set(v,h),this.count++,o=Yu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var qo={$$typeof:W,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function bE(t,s,a,o,h,m,v,w,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vs(0),this.hiddenUpdates=Vs(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function ux(t,s,a,o,h,m,v,w,V,$,se,ue){return t=new bE(t,s,a,v,V,$,se,ue,w),s=1,m===!0&&(s|=24),m=Fn(3,null,null,s),t.current=m,m.stateNode=t,s=Dh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Lh(m),t}function dx(t){return t?(t=$a,t):$a}function hx(t,s,a,o,h,m){h=dx(h),o.context===null?o.context=h:o.pendingContext=h,o=ir(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=rr(t,o,s),a!==null&&(Vn(a,t,s),_o(a,t,s))}function fx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function nm(t,s){fx(t,s),(t=t.alternate)&&fx(t,s)}function mx(t){if(t.tag===13||t.tag===31){var s=ra(t,67108864);s!==null&&Vn(s,t,67108864),nm(t,67108864)}}function px(t){if(t.tag===13||t.tag===31){var s=Qn();s=Yr(s);var a=ra(t,s);a!==null&&Vn(a,t,s),nm(t,s)}}var Xu=!0;function _E(t,s,a,o){var h=K.T;K.T=null;var m=pe.p;try{pe.p=2,sm(t,s,a,o)}finally{pe.p=m,K.T=h}}function wE(t,s,a,o){var h=K.T;K.T=null;var m=pe.p;try{pe.p=8,sm(t,s,a,o)}finally{pe.p=m,K.T=h}}function sm(t,s,a,o){if(Xu){var h=im(o);if(h===null)qf(t,s,o,Wu,a),yx(t,o);else if(TE(h,t,s,a,o))o.stopPropagation();else if(yx(t,o),s&4&&-1<EE.indexOf(t)){for(;h!==null;){var m=es(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ms(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var V=1<<31-wt(v);w.entanglements[1]|=V,v&=~V}Js(m),(dt&6)===0&&(Du=ct()+500,Lo(0))}}break;case 31:case 13:w=ra(m,2),w!==null&&Vn(w,m,2),Ou(),nm(m,2)}if(m=im(o),m===null&&qf(t,s,o,Wu,a),m===h)break;h=m}h!==null&&o.stopPropagation()}else qf(t,s,o,null,a)}}function im(t){return t=ts(t),rm(t)}var Wu=null;function rm(t){if(Wu=null,t=Us(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Wu=t,null}function gx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case ze:return 2;case St:return 8;case bn:case Cn:return 32;case Hi:return 268435456;default:return 32}default:return 32}}var am=!1,gr=null,yr=null,xr=null,Fo=new Map,Go=new Map,vr=[],EE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yx(t,s){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Fo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(s.pointerId)}}function Ko(t,s,a,o,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[h]},s!==null&&(s=es(s),s!==null&&mx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function TE(t,s,a,o,h){switch(s){case"focusin":return gr=Ko(gr,t,s,a,o,h),!0;case"dragenter":return yr=Ko(yr,t,s,a,o,h),!0;case"mouseover":return xr=Ko(xr,t,s,a,o,h),!0;case"pointerover":var m=h.pointerId;return Fo.set(m,Ko(Fo.get(m)||null,t,s,a,o,h)),!0;case"gotpointercapture":return m=h.pointerId,Go.set(m,Ko(Go.get(m)||null,t,s,a,o,h)),!0}return!1}function xx(t){var s=Us(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,ys(t.priority,function(){px(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,ys(t.priority,function(){px(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=im(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);io=o,a.target.dispatchEvent(o),io=null}else return s=es(a),s!==null&&mx(s),t.blockedOn=a,!1;s.shift()}return!0}function vx(t,s,a){Zu(t)&&a.delete(s)}function SE(){am=!1,gr!==null&&Zu(gr)&&(gr=null),yr!==null&&Zu(yr)&&(yr=null),xr!==null&&Zu(xr)&&(xr=null),Fo.forEach(vx),Go.forEach(vx)}function Ju(t,s){t.blockedOn===s&&(t.blockedOn=null,am||(am=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,SE)))}var ed=null;function bx(t){ed!==t&&(ed=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ed===t&&(ed=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],h=t[s+2];if(typeof o!="function"){if(rm(o||a)===null)continue;break}var m=es(a);m!==null&&(t.splice(s,3),s-=3,sf(m,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function xl(t){function s(V){return Ju(V,t)}gr!==null&&Ju(gr,t),yr!==null&&Ju(yr,t),xr!==null&&Ju(xr,t),Fo.forEach(s),Go.forEach(s);for(var a=0;a<vr.length;a++){var o=vr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)xx(a),a.blockedOn===null&&vr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],v=h[rn]||null;if(typeof m=="function")v||bx(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[rn]||null)w=v.formAction;else if(rm(h)!==null)continue}else w=v.action;typeof w=="function"?a[o+1]=w:(a.splice(o,3),o-=3),bx(a)}}}function _x(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function lm(t){this._internalRoot=t}td.prototype.render=lm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=Qn();hx(a,o,t,s,null,null)},td.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;hx(t.current,2,null,t,null,null),Ou(),s[Ls]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var s=Oc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,t),a===0&&xx(t)}};var wx=e.version;if(wx!=="19.2.0")throw Error(r(527,wx,"19.2.0"));pe.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var NE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{cn=nd.inject(NE),Dt=nd}catch{}}return $o.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",h=C0,m=R0,v=I0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=ux(t,1,!1,null,null,a,o,null,h,m,v,_x),t[Ls]=s.current,Hf(t),new lm(s)},$o.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,h="",m=C0,v=R0,w=I0,V=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),s=ux(t,1,!0,s,a??null,o,h,V,m,v,w,_x),s.context=dx(null),a=s.current,o=Qn(),o=Yr(o),h=ir(o),h.callback=null,rr(a,h,o),a=o,s.current.lanes=a,Gr(s,a),Js(s),t[Ls]=s.current,Hf(t),new td(s)},$o.version="19.2.0",$o}var kx;function LE(){if(kx)return um.exports;kx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),um.exports=VE(),um.exports}var PE=LE();const UE=()=>{};var Dx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},zE=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const l=i[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],f=i[n++],p=i[n++],g=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},_b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],f=l+1<i.length,p=f?i[l+1]:0,g=l+2<i.length,x=g?i[l+2]:0,_=u>>2,E=(u&3)<<4|p>>4;let T=(p&15)<<2|x>>6,z=x&63;g||(z=64,f||(T=64)),r.push(n[_],n[E],n[T],n[z])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(bb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):zE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],p=l<i.length?n[i.charAt(l)]:0;++l;const x=l<i.length?n[i.charAt(l)]:64;++l;const E=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||p==null||x==null||E==null)throw new BE;const T=u<<2|p>>4;if(r.push(T),x!==64){const z=p<<4&240|x>>2;if(r.push(z),E!==64){const q=x<<6&192|E;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HE=function(i){const e=bb(i);return _b.encodeByteArray(e,!0)},_d=function(i){return HE(i).replace(/\./g,"")},wb=function(i){try{return _b.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=()=>qE().__FIREBASE_DEFAULTS__,GE=()=>{if(typeof process>"u"||typeof Dx>"u")return;const i=Dx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},KE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wb(i[1]);return e&&JSON.parse(e)},Hd=()=>{try{return UE()||FE()||GE()||KE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Eb=i=>Hd()?.emulatorHosts?.[i],YE=i=>{const e=Eb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tb=()=>Hd()?.config,Sb=i=>Hd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[_d(JSON.stringify(n)),_d(JSON.stringify(f)),""].join(".")}const nc={};function XE(){const i={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?i.emulator.push(e):i.prod.push(e);return i}function WE(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Mx=!1;function Ab(i,e){if(typeof window>"u"||typeof document>"u"||!Ul(window.location.host)||nc[i]===e||nc[i]||Mx)return;nc[i]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=XE().prod.length>0;function f(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,z){T.setAttribute("width","24"),T.setAttribute("id",z),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function x(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Mx=!0,f()},T}function _(T,z){T.setAttribute("id",z),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=WE(r),z=n("text"),q=document.getElementById(z)||document.createElement("span"),X=n("learnmore"),L=document.getElementById(X)||document.createElement("a"),oe=n("preprendIcon"),ne=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;p(W),_(L,X);const he=x();g(ne,oe),W.append(ne,q,L,he),document.body.appendChild(W)}u?(q.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function JE(){const i=Hd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function n2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s2(){const i=Sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function i2(){return!JE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r2(){try{return typeof indexedDB=="object"}catch{return!1}}function a2(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="FirebaseError";class Pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l2,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?o2(u,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Pi(l,p,r)}}function o2(i,e){return i.replace(c2,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const c2=/\{\$([^}]+)}/g;function u2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Sa(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=i[l],f=e[l];if(Ox(u)&&Ox(f)){if(!Sa(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Ox(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Xo(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function d2(i,e){const n=new h2(i,e);return n.subscribe.bind(n)}class h2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");f2(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=mm),l.error===void 0&&(l.error=mm),l.complete===void 0&&(l.complete=mm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function f2(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(i){return i&&i._delegate?i._delegate:i}class Na{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $E;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g2(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:p2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p2(i){return i===ba?void 0:i}function g2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(tt||(tt={}));const x2={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},v2=tt.INFO,b2={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},_2=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=b2[e];if(l)console[l](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=v2,this._logHandler=_2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const w2=(i,e)=>e.some(n=>i instanceof n);let Vx,Lx;function E2(){return Vx||(Vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T2(){return Lx||(Lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jb=new WeakMap,km=new WeakMap,Cb=new WeakMap,pm=new WeakMap,cp=new WeakMap;function S2(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(jr(i.result)),l()},f=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&jb.set(n,i)}).catch(()=>{}),cp.set(e,i),e}function N2(i){if(km.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});km.set(i,e)}let Dm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Cb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function A2(i){Dm=i(Dm)}function j2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(gm(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),jr(r)}:T2().includes(i)?function(...e){return i.apply(gm(this),e),jr(jb.get(this))}:function(...e){return jr(i.apply(gm(this),e))}}function C2(i){return typeof i=="function"?j2(i):(i instanceof IDBTransaction&&N2(i),w2(i,E2())?new Proxy(i,Dm):i)}function jr(i){if(i instanceof IDBRequest)return S2(i);if(pm.has(i))return pm.get(i);const e=C2(i);return e!==i&&(pm.set(i,e),cp.set(e,i)),e}const gm=i=>cp.get(i);function R2(i,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(i,e),p=jr(f);return r&&f.addEventListener("upgradeneeded",g=>{r(jr(f.result),g.oldVersion,g.newVersion,jr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const I2=["get","getKey","getAll","getAllKeys","count"],k2=["put","add","delete","clear"],ym=new Map;function Px(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=k2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||I2.includes(n)))return;const u=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let x=g.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),l&&g.done]))[0]};return ym.set(e,u),u}A2(i=>({...i,get:(e,n,r)=>Px(e,n)||i.get(e,n,r),has:(e,n)=>!!Px(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(M2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function M2(i){return i.getComponent()?.type==="VERSION"}const Mm="@firebase/app",Ux="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new op("@firebase/app"),O2="@firebase/app-compat",V2="@firebase/analytics-compat",L2="@firebase/analytics",P2="@firebase/app-check-compat",U2="@firebase/app-check",z2="@firebase/auth",B2="@firebase/auth-compat",H2="@firebase/database",q2="@firebase/data-connect",F2="@firebase/database-compat",G2="@firebase/functions",K2="@firebase/functions-compat",Y2="@firebase/installations",$2="@firebase/installations-compat",Q2="@firebase/messaging",X2="@firebase/messaging-compat",W2="@firebase/performance",Z2="@firebase/performance-compat",J2="@firebase/remote-config",eT="@firebase/remote-config-compat",tT="@firebase/storage",nT="@firebase/storage-compat",sT="@firebase/firestore",iT="@firebase/ai",rT="@firebase/firestore-compat",aT="firebase",lT="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",oT={[Mm]:"fire-core",[O2]:"fire-core-compat",[L2]:"fire-analytics",[V2]:"fire-analytics-compat",[U2]:"fire-app-check",[P2]:"fire-app-check-compat",[z2]:"fire-auth",[B2]:"fire-auth-compat",[H2]:"fire-rtdb",[q2]:"fire-data-connect",[F2]:"fire-rtdb-compat",[G2]:"fire-fn",[K2]:"fire-fn-compat",[Y2]:"fire-iid",[$2]:"fire-iid-compat",[Q2]:"fire-fcm",[X2]:"fire-fcm-compat",[W2]:"fire-perf",[Z2]:"fire-perf-compat",[J2]:"fire-rc",[eT]:"fire-rc-compat",[tT]:"fire-gcs",[nT]:"fire-gcs-compat",[sT]:"fire-fst",[rT]:"fire-fst-compat",[iT]:"fire-vertex","fire-js":"fire-js",[aT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,cT=new Map,Vm=new Map;function zx(i,e){try{i.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Rl(i){const e=i.name;if(Vm.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,i);for(const n of wd.values())zx(n,i);for(const n of cT.values())zx(n,i);return!0}function up(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function hs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new xc("app","Firebase",uT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=lT;function Rb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Om,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Cr.create("bad-app-name",{appName:String(l)});if(n||(n=Tb()),!n)throw Cr.create("no-options");const u=wd.get(l);if(u){if(Sa(n,u.options)&&Sa(r,u.config))return u;throw Cr.create("duplicate-app",{appName:l})}const f=new y2(l);for(const g of Vm.values())f.addComponent(g);const p=new dT(n,r,f);return wd.set(l,p),p}function Ib(i=Om){const e=wd.get(i);if(!e&&i===Om&&Tb())return Rb();if(!e)throw Cr.create("no-app",{appName:i});return e}function Rr(i,e,n){let r=oT[i]??i;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(f.join(" "));return}Rl(new Na(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,oc="firebase-heartbeat-store";let xm=null;function kb(){return xm||(xm=R2(hT,fT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Cr.create("idb-open",{originalErrorMessage:i.message})})),xm}async function mT(i){try{const n=(await kb()).transaction(oc),r=await n.objectStore(oc).get(Db(i));return await n.done,r}catch(e){if(e instanceof Pi)ki.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e?.message});ki.warn(n.message)}}}async function Bx(i,e){try{const r=(await kb()).transaction(oc,"readwrite");await r.objectStore(oc).put(e,Db(i)),await r.done}catch(n){if(n instanceof Pi)ki.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n?.message});ki.warn(r.message)}}}function Db(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1024,gT=30;class yT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>gT){const l=bT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ki.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hx(),{heartbeatsToSend:n,unsentEntries:r}=xT(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ki.warn(e),""}}}function Hx(){return new Date().toISOString().substring(0,10)}function xT(i,e=pT){const n=[];let r=i.slice();for(const l of i){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),qx(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),qx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r2()?a2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function qx(i){return _d(JSON.stringify({version:2,heartbeats:i})).length}function bT(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(i){Rl(new Na("platform-logger",e=>new D2(e),"PRIVATE")),Rl(new Na("heartbeat",e=>new yT(e),"PRIVATE")),Rr(Mm,Ux,i),Rr(Mm,Ux,"esm2020"),Rr("fire-js","")}_T("");function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wT=Mb,Ob=new xc("auth","Firebase",Mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new op("@firebase/auth");function ET(i,...e){Ed.logLevel<=tt.WARN&&Ed.warn(`Auth (${zl}): ${i}`,...e)}function ud(i,...e){Ed.logLevel<=tt.ERROR&&Ed.error(`Auth (${zl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(i,...e){throw dp(i,...e)}function ti(i,...e){return dp(i,...e)}function Vb(i,e,n){const r={...wT(),[e]:n};return new xc("auth","Firebase",r).create(e,{appName:i.name})}function Ii(i){return Vb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Ob.create(i,...e)}function Le(i,e,...n){if(!i)throw dp(e,...n)}function Ci(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ud(e),new Error(e)}function Di(i,e){i||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof self<"u"&&self.location?.href||""}function TT(){return Fx()==="http:"||Fx()==="https:"}function Fx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TT()||t2()||"connection"in navigator)?navigator.onLine:!0}function NT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=ZE()||n2()}get(){return ST()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(i,e){Di(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CT=new bc(3e4,6e4);function Ui(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function zi(i,e,n,r,l={}){return Pb(i,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=vc({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:g,...u};return e2()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Ul(i.emulatorConfig.host)&&(x.credentials="include"),Lb.fetch()(await Ub(i,i.config.apiHost,n,p),x)})}async function Pb(i,e,n){i._canInitEmulator=!1;const r={...AT,...e};try{const l=new IT(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw sd(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw sd(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw sd(i,"user-disabled",f);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Vb(i,_,x);Is(i,_)}}catch(l){if(l instanceof Pi)throw l;Is(i,"network-request-failed",{message:String(l)})}}async function _c(i,e,n,r,l={}){const u=await zi(i,e,n,r,l);return"mfaPendingCredential"in u&&Is(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ub(i,e,n,r){const l=`${e}${n}?${r}`,u=i,f=u.config.emulator?hp(i.config,l):`${i.config.apiScheme}://${l}`;return jT.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function RT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),CT.get())})}}function sd(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=ti(i,e,r);return l.customData._tokenResponse=n,l}function Gx(i){return i!==void 0&&i.enterprise!==void 0}class kT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DT(i,e){return zi(i,"GET","/v2/recaptchaConfig",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(i,e){return zi(i,"POST","/v1/accounts:delete",e)}async function Td(i,e){return zi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OT(i,e=!1){const n=Ht(i),r=await n.getIdToken(e),l=fp(r);Le(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:sc(vm(l.auth_time)),issuedAtTime:sc(vm(l.iat)),expirationTime:sc(vm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function vm(i){return Number(i)*1e3}function fp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const l=wb(n);return l?JSON.parse(l):(ud("Failed to decode base64 JWT payload"),null)}catch(l){return ud("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Kx(i){const e=fp(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pi&&VT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function VT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(i){const e=i.auth,n=await i.getIdToken(),r=await cc(i,Td(e,{idToken:n}));Le(r?.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=l.providerUserInfo?.length?zb(l.providerUserInfo):[],f=UT(i.providerData,u),p=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!f?.length,x=p?g:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(i,_)}async function PT(i){const e=Ht(i);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UT(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function zb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(i,e){const n=await Pb(i,{},async()=>{const r=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,f=await Ub(i,l,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&Ul(i.emulatorConfig.host)&&(g.credentials="include"),Lb.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BT(i,e){return zi(i,"POST","/v2/accounts:revokeToken",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=Kx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await zT(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,f=new Sl;return r&&(Le(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(Le(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(Le(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Cs{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new LT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OT(this,e)}reload(){return PT(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await cc(this,MT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:z,providerData:q,stsTokenManager:X}=n;Le(E&&X,e,"internal-error");const L=Sl.fromJSON(this.name,X);Le(typeof E=="string",e,"internal-error"),_r(r,e.name),_r(l,e.name),Le(typeof T=="boolean",e,"internal-error"),Le(typeof z=="boolean",e,"internal-error"),_r(u,e.name),_r(f,e.name),_r(p,e.name),_r(g,e.name),_r(x,e.name),_r(_,e.name);const oe=new Cs({uid:E,auth:e,email:l,emailVerified:T,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:L,createdAt:x,lastLoginAt:_});return q&&Array.isArray(q)&&(oe.providerData=q.map(ne=>({...ne}))),g&&(oe._redirectEventId=g),oe}static async _fromIdTokenResponse(e,n,r=!1){const l=new Sl;l.updateFromServerResponse(n);const u=new Cs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Sd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Le(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?zb(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,p=new Sl;p.updateFromIdToken(r);const g=new Cs({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;function Ri(i){Di(i instanceof Function,"Expected a class definition");let e=Yx.get(i);return e?(Di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Yx.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bb.type="NONE";const $x=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(i,e,n){return`firebase:${i}:${e}:${n}`}class Nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=dd(this.userKey,l.apiKey,u),this.fullPersistenceKey=dd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Cs._fromGetAccountInfoResponse(this.auth,n,e):null}return Cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nl(Ri($x),e,r);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Ri($x);const f=dd(r,e.config.apiKey,e.name);let p=null;for(const x of n)try{const _=await x._get(f);if(_){let E;if(typeof _=="string"){const T=await Td(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Cs._fromGetAccountInfoResponse(e,T,_)}else E=Cs._fromJSON(e,_);x!==u&&(p=E),u=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Nl(u,e,r):(u=g[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new Nl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yb(e))return"Blackberry";if($b(e))return"Webos";if(qb(e))return"Safari";if((e.includes("chrome/")||Fb(e))&&!e.includes("edge/"))return"Chrome";if(Kb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function Hb(i=Sn()){return/firefox\//i.test(i)}function qb(i=Sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(i=Sn()){return/crios\//i.test(i)}function Gb(i=Sn()){return/iemobile/i.test(i)}function Kb(i=Sn()){return/android/i.test(i)}function Yb(i=Sn()){return/blackberry/i.test(i)}function $b(i=Sn()){return/webos/i.test(i)}function mp(i=Sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function HT(i=Sn()){return mp(i)&&!!window.navigator?.standalone}function qT(){return s2()&&document.documentMode===10}function Qb(i=Sn()){return mp(i)||Kb(i)||$b(i)||Yb(i)||/windows phone/i.test(i)||Gb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(i,e=[]){let n;switch(i){case"Browser":n=Qx(Sn());break;case"Worker":n=`${Qx(Sn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,p)=>{try{const g=e(u);f(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(i,e={}){return zi(i,"GET","/v2/passwordPolicy",Ui(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=6;class YT{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??KT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xx(this),this.idTokenSubscription=new Xx(this),this.beforeStateQueue=new FT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),r=await Cs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hs(this.app))return Promise.reject(Ii(this));const n=e?Ht(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hs(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GT(this),n=new YT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ET(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zr(i){return Ht(i)}class Xx{constructor(e){this.auth=e,this.observer=null,this.addObserver=d2(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QT(i){qd=i}function Wb(i){return qd.loadJS(i)}function XT(){return qd.recaptchaEnterpriseScript}function WT(){return qd.gapiScript}function ZT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class JT{constructor(){this.enterprise=new eS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tS="recaptcha-enterprise",Zb="NO_RECAPTCHA";class nS{constructor(e){this.type=tS,this.auth=zr(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{DT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new kT(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(g=>{p(g)})})}function l(u,f,p){const g=window.grecaptcha;Gx(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(Zb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JT().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!n&&Gx(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XT();g.length!==0&&(g+=p),Wb(g).then(()=>{l(p,u,f)}).catch(x=>{f(x)})}}).catch(p=>{f(p)})})}}async function Wx(i,e,n,r=!1,l=!1){const u=new nS(i);let f;if(l)f=Zb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Nd(i,e,n,r,l){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Wx(i,e,n,n==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Wx(i,e,n,n==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(i,e){const n=up(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Sa(u,e??{}))return l;Is(l,"already-initialized")}return n.initialize({options:e})}function iS(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ri);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function rS(i,e,n){const r=zr(i);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=Jb(e),{host:f,port:p}=aS(e),g=p===null?"":`:${p}`,x={url:`${u}//${f}${g}/`},_=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(Sa(x,r.config.emulator)&&Sa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Ul(f)?(Nb(`${u}//${f}${g}`),Ab("Auth",!0)):lS()}function Jb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function aS(i){const e=Jb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:Zx(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Zx(f)}}}function Zx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function lS(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function oS(i,e){return zi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(i,e){return _c(i,"POST","/v1/accounts:signInWithPassword",Ui(i,e))}async function uS(i,e){return zi(i,"POST","/v1/accounts:sendOobCode",Ui(i,e))}async function dS(i,e){return uS(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(i,e){return _c(i,"POST","/v1/accounts:signInWithEmailLink",Ui(i,e))}async function fS(i,e){return _c(i,"POST","/v1/accounts:signInWithEmailLink",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends pp{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new uc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,n,"signInWithPassword",cS);case"emailLink":return hS(e,{email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,r,"signUpPassword",oS);case"emailLink":return fS(e,{idToken:n,email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(i,e){return _c(i,"POST","/v1/accounts:signInWithIdp",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="http://localhost";class Aa extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const f=new Aa(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Al(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Al(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Al(e,n)}buildRequest(){const e={requestUri:mS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gS(i){const e=Qo(Xo(i)).link,n=e?Qo(Xo(e)).deep_link_id:null,r=Qo(Xo(i)).deep_link_id;return(r?Qo(Xo(r)).link:null)||r||n||e||i}class gp{constructor(e){const n=Qo(Xo(e)),r=n.apiKey??null,l=n.oobCode??null,u=pS(n.mode??null);Le(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gS(e);try{return new gp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gp.parseLink(n);return Le(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends e_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends wc{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Aa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends wc{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends wc{constructor(){super("twitter.com")}static credential(e,n){return Aa._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(i,e){return _c(i,"POST","/v1/accounts:signUp",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await Cs._fromIdTokenResponse(e,r,l),f=Jx(r);return new ja({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=Jx(r);return new ja({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function Jx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Pi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Ad(e,n,r,l)}}function t_(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(i,u,e,r):u})}async function xS(i,e,n=!1){const r=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ja._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(i,e,n=!1){const{auth:r}=i;if(hs(r.app))return Promise.reject(Ii(r));const l="reauthenticate";try{const u=await cc(i,t_(r,l,e,i),n);Le(u.idToken,r,"internal-error");const f=fp(u.idToken);Le(f,r,"internal-error");const{sub:p}=f;return Le(i.uid===p,r,"user-mismatch"),ja._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Is(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(i,e,n=!1){if(hs(i.app))return Promise.reject(Ii(i));const r="signIn",l=await t_(i,r,e),u=await ja._fromIdTokenResponse(i,r,l);return n||await i._updateCurrentUser(u.user),u}async function bS(i,e){return n_(zr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(i){const e=zr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _S(i,e,n){const r=zr(i);await Nd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dS)}async function wS(i,e,n){if(hs(i.app))return Promise.reject(Ii(i));const r=zr(i),f=await Nd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&s_(i),g}),p=await ja._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function ES(i,e,n){return hs(i.app)?Promise.reject(Ii(i)):bS(Ht(i),Bl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s_(i),r})}function TS(i,e,n,r){return Ht(i).onIdTokenChanged(e,n,r)}function SS(i,e,n){return Ht(i).beforeAuthStateChanged(e,n)}function NS(i,e,n,r){return Ht(i).onAuthStateChanged(e,n,r)}function AS(i){return Ht(i).signOut()}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=1e3,CS=10;class r_ extends i_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);qT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,CS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}r_.type="LOCAL";const RS=r_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends i_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}a_.type="SESSION";const l_=a_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async x=>x(n.origin,u)),g=await IS(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,g)=>{const x=yp("",20);l.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(E){const T=E;if(T.data.eventId===x)switch(T.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function DS(i){ni().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function MS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OS(){return navigator?.serviceWorker?.controller||null}function VS(){return o_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="firebaseLocalStorageDb",LS=1,Cd="firebaseLocalStorage",u_="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(i,e){return i.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function PS(){const i=indexedDB.deleteDatabase(c_);return new Ec(i).toPromise()}function Um(){const i=indexedDB.open(c_,LS);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Cd,{keyPath:u_})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await PS(),e(await Um()))})})}async function ev(i,e,n){const r=Gd(i,!0).put({[u_]:e,value:n});return new Ec(r).toPromise()}async function US(i,e){const n=Gd(i,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function tv(i,e){const n=Gd(i,!0).delete(e);return new Ec(n).toPromise()}const zS=800,BS=3;class d_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(VS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await MS(),!this.activeServiceWorker)return;this.sender=new kS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await ev(e,jd,"1"),await tv(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ev(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>US(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Gd(l,!1).getAll();return new Ec(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d_.type="LOCAL";const HS=d_;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(i,e){return e?Ri(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Al(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FS(i){return n_(i.auth,new xp(i),i.bypassAuthState)}function GS(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),vS(n,new xp(i),i.bypassAuthState)}async function KS(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),xS(n,new xp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FS;case"linkViaPopup":case"linkViaRedirect":return KS;case"reauthViaPopup":case"reauthViaRedirect":return GS;default:Is(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new bc(2e3,1e4);class Tl extends h_{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YS.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="pendingRedirect",hd=new Map;class QS extends h_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const r=await XS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XS(i,e){const n=JS(e),r=ZS(i);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function WS(i,e){hd.set(i._key(),e)}function ZS(i){return Ri(i._redirectPersistence)}function JS(i){return dd($S,i.config.apiKey,i.name)}async function eN(i,e,n=!1){if(hs(i.app))return Promise.reject(Ii(i));const r=zr(i),l=qS(r,e),f=await new QS(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=600*1e3;class nN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!f_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ti(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tN&&this.cachedEventUids.clear(),this.cachedEventUids.has(nv(e))}saveEventToCache(e){this.cachedEventUids.add(nv(e)),this.lastProcessedEventTime=Date.now()}}function nv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function f_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function sN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(i,e={}){return zi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aN=/^https?/;async function lN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await iN(i);for(const n of e)try{if(oN(n))return}catch{}Is(i,"unauthorized-domain")}function oN(i){const e=Lm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!aN.test(n))return!1;if(rN.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new bc(3e4,6e4);function sv(){const i=ni().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function uN(i){return new Promise((e,n)=>{function r(){sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sv(),n(ti(i,"network-request-failed"))},timeout:cN.get()})}if(ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ni().gapi?.load)r();else{const l=ZT("iframefcb");return ni()[l]=()=>{gapi.load?r():n(ti(i,"network-request-failed"))},Wb(`${WT()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw fd=null,e})}let fd=null;function dN(i){return fd=fd||uN(i),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new bc(5e3,15e3),fN="__/auth/iframe",mN="emulator/auth/iframe",pN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yN(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?hp(e,mN):`https://${i.config.authDomain}/${fN}`,r={apiKey:e.apiKey,appName:i.name,v:zl},l=gN.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${vc(r).slice(1)}`}async function xN(i){const e=await dN(i),n=ni().gapi;return Le(n,i,"internal-error"),e.open({where:document.body,url:yN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pN,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=ti(i,"network-request-failed"),p=ni().setTimeout(()=>{u(f)},hN.get());function g(){ni().clearTimeout(p),l(r)}r.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bN=500,_N=600,wN="_blank",EN="http://localhost";class iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TN(i,e,n,r=bN,l=_N){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...vN,width:r.toString(),height:l.toString(),top:u,left:f},x=Sn().toLowerCase();n&&(p=Fb(x)?wN:n),Hb(x)&&(e=e||EN,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[z,q])=>`${T}${z}=${q},`,"");if(HT(x)&&p!=="_self")return SN(e||"",p),new iv(null);const E=window.open(e||"",p,_);Le(E,i,"popup-blocked");try{E.focus()}catch{}return new iv(E)}function SN(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="__/auth/handler",AN="emulator/auth/handler",jN=encodeURIComponent("fac");async function rv(i,e,n,r,l,u){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:zl,eventId:l};if(e instanceof e_){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",u2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof wc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const g=await i._getAppCheckToken(),x=g?`#${jN}=${encodeURIComponent(g)}`:"";return`${CN(i)}?${vc(p).slice(1)}${x}`}function CN({config:i}){return i.emulator?hp(i,AN):`https://${i.authDomain}/${NN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class RN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l_,this._completeRedirectFn=eN,this._overrideRedirectResult=WS}async _openPopup(e,n,r,l){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await rv(e,n,r,Lm(),l);return TN(e,u,yp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await rv(e,n,r,Lm(),l);return DS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Di(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xN(e),r=new nN(e);return n.register("authEvent",l=>(Le(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bm,{type:bm},l=>{const u=l?.[0]?.[bm];u!==void 0&&n(!!u),Is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qb()||qb()||mp()}}const IN=RN;var av="@firebase/auth",lv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MN(i){Rl(new Na("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Le(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xb(i)},x=new $T(r,l,u,g);return iS(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rl(new Na("auth-internal",e=>{const n=zr(e.getProvider("auth").getImmediate());return(r=>new kN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(av,lv,DN(i)),Rr(av,lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=300,VN=Sb("authIdTokenMaxAge")||ON;let ov=null;const LN=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VN)return;const l=n?.token;ov!==l&&(ov=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function PN(i=Ib()){const e=up(i,"auth");if(e.isInitialized())return e.getImmediate();const n=sS(i,{popupRedirectResolver:IN,persistence:[HS,RS,l_]}),r=Sb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=LN(u.toString());SS(n,f,()=>f(n.currentUser)),TS(n,p=>f(p))}}const l=Eb("auth");return l&&rS(n,`http://${l}`),n}function UN(){return document.getElementsByTagName("head")?.[0]??document}QT({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=ti("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",UN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MN("Browser");var zN="firebase",BN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(zN,BN,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,m_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function C(){}C.prototype=N.prototype,j.F=N.prototype,j.prototype=new C,j.prototype.constructor=j,j.D=function(M,R,P){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return N.prototype[R].apply(M,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(j,N,C){C||(C=0);const M=Array(16);if(typeof N=="string")for(var R=0;R<16;++R)M[R]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(R=0;R<16;++R)M[R]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=j.g[0],C=j.g[1],R=j.g[2];let P=j.g[3],k;k=N+(P^C&(R^P))+M[0]+3614090360&4294967295,N=C+(k<<7&4294967295|k>>>25),k=P+(R^N&(C^R))+M[1]+3905402710&4294967295,P=N+(k<<12&4294967295|k>>>20),k=R+(C^P&(N^C))+M[2]+606105819&4294967295,R=P+(k<<17&4294967295|k>>>15),k=C+(N^R&(P^N))+M[3]+3250441966&4294967295,C=R+(k<<22&4294967295|k>>>10),k=N+(P^C&(R^P))+M[4]+4118548399&4294967295,N=C+(k<<7&4294967295|k>>>25),k=P+(R^N&(C^R))+M[5]+1200080426&4294967295,P=N+(k<<12&4294967295|k>>>20),k=R+(C^P&(N^C))+M[6]+2821735955&4294967295,R=P+(k<<17&4294967295|k>>>15),k=C+(N^R&(P^N))+M[7]+4249261313&4294967295,C=R+(k<<22&4294967295|k>>>10),k=N+(P^C&(R^P))+M[8]+1770035416&4294967295,N=C+(k<<7&4294967295|k>>>25),k=P+(R^N&(C^R))+M[9]+2336552879&4294967295,P=N+(k<<12&4294967295|k>>>20),k=R+(C^P&(N^C))+M[10]+4294925233&4294967295,R=P+(k<<17&4294967295|k>>>15),k=C+(N^R&(P^N))+M[11]+2304563134&4294967295,C=R+(k<<22&4294967295|k>>>10),k=N+(P^C&(R^P))+M[12]+1804603682&4294967295,N=C+(k<<7&4294967295|k>>>25),k=P+(R^N&(C^R))+M[13]+4254626195&4294967295,P=N+(k<<12&4294967295|k>>>20),k=R+(C^P&(N^C))+M[14]+2792965006&4294967295,R=P+(k<<17&4294967295|k>>>15),k=C+(N^R&(P^N))+M[15]+1236535329&4294967295,C=R+(k<<22&4294967295|k>>>10),k=N+(R^P&(C^R))+M[1]+4129170786&4294967295,N=C+(k<<5&4294967295|k>>>27),k=P+(C^R&(N^C))+M[6]+3225465664&4294967295,P=N+(k<<9&4294967295|k>>>23),k=R+(N^C&(P^N))+M[11]+643717713&4294967295,R=P+(k<<14&4294967295|k>>>18),k=C+(P^N&(R^P))+M[0]+3921069994&4294967295,C=R+(k<<20&4294967295|k>>>12),k=N+(R^P&(C^R))+M[5]+3593408605&4294967295,N=C+(k<<5&4294967295|k>>>27),k=P+(C^R&(N^C))+M[10]+38016083&4294967295,P=N+(k<<9&4294967295|k>>>23),k=R+(N^C&(P^N))+M[15]+3634488961&4294967295,R=P+(k<<14&4294967295|k>>>18),k=C+(P^N&(R^P))+M[4]+3889429448&4294967295,C=R+(k<<20&4294967295|k>>>12),k=N+(R^P&(C^R))+M[9]+568446438&4294967295,N=C+(k<<5&4294967295|k>>>27),k=P+(C^R&(N^C))+M[14]+3275163606&4294967295,P=N+(k<<9&4294967295|k>>>23),k=R+(N^C&(P^N))+M[3]+4107603335&4294967295,R=P+(k<<14&4294967295|k>>>18),k=C+(P^N&(R^P))+M[8]+1163531501&4294967295,C=R+(k<<20&4294967295|k>>>12),k=N+(R^P&(C^R))+M[13]+2850285829&4294967295,N=C+(k<<5&4294967295|k>>>27),k=P+(C^R&(N^C))+M[2]+4243563512&4294967295,P=N+(k<<9&4294967295|k>>>23),k=R+(N^C&(P^N))+M[7]+1735328473&4294967295,R=P+(k<<14&4294967295|k>>>18),k=C+(P^N&(R^P))+M[12]+2368359562&4294967295,C=R+(k<<20&4294967295|k>>>12),k=N+(C^R^P)+M[5]+4294588738&4294967295,N=C+(k<<4&4294967295|k>>>28),k=P+(N^C^R)+M[8]+2272392833&4294967295,P=N+(k<<11&4294967295|k>>>21),k=R+(P^N^C)+M[11]+1839030562&4294967295,R=P+(k<<16&4294967295|k>>>16),k=C+(R^P^N)+M[14]+4259657740&4294967295,C=R+(k<<23&4294967295|k>>>9),k=N+(C^R^P)+M[1]+2763975236&4294967295,N=C+(k<<4&4294967295|k>>>28),k=P+(N^C^R)+M[4]+1272893353&4294967295,P=N+(k<<11&4294967295|k>>>21),k=R+(P^N^C)+M[7]+4139469664&4294967295,R=P+(k<<16&4294967295|k>>>16),k=C+(R^P^N)+M[10]+3200236656&4294967295,C=R+(k<<23&4294967295|k>>>9),k=N+(C^R^P)+M[13]+681279174&4294967295,N=C+(k<<4&4294967295|k>>>28),k=P+(N^C^R)+M[0]+3936430074&4294967295,P=N+(k<<11&4294967295|k>>>21),k=R+(P^N^C)+M[3]+3572445317&4294967295,R=P+(k<<16&4294967295|k>>>16),k=C+(R^P^N)+M[6]+76029189&4294967295,C=R+(k<<23&4294967295|k>>>9),k=N+(C^R^P)+M[9]+3654602809&4294967295,N=C+(k<<4&4294967295|k>>>28),k=P+(N^C^R)+M[12]+3873151461&4294967295,P=N+(k<<11&4294967295|k>>>21),k=R+(P^N^C)+M[15]+530742520&4294967295,R=P+(k<<16&4294967295|k>>>16),k=C+(R^P^N)+M[2]+3299628645&4294967295,C=R+(k<<23&4294967295|k>>>9),k=N+(R^(C|~P))+M[0]+4096336452&4294967295,N=C+(k<<6&4294967295|k>>>26),k=P+(C^(N|~R))+M[7]+1126891415&4294967295,P=N+(k<<10&4294967295|k>>>22),k=R+(N^(P|~C))+M[14]+2878612391&4294967295,R=P+(k<<15&4294967295|k>>>17),k=C+(P^(R|~N))+M[5]+4237533241&4294967295,C=R+(k<<21&4294967295|k>>>11),k=N+(R^(C|~P))+M[12]+1700485571&4294967295,N=C+(k<<6&4294967295|k>>>26),k=P+(C^(N|~R))+M[3]+2399980690&4294967295,P=N+(k<<10&4294967295|k>>>22),k=R+(N^(P|~C))+M[10]+4293915773&4294967295,R=P+(k<<15&4294967295|k>>>17),k=C+(P^(R|~N))+M[1]+2240044497&4294967295,C=R+(k<<21&4294967295|k>>>11),k=N+(R^(C|~P))+M[8]+1873313359&4294967295,N=C+(k<<6&4294967295|k>>>26),k=P+(C^(N|~R))+M[15]+4264355552&4294967295,P=N+(k<<10&4294967295|k>>>22),k=R+(N^(P|~C))+M[6]+2734768916&4294967295,R=P+(k<<15&4294967295|k>>>17),k=C+(P^(R|~N))+M[13]+1309151649&4294967295,C=R+(k<<21&4294967295|k>>>11),k=N+(R^(C|~P))+M[4]+4149444226&4294967295,N=C+(k<<6&4294967295|k>>>26),k=P+(C^(N|~R))+M[11]+3174756917&4294967295,P=N+(k<<10&4294967295|k>>>22),k=R+(N^(P|~C))+M[2]+718787259&4294967295,R=P+(k<<15&4294967295|k>>>17),k=C+(P^(R|~N))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+R&4294967295,j.g[3]=j.g[3]+P&4294967295}r.prototype.v=function(j,N){N===void 0&&(N=j.length);const C=N-this.blockSize,M=this.C;let R=this.h,P=0;for(;P<N;){if(R==0)for(;P<=C;)l(this,j,P),P+=this.blockSize;if(typeof j=="string"){for(;P<N;)if(M[R++]=j.charCodeAt(P++),R==this.blockSize){l(this,M),R=0;break}}else for(;P<N;)if(M[R++]=j[P++],R==this.blockSize){l(this,M),R=0;break}}this.h=R,this.o+=N},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var C=j.length-8;C<j.length;++C)j[C]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)j[N++]=this.g[C]>>>M&255;return j};function u(j,N){var C=p;return Object.prototype.hasOwnProperty.call(C,j)?C[j]:C[j]=N(j)}function f(j,N){this.h=N;const C=[];let M=!0;for(let R=j.length-1;R>=0;R--){const P=j[R]|0;M&&P==N||(C[R]=P,M=!1)}this.g=C}var p={};function g(j){return-128<=j&&j<128?u(j,function(N){return new f([N|0],N<0?-1:0)}):new f([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return E;if(j<0)return L(x(-j));const N=[];let C=1;for(let M=0;j>=C;M++)N[M]=j/C|0,C*=4294967296;return new f(N,0)}function _(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return L(_(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=x(Math.pow(N,8));let M=E;for(let P=0;P<j.length;P+=8){var R=Math.min(8,j.length-P);const k=parseInt(j.substring(P,P+R),N);R<8?(R=x(Math.pow(N,R)),M=M.j(R).add(x(k))):(M=M.j(C),M=M.add(x(k)))}return M}var E=g(0),T=g(1),z=g(16777216);i=f.prototype,i.m=function(){if(X(this))return-L(this).m();let j=0,N=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);j+=(M>=0?M:4294967296+M)*N,N*=4294967296}return j},i.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(q(this))return"0";if(X(this))return"-"+L(this).toString(j);const N=x(Math.pow(j,6));var C=this;let M="";for(;;){const R=he(C,N).g;C=oe(C,R.j(N));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(j);if(C=R,q(C))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},i.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function q(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function X(j){return j.h==-1}i.l=function(j){return j=oe(this,j),X(j)?-1:q(j)?0:1};function L(j){const N=j.g.length,C=[];for(let M=0;M<N;M++)C[M]=~j.g[M];return new f(C,~j.h).add(T)}i.abs=function(){return X(this)?L(this):this},i.add=function(j){const N=Math.max(this.g.length,j.g.length),C=[];let M=0;for(let R=0;R<=N;R++){let P=M+(this.i(R)&65535)+(j.i(R)&65535),k=(P>>>16)+(this.i(R)>>>16)+(j.i(R)>>>16);M=k>>>16,P&=65535,k&=65535,C[R]=k<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function oe(j,N){return j.add(L(N))}i.j=function(j){if(q(this)||q(j))return E;if(X(this))return X(j)?L(this).j(L(j)):L(L(this).j(j));if(X(j))return L(this.j(L(j)));if(this.l(z)<0&&j.l(z)<0)return x(this.m()*j.m());const N=this.g.length+j.g.length,C=[];for(var M=0;M<2*N;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<j.g.length;R++){const P=this.i(M)>>>16,k=this.i(M)&65535,ie=j.i(R)>>>16,je=j.i(R)&65535;C[2*M+2*R]+=k*je,ne(C,2*M+2*R),C[2*M+2*R+1]+=P*je,ne(C,2*M+2*R+1),C[2*M+2*R+1]+=k*ie,ne(C,2*M+2*R+1),C[2*M+2*R+2]+=P*ie,ne(C,2*M+2*R+2)}for(j=0;j<N;j++)C[j]=C[2*j+1]<<16|C[2*j];for(j=N;j<2*N;j++)C[j]=0;return new f(C,0)};function ne(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function W(j,N){this.g=j,this.h=N}function he(j,N){if(q(N))throw Error("division by zero");if(q(j))return new W(E,E);if(X(j))return N=he(L(j),N),new W(L(N.g),L(N.h));if(X(N))return N=he(j,L(N)),new W(L(N.g),N.h);if(j.g.length>30){if(X(j)||X(N))throw Error("slowDivide_ only works with positive integers.");for(var C=T,M=N;M.l(j)<=0;)C=Te(C),M=Te(M);var R=xe(C,1),P=xe(M,1);for(M=xe(M,2),C=xe(C,2);!q(M);){var k=P.add(M);k.l(j)<=0&&(R=R.add(C),P=k),M=xe(M,1),C=xe(C,1)}return N=oe(j,R.j(N)),new W(R,N)}for(R=E;j.l(N)>=0;){for(C=Math.max(1,Math.floor(j.m()/N.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=x(C),k=P.j(N);X(k)||k.l(j)>0;)C-=M,P=x(C),k=P.j(N);q(P)&&(P=T),R=R.add(P),j=oe(j,k)}return new W(R,j)}i.B=function(j){return he(this,j).h},i.and=function(j){const N=Math.max(this.g.length,j.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)&j.i(M);return new f(C,this.h&j.h)},i.or=function(j){const N=Math.max(this.g.length,j.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)|j.i(M);return new f(C,this.h|j.h)},i.xor=function(j){const N=Math.max(this.g.length,j.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)^j.i(M);return new f(C,this.h^j.h)};function Te(j){const N=j.g.length+1,C=[];for(let M=0;M<N;M++)C[M]=j.i(M)<<1|j.i(M-1)>>>31;return new f(C,j.h)}function xe(j,N){const C=N>>5;N%=32;const M=j.g.length-C,R=[];for(let P=0;P<M;P++)R[P]=N>0?j.i(P+C)>>>N|j.i(P+C+1)<<32-N:j.i(P+C);return new f(R,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,m_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,Ir=f}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p_,Wo,g_,md,zm,y_,x_,v_;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(d,y){if(y)e:{var b=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var G=d[S];if(!(G in b))break e;b=b[G]}d=d[d.length-1],S=b[d],y=y(S),y!=S&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(y){var b=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&b.push([S,y[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,b){return d.call.apply(d.bind,arguments)}function x(d,y,b){return x=g,x.apply(null,arguments)}function _(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function E(d,y){function b(){}b.prototype=y.prototype,d.Z=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(S,G,Z){for(var ye=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ye[Fe-2]=arguments[Fe];return y.prototype[G].apply(S,ye)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function z(d){const y=d.length;if(y>0){const b=Array(y);for(let S=0;S<y;S++)b[S]=d[S];return b}return[]}function q(d,y){for(let S=1;S<arguments.length;S++){const G=arguments[S];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=d.length||0;const Z=G.length||0;d.length=b+Z;for(let ye=0;ye<Z;ye++)d[b+ye]=G[ye]}else d.push(G)}}class X{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(d){f.setTimeout(()=>{throw d},0)}function oe(){var d=j;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,b){const S=W.get();S.set(y,b),this.h?this.h.next=S:this.g=S,this.h=S}}var W=new X(()=>new he,d=>d.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,xe=!1,j=new ne,N=()=>{const d=Promise.resolve(void 0);Te=()=>{d.then(C)}};function C(){for(var d;d=oe();){try{d.h.call(d.g)}catch(b){L(b)}var y=W;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}xe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,y),f.removeEventListener("test",b,y)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function ie(d,y){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}E(ie,R),ie.prototype.init=function(d,y){const b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),K=0;function pe(d,y,b,S,G){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!S,this.ha=G,this.key=++K,this.da=this.fa=!1}function F(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function me(d,y,b){for(const S in d)y.call(b,d[S],S,d)}function _e(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function O(d){const y={};for(const b in d)y[b]=d[b];return y}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(d,y){let b,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(b in S)d[b]=S[b];for(let Z=0;Z<D.length;Z++)b=D[Z],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function A(d){this.src=d,this.g={},this.h=0}A.prototype.add=function(d,y,b,S,G){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const ye=re(d,y,S,G);return ye>-1?(y=d[ye],b||(y.fa=!1)):(y=new pe(y,this.src,Z,!!S,G),y.fa=b,d.push(y)),y};function H(d,y){const b=y.type;if(b in d.g){var S=d.g[b],G=Array.prototype.indexOf.call(S,y,void 0),Z;(Z=G>=0)&&Array.prototype.splice.call(S,G,1),Z&&(F(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function re(d,y,b,S){for(let G=0;G<d.length;++G){const Z=d[G];if(!Z.da&&Z.listener==y&&Z.capture==!!b&&Z.ha==S)return G}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Ne={};function Re(d,y,b,S,G){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Re(d,y[Z],b,S,G);return null}return b=be(b),d&&d[je]?d.J(y,b,p(S)?!!S.capture:!1,G):at(d,y,b,!1,S,G)}function at(d,y,b,S,G,Z){if(!y)throw Error("Invalid event type");const ye=p(G)?!!G.capture:!!G;let Fe=Ie(d);if(Fe||(d[ge]=Fe=new A(d)),b=Fe.add(y,b,S,ye,Z),b.proxy)return b;if(S=ht(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)P||(G=ye),G===void 0&&(G=!1),d.addEventListener(y.toString(),S,G);else if(d.attachEvent)d.attachEvent(ve(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ht(){function d(b){return y.call(d.src,d.listener,b)}const y=fe;return d}function $e(d,y,b,S,G){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)$e(d,y[Z],b,S,G);else S=p(S)?!!S.capture:!!S,b=be(b),d&&d[je]?(d=d.i,Z=String(y).toString(),Z in d.g&&(y=d.g[Z],b=re(y,b,S,G),b>-1&&(F(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete d.g[Z],d.h--)))):d&&(d=Ie(d))&&(y=d.g[y.toString()],d=-1,y&&(d=re(y,b,S,G)),(b=d>-1?y[d]:null)&&ce(b))}function ce(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[je])H(y.i,d);else{var b=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(b,S,d.capture):y.detachEvent?y.detachEvent(ve(b),S):y.addListener&&y.removeListener&&y.removeListener(S),(b=Ie(y))?(H(b,d),b.h==0&&(b.src=null,y[ge]=null)):F(d)}}}function ve(d){return d in Ne?Ne[d]:Ne[d]="on"+d}function fe(d,y){if(d.da)d=!0;else{y=new ie(y,this);const b=d.listener,S=d.ha||d.src;d.fa&&ce(d),d=b.call(S,y)}return d}function Ie(d){return d=d[ge],d instanceof A?d:null}var qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(d){return typeof d=="function"?d:(d[qe]||(d[qe]=function(y){return d.handleEvent(y)}),d[qe])}function Ye(){M.call(this),this.i=new A(this),this.M=this,this.G=null}E(Ye,M),Ye.prototype[je]=!0,Ye.prototype.removeEventListener=function(d,y,b,S){$e(this,d,y,b,S)};function We(d,y){var b,S=d.G;if(S)for(b=[];S;S=S.G)b.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new R(y,d);else if(y instanceof R)y.target=y.target||d;else{var G=y;y=new R(S,d),I(y,G)}G=!0;let Z,ye;if(b)for(ye=b.length-1;ye>=0;ye--)Z=y.g=b[ye],G=te(Z,S,!0,y)&&G;if(Z=y.g=d,G=te(Z,S,!0,y)&&G,G=te(Z,S,!1,y)&&G,b)for(ye=0;ye<b.length;ye++)Z=y.g=b[ye],G=te(Z,S,!1,y)&&G}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const b=d.g[y];for(let S=0;S<b.length;S++)F(b[S]);delete d.g[y],d.h--}}this.G=null},Ye.prototype.J=function(d,y,b,S){return this.i.add(String(d),y,!1,b,S)},Ye.prototype.K=function(d,y,b,S){return this.i.add(String(d),y,!0,b,S)};function te(d,y,b,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let Z=0;Z<y.length;++Z){const ye=y[Z];if(ye&&!ye.da&&ye.capture==b){const Fe=ye.listener,Lt=ye.ha||ye.src;ye.fa&&H(d.i,ye),G=Fe.call(Lt,S)!==!1&&G}}return G&&!S.defaultPrevented}function ke(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function Ze(d){d.g=ke(()=>{d.g=null,d.i&&(d.i=!1,Ze(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ct extends M{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ze(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(d){M.call(this),this.h=d,this.g={}}E(vn,M);var ze=[];function St(d){me(d.g,function(y,b){this.g.hasOwnProperty(b)&&ce(y)},d),d.g={}}vn.prototype.N=function(){vn.Z.N.call(this),St(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=f.JSON.stringify,Cn=f.JSON.parse,Hi=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function qr(){}function ci(){}var cn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){R.call(this,"d")}E(Dt,R);function un(){R.call(this,"c")}E(un,R);var wt={},zn=null;function qi(){return zn=zn||new Ye}wt.Ia="serverreachability";function Dc(d){R.call(this,wt.Ia,d)}E(Dc,R);function Ds(d){const y=qi();We(y,new Dc(y))}wt.STAT_EVENT="statevent";function Fr(d,y){R.call(this,wt.STAT_EVENT,d),this.stat=y}E(Fr,R);function qt(d){const y=qi();We(y,new Fr(y,d))}wt.Ja="timingevent";function Ms(d,y){R.call(this,wt.Ja,d),this.size=y}E(Ms,R);function Os(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function gs(){this.g=!0}gs.prototype.ua=function(){this.g=!1};function dh(d,y,b,S,G,Z){d.info(function(){if(d.g)if(Z){var ye="",Fe=Z.split("&");for(let ut=0;ut<Fe.length;ut++){var Lt=Fe[ut].split("=");if(Lt.length>1){const Rt=Lt[0];Lt=Lt[1];const ss=Rt.split("_");ye=ss.length>=2&&ss[1]=="type"?ye+(Rt+"="+Lt+"&"):ye+(Rt+"=redacted&")}}}else ye=null;else ye=Z;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+`
`+b+`
`+ye})}function Mc(d,y,b,S,G,Z,ye){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+`
`+b+`
`+Z+" "+ye})}function Vs(d,y,b,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+hh(d,b)+(S?" "+S:"")})}function Gr(d,y){d.info(function(){return"TIMEOUT: "+y})}gs.prototype.info=function(){};function hh(d,y){if(!d.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var b=Z[d];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ye=1;ye<S.length;ye++)S[ye]=""}}}}return bn(Z)}catch{return y}}var Kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$l;function Yr(){}E(Yr,qr),Yr.prototype.g=function(){return new XMLHttpRequest},$l=new Yr;function ui(d){return encodeURIComponent(String(d))}function Oc(d){var y=1;d=d.split(":");const b=[];for(;y>0&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function ys(d,y,b,S){this.j=d,this.i=y,this.l=b,this.S=S||1,this.V=new vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xs}function xs(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Ls(d,y,b){d.M=1,d.A=$r(Kt(y)),d.u=b,d.R=!0,Da(d,null)}function Da(d,y){d.F=Date.now(),Ps(d),d.B=Kt(d.A);var b=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),La(b.i,"t",S),d.C=0,b=d.j.L,d.h=new xs,d.g=Xc(d.j,b?y:null,!d.u),d.P>0&&(d.O=new ct(x(d.Y,d,d.g),d.P)),y=d.V,b=d.g,S=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(ze[0]=G.toString()),G=ze);for(let Z=0;Z<G.length;Z++){const ye=Re(b,G[Z],S||y.handleEvent,!1,y.h||y);if(!ye)break;y.g[ye.key]=ye}y=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Ds(),dh(d.i,d.v,d.B,d.l,d.S,d.u)}ys.prototype.ba=function(d){d=d.target;const y=this.O;y&&_s(d)==3?y.j():this.Y(d)},ys.prototype.Y=function(d){try{if(d==this.g)e:{const Fe=_s(this.g),Lt=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Fe!=4||Lt==7||(Lt==8||ut<=0?Ds(3):Ds(2)),Us(this);var y=this.g.ca();this.X=y;var b=fh(this);if(this.o=y==200,Mc(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var Z=S;break t}}Z=null}if(d=Z)Vs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,d);else{this.o=!1,this.m=3,qt(12),Bn(this),es(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=Lc(this,b),Rt==rn){Fe==4&&(this.m=4,qt(14),d=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ft){this.m=4,qt(15),Vs(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Vs(this.i,this.l,Rt,null),zs(this,Rt);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||b.length!=0||this.h.h||(this.m=1,qt(16),d=!1),this.o=this.o&&d,!d)Vs(this.i,this.l,b,"[Invalid Chunked Response]"),Bn(this),es(this);else if(b.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),co(ye),ye.P=!0,qt(11))}}else Vs(this.i,this.l,b,null),zs(this,b);Fe==4&&Bn(this),this.o&&!this.K&&(Fe==4?Kc(this.j,this):(this.o=!1,Ps(this)))}else hi(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),Bn(this),es(this)}}}catch{}finally{}};function fh(d){if(!Vc(d))return d.g.la();const y=dn(d.g);if(y==="")return"";let b="";const S=y.length,G=_s(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Bn(d),es(d),"";d.h.i=new f.TextDecoder}for(let Z=0;Z<S;Z++)d.h.h=!0,b+=d.h.i.decode(y[Z],{stream:!(G&&Z==S-1)});return y.length=0,d.h.g+=b,d.C=0,d.h.g}function Vc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Lc(d,y){var b=d.C,S=y.indexOf(`
`,b);return S==-1?rn:(b=Number(y.substring(b,S)),isNaN(b)?Ft:(S+=1,S+b>y.length?rn:(y=y.slice(S,S+b),d.C=S+b,y)))}ys.prototype.cancel=function(){this.K=!0,Bn(this)};function Ps(d){d.T=Date.now()+d.H,Ma(d,d.H)}function Ma(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Os(x(d.aa,d),y)}function Us(d){d.D&&(f.clearTimeout(d.D),d.D=null)}ys.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Gr(this.i,this.B),this.M!=2&&(Ds(),qt(17)),Bn(this),this.m=2,es(this)):Ma(this,this.T-d)};function es(d){d.j.I==0||d.K||Kc(d.j,d)}function Bn(d){Us(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,St(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function zs(d,y){try{var b=d.j;if(b.I!=0&&(b.g==d||Hs(b.h,d))){if(!d.L&&Hs(b.h,d)&&b.I==3){try{var S=b.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Ha(b),Wi(b);else break e;ta(b),qt(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Os(x(b.Va,b),6e3));Bs(b.h)<=1&&b.ta&&(b.ta=void 0)}else $s(b,11)}else if((d.L||b.g==d)&&Ha(b),!k(y))for(G=b.Ba.g.parse(y),y=0;y<G.length;y++){let ut=G[y];const Rt=ut[0];if(!(Rt<=b.K))if(b.K=Rt,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const ss=ut[3];ss!=null&&(b.ka=ss,b.j.info("VER="+b.ka));const Qs=ut[4];Qs!=null&&(b.za=Qs,b.j.info("SVER="+b.za));const ws=ut[5];ws!=null&&typeof ws=="number"&&ws>0&&(S=1.5*ws,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Es=d.g;if(Es){const na=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Z=S.h;Z.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Wl(Z,Z.h),Z.h=null))}if(S.G){const qa=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(S.wa=qa,pt(S.J,S.G,qa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ye=d;if(S.na=Qc(S,S.L?S.ba:null,S.W),ye.L){Zl(S.h,ye);var Fe=ye,Lt=S.O;Lt&&(Fe.H=Lt),Fe.D&&(Us(Fe),Ps(Fe)),S.g=ye}else Fc(S);b.i.length>0&&Ys(b)}else ut[0]!="stop"&&ut[0]!="close"||$s(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?$s(b,7):lo(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}Ds(4)}catch{}}var Gt=class{constructor(d,y){this.g=d,this.map=y}};function Ql(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Bs(d){return d.h?1:d.g?d.g.size:0}function Hs(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Wl(d,y){d.g?d.g.add(y):d.h=y}function Zl(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ql.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Jl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.G);return y}return z(d.i)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(d,y){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const S=d[b].indexOf("=");let G,Z=null;S>=0?(G=d[b].substring(0,S),Z=d[b].substring(S+1)):G=d[b],y(G,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Hn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Hn?(this.l=d.l,an(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.u),this.h=d.h,eo(this,Hc(d.i)),this.m=d.m):d&&(y=String(d).match(Pc))?(this.l=!1,an(this,y[1]||"",!0),this.o=qs(y[2]||""),this.g=qs(y[3]||"",!0),Fi(this,y[4]),this.h=qs(y[5]||"",!0),eo(this,y[6]||"",!0),this.m=qs(y[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}Hn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Qr(y,Va,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Qr(y,Va,!0),"@"),d.push(ui(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qr(b,b.charAt(0)=="/"?to:Uc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qr(b,zc)),d.join("")},Hn.prototype.resolve=function(d){const y=Kt(this);let b=!!d.j;b?an(y,d.j):b=!!d.o,b?y.o=d.o:b=!!d.g,b?y.g=d.g:b=d.u!=null;var S=d.h;if(b)Fi(y,d.u);else if(b=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=y.h.lastIndexOf("/");G!=-1&&(S=y.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const Z=[];for(let ye=0;ye<G.length;){const Fe=G[ye++];Fe=="."?S&&ye==G.length&&Z.push(""):Fe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),S&&ye==G.length&&Z.push("")):(Z.push(Fe),S=!0)}S=Z.join("/")}else S=G}return b?y.h=S:b=d.i.toString()!=="",b?eo(y,Hc(d.i)):b=!!d.m,b&&(y.m=d.m),y};function Kt(d){return new Hn(d)}function an(d,y,b){d.j=b?qs(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function eo(d,y,b){y instanceof Ki?(d.i=y,Pa(d.i,d.l)):(b||(y=Qr(y,Gi)),d.i=new Ki(y,d.l))}function pt(d,y,b){d.i.set(y,b)}function $r(d){return pt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qs(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qr(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,Rn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Rn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Va=/[#\/\?@]/g,Uc=/[#\?:]/g,to=/[#\?]/g,Gi=/[#\?@]/g,zc=/#/g;function Ki(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function In(d){d.g||(d.g=new Map,d.h=0,d.i&&Oa(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=Ki.prototype,i.add=function(d,y){In(this),this.i=null,d=Yi(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Bc(d,y){In(d),y=Yi(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function no(d,y){return In(d),y=Yi(d,y),d.g.has(y)}i.forEach=function(d,y){In(this),this.g.forEach(function(b,S){b.forEach(function(G){d.call(y,G,S,this)},this)},this)};function so(d,y){In(d);let b=[];if(typeof y=="string")no(d,y)&&(b=b.concat(d.g.get(Yi(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)b=b.concat(d[y]);return b}i.set=function(d,y){return In(this),this.i=null,d=Yi(this,d),no(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},i.get=function(d,y){return d?(d=so(this,d),d.length>0?String(d[0]):y):y};function La(d,y,b){Bc(d,y),b.length>0&&(d.i=null,d.g.set(Yi(d,y),z(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var b=y[S];const G=ui(b);b=so(this,b);for(let Z=0;Z<b.length;Z++){let ye=G;b[Z]!==""&&(ye+="="+ui(b[Z])),d.push(ye)}}return this.i=d.join("&")};function Hc(d){const y=new Ki;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Yi(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Pa(d,y){y&&!d.j&&(In(d),d.i=null,d.g.forEach(function(b,S){const G=S.toLowerCase();S!=G&&(Bc(this,S),La(this,G,b))},d)),d.j=y}function vs(d,y){const b=new gs;if(f.Image){const S=new Image;S.onload=_(ts,b,"TestLoadImage: loaded",!0,y,S),S.onerror=_(ts,b,"TestLoadImage: error",!1,y,S),S.onabort=_(ts,b,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(ts,b,"TestLoadImage: timeout",!1,y,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function io(d,y){const b=new gs,S=new AbortController,G=setTimeout(()=>{S.abort(),ts(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(Z=>{clearTimeout(G),Z.ok?ts(b,"TestPingServer: ok",!0,y):ts(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),ts(b,"TestPingServer: error",!1,y)})}function ts(d,y,b,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(b)}catch{}}function $i(){this.g=new Hi}function Fs(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Fs,qr),Fs.prototype.g=function(){return new Xr(this.i,this.h)};function Xr(d,y){Ye.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Xr,Ye),i=Xr.prototype,i.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,bs(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Qi(this):bs(this),this.readyState==3&&Ua(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Qi(this))},i.Na=function(d){this.g&&(this.response=d,Qi(this))},i.ga=function(){this.g&&Qi(this)};function Qi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,bs(d)}i.setRequestHeader=function(d,y){this.A.append(d,y)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function bs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ns(d){let y="";return me(d,function(b,S){y+=S,y+=":",y+=b,y+=`\r
`}),y}function Wr(d,y,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=ns(b),typeof d=="string"?b!=null&&ui(b):pt(d,y,b))}function xt(d){Ye.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(xt,Ye);var Gs=/^https?$/i,ro=["POST","PUT"];i=xt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,y,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$l.g(),this.g.onreadystatechange=T(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(Z){Zr(this,Z);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)b.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())b.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(ro,y,void 0)>=0)||S||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ye]of b)this.g.setRequestHeader(Z,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){Zr(this,Z)}};function Zr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,ao(d),di(d)}function ao(d){d.A||(d.A=!0,We(d,"complete"),We(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,We(this,"complete"),We(this,"abort"),di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),xt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},i.Xa=function(){Jr(this)};function Jr(d){if(d.h&&typeof u<"u"){if(d.v&&_s(d)==4)setTimeout(d.Ca.bind(d),0);else if(We(d,"readystatechange"),_s(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var S;if(S=Z===0){let ye=String(d.D).match(Pc)[1]||null;!ye&&f.self&&f.self.location&&(ye=f.self.location.protocol.slice(0,-1)),S=!Gs.test(ye?ye.toLowerCase():"")}b=S}if(b)We(d,"complete"),We(d,"success");else{d.o=6;try{var G=_s(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",ao(d)}}finally{di(d)}}}}function di(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,y||We(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function _s(d){return d.g?d.g.readyState:0}i.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Cn(y)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hi(d){const y={};d=(d.g&&_s(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(k(d[S]))continue;var b=Oc(d[S]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=y[G]||[];y[G]=Z,Z.push(b)}_e(y,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function Xi(d){this.za=0,this.i=[],this.j=new gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ks("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ks("baseRetryDelayMs",5e3,d),this.Za=Ks("retryDelaySeedMs",1e4,d),this.Ta=Ks("forwardChannelMaxRetries",2,d),this.va=Ks("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ql(d&&d.concurrentRequestLimit),this.Ba=new $i,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Xi.prototype,i.ka=8,i.I=1,i.connect=function(d,y,b,S){qt(0),this.W=d,this.H=y||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Qc(this,null,this.W),Ys(this)};function lo(d){if(za(d),d.I==3){var y=d.V++,b=Kt(d.J);if(pt(b,"SID",d.M),pt(b,"RID",y),pt(b,"TYPE","terminate"),ea(d,b),y=new ys(d,d.j,y),y.M=2,y.A=$r(Kt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=y.A,b=!0),b||(y.g=Xc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ps(y)}$c(d)}function Wi(d){d.g&&(co(d),d.g.cancel(),d.g=null)}function za(d){Wi(d),d.v&&(f.clearTimeout(d.v),d.v=null),Ha(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ys(d){if(!Xl(d.h)&&!d.m){d.m=!0;var y=d.Ea;Te||N(),xe||(Te(),xe=!0),j.add(y,d),d.D=0}}function Ba(d,y){return Bs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Os(x(d.Ea,d,y),Yc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new ys(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=O(Z),I(Z,this.U)):Z=this.U),this.u!==null||this.R||(G.J=Z,Z=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=qc(this,G,y),b=Kt(this.J),pt(b,"RID",d),pt(b,"CVER",22),this.G&&pt(b,"X-HTTP-Session-Id",this.G),ea(this,b),Z&&(this.R?y="headers="+ui(ns(Z))+"&"+y:this.u&&Wr(b,this.u,Z)),Wl(this.h,G),this.Ra&&pt(b,"TYPE","init"),this.S?(pt(b,"$req",y),pt(b,"SID","null"),G.U=!0,Ls(G,b,null)):Ls(G,b,y),this.I=2}}else this.I==3&&(d?oo(this,d):this.i.length==0||Xl(this.h)||oo(this))};function oo(d,y){var b;y?b=y.l:b=d.V++;const S=Kt(d.J);pt(S,"SID",d.M),pt(S,"RID",b),pt(S,"AID",d.K),ea(d,S),d.u&&d.o&&Wr(S,d.u,d.o),b=new ys(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),y&&(d.i=y.G.concat(d.i)),y=qc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wl(d.h,b),Ls(b,S,y)}function ea(d,y){d.H&&me(d.H,function(b,S){pt(y,S,b)}),d.l&&me({},function(b,S){pt(y,S,b)})}function qc(d,y,b){b=Math.min(d.i.length,b);const S=d.l?x(d.l.Ka,d.l,d):null;e:{var G=d.i;let Fe=-1;for(;;){const Lt=["count="+b];Fe==-1?b>0?(Fe=G[0].g,Lt.push("ofs="+Fe)):Fe=0:Lt.push("ofs="+Fe);let ut=!0;for(let Rt=0;Rt<b;Rt++){var Z=G[Rt].g;const ss=G[Rt].map;if(Z-=Fe,Z<0)Fe=Math.max(0,G[Rt].g-100),ut=!1;else try{Z="req"+Z+"_"||"";try{var ye=ss instanceof Map?ss:Object.entries(ss);for(const[Qs,ws]of ye){let Es=ws;p(ws)&&(Es=bn(ws)),Lt.push(Z+Qs+"="+encodeURIComponent(Es))}}catch(Qs){throw Lt.push(Z+"type="+encodeURIComponent("_badmap")),Qs}}catch{S&&S(ss)}}if(ut){ye=Lt.join("&");break e}}ye=void 0}return d=d.i.splice(0,b),y.G=d,ye}function Fc(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;Te||N(),xe||(Te(),xe=!0),j.add(y,d),d.A=0}}function ta(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Os(x(d.Da,d),Yc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Os(x(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),Wi(this),Gc(this))};function co(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Gc(d){d.g=new ys(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Kt(d.na);pt(y,"RID","rpc"),pt(y,"SID",d.M),pt(y,"AID",d.K),pt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&pt(y,"TO",d.ia),pt(y,"TYPE","xmlhttp"),ea(d,y),d.u&&d.o&&Wr(y,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=$r(Kt(y)),b.u=null,b.R=!0,Da(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Wi(this),ta(this),qt(19))};function Ha(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Kc(d,y){var b=null;if(d.g==y){Ha(d),co(d),d.g=null;var S=2}else if(Hs(d.h,y))b=y.G,Zl(d.h,y),S=1;else return;if(d.I!=0){if(y.o)if(S==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var G=d.D;S=qi(),We(S,new Ms(S,b)),Ys(d)}else Fc(d);else if(G=y.m,G==3||G==0&&y.X>0||!(S==1&&Ba(d,y)||S==2&&ta(d)))switch(b&&b.length>0&&(y=d.h,y.i=y.i.concat(b)),G){case 1:$s(d,5);break;case 4:$s(d,10);break;case 3:$s(d,6);break;default:$s(d,2)}}}function Yc(d,y){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*y}function $s(d,y){if(d.j.info("Error code "+y),y==2){var b=x(d.bb,d),S=d.Ua;const G=!S;S=new Hn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||an(S,"https"),$r(S),G?vs(S.toString(),b):io(S.toString(),b)}else qt(2);d.I=0,d.l&&d.l.pa(y),$c(d),za(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function $c(d){if(d.I=0,d.ja=[],d.l){const y=Jl(d.h);(y.length!=0||d.i.length!=0)&&(q(d.ja,y),q(d.ja,d.i),d.h.i.length=0,z(d.i),d.i.length=0),d.l.oa()}}function Qc(d,y,b){var S=b instanceof Hn?Kt(b):new Hn(b);if(S.g!="")y&&(S.g=y+"."+S.g),Fi(S,S.u);else{var G=f.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const Z=new Hn(null);S&&an(Z,S),y&&(Z.g=y),G&&Fi(Z,G),b&&(Z.h=b),S=Z}return b=d.G,y=d.wa,b&&y&&pt(S,b,y),pt(S,"VER",d.ka),ea(d,S),S}function Xc(d,y,b){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new xt(new Fs({ab:b})):new xt(d.ma),y.Fa(d.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}i=Wc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Zi(){}Zi.prototype.g=function(d,y){return new Nn(d,y)};function Nn(d,y){Ye.call(this),this.g=new Xi(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!k(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new fi(this)}E(Nn,Ye),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){lo(this.g)},Nn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=bn(d),d=b);y.i.push(new Gt(y.Ya++,d)),y.I==3&&Ys(y)},Nn.prototype.N=function(){this.g.l=null,delete this.j,lo(this.g),delete this.g,Nn.Z.N.call(this)};function Zc(d){Dt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}E(Zc,Dt);function Jc(){un.call(this),this.status=1}E(Jc,un);function fi(d){this.g=d}E(fi,Wc),fi.prototype.ra=function(){We(this.g,"a")},fi.prototype.qa=function(d){We(this.g,new Zc(d))},fi.prototype.pa=function(d){We(this.g,new Jc)},fi.prototype.oa=function(){We(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,v_=function(){return new Zi},x_=function(){return qi()},y_=wt,zm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,md=Kr,Yl.COMPLETE="complete",g_=Yl,ci.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Wo=ci,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,p_=xt}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore",dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new op("@firebase/firestore");function bl(){return Ca.logLevel}function Se(i,...e){if(Ca.logLevel<=tt.DEBUG){const n=e.map(vp);Ca.debug(`Firestore (${Hl}): ${i}`,...n)}}function Mi(i,...e){if(Ca.logLevel<=tt.ERROR){const n=e.map(vp);Ca.error(`Firestore (${Hl}): ${i}`,...n)}}function Il(i,...e){if(Ca.logLevel<=tt.WARN){const n=e.map(vp);Ca.warn(`Firestore (${Hl}): ${i}`,...n)}}function vp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,b_(i,r,n)}function b_(i,e,n){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mi(r),new Error(r)}function mt(i,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,i||b_(e,l,r)}function He(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class qN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FN{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mt(this.o===void 0,42304);let r=this.i;const l=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new kr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new kr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new __(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class GN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){mt(this.o===void 0,3512);const r=u=>{u.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=$N(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function nt(i,e){return i<e?-1:i>e?1:0}function Bm(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return _m(l)===_m(u)?nt(l,u):_m(l)?1:-1}return nt(i.length,e.length)}const QN=55296,XN=57343;function _m(i){const e=i.charCodeAt(0);return e>=QN&&e<=XN}function kl(i,e,n){return i.length===e.length&&i.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=ei.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return nt(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),l=ei.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?ei.extractNumericId(e).compare(ei.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class Nt extends ei{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new Nt(n)}static emptyPath(){return new Nt([])}}const WN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ei{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return WN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fv}static keyField(){return new yn([fv])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(u(),l++)}if(u(),f)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Nt.fromString(e))}static fromName(e){return new Me(Nt.fromString(e).popFirst(5))}static empty(){return new Me(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(i,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ZN(i,e,n,r){if(e===!0&&r===!0)throw new Ee(le.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function mv(i){if(!Me.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function pv(i){if(Me.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function E_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Kd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Pe(12329,{type:typeof i})}function Wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kd(i);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(i,e){const n={typeString:i};return e&&(n.value=e),n}function Tc(i,e){if(!E_(i))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new Ee(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=-62135596800,yv=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*yv);return new Ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gv)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yv}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tc(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:en("string",Ct._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ct(0,0))}static max(){return new Ue(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function JN(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=Ue.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Mr(l,Me.empty(),e)}function eA(i){return new Mr(i.readTime,i.key,dc)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(Ue.min(),Me.empty(),dc)}static max(){return new Mr(Ue.max(),Me.empty(),dc)}}function tA(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(i.documentKey,e.documentKey),n!==0?n:nt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(i){if(i.code!==le.FAILED_PRECONDITION||i.message!==nA)throw i;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,r)=>{n(e)}))}static reject(e){return new de(((n,r)=>{r(e)}))}static waitFor(e){return new de(((n,r)=>{let l=0,u=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&n()}),(g=>r(g)))})),f=!0,u===l&&n()}))}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next((l=>l?de.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new de(((r,l)=>{const u=e.length,f=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((_=>{f[x]=_,++p,p===u&&r(f)}),(_=>l(_)))}}))}static doWhile(e,n){return new de(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function iA(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-1;function $d(i){return i==null}function Rd(i){return i===0&&1/i==-1/0}function rA(i){return typeof i=="number"&&Number.isInteger(i)&&!Rd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="";function aA(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=xv(e)),e=lA(i.get(n),e);return xv(e)}function lA(i,e){let n=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":n+="";break;case T_:n+="";break;default:n+=u}}return n}function xv(i){return i+T_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Br(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function S_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??gn.RED,this.left=l??gn.EMPTY,this.right=u??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new gn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return gn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(e){return new bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new sn(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new N_("Invalid base64 string: "+u):u}})(e);return new xn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const oA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(i){if(mt(!!i,39018),typeof i=="string"){let e=0;const n=oA.exec(i);if(mt(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(i.seconds),nanos:zt(i.nanos)}}function zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Vr(i){return typeof i=="string"?xn.fromBase64String(i):xn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="server_timestamp",j_="__type__",C_="__previous_value__",R_="__local_write_time__";function wp(i){return(i?.mapValue?.fields||{})[j_]?.stringValue===A_}function Qd(i){const e=i.mapValue.fields[C_];return wp(e)?Qd(e):e}function hc(i){const e=Or(i.mapValue.fields[R_].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,r,l,u,f,p,g,x,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=_}}const Id="(default)";class fc{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new fc("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="__type__",uA="__max__",ad={mapValue:{}},k_="__vector__",kd="value";function Lr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wp(i)?4:hA(i)?9007199254740991:dA(i)?10:11:Pe(28295,{value:i})}function oi(i,e){if(i===e)return!0;const n=Lr(i);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hc(i).isEqual(hc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Or(l.timestampValue),p=Or(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return Vr(l.bytesValue).isEqual(Vr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return zt(l.geoPointValue.latitude)===zt(u.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return zt(l.integerValue)===zt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=zt(l.doubleValue),p=zt(u.doubleValue);return f===p?Rd(f)===Rd(p):isNaN(f)&&isNaN(p)}return!1})(i,e);case 9:return kl(i.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(vv(f)!==vv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!oi(f[g],p[g])))return!1;return!0})(i,e);default:return Pe(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>oi(n,e)))!==void 0}function Dl(i,e){if(i===e)return 0;const n=Lr(i),r=Lr(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=zt(u.integerValue||u.doubleValue),g=zt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return _v(i.timestampValue,e.timestampValue);case 4:return _v(hc(i),hc(e));case 5:return Bm(i.stringValue,e.stringValue);case 6:return(function(u,f){const p=Vr(u),g=Vr(f);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),g=f.split("/");for(let x=0;x<p.length&&x<g.length;x++){const _=nt(p[x],g[x]);if(_!==0)return _}return nt(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=nt(zt(u.latitude),zt(f.latitude));return p!==0?p:nt(zt(u.longitude),zt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return wv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},g=f.fields||{},x=p[kd]?.arrayValue,_=g[kd]?.arrayValue,E=nt(x?.values?.length||0,_?.values?.length||0);return E!==0?E:wv(x,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ad.mapValue&&f===ad.mapValue)return 0;if(u===ad.mapValue)return 1;if(f===ad.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=f.fields||{},_=Object.keys(x);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const T=Bm(g[E],_[E]);if(T!==0)return T;const z=Dl(p[g[E]],x[_[E]]);if(z!==0)return z}return nt(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function _v(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return nt(i,e);const n=Or(i),r=Or(e),l=nt(n.seconds,r.seconds);return l!==0?l:nt(n.nanos,r.nanos)}function wv(i,e){const n=i.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=Dl(n[l],r[l]);if(u)return u}return nt(n.length,r.length)}function Ml(i){return Hm(i)}function Hm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Vr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Me.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=Hm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Hm(n.fields[f])}`;return l+"}"})(i.mapValue):Pe(61005,{value:i})}function pd(i){switch(Lr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(i);return e?16+pd(e):16;case 5:return 2*i.stringValue.length;case 6:return Vr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+pd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return Br(r.fields,((u,f)=>{l+=u.length+pd(f)})),l})(i.mapValue);default:throw Pe(13486,{value:i})}}function Ev(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function qm(i){return!!i&&"integerValue"in i}function Ep(i){return!!i&&"arrayValue"in i}function Tv(i){return!!i&&"nullValue"in i}function Sv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gd(i){return!!i&&"mapValue"in i}function dA(i){return(i?.mapValue?.fields||{})[I_]?.stringValue===k_}function ic(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Br(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ic(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(i.arrayValue.values[n]);return e}return{...i}}function hA(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===uA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=yn.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=ic(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Br(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new Pn(ic(this.value))}}function D_(i){const e=[];return Br(i.fields,((n,r)=>{const l=new yn([n]);if(gd(r)){const u=D_(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,l,u,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Tn(e,0,Ue.min(),Ue.min(),Ue.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,l){return new Tn(e,1,n,Ue.min(),r,l,0)}static newNoDocument(e,n){return new Tn(e,2,n,Ue.min(),Ue.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Ue.min(),Ue.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(i,e,n){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],f=i.position[l];if(u.field.isKeyField()?r=Me.comparator(Me.fromName(f.referenceValue),n.key):r=Dl(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!oi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function fA(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{}class Jt extends M_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pA(e,n,r):n==="array-contains"?new xA(e,r):n==="in"?new vA(e,r):n==="not-in"?new bA(e,r):n==="array-contains-any"?new _A(e,r):new Jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gA(e,r):new yA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dl(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(Dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends M_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ks(e,n)}matches(e){return O_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O_(i){return i.op==="and"}function V_(i){return mA(i)&&O_(i)}function mA(i){for(const e of i.filters)if(e instanceof ks)return!1;return!0}function Fm(i){if(i instanceof Jt)return i.field.canonicalString()+i.op.toString()+Ml(i.value);if(V_(i))return i.filters.map((e=>Fm(e))).join(",");{const e=i.filters.map((n=>Fm(n))).join(",");return`${i.op}(${e})`}}function L_(i,e){return i instanceof Jt?(function(r,l){return l instanceof Jt&&r.op===l.op&&r.field.isEqual(l.field)&&oi(r.value,l.value)})(i,e):i instanceof ks?(function(r,l){return l instanceof ks&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,p)=>u&&L_(f,l.filters[p])),!0):!1})(i,e):void Pe(19439)}function P_(i){return i instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ml(n.value)}`})(i):i instanceof ks?(function(n){return n.op.toString()+" {"+n.getFilters().map(P_).join(" ,")+"}"})(i):"Filter"}class pA extends Jt{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class gA extends Jt{constructor(e,n){super(e,"in",n),this.keys=U_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yA extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=U_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function U_(i,e){return(e.arrayValue?.values||[]).map((n=>Me.fromName(n.referenceValue)))}class xA extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ep(n)&&mc(n.arrayValue,this.value)}}class vA extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class bA extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class _A extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>mc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n=null,r=[],l=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function jv(i,e=null,n=[],r=[],l=null,u=null,f=null){return new wA(i,e,n,r,l,u,f)}function Tp(i){const e=He(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Fm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),$d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ml(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ml(r))).join(",")),e.Te=n}return e.Te}function Sp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!fA(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!L_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Av(i.startAt,e.startAt)&&Av(i.endAt,e.endAt)}function Gm(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n=null,r=[],l=[],u=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EA(i,e,n,r,l,u,f,p){return new Gl(i,e,n,r,l,u,f,p)}function Np(i){return new Gl(i)}function Cv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function z_(i){return i.collectionGroup!==null}function rc(i){const e=He(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new sn(yn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new pc(u,r))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new pc(yn.keyField(),r))}return e.Ie}function si(i){const e=He(i);return e.Ee||(e.Ee=TA(e,rc(i))),e.Ee}function TA(i,e){if(i.limitType==="F")return jv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new pc(l.field,u)}));const n=i.endAt?new Dd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Dd(i.startAt.position,i.startAt.inclusive):null;return jv(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Km(i,e){const n=i.filters.concat([e]);return new Gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Md(i,e,n){return new Gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Xd(i,e){return Sp(si(i),si(e))&&i.limitType===e.limitType}function B_(i){return`${Tp(si(i))}|lt:${i.limitType}`}function _l(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>P_(l))).join(", ")}]`),$d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>Ml(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>Ml(l))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function Wd(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Me.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of rc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,g){const x=Nv(f,p,g);return f.inclusive?x<=0:x<0})(r.startAt,rc(r),l)||r.endAt&&!(function(f,p,g){const x=Nv(f,p,g);return f.inclusive?x>=0:x>0})(r.endAt,rc(r),l))})(i,e)}function SA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function H_(i){return(e,n)=>{let r=!1;for(const l of rc(i)){const u=NA(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function NA(i,e,n){const r=i.field.isKeyField()?Me.comparator(e.key,n.key):(function(u,f,p){const g=f.data.field(u),x=p.data.field(u);return g!==null&&x!==null?Dl(g,x):Pe(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return S_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Mt(Me.comparator);function Oi(){return AA}const q_=new Mt(Me.comparator);function Zo(...i){let e=q_;for(const n of i)e=e.insert(n.key,n);return e}function F_(i){let e=q_;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function _a(){return ac()}function G_(){return ac()}function ac(){return new Ia((i=>i.toString()),((i,e)=>i.isEqual(e)))}const jA=new Mt(Me.comparator),CA=new sn(Me.comparator);function st(...i){let e=CA;for(const n of i)e=e.add(n);return e}const RA=new sn(nt);function IA(){return RA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function K_(i){return{integerValue:""+i}}function kA(i,e){return rA(e)?K_(e):Ap(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this._=void 0}}function DA(i,e,n){return i instanceof Od?(function(l,u){const f={fields:{[j_]:{stringValue:A_},[R_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&wp(u)&&(u=Qd(u)),u&&(f.fields[C_]=u),{mapValue:f}})(n,e):i instanceof gc?$_(i,e):i instanceof yc?Q_(i,e):(function(l,u){const f=Y_(l,u),p=Rv(f)+Rv(l.Ae);return qm(f)&&qm(l.Ae)?K_(p):Ap(l.serializer,p)})(i,e)}function MA(i,e,n){return i instanceof gc?$_(i,e):i instanceof yc?Q_(i,e):n}function Y_(i,e){return i instanceof Vd?(function(r){return qm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Od extends Zd{}class gc extends Zd{constructor(e){super(),this.elements=e}}function $_(i,e){const n=X_(e);for(const r of i.elements)n.some((l=>oi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class yc extends Zd{constructor(e){super(),this.elements=e}}function Q_(i,e){let n=X_(e);for(const r of i.elements)n=n.filter((l=>!oi(l,r)));return{arrayValue:{values:n}}}class Vd extends Zd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Rv(i){return zt(i.integerValue||i.doubleValue)}function X_(i){return Ep(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function OA(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof gc&&l instanceof gc||r instanceof yc&&l instanceof yc?kl(r.elements,l.elements,oi):r instanceof Vd&&l instanceof Vd?oi(r.Ae,l.Ae):r instanceof Od&&l instanceof Od})(i.transform,e.transform)}class VA{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Jd{}function W_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new eh(i.key,jn.none()):new Sc(i.key,i.data,jn.none());{const n=i.data,r=Pn.empty();let l=new sn(yn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Hr(i.key,r,new Xn(l.toArray()),jn.none())}}function LA(i,e,n){i instanceof Sc?(function(l,u,f){const p=l.value.clone(),g=kv(l.fieldTransforms,u,f.transformResults);p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Hr?(function(l,u,f){if(!yd(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=kv(l.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(Z_(l)),g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function lc(i,e,n,r){return i instanceof Sc?(function(u,f,p,g){if(!yd(u.precondition,f))return p;const x=u.value.clone(),_=Dv(u.fieldTransforms,g,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(i,e,n,r):i instanceof Hr?(function(u,f,p,g){if(!yd(u.precondition,f))return p;const x=Dv(u.fieldTransforms,g,f),_=f.data;return _.setAll(Z_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,e,n,r):(function(u,f,p){return yd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,e,n)}function PA(i,e){let n=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=Y_(r.transform,l||null);u!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,u))}return n||null}function Iv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&kl(r,l,((u,f)=>OA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Sc extends Jd{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Hr extends Jd{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Z_(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function kv(i,e,n){const r=new Map;mt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let l=0;l<n.length;l++){const u=i[l],f=u.transform,p=e.data.field(u.field);r.set(u.field,MA(f,p,n[l]))}return r}function Dv(i,e,n){const r=new Map;for(const l of i){const u=l.transform,f=n.data.field(l.field);r.set(l.field,DA(u,f,e))}return r}class eh extends Jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UA extends Jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&LA(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=G_();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(l.key)?null:p;const g=W_(f,p);g!==null&&r.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),st())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((n,r)=>Iv(n,r)))&&kl(this.baseMutations,e.baseMutations,((n,r)=>Iv(n,r)))}}class jp{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return jA})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new jp(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,rt;function qA(i){switch(i){case le.OK:return Pe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Pe(15467,{code:i})}}function J_(i){if(i===void 0)return Mi("GRPC error has no .code"),le.UNKNOWN;switch(i){case Wt.OK:return le.OK;case Wt.CANCELLED:return le.CANCELLED;case Wt.UNKNOWN:return le.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return le.INTERNAL;case Wt.UNAVAILABLE:return le.UNAVAILABLE;case Wt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Wt.NOT_FOUND:return le.NOT_FOUND;case Wt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Wt.ABORTED:return le.ABORTED;case Wt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Wt.DATA_LOSS:return le.DATA_LOSS;default:return Pe(39323,{code:i})}}(rt=Wt||(Wt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new Ir([4294967295,4294967295],0);function Mv(i){const e=FA().encode(i),n=new m_;return n.update(e),new Uint8Array(n.digest())}function Ov(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([l,u],0)]}class Cp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(r<0)throw new Jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ir.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Ir.fromNumber(r)));return l.compare(GA)===1&&(l=new Ir([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mv(e),[r,l]=Ov(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Cp(u,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=Mv(e),[r,l]=Ov(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new th(Ue.min(),l,new Mt(nt),Oi(),st())}}class Nc{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nc(r,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class e1{constructor(e,n){this.targetId=e,this.Ce=n}}class t1{constructor(e,n,r=xn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Vv{constructor(){this.ve=0,this.Fe=Lv(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),n=st(),r=st();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Pe(38017,{changeType:u})}})),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Lv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=ld(),this.He=ld(),this.Ye=new Mt(nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Gm(u))if(r===0){const f=new Me(u.path);this.et(n,f,Tn.newNoDocument(f,Ue.min()))}else mt(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let f,p;try{f=Vr(r).toUint8Array()}catch(g){if(g instanceof N_)return Il("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Cp(f,l,u)}catch(g){return Il(g instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Gm(p.target)){const g=new Me(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Tn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=st();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new th(e,n,this.Ye,this.je,r);return this.je=Oi(),this.Je=ld(),this.He=ld(),this.Ye=new Mt(nt),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new sn(nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new sn(nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ld(){return new Mt(Me.comparator)}function Lv(){return new Mt(Me.comparator)}const YA={asc:"ASCENDING",desc:"DESCENDING"},$A={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QA={and:"AND",or:"OR"};class XA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(i,e){return i.useProto3Json||$d(e)?e:{value:e}}function Ld(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function WA(i,e){return Ld(i,e.toTimestamp())}function ii(i){return mt(!!i,49232),Ue.fromTimestamp((function(n){const r=Or(n);return new Ct(r.seconds,r.nanos)})(i))}function Rp(i,e){return $m(i,e).canonicalString()}function $m(i,e){const n=(function(l){return new Nt(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?n:n.child(e)}function s1(i){const e=Nt.fromString(i);return mt(o1(e),10190,{key:e.toString()}),e}function Qm(i,e){return Rp(i.databaseId,e.path)}function wm(i,e){const n=s1(e);if(n.get(1)!==i.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Me(r1(n))}function i1(i,e){return Rp(i.databaseId,e)}function ZA(i){const e=s1(i);return e.length===4?Nt.emptyPath():r1(e)}function Xm(i){return new Nt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function r1(i){return mt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Pv(i,e,n){return{name:Qm(i,e),fields:n.value.mapValue.fields}}function JA(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Pe(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(mt(_===void 0||typeof _=="string",58123),xn.fromBase64String(_||"")):(mt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),xn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(x){const _=x.code===void 0?le.UNKNOWN:J_(x.code);return new Ee(_,x.message||"")})(f);n=new t1(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=wm(i,r.document.name),u=ii(r.document.updateTime),f=r.document.createTime?ii(r.document.createTime):Ue.min(),p=new Pn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(l,u,f,p),x=r.targetIds||[],_=r.removedTargetIds||[];n=new xd(x,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=wm(i,r.document),u=r.readTime?ii(r.readTime):Ue.min(),f=Tn.newNoDocument(l,u),p=r.removedTargetIds||[];n=new xd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=wm(i,r.document),u=r.removedTargetIds||[];n=new xd([],u,l,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new HA(l,u),p=r.targetId;n=new e1(p,f)}}return n}function ej(i,e){let n;if(e instanceof Sc)n={update:Pv(i,e.key,e.value)};else if(e instanceof eh)n={delete:Qm(i,e.key)};else if(e instanceof Hr)n={update:Pv(i,e.key,e.data),updateMask:cj(e.fieldMask)};else{if(!(e instanceof UA))return Pe(16599,{Vt:e.type});n={verify:Qm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Od)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Vd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Pe(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:WA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Pe(27497)})(i,e.precondition)),n}function tj(i,e){return i&&i.length>0?(mt(e!==void 0,14353),i.map((n=>(function(l,u){let f=l.updateTime?ii(l.updateTime):ii(u);return f.isEqual(Ue.min())&&(f=ii(u)),new VA(f,l.transformResults||[])})(n,e)))):[]}function nj(i,e){return{documents:[i1(i,e.path)]}}function sj(i,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i1(i,l);const u=(function(x){if(x.length!==0)return l1(ks.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(T){return{field:wl(T.field),direction:aj(T.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Ym(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function ij(i){let e=ZA(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){mt(r===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(E){const T=a1(E);return T instanceof ks&&V_(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((T=>(function(q){return new pc(El(q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,$d(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,z=E.values||[];return new Dd(z,T)})(n.startAt));let x=null;return n.endAt&&(x=(function(E){const T=!E.before,z=E.values||[];return new Dd(z,T)})(n.endAt)),EA(e,l,f,u,p,"F",g,x)}function rj(i,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function a1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=El(n.unaryFilter.field);return Jt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(n.unaryFilter.field);return Jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=El(n.unaryFilter.field);return Jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Jt.create(El(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ks.create(n.compositeFilter.filters.map((r=>a1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(n.compositeFilter.op))})(i):Pe(30097,{filter:i})}function aj(i){return YA[i]}function lj(i){return $A[i]}function oj(i){return QA[i]}function wl(i){return{fieldPath:i.canonicalString()}}function El(i){return yn.fromServerFormat(i.fieldPath)}function l1(i){return i instanceof Jt?(function(n){if(n.op==="=="){if(Sv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(Tv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(Tv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:lj(n.op),value:n.value}}})(i):i instanceof ks?(function(n){const r=n.getFilters().map((l=>l1(l)));return r.length===1?r[0]:{compositeFilter:{op:oj(n.op),filters:r}}})(i):Pe(54877,{filter:i})}function cj(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function o1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,l,u=Ue.min(),f=Ue.min(),p=xn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.yt=e}}function dj(i){const e=ij({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.Cn=new fj}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Mr.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class fj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new sn(Nt.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new sn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c1=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(c1,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ol(0)}static cr(){return new Ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="LruGarbageCollector",mj=1048576;function Bv([i,e],[n,r]){const l=nt(i,n);return l===0?nt(e,r):l}class pj{constructor(e){this.Ir=e,this.buffer=new sn(Bv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Bv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(zv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fl(n)?Se(zv,"Ignoring IndexedDB error during garbage collection: ",n):await ql(n)}await this.Vr(3e5)}))}}class yj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Yd.ce);const r=new pj(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Uv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,f,p,g,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,f=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,n)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(x=Date.now(),bl()<=tt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(x-g)+`ms
Total Duration: ${x-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function xj(i,e){return new yj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.changes=new Ia((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&lc(r.mutation,l,Xn.empty(),Ct.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,st()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=st()){const l=_a();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let f=Zo();return u.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=_a();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,st())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let u=Oi();const f=ac(),p=(function(){return ac()})();return n.forEach(((g,x)=>{const _=r.get(x.key);l.has(x.key)&&(_===void 0||_.mutation instanceof Hr)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),lc(_.mutation,x,_.mutation.getFieldMask(),Ct.now())):f.set(x.key,Xn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,_)=>f.set(x,_))),n.forEach(((x,_)=>p.set(x,new bj(_,f.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=ac();let l=new Mt(((f,p)=>f-p)),u=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let _=r.get(g)||Xn.empty();_=p.applyToLocalView(x,_),r.set(g,_);const E=(l.get(p.batchId)||st()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,_=g.value,E=G_();_.forEach((T=>{if(!u.has(T)){const z=W_(n.get(T),r.get(T));z!==null&&E.set(T,z),u=u.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,E))}return de.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):de.resolve(_a());let p=dc,g=u;return f.next((x=>de.forEach(x,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{g=g.insert(_,T)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,st()))).next((_=>({batchId:p,changes:F_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((r=>{let l=Zo();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let f=Zo();return this.indexManager.getCollectionParents(e,u).next((p=>de.forEach(p,(g=>{const x=(function(E,T){return new Gl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,l).next((_=>{_.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((f=>{u.forEach(((g,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,Tn.newInvalidDocument(_)))}));let p=Zo();return f.forEach(((g,x)=>{const _=u.get(g);_!==void 0&&lc(_.mutation,x,Xn.empty(),Ct.now()),Wd(n,x)&&(p=p.insert(g,x))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return de.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ii(l.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:dj(l.bundledQuery),readTime:ii(l.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.overlays=new Mt(Me.comparator),this.qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_a();return de.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),de.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const l=_a(),u=n.length+1,f=new Me(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>r&&l.set(g.getKey(),g)}return de.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Mt(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=_a(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const p=_a(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,_)=>p.set(x,_))),!(p.size()>=l)););return de.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new BA(n,r));let u=this.qr.get(n);u===void 0&&(u=st(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Qr=new sn(on.$r),this.Ur=new sn(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new on(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Me(new Nt([])),r=new on(n,e),l=new on(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new Nt([])),r=new on(n,e),l=new on(n,e+1);let u=st();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new on(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Me.comparator(e.key,n.key)||nt(e.Yr,n.Yr)}static Kr(e,n){return nt(e.Yr,n.Yr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new sn(on.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new zA(u,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new on(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,n){return de.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?_p:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),l=new on(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn(nt);return n.forEach((l=>{const u=new on(l,0),f=new on(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;Me.isDocumentKey(u)||(u=u.child(""));const f=new on(new Me(u),0);let p=new sn(nt);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!r.isPrefixOf(x)&&(x.length===l&&(p=p.add(g.Yr)),!0)}),f),de.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(n.mutations,(l=>{const u=new on(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new on(n,0),l=this.Zr.firstAfterOrEqual(r);return de.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=Oi();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():Tn.newInvalidDocument(l))})),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=Oi();const f=n.path,p=new Me(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:_}}=g.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||tA(eA(_),r)<=0||(l.has(_.key)||Wd(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Pe(9500)}ii(e,n){return de.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Aj(this)}getSize(e){return de.resolve(this.size)}}class Aj extends vj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),de.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.persistence=e,this.si=new Ia((n=>Tp(n)),Sp),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Ip,this.targetCount=0,this.ai=Ol.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),de.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Pr(n),de.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),de.waitFor(u).next((()=>l))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yd(0),this.li=!1,this.li=!0,this.hi=new Tj,this.referenceDelegate=e(this),this.Pi=new jj(this),this.indexManager=new hj,this.remoteDocumentCache=(function(l){return new Nj(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new uj(n),this.Ii=new wj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ej,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Sj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const l=new Cj(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Cj extends sA{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Ri=new Ip,this.Vi=null}static mi(e){return new kp(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const l=Me.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pd{constructor(e,n){this.persistence=e,this.pi=new Ia((r=>aA(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=xj(this,n)}static mi(e,n){return new Pd(e,n)}Ei(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return de.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?de.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,u.removeEntry(f,Ue.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}br(e,n,r){return de.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return de.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=st(),l=st();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Dp(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return i2()?8:iA(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Rj;return this.Ss(e,n,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(bl()<=tt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(bl()<=tt.DEBUG&&Se("QueryEngine","Query:",_l(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(bl()<=tt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):de.resolve())}ys(e,n){if(Cv(n))return de.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Md(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=st(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const x=this.Ds(n,p);return this.Cs(n,x,f,g.readTime)?this.ys(e,Md(n,null,"F")):this.vs(e,x,n,g)}))))})))))}ws(e,n,r,l){return Cv(n)||l.isEqual(Ue.min())?de.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,l)?de.resolve(null):(bl()<=tt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),_l(n)),this.vs(e,f,n,JN(l,dc)).next((p=>p)))}))}Ds(e,n){let r=new sn(H_(e));return n.forEach(((l,u)=>{Wd(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return bl()<=tt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="LocalStore",kj=3e8;class Dj{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Mt(nt),this.xs=new Ia((u=>Tp(u)),Sp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _j(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Mj(i,e,n,r){return new Dj(i,e,n,r)}async function d1(i,e){const n=He(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let g=st();for(const x of l){f.push(x.batchId);for(const _ of x.mutations)g=g.add(_.key)}for(const x of u){p.push(x.batchId);for(const _ of x.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(r,g).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:p})))}))}))}function Oj(i,e){const n=He(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,_){const E=x.batch,T=E.keys();let z=de.resolve();return T.forEach((q=>{z=z.next((()=>_.getEntry(g,q))).next((X=>{const L=x.docVersions.get(q);mt(L!==null,48541),X.version.compareTo(L)<0&&(E.applyToRemoteDocument(X,x),X.isValidDocument()&&(X.setReadTime(x.commitVersion),_.addEntry(X)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=st();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function h1(i){const e=He(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Vj(i,e){const n=He(i),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((_,E)=>{const T=l.get(E);if(!T)return;p.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,E))));let z=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(xn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(_.resumeToken,r)),l=l.insert(E,z),(function(X,L,oe){return X.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=kj?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(T,z,_)&&p.push(n.Pi.updateTargetData(u,z))}));let g=Oi(),x=st();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push(Lj(u,f,e.documentUpdates).next((_=>{g=_.ks,x=_.qs}))),!r.isEqual(Ue.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((E=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(_)}return de.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.Ms=l,u)))}function Lj(i,e,n){let r=st(),l=st();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Oi();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):Se(Mp,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function Pj(i,e){const n=He(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=_p),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Uj(i,e){const n=He(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,de.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new Ar(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Wm(i,e,n){const r=He(i),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Fl(f))throw f;Se(Mp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Hv(i,e,n){const r=He(i);let l=Ue.min(),u=st();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,x,_){const E=He(g),T=E.xs.get(_);return T!==void 0?de.resolve(E.Ms.get(T)):E.Pi.getTargetData(x,_)})(r,f,si(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:Ue.min(),n?u:st()))).next((p=>(zj(r,SA(e),p),{documents:p,Qs:u})))))}function zj(i,e,n){let r=i.Os.get(e)||Ue.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class qv{constructor(){this.activeTargetIds=IA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bj{constructor(){this.Mo=new qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class Gv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function Zm(){return od===null?od=(function(){return 268435456+Math.round(2147483648*Math.random())})():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Id?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const f=Zm(),p=this.zo(e,n.toUriEncodedString());Se(Em,`Sending RPC '${e}' ${f}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,u);const{host:x}=new URL(p),_=Ul(x);return this.Jo(e,p,g,r,_).then((E=>(Se(Em,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Il(Em,`RPC '${e}' ${f} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(e,n,r,l,u,f){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=qj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class Kj extends Fj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const f=Zm();return new Promise(((p,g)=>{const x=new p_;x.setWithCredentials(!0),x.listenOnce(g_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case md.NO_ERROR:const E=x.getResponseJson();Se(wn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),p(E);break;case md.TIMEOUT:Se(wn,`RPC '${e}' ${f} timed out`),g(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const T=x.getStatus();if(Se(wn,`RPC '${e}' ${f} failed with status:`,T,"response text:",x.getResponseText()),T>0){let z=x.getResponseJson();Array.isArray(z)&&(z=z[0]);const q=z?.error;if(q&&q.status&&q.message){const X=(function(oe){const ne=oe.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ne)>=0?ne:le.UNKNOWN})(q.status);g(new Ee(X,q.message))}else g(new Ee(le.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Se(wn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(l);Se(wn,`RPC '${e}' ${f} sending request:`,l),x.send(n,"POST",_,r,15)}))}T_(e,n,r){const l=Zm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=v_(),p=x_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const _=u.join("");Se(wn,`Creating RPC '${e}' stream ${l}: ${_}`,g);const E=f.createWebChannel(_,g);this.I_(E);let T=!1,z=!1;const q=new Gj({Yo:L=>{z?Se(wn,`Not sending because RPC '${e}' stream ${l} is closed:`,L):(T||(Se(wn,`Opening RPC '${e}' stream ${l} transport.`),E.open(),T=!0),Se(wn,`RPC '${e}' stream ${l} sending:`,L),E.send(L))},Zo:()=>E.close()}),X=(L,oe,ne)=>{L.listen(oe,(W=>{try{ne(W)}catch(he){setTimeout((()=>{throw he}),0)}}))};return X(E,Wo.EventType.OPEN,(()=>{z||(Se(wn,`RPC '${e}' stream ${l} transport opened.`),q.o_())})),X(E,Wo.EventType.CLOSE,(()=>{z||(z=!0,Se(wn,`RPC '${e}' stream ${l} transport closed`),q.a_(),this.E_(E))})),X(E,Wo.EventType.ERROR,(L=>{z||(z=!0,Il(wn,`RPC '${e}' stream ${l} transport errored. Name:`,L.name,"Message:",L.message),q.a_(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),X(E,Wo.EventType.MESSAGE,(L=>{if(!z){const oe=L.data[0];mt(!!oe,16349);const ne=oe,W=ne?.error||ne[0]?.error;if(W){Se(wn,`RPC '${e}' stream ${l} received error:`,W);const he=W.status;let Te=(function(N){const C=Wt[N];if(C!==void 0)return J_(C)})(he),xe=W.message;Te===void 0&&(Te=le.INTERNAL,xe="Unknown error status: "+he+" with message "+W.message),z=!0,q.a_(new Ee(Te,xe)),E.close()}else Se(wn,`RPC '${e}' stream ${l} received:`,oe),q.u_(oe)}})),X(p,y_.STAT_EVENT,(L=>{L.stat===zm.PROXY?Se(wn,`RPC '${e}' stream ${l} detected buffering proxy`):L.stat===zm.NOPROXY&&Se(wn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i){return new XA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&Se("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="PersistentStream";class m1{constructor(e,n,r,l,u,f,p,g){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new Ee(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(Kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Se(Kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yj extends m1{constructor(e,n,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ue.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ue.min():f.readTime?ii(f.readTime):Ue.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(u,f){let p;const g=f.target;if(p=Gm(g)?{documents:nj(u,g)}:{query:sj(u,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=n1(u,f.resumeToken);const x=Ym(u,f.expectedCount);x!==null&&(p.expectedCount=x)}else if(f.snapshotVersion.compareTo(Ue.min())>0){p.readTime=Ld(u,f.snapshotVersion.toTimestamp());const x=Ym(u,f.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=rj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.q_(n)}}class $j extends m1{constructor(e,n,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tj(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Xm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ej(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{}class Xj extends Qj{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,$m(n,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(le.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,$m(n,r),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ee(le.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Wj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(n),this.aa=!1):Se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="RemoteStore";class Zj{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ka(this)&&(Se(Ra,"Restarting streams for network reachability change."),await(async function(g){const x=He(g);x.Ea.add(4),await Ac(x),x.Ra.set("Unknown"),x.Ea.delete(4),await sh(x)})(this))}))})),this.Ra=new Wj(r,l)}}async function sh(i){if(ka(i))for(const e of i.da)await e(!0)}async function Ac(i){for(const e of i.da)await e(!1)}function p1(i,e){const n=He(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pp(n)?Lp(n):Kl(n).O_()&&Vp(n,e))}function Op(i,e){const n=He(i),r=Kl(n);n.Ia.delete(e),r.O_()&&g1(n,e),n.Ia.size===0&&(r.O_()?r.L_():ka(n)&&n.Ra.set("Unknown"))}function Vp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(i).Y_(e)}function g1(i,e){i.Va.Ue(e),Kl(i).Z_(e)}function Lp(i){i.Va=new KA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Kl(i).start(),i.Ra.ua()}function Pp(i){return ka(i)&&!Kl(i).x_()&&i.Ia.size>0}function ka(i){return He(i).Ea.size===0}function y1(i){i.Va=void 0}async function Jj(i){i.Ra.set("Online")}async function eC(i){i.Ia.forEach(((e,n)=>{Vp(i,e)}))}async function tC(i,e){y1(i),Pp(i)?(i.Ra.ha(e),Lp(i)):i.Ra.set("Unknown")}async function nC(i,e,n){if(i.Ra.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(i,e)}catch(r){Se(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(i,r)}else if(e instanceof xd?i.Va.Ze(e):e instanceof e1?i.Va.st(e):i.Va.tt(e),!n.isEqual(Ue.min()))try{const r=await h1(i.localStore);n.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,x)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(xn.EMPTY_BYTE_STRING,_.snapshotVersion)),g1(u,g);const E=new Ar(_.target,g,x,_.sequenceNumber);Vp(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){Se(Ra,"Failed to raise snapshot:",r),await Ud(i,r)}}async function Ud(i,e,n){if(!Fl(e))throw e;i.Ea.add(1),await Ac(i),i.Ra.set("Offline"),n||(n=()=>h1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Se(Ra,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await sh(i)}))}function x1(i,e){return e().catch((n=>Ud(i,n,e)))}async function ih(i){const e=He(i),n=Pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_p;for(;sC(e);)try{const l=await Pj(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,iC(e,l)}catch(l){await Ud(e,l)}v1(e)&&b1(e)}function sC(i){return ka(i)&&i.Ta.length<10}function iC(i,e){i.Ta.push(e);const n=Pr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function v1(i){return ka(i)&&!Pr(i).x_()&&i.Ta.length>0}function b1(i){Pr(i).start()}async function rC(i){Pr(i).ra()}async function aC(i){const e=Pr(i);for(const n of i.Ta)e.ea(n.mutations)}async function lC(i,e,n){const r=i.Ta.shift(),l=jp.from(r,e,n);await x1(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await ih(i)}async function oC(i,e){e&&Pr(i).X_&&await(async function(r,l){if((function(f){return qA(f)&&f!==le.ABORTED})(l.code)){const u=r.Ta.shift();Pr(r).B_(),await x1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await ih(r)}})(i,e),v1(i)&&b1(i)}async function Yv(i,e){const n=He(i);n.asyncQueue.verifyOperationInProgress(),Se(Ra,"RemoteStore received new credentials");const r=ka(n);n.Ea.add(3),await Ac(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sh(n)}async function cC(i,e){const n=He(i);e?(n.Ea.delete(2),await sh(n)):e||(n.Ea.add(2),await Ac(n),n.Ra.set("Unknown"))}function Kl(i){return i.ma||(i.ma=(function(n,r,l){const u=He(n);return u.sa(),new Yj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:Jj.bind(null,i),t_:eC.bind(null,i),r_:tC.bind(null,i),H_:nC.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Pp(i)?Lp(i):i.Ra.set("Unknown")):(await i.ma.stop(),y1(i))}))),i.ma}function Pr(i){return i.fa||(i.fa=(function(n,r,l){const u=He(n);return u.sa(),new $j(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:rC.bind(null,i),r_:oC.bind(null,i),ta:aC.bind(null,i),na:lC.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ih(i)):(await i.fa.stop(),i.Ta.length>0&&(Se(Ra,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const f=Date.now()+r,p=new Up(e,n,f,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(i,e){if(Mi("AsyncQueue",`${e}: ${i}`),Fl(i))return new Ee(le.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.ga=new Mt(Me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Vl{constructor(e,n,r,l,u,f,p,g,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,l,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Vl(e,n,jl.emptySet(n),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dC{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=He(n),u=l.queries;l.queries=Qv(),u.forEach(((f,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function Qv(){return new Ia((i=>B_(i)),Xd)}async function _1(i,e){const n=He(i);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new uC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=zp(f,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Bp(n)}async function w1(i,e){const n=He(i),r=e.query;let l=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hC(i,e){const n=He(i);let r=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&Bp(n)}function fC(i,e,n){const r=He(i),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function Bp(i){i.Ca.forEach((e=>{e.next()}))}var Jm,Xv;(Xv=Jm||(Jm={})).Ma="default",Xv.Cache="cache";class E1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class mC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=H_(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $v,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((_,E)=>{const T=l.get(_),z=Wd(this.query,E)?E:null,q=!!T&&this.mutatedKeys.has(T.key),X=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let L=!1;T&&z?T.data.isEqual(z.data)?q!==X&&(r.track({type:3,doc:z}),L=!0):this.su(T,z)||(r.track({type:2,doc:z}),L=!0,(g&&this.eu(z,g)>0||x&&this.eu(z,x)<0)&&(p=!0)):!T&&z?(r.track({type:0,doc:z}),L=!0):T&&!z&&(r.track({type:1,doc:T}),L=!0,(g||x)&&(p=!0)),L&&(z?(f=f.add(z),u=X?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(z,q){const X=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:L})}};return X(z)-X(q)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,f.length!==0||x?{snapshot:new Vl(this.query,e.tu,u,f,e.mutatedKeys,g===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new S1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new T1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=st();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hp="SyncEngine";class pC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gC{constructor(e){this.key=e,this.hu=!1}}class yC{constructor(e,n,r,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ia((p=>B_(p)),Xd),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Me.comparator),this.Au=new Map,this.Ru=new Ip,this.Vu={},this.mu=new Map,this.fu=Ol.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xC(i,e,n=!0){const r=I1(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await N1(r,e,n,!0),l}async function vC(i,e){const n=I1(i);await N1(n,e,!0,!1)}async function N1(i,e,n,r){const l=await Uj(i.localStore,si(e)),u=l.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await bC(i,e,u,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&p1(i.remoteStore,l),p}async function bC(i,e,n,r,l){i.pu=(E,T,z)=>(async function(X,L,oe,ne){let W=L.view.ru(oe);W.Cs&&(W=await Hv(X.localStore,L.query,!1).then((({documents:j})=>L.view.ru(j,W))));const he=ne&&ne.targetChanges.get(L.targetId),Te=ne&&ne.targetMismatches.get(L.targetId)!=null,xe=L.view.applyChanges(W,X.isPrimaryClient,he,Te);return Zv(X,L.targetId,xe.au),xe.snapshot})(i,E,T,z);const u=await Hv(i.localStore,e,!0),f=new mC(e,u.Qs),p=f.ru(u.documents),g=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",l),x=f.applyChanges(p,i.isPrimaryClient,g);Zv(i,n,x.au);const _=new pC(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),x.snapshot}async function _C(i,e,n){const r=He(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Xd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Wm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Op(r.remoteStore,l.targetId),ep(r,l.targetId)})).catch(ql)):(ep(r,l.targetId),await Wm(r.localStore,l.targetId,!0))}async function wC(i,e){const n=He(i),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Op(n.remoteStore,r.targetId))}async function EC(i,e,n){const r=RC(i);try{const l=await(function(f,p){const g=He(f),x=Ct.now(),_=p.reduce(((z,q)=>z.add(q.key)),st());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let q=Oi(),X=st();return g.Ns.getEntries(z,_).next((L=>{q=L,q.forEach(((oe,ne)=>{ne.isValidDocument()||(X=X.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,q))).next((L=>{E=L;const oe=[];for(const ne of p){const W=PA(ne,E.get(ne.key).overlayedDocument);W!=null&&oe.push(new Hr(ne.key,W,D_(W.value.mapValue),jn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,x,oe,p)})).next((L=>{T=L;const oe=L.applyToLocalDocumentSet(E,X);return g.documentOverlayCache.saveOverlays(z,L.batchId,oe)}))})).then((()=>({batchId:T.batchId,changes:F_(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,g){let x=f.Vu[f.currentUser.toKey()];x||(x=new Mt(nt)),x=x.insert(p,g),f.Vu[f.currentUser.toKey()]=x})(r,l.batchId,n),await jc(r,l.changes),await ih(r.remoteStore)}catch(l){const u=zp(l,"Failed to persist write");n.reject(u)}}async function A1(i,e){const n=He(i);try{const r=await Vj(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(mt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?mt(f.hu,14607):l.removedDocuments.size>0&&(mt(f.hu,42227),f.hu=!1))})),await jc(n,r,e)}catch(r){await ql(r)}}function Wv(i,e,n){const r=He(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const g=He(f);g.onlineState=p;let x=!1;g.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(p)&&(x=!0)})),x&&Bp(g)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TC(i,e,n){const r=He(i);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new Mt(Me.comparator);f=f.insert(u,Tn.newNoDocument(u,Ue.min()));const p=st().add(u),g=new th(Ue.min(),new Map,new Mt(nt),f,p);await A1(r,g),r.du=r.du.remove(u),r.Au.delete(e),qp(r)}else await Wm(r.localStore,e,!1).then((()=>ep(r,e,n))).catch(ql)}async function SC(i,e){const n=He(i),r=e.batch.batchId;try{const l=await Oj(n.localStore,e);C1(n,r,null),j1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jc(n,l)}catch(l){await ql(l)}}async function NC(i,e,n){const r=He(i);try{const l=await(function(f,p){const g=He(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return g.mutationQueue.lookupMutationBatch(x,p).next((E=>(mt(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(x,E)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,_,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>g.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);C1(r,e,n),j1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jc(r,l)}catch(l){await ql(l)}}function j1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function C1(i,e,n){const r=He(i);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function ep(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||R1(i,r)}))}function R1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Op(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),qp(i))}function Zv(i,e,n){for(const r of n)r instanceof T1?(i.Ru.addReference(r.key,e),AC(i,r)):r instanceof S1?(Se(Hp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||R1(i,r.key)):Pe(19791,{wu:r})}function AC(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(Se(Hp,"New document in limbo: "+n),i.Eu.add(r),qp(i))}function qp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Me(Nt.fromString(e)),r=i.fu.next();i.Au.set(r,new gC(n)),i.du=i.du.insert(n,r),p1(i.remoteStore,new Ar(si(Np(n.path)),r,"TargetPurposeLimboResolution",Yd.ce))}}async function jc(i,e,n){const r=He(i),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{f.push(r.pu(g,e,n).then((x=>{if((x||n)&&r.isPrimaryClient){const _=x?!x.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(x){l.push(x);const _=Dp.As(g.targetId,x);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(g,x){const _=He(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(x,(T=>de.forEach(T.Es,(z=>_.persistence.referenceDelegate.addReference(E,T.targetId,z))).next((()=>de.forEach(T.ds,(z=>_.persistence.referenceDelegate.removeReference(E,T.targetId,z)))))))))}catch(E){if(!Fl(E))throw E;Se(Mp,"Failed to update sequence numbers: "+E)}for(const E of x){const T=E.targetId;if(!E.fromCache){const z=_.Ms.get(T),q=z.snapshotVersion,X=z.withLastLimboFreeSnapshotVersion(q);_.Ms=_.Ms.insert(T,X)}}})(r.localStore,u))}async function jC(i,e){const n=He(i);if(!n.currentUser.isEqual(e)){Se(Hp,"User change. New user:",e.toKey());const r=await d1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ee(le.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jc(n,r.Ls)}}function CC(i,e){const n=He(i),r=n.Au.get(e);if(r&&r.hu)return st().add(r.key);{let l=st();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function I1(i){const e=He(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TC.bind(null,e),e.Pu.H_=hC.bind(null,e.eventManager),e.Pu.yu=fC.bind(null,e.eventManager),e}function RC(i){const e=He(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NC.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Mj(this.persistence,new Ij,e.initialUser,this.serializer)}Cu(e){return new u1(kp.mi,this.serializer)}Du(e){return new Bj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class IC extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){mt(this.persistence.referenceDelegate instanceof Pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new u1((r=>Pd.mi(r,n)),this.serializer)}}class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jC.bind(null,this.syncEngine),await cC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dC})()}createDatastore(e){const n=nh(e.databaseInfo.databaseId),r=(function(u){return new Kj(u)})(e.databaseInfo);return(function(u,f,p,g){return new Xj(u,f,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,f,p){return new Zj(r,l,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Wv(this.syncEngine,n,0)),(function(){return Gv.v()?new Gv:new Hj})())}createSyncEngine(e,n){return(function(l,u,f,p,g,x,_){const E=new yC(l,u,f,p,g,x);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=He(n);Se(Ra,"RemoteStore shutting down."),r.Ea.add(5),await Ac(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class kC{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Se(Ur,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Se(Ur,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sm(i,e){i.asyncQueue.verifyOperationInProgress(),Se(Ur,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await d1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Jv(i,e){i.asyncQueue.verifyOperationInProgress();const n=await DC(i);Se(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>Yv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>Yv(e.remoteStore,l))),i._onlineComponents=e}async function DC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Se(Ur,"Using user provided OfflineComponentProvider");try{await Sm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Il("Error using user provided cache. Falling back to memory cache: "+n),await Sm(i,new zd)}}else Se(Ur,"Using default OfflineComponentProvider"),await Sm(i,new IC(void 0));return i._offlineComponents}async function D1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Se(Ur,"Using user provided OnlineComponentProvider"),await Jv(i,i._uninitializedComponentsProvider._online)):(Se(Ur,"Using default OnlineComponentProvider"),await Jv(i,new tp))),i._onlineComponents}function MC(i){return D1(i).then((e=>e.syncEngine))}async function np(i){const e=await D1(i),n=e.eventManager;return n.onListen=xC.bind(null,e.syncEngine),n.onUnlisten=_C.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wC.bind(null,e.syncEngine),n}function OC(i,e,n={}){const r=new kr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,g,x){const _=new k1({next:T=>{_.Nu(),f.enqueueAndForget((()=>w1(u,E))),T.fromCache&&g.source==="server"?x.reject(new Ee(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(T)},error:T=>x.reject(T)}),E=new E1(p,_,{includeMetadataChanges:!0,qa:!0});return _1(u,E)})(await np(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firestore.googleapis.com",tb=!0;class nb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O1,this.ssl=tb}else this.host=e.host,this.ssl=e.ssl??tb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mj)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new HN;switch(r.type){case"firstParty":return new KN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=eb.get(n);r&&(Se("ComponentProvider","Removing Datastore"),eb.delete(n),r.terminate())})(this),Promise.resolve()}}function VC(i,e,n,r={}){i=Wn(i,rh);const l=Ul(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;l&&(Nb(`https://${p}`),Ab("Firestore",!0)),u.host!==O1&&u.host!==p&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:r};if(!Sa(g,f)&&(i._setSettings(g),r.mockUserToken)){let x,_;if(typeof r.mockUserToken=="string")x=r.mockUserToken,_=En.MOCK_USER;else{x=QE(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new En(E)}i._authCredentials=new qN(new __(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tc(n,Bt._jsonSchema))return new Bt(e,r||null,new Me(Nt.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:en("string",Bt._jsonSchemaVersion),referencePath:en("string")};class Dr extends Bi{constructor(e,n,r){super(e,n,Np(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Me(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function Tt(i,e,...n){if(i=Ht(i),w_("collection","path",e),i instanceof rh){const r=Nt.fromString(e,...n);return pv(r),new Dr(i,null,r)}{if(!(i instanceof Bt||i instanceof Dr))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Nt.fromString(e,...n));return pv(r),new Dr(i.firestore,null,r)}}function kt(i,e,...n){if(i=Ht(i),arguments.length===1&&(e=bp.newId()),w_("doc","path",e),i instanceof rh){const r=Nt.fromString(e,...n);return mv(r),new Bt(i,null,new Me(r))}{if(!(i instanceof Bt||i instanceof Dr))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Nt.fromString(e,...n));return mv(r),new Bt(i.firestore,i instanceof Dr?i.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="AsyncQueue";class ib{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f1(this,"async_queue_retry"),this._c=()=>{const r=Tm();r&&Se(sb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fl(e))throw e;Se(sb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",rb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Up.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Pe(47125,{Pc:rb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Vi extends rh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new ib,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ib(e),this._firestoreClient=void 0,await e}}}function LC(i,e){const n=typeof i=="object"?i:Ib(),r=typeof i=="string"?i:Id,l=up(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=YE("firestore");u&&VC(l,...u)}return l}function ah(i){if(i._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||PC(i),i._firestoreClient}function PC(i){const e=i._freezeSettings(),n=(function(l,u,f,p){return new cA(l,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,M1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new kC(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(xn.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fs(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tc(e,fs._jsonSchema))return fs.fromBase64String(e.bytes)}}fs._jsonSchemaVersion="firestore/bytes/1.0",fs._jsonSchema={type:en("string",fs._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(Tc(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:en("string",ri._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tc(e,ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ai(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ai._jsonSchemaVersion="firestore/vectorValue/1.0",ai._jsonSchema={type:en("string",ai._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=/^__.*__$/;class zC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class V1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function L1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:i})}}class Gp{constructor(e,n,r,l,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(L1(this.Ac)&&UC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nh(e)}Cc(e,n,r,l=!1){return new Gp({Ac:e,methodName:n,Dc:r,path:yn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(i){const e=i._freezeSettings(),n=nh(i._databaseId);return new BC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Kp(i,e,n,r,l,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,l);Yp("Data must be an object, but it was:",f,r);const p=z1(r,f);let g,x;if(u.merge)g=new Xn(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const E of u.mergeFields){const T=sp(e,E,n);if(!f.contains(T))throw new Ee(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);H1(_,T)||_.push(T)}g=new Xn(_),x=f.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,x=f.fieldTransforms;return new zC(new Pn(p),g,x)}class lh extends Fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lh}}function P1(i,e,n,r){const l=i.Cc(1,e,n);Yp("Data must be an object, but it was:",l,r);const u=[],f=Pn.empty();Br(r,((g,x)=>{const _=$p(e,g,n);x=Ht(x);const E=l.yc(_);if(x instanceof lh)u.push(_);else{const T=Ic(x,E);T!=null&&(u.push(_),f.set(_,T))}}));const p=new Xn(u);return new V1(f,p,l.fieldTransforms)}function U1(i,e,n,r,l,u){const f=i.Cc(1,e,n),p=[sp(e,r,n)],g=[l];if(u.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(sp(e,u[T])),g.push(u[T+1]);const x=[],_=Pn.empty();for(let T=p.length-1;T>=0;--T)if(!H1(x,p[T])){const z=p[T];let q=g[T];q=Ht(q);const X=f.yc(z);if(q instanceof lh)x.push(z);else{const L=Ic(q,X);L!=null&&(x.push(z),_.set(z,L))}}const E=new Xn(x);return new V1(_,E,f.fieldTransforms)}function HC(i,e,n,r=!1){return Ic(n,i.Cc(r?4:3,e))}function Ic(i,e){if(B1(i=Ht(i)))return Yp("Unsupported field value:",e,i),z1(i,e);if(i instanceof Fp)return(function(r,l){if(!L1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const p of r){let g=Ic(p,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kA(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ct.fromDate(r);return{timestampValue:Ld(l.serializer,u)}}if(r instanceof Ct){const u=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ld(l.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fs)return{bytesValue:n1(l.serializer,r._byteString)};if(r instanceof Bt){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof ai)return(function(f,p){return{mapValue:{fields:{[I_]:{stringValue:k_},[kd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw p.Sc("VectorValues must only contain numeric values.");return Ap(p.serializer,x)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Kd(r)}`)})(i,e)}function z1(i,e){const n={};return S_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(i,((r,l)=>{const u=Ic(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function B1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ct||i instanceof ri||i instanceof fs||i instanceof Bt||i instanceof Fp||i instanceof ai)}function Yp(i,e,n){if(!B1(n)||!E_(n)){const r=Kd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function sp(i,e,n){if((e=Ht(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return $p(i,e);throw Bd("Field path arguments must be of type string or ",i,!1,void 0,n)}const qC=new RegExp("[~\\*/\\[\\]]");function $p(i,e,n){if(e.search(qC)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Bd(i,e,n,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${l}`),g+=")"),new Ee(le.INVALID_ARGUMENT,p+i+g)}function H1(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends q1{data(){return super.data()}}function oh(i,e){return typeof e=="string"?$p(i,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qp{}class Xp extends Qp{}function Un(i,e,...n){let r=[];e instanceof Qp&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((g=>g instanceof Wp)).length,p=u.filter((g=>g instanceof ch)).length;if(f>1||f>0&&p>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class ch extends Xp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ch(e,n,r)}_apply(e){const n=this._parse(e);return G1(e._query,n),new Bi(e.firestore,e.converter,Km(e._query,n))}_parse(e){const n=Rc(e.firestore);return(function(u,f,p,g,x,_,E){let T;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ob(E,_);const q=[];for(const X of E)q.push(lb(g,u,X));T={arrayValue:{values:q}}}else T=lb(g,u,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ob(E,_),T=HC(p,f,E,_==="in"||_==="not-in");return Jt.create(x,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GC(i,e,n){const r=e,l=oh("where",i);return ch._create(l,r,n)}class Wp extends Qp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ks.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const g of p)G1(f,g),f=Km(f,g)})(e._query,n),new Bi(e.firestore,e.converter,Km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zp extends Xp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zp(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(u,f)})(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Gl(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function Jn(i,e="asc"){const n=e,r=oh("orderBy",i);return Zp._create(r,n)}class Jp extends Xp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jp(e,n,r)}_apply(e){return new Bi(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}function KC(i){return Jp._create("limit",i,"F")}function lb(i,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&n.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Nt.fromString(n));if(!Me.isDocumentKey(r))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ev(i,new Me(r))}if(n instanceof Bt)return Ev(i,n._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(n)}.`)}function ob(i,e){if(!Array.isArray(i)||i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G1(i,e){const n=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YC{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Br(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[kd].arrayValue?.values?.map((r=>zt(r.doubleValue)));return new ai(n)}convertGeoPoint(e){return new ri(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=Or(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);mt(o1(r),9688,{name:e});const l=new fc(r.get(1),r.get(3)),u=new Me(r.popFirst(5));return l.isEqual(n)||Mi(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends q1{constructor(e,n,r,l,u,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:en("string",wa._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class vd extends wa{data(e={}){return super.data(e)}}class Ea{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new ec(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vd(this._firestore,this._userDataWriter,r.key,r,new ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ec(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ec(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,_=-1;return p.type!==0&&(x=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:$C(p.type),doc:g,oldIndex:x,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $C(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:i})}}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:en("string",Ea._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class tg extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function tc(i){i=Wn(i,Bi);const e=Wn(i.firestore,Vi),n=ah(e),r=new tg(e);return F1(i._query),OC(n,i._query).then((l=>new Ea(e,r,i,l)))}function QC(i,e,n){i=Wn(i,Bt);const r=Wn(i.firestore,Vi),l=eg(i.converter,e,n);return kc(r,[Kp(Rc(r),"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,jn.none())])}function Zn(i,e,n,...r){i=Wn(i,Bt);const l=Wn(i.firestore,Vi),u=Rc(l);let f;return f=typeof(e=Ht(e))=="string"||e instanceof Cc?U1(u,"updateDoc",i._key,e,n,r):P1(u,"updateDoc",i._key,e),kc(l,[f.toMutation(i._key,jn.exists(!0))])}function Li(i){return kc(Wn(i.firestore,Vi),[new eh(i._key,jn.none())])}function li(i,e){const n=Wn(i.firestore,Vi),r=kt(i),l=eg(i.converter,e);return kc(n,[Kp(Rc(i.firestore),"addDoc",r._key,l,i.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then((()=>r))}function ps(i,...e){i=Ht(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ab(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ab(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let u,f,p;if(i instanceof Bt)f=Wn(i.firestore,Vi),p=Np(i._key.path),u={next:g=>{e[r]&&e[r](XC(f,i,g))},error:e[r+1],complete:e[r+2]};else{const g=Wn(i,Bi);f=Wn(g.firestore,Vi),p=g._query;const x=new tg(f);u={next:_=>{e[r]&&e[r](new Ea(f,x,g,_))},error:e[r+1],complete:e[r+2]},F1(i._query)}return(function(x,_,E,T){const z=new k1(T),q=new E1(_,z,E);return x.asyncQueue.enqueueAndForget((async()=>_1(await np(x),q))),()=>{z.Nu(),x.asyncQueue.enqueueAndForget((async()=>w1(await np(x),q)))}})(ah(f),p,l,u)}function kc(i,e){return(function(r,l){const u=new kr;return r.asyncQueue.enqueueAndForget((async()=>EC(await MC(r),l,u))),u.promise})(ah(i),e)}function XC(i,e,n){const r=n.docs.get(e._key),l=new tg(i);return new wa(i,l,e._key,r,new ec(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rc(e)}set(e,n,r){this._verifyNotCommitted();const l=Nm(e,this._firestore),u=eg(l.converter,n,r),f=Kp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,jn.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const u=Nm(e,this._firestore);let f;return f=typeof(n=Ht(n))=="string"||n instanceof Cc?U1(this._dataReader,"WriteBatch.update",u._key,n,r,l):P1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Nm(e,this._firestore);return this._mutations=this._mutations.concat(new eh(n._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nm(i,e){if((i=Ht(i)).firestore!==e)throw new Ee(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(i){return ah(i=Wn(i,Vi)),new WC(i,(e=>kc(i,e)))}(function(e,n=!0){(function(l){Hl=l})(zl),Rl(new Na("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new Vi(new FN(r.getProvider("auth-internal")),new YN(f,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(x.options.projectId,_)})(f,l),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Rr(uv,dv,e),Rr(uv,dv,"esm2020")})();const JC={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},K1=Rb(JC),ms=PN(K1),Ve=LC(K1),we={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),TableRows:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 6h18M3 10h18M3 14h18M3 18h18"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},ft=vb.forwardRef(({className:i="",...e},n)=>c.jsx("input",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),cb=vb.forwardRef(({className:i="",...e},n)=>c.jsx("textarea",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),Zt=({children:i,variant:e="primary",className:n="",...r})=>{const l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${l[e]}
        ${n}
      `,...r,children:i})},Y1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Ta=({options:i,selected:e,onChange:n,placeholder:r="Seiniz...",isMulti:l=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[p,g]=J.useState(!1),[x,_]=J.useState(""),E=J.useRef(null);J.useEffect(()=>{const L=oe=>{E.current&&!E.current.contains(oe.target)&&g(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const T=L=>{if(l){const oe=e.includes(L)?e.filter(ne=>ne!==L):[...e,L];n(oe)}else n(L),g(!1),_("")},z=L=>{_(L.target.value),f&&n(L.target.value)},q=l?e.length>0?`(${e.length})`:"":e||r,X=i.filter(L=>L.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(ft,{placeholder:r,value:e,onChange:z,onFocus:()=>g(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>g(!p),children:c.jsx(we.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>g(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${l&&e.length>0||!l&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[l&&c.jsx(we.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:l?`${r} ${q}`:q})]}),c.jsx(we.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:L=>_(L.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[X.map(L=>{const oe=l?e.includes(L):e===L;return c.jsxs("div",{onClick:()=>f?n(L):T(L),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${oe?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[l&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${oe?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:oe&&c.jsx(we.Check,{})}),c.jsx("span",{className:"truncate",children:L})]}),u&&c.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),u(L)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(we.Trash,{})})]},L)}),X.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),l&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>n([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Ll=({isOpen:i,onClose:e,title:n,children:r,maxWidth:l="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${l} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,Rs=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),ng=({startDate:i,endDate:e,onStartChange:n,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:l=>n(l.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:l=>r(l.target.value)})]}),Am={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function eR(){const[i,e]=J.useState(!0),[n,r]=J.useState(""),[l,u]=J.useState(""),[f,p]=J.useState(""),[g,x]=J.useState(""),[_,E]=J.useState(!1),T=async X=>{X.preventDefault(),p(""),x(""),E(!0);try{if(i)await ES(ms,n,l);else{const oe=(await wS(ms,n,l)).user;await QC(kt(Ve,"users",oe.uid),{email:oe.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(L){p(q(L.code))}finally{E(!1)}},z=async()=>{if(!n){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await _S(ms,n),x("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(X){p(q(X.code))}},q=X=>{switch(X){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+X}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),g&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:g}),c.jsxs("form",{onSubmit:T,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Am.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:n,onChange:X=>r(X.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Am.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:l,onChange:X=>u(X.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:z,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(Am.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const $1={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tR=i=>{if(!i)return 0;let e=0,n=0;return Object.values($1).forEach(r=>{r.steps.forEach(l=>{e++,i[r.title.split(" ")[0].toLowerCase()]?.[l.id]&&n++})}),e===0?0:Math.round(n/e*100)},nR=i=>{const e=parseFloat(i.qty)||0,n=parseFloat(i.unitPrice)||0,r=parseFloat(i.vatRate)||0,l=e*n,u=l*(r/100);return l+u},sR=(i,e=1e3)=>{const[n,r]=J.useState(0);return J.useEffect(()=>{let l=0;if(i===0){r(0);return}const u=i/(e/16),f=setInterval(()=>{l+=u,u>0&&l>=i||u<0&&l<=i?(r(i),clearInterval(f)):r(Math.floor(l))},16);return()=>clearInterval(f)},[i,e]),n},cd=({title:i,value:e,icon:n,color:r,subtext:l,isCurrency:u=!1})=>{const f=sR(e),p=u?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(f):f.toLocaleString("tr-TR");return c.jsxs(Rs,{className:"p-6 relative overflow-hidden group hover:scale-[1.02] transition-transform duration-300",children:[c.jsx("div",{className:`absolute -right-6 -top-6 w-24 h-24 rounded-full opacity-10 transition-transform group-hover:scale-150 ${r}`}),c.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:`text-2xl font-black ${u&&e<0?"text-red-600":"text-gray-800"}`,children:p})]}),c.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-20 text-opacity-100`,children:n})]}),c.jsx("p",{className:"text-xs text-gray-500 font-medium relative z-10 flex items-center gap-1",children:l})]})};function ub({onNavigate:i}){const[e,n]=J.useState({customers:0,activeOrdersCount:0,products:0,lowStock:0,generalBalance:0,recentOrders:[]}),[r,l]=J.useState(!0),[u,f]=J.useState({});J.useEffect(()=>{(async()=>{const _=await tc(Tt(Ve,"customers")),E=Un(Tt(Ve,"siparisler"),Jn("createdAt","desc"),KC(20)),T=await tc(E),z=T.docs.map(xe=>({id:xe.id,...xe.data()})),q=await tc(Tt(Ve,"inventory_movements")),X={};q.docs.forEach(xe=>{const j=xe.data(),N=Number(j.quantity)||0,C=j.action==="add"?N:-N;X[j.productName]||(X[j.productName]=0),X[j.productName]+=C});const L=Object.keys(X).length,oe=Object.values(X).filter(xe=>xe<10&&xe>0).length,ne=await tc(Tt(Ve,"sales"));let W=0,he=0;ne.docs.forEach(xe=>{const j=xe.data();if(j.type==="payment"){const N=parseFloat(j.amount)||0;j.direction==="in"?he+=N:W+=N}else{const N=(j.items||[]).reduce((C,M)=>C+nR(M),0);j.transactionType==="purchase"?he+=N:W+=N}});const Te=W-he;n({customers:_.size,activeOrdersCount:T.size,products:L,lowStock:oe,generalBalance:Te,recentOrders:z}),l(!1)})()},[]);const p=x=>{f(_=>({..._,[x]:!_[x]}))},g=async(x,_,E)=>{const T=x.productionStatus||{},z=T[_]||{},q={...T,[_]:{...z,[E]:!z[E]}},X=e.recentOrders.map(L=>L.id===x.id?{...L,productionStatus:q}:L);n(L=>({...L,recentOrders:X})),await Zn(kt(Ve,"siparisler",x.id),{productionStatus:q})};return r?c.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"p-4 sm:p-8 space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/4"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h1",{className:"text-3xl font-black mb-2",children:"Hogeldiniz "}),c.jsx("p",{className:"text-indigo-100 max-w-lg",children:"Erelebiler Ahap Ynetim Paneli. letmenizin durumu hakknda anlk bilgilere buradan ulaabilirsiniz."}),c.jsxs("div",{className:"mt-6 flex gap-3",children:[c.jsx("button",{onClick:()=>i("siparis"),className:"px-5 py-2.5 bg-white text-indigo-600 rounded-xl font-bold text-sm shadow-lg hover:bg-gray-50 transition-colors",children:"Yeni Sipari"}),c.jsx("button",{onClick:()=>i("musteriler"),className:"px-5 py-2.5 bg-indigo-500/30 text-white border border-white/20 rounded-xl font-bold text-sm hover:bg-indigo-500/50 transition-colors",children:"Mteri Ekle"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(cd,{title:"Genel Bakiye",value:e.generalBalance,icon:c.jsx(we.Wallet,{className:"w-6 h-6 text-emerald-600"}),color:e.generalBalance>0?"bg-emerald-500":"bg-red-500",subtext:e.generalBalance>0?"Alacakl Durumdasnz":"Borlu Durumdasnz",isCurrency:!0}),c.jsx(cd,{title:"Toplam Mteri",value:e.customers,icon:c.jsx(we.User,{className:"w-6 h-6 text-indigo-600"}),color:"bg-indigo-500",subtext:"Aktif mteri veritaban"}),c.jsx(cd,{title:"Kaytl Sipari",value:e.activeOrdersCount,icon:c.jsx(we.Clipboard,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-500",subtext:"Toplam sipari says"}),c.jsx(cd,{title:"Kritik Stok",value:e.lowStock,icon:c.jsx(we.Box,{className:"w-6 h-6 text-red-600"}),color:"bg-red-500",subtext:"10 adetten az kalan rnler"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs(Rs,{className:"col-span-1 p-6 flex flex-col justify-center items-center text-center bg-gradient-to-br from-white/80 to-indigo-50/50",children:[c.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mb-4 text-indigo-600",children:c.jsx(we.Chart,{})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Hzl lemler"}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 mb-6",children:"Sk kullanlan modllere hzlca eriin."}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[c.jsx("button",{onClick:()=>i("stok"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Stok Kontrol"}),c.jsx("button",{onClick:()=>i("fiyatlandirma"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Maliyet Hesab"}),c.jsx("button",{onClick:()=>i("etiket"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Etiket Bas"}),c.jsx("button",{onClick:()=>i("calisan"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Personel"})]})]}),c.jsxs(Rs,{className:"col-span-1 lg:col-span-2 p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"})," Son Sipariler ve Durum"]}),c.jsx("div",{className:"space-y-3",children:e.recentOrders.length>0?e.recentOrders.map((x,_)=>{const E=tR(x.productionStatus),T=new Date(x.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}),z=u[x.id];return c.jsxs("div",{className:`flex flex-col rounded-xl hover:bg-gray-50 transition-colors border border-transparent hover:border-gray-100 group ${z?"bg-gray-50":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-3",children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[c.jsxs("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold text-xs shrink-0",children:[E,"%"]}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-700 truncate",children:["#",x.siparisNo," - ",x.customerId]}),c.jsx("p",{className:"text-[10px] text-gray-400",children:T})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-24 h-1.5 bg-gray-200 rounded-full overflow-hidden hidden sm:block",children:c.jsx("div",{className:`h-full rounded-full ${E===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${E}%`}})}),c.jsxs("button",{onClick:()=>p(x.id),className:"px-3 py-1.5 bg-white border border-gray-200 text-gray-500 hover:text-indigo-600 hover:border-indigo-200 rounded-lg text-xs font-bold transition-all whitespace-nowrap flex items-center gap-1",children:[z?c.jsx(we.ChevronUp,{className:"w-3 h-3"}):c.jsx(we.ChevronDown,{className:"w-3 h-3"}),"retim Durumu"]})]})]}),z&&c.jsx("div",{className:"px-4 pb-4 pt-1",children:c.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries($1).map(([q,X])=>c.jsxs("div",{children:[c.jsx("h5",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2 border-b border-gray-100 pb-1",children:X.title.replace(" KISMI","")}),c.jsx("div",{className:"space-y-1",children:X.steps.map(L=>{const oe=x.productionStatus?.[q]?.[L.id];return c.jsxs("button",{onClick:()=>g(x,q,L.id),className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-[10px] font-medium transition-colors ${oe?"bg-emerald-50 text-emerald-700":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:L.label}),oe?c.jsx(we.Check,{className:"w-3 h-3"}):c.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300"})]},L.id)})})]},q))})})]},_)}):c.jsx("div",{className:"text-center text-gray-400 py-10",children:"Henz sipari yok."})})]})]})]})}const uh=i=>i==="USD"?"$":i==="EUR"?"":"",nn=(i,e="TRY")=>{const n=uh(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" "+n},jm=i=>i===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),iR=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",Cl=i=>{if(!i)return"-";const e=new Date(i);return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear()).slice(2)}`},Pl=i=>{const e=parseFloat(i.qty)||0,n=parseFloat(i.unitPrice)||0,r=parseFloat(i.vatRate)||0,l=e*n,u=l*(r/100);return l+u},Cm=i=>{if(!i)return{subtotal:0,totalVAT:0,grandTotal:0};const e=i.reduce((r,l)=>r+(parseFloat(l.qty)||0)*(parseFloat(l.unitPrice)||0),0),n=i.reduce((r,l)=>r+Pl(l),0);return{subtotal:e,totalVAT:n-e,grandTotal:n}},Q1=i=>i?i.reduce((e,n)=>e+Pl(n),0):0,rR=(i,e)=>{const n=e.filter(l=>l.customerId===i);let r=0;return n.forEach(l=>{if(l.type==="payment"){const u=parseFloat(l.amount)||0;l.direction==="in"?r-=u:r+=u}else{const u=Q1(l.items);l.transactionType==="purchase"?r-=u:r+=u}}),r},X1=(i,e)=>{let n=e.filter(u=>u.customerId===i);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let r=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,p=u.direction==="out";p?r+=f:r-=f;let g=u.paymentMethod||"-";g==="Kredi Kart"&&(g="KrediK"),l.push({docNo:u.docNo||"-",date:u.date,action:p?"DEME":"TAHSLAT",type:g,note:u.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:p?f:0,alacak:p?0:f,balance:r})}else{const f=u.transactionType==="purchase",p=f?"ALI":"SATI";u.items?.forEach(g=>{const x=Pl(g);f?r-=x:r+=x,l.push({docNo:u.docNo,date:u.date,action:p,type:"-",note:u.note||"",ek:g.ek||"",desc:g.name,qty:g.qty,unitPrice:g.unitPrice,borc:f?0:x,alacak:f?x:0,balance:r})})}}),l},aR=(i,e)=>{let n=e.filter(u=>u.customerId===i);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let r=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,p=u.direction==="out";p?r+=f:r-=f,l.push({docNo:u.docNo||"-",date:u.date,action:p?"DEME YAPILDI":"DEME ALINDI",type:u.paymentMethod||"-",note:u.note||"",borc:p?f:0,alacak:p?0:f,balance:r})}else{const f=u.transactionType==="purchase",p=f?"ALI":"SATI";let g=0;u.items?.forEach(x=>{g+=Pl(x)}),f?r-=g:r+=g,l.push({docNo:u.docNo,date:u.date,action:p,type:"-",note:`${u.items?.length||0} Kalem rn`,borc:f?0:g,alacak:f?g:0,balance:r})}}),l},lR=(i,e)=>{const n=X1(i.id,e),r=i.currency||"TRY",l=uh(r);let u="data:text/csv;charset=utf-8,\uFEFF";u+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,n.forEach(g=>{const x=T=>nn(Math.abs(T),r).replace(l,"").trim(),_=(g.balance<0?"-":"")+x(g.balance),E=[`"${g.date}"`,`"${g.docNo}"`,`"${g.action}"`,`"${g.type}"`,`"${g.note}"`,`"${g.ek}"`,`"${g.desc}"`,`"${g.qty}"`,`"${g.unitPrice!=="-"?x(parseFloat(g.unitPrice)):"-"}"`,`"${x(g.borc)}"`,`"${x(g.alacak)}"`,`"${_}"`].join(",");u+=E+`
`});const f=encodeURI(u),p=document.createElement("a");p.setAttribute("href",f),p.setAttribute("download",`${i.name}_Ekstre.csv`),document.body.appendChild(p),p.click(),document.body.removeChild(p)},db=(i,e,n,r=null)=>{const l=X1(i.id,e),u=i.currency||"TRY",f=l.filter(z=>r?z.docNo===r:!(n.start&&z.date<n.start||n.end&&z.date>n.end)),p=[];let g=null;f.forEach(z=>{(!g||g.docNo!==z.docNo||g.action!==z.action)&&(g&&p.push(g),g={docNo:z.docNo,date:z.date,action:z.action,type:z.type,items:[]}),g.items.push(z)}),g&&p.push(g);const x=window.open("","","height=800,width=1000");if(!x)return;const _=f.length>0?f[f.length-1].balance:0,E=r?f.reduce((z,q)=>z+(q.borc||0)+(q.alacak||0),0):0,T=`
    <html><head><title>Ekstre - ${i.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }
        body { 
          font-family: 'Helvetica', sans-serif; 
          color: #000; 
          font-size: 10px;
          margin-top: 100px;
        }        
      /* Header */
      .header { position: absolute; top: 0; left: 0; right: 0; height: 90px; display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 5px; }
      .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
      .company-info p { margin: 0; font-size: 9pt; color: #333; }
      .report-info { text-align: right; }
      .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
      
      /* Transaction Group Styling */
      .osman {margin-top: 100px;}
      
      .transaction-block { margin-bottom: 20px; }
      
      .transaction-header {
          background-color: #e5e7eb;
          border: 1px solid #999;
          border-bottom: none;
          padding: 8px;
          font-size: 11pt;
          font-weight: bold;
          display: flex;
          gap: 30px;
          page-break-after: avoid;
      }

      /* Table Styling */
      table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
      
      /* THEAD repetition */
      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }
      
      th { 
          background-color: #f3f4f6; 
          border-bottom: 1px solid #999; 
          padding: 5px; 
          text-align: left; 
          font-weight: bold; 
          font-size: 9pt;
      }
      
      td { 
          border-bottom: 1px solid #ccc; 
          padding: 5px; 
          vertical-align: top; 
          font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }
      
      /* Footer Balance */
      .balance-container {
         margin-top: 20px; 
         text-align: right; 
         font-size: 12pt;
         border-top: 2px solid #000;
         padding-top: 10px;
         page-break-inside: avoid;
      }
    </style>
    </head><body>
      <div class="header">
        <div class="company-info">
          <h1>ERCELEBILER AHSAP</h1>
          <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
          <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
        </div>
        <div class="report-info">
          <h2>${r?"LEM DETAYI":"HESAP EKSTRES"}</h2>
          <p>Sayn: <strong>${i.name}</strong></p>
          <p>${r?`Belge: #${r}`:(n.start?`${Cl(n.start)} - `:"")+(n.end?Cl(n.end):"Tm")}</p>
        </div>
      </div>

      <!-- LOOP THROUGH GROUPS -->
        ${p.map(z=>{const q=z.action.includes("DEME")||z.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII -->
                <div class="transaction-header">
                    ${`TARIH : ${Cl(z.date)} <span style="color:#999; margin:0 5px;">|</span> BELGE : #${z.docNo} <span style="color:#999; margin:0 5px;">|</span> LEM : ${z.action}`}
                </div>

              <!-- CONTENT TABLE -->
              <table>
                  <colgroup>
                      <col style="width: 9%;"> <!-- Tip / Ek -->
                      <col style="width: auto;"> <!-- Aklama -->
                      <col style="width: 4%;"> <!-- Miktar -->
                      <col style="width: 10%;"> <!-- B.Fiyat -->
                      ${r?"":'<col style="width: 15%;">'} <!-- deme (Hidden in single) -->
                      <col style="width: 15%;"> <!-- Tutar -->
                      ${r?"":'<col style="width: 18%;">'} <!-- Bakiye (Hidden in single) -->
                  </colgroup>
                  <thead>
                      <tr>
                          <th>TP / EK</th>
                          <th>AIKLAMA</th>
                          <th class="right">MK.</th>
                          <th class="right">B.FYAT</th>
                          ${r?"":'<th class="right">DEME (A)</th>'}
                          <th class="right">TUTAR (B)</th>
                          ${r?"":'<th class="right">BAKYE</th>'}
                      </tr>
                  </thead>
<tbody>
                        ${z.items.map(L=>{const oe=L.borc>0?L.borc:L.alacak,ne=q?L.note||"":L.desc+(L.note?` - ${L.note}`:"");return`
                            <tr>
                                <td>${q?L.type:L.ek||"-"}</td>
                                <td class="col-desc">${ne}</td>
                              <td class="right">${L.qty!=="-"?L.qty:"-"}</td>
                              <td class="right">${L.unitPrice!=="-"?nn(L.unitPrice,u).replace(uh(u),""):"-"}</td>
                              
                              ${r?"":`<td class="right" style="color:#059669">${L.alacak>0?nn(L.alacak,u):"-"}</td>`}
                              
                              <td class="right" style="color:#dc2626">
                                 ${r?nn(oe,u):L.borc>0?nn(L.borc,u):"-"}
                              </td>
                              
                              ${r?"":`
                                  <td class="right bold" style="color:${L.balance>0?"#dc2626":"#059669"}">
                                      ${nn(Math.abs(L.balance),u)} ${L.balance>0?"(B)":"(A)"}
                                  </td>
                              `}
                          </tr>
                          `}).join("")}
                  </tbody>
              </table>
          </div>
          `}).join("")}

      <div class="balance-container">
         <strong>${r?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
         <span style="font-weight: bold; margin-left: 10px; color:${(r?E:_)>0?"#dc2626":"#059669"}">
           ${r?nn(E,u):(_<0?"-":"")+nn(Math.abs(_),u)+(_>0?" (Bor)":" (Alacak)")}
         </span>
      </div>
    </body></html>
  `;x.document.write(T),setTimeout(()=>{x.document.close(),x.print()},500)},oR=(i,e,n)=>{const l=aR(i.id,e).filter(p=>!(n.start&&p.date<n.start||n.end&&p.date>n.end)),u=window.open("","","height=800,width=1000");if(!u)return;const f=`
  <html>
  <head>
    <title>zet Ekstre - ${i.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }

      body {
        font-family: 'Helvetica', sans-serif;
        font-size: 10px;
        margin-top: 100px;
        color: #000;
      }

      /* Header (IDENTICAL) */
      .header {
        position: absolute;
        top: 0; left: 0; right: 0;
        height: 90px;
        display: flex;
        justify-content: space-between;
        border-bottom: 2px solid #000;
        padding-bottom: 5px;
      }

      .company-info h1 {
        font-size: 16pt;
        font-weight: bold;
        margin: 0 0 5px 0;
      }

      .company-info p {
        margin: 0;
        font-size: 9pt;
      }

      .report-info {
        text-align: right;
      }

      .report-info h2 {
        font-size: 14pt;
        margin: 0 0 5px 0;
        color: #4f46e5;
      }

      /* Transaction header (IDENTICAL) */
      .transaction-block {
        margin-bottom: 20px;
      }

      .transaction-header {
        background-color: #e5e7eb;
        border: 1px solid #999;
        border-bottom: none;
        padding: 8px;
        font-size: 11pt;
        font-weight: bold;
        display: flex;
        gap: 30px;
        page-break-after: avoid;
      }

      /* Table (IDENTICAL PHILOSOPHY) */
      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        border: 1px solid #999;
      }

      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }

      th {
        background-color: #f3f4f6;
        border-bottom: 1px solid #999;
        padding: 5px;
        font-size: 9pt;
        text-align: left;
      }

      td {
        border-bottom: 1px solid #ccc;
        padding: 5px;
        font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }

      .balance-container {
        margin-top: 20px;
        text-align: right;
        font-size: 12pt;
        border-top: 2px solid #000;
        padding-top: 10px;
        page-break-inside: avoid;
      }
    </style>
  </head>

  <body>
    <div class="header">
      <div class="company-info">
        <h1>ERCELEBILER AHSAP</h1>
        <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14</p>
        <p>TOSYA / KASTAMONU</p>
      </div>
      <div class="report-info">
        <h2>HESAP ZET</h2>
        <p>Sayn: <strong>${i.name}</strong></p>
        <p>${n.start?Cl(n.start):""} - ${n.end?Cl(n.end):"Tm"}</p>
      </div>
    </div>

    ${l.map(p=>`
        <div class="transaction-block">
          <div class="transaction-header">
            ${`
        TARIH : ${Cl(p.date)}
        <span style="color:#999;">|</span>
        BELGE : #${p.docNo}
        <span style="color:#999;">|</span>
        LEM : ${p.action}
      `}
          </div>

          <table>
            <colgroup>
              <col style="width:auto;">
              <col style="width:20%;">
              <col style="width:20%;">
              <col style="width:20%;">
            </colgroup>

            <thead>
              <tr>
                <th>AIKLAMA</th>
                <th class="right">DEME (A)</th>
                <th class="right">TUTAR (B)</th>
                <th class="right">BAKYE</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td class="col-desc">${p.note||"-"}</td>
                <td class="right" style="color:#059669">${p.alacak>0?nn(p.alacak):"-"}</td>
                <td class="right" style="color:#dc2626">${p.borc>0?nn(p.borc):"-"}</td>
                <td class="right bold" style="color:${p.balance>0?"#dc2626":"#059669"}">
                  ${nn(Math.abs(p.balance))}
                  ${p.balance>0?" (B)":" (A)"}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `).join("")}

  </body>
  </html>
  `;u.document.write(f),setTimeout(()=>{u.document.close(),u.print()},500)};function cR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState([]),[g,x]=J.useState(!1),[_,E]=J.useState({start:"",end:""}),[T,z]=J.useState({}),[q,X]=J.useState({}),[L,oe]=J.useState(!1),[ne,W]=J.useState(!1),[he,Te]=J.useState(!1),[xe,j]=J.useState(null),[N,C]=J.useState(null),[M,R]=J.useState(null),[P,k]=J.useState(null),[ie,je]=J.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[K,pe]=J.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[F,me]=J.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),[_e,O]=J.useState(null);if(J.useEffect(()=>{const te=ms.onAuthStateChanged(ze=>{e(ze),r(!1)}),ke=Un(Tt(Ve,"customers"),Jn("createdAt","desc")),Ze=ps(ke,ze=>{u(ze.docs.map(St=>({id:St.id,...St.data()})))}),ct=Un(Tt(Ve,"sales"),Jn("createdAt","desc")),vn=ps(ct,ze=>{p(ze.docs.map(St=>({id:St.id,...St.data()})))});return()=>{te(),Ze(),vn()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(we.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const D=te=>{z(ke=>({...ke,[te]:!ke[te]}))},I=te=>O(te),A=te=>te.preventDefault(),H=te=>{if(_e===null)return;const ke=[...ie.items],Ze=ke[_e];ke.splice(_e,1),ke.splice(te,0,Ze),je({...ie,items:ke}),O(null)},re=()=>{R(null),pe({name:"",company:"",phone:"",email:"",currency:"TRY"}),W(!0)},ge=te=>{R(te),pe({name:te.name,company:te.company,phone:te.phone,email:te.email,currency:te.currency||"TRY"}),W(!0)},Ne=async te=>{te.preventDefault();try{const ke={...K,updatedAt:new Date().toISOString()};M?await Zn(kt(Ve,"customers",M.id),ke):await li(Tt(Ve,"customers"),{...ke,createdAt:new Date().toISOString()}),W(!1)}catch(ke){alert("Hata: "+ke.message)}},Re=async te=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Li(kt(Ve,"customers",te))},at=te=>{j(te),k(null);const ke="TH-"+Date.now().toString().slice(-6);me({docNo:ke,amount:0,formattedAmount:jm(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),Te(!0)},ht=(te,ke)=>{j(ke),k(te),me({docNo:te.docNo||"",amount:te.amount,formattedAmount:jm(te.amount),type:te.paymentMethod,direction:te.direction||"in",note:te.note,date:te.date}),Te(!0)},$e=te=>{const ke=te.target.value.replace(/\D/g,""),Ze=ke===""?0:parseInt(ke,10)/100;me({...F,amount:Ze,formattedAmount:jm(Ze)})},ce=async te=>{if(te.preventDefault(),!!xe)try{const ke={customerId:xe.id,type:"payment",docNo:F.docNo,amount:parseFloat(F.amount),paymentMethod:F.type,direction:F.direction,note:F.note,date:F.date,createdAt:P?P.createdAt:new Date().toISOString()};P?await Zn(kt(Ve,"sales",P.id),ke):await li(Tt(Ve,"sales"),ke),Te(!1)}catch(ke){alert("Hata: "+ke.message)}},ve=te=>{j(te),C(null);const ke="DOC-"+Date.now().toString().slice(-6);je({docNo:ke,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),oe(!0)},fe=(te,ke)=>{j(ke),C(te);const Ze=(te.items||[]).map(ct=>({...ct,ek:ct.ek||""}));je({docNo:te.docNo,transactionType:te.transactionType||"sale",date:te.date,description:te.description,status:te.status,items:Ze}),oe(!0)},Ie=async te=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Li(kt(Ve,"sales",te))}catch(ke){alert("Hata: "+ke.message)}},qe=async te=>{te.preventDefault();try{const ke={customerId:xe.id,...ie,type:"sale",createdAt:N?N.createdAt:new Date().toISOString()};N?await Zn(kt(Ve,"sales",N.id),ke):await li(Tt(Ve,"sales"),ke),oe(!1)}catch(ke){alert("Hata: "+ke.message)}},be=(te,ke,Ze)=>{const ct=[...ie.items];ct[te][ke]=Ze,je({...ie,items:ct})},Ye=()=>je({...ie,items:[...ie.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),We=te=>je({...ie,items:ie.items.filter((ke,Ze)=>Ze!==te)});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(ng,{startDate:_.start,endDate:_.end,onStartChange:te=>E({..._,start:te}),onEndChange:te=>E({..._,end:te})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Y1,{checked:g,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:re,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(we.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:l.map(te=>{const ke=f.filter(ze=>{const St=ze.customerId===te.id;let bn=!0;return _.start&&ze.date<_.start&&(bn=!1),_.end&&ze.date>_.end&&(bn=!1),St&&bn}).sort((ze,St)=>new Date(St.date)-new Date(ze.date)),Ze=rR(te.id,f),ct=T[te.id],vn=te.currency||"TRY";return c.jsxs(Rs,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>D(te.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(we.User,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:te.name}),c.jsx("button",{onClick:ze=>{ze.stopPropagation(),ge(te)},className:"text-gray-400 hover:text-indigo-500 transition-colors",children:c.jsx(we.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:te.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:ct?c.jsx(we.ChevronDown,{className:"transform rotate-180"}):c.jsx(we.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${Ze>0?"text-emerald-600":"text-red-500"}`,children:nn(Ze,vn)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:Ze>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Zt,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>at(te),children:[c.jsx(we.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(Zt,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>ve(te),children:[c.jsx(we.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>db(te,f,_),className:"p-2 text-indigo-900 hover:text-indigo-900 hover:bg-indigo-50 rounded-lg transition-all",title:"Detayl Rapor",children:c.jsx(we.TableRows,{className:"text-current"})}),c.jsx("button",{onClick:()=>oR(te,f,_),className:"p-2 text-purple-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all",title:"zet Rapor",children:c.jsx(we.Clipboard,{className:"text-current"})}),c.jsx("button",{onClick:()=>lR(te,f),className:"p-2 text-emerald-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all",title:"Excel",children:c.jsx(we.Download,{className:"text-current"})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Re(te.id),className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(we.Trash,{className:"text-current"})})]})]})]})]}),ct&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:ke.map(ze=>{const St=ze.type==="payment",bn=ze.transactionType==="purchase",Cn=ze.direction==="out",Hi=St?ze.amount:Q1(ze.items),qr=q[ze.id];let ci="",cn="",Dt="bg-indigo-400",un=`SATI #${ze.docNo}`,wt="+";return St?Cn?(un="DEME YAPILDI",ci="bg-red-50/30",cn="text-red-500",Dt="bg-red-400",wt="+"):(un="DEME ALINDI",ci="bg-emerald-50/30",cn="text-emerald-600",Dt="bg-emerald-400",wt="-"):bn?(ci="bg-red-50/30",cn="text-red-500",Dt="bg-red-400",un=`ALI #${ze.docNo}`,wt="-"):(cn="text-emerald-600",Dt="bg-emerald-400",wt="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${ci}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Dt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:un}),St&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:ze.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:iR(ze.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:St?ze.note||"-":`${ze.items?.length||0} Kalem rn`}),!St&&c.jsxs("button",{onClick:()=>X(zn=>({...zn,[ze.id]:!zn[ze.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[qr?c.jsx(we.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(we.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${cn}`,children:[wt,nn(Hi,vn)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>db(te,f,_,ze.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(we.Printer,{})}),St?c.jsx("button",{onClick:()=>ht(ze,te),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(we.Edit,{})}):c.jsx("button",{onClick:()=>fe(ze,te),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(we.Edit,{})}),c.jsx("button",{onClick:()=>Ie(ze.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(we.Trash,{})})]})]})]}),qr&&!St&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:ze.items?.map((zn,qi)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:zn.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:zn.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:zn.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:nn(zn.unitPrice,vn)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:nn(Pl(zn),vn)})]},qi))})]})})})]},ze.id)})})]},te.id)})}),ne&&c.jsx(Ll,{isOpen:ne,onClose:()=>W(!1),title:M?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[c.jsx(ft,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:K.name,onChange:te=>pe({...K,name:te.target.value})}),c.jsx(ft,{placeholder:"Firma (Opsiyonel)",value:K.company,onChange:te=>pe({...K,company:te.target.value})}),c.jsx(ft,{placeholder:"Telefon",value:K.phone,onChange:te=>pe({...K,phone:te.target.value})}),c.jsx(ft,{placeholder:"E-Posta",value:K.email,onChange:te=>pe({...K,email:te.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(te=>c.jsx("button",{type:"button",onClick:()=>pe({...K,currency:te}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${K.currency===te?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:te},te))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(Zt,{variant:"secondary",type:"button",onClick:()=>W(!1),children:"ptal"}),c.jsx(Zt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),he&&c.jsxs(Ll,{isOpen:he,onClose:()=>Te(!1),title:P?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:xe?.name}),c.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>me({...F,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${F.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>me({...F,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${F.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(te=>c.jsx("button",{type:"button",onClick:()=>me({...F,type:te}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${F.type===te?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:te},te))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${F.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:F.formattedAmount,onChange:$e}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:uh(xe?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(ft,{placeholder:"Belge No",value:F.docNo,onChange:te=>me({...F,docNo:te.target.value})}),c.jsx(ft,{type:"date",required:!0,value:F.date,onChange:te=>me({...F,date:te.target.value})})]}),c.jsx(ft,{placeholder:"Not (Opsiyonel)",value:F.note,onChange:te=>me({...F,note:te.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(Zt,{variant:"secondary",type:"button",onClick:()=>Te(!1),children:"ptal"}),c.jsx(Zt,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),L&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:qe,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:N?"lemi Dzenle":"Yeni lem"}),c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>je({...ie,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ie.transactionType==="sale"?"bg-emerald-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP (+)"}),c.jsx("button",{type:"button",onClick:()=>je({...ie,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ie.transactionType==="purchase"?"bg-red-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP (-)"})]})]}),c.jsx("button",{type:"button",onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(ft,{value:ie.docNo,onChange:te=>je({...ie,docNo:te.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(ft,{type:"date",required:!0,value:ie.date,onChange:te=>je({...ie,date:te.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(ft,{value:ie.description,onChange:te=>je({...ie,description:te.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:ie.items.map((te,ke)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>I(ke),onDragOver:A,onDrop:()=>H(ke),style:{opacity:_e===ke?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:te.ek,onChange:Ze=>be(ke,"ek",Ze.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:te.name,onChange:Ze=>be(ke,"name",Ze.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:te.qty,onChange:Ze=>be(ke,"qty",Ze.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:te.unitPrice,onChange:Ze=>be(ke,"unitPrice",Ze.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:te.vatRate,onChange:Ze=>be(ke,"vatRate",Ze.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:nn(Pl(te),xe?.currency)}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>We(ke),className:"text-gray-400 hover:text-red-500",children:c.jsx(we.Trash,{})})})]},ke))})]}),c.jsxs("button",{type:"button",onClick:()=>{if(ie.items.length===0)return;const te=ie.items[ie.items.length-1];je({...ie,items:[...ie.items,{...te}]})},className:"w-full py-2 bg-indigo-50/50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Ye,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:nn(Cm(ie.items).subtotal,xe?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:nn(Cm(ie.items).totalVAT,xe?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:nn(Cm(ie.items).grandTotal,xe?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>oe(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const hb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},fb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function uR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState([]),[g,x]=J.useState({start:"",end:""}),[_,E]=J.useState(!1),[T,z]=J.useState(!1),[q,X]=J.useState(!1),[L,oe]=J.useState({}),[ne,W]=J.useState({}),he=J.useRef(null),[Te,xe]=J.useState(null),[j,N]=J.useState(null),[C,M]=J.useState({en:6,boy:4}),[R,P]=J.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),k=J.useMemo(()=>f.map(ce=>ce.name).sort(),[f]);J.useEffect(()=>{const ce=ms.onAuthStateChanged(be=>{e(be),r(!1)}),ve=Un(Tt(Ve,"customers"),Jn("name","asc")),fe=ps(ve,be=>{p(be.docs.map(Ye=>({id:Ye.id,...Ye.data()})))}),Ie=Un(Tt(Ve,"siparisler"),Jn("createdAt","desc")),qe=ps(Ie,be=>{u(be.docs.map(Ye=>({id:Ye.id,...Ye.data()})))});return()=>{ce(),fe(),qe()}},[]);const ie=J.useMemo(()=>{const ce=[...f],ve=new Set(f.map(fe=>fe.id));return l.forEach(fe=>{fe.customerId&&!ve.has(fe.customerId)&&(ce.find(Ie=>Ie.id===fe.customerId)||ce.push({id:fe.customerId,name:fe.customerId,company:"Kaytsz (Manuel)"}))}),ce.sort((fe,Ie)=>fe.name.localeCompare(Ie.name))},[l,f]);if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const je=i?.email==="furkan@avci.jp",K=ce=>{if(!ce)return;const ve=new FileReader;ve.onload=fe=>{const Ie=new Image;Ie.onload=()=>{const qe=document.createElement("canvas"),be=800,Ye=800;let We=Ie.width,te=Ie.height;We>te?We>be&&(te*=be/We,We=be):te>Ye&&(We*=Ye/te,te=Ye),qe.width=We,qe.height=te,qe.getContext("2d").drawImage(Ie,0,0,We,te);const Ze=qe.toDataURL("image/jpeg",.8);P(ct=>({...ct,image:Ze}))},Ie.src=fe.target.result},ve.readAsDataURL(ce)},pe=ce=>{ce.preventDefault(),X(!0)},F=()=>X(!1),me=ce=>{ce.preventDefault(),X(!1),ce.dataTransfer.files&&ce.dataTransfer.files[0]&&K(ce.dataTransfer.files[0])},_e=ce=>{ce.clipboardData.files&&ce.clipboardData.files[0]&&K(ce.clipboardData.files[0])},O=()=>{xe(null);const ce="SP-"+Date.now().toString().slice(-6);P({siparisNo:ce,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),M({en:6,boy:4}),E(!0)},D=ce=>{xe(ce);const ve=f.find(Ie=>Ie.id===ce.customerId),fe=ve?ve.name:ce.customerId;P({siparisNo:ce.siparisNo,customerId:fe,date:ce.date,note:ce.note||"",image:ce.image,items:ce.items||[]}),E(!0)},I=async ce=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Li(kt(Ve,"siparisler",ce))}catch(ve){alert(ve.message)}},A=async ce=>{if(ce.preventDefault(),!R.customerId){alert("Ltfen mteri giriniz.");return}try{const ve=f.find(qe=>qe.name===R.customerId),fe=ve?ve.id:R.customerId,Ie={...R,customerId:fe,createdAt:Te?Te.createdAt:new Date().toISOString()};Te?await Zn(kt(Ve,"siparisler",Te.id),Ie):await li(Tt(Ve,"siparisler"),{...Ie,productionStatus:{}}),E(!1)}catch(ve){alert(ve.message)}},H=(ce,ve,fe)=>{const Ie=[...R.items],qe=Ie[ce];if(qe[ve]=fe,ve==="en1"){const be=parseFloat(fe);isNaN(be)?fe===""&&(qe.en2=""):qe.en2=be-C.en}if(ve==="boy1"){const be=parseFloat(fe);isNaN(be)?fe===""&&(qe.boy2=""):qe.boy2=be-C.boy}P({...R,items:Ie})},re=()=>{P({...R,items:[...R.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},ge=()=>{if(R.items.length===0)return;const ve={...R.items[R.items.length-1]};P({...R,items:[...R.items,ve]})},Ne=ce=>{const ve=R.items.filter((fe,Ie)=>Ie!==ce);P({...R,items:ve})},Re=(ce,ve)=>{const fe=parseFloat(ve)||0,Ie={...C,[ce]:fe};M(Ie);const qe=R.items.map(be=>({...be,en2:be.en1?parseFloat(be.en1)-Ie.en:be.en2,boy2:be.boy1?parseFloat(be.boy1)-Ie.boy:be.boy2}));P({...R,items:qe})},at=ce=>{N(ce),z(!0)},ht=async(ce,ve)=>{if(!j)return;const fe=j.productionStatus||{},Ie=fe[ce]||{},qe={...fe,[ce]:{...Ie,[ve]:!Ie[ve]}};N({...j,productionStatus:qe}),await Zn(kt(Ve,"siparisler",j.id),{productionStatus:qe})},$e=ce=>{const ve=f.find(be=>be.id===ce.customerId),fe=ve?ve.name:ce.customerId||"simsiz";f.find(be=>be.id===ce.customerId);const Ie=window.open("","","height=800,width=1000");if(!Ie){alert("Pop-up engelleyiciyi kapatn.");return}const qe=`
      <html><head><title>Sipari - ${ce.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 16px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: normal; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 10px; font-size: 16px; word-wrap: break-word; border: 5px solid #eee; padding: 1px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${fe}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${ce.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${fb(ce.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${ce.items.map(be=>`
              <tr>
                <td class="group-kasa">${be.en1||"-"}</td>
                <td class="group-kasa">${be.boy1||"-"}</td>
                <td class="group-kasa">${be.genislik||"-"}</td>
                <td>${be.takim||""}</td>
                <td class="col-desc">${be.aciklama||""}</td>
                <td class="group-net"><strong>${be.en2||""}</strong></td>
                <td class="group-net"><strong>${be.boy2||""}</strong></td>
                <td>${be.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${ce.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${ce.note}
          </div>
        `:""}

        ${ce.image?`
          <div class="door-image-container">
            <img src="${ce.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ie.document.write(qe),Ie.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_e,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(ng,{startDate:g.start,endDate:g.end,onStartChange:ce=>x({...g,start:ce}),onEndChange:ce=>x({...g,end:ce})}),je&&c.jsxs("button",{onClick:O,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(we.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:ie.map(ce=>{const ve=l.filter(fe=>{const Ie=fe.customerId===ce.id;let qe=!0;return g.start&&(qe=qe&&fe.date>=g.start),g.end&&(qe=qe&&fe.date<=g.end),Ie&&qe});return ve.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(we.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:ce.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[ve.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:ve.map(fe=>{const Ie=L[fe.id],qe=ne[fe.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:fe.image?c.jsx("img",{src:fe.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",fe.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:fb(fe.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[fe.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>oe(be=>({...be,[fe.id]:!be[fe.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ie?c.jsx(we.ChevronUp,{}):c.jsx(we.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>W(be=>({...be,[fe.id]:!be[fe.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[qe?c.jsx(we.ChevronUp,{}):c.jsx(we.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>at(fe),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(we.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>$e(fe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(we.Printer,{})}),je&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>D(fe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(we.Edit,{})}),c.jsx("button",{onClick:()=>I(fe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(we.Trash,{})})]})]})]}),Ie&&c.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:[fe.note&&c.jsxs("div",{className:"mb-4 p-3 bg-white border border-gray-200 rounded-lg text-xs text-gray-600 shadow-sm",children:[c.jsx("span",{className:"font-bold text-indigo-600 block mb-1 uppercase tracking-wider",children:"Sipari Notu"}),c.jsx("p",{className:"whitespace-pre-wrap",children:fe.note})]}),c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.items?.map((be,Ye)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:be.aciklama||"-"}),c.jsx("td",{className:"py-2",children:be.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[be.en1||"-"," x ",be.boy1||"-"," x ",be.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[be.en2," x ",be.boy2]}),c.jsx("td",{className:"py-2",children:be.sekil||"-"})]},Ye))})]})]}),qe&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(hb).map(([be,Ye])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:Ye.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:Ye.steps.map(We=>{const te=fe.productionStatus?.[be]?.[We.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:te?"text-purple-700 font-medium":"text-gray-400",children:We.label}),te?c.jsx(we.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(we.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},We.id)})})]},be))})})]},fe.id)})})]},ce.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:A,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Te?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:R.siparisNo,onChange:ce=>P({...R,siparisNo:ce.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Ta,{options:k,selected:R.customerId,onChange:ce=>P({...R,customerId:ce}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:ce=>P({...R,date:ce.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${q?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:pe,onDragLeave:F,onDrop:me,children:[c.jsx("input",{ref:he,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ce=>K(ce.target.files[0])}),R.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:R.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(we.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:q?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:R.note,onChange:ce=>P({...R,note:ce.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:C.en,onChange:ce=>Re("en",ce.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:C.boy,onChange:ce=>Re("boy",ce.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map((ce,ve)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ce.en1,onChange:fe=>H(ve,"en1",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ce.boy1,onChange:fe=>H(ve,"boy1",fe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:ce.genislik,onChange:fe=>H(ve,"genislik",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:ce.takim,onChange:fe=>H(ve,"takim",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:ce.aciklama,onChange:fe=>H(ve,"aciklama",fe.target.value),onInput:fe=>{fe.target.style.height="auto",fe.target.style.height=fe.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${ve}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:ce.sekil,onChange:fe=>H(ve,"sekil",fe.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${ve}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ce.en2,onChange:fe=>H(ve,"en2",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ce.boy2,onChange:fe=>H(ve,"boy2",fe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Ne(ve),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},ve))})]}),c.jsxs("button",{type:"button",onClick:ge,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(we.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:re,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Te?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),T&&j&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",j.siparisNo]})]}),c.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(hb).map(([ce,ve])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:ve.title}),c.jsx("div",{className:"space-y-2",children:ve.steps.map(fe=>{const Ie=j.productionStatus?.[ce]?.[fe.id];return c.jsxs("button",{onClick:()=>ht(ce,fe.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ie?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:fe.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ie?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ie&&c.jsx(we.Check,{})})]},fe.id)})})]},ce))})]})})]})}const dR=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",hR=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),mb=({item:i,isAdd:e,onEdit:n,onDelete:r})=>c.jsxs(Rs,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:dR(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>n(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(we.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(we.Trash,{})})]})]})]});function fR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState({start:"",end:""}),[g,x]=J.useState(!1),[_,E]=J.useState([]),[T,z]=J.useState(!0),[q,X]=J.useState(!0),[L,oe]=J.useState(null),[ne,W]=J.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),he=J.useMemo(()=>[...new Set(l.map(ie=>ie.productName))].sort(),[l]),Te=J.useMemo(()=>{const ie=l.map(K=>K.unit).filter(Boolean),je=["adet","kg","m2","m3","mt","paket"];return[...new Set([...je,...ie])].sort()},[l]);J.useEffect(()=>{const ie=ms.onAuthStateChanged(pe=>{e(pe),r(!1)}),je=Un(Tt(Ve,"inventory_movements"),Jn("date","desc")),K=ps(je,pe=>{u(pe.docs.map(F=>({id:F.id,...F.data()})))});return()=>{ie(),K()}},[]);const xe=J.useMemo(()=>l.filter(ie=>{let je=!0;if(f.start&&(je=je&&ie.date>=f.start),f.end&&(je=je&&ie.date<=f.end),ie.productType==="raw"&&!T||(ie.productType==="manufactured"||ie.productType==="uretilmis")&&!q)return!1;let K=!0;return _.length>0&&(K=_.includes(ie.productName)),je&&K}),[l,f,T,q,_]),j=xe.filter(ie=>ie.action==="add"),N=xe.filter(ie=>ie.action==="remove"),C=async ie=>{ie.preventDefault();try{const je={...ne,quantity:Number(ne.quantity),createdAt:new Date().toISOString()};L?await Zn(kt(Ve,"inventory_movements",L),je):await li(Tt(Ve,"inventory_movements"),je),k()}catch(je){alert("Hata: "+je.message)}},M=async ie=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Li(kt(Ve,"inventory_movements",ie))},R=async ie=>{if(window.confirm(`"${ie}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const je=Un(Tt(Ve,"inventory_movements"),GC("productName","==",ie)),K=await tc(je),pe=ZC(Ve);K.forEach(F=>{pe.delete(F.ref)}),await pe.commit(),_.includes(ie)&&E(F=>F.filter(me=>me!==ie)),ne.productName===ie&&W(F=>({...F,productName:""}))}catch(je){alert("Silme hatas: "+je.message)}},P=ie=>{oe(ie.id),W({productType:ie.productType,productName:ie.productName,action:ie.action,quantity:ie.quantity,unit:ie.unit,date:ie.date}),x(!0)},k=()=>{x(!1),oe(null),W({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return n?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(ng,{startDate:f.start,endDate:f.end,onStartChange:ie=>p({...f,start:ie}),onEndChange:ie=>p({...f,end:ie})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(hR,{showRaw:T,setShowRaw:z,showManufactured:q,setShowManufactured:X}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Ta,{options:he,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(we.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[j.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[j.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),j.map(ie=>c.jsx(mb,{item:ie,isAdd:!0,onEdit:P,onDelete:M},ie.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[N.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[N.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),N.map(ie=>c.jsx(mb,{item:ie,isAdd:!1,onEdit:P,onDelete:M},ie.id))]})]})]}),c.jsx(Ll,{isOpen:g,onClose:k,title:L?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${ne.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:ne.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(Y1,{checked:ne.productType==="manufactured",onChange:ie=>W({...ne,productType:ie?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Ta,{options:he,selected:ne.productName,onChange:ie=>W({...ne,productName:ie}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>W({...ne,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>W({...ne,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(ft,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:ne.quantity,onChange:ie=>W({...ne,quantity:ie.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Ta,{options:Te,selected:ne.unit,onChange:ie=>W({...ne,unit:ie}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(ft,{type:"date",required:!0,value:ne.date,onChange:ie=>W({...ne,date:ie.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Zt,{type:"submit",variant:"primary",children:L?"Gncelle":"Kaydet"}),c.jsx(Zt,{type:"button",variant:"secondary",onClick:k,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const mR=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),pR=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const n=300,r=800,l=40,u=r-l*2,f=n-l*2,p=i.flatMap(_=>e.map(E=>_[E]||0)),g=Math.max(...p,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=n-l-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:l,y1:E,x2:r-l,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:l-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(g/4*_)})]},_)}),e.map((_,E)=>{const T=x[E%x.length],z=i.map((q,X)=>{const L=l+X*(u/(i.length-1||1)),oe=q[_]||0,ne=n-l-oe/g*f,W=isNaN(L)?l:L,he=isNaN(ne)?n-l:ne;return`${W},${he}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:T,strokeWidth:"3",points:z,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((q,X)=>{const L=l+X*(u/(i.length-1||1)),oe=q[_]||0,ne=n-l-oe/g*f,W=isNaN(L)?l:L,he=isNaN(ne)?n-l:ne;return c.jsx("circle",{cx:W,cy:he,r:"4",fill:"white",stroke:T,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${q.month} - ${_}: ${oe}`})},X)})]},_)}),i.map((_,E)=>{const T=l+E*(u/(i.length-1||1));return c.jsx("text",{x:T,y:n-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[E%x.length]}}),_]},_))})]})},gR=({name:i,qty:e,unit:n,type:r,change:l,changePercent:u})=>{const f=r==="raw",p=e<0,g=u>10;let x="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(we.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",E=c.jsx(we.TrendingDown,{}));let T=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",z=f?"text-pink-900":"text-purple-900",q=f?"text-pink-700/70":"text-purple-700/70";p?(T="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",z="text-red-700",q="text-red-500"):g&&(T="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",z="text-emerald-800",q="text-emerald-600");const X=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${T}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:X}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${z}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${q} uppercase`,children:n})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[l>0?"+":"",l.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function yR(){const[i,e]=J.useState([]),[n,r]=J.useState(!0),[l,u]=J.useState(!0),[f,p]=J.useState(!0),[g,x]=J.useState([]),[_,E]=J.useState("year");J.useEffect(()=>{const L=Un(Tt(Ve,"inventory_movements"),Jn("date","asc")),oe=ps(L,ne=>{const W=ne.docs.map(he=>he.data());e(W),r(!1)});return()=>oe()},[]);const T=J.useMemo(()=>{const L={},oe=new Date;return oe.setDate(oe.getDate()-30),i.forEach(ne=>{const W=Number(ne.quantity)||0,he=ne.action==="add"?W:-W,Te=new Date(ne.date);L[ne.productName]||(L[ne.productName]={name:ne.productName,qty:0,unit:ne.unit,type:ne.productType||"raw",change30Days:0}),L[ne.productName].qty+=he,L[ne.productName].type=ne.productType||L[ne.productName].type,Te>=oe&&(L[ne.productName].change30Days+=he)}),Object.values(L).map(ne=>{const W=ne.qty-ne.change30Days;let he=0;return W!==0?he=ne.change30Days/Math.abs(W)*100:ne.change30Days!==0&&(he=100),{...ne,changePercent:he}})},[i]),z=J.useMemo(()=>T.filter(L=>!(L.type==="raw"&&!l||(L.type==="manufactured"||L.type==="uretilmis")&&!f||g.length>0&&!g.includes(L.name))),[T,l,f,g]),q=J.useMemo(()=>T.map(L=>L.name).sort(),[T]),X=J.useMemo(()=>{const L=z.sort((he,Te)=>Math.abs(Te.qty)-Math.abs(he.qty)).slice(0,5).map(he=>he.name);if(L.length===0)return{data:[],keys:[]};const oe={},ne={};return L.forEach(he=>ne[he]=0),i.forEach(he=>{if(!L.includes(he.productName))return;const Te=he.date?he.date.slice(0,7):"N/A";if(Te==="N/A")return;if(_==="year"){const N=new Date().getFullYear();if(new Date(he.date).getFullYear()!==N)return}const xe=Number(he.quantity)||0,j=he.action==="add"?xe:-xe;ne[he.productName]||(ne[he.productName]=0),ne[he.productName]+=j,oe[Te]={...ne,month:Te}}),{data:Object.values(oe).sort((he,Te)=>he.month.localeCompare(Te.month)),keys:L}},[i,z,_]);return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(mR,{showRaw:l,setShowRaw:u,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Ta,{options:q,selected:g,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:z.length>0?z.map((L,oe)=>c.jsx(gR,{name:L.name,qty:L.qty,unit:L.unit,type:L.type,change:L.change30Days,changePercent:L.changePercent},oe)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(we.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),X.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(we.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:L=>E(L.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(pR,{data:X.data,keys:X.keys})]})]})]})}const pb=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,wr={deliveryDate:"stenilen teslim tarihi en az 50 gn ncesinden imalat firmaya bildirilecektir.",packaging:"Tm rnler hava artlarndan etkilenmeyecek ekilde, stre naylon ve ke koruyucu malzemelerle ambalajlanacaktr.",assembly:"Nakliye ve montaj haritir.",vat:"KDV hari fiyatlardr."},js=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",bd=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",ip=i=>{if(!i)return{subtotal:0,totalVAT:0,grandTotal:0};const e=i.reduce((r,l)=>r+Number(l.quantity)*Number(l.price),0),n=i.reduce((r,l)=>r+Number(l.quantity)*Number(l.price)*(Number(l.vat)/100),0);return{subtotal:e,totalVAT:n,grandTotal:e+n}},xR=i=>{const e=window.open("","","height=800,width=1000");if(!e){alert("Pop-up engelleyiciyi kapatn.");return}const n=ip(i.items||[]),r=i.images||[],l=i.type==="contract",u=`
    @page { size: A4; margin: 0; }
    html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
    body { font-family: 'Helvetica', sans-serif; color: #333; padding: 10mm 15mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
    
    /* Background Image */
    .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
    .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

    .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

    table { width: 100%; border-collapse: collapse; font-size: 10pt; margin-bottom: 20px; }
    th { border-bottom: 2px solid #be185d; color: #be185d; padding: 8px 4px; text-align: left; font-weight: bold; text-transform: uppercase; }
    td { border-bottom: 1px solid #fce7f3; padding: 8px 4px; vertical-align: top; }
    .text-right { text-align: right; } 
    .text-center { text-align: center; }
    .font-bold { font-weight: bold; }
    .text-pink { color: #be185d; }

    .totals-container { margin-left: auto; width: 300px; padding: 10px; }
    .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 10pt; }
    .grand-total { font-size: 14pt; font-weight: bold; color: #be185d; border-top: 2px solid #be185d; padding-top: 8px; margin-top: 4px; }
    
    .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
  `;let f="";l?f=`
      <div class="header-contract" style="text-align:center; margin-bottom:30px;">
        <div style="text-align:right; font-size:11pt; font-weight:bold; margin-top:10px; color:#be185d;">TARH: ${bd(i.date)}</div>
        <h2 style="font-size:18pt; letter-spacing:3px; margin-top:10px;"><br></h2>
      </div>

      <div style="margin-bottom:20px; font-size:11pt;">
        <strong>SAYIN:</strong> <span style="font-size:12pt;">${i.customerName}</span>
      </div>

      <table>
        <thead><tr><th width="50%">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Fiyat</th><th class="text-right">Tutar</th></tr></thead>
        <tbody>
          ${i.items.map(g=>`
            <tr>
              <td>${g.description}</td>
              <td class="text-center">${g.quantity}</td>
              <td class="text-right">${js(g.price)}</td>
              <td class="text-right"><strong>${js(g.total)}</strong></td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="totals-container">
        <div class="total-row grand-total"><span>TOPLAM:</span> <span>${js(n.grandTotal)}</span></div>
      </div>

      <div style="margin-top:20px; font-size:10pt; line-height:1.5;">
        <p><strong>deme ekli:</strong> ${i.note||"-"}</p>
        <p><strong>Teslim Tarihi:</strong> ${i.deliveryDate}</p>
        <p><strong>Ambalaj:</strong> ${i.packaging}</p>
        <p><strong>Montaj ve Nakliye:</strong> ${i.assembly}</p>
        <p><strong>KDV:</strong> ${i.vat}</p>
        <p><strong>Not:</strong> Fiyat Teklifi ${bd(i.validityDate)} tarihine kadar geerlidir.</p>
        ${i.validityNote?`<p><strong>Ek Not:</strong> ${i.validityNote}</p>`:""}
      </div>

      <!-- Signature Area -->
      <div style="display:flex; justify-content:space-between; margin-top:50px; margin-bottom:50px;">
         <div style="width:40%; border:2px dashed #be185d; height:100px; display:flex; align-items:end; justify-content:center; padding-bottom:10px; color:#be185d; font-weight:bold;">
            FRMA KAE / MZA
         </div>
         <div style="width:40%; border:2px dashed #be185d; height:100px; display:flex; align-items:end; justify-content:center; padding-bottom:10px; color:#be185d; font-weight:bold;">
            MTER MZA
         </div>
      </div>
    `:f=`
<div style="display:flex; justify-content:space-between; margin-bottom:40px; border-bottom:2px solid #fce7f3; padding-bottom:10px;">
  <div></div>

  <div style="text-align:right; background:#fff; padding:10px; border-radius:16px; box-shadow:0 0 0 9999px rgba(255,255,255,0.7) inset;">
    <h2 style="font-size:30px; font-weight:bold; color:#be185d; margin:0;">Teklif Formu</h2>
    <table style="font-size:12px; margin-top:5px; border:none;">
      <tr>
        <td style="border:none; padding:2px; font-weight:bold; color:#831843;">Teklif No:</td>
        <td style="border:none; padding:2px; text-align:right;">#${i.teklifNo}</td>
      </tr>
      <tr>
        <td style="border:none; padding:2px; font-weight:bold; color:#831843;">Tarih:</td>
        <td style="border:none; padding:2px; text-align:right;">${bd(i.date)}</td>
      </tr>
    </table>
  </div>
</div>


      <div style="margin-bottom:30px;">
         <div style="font-size:10px; font-weight:bold; color:#be185d;">SAYIN</div>
         <div style="font-size:18px; font-weight:bold;">${i.customerName}</div>
      </div>

      <table>
        <thead><tr><th width="45%">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
        <tbody>
          ${i.items.map(g=>`
            <tr>
              <td>${g.description}</td>
              <td class="text-center">${g.quantity}</td>
              <td class="text-right">${js(g.price)}</td>
              <td class="text-center">%${g.vat}</td>
              <td class="text-right"><strong>${js(g.total)}</strong></td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="totals-container">
        <div class="total-row"><span>Ara Toplam:</span> <span>${js(n.subtotal)}</span></div>
        <div class="total-row"><span>Toplam KDV:</span> <span>${js(n.totalVAT)}</span></div>
        <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${js(n.grandTotal)}</span></div>
      </div>

      ${i.note?`<div style="margin-top:20px; font-size:11px; white-space:pre-wrap;"><strong>NOT:</strong><br/>${i.note}</div>`:""}
    `;const p=`
    <html><head><title>${l?"Szleme":"Teklif"} - ${i.teklifNo}</title>
    <style>${u}</style>
    </head><body>
      <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
      <div class="content">
        
        ${f}

        <div class="image-section" style="margin-top:auto; padding-top:20px;">
           <div class="image-grid" style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
             ${r.map(g=>`<img src="${g}" style="max-width:45%; max-height:200px; object-fit:contain; border:1px solid #fce7f3; background:white; padding:3px;" />`).join("")}
           </div>
        </div>

        <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
      </div>
      <script>setTimeout(() => { window.print(); }, 1000);<\/script>
    </body></html>
  `;e.document.write(p),e.document.close()};function vR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState([]),[g,x]=J.useState("both"),[_,E]=J.useState(!1),[T,z]=J.useState(!1),[q,X]=J.useState(null),L=J.useRef(null),[oe,ne]=J.useState(null),[W,he]=J.useState({type:"proposal",teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:pb,paymentMethod:"",deliveryDate:wr.deliveryDate,packaging:wr.packaging,assembly:wr.assembly,vat:wr.vat,validityNote:"",images:[],items:[]}),Te=J.useMemo(()=>f.map(I=>I.name).sort(),[f]);if(J.useEffect(()=>{const I=ms.onAuthStateChanged(Ne=>{e(Ne),r(!1)}),A=Un(Tt(Ve,"teklifler"),Jn("createdAt","desc")),H=ps(A,Ne=>u(Ne.docs.map(Re=>({id:Re.id,...Re.data()})))),re=Un(Tt(Ve,"customers"),Jn("name","asc")),ge=ps(re,Ne=>p(Ne.docs.map(Re=>({id:Re.id,...Re.data()}))));return()=>{I(),H(),ge()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsx("div",{className:"p-10 text-center text-red-500",children:"Yetkisiz Eriim"});const xe=I=>{const A=Array.from(I.target.files||I.dataTransfer.files);A.length&&A.forEach(H=>{if(!H.type.startsWith("image/"))return;const re=new FileReader;re.onload=ge=>{const Ne=new Image;Ne.onload=()=>{const Re=document.createElement("canvas"),at=800;let ht=Ne.width,$e=Ne.height;ht>$e?ht>at&&($e*=at/ht,ht=at):$e>at&&(ht*=at/$e,$e=at),Re.width=ht,Re.height=$e,Re.getContext("2d").drawImage(Ne,0,0,ht,$e),he(ve=>({...ve,images:[...ve.images,Re.toDataURL("image/jpeg",.6)]}))},Ne.src=ge.target.result},re.readAsDataURL(H)})},j=I=>{I.preventDefault(),z(!0)},N=()=>z(!1),C=I=>{I.preventDefault(),z(!1),xe(I)},M=I=>{I.clipboardData.files&&I.clipboardData.files.length>0&&(I.preventDefault(),xe({target:{files:I.clipboardData.files}}))},R=(I,A,H)=>{const re=[...W.items];re[I][A]=H;const ge=parseFloat(re[I].quantity)||0,Ne=parseFloat(re[I].price)||0,Re=parseFloat(re[I].vat)||0;re[I].total=ge*Ne+ge*Ne*(Re/100),he({...W,items:re})},P=()=>he({...W,items:[...W.items,{description:"",quantity:1,price:0,vat:20,total:0}]}),k=I=>he({...W,items:W.items.filter((A,H)=>H!==I)}),ie=()=>{if(W.items.length===0)return;const I={...W.items[W.items.length-1]};he({...W,items:[...W.items,I]})},je=I=>X(I),K=I=>I.preventDefault(),pe=I=>{if(q===null)return;const A=[...W.items],H=A.splice(q,1)[0];A.splice(I,0,H),he({...W,items:A}),X(null)},F=()=>{ne(null);const I=new Date;I.setDate(I.getDate()+7),he({type:"proposal",teklifNo:"TK-"+Date.now().toString().slice(-6),teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:I.toISOString().split("T")[0],note:pb,paymentMethod:"",deliveryDate:wr.deliveryDate,packaging:wr.packaging,assembly:wr.assembly,vat:wr.vat,validityNote:"",images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},me=I=>{ne(I.id),he(I),E(!0)},_e=async I=>{if(I.preventDefault(),!W.customerName){alert("Ltfen mteri ad giriniz.");return}try{const A={...W,createdAt:new Date().toISOString()};oe?await Zn(kt(Ve,"teklifler",oe),A):await li(Tt(Ve,"teklifler"),A),E(!1)}catch(A){alert(A.message)}},O=async I=>{window.confirm("Silmek istediinize emin misiniz?")&&await Li(kt(Ve,"teklifler",I))},D=l.filter(I=>!(g==="proposal"&&I.type==="contract"||g==="contract"&&I.type!=="contract"));return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?M:void 0,children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white/80 backdrop-blur-xl p-1.5 rounded-2xl border border-gray-200/60 shadow-sm",children:[c.jsxs("div",{className:"flex bg-gray-100/50 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>x("both"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${g==="both"?"bg-white shadow-sm text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:"Tm"}),c.jsx("button",{onClick:()=>x("proposal"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${g==="proposal"?"bg-white shadow-sm text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:"Teklifler"}),c.jsx("button",{onClick:()=>x("contract"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${g==="contract"?"bg-white shadow-sm text-pink-600":"text-gray-400 hover:text-gray-600"}`,children:"Szlemeler"})]}),c.jsx("button",{onClick:F,className:"flex items-center justify-center w-10 h-10 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all ml-2",children:c.jsx(we.Plus,{})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pb-10",children:[D.map(I=>{const A=I.type==="contract",H=ip(I.items);return c.jsxs(Rs,{className:`p-3 flex items-center justify-between gap-3 hover:scale-[1.01] transition-transform duration-200 ${A?"bg-pink-50/40 border-pink-200/50":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center text-lg ${A?"bg-pink-100 text-pink-600":"bg-indigo-50 text-indigo-600"}`,children:c.jsx(we.Clipboard,{})}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 truncate",children:I.teklifName||"simsiz"}),c.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider ${A?"bg-pink-50 border-pink-100 text-pink-600":"bg-indigo-50 border-indigo-100 text-indigo-600"}`,children:A?"SZLEME":"TEKLF"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[c.jsx("span",{className:"font-medium truncate max-w-[100px]",children:I.customerName}),c.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),c.jsx("span",{children:bd(I.date)})]})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[c.jsx("span",{className:"text-sm font-black text-gray-800",children:js(H.grandTotal)}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>xR(I),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-indigo-600 transition-colors",title:"Yazdr",children:c.jsx(we.Printer,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>me(I),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-blue-600 transition-colors",title:"Dzenle",children:c.jsx(we.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>O(I.id),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-red-500 transition-colors",title:"Sil",children:c.jsx(we.Trash,{className:"w-3 h-3"})})]})]})]},I.id)}),D.length===0&&c.jsx("div",{className:"col-span-full text-center py-12 text-gray-400 bg-white/40 rounded-xl border border-dashed border-gray-300",children:"Kayt bulunamad."})]}),c.jsx(Ll,{isOpen:_,onClose:()=>E(!1),title:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{children:oe?"Dzenle":"Yeni Kayt"}),c.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg ml-4",children:[c.jsx("button",{type:"button",onClick:()=>he({...W,type:"proposal"}),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${W.type==="proposal"?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"TEKLF"}),c.jsx("button",{type:"button",onClick:()=>he({...W,type:"contract"}),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${W.type==="contract"?"bg-white text-pink-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"SZLEME"})]})]}),maxWidth:"max-w-6xl",children:c.jsxs("form",{onSubmit:_e,className:"flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 overflow-y-auto p-1 custom-scrollbar",style:{maxHeight:"65vh"},children:[c.jsxs("div",{className:"lg:w-1/3 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-white/50 p-4 rounded-2xl border border-gray-200/60 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Numara"}),c.jsx(ft,{value:W.teklifNo,onChange:I=>he({...W,teklifNo:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Tarih"}),c.jsx(ft,{type:"date",value:W.date,onChange:I=>he({...W,date:I.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Balk"}),c.jsx(ft,{placeholder:"Proje Ad",value:W.teklifName,onChange:I=>he({...W,teklifName:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Mteri"}),c.jsx(Ta,{options:Te,selected:W.customerName,onChange:I=>he({...W,customerName:I}),placeholder:"Mteri Se/Yaz",allowNew:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Geerlilik Tarihi"}),c.jsx(ft,{type:"date",value:W.validityDate,onChange:I=>he({...W,validityDate:I.target.value})})]})]}),c.jsx("div",{className:"bg-white/50 p-4 rounded-2xl border border-gray-200/60 space-y-3",children:W.type==="proposal"?c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block mb-1",children:"Teklif Notu"}),c.jsx(cb,{rows:"3",value:W.note,onChange:I=>he({...W,note:I.target.value})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"deme ekli"}),c.jsx(cb,{rows:"2",value:W.paymentMethod,onChange:I=>he({...W,paymentMethod:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Teslim Tarihi"}),c.jsx(ft,{value:W.deliveryDate,onChange:I=>he({...W,deliveryDate:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Ambalaj"}),c.jsx(ft,{value:W.packaging,onChange:I=>he({...W,packaging:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Montaj/Nakliye"}),c.jsx(ft,{value:W.assembly,onChange:I=>he({...W,assembly:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"KDV Notu"}),c.jsx(ft,{value:W.vat,onChange:I=>he({...W,vat:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Ek Not"}),c.jsx(ft,{value:W.validityNote,onChange:I=>he({...W,validityNote:I.target.value})})]})]})})]}),c.jsxs("div",{className:"lg:w-2/3 flex flex-col gap-5",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white min-h-[300px] flex flex-col",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"12%"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"40px"}})]}),c.jsx("thead",{className:"bg-gray-50 text-[10px] text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 py-2 text-left",children:"Aklama"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV"}),c.jsx("th",{className:"text-right pr-4",children:"Tutar"}),c.jsx("th",{})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:W.items.map((I,A)=>c.jsxs("tr",{className:"hover:bg-gray-50 group",draggable:!0,onDragStart:()=>je(A),onDragOver:K,onDrop:()=>pe(A),children:[c.jsx("td",{className:"text-center text-gray-300 cursor-move",children:c.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsx("td",{className:"p-1",children:c.jsx(ft,{className:"py-1.5 border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.description,onChange:H=>R(A,"description",H.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(ft,{type:"number",className:"py-1.5 text-center border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.quantity,onChange:H=>R(A,"quantity",H.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(ft,{type:"number",className:"py-1.5 text-right border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.price,onChange:H=>R(A,"price",H.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsxs("select",{className:"bg-transparent text-xs border-none focus:ring-0 cursor-pointer",value:I.vat,onChange:H=>R(A,"vat",H.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-1 text-right font-bold text-gray-700 pr-4",children:js(I.total)}),c.jsx("td",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>k(A),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(we.Trash,{})})})]},A))})]})}),c.jsxs("div",{className:"mt-auto",children:[c.jsxs("button",{type:"button",onClick:ie,className:"w-full py-1.5 bg-indigo-50/50 text-indigo-600 text-[10px] font-bold uppercase border-t border-indigo-100 flex items-center justify-center gap-1",children:[c.jsx(we.Clipboard,{className:"w-3 h-3"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:P,className:"w-full py-2 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 text-xs font-bold",children:"+ Yeni Satr"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase mr-3",children:"GENEL TOPLAM"}),c.jsx("span",{className:"text-2xl font-black text-gray-800",children:js(ip(W.items).grandTotal)})]})}),W.type==="proposal"&&c.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-2",children:"Grseller"}),c.jsxs("div",{className:"flex gap-4 items-start",children:[c.jsxs("div",{className:`w-24 h-24 flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all cursor-pointer ${T?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:N,onDrop:C,onClick:()=>L.current.click(),children:[c.jsx("input",{ref:L,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:xe}),c.jsx(we.Upload,{className:"text-gray-400"}),c.jsx("span",{className:"text-[9px] text-gray-400 mt-1",children:"Ekle"})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:W.images.map((I,A)=>c.jsxs("div",{className:"relative shrink-0 w-24 h-24 rounded-lg overflow-hidden border border-gray-200 group bg-white shadow-sm",children:[c.jsx("img",{src:I,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>he(H=>({...H,images:H.images.filter((re,ge)=>ge!==A)})),className:"absolute top-1 right-1 bg-white rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity text-xs",children:""})]},A))})]})]})]})]}),c.jsxs("div",{className:"pt-4 mt-auto flex flex-row-reverse gap-3 border-t border-gray-200",children:[c.jsx(Zt,{type:"submit",variant:"primary",children:oe?"Deiiklikleri Kaydet":"Olutur"}),c.jsx(Zt,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const bR="86715dfc9d1046e7e8a0d95a",_R=`https://v6.exchangerate-api.com/v6/${bR}/latest/USD`,rp=["A","B","C","D","E","F"],W1=15,Rm=()=>{const i={};for(let e=1;e<=W1;e++)rp.forEach(n=>{i[`${n}${e}`]={value:"",formula:"",result:null,currency:"None",customUnit:""}});return i},xa=i=>i==="USD"?"$":i==="EUR"?"":i==="TRY"?"":"",gb=(i,e)=>{if(!i)return"";let n=i.toUpperCase();const r=(..._)=>_.flat().reduce((E,T)=>E+(Number(T)||0),0),l=(..._)=>{const E=_.flat(),T=E.reduce((z,q)=>z+(Number(q)||0),0);return E.length?T/E.length:0},u=(..._)=>Math.max(..._.flat().map(E=>Number(E)||0)),f=(..._)=>Math.min(..._.flat().map(E=>Number(E)||0)),p=(..._)=>_.flat().length,g=(..._)=>{const E=_.flat().map(X=>Number(X)||0);if(E.length===0)return 0;const T=E.reduce((X,L)=>X+L,0)/E.length,q=E.map(X=>Math.pow(X-T,2)).reduce((X,L)=>X+L,0)/E.length;return Math.sqrt(q)},x=(_,E,T)=>_?E:T;try{n=n.replace(/([A-F])([0-9]+):([A-F])([0-9]+)/g,(T,z,q,X,L)=>{const oe=[],ne=z.charCodeAt(0),W=X.charCodeAt(0),he=parseInt(q),Te=parseInt(L);for(let xe=Math.min(ne,W);xe<=Math.max(ne,W);xe++)for(let j=Math.min(he,Te);j<=Math.max(he,Te);j++){const N=String.fromCharCode(xe)+j,C=e[N],M=C?C.result!==null&&C.result!==""?C.result:parseFloat(C.value)||0:0;oe.push(M)}return`[${oe.join(",")}]`}),n=n.replace(/[A-F][0-9]+/g,T=>{const z=e[T],q=z?z.result!==null&&z.result!==""?z.result:parseFloat(z.value):0;return isNaN(q)?0:q});const E=new Function("SUM","AVERAGE","MAX","MIN","COUNT","STDEV","IF","return "+n)(r,l,u,f,p,g,x);return typeof E=="function"||typeof E=="number"&&!isFinite(E)?"Hata":E}catch{return"Hata"}};function wR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState("cards"),[f,p]=J.useState([]),[g,x]=J.useState({TRY:34.5,USD:1,EUR:.95}),[_,E]=J.useState(Rm()),[T,z]=J.useState(null),[q,X]=J.useState(null),[L,oe]=J.useState(""),[ne,W]=J.useState([]),[he,Te]=J.useState(""),[xe,j]=J.useState(null),[N,C]=J.useState({cellId:"",label:"",targetCurrency:"None",customUnit:""});J.useEffect(()=>{const D=ms.onAuthStateChanged(H=>{e(H),r(!1)}),I=Un(Tt(Ve,"price_cards"),Jn("updatedAt","desc")),A=ps(I,H=>{p(H.docs.map(re=>({id:re.id,...re.data()})))});return M(),()=>{D(),A()}},[]),J.useEffect(()=>{const D=I=>{if(!["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName)&&T&&!q){if(I.key==="Delete"||I.key==="Backspace"){const A={..._};A[T]={...A[T],value:"",formula:"",result:null},E(A),oe("");return}I.key.length===1&&!I.ctrlKey&&!I.metaKey&&!I.altKey&&X(T),I.key==="Enter"&&(I.preventDefault(),X(T))}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[T,q,_]);const M=async()=>{try{const I=await(await fetch(_R)).json();I&&I.conversion_rates&&x({TRY:I.conversion_rates.TRY,USD:1,EUR:I.conversion_rates.EUR})}catch(D){console.error("Rate error",D)}};J.useEffect(()=>{const D={..._},I=()=>{let A=!1;return Object.keys(D).forEach(H=>{const re=D[H];let ge=re.value;if(re.formula.toString().startsWith("=")){const Ne=re.formula.substring(1);ge=gb(Ne,D)}else{const Ne=parseFloat(re.value);ge=isNaN(Ne)?re.value:Ne}ge!==re.result&&(re.result=ge,A=!0)}),A};I(),I()},[L]);const R=D=>{q&&q!==D&&X(null),z(D),oe(_[D].formula||_[D].value),C(I=>({...I,cellId:D}))},P=D=>{const I=D.target.value;oe(I);const A=T;if(A){const H={..._};if(H[A]={...H[A],formula:I,value:I.startsWith("=")?H[A].value:I},I.startsWith("="))H[A].result=gb(I.substring(1),H);else{const re=parseFloat(I);H[A].result=isNaN(re)?I:re}E(H)}},k=(D,I)=>{if(!T)return;const A={..._};A[T]={...A[T],[D]:I},E(A)},ie=()=>{if(!N.cellId||!N.label){alert("Ltfen hcre ve isim giriniz.");return}W([...ne,{...N,id:Date.now()}]),C({cellId:"",label:"",targetCurrency:"None",customUnit:""})},je=D=>{W(ne.filter(I=>I.id!==D))},K=(D,I,A=null)=>{const H=A?A[D]:_[D];if(!H)return{main:"Veri Yok",sub:null};let re=parseFloat(H.result);if(isNaN(re)&&(re=parseFloat(H.value)),isNaN(re))return{main:H.result||H.value||"-",sub:null};const ge=H.currency;if(I==="None"||ge==="None"||I===ge)return{main:re,sub:null};let Ne=re;ge!=="USD"&&(Ne=re/(g[ge]||1));let Re=Ne;return I!=="USD"&&(Re=Ne*(g[I]||1)),{main:Re,sub:re,sourceSym:xa(ge),targetSym:xa(I)}},pe=async()=>{if(!he){alert("Ltfen bir balk giriniz.");return}const D={};Object.keys(_).forEach(A=>{(_[A].formula||_[A].value||_[A].currency!=="None"||_[A].customUnit)&&(D[A]=_[A])});const I={title:he,cells:JSON.stringify(D),outputs:JSON.stringify(ne),updatedAt:new Date().toISOString()};try{xe?await Zn(kt(Ve,"price_cards",xe),I):await li(Tt(Ve,"price_cards"),I),alert("Kaydedildi!"),u("cards")}catch(A){alert("Hata: "+A.message)}},F=D=>{const I=JSON.parse(D.cells),A=Rm();Object.keys(I).forEach(H=>{A[H]=I[H]}),E(A),W(D.outputs?JSON.parse(D.outputs):[]),Te(D.title),j(D.id),u("sheet")},me=()=>{E(Rm()),W([]),Te(""),j(null),oe(""),z(null),X(null),u("sheet")},_e=async D=>{window.confirm("Silmek istediinize emin misiniz?")&&await Li(kt(Ve,"price_cards",D))};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(we.Lock,{})," Yetkisiz Eriim"]});const O=g.TRY/g.EUR;return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hesaplama Motoru"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Excel benzeri formller ve kur evirici"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"hidden lg:flex items-center gap-3 bg-white/80 backdrop-blur-md px-4 py-2 rounded-xl border border-gray-200 shadow-sm text-xs font-bold text-gray-600",children:[c.jsxs("span",{className:"flex items-center text-emerald-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"USD/TRY:"})," ",g.TRY.toFixed(2)]}),c.jsx("div",{className:"w-px h-4 bg-gray-300"}),c.jsxs("span",{className:"flex items-center text-indigo-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"EUR/TRY:"})," ",O.toFixed(2)]})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="cards"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Kartlar"}),c.jsx("button",{onClick:()=>u("sheet"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="sheet"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Hesaplama"})]})]})]}),l==="cards"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start",children:[c.jsxs("div",{onClick:me,className:"border-2 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center h-48 cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/50 transition-all text-gray-400 hover:text-indigo-500 group",children:[c.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:c.jsx(we.Plus,{})}),c.jsx("span",{className:"font-bold text-sm",children:"Yeni Tablo"})]}),f.map(D=>{const I=D.outputs?JSON.parse(D.outputs):[],A=JSON.parse(D.cells);return c.jsxs(Rs,{className:"p-0 hover:shadow-xl transition-all group flex flex-col h-auto overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-100 bg-gray-50/50",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate",title:D.title,children:D.title}),c.jsx("p",{className:"text-[10px] text-gray-400",children:new Date(D.updatedAt).toLocaleDateString("tr-TR")})]}),c.jsx("div",{className:"p-4 space-y-3 bg-white",children:I.length>0?I.map((H,re)=>{const ge=K(H.cellId,H.targetCurrency,A),Ne=H.targetCurrency==="Custom"?H.customUnit:H.targetCurrency!=="None"?xa(H.targetCurrency):"";return c.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-50 last:border-0 pb-2 last:pb-0",children:[c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase",children:H.label})}),c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"font-bold text-indigo-600 block",children:[typeof ge.main=="number"?ge.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):ge.main," ",Ne]}),ge.sub!==null&&ge.sourceSym&&c.jsxs("span",{className:"text-[10px] text-gray-400 block",children:["(",ge.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",ge.sourceSym,")"]})]})]},re)}):c.jsx("div",{className:"text-xs text-gray-300 italic text-center py-4",children:"Gsterge eklenmemi."})}),c.jsxs("div",{className:"flex gap-2 p-3 bg-gray-50 border-t border-gray-200 mt-auto",children:[c.jsx(Zt,{variant:"primary",className:"flex-1 text-xs py-2",onClick:()=>F(D),children:"Dzenle"}),c.jsx("button",{onClick:()=>_e(D.id),className:"p-2 bg-white border border-gray-200 text-red-500 rounded-lg hover:bg-red-50 transition-colors",children:c.jsx(we.Trash,{})})]})]},D.id)})]}),l==="sheet"&&c.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[c.jsxs(Rs,{className:"p-4 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between z-20",children:[c.jsxs("div",{className:"flex-grow w-full xl:w-auto flex gap-2 items-center",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-2 rounded-lg border border-indigo-100 min-w-[3rem] text-center",children:T||"A1"}),c.jsx("input",{className:"flex-grow bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm font-mono focus:ring-2 focus:ring-indigo-500 shadow-sm",placeholder:"Forml (=SUM(A1:B2)) veya Deer",value:L,onChange:P})]}),T&&c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-1.5 rounded-xl border border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 px-2",children:"HCRE:"}),c.jsxs("select",{className:"bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2 font-medium",value:_[T]?.currency||"None",onChange:D=>k("currency",D.target.value),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]}),_[T]?.currency==="None"&&c.jsx("input",{className:"w-20 bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2",placeholder:"Birim (kg)",value:_[T]?.customUnit||"",onChange:D=>k("customUnit",D.target.value)})]}),c.jsxs("div",{className:"flex gap-2 w-full xl:w-auto border-l border-gray-200 pl-4",children:[c.jsx("input",{className:"bg-transparent border-b border-gray-300 focus:border-indigo-500 outline-none text-sm font-bold text-gray-700 px-2 py-1 w-32",placeholder:"Tablo Ad...",value:he,onChange:D=>Te(D.target.value)}),c.jsx(Zt,{variant:"success",className:"py-2 text-xs",onClick:pe,children:"Kaydet"}),c.jsx(Zt,{variant:"secondary",className:"py-2 text-xs text-red-500",onClick:me,children:"Temizle"})]})]}),c.jsx("div",{className:"flex-grow bg-white border border-gray-300 rounded-xl overflow-auto shadow-inner custom-scrollbar relative max-h-[50vh]",children:c.jsxs("table",{className:"w-full border-collapse",style:{minWidth:"800px"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-10 bg-gray-100 border-r border-b border-gray-300 sticky top-0 left-0 z-20"}),rp.map(D=>c.jsx("th",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 py-2 sticky top-0 z-10 w-32 text-center",children:D},D))]})}),c.jsx("tbody",{children:Array.from({length:W1}).map((D,I)=>{const A=I+1;return c.jsxs("tr",{children:[c.jsx("td",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 text-center sticky left-0 z-10",children:A}),rp.map(H=>{const re=`${H}${A}`,ge=_[re],Ne=T===re,Re=q===re;ge.formula.startsWith("=");let at="";return ge.currency&&ge.currency!=="None"?at=xa(ge.currency):ge.customUnit&&(at=ge.customUnit),c.jsx("td",{onClick:()=>R(re),className:`
                                 border-r border-b border-gray-200 text-sm p-0 h-10 min-w-[100px] relative
                                 ${Ne?"ring-2 ring-indigo-500 z-10 bg-indigo-50":"hover:bg-gray-50"}
                                 cursor-cell transition-colors
                               `,children:Re?c.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none px-2 bg-white text-gray-900 font-mono",value:L,onChange:P,onBlur:()=>X(null),onKeyDown:ht=>{ht.key==="Enter"&&X(null)}}):c.jsxs("div",{className:"w-full h-full flex items-center justify-end px-2 truncate font-mono text-gray-700",children:[typeof ge.result=="number"?ge.result.toLocaleString("tr-TR",{maximumFractionDigits:2}):ge.result,c.jsx("span",{className:"text-[10px] text-gray-400 ml-1 font-sans",children:at})]})},re)})]},A)})})]})}),c.jsxs("div",{className:"text-[10px] text-gray-400 px-2",children:["* Fonksiyonlar: ",c.jsx("b",{children:"SUM, AVERAGE, MAX, MIN, COUNT, STDEV, IF"}),". rnek: ",c.jsx("b",{children:"=SUM(A1:A5)"})," veya ",c.jsx("b",{children:"=STDEV(B1:B10)"}),". Hcreyi silmek iin seip ",c.jsx("b",{children:"Delete"})," tuuna basn."]}),c.jsxs("div",{className:"bg-gray-100 rounded-2xl p-6 border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-4 flex items-center gap-2",children:"zel Gstergeler & eviriciler"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"w-full md:w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hcre"}),c.jsx(ft,{placeholder:"A1",value:N.cellId,onChange:D=>C({...N,cellId:D.target.value.toUpperCase()}),className:"py-2 text-center font-mono uppercase"})]}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Etiket smi"}),c.jsx(ft,{placeholder:"rn: Toplam Maliyet",value:N.label,onChange:D=>C({...N,label:D.target.value}),className:"py-2"})]}),c.jsxs("div",{className:"w-full md:w-40",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hedef Birim"}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:N.targetCurrency,onChange:D=>C({...N,targetCurrency:D.target.value}),children:[c.jsx("option",{value:"None",children:"evirme (Ayn)"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"}),c.jsx("option",{value:"Custom",children:"zel Birim"})]})]}),N.targetCurrency==="Custom"&&c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Birim Ad"}),c.jsx(ft,{placeholder:"kg, m2",value:N.customUnit,onChange:D=>C({...N,customUnit:D.target.value}),className:"py-2"})]}),c.jsx("button",{onClick:ie,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 shadow-md transition-all h-[42px]",children:"Ekle"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[ne.map(D=>{const I=K(D.cellId,D.targetCurrency),A=_[D.cellId],H=D.targetCurrency==="Custom"?D.customUnit:D.targetCurrency!=="None"?xa(D.targetCurrency):A?xa(A.currency)!==""?xa(A.currency):A.customUnit:"";return c.jsxs(Rs,{className:"p-4 relative group hover:shadow-lg border-l-4 border-l-indigo-500",children:[c.jsx("button",{onClick:()=>je(D.id),className:"absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:D.label}),c.jsx("span",{className:"text-[10px] font-mono text-indigo-300 bg-indigo-50 px-1 rounded",children:D.cellId})]}),c.jsxs("div",{className:"text-2xl font-bold text-gray-800 flex items-baseline gap-1",children:[typeof I.main=="number"?I.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):I.main,c.jsx("span",{className:"text-sm text-gray-500 font-medium",children:H})]}),I.sub!==null&&c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Orijinal: ",I.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",I.sourceSym]})]},D.id)}),ne.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-4 text-sm",children:"Henz zel gsterge eklenmedi."})]})]})]})]})}const ap={leftImage:null,topImage:null,kod:"",size:"",color:""},yb=Array(14).fill(null).map(()=>({...ap}));function ER(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState([]),[g,x]=J.useState(!1),[_,E]=J.useState(!1),[T,z]=J.useState("batches"),[q,X]=J.useState({title:"",labels:yb}),[L,oe]=J.useState({name:"",...ap}),[ne,W]=J.useState(null),he=J.useRef({});if(J.useEffect(()=>{const F=ms.onAuthStateChanged(I=>{e(I),r(!1)}),me=Un(Tt(Ve,"label_batches"),Jn("createdAt","desc")),_e=ps(me,I=>{u(I.docs.map(A=>({id:A.id,...A.data()})))}),O=Un(Tt(Ve,"label_templates"),Jn("name","asc")),D=ps(O,I=>{p(I.docs.map(A=>({id:A.id,...A.data()})))});return()=>{F(),_e(),D()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const Te=(F,me)=>{if(!F)return;const _e=new FileReader;_e.onload=O=>{const D=new Image;D.onload=()=>{const I=document.createElement("canvas"),A=400;let H=D.width,re=D.height;H>re?H>A&&(re*=A/H,H=A):re>A&&(H*=A/re,re=A),I.width=H,I.height=re,I.getContext("2d").drawImage(D,0,0,H,re),me(I.toDataURL("image/jpeg",.6))},D.src=O.target.result},_e.readAsDataURL(F)},xe=(F,me,_e,O)=>{const D=F.clipboardData.items;for(let I=0;I<D.length;I++)if(D[I].type.indexOf("image")!==-1){const A=D[I].getAsFile();Te(A,H=>O(me,_e,H)),F.preventDefault();return}},j=(F=null)=>{F?(W(F.id),X({title:F.title,labels:F.labels})):(W(null),X({title:"",labels:yb.map(me=>({...me}))})),x(!0)},N=(F,me,_e)=>{const O=[...q.labels];O[F]={...O[F],[me]:_e},X({...q,labels:O})},C=()=>{if(window.confirm("lk etiketteki veriler dier tm etiketlere kopyalanacak. Onaylyor musunuz?")){const F=q.labels[0],me=q.labels.map(()=>({...F}));X({...q,labels:me})}},M=(F,me)=>{const _e=f.find(O=>O.id===me);if(_e){const O=[...q.labels];O[F]={leftImage:_e.leftImage,topImage:_e.topImage,kod:_e.kod,size:_e.size,color:_e.color},X({...q,labels:O})}},R=async F=>{F.preventDefault();try{const me={...q,createdAt:new Date().toISOString()};ne?await Zn(kt(Ve,"label_batches",ne),me):await li(Tt(Ve,"label_batches"),me),x(!1)}catch(me){alert("Hata: "+me.message)}},P=async F=>{window.confirm("Bu etiket sayfasn silmek istiyor musunuz?")&&await Li(kt(Ve,"label_batches",F))},k=(F=null)=>{F?(W(F.id),oe(F)):(W(null),oe({name:"",...ap})),E(!0)},ie=async F=>{F.preventDefault();try{ne?await Zn(kt(Ve,"label_templates",ne),L):await li(Tt(Ve,"label_templates"),L),E(!1)}catch(me){alert("Hata: "+me.message)}},je=async F=>{window.confirm("Bu ablonu silmek istiyor musunuz?")&&await Li(kt(Ve,"label_templates",F))},K=F=>{const me=window.open("","","height=800,width=1000");if(!me)return;const _e=`
      <html><head><title>Etiketler - ${F.title}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        
        body { 
          font-family: 'Arial', sans-serif; 
          color: #000;
          box-sizing: border-box;
          
          /* 3. STEK: stten 3mm, alttan 1mm ksaltld (Eskisi 10mm idi) */
          padding-top: 7mm;     
          padding-bottom: 9mm;
          
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: repeat(7, 1fr);
          
          /* 3. STEK: Kazanlan 4mm boluu satrlar arasna dat (Yaklak 0.6mm) */
          row-gap: 0.6mm; 
          column-gap: 2mm; /* ki stun arasna da hafif boluk */
          
          height: 100%;
        }

        .label-container {
          /* 1. STEK: Kesik izgiler kaldrld (border: none) */
          border: none; 
          
          box-sizing: border-box;
          padding: 2px;
          display: flex;
          overflow: hidden;
          height: 100%;
          page-break-inside: avoid; 
        }

        /* 25% Left (Vertical Image) */
        .left-section {
          width: 28%;
          height: 100%;
          /* Sa izgi hafife kalsn m? sterseniz kaldrabilirsiniz: border-right: none; */
          border-right: 1px solid #eee; 
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-right: 2px;
        }
        .left-img {
          width: 100%;
          height: 100%;
          object-fit: contain; 
        }

        /* 75% Right */
        .right-section {
          width: 72%;
          display: flex;
          flex-direction: column;
          padding-left: 5px;
        }

        /* Top 1/3 of Right (Horizontal Logo) */
        .top-section {
          height: 35%;
          border-bottom: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          margin-bottom: 2px;
        }
        .logo-img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        /* Bottom 2/3 of Right (Info) */
        .info-section {
          height: 65%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          font-size: 11pt;
          /* 2. STEK: Tm yazlar kaln (bold) */
          font-weight: bold; 
          line-height: 1.4;
        }

        .info-row { display: flex; align-items: baseline; }
        .label-key { width: 55px; font-weight: bold; }
        
        /* 2. STEK: Deerler de kaln olsun */
        .label-val { font-weight: bold; } 

        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        ${F.labels.map(O=>`
          <div class="label-container">
            <div class="left-section">
              ${O.leftImage?`<img src="${O.leftImage}" class="left-img" />`:""}
            </div>
            <div class="right-section">
              <div class="top-section">
                ${O.topImage?`<img src="${O.topImage}" class="logo-img" />`:""}
              </div>
              <div class="info-section">
                <div class="info-row"><span class="label-key">KOD:</span> <span class="label-val">${O.kod||""}</span></div>
                <div class="info-row"><span class="label-key">SIZE:</span> <span class="label-val">${O.size||""}</span></div>
                <div class="info-row"><span class="label-key">COLOR:</span> <span class="label-val">${O.color||""}</span></div>
              </div>
            </div>
          </div>
        `).join("")}
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;me.document.write(_e),me.document.close()},pe=(F,me,_e,O=!1)=>c.jsxs("div",{className:`grid grid-cols-4 gap-0 bg-white border border-gray-300 rounded-xl shadow-sm relative group hover:z-20 transition-all ${O?"":"h-36"}`,children:[c.jsx("div",{className:"col-span-1 border-r border-gray-300 bg-gray-50 relative h-full rounded-l-xl overflow-hidden",children:c.jsxs("div",{tabIndex:"0",onPaste:D=>xe(D,me,"leftImage",_e),className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors outline-none focus:ring-4 focus:ring-indigo-200 focus:bg-white",onClick:()=>he.current[`left-${me}`]?.click(),title:"Tkla ve Resim Se veya CTRL+V ile Yaptr",children:[F.leftImage?c.jsx("img",{src:F.leftImage,className:"w-full h-full object-cover",alt:"Sol"}):c.jsx("span",{className:"text-2xl text-gray-300 font-light select-none",children:"+"}),c.jsx("input",{type:"file",className:"hidden",ref:D=>he.current[`left-${me}`]=D,onChange:D=>Te(D.target.files[0],I=>_e(me,"leftImage",I))}),F.leftImage&&c.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),_e(me,"leftImage",null)},className:"absolute top-1 right-1 bg-white/80 rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""})]})}),c.jsxs("div",{className:"col-span-3 flex flex-col h-full relative",children:[c.jsx("div",{className:"h-1/3 border-b border-gray-200 relative group bg-white rounded-tr-xl overflow-hidden",children:c.jsxs("div",{tabIndex:"0",onPaste:D=>xe(D,me,"topImage",_e),className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors outline-none focus:ring-4 focus:ring-indigo-200",onClick:()=>he.current[`top-${me}`]?.click(),title:"Tkla ve Resim Se veya CTRL+V ile Yaptr",children:[F.topImage?c.jsx("img",{src:F.topImage,className:"w-full h-full object-contain p-1",alt:"Logo"}):c.jsx("span",{className:"text-[9px] text-gray-400 font-bold tracking-widest select-none",children:"LOGO"}),c.jsx("input",{type:"file",className:"hidden",ref:D=>he.current[`top-${me}`]=D,onChange:D=>Te(D.target.files[0],I=>_e(me,"topImage",I))}),F.topImage&&c.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),_e(me,"topImage",null)},className:"absolute top-1 right-1 bg-white/80 text-red-500 w-4 h-4 text-[10px] flex items-center justify-center rounded hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:""})]})}),c.jsxs("div",{className:"h-2/3 flex flex-col justify-center p-2 gap-1.5 bg-white rounded-br-xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"KOD"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:F.kod,onChange:D=>_e(me,"kod",D.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"SIZE"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:F.size,onChange:D=>_e(me,"size",D.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"CLR"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:F.color,onChange:D=>_e(me,"color",D.target.value)})]})]})]}),!O&&c.jsx("div",{className:"absolute top-1 left-1 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-24 scale-75 origin-top-left shadow-md bg-white rounded",children:c.jsx(Ta,{options:f.map(D=>D.name),placeholder:"ablon",onChange:D=>{const I=f.find(A=>A.name===D);I&&M(me,I.id)},selected:""})})})]});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Etiket Basm"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A4 etiket tasarm ve yazdrma"})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>z("batches"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${T==="batches"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Etiket Sayfalar"}),c.jsx("button",{onClick:()=>z("templates"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${T==="templates"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"ablonlar"})]}),c.jsxs("button",{onClick:()=>T==="batches"?j():k(),className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(we.Plus,{})," ",c.jsx("span",{className:"ml-2",children:T==="batches"?"Etiket Sayfas Olutur":"ablon Ekle"})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10",children:T==="batches"?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.map(F=>c.jsx(Rs,{className:"p-0 hover:shadow-xl transition-all group overflow-hidden",children:c.jsxs("div",{className:"flex h-40",children:[c.jsx("div",{className:"w-32 bg-gray-100 border-r border-gray-200 p-2 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full bg-white border border-gray-300 shadow-sm grid grid-cols-2 grid-rows-7 gap-[1px] p-[2px]",children:F.labels.map((me,_e)=>c.jsxs("div",{className:"bg-gray-50 border border-gray-100 relative overflow-hidden",children:[me.leftImage&&c.jsx("img",{src:me.leftImage,className:"absolute left-0 top-0 h-full w-1/3 object-cover opacity-50"}),me.topImage&&c.jsx("img",{src:me.topImage,className:"absolute right-0 top-0 h-1/2 w-2/3 object-contain opacity-50"})]},_e))})}),c.jsxs("div",{className:"flex-grow p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:F.title}),c.jsx("p",{className:"text-xs text-gray-500 font-medium bg-gray-100 inline-block px-2 py-0.5 rounded",children:new Date(F.createdAt).toLocaleDateString("tr-TR")})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(Zt,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>K(F),children:[c.jsx(we.Printer,{})," Yazdr"]}),c.jsx(Zt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-blue-600",onClick:()=>j(F),children:c.jsx(we.Edit,{})}),c.jsx(Zt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-red-600",onClick:()=>P(F.id),children:c.jsx(we.Trash,{})})]})]})]})},F.id)),l.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"Kaytl etiket sayfas yok."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.map(F=>c.jsxs(Rs,{className:"p-4 hover:shadow-xl transition-all group relative",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3 truncate border-b border-gray-100 pb-2",children:F.name}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white text-[9px] h-32 flex gap-2",children:[c.jsx("div",{className:"w-1/3 h-full bg-gray-50 flex items-center justify-center text-gray-300 overflow-hidden rounded relative",children:F.leftImage?c.jsx("img",{src:F.leftImage,className:"absolute inset-0 w-full h-full object-cover"}):"IMG"}),c.jsxs("div",{className:"w-2/3 flex flex-col h-full",children:[c.jsx("div",{className:"h-1/3 bg-gray-50 mb-2 flex items-center justify-center overflow-hidden border border-gray-100 relative rounded",children:F.topImage?c.jsx("img",{src:F.topImage,className:"absolute inset-0 w-full h-full object-cover"}):"LOGO"}),c.jsxs("div",{className:"space-y-1 mt-auto",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"KOD:"}),c.jsx("span",{className:"truncate w-16 text-right",children:F.kod})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"SIZE:"}),c.jsx("span",{className:"truncate w-16 text-right",children:F.size})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"CLR:"}),c.jsx("span",{className:"truncate w-16 text-right",children:F.color})]})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>k(F),className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(we.Edit,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>je(F.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",children:c.jsx(we.Trash,{className:"w-4 h-4"})})]})]},F.id)),f.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"ablon bulunamad."})]})}),c.jsx(Ll,{isOpen:g,onClose:()=>x(!1),title:ne?"Etiket Sayfasn Dzenle":"Yeni Etiket Sayfas",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:R,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sayfa Bal"}),c.jsx(ft,{required:!0,placeholder:"rn: 2025 Kap Siparileri",value:q.title,onChange:F=>X({...q,title:F.target.value})})]}),c.jsx("button",{type:"button",onClick:C,className:"px-5 py-3 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold hover:bg-purple-200 transition-colors shadow-sm",children:"lkini Hepsine Uygula"})]}),c.jsx("div",{className:"bg-gray-100 p-4 rounded-2xl border border-gray-200 h-[60vh] overflow-y-auto custom-scrollbar",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.labels.map((F,me)=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md z-30 pointer-events-none",children:me+1}),pe(F,me,N)]},me))})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Zt,{variant:"secondary",type:"button",onClick:()=>x(!1),children:"ptal"}),c.jsx(Zt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsx(Ll,{isOpen:_,onClose:()=>E(!1),title:ne?"ablonu Dzenle":"Yeni ablon",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ablon Ad"}),c.jsx(ft,{required:!0,placeholder:"rn: Beyaz Panel Kap",value:L.name,onChange:F=>oe({...L,name:F.target.value})})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:pe(L,-1,(F,me,_e)=>oe({...L,[me]:_e}),!0)}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Zt,{variant:"secondary",type:"button",onClick:()=>E(!1),children:"ptal"}),c.jsx(Zt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})})]})}const va={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},vl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},xb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],TR=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Im=2.5,As=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function SR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,p]=J.useState(new Date),[g,x]=J.useState(!1),[_,E]=J.useState(!1),[T,z]=J.useState(null),[q,X]=J.useState(new Date),[L,oe]=J.useState(!1),[ne,W]=J.useState(new Date().getFullYear()),[he,Te]=J.useState(!1),[xe,j]=J.useState(null),[N,C]=J.useState({type:"work",overtimeSlots:0,lateness:0}),[M,R]=J.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});J.useEffect(()=>{const A=ms.onAuthStateChanged(Ne=>{e(Ne),r(!1)}),H=Un(Tt(Ve,"employees"),Jn("name","asc")),re=ps(H,Ne=>{u(Ne.docs.map(Re=>({id:Re.id,...Re.data()})))}),ge=setInterval(()=>p(new Date),6e4);return()=>{A(),re(),clearInterval(ge)}},[]);const P=A=>{const H=f.toISOString().split("T")[0],re=f.getDay(),ge=f.getHours(),Ne=f.getMinutes(),Re=ge*60+Ne,at=A.attendance?.[H];if(at){if(["paid_leave","unpaid_leave"].includes(at.type))return vl.LEAVE;if(at.overtimeSlots>0)return vl.OVERTIME}const[ht,$e]=A.startHour.split(":").map(Number),[ce,ve]=A.endHour.split(":").map(Number),fe=ht*60+$e,Ie=ce*60+ve;return A.workDays.includes(re)?Re>=fe&&Re<Ie?vl.ONLINE:Re>=Ie&&at?.overtimeSlots>0?vl.OVERTIME:vl.OFFLINE:vl.OFFLINE},k=A=>{if(!A.attendance)return{used:0,remaining:A.vacationTotal};let H=0;return Object.values(A.attendance).forEach(re=>{re.type==="paid_leave"&&H++}),{used:H,remaining:A.vacationTotal-H}},ie=(A,H)=>{const re=H.getFullYear(),ge=H.getMonth(),Ne=new Date(re,ge+1,0).getDate();let Re=0,at=0,ht=0,$e=0,ce=0;for(let ze=1;ze<=Ne;ze++){const St=`${re}-${String(ge+1).padStart(2,"0")}-${String(ze).padStart(2,"0")}`,bn=new Date(St).getDay(),Cn=A.attendance?.[St],Hi=A.workDays.includes(bn);Cn?(Cn.type==="work"&&Re++,Cn.type==="paid_leave"&&ce++,Cn.type==="unpaid_leave"&&$e++,Cn.overtimeSlots&&(at+=parseInt(Cn.overtimeSlots)),Cn.lateness&&(ht+=parseFloat(Cn.lateness))):Hi&&Re++}const ve=parseFloat(A.salaryAmount)||0,fe=A.customDailyRate&&parseFloat(A.customDailyRate)>0?parseFloat(A.customDailyRate):ve/30,Ie=parseFloat(A.customDeductionRate),qe=!isNaN(Ie)&&Ie>0?Ie:fe,be=fe/9,Ye=A.customOvertimeMultiplier?parseFloat(A.customOvertimeMultiplier):1.5,We=at*Im,te=We*(be*Ye),ke=$e*qe,Ze=ht*be,ct=ke+Ze,vn=ve+te-ct+(parseFloat(A.insurance)||0)+(parseFloat(A.allowance)||0);return{workedDays:Re,totalOvertimeSlots:at,totalOvertimeHours:We,unpaidLeaveDays:$e,paidLeaveDays:ce,overtimePay:te,totalLatenessHours:ht,latenessDeduction:Ze,totalDeduction:ct,totalSalary:vn,dailyRate:fe,hourlyRate:be,deductionRate:qe}},je=(A,H)=>{const re=new Date(A,H,1);let ge=0;return l.forEach(Ne=>{ge+=ie(Ne,re).totalSalary}),ge},K=J.useMemo(()=>{let A=0,H=0;const re=new Date(q);return re.setMonth(q.getMonth()-1),l.forEach(ge=>{A+=ie(ge,q).totalSalary,H+=ie(ge,re).totalSalary}),{thisMonthTotal:A,lastMonthTotal:H}},[l,q]),pe=()=>{E(!1),R({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},F=()=>{T&&(E(!0),R({name:T.name,role:T.role,salaryType:T.salaryType,salaryAmount:T.salaryAmount,insurance:T.insurance,allowance:T.allowance,vacationTotal:T.vacationTotal,workDays:T.workDays,startHour:T.startHour,endHour:T.endHour,customDailyRate:T.customDailyRate||"",customOvertimeMultiplier:T.customOvertimeMultiplier||"1.5",customDeductionRate:T.customDeductionRate||"",attendance:T.attendance||{}}),z(null),x(!0))},me=async A=>{A.preventDefault();try{const H={...M,updatedAt:new Date().toISOString()};_&&T?await Zn(kt(Ve,"employees",T.id),H):await li(Tt(Ve,"employees"),{...H,createdAt:new Date().toISOString()}),x(!1)}catch(H){alert("Hata: "+H.message)}},_e=async A=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Li(kt(Ve,"employees",A)),z(null))},O=(A,H)=>{j(A),C({type:H?.type||"work",overtimeSlots:H?.overtimeSlots||0,lateness:H?.lateness||0}),Te(!0)},D=async A=>{if(A.preventDefault(),!T||!xe)return;const H={...T.attendance};H[xe]={type:N.type,overtimeSlots:parseInt(N.overtimeSlots)||0,lateness:parseFloat(N.lateness)||0},await Zn(kt(Ve,"employees",T.id),{attendance:H}),z({...T,attendance:H}),Te(!1)};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(va.Lock,{})," Yetkisiz Eriim"]});const I=({employee:A,date:H,onDateClick:re})=>{const ge=H.getFullYear(),Ne=H.getMonth(),Re=new Date(ge,Ne+1,0).getDate(),at=new Date(ge,Ne,1).getDay(),ht=[];for(let $e=0;$e<at;$e++)ht.push(null);for(let $e=1;$e<=Re;$e++)ht.push($e);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:xb.map(($e,ce)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:$e.slice(0,3)},ce))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:ht.map(($e,ce)=>{if(!$e)return c.jsx("div",{},ce);const ve=`${ge}-${String(Ne+1).padStart(2,"0")}-${String($e).padStart(2,"0")}`,fe=A.attendance?.[ve],Ie=new Date(ve).getDay(),qe=A.workDays.includes(Ie);let be="bg-gray-50 text-gray-400 border-gray-100";return qe&&(be="bg-white border-emerald-200 text-gray-700 shadow-sm"),fe&&(fe.type==="paid_leave"&&(be="bg-yellow-50 border-yellow-200 text-yellow-700"),fe.type==="unpaid_leave"&&(be="bg-red-50 border-red-200 text-red-700"),fe.type==="work"&&(fe.overtimeSlots>0||fe.lateness>0)&&(be="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),fe.type==="off"&&(be="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>re(ve,fe),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${be}`,children:[c.jsx("span",{className:"text-sm",children:$e}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[fe?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",fe.overtimeSlots,"M"]}),fe?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",fe.lateness,"s"]})]})]},ce)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>oe(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",q.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:As(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(va.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>oe(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:As(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:pe,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(va.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(A=>{const H=P(A),re=k(A);return c.jsxs("div",{onClick:()=>z(A),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${H.color} ${H.ring} ring-offset-2 ring-2`,children:H.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(va.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:A.name}),c.jsx("p",{className:"text-sm text-gray-500",children:A.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[A.startHour," - ",A.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[re.remaining," gn kald"]})]})]})]},A.id)})}),T&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:T.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:T.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:T.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:F,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(va.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>_e(T.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(va.Trash,{})}),c.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",q.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const A=ie(T,q);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:As(A.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:As(Number(T.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",A.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",As(A.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",A.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",As(A.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",A.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",As(A.totalDeduction-A.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",As(Number(T.insurance)+Number(T.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Im," Saat",c.jsx("br",{}),"Saatlik cret = ",As(A.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",As(A.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>X(new Date(q.setMonth(q.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:q.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>X(new Date(q.setMonth(q.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(I,{employee:T,date:q,onDateClick:O})]})]})]})}),L&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>oe(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(va.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>W(A=>A-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:ne}),c.jsx("button",{onClick:()=>W(A=>A+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:TR.map((A,H)=>{const re=je(ne,H),ge=new Date().getMonth()===H&&new Date().getFullYear()===ne;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${ge?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${ge?"text-indigo-200":"text-gray-400"}`,children:A}),c.jsx("div",{className:`text-lg font-bold ${ge?"text-white":"text-gray-800"}`,children:re>0?As(re):"-"})]},A)})})]})}),g&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:me,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.name,onChange:A=>R({...M,name:A.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.role,onChange:A=>R({...M,role:A.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryType,onChange:A=>R({...M,salaryType:A.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryAmount,onChange:A=>R({...M,salaryAmount:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.insurance,onChange:A=>R({...M,insurance:A.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.allowance,onChange:A=>R({...M,allowance:A.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDailyRate,onChange:A=>R({...M,customDailyRate:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customOvertimeMultiplier,onChange:A=>R({...M,customOvertimeMultiplier:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDeductionRate,onChange:A=>R({...M,customDeductionRate:A.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.vacationTotal,onChange:A=>R({...M,vacationTotal:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.startHour,onChange:A=>R({...M,startHour:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.endHour,onChange:A=>R({...M,endHour:A.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:xb.map((A,H)=>c.jsx("button",{type:"button",onClick:()=>{const re=M.workDays.includes(H)?M.workDays.filter(ge=>ge!==H):[...M.workDays,H];R({...M,workDays:re})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${M.workDays.includes(H)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:A.slice(0,3)},A))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),he&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:xe}),c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(A=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:A.id,checked:N.type===A.id,onChange:H=>C({...N,type:H.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:A.label})]},A.id))})]}),N.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Im,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(A=>c.jsx("button",{type:"button",onClick:()=>C({...N,overtimeSlots:N.overtimeSlots===A?0:A}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${N.overtimeSlots===A?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:A},A))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:N.lateness,onChange:A=>C({...N,lateness:A.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>Te(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function NR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState("dashboard"),[f,p]=J.useState(!1);J.useEffect(()=>{const T=NS(ms,z=>{e(z),r(!1)});return()=>T()},[]);const g=async()=>{try{await AS(ms)}catch(T){console.error("k hatas:",T)}},x=T=>{u(T),p(!1)},_=[{id:"dashboard",label:"Genel Bak",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"musteriler",label:"Mteriler",icon:c.jsx(we.User,{})},{id:"teklif",label:"Teklif & Szleme",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"siparis",label:"Sipariler",icon:c.jsx(we.Clipboard,{})},{id:"urunler",label:"rn Hareketleri",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{id:"stok",label:"Stok Durumu",icon:c.jsx(we.Box,{})},{id:"fiyatlandirma",label:"Hesaplama Motoru",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})},{id:"etiket",label:"Etiket Basm",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},{id:"calisan",label:"Personel",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}],E=()=>{switch(l){case"dashboard":return c.jsx(ub,{onNavigate:x});case"musteriler":return c.jsx(cR,{});case"siparis":return c.jsx(uR,{});case"teklif":return c.jsx(vR,{});case"urunler":return c.jsx(fR,{});case"stok":return c.jsx(yR,{});case"fiyatlandirma":return c.jsx(wR,{});case"etiket":return c.jsx(ER,{});case"calisan":return c.jsx(SR,{});default:return c.jsx(ub,{onNavigate:x})}};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):i?c.jsxs("div",{className:"flex min-h-screen bg-white font-sans text-gray-900 relative overflow-hidden",children:[c.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-indigo-200/30 blur-[120px] animate-pulse"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-pink-200/30 blur-[120px] animate-pulse",style:{animationDelay:"2s"}})]}),c.jsx("div",{className:"fixed top-5 left-5 z-[50]",children:c.jsx("button",{onClick:()=>p(!f),className:"p-3 bg-gray-900 text-emerald-400 rounded-full shadow-2xl hover:scale-110 transition-transform duration-300 border border-emerald-500/30 group",title:"Meny A/Kapat",children:f?c.jsx("svg",{className:"w-6 h-6 transform transition-transform duration-300 rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):c.jsxs("div",{className:"space-y-1 w-6",children:[c.jsx("span",{className:"block w-6 h-0.5 bg-current rounded-full group-hover:w-4 transition-all duration-300"}),c.jsx("span",{className:"block w-6 h-0.5 bg-current rounded-full"}),c.jsx("span",{className:"block w-6 h-0.5 bg-current rounded-full group-hover:w-4 ml-auto transition-all duration-300"})]})})}),c.jsxs("aside",{className:"fixed inset-y-0 left-0 z-40 w-80 bg-[#0f172a] text-white shadow-2xl border-r border-emerald-500/20",style:{clipPath:f?"circle(150% at 40px 40px)":"circle(0px at 40px 40px)",transition:"clip-path 0.7s cubic-bezier(0.25, 1, 0.5, 1)",pointerEvents:f?"auto":"none"},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-900/10 to-purple-900/10 pointer-events-none"}),c.jsxs("div",{className:"relative z-10 flex flex-col h-full pl-2",children:[c.jsxs("div",{className:"pt-24 pb-8 px-8 border-b border-white/5 bg-gradient-to-b from-[#0f172a] to-transparent",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-2xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400",children:"ERELEBLER"}),c.jsx("button",{onClick:g,className:"p-2 -mt-2 -mr-2 text-gray-400 hover:text-red-400 hover:bg-white/5 rounded-full transition-colors",title:"k Yap",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-cyan-600 flex items-center justify-center text-sm font-bold shadow-lg shadow-emerald-900/50",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("p",{className:"text-xs font-bold text-white truncate w-48 opacity-90",children:i.email}),c.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),c.jsx("span",{className:"text-[10px] text-emerald-400 font-bold uppercase tracking-wider",children:"Ynetici"})]})]})]})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto custom-scrollbar space-y-1",children:_.map((T,z)=>c.jsxs("button",{onClick:()=>x(T.id),style:{transitionDelay:`${z*30}ms`},className:`
                    w-full flex items-center px-4 py-3.5 text-sm font-bold rounded-xl transition-all duration-300 group relative overflow-hidden
                    ${l===T.id?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.1)] translate-x-2":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent hover:translate-x-1"}
                    ${f?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
                  `,children:[c.jsx("span",{className:`mr-3 transition-transform duration-300 ${l===T.id?"scale-110":"group-hover:scale-110"}`,children:T.icon}),c.jsx("span",{children:T.label}),l===T.id&&c.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-emerald-500 shadow-[0_0_10px_#10b981]"})]},T.id))}),c.jsx("div",{className:"p-6 text-center",children:c.jsx("p",{className:"text-[10px] text-slate-600 font-mono tracking-wider",children:"v2.1 SYSTEM ONLINE"})})]})]}),c.jsx("div",{className:"flex-1 flex flex-col min-w-0 relative z-10 transition-all duration-300 h-screen overflow-hidden",children:c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar p-0",children:c.jsx("div",{className:"w-full h-full max-w-[1920px] mx-auto",children:E()})})})]}):c.jsx(eR,{})}PE.createRoot(document.getElementById("root")).render(c.jsx(J.StrictMode,{children:c.jsx(NR,{})}));
