(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function ow(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nm={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function cw(){if(uv)return Uo;uv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:d}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var dv;function uw(){return dv||(dv=1,nm.exports=cw()),nm.exports}var c=uw(),sm={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function dw(){if(hv)return Ue;hv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function z(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,U={};function ue(M,ee,pe){this.props=M,this.context=ee,this.refs=U,this.updater=pe||X}ue.prototype.isReactComponent={},ue.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},ue.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=ue.prototype;function me(M,ee,pe){this.props=M,this.context=ee,this.refs=U,this.updater=pe||X}var ae=me.prototype=new W;ae.constructor=me,$(ae,ue.prototype),ae.isPureReactComponent=!0;var be=Array.isArray;function xe(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(M,ee,pe){var L=pe.ref;return{$$typeof:r,type:M,key:ee,ref:L!==void 0?L:null,props:pe}}function C(M,ee){return N(M.type,ee,M.props)}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(pe){return ee[pe]})}var I=/\/+/g;function de(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):ee.toString(36)}function ke(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,ee,pe,L,V){var se=typeof M;(se==="undefined"||se==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(se){case"bigint":case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case r:case e:he=!0;break;case _:return he=M._init,Y(he(M._payload),ee,pe,L,V)}}if(he)return V=V(M),he=L===""?"."+de(M,0):L,be(V)?(pe="",he!=null&&(pe=he.replace(I,"$&/")+"/"),Y(V,ee,pe,"",function(J){return J})):V!=null&&(j(V)&&(V=C(V,pe+(V.key==null||M&&M.key===V.key?"":(""+V.key).replace(I,"$&/")+"/")+he)),ee.push(V)),1;he=0;var Ce=L===""?".":L+":";if(be(M))for(var Me=0;Me<M.length;Me++)L=M[Me],se=Ce+de(L,Me),he+=Y(L,ee,pe,se,V);else if(Me=z(M),typeof Me=="function")for(M=Me.call(M),Me=0;!(L=M.next()).done;)L=L.value,se=Ce+de(L,Me++),he+=Y(L,ee,pe,se,V);else if(se==="object"){if(typeof M.then=="function")return Y(ke(M),ee,pe,L,V);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return he}function ge(M,ee,pe){if(M==null)return M;var L=[],V=0;return Y(M,L,"","",function(se){return ee.call(pe,se,V++)}),L}function we(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(pe){(M._status===0||M._status===-1)&&(M._status=1,M._result=pe)},function(pe){(M._status===0||M._status===-1)&&(M._status=2,M._result=pe)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:ge,forEach:function(M,ee,pe){ge(M,function(){ee.apply(this,arguments)},pe)},count:function(M){var ee=0;return ge(M,function(){ee++}),ee},toArray:function(M){return ge(M,function(ee){return ee})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ue.Activity=E,Ue.Children=Ye,Ue.Component=ue,Ue.Fragment=s,Ue.Profiler=o,Ue.PureComponent=me,Ue.StrictMode=i,Ue.Suspense=v,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Ue.cache=function(M){return function(){return M.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(M,ee,pe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var L=$({},M.props),V=M.key;if(ee!=null)for(se in ee.key!==void 0&&(V=""+ee.key),ee)!w.call(ee,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&ee.ref===void 0||(L[se]=ee[se]);var se=arguments.length-2;if(se===1)L.children=pe;else if(1<se){for(var he=Array(se),Ce=0;Ce<se;Ce++)he[Ce]=arguments[Ce+2];L.children=he}return N(M.type,V,L)},Ue.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:d,_context:M},M},Ue.createElement=function(M,ee,pe){var L,V={},se=null;if(ee!=null)for(L in ee.key!==void 0&&(se=""+ee.key),ee)w.call(ee,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(V[L]=ee[L]);var he=arguments.length-2;if(he===1)V.children=pe;else if(1<he){for(var Ce=Array(he),Me=0;Me<he;Me++)Ce[Me]=arguments[Me+2];V.children=Ce}if(M&&M.defaultProps)for(L in he=M.defaultProps,he)V[L]===void 0&&(V[L]=he[L]);return N(M,se,V)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:p,render:M}},Ue.isValidElement=j,Ue.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:we}},Ue.memo=function(M,ee){return{$$typeof:y,type:M,compare:ee===void 0?null:ee}},Ue.startTransition=function(M){var ee=R.T,pe={};R.T=pe;try{var L=M(),V=R.S;V!==null&&V(pe,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(xe,qe)}catch(se){qe(se)}finally{ee!==null&&pe.types!==null&&(ee.types=pe.types),R.T=ee}},Ue.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ue.use=function(M){return R.H.use(M)},Ue.useActionState=function(M,ee,pe){return R.H.useActionState(M,ee,pe)},Ue.useCallback=function(M,ee){return R.H.useCallback(M,ee)},Ue.useContext=function(M){return R.H.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M,ee){return R.H.useDeferredValue(M,ee)},Ue.useEffect=function(M,ee){return R.H.useEffect(M,ee)},Ue.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Ue.useId=function(){return R.H.useId()},Ue.useImperativeHandle=function(M,ee,pe){return R.H.useImperativeHandle(M,ee,pe)},Ue.useInsertionEffect=function(M,ee){return R.H.useInsertionEffect(M,ee)},Ue.useLayoutEffect=function(M,ee){return R.H.useLayoutEffect(M,ee)},Ue.useMemo=function(M,ee){return R.H.useMemo(M,ee)},Ue.useOptimistic=function(M,ee){return R.H.useOptimistic(M,ee)},Ue.useReducer=function(M,ee,pe){return R.H.useReducer(M,ee,pe)},Ue.useRef=function(M){return R.H.useRef(M)},Ue.useState=function(M){return R.H.useState(M)},Ue.useSyncExternalStore=function(M,ee,pe){return R.H.useSyncExternalStore(M,ee,pe)},Ue.useTransition=function(){return R.H.useTransition()},Ue.version="19.2.0",Ue}var fv;function Wm(){return fv||(fv=1,sm.exports=dw()),sm.exports}var te=Wm();const tb=ow(te);var rm={exports:{}},zo={},im={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function hw(){return mv||(mv=1,(function(r){function e(Y,ge){var we=Y.length;Y.push(ge);e:for(;0<we;){var qe=we-1>>>1,Ye=Y[qe];if(0<o(Ye,ge))Y[qe]=ge,Y[we]=Ye,we=qe;else break e}}function s(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ge=Y[0],we=Y.pop();if(we!==ge){Y[0]=we;e:for(var qe=0,Ye=Y.length,M=Ye>>>1;qe<M;){var ee=2*(qe+1)-1,pe=Y[ee],L=ee+1,V=Y[L];if(0>o(pe,we))L<Ye&&0>o(V,pe)?(Y[qe]=V,Y[L]=we,qe=L):(Y[qe]=pe,Y[ee]=we,qe=ee);else if(L<Ye&&0>o(V,we))Y[qe]=V,Y[L]=we,qe=L;else break e}}return ge}function o(Y,ge){var we=Y.sortIndex-ge.sortIndex;return we!==0?we:Y.id-ge.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var v=[],y=[],_=1,E=null,A=3,z=!1,X=!1,$=!1,U=!1,ue=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ae(Y){for(var ge=s(y);ge!==null;){if(ge.callback===null)i(y);else if(ge.startTime<=Y)i(y),ge.sortIndex=ge.expirationTime,e(v,ge);else break;ge=s(y)}}function be(Y){if($=!1,ae(Y),!X)if(s(v)!==null)X=!0,xe||(xe=!0,k());else{var ge=s(y);ge!==null&&ke(be,ge.startTime-Y)}}var xe=!1,R=-1,w=5,N=-1;function C(){return U?!0:!(r.unstable_now()-N<w)}function j(){if(U=!1,xe){var Y=r.unstable_now();N=Y;var ge=!0;try{e:{X=!1,$&&($=!1,W(R),R=-1),z=!0;var we=A;try{t:{for(ae(Y),E=s(v);E!==null&&!(E.expirationTime>Y&&C());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,A=E.priorityLevel;var Ye=qe(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof Ye=="function"){E.callback=Ye,ae(Y),ge=!0;break t}E===s(v)&&i(v),ae(Y)}else i(v);E=s(v)}if(E!==null)ge=!0;else{var M=s(y);M!==null&&ke(be,M.startTime-Y),ge=!1}}break e}finally{E=null,A=we,z=!1}ge=void 0}}finally{ge?k():xe=!1}}}var k;if(typeof me=="function")k=function(){me(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=j,k=function(){de.postMessage(null)}}else k=function(){ue(j,0)};function ke(Y,ge){R=ue(function(){Y(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var ge=3;break;default:ge=A}var we=A;A=ge;try{return Y()}finally{A=we}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Y,ge){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=A;A=Y;try{return ge()}finally{A=we}},r.unstable_scheduleCallback=function(Y,ge,we){var qe=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?qe+we:qe):we=qe,Y){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=we+Ye,Y={id:_++,callback:ge,priorityLevel:Y,startTime:we,expirationTime:Ye,sortIndex:-1},we>qe?(Y.sortIndex=we,e(y,Y),s(v)===null&&Y===s(y)&&($?(W(R),R=-1):$=!0,ke(be,we-qe))):(Y.sortIndex=Ye,e(v,Y),X||z||(X=!0,xe||(xe=!0,k()))),Y},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(Y){var ge=A;return function(){var we=A;A=ge;try{return Y.apply(this,arguments)}finally{A=we}}}})(am)),am}var gv;function fw(){return gv||(gv=1,im.exports=hw()),im.exports}var lm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function mw(){if(pv)return cn;pv=1;var r=Wm();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:v,containerInfo:y,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(v,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(v,y,null,_)},cn.flushSync=function(v){var y=f.T,_=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=y,i.p=_,i.d.f()}},cn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(v,y))},cn.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},cn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:z}):_==="script"&&i.d.X(v,{crossOrigin:E,integrity:A,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},cn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);i.d.M(v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(v)},cn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin);i.d.L(v,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},cn.preloadModule=function(v,y){if(typeof v=="string")if(y){var _=p(y.as,y.crossOrigin);i.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(v)},cn.requestFormReset=function(v){i.d.r(v)},cn.unstable_batchedUpdates=function(v,y){return v(y)},cn.useFormState=function(v,y,_){return f.H.useFormState(v,y,_)},cn.useFormStatus=function(){return f.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var yv;function gw(){if(yv)return lm.exports;yv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=mw(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function pw(){if(vv)return zo;vv=1;var r=fw(),e=Wm(),s=gw();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(i(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return v(h),t;if(m===l)return v(h),n;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,T=h.child;T;){if(T===a){x=!0,a=h,l=m;break}if(T===l){x=!0,l=h,a=m;break}T=T.sibling}if(!x){for(T=m.child;T;){if(T===a){x=!0,a=m,l=h;break}if(T===l){x=!0,l=m,a=h;break}T=T.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case ue:return"Profiler";case U:return"StrictMode";case be:return"Suspense";case xe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case me:return t.displayName||"Context";case W:return(t._context.displayName||"Context")+".Consumer";case ae:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:de(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return de(t(n))}catch{}}return null}var ke=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},qe=[],Ye=-1;function M(t){return{current:t}}function ee(t){0>Ye||(t.current=qe[Ye],qe[Ye]=null,Ye--)}function pe(t,n){Ye++,qe[Ye]=t.current,t.current=n}var L=M(null),V=M(null),se=M(null),he=M(null);function Ce(t,n){switch(pe(se,n),pe(V,t),pe(L,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Dy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Dy(n),t=My(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(L),pe(L,t)}function Me(){ee(L),ee(V),ee(se)}function J(t){t.memoizedState!==null&&pe(he,t);var n=L.current,a=My(n,t.type);n!==a&&(pe(V,t),pe(L,a))}function Ee(t){V.current===t&&(ee(L),ee(V)),he.current===t&&(ee(he),Oo._currentValue=we)}var fe,F;function le(t){if(fe===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);fe=n&&n[1]||"",F=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+t+F}var oe=!1;function Te(t,n){if(!t||oe)return"";oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var G=Q}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Q){G=Q}t.call(ie.prototype)}}else{try{throw Error()}catch(Q){G=Q}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],T=m[1];if(x&&T){var D=x.split(`
`),H=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===H.length)for(l=D.length-1,h=H.length-1;1<=l&&0<=h&&D[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==H[h]){var Z=`
`+D[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{oe=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?le(a):""}function ye(t,n){switch(t.tag){case 26:case 27:case 5:return le(t.type);case 16:return le("Lazy");case 13:return t.child!==n&&n!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return Te(t.type,!1);case 11:return Te(t.type.render,!1);case 1:return Te(t.type,!0);case 31:return le("Activity");default:return""}}function je(t){try{var n="",a=null;do n+=ye(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ke=Object.prototype.hasOwnProperty,pt=r.unstable_scheduleCallback,mn=r.unstable_cancelCallback,Pl=r.unstable_shouldYield,Vi=r.unstable_requestPaint,Qt=r.unstable_now,tr=r.unstable_getCurrentPriorityLevel,nr=r.unstable_ImmediatePriority,Mr=r.unstable_UserBlockingPriority,Ts=r.unstable_NormalPriority,Un=r.unstable_LowPriority,Sa=r.unstable_IdlePriority,Ec=r.log,Sc=r.unstable_setDisableYieldValue,rs=null,Jt=null;function zn(t){if(typeof Ec=="function"&&Sc(t),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(rs,t)}catch{}}var At=Math.clz32?Math.clz32:Ac,Nc=Math.log,Na=Math.LN2;function Ac(t){return t>>>=0,t===0?32:31-(Nc(t)/Na|0)|0}var Es=256,Li=262144,Mt=4194304;function Ss(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ns(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?h=Ss(l):(x&=T,x!==0?h=Ss(x):a||(a=T&~t,a!==0&&(h=Ss(a))))):(T=l&~m,T!==0?h=Ss(T):x!==0?h=Ss(x):a||(a=l&~t,a!==0&&(h=Ss(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function is(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ih(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(){var t=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),t}function As(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Pi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ah(t,n,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,H=t.hiddenUpdates;for(a=x&~a;0<a;){var Z=31-At(a),ie=1<<Z;T[Z]=0,D[Z]=-1;var G=H[Z];if(G!==null)for(H[Z]=null,Z=0;Z<G.length;Z++){var Q=G[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ie}l!==0&&Ui(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~n))}function Ui(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-At(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ul(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-At(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function zl(t,n){var a=n&-n;return a=(a&42)!==0?1:zi(a),(a&(t.suspendedLanes|n))!==0?0:a}function zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cc(){var t=ge.p;return t!==0?t:(t=window.event,t===void 0?32:sv(t.type))}function as(t,n){var a=ge.p;try{return ge.p=t,n()}finally{ge.p=a}}var ls=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ls,$t="__reactProps$"+ls,js="__reactContainer$"+ls,Aa="__reactEvents$"+ls,lh="__reactListeners$"+ls,Rc="__reactHandles$"+ls,Ic="__reactResources$"+ls,Cs="__reactMarker$"+ls;function ja(t){delete t[Ot],delete t[$t],delete t[Aa],delete t[lh],delete t[Rc]}function Rs(t){var n=t[Ot];if(n)return n;for(var a=t.parentNode;a;){if(n=a[js]||a[Ot]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=By(t);t!==null;){if(a=t[Ot])return a;t=By(t)}return n}t=a,a=t.parentNode}return null}function Bn(t){if(t=t[Ot]||t[js]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function jn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Is(t){var n=t[Ic];return n||(n=t[Ic]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(t){t[Cs]=!0}var Bl=new Set,ql={};function ks(t,n){Ds(t,n),Ds(t+"Capture",n)}function Ds(t,n){for(ql[t]=n,t=0;t<n.length;t++)Bl.add(n[t])}var Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Gl={};function kc(t){return Ke.call(Gl,t)?!0:Ke.call(Fl,t)?!1:Hl.test(t)?Gl[t]=!0:(Fl[t]=!0,!1)}function Ca(t,n,a){if(kc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Cn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Lt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Or(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ot(t){if(!t._valueTracker){var n=Or(t)?"checked":"value";t._valueTracker=Yl(t,n,""+t[n])}}function Bi(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Or(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qi=/[\n"\\]/g;function vn(t){return t.replace(qi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ra(t,n,a,l,h,m,x,T){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Xt(n)):t.value!==""+Xt(n)&&(t.value=""+Xt(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Kl(t,x,Xt(n)):a!=null?Kl(t,x,Xt(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Xt(T):t.removeAttribute("name")}function Dc(t,n,a,l,h,m,x,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ot(t);return}a=a!=null?""+Xt(a):"",n=n!=null?""+Xt(n):a,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),ot(t)}function Kl(t,n,a){n==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Vr(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Xt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Mc(t,n,a){if(n!=null&&(n=""+Xt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Xt(a):""}function Lr(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(ke(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Xt(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ot(t)}function xn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Oc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $l(t,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Ql(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Ql(t,m,n[m])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(t){return Pr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function os(){}var Xl=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ur=null,Os=null;function Hi(t){var n=Bn(t);if(n&&(t=n.stateNode)){var a=t[$t]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ra(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[$t]||null;if(!h)throw Error(i(90));Ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Bi(l)}break e;case"textarea":Mc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Vr(t,!!a.multiple,n,!1)}}}var Da=!1;function zr(t,n,a){if(Da)return t(n,a);Da=!0;try{var l=t(n);return l}finally{if(Da=!1,(Ur!==null||Os!==null)&&(Cu(),Ur&&(n=Ur,t=Os,Os=Ur=null,Hi(n),t)))for(n=0;n<t.length;n++)Hi(t[n])}}function cs(t,n){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(Hn)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{Fi=!1}var Vs=null,Wl=null,Gi=null;function Zl(){if(Gi)return Gi;var t,n=Wl,a=n.length,l,h="value"in Vs?Vs.value:Vs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[m-l];l++);return Gi=h.slice(t,1<l?1-l:void 0)}function Yi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function rr(){return!0}function us(){return!1}function en(t){function n(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?rr:us,this.isPropagationStopped=us,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),n}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=en(ir),Br=E({},ir,{view:0,detail:0}),Jl=en(Br),qr,Ma,Ps,Oa=E({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(qr=t.screenX-Ps.screenX,Ma=t.screenY-Ps.screenY):Ma=qr=0,Ps=t),qr)},movementY:function(t){return"movementY"in t?t.movementY:Ma}}),eo=en(Oa),Ki=E({},Oa,{dataTransfer:0}),Lc=en(Ki),Pc=E({},Br,{relatedTarget:0}),Qi=en(Pc),to=E({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Uc=en(to),Va=E({},ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zc=en(Va),Bc=E({},ir,{data:0}),Us=en(Bc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Fc[t])?!!n[t]:!1}function Hr(){return Gc}var gn=E({},Br,{key:function(t){if(t.key){var n=qc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yc=en(gn),Kc=E({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ar=en(Kc),u=E({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),g=en(u),b=E({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=en(b),B=E({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=en(B),ve=E({},ir,{newState:0,oldState:0}),He=en(ve),jt=[9,13,27,32],it=Hn&&"CompositionEvent"in window,_t=null;Hn&&"documentMode"in document&&(_t=document.documentMode);var Fn=Hn&&"TextEvent"in window&&!_t,zs=Hn&&(!it||_t&&8<_t&&11>=_t),ds=" ",hs=!1;function $i(t,n){switch(t){case"keyup":return jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function k1(t,n){switch(t){case"compositionend":return La(n);case"keypress":return n.which!==32?null:(hs=!0,ds);case"textInput":return t=n.data,t===ds&&hs?null:t;default:return null}}function D1(t,n){if(Pa)return t==="compositionend"||!it&&$i(t,n)?(t=Zl(),Gi=Wl=Vs=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return zs&&n.locale!=="ko"?null:n.data;default:return null}}var M1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!M1[t.type]:n==="textarea"}function Gg(t,n,a,l){Ur?Os?Os.push(l):Os=[l]:Ur=l,n=Vu(n,"onChange"),0<n.length&&(a=new Ls("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var no=null,so=null;function O1(t){Ay(t,0)}function Qc(t){var n=jn(t);if(Bi(n))return t}function Yg(t,n){if(t==="change")return n}var Kg=!1;if(Hn){var oh;if(Hn){var ch="oninput"in document;if(!ch){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),ch=typeof Qg.oninput=="function"}oh=ch}else oh=!1;Kg=oh&&(!document.documentMode||9<document.documentMode)}function $g(){no&&(no.detachEvent("onpropertychange",Xg),so=no=null)}function Xg(t){if(t.propertyName==="value"&&Qc(so)){var n=[];Gg(n,so,t,qn(t)),zr(O1,n)}}function V1(t,n,a){t==="focusin"?($g(),no=n,so=a,no.attachEvent("onpropertychange",Xg)):t==="focusout"&&$g()}function L1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(so)}function P1(t,n){if(t==="click")return Qc(n)}function U1(t,n){if(t==="input"||t==="change")return Qc(n)}function z1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Rn=typeof Object.is=="function"?Object.is:z1;function ro(t,n){if(Rn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ke.call(n,h)||!Rn(t[h],n[h]))return!1}return!0}function Wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zg(t,n){var a=Wg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wg(a)}}function Jg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Jg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ep(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ms(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ms(t.document)}return n}function uh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var B1=Hn&&"documentMode"in document&&11>=document.documentMode,Ua=null,dh=null,io=null,hh=!1;function tp(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hh||Ua==null||Ua!==Ms(l)||(l=Ua,"selectionStart"in l&&uh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),io&&ro(io,l)||(io=l,l=Vu(dh,"onSelect"),0<l.length&&(n=new Ls("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ua)))}function Xi(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var za={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},fh={},np={};Hn&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Wi(t){if(fh[t])return fh[t];if(!za[t])return t;var n=za[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in np)return fh[t]=n[a];return t}var sp=Wi("animationend"),rp=Wi("animationiteration"),ip=Wi("animationstart"),q1=Wi("transitionrun"),H1=Wi("transitionstart"),F1=Wi("transitioncancel"),ap=Wi("transitionend"),lp=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function fs(t,n){lp.set(t,n),ks(n,[t])}var $c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gn=[],Ba=0,gh=0;function Xc(){for(var t=Ba,n=gh=Ba=0;n<t;){var a=Gn[n];Gn[n++]=null;var l=Gn[n];Gn[n++]=null;var h=Gn[n];Gn[n++]=null;var m=Gn[n];if(Gn[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&op(a,h,m)}}function Wc(t,n,a,l){Gn[Ba++]=t,Gn[Ba++]=n,Gn[Ba++]=a,Gn[Ba++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ph(t,n,a,l){return Wc(t,n,a,l),Zc(t)}function Zi(t,n){return Wc(t,null,null,n),Zc(t)}function op(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-At(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Zc(t){if(50<jo)throw jo=0,Nf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var qa={};function G1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,n,a,l){return new G1(t,n,a,l)}function yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lr(t,n){var a=t.alternate;return a===null?(a=In(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function cp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Jc(t,n,a,l,h,m){var x=0;if(l=t,typeof t=="function")yh(t)&&(x=1);else if(typeof t=="string")x=X2(t,a,L.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=In(31,a,n,h),t.elementType=N,t.lanes=m,t;case $:return Ji(a.children,h,m,n);case U:x=8,h|=24;break;case ue:return t=In(12,a,n,h|2),t.elementType=ue,t.lanes=m,t;case be:return t=In(13,a,n,h),t.elementType=be,t.lanes=m,t;case xe:return t=In(19,a,n,h),t.elementType=xe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:x=10;break e;case W:x=9;break e;case ae:x=11;break e;case R:x=14;break e;case w:x=16,l=null;break e}x=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return n=In(x,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function Ji(t,n,a,l){return t=In(7,t,l,n),t.lanes=a,t}function vh(t,n,a){return t=In(6,t,null,n),t.lanes=a,t}function up(t){var n=In(18,null,null,0);return n.stateNode=t,n}function xh(t,n,a){return n=In(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var dp=new WeakMap;function Yn(t,n){if(typeof t=="object"&&t!==null){var a=dp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:je(n)},dp.set(t,n),n)}return{value:t,source:n,stack:je(n)}}var Ha=[],Fa=0,eu=null,ao=0,Kn=[],Qn=0,Fr=null,Bs=1,qs="";function or(t,n){Ha[Fa++]=ao,Ha[Fa++]=eu,eu=t,ao=n}function hp(t,n,a){Kn[Qn++]=Bs,Kn[Qn++]=qs,Kn[Qn++]=Fr,Fr=t;var l=Bs;t=qs;var h=32-At(l)-1;l&=~(1<<h),a+=1;var m=32-At(n)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Bs=1<<32-At(n)+h|a<<h|l,qs=m+t}else Bs=1<<m|a<<h|l,qs=t}function bh(t){t.return!==null&&(or(t,1),hp(t,1,0))}function _h(t){for(;t===eu;)eu=Ha[--Fa],Ha[Fa]=null,ao=Ha[--Fa],Ha[Fa]=null;for(;t===Fr;)Fr=Kn[--Qn],Kn[Qn]=null,qs=Kn[--Qn],Kn[Qn]=null,Bs=Kn[--Qn],Kn[Qn]=null}function fp(t,n){Kn[Qn++]=Bs,Kn[Qn++]=qs,Kn[Qn++]=Fr,Bs=n.id,qs=n.overflow,Fr=t}var tn=null,vt=null,tt=!1,Gr=null,$n=!1,wh=Error(i(519));function Yr(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(Yn(n,t)),wh}function mp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Ot]=t,n[$t]=l,a){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<Ro.length;a++)$e(Ro[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":$e("invalid",n),Dc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$e("invalid",n);break;case"textarea":$e("invalid",n),Lr(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Iy(n.textContent,a)?(l.popover!=null&&($e("beforetoggle",n),$e("toggle",n)),l.onScroll!=null&&$e("scroll",n),l.onScrollEnd!=null&&$e("scrollend",n),l.onClick!=null&&(n.onclick=os),n=!0):n=!1,n||Yr(t,!0)}function gp(t){for(tn=t.return;tn;)switch(tn.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:tn=tn.return}}function Ga(t){if(t!==tn)return!1;if(!tt)return gp(t),tt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Bf(t.type,t.memoizedProps)),a=!a),a&&vt&&Yr(t),gp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=zy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=zy(t)}else n===27?(n=vt,ai(t.type)?(t=Yf,Yf=null,vt=t):vt=n):vt=tn?Wn(t.stateNode.nextSibling):null;return!0}function ea(){vt=tn=null,tt=!1}function Th(){var t=Gr;return t!==null&&(Tn===null?Tn=t:Tn.push.apply(Tn,t),Gr=null),t}function lo(t){Gr===null?Gr=[t]:Gr.push(t)}var Eh=M(null),ta=null,cr=null;function Kr(t,n,a){pe(Eh,n._currentValue),n._currentValue=a}function ur(t){t._currentValue=Eh.current,ee(Eh)}function Sh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Nh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=h;for(var D=0;D<n.length;D++)if(T.context===n[D]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),Sh(m.return,a,t),l||(x=null);break e}m=T.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Sh(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Ya(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var T=h.type;Rn(h.pendingProps.value,x.value)||(t!==null?t.push(T):t=[T])}}else if(h===he.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Oo):t=[Oo])}h=h.return}t!==null&&Nh(n,t,a,l),n.flags|=262144}function tu(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nn(t){return pp(ta,t)}function nu(t,n){return ta===null&&na(t),pp(t,n)}function pp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},cr===null){if(t===null)throw Error(i(308));cr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else cr=cr.next=n;return a}var Y1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},K1=r.unstable_scheduleCallback,Q1=r.unstable_NormalPriority,Pt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new Y1,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&K1(Q1,function(){t.controller.abort()})}var co=null,jh=0,Ka=0,Qa=null;function $1(t,n){if(co===null){var a=co=[];jh=0,Ka=kf(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jh++,n.then(yp,yp),n}function yp(){if(--jh===0&&co!==null){Qa!==null&&(Qa.status="fulfilled");var t=co;co=null,Ka=0,Qa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function X1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var vp=Y.S;Y.S=function(t,n){ty=Qt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&$1(t,n),vp!==null&&vp(t,n)};var sa=M(null);function Ch(){var t=sa.current;return t!==null?t:gt.pooledCache}function su(t,n){n===null?pe(sa,sa.current):pe(sa,n.pool)}function xp(){var t=Ch();return t===null?null:{parent:Pt._currentValue,pool:t}}var $a=Error(i(460)),Rh=Error(i(474)),ru=Error(i(542)),iu={then:function(){}};function bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _p(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(os,os),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tp(t),t;default:if(typeof n.status=="string")n.then(os,os);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tp(t),t}throw ia=n,$a}}function ra(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ia=a,$a):a}}var ia=null;function wp(){if(ia===null)throw Error(i(459));var t=ia;return ia=null,t}function Tp(t){if(t===$a||t===ru)throw Error(i(483))}var Xa=null,uo=0;function au(t){var n=uo;return uo+=1,Xa===null&&(Xa=[]),_p(Xa,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lu(t,n){throw n.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ep(t){function n(P,O){if(t){var q=P.deletions;q===null?(P.deletions=[O],P.flags|=16):q.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function l(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=lr(P,O),P.index=0,P.sibling=null,P}function m(P,O,q){return P.index=q,t?(q=P.alternate,q!==null?(q=q.index,q<O?(P.flags|=67108866,O):q):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function x(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,O,q,ne){return O===null||O.tag!==6?(O=vh(q,P.mode,ne),O.return=P,O):(O=h(O,q),O.return=P,O)}function D(P,O,q,ne){var Re=q.type;return Re===$?Z(P,O,q.props.children,ne,q.key):O!==null&&(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&ra(Re)===O.type)?(O=h(O,q.props),ho(O,q),O.return=P,O):(O=Jc(q.type,q.key,q.props,null,P.mode,ne),ho(O,q),O.return=P,O)}function H(P,O,q,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==q.containerInfo||O.stateNode.implementation!==q.implementation?(O=xh(q,P.mode,ne),O.return=P,O):(O=h(O,q.children||[]),O.return=P,O)}function Z(P,O,q,ne,Re){return O===null||O.tag!==7?(O=Ji(q,P.mode,ne,Re),O.return=P,O):(O=h(O,q),O.return=P,O)}function ie(P,O,q){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=vh(""+O,P.mode,q),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return q=Jc(O.type,O.key,O.props,null,P.mode,q),ho(q,O),q.return=P,q;case X:return O=xh(O,P.mode,q),O.return=P,O;case w:return O=ra(O),ie(P,O,q)}if(ke(O)||k(O))return O=Ji(O,P.mode,q,null),O.return=P,O;if(typeof O.then=="function")return ie(P,au(O),q);if(O.$$typeof===me)return ie(P,nu(P,O),q);lu(P,O)}return null}function G(P,O,q,ne){var Re=O!==null?O.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Re!==null?null:T(P,O,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return q.key===Re?D(P,O,q,ne):null;case X:return q.key===Re?H(P,O,q,ne):null;case w:return q=ra(q),G(P,O,q,ne)}if(ke(q)||k(q))return Re!==null?null:Z(P,O,q,ne,null);if(typeof q.then=="function")return G(P,O,au(q),ne);if(q.$$typeof===me)return G(P,O,nu(P,q),ne);lu(P,q)}return null}function Q(P,O,q,ne,Re){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return P=P.get(q)||null,T(O,P,""+ne,Re);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:return P=P.get(ne.key===null?q:ne.key)||null,D(O,P,ne,Re);case X:return P=P.get(ne.key===null?q:ne.key)||null,H(O,P,ne,Re);case w:return ne=ra(ne),Q(P,O,q,ne,Re)}if(ke(ne)||k(ne))return P=P.get(q)||null,Z(O,P,ne,Re,null);if(typeof ne.then=="function")return Q(P,O,q,au(ne),Re);if(ne.$$typeof===me)return Q(P,O,q,nu(O,ne),Re);lu(O,ne)}return null}function Ne(P,O,q,ne){for(var Re=null,st=null,Ae=O,Ge=O=0,We=null;Ae!==null&&Ge<q.length;Ge++){Ae.index>Ge?(We=Ae,Ae=null):We=Ae.sibling;var rt=G(P,Ae,q[Ge],ne);if(rt===null){Ae===null&&(Ae=We);break}t&&Ae&&rt.alternate===null&&n(P,Ae),O=m(rt,O,Ge),st===null?Re=rt:st.sibling=rt,st=rt,Ae=We}if(Ge===q.length)return a(P,Ae),tt&&or(P,Ge),Re;if(Ae===null){for(;Ge<q.length;Ge++)Ae=ie(P,q[Ge],ne),Ae!==null&&(O=m(Ae,O,Ge),st===null?Re=Ae:st.sibling=Ae,st=Ae);return tt&&or(P,Ge),Re}for(Ae=l(Ae);Ge<q.length;Ge++)We=Q(Ae,P,Ge,q[Ge],ne),We!==null&&(t&&We.alternate!==null&&Ae.delete(We.key===null?Ge:We.key),O=m(We,O,Ge),st===null?Re=We:st.sibling=We,st=We);return t&&Ae.forEach(function(di){return n(P,di)}),tt&&or(P,Ge),Re}function De(P,O,q,ne){if(q==null)throw Error(i(151));for(var Re=null,st=null,Ae=O,Ge=O=0,We=null,rt=q.next();Ae!==null&&!rt.done;Ge++,rt=q.next()){Ae.index>Ge?(We=Ae,Ae=null):We=Ae.sibling;var di=G(P,Ae,rt.value,ne);if(di===null){Ae===null&&(Ae=We);break}t&&Ae&&di.alternate===null&&n(P,Ae),O=m(di,O,Ge),st===null?Re=di:st.sibling=di,st=di,Ae=We}if(rt.done)return a(P,Ae),tt&&or(P,Ge),Re;if(Ae===null){for(;!rt.done;Ge++,rt=q.next())rt=ie(P,rt.value,ne),rt!==null&&(O=m(rt,O,Ge),st===null?Re=rt:st.sibling=rt,st=rt);return tt&&or(P,Ge),Re}for(Ae=l(Ae);!rt.done;Ge++,rt=q.next())rt=Q(Ae,P,Ge,rt.value,ne),rt!==null&&(t&&rt.alternate!==null&&Ae.delete(rt.key===null?Ge:rt.key),O=m(rt,O,Ge),st===null?Re=rt:st.sibling=rt,st=rt);return t&&Ae.forEach(function(lw){return n(P,lw)}),tt&&or(P,Ge),Re}function mt(P,O,q,ne){if(typeof q=="object"&&q!==null&&q.type===$&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case z:e:{for(var Re=q.key;O!==null;){if(O.key===Re){if(Re=q.type,Re===$){if(O.tag===7){a(P,O.sibling),ne=h(O,q.props.children),ne.return=P,P=ne;break e}}else if(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&ra(Re)===O.type){a(P,O.sibling),ne=h(O,q.props),ho(ne,q),ne.return=P,P=ne;break e}a(P,O);break}else n(P,O);O=O.sibling}q.type===$?(ne=Ji(q.props.children,P.mode,ne,q.key),ne.return=P,P=ne):(ne=Jc(q.type,q.key,q.props,null,P.mode,ne),ho(ne,q),ne.return=P,P=ne)}return x(P);case X:e:{for(Re=q.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===q.containerInfo&&O.stateNode.implementation===q.implementation){a(P,O.sibling),ne=h(O,q.children||[]),ne.return=P,P=ne;break e}else{a(P,O);break}else n(P,O);O=O.sibling}ne=xh(q,P.mode,ne),ne.return=P,P=ne}return x(P);case w:return q=ra(q),mt(P,O,q,ne)}if(ke(q))return Ne(P,O,q,ne);if(k(q)){if(Re=k(q),typeof Re!="function")throw Error(i(150));return q=Re.call(q),De(P,O,q,ne)}if(typeof q.then=="function")return mt(P,O,au(q),ne);if(q.$$typeof===me)return mt(P,O,nu(P,q),ne);lu(P,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,O!==null&&O.tag===6?(a(P,O.sibling),ne=h(O,q),ne.return=P,P=ne):(a(P,O),ne=vh(q,P.mode,ne),ne.return=P,P=ne),x(P)):a(P,O)}return function(P,O,q,ne){try{uo=0;var Re=mt(P,O,q,ne);return Xa=null,Re}catch(Ae){if(Ae===$a||Ae===ru)throw Ae;var st=In(29,Ae,null,P.mode);return st.lanes=ne,st.return=P,st}finally{}}}var aa=Ep(!0),Sp=Ep(!1),Qr=!1;function Ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $r(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Zc(t),op(t,null,a),n}return Wc(t,l,n,a),Zc(t)}function fo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}function Dh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Mh=!1;function mo(){if(Mh){var t=Qa;if(t!==null)throw t}}function go(t,n,a,l){Mh=!1;var h=t.updateQueue;Qr=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,H=D.next;D.next=null,x===null?m=H:x.next=H,x=D;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==x&&(T===null?Z.firstBaseUpdate=H:T.next=H,Z.lastBaseUpdate=D))}if(m!==null){var ie=h.baseState;x=0,Z=H=D=null,T=m;do{var G=T.lane&-536870913,Q=G!==T.lane;if(Q?(Xe&G)===G:(l&G)===G){G!==0&&G===Ka&&(Mh=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=t,De=T;G=n;var mt=a;switch(De.tag){case 1:if(Ne=De.payload,typeof Ne=="function"){ie=Ne.call(mt,ie,G);break e}ie=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=De.payload,G=typeof Ne=="function"?Ne.call(mt,ie,G):Ne,G==null)break e;ie=E({},ie,G);break e;case 2:Qr=!0}}G=T.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(H=Z=Q,D=ie):Z=Z.next=Q,x|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);Z===null&&(D=ie),h.baseState=D,h.firstBaseUpdate=H,h.lastBaseUpdate=Z,m===null&&(h.shared.lanes=0),ti|=x,t.lanes=x,t.memoizedState=ie}}function Np(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Ap(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Np(a[t],n)}var Wa=M(null),ou=M(0);function jp(t,n){t=xr,pe(ou,t),pe(Wa,n),xr=t|n.baseLanes}function Oh(){pe(ou,xr),pe(Wa,Wa.current)}function Vh(){xr=ou.current,ee(Wa),ee(ou)}var kn=M(null),Xn=null;function Wr(t){var n=t.alternate;pe(Ct,Ct.current&1),pe(kn,t),Xn===null&&(n===null||Wa.current!==null||n.memoizedState!==null)&&(Xn=t)}function Lh(t){pe(Ct,Ct.current),pe(kn,t),Xn===null&&(Xn=t)}function Cp(t){t.tag===22?(pe(Ct,Ct.current),pe(kn,t),Xn===null&&(Xn=t)):Zr()}function Zr(){pe(Ct,Ct.current),pe(kn,kn.current)}function Dn(t){ee(kn),Xn===t&&(Xn=null),ee(Ct)}var Ct=M(0);function cu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ff(a)||Gf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var dr=0,Fe=null,ht=null,Ut=null,uu=!1,Za=!1,la=!1,du=0,po=0,Ja=null,W1=0;function St(){throw Error(i(321))}function Ph(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Rn(t[a],n[a]))return!1;return!0}function Uh(t,n,a,l,h,m){return dr=m,Fe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?h0:ef,la=!1,m=a(l,h),la=!1,Za&&(m=Ip(n,a,l,h)),Rp(t),m}function Rp(t){Y.H=xo;var n=ht!==null&&ht.next!==null;if(dr=0,Ut=ht=Fe=null,uu=!1,po=0,Ja=null,n)throw Error(i(300));t===null||zt||(t=t.dependencies,t!==null&&tu(t)&&(zt=!0))}function Ip(t,n,a,l){Fe=t;var h=0;do{if(Za&&(Ja=null),po=0,Za=!1,25<=h)throw Error(i(301));if(h+=1,Ut=ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=f0,m=n(a,l)}while(Za);return m}function Z1(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?yo(n):n,t=t.useState()[0],(ht!==null?ht.memoizedState:null)!==t&&(Fe.flags|=1024),n}function zh(){var t=du!==0;return du=0,t}function Bh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function qh(t){if(uu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}uu=!1}dr=0,Ut=ht=Fe=null,Za=!1,po=du=0,Ja=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Fe.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Rt(){if(ht===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var n=Ut===null?Fe.memoizedState:Ut.next;if(n!==null)Ut=n,ht=t;else{if(t===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Ut===null?Fe.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var n=po;return po+=1,Ja===null&&(Ja=[]),t=_p(Ja,t,n),n=Fe,(Ut===null?n.memoizedState:Ut.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?h0:ef),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===me)return nn(t)}throw Error(i(438,String(t)))}function Hh(t){var n=null,a=Fe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Fe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hu(),Fe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=C;return n.index++,a}function hr(t,n){return typeof n=="function"?n(t):n}function mu(t){var n=Rt();return Fh(n,ht,t)}function Fh(t,n,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var T=x=null,D=null,H=n,Z=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?(Xe&ie)===ie:(dr&ie)===ie){var G=H.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===Ka&&(Z=!0);else if((dr&G)===G){H=H.next,G===Ka&&(Z=!0);continue}else ie={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(T=D=ie,x=m):D=D.next=ie,Fe.lanes|=G,ti|=G;ie=H.action,la&&a(m,ie),m=H.hasEagerState?H.eagerState:a(m,ie)}else G={lane:ie,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(T=D=G,x=m):D=D.next=G,Fe.lanes|=ie,ti|=ie;H=H.next}while(H!==null&&H!==n);if(D===null?x=m:D.next=T,!Rn(m,t.memoizedState)&&(zt=!0,Z&&(a=Qa,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gh(t){var n=Rt(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);Rn(m,n.memoizedState)||(zt=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function kp(t,n,a){var l=Fe,h=Rt(),m=tt;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=n();var x=!Rn((ht||h).memoizedState,a);if(x&&(h.memoizedState=a,zt=!0),h=h.queue,Qh(Op.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||Ut!==null&&Ut.memoizedState.tag&1){if(l.flags|=2048,el(9,{destroy:void 0},Mp.bind(null,l,h,a,n),null),gt===null)throw Error(i(349));m||(dr&127)!==0||Dp(l,n,a)}return a}function Dp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Fe.updateQueue,n===null?(n=hu(),Fe.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Mp(t,n,a,l){n.value=a,n.getSnapshot=l,Vp(n)&&Lp(t)}function Op(t,n,a){return a(function(){Vp(n)&&Lp(t)})}function Vp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Rn(t,a)}catch{return!0}}function Lp(t){var n=Zi(t,2);n!==null&&En(n,t,2)}function Yh(t){var n=pn();if(typeof t=="function"){var a=t;if(t=a(),la){zn(!0);try{a()}finally{zn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:t},n}function Pp(t,n,a,l){return t.baseState=a,Fh(t,ht,typeof l=="function"?l:hr)}function J1(t,n,a,l,h){if(yu(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Up(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Up(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=Y.T,x={};Y.T=x;try{var T=a(h,l),D=Y.S;D!==null&&D(x,T),zp(t,n,T)}catch(H){Kh(t,n,H)}finally{m!==null&&x.types!==null&&(m.types=x.types),Y.T=m}}else try{m=a(h,l),zp(t,n,m)}catch(H){Kh(t,n,H)}}function zp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Bp(t,n,l)},function(l){return Kh(t,n,l)}):Bp(t,n,a)}function Bp(t,n,a){n.status="fulfilled",n.value=a,qp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Up(t,a)))}function Kh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,qp(n),n=n.next;while(n!==l)}t.action=null}function qp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Hp(t,n){return n}function Fp(t,n){if(tt){var a=gt.formState;if(a!==null){e:{var l=Fe;if(tt){if(vt){t:{for(var h=vt,m=$n;h.nodeType!==8;){if(!m){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){vt=Wn(h.nextSibling),l=h.data==="F!";break e}}Yr(l)}l=!1}l&&(n=a[0])}}return a=pn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hp,lastRenderedState:n},a.queue=l,a=c0.bind(null,Fe,l),l.dispatch=a,l=Yh(!1),m=Jh.bind(null,Fe,!1,l.queue),l=pn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=J1.bind(null,Fe,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Gp(t){var n=Rt();return Yp(n,ht,t)}function Yp(t,n,a){if(n=Fh(t,n,Hp)[0],t=mu(hr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yo(n)}catch(x){throw x===$a?ru:x}else l=n;n=Rt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Fe.flags|=2048,el(9,{destroy:void 0},e2.bind(null,h,a),null)),[l,m,t]}function e2(t,n){t.action=n}function Kp(t){var n=Rt(),a=ht;if(a!==null)return Yp(n,a,t);Rt(),n=n.memoizedState,a=Rt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function el(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Fe.updateQueue,n===null&&(n=hu(),Fe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Qp(){return Rt().memoizedState}function gu(t,n,a,l){var h=pn();Fe.flags|=t,h.memoizedState=el(1|n,{destroy:void 0},a,l===void 0?null:l)}function pu(t,n,a,l){var h=Rt();l=l===void 0?null:l;var m=h.memoizedState.inst;ht!==null&&l!==null&&Ph(l,ht.memoizedState.deps)?h.memoizedState=el(n,m,a,l):(Fe.flags|=t,h.memoizedState=el(1|n,m,a,l))}function $p(t,n){gu(8390656,8,t,n)}function Qh(t,n){pu(2048,8,t,n)}function t2(t){Fe.flags|=4;var n=Fe.updateQueue;if(n===null)n=hu(),Fe.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Xp(t){var n=Rt().memoizedState;return t2({ref:n,nextImpl:t}),function(){if((at&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Wp(t,n){return pu(4,2,t,n)}function Zp(t,n){return pu(4,4,t,n)}function Jp(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function e0(t,n,a){a=a!=null?a.concat([t]):null,pu(4,4,Jp.bind(null,n,t),a)}function $h(){}function t0(t,n){var a=Rt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Ph(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function n0(t,n){var a=Rt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Ph(n,l[1]))return l[0];if(l=t(),la){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,n],l}function Xh(t,n,a){return a===void 0||(dr&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=sy(),Fe.lanes|=t,ti|=t,a)}function s0(t,n,a,l){return Rn(a,n)?a:Wa.current!==null?(t=Xh(t,a,l),Rn(t,n)||(zt=!0),t):(dr&42)===0||(dr&1073741824)!==0&&(Xe&261930)===0?(zt=!0,t.memoizedState=a):(t=sy(),Fe.lanes|=t,ti|=t,n)}function r0(t,n,a,l,h){var m=ge.p;ge.p=m!==0&&8>m?m:8;var x=Y.T,T={};Y.T=T,Jh(t,!1,n,a);try{var D=h(),H=Y.S;if(H!==null&&H(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=X1(D,l);vo(t,n,Z,Vn(t))}else vo(t,n,l,Vn(t))}catch(ie){vo(t,n,{then:function(){},status:"rejected",reason:ie},Vn())}finally{ge.p=m,x!==null&&T.types!==null&&(x.types=T.types),Y.T=x}}function n2(){}function Wh(t,n,a,l){if(t.tag!==5)throw Error(i(476));var h=i0(t).queue;r0(t,h,n,we,a===null?n2:function(){return a0(t),a(l)})}function i0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:we},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function a0(t){var n=i0(t);n.next===null&&(n=t.alternate.memoizedState),vo(t,n.next.queue,{},Vn())}function Zh(){return nn(Oo)}function l0(){return Rt().memoizedState}function o0(){return Rt().memoizedState}function s2(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Vn();t=$r(a);var l=Xr(n,t,a);l!==null&&(En(l,n,a),fo(l,n,a)),n={cache:Ah()},t.payload=n;return}n=n.return}}function r2(t,n,a){var l=Vn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yu(t)?u0(n,a):(a=ph(t,n,a,l),a!==null&&(En(a,t,l),d0(a,n,l)))}function c0(t,n,a){var l=Vn();vo(t,n,a,l)}function vo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yu(t))u0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,T=m(x,a);if(h.hasEagerState=!0,h.eagerState=T,Rn(T,x))return Wc(t,n,h,0),gt===null&&Xc(),!1}catch{}finally{}if(a=ph(t,n,h,l),a!==null)return En(a,t,l),d0(a,n,l),!0}return!1}function Jh(t,n,a,l){if(l={lane:2,revertLane:kf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yu(t)){if(n)throw Error(i(479))}else n=ph(t,a,l,2),n!==null&&En(n,t,2)}function yu(t){var n=t.alternate;return t===Fe||n!==null&&n===Fe}function u0(t,n){Za=uu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function d0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}var xo={readContext:nn,use:fu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};xo.useEffectEvent=St;var h0={readContext:nn,use:fu,useCallback:function(t,n){return pn().memoizedState=[t,n===void 0?null:n],t},useContext:nn,useEffect:$p,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,gu(4194308,4,Jp.bind(null,n,t),a)},useLayoutEffect:function(t,n){return gu(4194308,4,t,n)},useInsertionEffect:function(t,n){gu(4,2,t,n)},useMemo:function(t,n){var a=pn();n=n===void 0?null:n;var l=t();if(la){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=pn();if(a!==void 0){var h=a(n);if(la){zn(!0);try{a(n)}finally{zn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=r2.bind(null,Fe,t),[l.memoizedState,t]},useRef:function(t){var n=pn();return t={current:t},n.memoizedState=t},useState:function(t){t=Yh(t);var n=t.queue,a=c0.bind(null,Fe,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:$h,useDeferredValue:function(t,n){var a=pn();return Xh(a,t,n)},useTransition:function(){var t=Yh(!1);return t=r0.bind(null,Fe,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Fe,h=pn();if(tt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),gt===null)throw Error(i(349));(Xe&127)!==0||Dp(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,$p(Op.bind(null,l,m,t),[t]),l.flags|=2048,el(9,{destroy:void 0},Mp.bind(null,l,m,a,n),null),a},useId:function(){var t=pn(),n=gt.identifierPrefix;if(tt){var a=qs,l=Bs;a=(l&~(1<<32-At(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=du++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=W1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Zh,useFormState:Fp,useActionState:Fp,useOptimistic:function(t){var n=pn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Jh.bind(null,Fe,!0,a),a.dispatch=n,[t,n]},useMemoCache:Hh,useCacheRefresh:function(){return pn().memoizedState=s2.bind(null,Fe)},useEffectEvent:function(t){var n=pn(),a={impl:t};return n.memoizedState=a,function(){if((at&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},ef={readContext:nn,use:fu,useCallback:t0,useContext:nn,useEffect:Qh,useImperativeHandle:e0,useInsertionEffect:Wp,useLayoutEffect:Zp,useMemo:n0,useReducer:mu,useRef:Qp,useState:function(){return mu(hr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Rt();return s0(a,ht.memoizedState,t,n)},useTransition:function(){var t=mu(hr)[0],n=Rt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:kp,useId:l0,useHostTransitionStatus:Zh,useFormState:Gp,useActionState:Gp,useOptimistic:function(t,n){var a=Rt();return Pp(a,ht,t,n)},useMemoCache:Hh,useCacheRefresh:o0};ef.useEffectEvent=Xp;var f0={readContext:nn,use:fu,useCallback:t0,useContext:nn,useEffect:Qh,useImperativeHandle:e0,useInsertionEffect:Wp,useLayoutEffect:Zp,useMemo:n0,useReducer:Gh,useRef:Qp,useState:function(){return Gh(hr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Rt();return ht===null?Xh(a,t,n):s0(a,ht.memoizedState,t,n)},useTransition:function(){var t=Gh(hr)[0],n=Rt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:kp,useId:l0,useHostTransitionStatus:Zh,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var a=Rt();return ht!==null?Pp(a,ht,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:o0};f0.useEffectEvent=Xp;function tf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:E({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var nf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.payload=n,a!=null&&(h.callback=a),n=Xr(t,h,l),n!==null&&(En(n,t,l),fo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Xr(t,h,l),n!==null&&(En(n,t,l),fo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Vn(),l=$r(a);l.tag=2,n!=null&&(l.callback=n),n=Xr(t,l,a),n!==null&&(En(n,t,a),fo(n,t,a))}};function m0(t,n,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!ro(a,l)||!ro(h,m):!0}function g0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&nf.enqueueReplaceState(n,n.state,null)}function oa(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function p0(t){$c(t)}function y0(t){console.error(t)}function v0(t){$c(t)}function vu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function x0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sf(t,n,a){return a=$r(a),a.tag=3,a.payload={element:null},a.callback=function(){vu(t,n)},a}function b0(t){return t=$r(t),t.tag=3,t}function _0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){x0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){x0(n,a,l),typeof h!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function i2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ya(n,a,h,!0),a=kn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Ru():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Cf(t,l,h)),!1;case 22:return a.flags|=65536,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Cf(t,l,h)),!1}throw Error(i(435,a.tag))}return Cf(t,l,h),Ru(),!1}if(tt)return n=kn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==wh&&(t=Error(i(422),{cause:l}),lo(Yn(t,a)))):(l!==wh&&(n=Error(i(423),{cause:l}),lo(Yn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Yn(l,a),h=sf(t.stateNode,l,h),Dh(t,h),Nt!==4&&(Nt=2)),!1;var m=Error(i(520),{cause:l});if(m=Yn(m,a),Ao===null?Ao=[m]:Ao.push(m),Nt!==4&&(Nt=2),n===null)return!0;l=Yn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=sf(a.stateNode,l,t),Dh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ni===null||!ni.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=b0(h),_0(h,t,a,l),Dh(a,h),!1}a=a.return}while(a!==null);return!1}var rf=Error(i(461)),zt=!1;function sn(t,n,a,l){n.child=t===null?Sp(n,null,a,l):aa(n,t.child,a,l)}function w0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var T in l)T!=="ref"&&(x[T]=l[T])}else x=l;return na(n),l=Uh(t,n,a,x,m,h),T=zh(),t!==null&&!zt?(Bh(t,n,h),fr(t,n,h)):(tt&&T&&bh(n),n.flags|=1,sn(t,n,l,h),n.child)}function T0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!yh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,E0(t,n,m,l,h)):(t=Jc(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!ff(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:ro,a(x,l)&&t.ref===n.ref)return fr(t,n,h)}return n.flags|=1,t=lr(m,l),t.ref=n.ref,t.return=n,n.child=t}function E0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(ro(m,l)&&t.ref===n.ref)if(zt=!1,n.pendingProps=l=m,ff(t,h))(t.flags&131072)!==0&&(zt=!0);else return n.lanes=t.lanes,fr(t,n,h)}return af(t,n,a,l,h)}function S0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return N0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&su(n,m!==null?m.cachePool:null),m!==null?jp(n,m):Oh(),Cp(n);else return l=n.lanes=536870912,N0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(su(n,m.cachePool),jp(n,m),Zr(),n.memoizedState=null):(t!==null&&su(n,null),Oh(),Zr());return sn(t,n,h,a),n.child}function bo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function N0(t,n,a,l,h){var m=Ch();return m=m===null?null:{parent:Pt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&su(n,null),Oh(),Cp(n),t!==null&&Ya(t,n,l,!0),n.childLanes=h,null}function xu(t,n){return n=_u({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function A0(t,n,a){return aa(n,t.child,null,a),t=xu(n,n.pendingProps),t.flags|=2,Dn(n),n.memoizedState=null,t}function a2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(tt){if(l.mode==="hidden")return t=xu(n,l),n.lanes=536870912,bo(null,t);if(Lh(n),(t=vt)?(t=Uy(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Bs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},a=up(t),a.return=n,n.child=a,tn=n,vt=null)):t=null,t===null)throw Yr(n);return n.lanes=536870912,null}return xu(n,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Lh(n),h)if(n.flags&256)n.flags&=-257,n=A0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(zt||Ya(t,n,a,!1),h=(a&t.childLanes)!==0,zt||h){if(l=gt,l!==null&&(x=zl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,Zi(t,x),En(l,t,x),rf;Ru(),n=A0(t,n,a)}else t=m.treeContext,vt=Wn(x.nextSibling),tn=n,tt=!0,Gr=null,$n=!1,t!==null&&fp(n,t),n=xu(n,l),n.flags|=4096;return n}return t=lr(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function bu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function af(t,n,a,l,h){return na(n),a=Uh(t,n,a,l,void 0,h),l=zh(),t!==null&&!zt?(Bh(t,n,h),fr(t,n,h)):(tt&&l&&bh(n),n.flags|=1,sn(t,n,a,h),n.child)}function j0(t,n,a,l,h,m){return na(n),n.updateQueue=null,a=Ip(n,l,a,h),Rp(t),l=zh(),t!==null&&!zt?(Bh(t,n,m),fr(t,n,m)):(tt&&l&&bh(n),n.flags|=1,sn(t,n,a,m),n.child)}function C0(t,n,a,l,h){if(na(n),n.stateNode===null){var m=qa,x=a.contextType;typeof x=="object"&&x!==null&&(m=nn(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=nf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Ih(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?nn(x):qa,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(tf(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&nf.enqueueReplaceState(m,m.state,null),go(n,l,m,h),mo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var T=n.memoizedProps,D=oa(a,T);m.props=D;var H=m.context,Z=a.contextType;x=qa,typeof Z=="object"&&Z!==null&&(x=nn(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||H!==x)&&g0(n,m,l,x),Qr=!1;var G=n.memoizedState;m.state=G,go(n,l,m,h),mo(),H=n.memoizedState,T||G!==H||Qr?(typeof ie=="function"&&(tf(n,a,ie,l),H=n.memoizedState),(D=Qr||m0(n,a,D,l,G,H,x))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),m.props=l,m.state=H,m.context=x,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,kh(t,n),x=n.memoizedProps,Z=oa(a,x),m.props=Z,ie=n.pendingProps,G=m.context,H=a.contextType,D=qa,typeof H=="object"&&H!==null&&(D=nn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ie||G!==D)&&g0(n,m,l,D),Qr=!1,G=n.memoizedState,m.state=G,go(n,l,m,h),mo();var Q=n.memoizedState;x!==ie||G!==Q||Qr||t!==null&&t.dependencies!==null&&tu(t.dependencies)?(typeof T=="function"&&(tf(n,a,T,l),Q=n.memoizedState),(Z=Qr||m0(n,a,Z,l,G,Q,D)||t!==null&&t.dependencies!==null&&tu(t.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),m.props=l,m.state=Q,m.context=D,l=Z):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,bu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=aa(n,t.child,null,h),n.child=aa(n,null,a,h)):sn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=fr(t,n,h),t}function R0(t,n,a,l){return ea(),n.flags|=256,sn(t,n,a,l),n.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function of(t){return{baseLanes:t,cachePool:xp()}}function cf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=On),t}function I0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(tt){if(h?Wr(n):Zr(),(t=vt)?(t=Uy(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Bs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},a=up(t),a.return=n,n.child=a,tn=n,vt=null)):t=null,t===null)throw Yr(n);return Gf(t)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Zr(),h=n.mode,T=_u({mode:"hidden",children:T},h),l=Ji(l,h,a,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,x,a),n.memoizedState=lf,bo(null,l)):(Wr(n),uf(n,T))}var D=t.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)n.flags&256?(Wr(n),n.flags&=-257,n=df(t,n,a)):n.memoizedState!==null?(Zr(),n.child=t.child,n.flags|=128,n=null):(Zr(),T=l.fallback,h=n.mode,l=_u({mode:"visible",children:l.children},h),T=Ji(T,h,a,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,aa(n,t.child,null,a),l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,x,a),n.memoizedState=lf,n=bo(null,l));else if(Wr(n),Gf(T)){if(x=T.nextSibling&&T.nextSibling.dataset,x)var H=x.dgst;x=H,l=Error(i(419)),l.stack="",l.digest=x,lo({value:l,source:null,stack:null}),n=df(t,n,a)}else if(zt||Ya(t,n,a,!1),x=(a&t.childLanes)!==0,zt||x){if(x=gt,x!==null&&(l=zl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Zi(t,l),En(x,t,l),rf;Ff(T)||Ru(),n=df(t,n,a)}else Ff(T)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,vt=Wn(T.nextSibling),tn=n,tt=!0,Gr=null,$n=!1,t!==null&&fp(n,t),n=uf(n,l.children),n.flags|=4096);return n}return h?(Zr(),T=l.fallback,h=n.mode,D=t.child,H=D.sibling,l=lr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,H!==null?T=lr(H,T):(T=Ji(T,h,a,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,bo(null,l),l=n.child,T=t.child.memoizedState,T===null?T=of(a):(h=T.cachePool,h!==null?(D=Pt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=xp(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=cf(t,x,a),n.memoizedState=lf,bo(t.child,l)):(Wr(n),a=t.child,t=a.sibling,a=lr(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function uf(t,n){return n=_u({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function _u(t,n){return t=In(22,t,null,n),t.lanes=0,t}function df(t,n,a){return aa(n,t.child,null,a),t=uf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function k0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Sh(t.return,n,a)}function hf(t,n,a,l,h,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=m)}function D0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var x=Ct.current,T=(x&2)!==0;if(T?(x=x&1|2,n.flags|=128):x&=1,pe(Ct,x),sn(t,n,l,a),l=tt?ao:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,a,n);else if(t.tag===19)k0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&cu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),hf(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&cu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}hf(n,!0,a,null,m,l);break;case"together":hf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function fr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ti|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ya(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,a=lr(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=lr(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function ff(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&tu(t)))}function l2(t,n,a){switch(n.tag){case 3:Ce(n,n.stateNode.containerInfo),Kr(n,Pt,t.memoizedState.cache),ea();break;case 27:case 5:J(n);break;case 4:Ce(n,n.stateNode.containerInfo);break;case 10:Kr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Lh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Wr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?I0(t,n,a):(Wr(n),t=fr(t,n,a),t!==null?t.sibling:null);Wr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ya(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return D0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),pe(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,S0(t,n,a,n.pendingProps);case 24:Kr(n,Pt,t.memoizedState.cache)}return fr(t,n,a)}function M0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)zt=!0;else{if(!ff(t,a)&&(n.flags&128)===0)return zt=!1,l2(t,n,a);zt=(t.flags&131072)!==0}else zt=!1,tt&&(n.flags&1048576)!==0&&hp(n,ao,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=ra(n.elementType),n.type=t,typeof t=="function")yh(t)?(l=oa(t,l),n.tag=1,n=C0(null,n,t,l,a)):(n.tag=0,n=af(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ae){n.tag=11,n=w0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=T0(null,n,t,l,a);break e}}throw n=de(t)||t,Error(i(306,n,""))}}return n;case 0:return af(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=oa(l,n.pendingProps),C0(t,n,l,h,a);case 3:e:{if(Ce(n,n.stateNode.containerInfo),t===null)throw Error(i(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,kh(t,n),go(n,l,null,a);var x=n.memoizedState;if(l=x.cache,Kr(n,Pt,l),l!==m.cache&&Nh(n,[Pt],a,!0),mo(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=R0(t,n,l,a);break e}else if(l!==h){h=Yn(Error(i(424)),n),lo(h),n=R0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=Wn(t.firstChild),tn=n,tt=!0,Gr=null,$n=!0,a=Sp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ea(),l===h){n=fr(t,n,a);break e}sn(t,n,l,a)}n=n.child}return n;case 26:return bu(t,n),t===null?(a=Gy(n.type,null,n.pendingProps,null))?n.memoizedState=a:tt||(a=n.type,t=n.pendingProps,l=Lu(se.current).createElement(a),l[Ot]=n,l[$t]=t,rn(l,a,t),Vt(l),n.stateNode=l):n.memoizedState=Gy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return J(n),t===null&&tt&&(l=n.stateNode=qy(n.type,n.pendingProps,se.current),tn=n,$n=!0,h=vt,ai(n.type)?(Yf=h,vt=Wn(l.firstChild)):vt=h),sn(t,n,n.pendingProps.children,a),bu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&tt&&((h=l=vt)&&(l=L2(l,n.type,n.pendingProps,$n),l!==null?(n.stateNode=l,tn=n,vt=Wn(l.firstChild),$n=!1,h=!0):h=!1),h||Yr(n)),J(n),h=n.type,m=n.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,Bf(h,m)?l=null:x!==null&&Bf(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=Uh(t,n,Z1,null,null,a),Oo._currentValue=h),bu(t,n),sn(t,n,l,a),n.child;case 6:return t===null&&tt&&((t=a=vt)&&(a=P2(a,n.pendingProps,$n),a!==null?(n.stateNode=a,tn=n,vt=null,t=!0):t=!1),t||Yr(n)),null;case 13:return I0(t,n,a);case 4:return Ce(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=aa(n,null,l,a):sn(t,n,l,a),n.child;case 11:return w0(t,n,n.type,n.pendingProps,a);case 7:return sn(t,n,n.pendingProps,a),n.child;case 8:return sn(t,n,n.pendingProps.children,a),n.child;case 12:return sn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Kr(n,n.type,l.value),sn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,na(n),h=nn(h),l=l(h),n.flags|=1,sn(t,n,l,a),n.child;case 14:return T0(t,n,n.type,n.pendingProps,a);case 15:return E0(t,n,n.type,n.pendingProps,a);case 19:return D0(t,n,a);case 31:return a2(t,n,a);case 22:return S0(t,n,a,n.pendingProps);case 24:return na(n),l=nn(Pt),t===null?(h=Ch(),h===null&&(h=gt,m=Ah(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},Ih(n),Kr(n,Pt,h)):((t.lanes&a)!==0&&(kh(t,n),go(n,null,null,a),mo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Kr(n,Pt,l)):(l=m.cache,Kr(n,Pt,l),l!==h.cache&&Nh(n,[Pt],a,!0))),sn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function mr(t){t.flags|=4}function mf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(ly())t.flags|=8192;else throw ia=iu,Rh}else t.flags&=-16777217}function O0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xy(n))if(ly())t.flags|=8192;else throw ia=iu,Rh}function wu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?jc():536870912,t.lanes|=n,rl|=n)}function _o(t,n){if(!tt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function xt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function o2(t,n,a){var l=n.pendingProps;switch(_h(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(n),null;case 1:return xt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ur(Pt),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ga(n)?mr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Th())),xt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(mr(n),m!==null?(xt(n),O0(n,m)):(xt(n),mf(n,h,null,l,a))):m?m!==t.memoizedState?(mr(n),xt(n),O0(n,m)):(xt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&mr(n),xt(n),mf(n,h,t,l,a)),null;case 27:if(Ee(n),a=se.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}t=L.current,Ga(n)?mp(n):(t=qy(h,l,a),n.stateNode=t,mr(n))}return xt(n),null;case 5:if(Ee(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}if(m=L.current,Ga(n))mp(n);else{var x=Lu(se.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}m[Ot]=n,m[$t]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;e:switch(rn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(n)}}return xt(n),mf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(t=se.current,Ga(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ot]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Iy(t.nodeValue,a)),t||Yr(n,!0)}else t=Lu(t).createTextNode(l),t[Ot]=n,n.stateNode=t}return xt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ga(n),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ot]=n}else ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),t=!1}else a=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Dn(n),n):(Dn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return xt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ga(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ot]=n}else ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),h=!1}else h=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Dn(n),n):(Dn(n),null)}return Dn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),wu(n,n.updateQueue),xt(n),null);case 4:return Me(),t===null&&Vf(n.stateNode.containerInfo),xt(n),null;case 10:return ur(n.type),xt(n),null;case 19:if(ee(Ct),l=n.memoizedState,l===null)return xt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)_o(l,!1);else{if(Nt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=cu(t),m!==null){for(n.flags|=128,_o(l,!1),t=m.updateQueue,n.updateQueue=t,wu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)cp(a,t),a=a.sibling;return pe(Ct,Ct.current&1|2),tt&&or(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Qt()>Au&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304)}else{if(!h)if(t=cu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,wu(n,t),_o(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!tt)return xt(n),null}else 2*Qt()-l.renderingStartTime>Au&&a!==536870912&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qt(),t.sibling=null,a=Ct.current,pe(Ct,h?a&1|2:a&1),tt&&or(n,l.treeForkCount),t):(xt(n),null);case 22:case 23:return Dn(n),Vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(xt(n),n.subtreeFlags&6&&(n.flags|=8192)):xt(n),a=n.updateQueue,a!==null&&wu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&ee(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ur(Pt),xt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function c2(t,n){switch(_h(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ur(Pt),Me(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ee(n),null;case 31:if(n.memoizedState!==null){if(Dn(n),n.alternate===null)throw Error(i(340));ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Dn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ee(Ct),null;case 4:return Me(),null;case 10:return ur(n.type),null;case 22:case 23:return Dn(n),Vh(),t!==null&&ee(sa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ur(Pt),null;case 25:return null;default:return null}}function V0(t,n){switch(_h(n),n.tag){case 3:ur(Pt),Me();break;case 26:case 27:case 5:Ee(n);break;case 4:Me();break;case 31:n.memoizedState!==null&&Dn(n);break;case 13:Dn(n);break;case 19:ee(Ct);break;case 10:ur(n.type);break;case 22:case 23:Dn(n),Vh(),t!==null&&ee(sa);break;case 24:ur(Pt)}}function wo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(T){ut(n,n.return,T)}}function Jr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,T=x.destroy;if(T!==void 0){x.destroy=void 0,h=n;var D=a,H=T;try{H()}catch(Z){ut(h,D,Z)}}}l=l.next}while(l!==m)}}catch(Z){ut(n,n.return,Z)}}function L0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Ap(n,a)}catch(l){ut(t,t.return,l)}}}function P0(t,n,a){a.props=oa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,n,l)}}function To(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ut(t,n,h)}}function Hs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,n,h)}else a.current=null}function U0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;I2(l,t.type,a,n),l[$t]=n}catch(h){ut(t,t.return,h)}}function z0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ai(t.type)||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=os));else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(yf(t,n,a),t=t.sibling;t!==null;)yf(t,n,a),t=t.sibling}function Tu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tu(t,n,a),t=t.sibling;t!==null;)Tu(t,n,a),t=t.sibling}function B0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);rn(n,l,a),n[Ot]=t,n[$t]=a}catch(m){ut(t,t.return,m)}}var gr=!1,Bt=!1,vf=!1,q0=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function u2(t,n){if(t=t.containerInfo,Uf=Fu,t=ep(t),uh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,T=-1,D=-1,H=0,Z=0,ie=t,G=null;t:for(;;){for(var Q;ie!==a||h!==0&&ie.nodeType!==3||(T=x+h),ie!==m||l!==0&&ie.nodeType!==3||(D=x+l),ie.nodeType===3&&(x+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)G=ie,ie=Q;for(;;){if(ie===t)break t;if(G===a&&++H===h&&(T=x),G===m&&++Z===l&&(D=x),(Q=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=Q}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(zf={focusedElem:t,selectionRange:a},Fu=!1,Wt=n;Wt!==null;)if(n=Wt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Wt=t;else for(;Wt!==null;){switch(n=Wt,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=oa(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){ut(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Hf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Wt=t;break}Wt=n.return}}function H0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:yr(t,a),l&4&&wo(5,a);break;case 1:if(yr(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){ut(a,a.return,x)}else{var h=oa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ut(a,a.return,x)}}l&64&&L0(a),l&512&&To(a,a.return);break;case 3:if(yr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ap(t,n)}catch(x){ut(a,a.return,x)}}break;case 27:n===null&&l&4&&B0(a);case 26:case 5:yr(t,a),n===null&&l&4&&U0(a),l&512&&To(a,a.return);break;case 12:yr(t,a);break;case 31:yr(t,a),l&4&&Y0(t,a);break;case 13:yr(t,a),l&4&&K0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=x2.bind(null,a),U2(t,a))));break;case 22:if(l=a.memoizedState!==null||gr,!l){n=n!==null&&n.memoizedState!==null||Bt,h=gr;var m=Bt;gr=l,(Bt=n)&&!m?vr(t,a,(a.subtreeFlags&8772)!==0):yr(t,a),gr=h,Bt=m}break;case 30:break;default:yr(t,a)}}function F0(t){var n=t.alternate;n!==null&&(t.alternate=null,F0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ja(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wt=null,bn=!1;function pr(t,n,a){for(a=a.child;a!==null;)G0(t,n,a),a=a.sibling}function G0(t,n,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(rs,a)}catch{}switch(a.tag){case 26:Bt||Hs(a,n),pr(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Hs(a,n);var l=wt,h=bn;ai(a.type)&&(wt=a.stateNode,bn=!1),pr(t,n,a),ko(a.stateNode),wt=l,bn=h;break;case 5:Bt||Hs(a,n);case 6:if(l=wt,h=bn,wt=null,pr(t,n,a),wt=l,bn=h,wt!==null)if(bn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(a.stateNode)}catch(m){ut(a,n,m)}else try{wt.removeChild(a.stateNode)}catch(m){ut(a,n,m)}break;case 18:wt!==null&&(bn?(t=wt,Ly(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),hl(t)):Ly(wt,a.stateNode));break;case 4:l=wt,h=bn,wt=a.stateNode.containerInfo,bn=!0,pr(t,n,a),wt=l,bn=h;break;case 0:case 11:case 14:case 15:Jr(2,a,n),Bt||Jr(4,a,n),pr(t,n,a);break;case 1:Bt||(Hs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P0(a,n,l)),pr(t,n,a);break;case 21:pr(t,n,a);break;case 22:Bt=(l=Bt)||a.memoizedState!==null,pr(t,n,a),Bt=l;break;default:pr(t,n,a)}}function Y0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hl(t)}catch(a){ut(n,n.return,a)}}}function K0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hl(t)}catch(a){ut(n,n.return,a)}}function d2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new q0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new q0),n;default:throw Error(i(435,t.tag))}}function Eu(t,n){var a=d2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=b2.bind(null,t,l);l.then(h,h)}})}function _n(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=n,T=x;e:for(;T!==null;){switch(T.tag){case 27:if(ai(T.type)){wt=T.stateNode,bn=!1;break e}break;case 5:wt=T.stateNode,bn=!1;break e;case 3:case 4:wt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(wt===null)throw Error(i(160));G0(m,x,h),wt=null,bn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Q0(n,t),n=n.sibling}var ms=null;function Q0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(n,t),wn(t),l&4&&(Jr(3,t,t.return),wo(3,t),Jr(5,t,t.return));break;case 1:_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),l&64&&gr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ms;if(_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Cs]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),rn(m,l,a),m[Ot]=t,Vt(m),l=m;break e;case"link":var x=Qy("link","href",h).get(l+(a.href||""));if(x){for(var T=0;T<x.length;T++)if(m=x[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(T,1);break t}}m=h.createElement(l),rn(m,l,a),h.head.appendChild(m);break;case"meta":if(x=Qy("meta","content",h).get(l+(a.content||""))){for(T=0;T<x.length;T++)if(m=x[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(T,1);break t}}m=h.createElement(l),rn(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ot]=t,Vt(m),l=m}t.stateNode=l}else $y(h,t.type,t.stateNode);else t.stateNode=Ky(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?$y(h,t.type,t.stateNode):Ky(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),t.flags&32){h=t.stateNode;try{xn(h,"")}catch(Ne){ut(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(vf=!0);break;case 6:if(_n(n,t),wn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){ut(t,t.return,Ne)}}break;case 3:if(zu=null,h=ms,ms=Pu(n.containerInfo),_n(n,t),ms=h,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(n.containerInfo)}catch(Ne){ut(t,t.return,Ne)}vf&&(vf=!1,$0(t));break;case 4:l=ms,ms=Pu(t.stateNode.containerInfo),_n(n,t),wn(t),ms=l;break;case 12:_n(n,t),wn(t);break;case 31:_n(n,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Eu(t,l)));break;case 13:_n(n,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nu=Qt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Eu(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,H=gr,Z=Bt;if(gr=H||h,Bt=Z||D,_n(n,t),Bt=Z,gr=H,wn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||gr||Bt||ca(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=D.stateNode;var ie=D.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Ne){ut(D,D.return,Ne)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Ne){ut(D,D.return,Ne)}}}else if(n.tag===18){if(a===null){D=n;try{var Q=D.stateNode;h?Py(Q,!0):Py(D.stateNode,!1)}catch(Ne){ut(D,D.return,Ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Eu(t,a))));break;case 19:_n(n,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Eu(t,l)));break;case 30:break;case 21:break;default:_n(n,t),wn(t)}}function wn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(z0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=pf(t);Tu(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(xn(x,""),a.flags&=-33);var T=pf(t);Tu(t,T,x);break;case 3:case 4:var D=a.stateNode.containerInfo,H=pf(t);yf(t,H,D);break;default:throw Error(i(161))}}catch(Z){ut(t,t.return,Z)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function $0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;$0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function yr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)H0(t,n.alternate,n),n=n.sibling}function ca(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Jr(4,n,n.return),ca(n);break;case 1:Hs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&P0(n,n.return,a),ca(n);break;case 27:ko(n.stateNode);case 26:case 5:Hs(n,n.return),ca(n);break;case 22:n.memoizedState===null&&ca(n);break;case 30:ca(n);break;default:ca(n)}t=t.sibling}}function vr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:vr(h,m,a),wo(4,m);break;case 1:if(vr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ut(l,l.return,H)}if(l=m,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Np(D[h],T)}catch(H){ut(l,l.return,H)}}a&&x&64&&L0(m),To(m,m.return);break;case 27:B0(m);case 26:case 5:vr(h,m,a),a&&l===null&&x&4&&U0(m),To(m,m.return);break;case 12:vr(h,m,a);break;case 31:vr(h,m,a),a&&x&4&&Y0(h,m);break;case 13:vr(h,m,a),a&&x&4&&K0(h,m);break;case 22:m.memoizedState===null&&vr(h,m,a),To(m,m.return);break;case 30:break;default:vr(h,m,a)}n=n.sibling}}function xf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&oo(a))}function bf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t))}function gs(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X0(t,n,a,l),n=n.sibling}function X0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:gs(t,n,a,l),h&2048&&wo(9,n);break;case 1:gs(t,n,a,l);break;case 3:gs(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){gs(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,x=m.id,T=m.onPostCommit;typeof T=="function"&&T(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ut(n,n.return,D)}}else gs(t,n,a,l);break;case 31:gs(t,n,a,l);break;case 13:gs(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?gs(t,n,a,l):Eo(t,n):m._visibility&2?gs(t,n,a,l):(m._visibility|=2,tl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&xf(x,n);break;case 24:gs(t,n,a,l),h&2048&&bf(n.alternate,n);break;default:gs(t,n,a,l)}}function tl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,x=n,T=a,D=l,H=x.flags;switch(x.tag){case 0:case 11:case 15:tl(m,x,T,D,h),wo(8,x);break;case 23:break;case 22:var Z=x.stateNode;x.memoizedState!==null?Z._visibility&2?tl(m,x,T,D,h):Eo(m,x):(Z._visibility|=2,tl(m,x,T,D,h)),h&&H&2048&&xf(x.alternate,x);break;case 24:tl(m,x,T,D,h),h&&H&2048&&bf(x.alternate,x);break;default:tl(m,x,T,D,h)}n=n.sibling}}function Eo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:Eo(a,l),h&2048&&xf(l.alternate,l);break;case 24:Eo(a,l),h&2048&&bf(l.alternate,l);break;default:Eo(a,l)}n=n.sibling}}var So=8192;function nl(t,n,a){if(t.subtreeFlags&So)for(t=t.child;t!==null;)W0(t,n,a),t=t.sibling}function W0(t,n,a){switch(t.tag){case 26:nl(t,n,a),t.flags&So&&t.memoizedState!==null&&W2(a,ms,t.memoizedState,t.memoizedProps);break;case 5:nl(t,n,a);break;case 3:case 4:var l=ms;ms=Pu(t.stateNode.containerInfo),nl(t,n,a),ms=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=So,So=16777216,nl(t,n,a),So=l):nl(t,n,a));break;default:nl(t,n,a)}}function Z0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function No(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Wt=l,ey(l,t)}Z0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)J0(t),t=t.sibling}function J0(t){switch(t.tag){case 0:case 11:case 15:No(t),t.flags&2048&&Jr(9,t,t.return);break;case 3:No(t);break;case 12:No(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Su(t)):No(t);break;default:No(t)}}function Su(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Wt=l,ey(l,t)}Z0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Jr(8,n,n.return),Su(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Su(n));break;default:Su(n)}t=t.sibling}}function ey(t,n){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:Jr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:oo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Wt=l;else e:for(a=t;Wt!==null;){l=Wt;var h=l.sibling,m=l.return;if(F0(l),l===a){Wt=null;break e}if(h!==null){h.return=m,Wt=h;break e}Wt=m}}}var h2={getCacheForType:function(t){var n=nn(Pt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return nn(Pt).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,Qe=null,Xe=0,ct=0,Mn=null,ei=!1,sl=!1,_f=!1,xr=0,Nt=0,ti=0,ua=0,wf=0,On=0,rl=0,Ao=null,Tn=null,Tf=!1,Nu=0,ty=0,Au=1/0,ju=null,ni=null,Yt=0,si=null,il=null,br=0,Ef=0,Sf=null,ny=null,jo=0,Nf=null;function Vn(){return(at&2)!==0&&Xe!==0?Xe&-Xe:Y.T!==null?kf():Cc()}function sy(){if(On===0)if((Xe&536870912)===0||tt){var t=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),On=t}else On=536870912;return t=kn.current,t!==null&&(t.flags|=32),On}function En(t,n,a){(t===gt&&(ct===2||ct===9)||t.cancelPendingCommit!==null)&&(al(t,0),ri(t,Xe,On,!1)),Pi(t,a),((at&2)===0||t!==gt)&&(t===gt&&((at&2)===0&&(ua|=a),Nt===4&&ri(t,Xe,On,!1)),Fs(t))}function ry(t,n,a){if((at&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||is(t,n),h=l?p2(t,n):jf(t,n,!0),m=l;do{if(h===0){sl&&!l&&ri(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!m2(a)){h=jf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var T=t;h=Ao;var D=T.current.memoizedState.isDehydrated;if(D&&(al(T,x).flags|=256),x=jf(T,x,!1),x!==2){if(_f&&!D){T.errorRecoveryDisabledLanes|=m,ua|=m,h=4;break e}m=Tn,Tn=h,m!==null&&(Tn===null?Tn=m:Tn.push.apply(Tn,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){al(t,0),ri(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:ri(l,n,On,!ei);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Nu+300-Qt(),10<h)){if(ri(l,n,On,!ei),Ns(l,0,!0)!==0)break e;br=n,l.timeoutHandle=Oy(iy.bind(null,l,a,Tn,ju,Tf,n,On,ua,rl,ei,m,"Throttled",-0,0),h);break e}iy(l,a,Tn,ju,Tf,n,On,ua,rl,ei,m,null,-0,0)}}break}while(!0);Fs(t)}function iy(t,n,a,l,h,m,x,T,D,H,Z,ie,G,Q){if(t.timeoutHandle=-1,ie=n.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:os},W0(n,m,ie);var Ne=(m&62914560)===m?Nu-Qt():(m&4194048)===m?ty-Qt():0;if(Ne=Z2(ie,Ne),Ne!==null){br=m,t.cancelPendingCommit=Ne(fy.bind(null,t,n,m,a,l,h,x,T,D,Z,ie,null,G,Q)),ri(t,m,x,!H);return}}fy(t,n,m,a,l,h,x,T,D)}function m2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Rn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ri(t,n,a,l){n&=~wf,n&=~ua,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-At(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Ui(t,a,n)}function Cu(){return(at&6)===0?(Co(0),!1):!0}function Af(){if(Qe!==null){if(ct===0)var t=Qe.return;else t=Qe,cr=ta=null,qh(t),Xa=null,uo=0,t=Qe;for(;t!==null;)V0(t.alternate,t),t=t.return;Qe=null}}function al(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,M2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),br=0,Af(),gt=t,Qe=a=lr(t.current,null),Xe=n,ct=0,Mn=null,ei=!1,sl=is(t,n),_f=!1,rl=On=wf=ua=ti=Nt=0,Tn=Ao=null,Tf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-At(l),m=1<<h;n|=t[h],l&=~m}return xr=n,Xc(),a}function ay(t,n){Fe=null,Y.H=xo,n===$a||n===ru?(n=wp(),ct=3):n===Rh?(n=wp(),ct=4):ct=n===rf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mn=n,Qe===null&&(Nt=1,vu(t,Yn(n,t.current)))}function ly(){var t=kn.current;return t===null?!0:(Xe&4194048)===Xe?Xn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===Xn:!1}function oy(){var t=Y.H;return Y.H=xo,t===null?xo:t}function cy(){var t=Y.A;return Y.A=h2,t}function Ru(){Nt=4,ei||(Xe&4194048)!==Xe&&kn.current!==null||(sl=!0),(ti&134217727)===0&&(ua&134217727)===0||gt===null||ri(gt,Xe,On,!1)}function jf(t,n,a){var l=at;at|=2;var h=oy(),m=cy();(gt!==t||Xe!==n)&&(ju=null,al(t,n)),n=!1;var x=Nt;e:do try{if(ct!==0&&Qe!==null){var T=Qe,D=Mn;switch(ct){case 8:Af(),x=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(n=!0);var H=ct;if(ct=0,Mn=null,ll(t,T,D,H),a&&sl){x=0;break e}break;default:H=ct,ct=0,Mn=null,ll(t,T,D,H)}}g2(),x=Nt;break}catch(Z){ay(t,Z)}while(!0);return n&&t.shellSuspendCounter++,cr=ta=null,at=l,Y.H=h,Y.A=m,Qe===null&&(gt=null,Xe=0,Xc()),x}function g2(){for(;Qe!==null;)uy(Qe)}function p2(t,n){var a=at;at|=2;var l=oy(),h=cy();gt!==t||Xe!==n?(ju=null,Au=Qt()+500,al(t,n)):sl=is(t,n);e:do try{if(ct!==0&&Qe!==null){n=Qe;var m=Mn;t:switch(ct){case 1:ct=0,Mn=null,ll(t,n,m,1);break;case 2:case 9:if(bp(m)){ct=0,Mn=null,dy(n);break}n=function(){ct!==2&&ct!==9||gt!==t||(ct=7),Fs(t)},m.then(n,n);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:bp(m)?(ct=0,Mn=null,dy(n)):(ct=0,Mn=null,ll(t,n,m,7));break;case 5:var x=null;switch(Qe.tag){case 26:x=Qe.memoizedState;case 5:case 27:var T=Qe;if(x?Xy(x):T.stateNode.complete){ct=0,Mn=null;var D=T.sibling;if(D!==null)Qe=D;else{var H=T.return;H!==null?(Qe=H,Iu(H)):Qe=null}break t}}ct=0,Mn=null,ll(t,n,m,5);break;case 6:ct=0,Mn=null,ll(t,n,m,6);break;case 8:Af(),Nt=6;break e;default:throw Error(i(462))}}y2();break}catch(Z){ay(t,Z)}while(!0);return cr=ta=null,Y.H=l,Y.A=h,at=a,Qe!==null?0:(gt=null,Xe=0,Xc(),Nt)}function y2(){for(;Qe!==null&&!Pl();)uy(Qe)}function uy(t){var n=M0(t.alternate,t,xr);t.memoizedProps=t.pendingProps,n===null?Iu(t):Qe=n}function dy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=j0(a,n,n.pendingProps,n.type,void 0,Xe);break;case 11:n=j0(a,n,n.pendingProps,n.type.render,n.ref,Xe);break;case 5:qh(n);default:V0(a,n),n=Qe=cp(n,xr),n=M0(a,n,xr)}t.memoizedProps=t.pendingProps,n===null?Iu(t):Qe=n}function ll(t,n,a,l){cr=ta=null,qh(n),Xa=null,uo=0;var h=n.return;try{if(i2(t,h,n,a,Xe)){Nt=1,vu(t,Yn(a,t.current)),Qe=null;return}}catch(m){if(h!==null)throw Qe=h,m;Nt=1,vu(t,Yn(a,t.current)),Qe=null;return}n.flags&32768?(tt||l===1?t=!0:sl||(Xe&536870912)!==0?t=!1:(ei=t=!0,(l===2||l===9||l===3||l===6)&&(l=kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),hy(n,t)):Iu(n)}function Iu(t){var n=t;do{if((n.flags&32768)!==0){hy(n,ei);return}t=n.return;var a=o2(n.alternate,n,xr);if(a!==null){Qe=a;return}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=t}while(n!==null);Nt===0&&(Nt=5)}function hy(t,n){do{var a=c2(t.alternate,t);if(a!==null){a.flags&=32767,Qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=a}while(t!==null);Nt=6,Qe=null}function fy(t,n,a,l,h,m,x,T,D){t.cancelPendingCommit=null;do ku();while(Yt!==0);if((at&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=gh,ah(t,a,m,x,T,D),t===gt&&(Qe=gt=null,Xe=0),il=n,si=t,br=a,Ef=m,Sf=h,ny=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_2(Ts,function(){return vy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,h=ge.p,ge.p=2,x=at,at|=4;try{u2(t,n,a)}finally{at=x,ge.p=h,Y.T=l}}Yt=1,my(),gy(),py()}}function my(){if(Yt===1){Yt=0;var t=si,n=il,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=ge.p;ge.p=2;var h=at;at|=4;try{Q0(n,t);var m=zf,x=ep(t.containerInfo),T=m.focusedElem,D=m.selectionRange;if(x!==T&&T&&T.ownerDocument&&Jg(T.ownerDocument.documentElement,T)){if(D!==null&&uh(T)){var H=D.start,Z=D.end;if(Z===void 0&&(Z=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(Z,T.value.length);else{var ie=T.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var Q=G.getSelection(),Ne=T.textContent.length,De=Math.min(D.start,Ne),mt=D.end===void 0?De:Math.min(D.end,Ne);!Q.extend&&De>mt&&(x=mt,mt=De,De=x);var P=Zg(T,De),O=Zg(T,mt);if(P&&O&&(Q.rangeCount!==1||Q.anchorNode!==P.node||Q.anchorOffset!==P.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var q=ie.createRange();q.setStart(P.node,P.offset),Q.removeAllRanges(),De>mt?(Q.addRange(q),Q.extend(O.node,O.offset)):(q.setEnd(O.node,O.offset),Q.addRange(q))}}}}for(ie=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ne=ie[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Fu=!!Uf,zf=Uf=null}finally{at=h,ge.p=l,Y.T=a}}t.current=n,Yt=2}}function gy(){if(Yt===2){Yt=0;var t=si,n=il,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=ge.p;ge.p=2;var h=at;at|=4;try{H0(t,n.alternate,n)}finally{at=h,ge.p=l,Y.T=a}}Yt=3}}function py(){if(Yt===4||Yt===3){Yt=0,Vi();var t=si,n=il,a=br,l=ny;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Yt=5:(Yt=0,il=si=null,yy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ni=null),sr(a),n=n.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(rs,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Y.T,h=ge.p,ge.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var T=l[x];m(T.value,{componentStack:T.stack})}}finally{Y.T=n,ge.p=h}}(br&3)!==0&&ku(),Fs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Nf?jo++:(jo=0,Nf=t):jo=0,Co(0)}}function yy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oo(n)))}function ku(){return my(),gy(),py(),vy()}function vy(){if(Yt!==5)return!1;var t=si,n=Ef;Ef=0;var a=sr(br),l=Y.T,h=ge.p;try{ge.p=32>a?32:a,Y.T=null,a=Sf,Sf=null;var m=si,x=br;if(Yt=0,il=si=null,br=0,(at&6)!==0)throw Error(i(331));var T=at;if(at|=4,J0(m.current),X0(m,m.current,x,a),at=T,Co(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(rs,m)}catch{}return!0}finally{ge.p=h,Y.T=l,yy(t,n)}}function xy(t,n,a){n=Yn(a,n),n=sf(t.stateNode,n,2),t=Xr(t,n,2),t!==null&&(Pi(t,2),Fs(t))}function ut(t,n,a){if(t.tag===3)xy(t,t,a);else for(;n!==null;){if(n.tag===3){xy(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ni===null||!ni.has(l))){t=Yn(a,t),a=b0(2),l=Xr(n,a,2),l!==null&&(_0(a,l,n,t),Pi(l,2),Fs(l));break}}n=n.return}}function Cf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new f2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(_f=!0,h.add(a),t=v2.bind(null,t,n,a),n.then(t,t))}function v2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,gt===t&&(Xe&a)===a&&(Nt===4||Nt===3&&(Xe&62914560)===Xe&&300>Qt()-Nu?(at&2)===0&&al(t,0):wf|=a,rl===Xe&&(rl=0)),Fs(t)}function by(t,n){n===0&&(n=jc()),t=Zi(t,n),t!==null&&(Pi(t,n),Fs(t))}function x2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),by(t,a)}function b2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),by(t,a)}function _2(t,n){return pt(t,n)}var Du=null,ol=null,Rf=!1,Mu=!1,If=!1,ii=0;function Fs(t){t!==ol&&t.next===null&&(ol===null?Du=ol=t:ol=ol.next=t),Mu=!0,Rf||(Rf=!0,T2())}function Co(t,n){if(!If&&Mu){If=!0;do for(var a=!1,l=Du;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-At(42|t)+1)-1,m&=h&~(x&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ey(l,m))}else m=Xe,m=Ns(l,l===gt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||is(l,m)||(a=!0,Ey(l,m));l=l.next}while(a);If=!1}}function w2(){_y()}function _y(){Mu=Rf=!1;var t=0;ii!==0&&D2()&&(t=ii);for(var n=Qt(),a=null,l=Du;l!==null;){var h=l.next,m=wy(l,n);m===0?(l.next=null,a===null?Du=h:a.next=h,h===null&&(ol=a)):(a=l,(t!==0||(m&3)!==0)&&(Mu=!0)),l=h}Yt!==0&&Yt!==5||Co(t),ii!==0&&(ii=0)}function wy(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-At(m),T=1<<x,D=h[x];D===-1?((T&a)===0||(T&l)!==0)&&(h[x]=ih(T,n)):D<=n&&(t.expiredLanes|=T),m&=~T}if(n=gt,a=Xe,a=Ns(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ct===2||ct===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&mn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||is(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&mn(l),sr(a)){case 2:case 8:a=Mr;break;case 32:a=Ts;break;case 268435456:a=Sa;break;default:a=Ts}return l=Ty.bind(null,t),a=pt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&mn(l),t.callbackPriority=2,t.callbackNode=null,2}function Ty(t,n){if(Yt!==0&&Yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=Xe;return l=Ns(t,t===gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ry(t,l,n),wy(t,Qt()),t.callbackNode!=null&&t.callbackNode===a?Ty.bind(null,t):null)}function Ey(t,n){if(ku())return null;ry(t,n,!0)}function T2(){O2(function(){(at&6)!==0?pt(nr,w2):_y()})}function kf(){if(ii===0){var t=Ka;t===0&&(t=Es,Es<<=1,(Es&261888)===0&&(Es=256)),ii=t}return ii}function Sy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ka(""+t)}function Ny(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function E2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Sy((h[$t]||null).action),x=l.submitter;x&&(n=(n=x[$t]||null)?Sy(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var T=new Ls("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ii!==0){var D=x?Ny(h,x):new FormData(h);Wh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=x?Ny(h,x):new FormData(h),Wh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],S2=Mf.toLowerCase(),N2=Mf[0].toUpperCase()+Mf.slice(1);fs(S2,"on"+N2)}fs(sp,"onAnimationEnd"),fs(rp,"onAnimationIteration"),fs(ip,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(q1,"onTransitionRun"),fs(H1,"onTransitionStart"),fs(F1,"onTransitionCancel"),fs(ap,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function Ay(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var T=l[x],D=T.instance,H=T.currentTarget;if(T=T.listener,D!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=H;try{m(h)}catch(Z){$c(Z)}h.currentTarget=null,m=D}else for(x=0;x<l.length;x++){if(T=l[x],D=T.instance,H=T.currentTarget,T=T.listener,D!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=H;try{m(h)}catch(Z){$c(Z)}h.currentTarget=null,m=D}}}}function $e(t,n){var a=n[Aa];a===void 0&&(a=n[Aa]=new Set);var l=t+"__bubble";a.has(l)||(jy(n,t,2,!1),a.add(l))}function Of(t,n,a){var l=0;n&&(l|=4),jy(a,t,l,n)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Ou]){t[Ou]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(A2.has(a)||Of(a,!1,t),Of(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ou]||(n[Ou]=!0,Of("selectionchange",!1,n))}}function jy(t,n,a,l){switch(sv(n)){case 2:var h=tw;break;case 8:h=nw;break;default:h=Wf}a=h.bind(null,n,a,t),h=void 0,!Fi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Lf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var T=l.stateNode.containerInfo;if(T===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;T!==null;){if(x=Rs(T),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=m=x;continue e}T=T.parentNode}}l=l.return}zr(function(){var H=m,Z=qn(a),ie=[];e:{var G=lp.get(t);if(G!==void 0){var Q=Ls,Ne=t;switch(t){case"keypress":if(Yi(a)===0)break e;case"keydown":case"keyup":Q=Yc;break;case"focusin":Ne="focus",Q=Qi;break;case"focusout":Ne="blur",Q=Qi;break;case"beforeblur":case"afterblur":Q=Qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case sp:case rp:case ip:Q=Uc;break;case ap:Q=S;break;case"scroll":case"scrollend":Q=Jl;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ar;break;case"toggle":case"beforetoggle":Q=He}var De=(n&4)!==0,mt=!De&&(t==="scroll"||t==="scrollend"),P=De?G!==null?G+"Capture":null:G;De=[];for(var O=H,q;O!==null;){var ne=O;if(q=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||q===null||P===null||(ne=cs(O,P),ne!=null&&De.push(Io(O,ne,q))),mt)break;O=O.return}0<De.length&&(G=new Q(G,Ne,null,a,Z),ie.push({event:G,listeners:De}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==Xl&&(Ne=a.relatedTarget||a.fromElement)&&(Rs(Ne)||Ne[js]))break e;if((Q||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(Ne=a.relatedTarget||a.toElement,Q=H,Ne=Ne?Rs(Ne):null,Ne!==null&&(mt=d(Ne),De=Ne.tag,Ne!==mt||De!==5&&De!==27&&De!==6)&&(Ne=null)):(Q=null,Ne=H),Q!==Ne)){if(De=eo,ne="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(De=ar,ne="onPointerLeave",P="onPointerEnter",O="pointer"),mt=Q==null?G:jn(Q),q=Ne==null?G:jn(Ne),G=new De(ne,O+"leave",Q,a,Z),G.target=mt,G.relatedTarget=q,ne=null,Rs(Z)===H&&(De=new De(P,O+"enter",Ne,a,Z),De.target=q,De.relatedTarget=mt,ne=De),mt=ne,Q&&Ne)t:{for(De=j2,P=Q,O=Ne,q=0,ne=P;ne;ne=De(ne))q++;ne=0;for(var Re=O;Re;Re=De(Re))ne++;for(;0<q-ne;)P=De(P),q--;for(;0<ne-q;)O=De(O),ne--;for(;q--;){if(P===O||O!==null&&P===O.alternate){De=P;break t}P=De(P),O=De(O)}De=null}else De=null;Q!==null&&Cy(ie,G,Q,De,!1),Ne!==null&&mt!==null&&Cy(ie,mt,Ne,De,!0)}}e:{if(G=H?jn(H):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var st=Yg;else if(Fg(G))if(Kg)st=U1;else{st=L1;var Ae=V1}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Ia(H.elementType)&&(st=Yg):st=P1;if(st&&(st=st(t,H))){Gg(ie,st,a,Z);break e}Ae&&Ae(t,G,H),t==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Kl(G,"number",G.value)}switch(Ae=H?jn(H):window,t){case"focusin":(Fg(Ae)||Ae.contentEditable==="true")&&(Ua=Ae,dh=H,io=null);break;case"focusout":io=dh=Ua=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,tp(ie,a,Z);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":tp(ie,a,Z)}var Ge;if(it)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Pa?$i(t,a)&&(We="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(zs&&a.locale!=="ko"&&(Pa||We!=="onCompositionStart"?We==="onCompositionEnd"&&Pa&&(Ge=Zl()):(Vs=Z,Wl="value"in Vs?Vs.value:Vs.textContent,Pa=!0)),Ae=Vu(H,We),0<Ae.length&&(We=new Us(We,t,null,a,Z),ie.push({event:We,listeners:Ae}),Ge?We.data=Ge:(Ge=La(a),Ge!==null&&(We.data=Ge)))),(Ge=Fn?k1(t,a):D1(t,a))&&(We=Vu(H,"onBeforeInput"),0<We.length&&(Ae=new Us("onBeforeInput","beforeinput",null,a,Z),ie.push({event:Ae,listeners:We}),Ae.data=Ge)),E2(ie,t,H,a,Z)}Ay(ie,n)})}function Io(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Vu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=cs(t,a),h!=null&&l.unshift(Io(t,h,m)),h=cs(t,n),h!=null&&l.push(Io(t,h,m))),t.tag===3)return l;t=t.return}return[]}function j2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Cy(t,n,a,l,h){for(var m=n._reactName,x=[];a!==null&&a!==l;){var T=a,D=T.alternate,H=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||H===null||(D=H,h?(H=cs(a,m),H!=null&&x.unshift(Io(a,H,D))):h||(H=cs(a,m),H!=null&&x.push(Io(a,H,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var C2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(C2,`
`).replace(R2,"")}function Iy(t,n){return n=Ry(n),Ry(t)===n}function ft(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||xn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&xn(t,""+l);break;case"className":Cn(t,"class",l);break;case"tabIndex":Cn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(t,a,l);break;case"style":$l(t,l,m);break;case"data":if(n!=="object"){Cn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&ft(t,n,"name",h.name,h,null),ft(t,n,"formEncType",h.formEncType,h,null),ft(t,n,"formMethod",h.formMethod,h,null),ft(t,n,"formTarget",h.formTarget,h,null)):(ft(t,n,"encType",h.encType,h,null),ft(t,n,"method",h.method,h,null),ft(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=os);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":$e("beforetoggle",t),$e("toggle",t),Ca(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ca(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,Ca(t,a,l))}}function Pf(t,n,a,l,h,m){switch(a){case"style":$l(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?xn(t,l):(typeof l=="number"||typeof l=="bigint")&&xn(t,""+l);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"onClick":l!=null&&(t.onclick=os);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ca(t,a,l)}}}function rn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(t,n,m,x,a,null)}}h&&ft(t,n,"srcSet",a.srcSet,a,null),l&&ft(t,n,"src",a.src,a,null);return;case"input":$e("invalid",t);var T=m=x=h=null,D=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":x=Z;break;case"checked":D=Z;break;case"defaultChecked":H=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,n));break;default:ft(t,n,l,Z,a,null)}}Dc(t,m,T,D,H,x,h,!1);return;case"select":$e("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":m=T;break;case"defaultValue":x=T;break;case"multiple":l=T;default:ft(t,n,h,T,a,null)}n=m,a=x,t.multiple=!!l,n!=null?Vr(t,!!l,n,!1):a!=null&&Vr(t,!!l,a,!0);return;case"textarea":$e("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(T=a[x],T!=null))switch(x){case"value":l=T;break;case"defaultValue":h=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ft(t,n,x,T,a,null)}Lr(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(t,n,D,l,a,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(l=0;l<Ro.length;l++)$e(Ro[l],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(t,n,H,l,a,null)}return;default:if(Ia(n)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Pf(t,n,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ft(t,n,T,l,a,null))}function I2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,T=null,D=null,H=null,Z=null;for(Q in a){var ie=a[Q];if(a.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=ie;default:l.hasOwnProperty(Q)||ft(t,n,Q,null,l,ie)}}for(var G in l){var Q=l[G];if(ie=a[G],l.hasOwnProperty(G)&&(Q!=null||ie!=null))switch(G){case"type":m=Q;break;case"name":h=Q;break;case"checked":H=Q;break;case"defaultChecked":Z=Q;break;case"value":x=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,n));break;default:Q!==ie&&ft(t,n,G,Q,l,ie)}}Ra(t,x,T,D,H,Z,m,h);return;case"select":Q=x=T=G=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Q=D;default:l.hasOwnProperty(m)||ft(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":G=m;break;case"defaultValue":T=m;break;case"multiple":x=m;default:m!==D&&ft(t,n,h,m,l,D)}n=T,a=x,l=Q,G!=null?Vr(t,!!a,G,!1):!!l!=!!a&&(n!=null?Vr(t,!!a,n,!0):Vr(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ft(t,n,T,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":G=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&ft(t,n,x,h,l,m)}Mc(t,G,Q);return;case"option":for(var Ne in a)if(G=a[Ne],a.hasOwnProperty(Ne)&&G!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:ft(t,n,Ne,null,l,G)}for(D in l)if(G=l[D],Q=a[D],l.hasOwnProperty(D)&&G!==Q&&(G!=null||Q!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ft(t,n,D,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)G=a[De],a.hasOwnProperty(De)&&G!=null&&!l.hasOwnProperty(De)&&ft(t,n,De,null,l,G);for(H in l)if(G=l[H],Q=a[H],l.hasOwnProperty(H)&&G!==Q&&(G!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,n));break;default:ft(t,n,H,G,l,Q)}return;default:if(Ia(n)){for(var mt in a)G=a[mt],a.hasOwnProperty(mt)&&G!==void 0&&!l.hasOwnProperty(mt)&&Pf(t,n,mt,void 0,l,G);for(Z in l)G=l[Z],Q=a[Z],!l.hasOwnProperty(Z)||G===Q||G===void 0&&Q===void 0||Pf(t,n,Z,G,l,Q);return}}for(var P in a)G=a[P],a.hasOwnProperty(P)&&G!=null&&!l.hasOwnProperty(P)&&ft(t,n,P,null,l,G);for(ie in l)G=l[ie],Q=a[ie],!l.hasOwnProperty(ie)||G===Q||G==null&&Q==null||ft(t,n,ie,G,l,Q)}function ky(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,x=h.initiatorType,T=h.duration;if(m&&T&&ky(x)){for(x=0,T=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],H=D.startTime;if(H>T)break;var Z=D.transferSize,ie=D.initiatorType;Z&&ky(ie)&&(D=D.responseEnd,x+=Z*(D<T?1:(T-H)/(D-H)))}if(--l,n+=8*(m+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Uf=null,zf=null;function Lu(t){return t.nodeType===9?t:t.ownerDocument}function Dy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qf=null;function D2(){var t=window.event;return t&&t.type==="popstate"?t===qf?!1:(qf=t,!0):(qf=null,!1)}var Oy=typeof setTimeout=="function"?setTimeout:void 0,M2=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(V2)}:Oy;function V2(t){setTimeout(function(){throw t})}function ai(t){return t==="head"}function Ly(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),hl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ko(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ko(a);for(var m=a.firstChild;m;){var x=m.nextSibling,T=m.nodeName;m[Cs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&ko(t.ownerDocument.body);a=h}while(a);hl(n)}function Py(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Hf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hf(a),ja(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function L2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Cs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function P2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function Uy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Wn(t.nextSibling),t===null))return null;return t}function Ff(t){return t.data==="$?"||t.data==="$~"}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function U2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Yf=null;function zy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Wn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function By(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function qy(t,n,a){switch(n=Lu(a),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ko(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ja(t)}var Zn=new Map,Hy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _r=ge.d;ge.d={f:z2,r:B2,D:q2,C:H2,L:F2,m:G2,X:K2,S:Y2,M:Q2};function z2(){var t=_r.f(),n=Cu();return t||n}function B2(t){var n=Bn(t);n!==null&&n.tag===5&&n.type==="form"?a0(n):_r.r(t)}var cl=typeof document>"u"?null:document;function Fy(t,n,a){var l=cl;if(l&&typeof n=="string"&&n){var h=vn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Hy.has(h)||(Hy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),rn(n,"link",t),Vt(n),l.head.appendChild(n)))}}function q2(t){_r.D(t),Fy("dns-prefetch",t,null)}function H2(t,n){_r.C(t,n),Fy("preconnect",t,n)}function F2(t,n,a){_r.L(t,n,a);var l=cl;if(l&&t&&n){var h='link[rel="preload"][as="'+vn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vn(a.imageSizes)+'"]')):h+='[href="'+vn(t)+'"]';var m=h;switch(n){case"style":m=ul(t);break;case"script":m=dl(t)}Zn.has(m)||(t=E({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Zn.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Do(m))||n==="script"&&l.querySelector(Mo(m))||(n=l.createElement("link"),rn(n,"link",t),Vt(n),l.head.appendChild(n)))}}function G2(t,n){_r.m(t,n);var a=cl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+vn(l)+'"][href="'+vn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(t)}if(!Zn.has(m)&&(t=E({rel:"modulepreload",href:t},n),Zn.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mo(m)))return}l=a.createElement("link"),rn(l,"link",t),Vt(l),a.head.appendChild(l)}}}function Y2(t,n,a){_r.S(t,n,a);var l=cl;if(l&&t){var h=Is(l).hoistableStyles,m=ul(t);n=n||"default";var x=h.get(m);if(!x){var T={loading:0,preload:null};if(x=l.querySelector(Do(m)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Zn.get(m))&&Kf(t,a);var D=x=l.createElement("link");Vt(D),rn(D,"link",t),D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Uu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:T},h.set(m,x)}}}function K2(t,n){_r.X(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=E({src:t,async:!0},n),(n=Zn.get(h))&&Qf(t,n),m=a.createElement("script"),Vt(m),rn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Q2(t,n){_r.M(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=E({src:t,async:!0,type:"module"},n),(n=Zn.get(h))&&Qf(t,n),m=a.createElement("script"),Vt(m),rn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Gy(t,n,a,l){var h=(h=se.current)?Pu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ul(a.href),a=Is(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ul(a.href);var m=Is(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Do(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),m||$2(h,t,a,x.state))),n&&l===null)throw Error(i(528,""));return x}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(a),a=Is(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ul(t){return'href="'+vn(t)+'"'}function Do(t){return'link[rel="stylesheet"]['+t+"]"}function Yy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function $2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),rn(n,"link",a),Vt(n),t.head.appendChild(n))}function dl(t){return'[src="'+vn(t)+'"]'}function Mo(t){return"script[async]"+t}function Ky(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+vn(a.href)+'"]');if(l)return n.instance=l,Vt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Vt(l),rn(l,"style",h),Uu(l,a.precedence,t),n.instance=l;case"stylesheet":h=ul(a.href);var m=t.querySelector(Do(h));if(m)return n.state.loading|=4,n.instance=m,Vt(m),m;l=Yy(a),(h=Zn.get(h))&&Kf(l,h),m=(t.ownerDocument||t).createElement("link"),Vt(m);var x=m;return x._p=new Promise(function(T,D){x.onload=T,x.onerror=D}),rn(m,"link",l),n.state.loading|=4,Uu(m,a.precedence,t),n.instance=m;case"script":return m=dl(a.src),(h=t.querySelector(Mo(m)))?(n.instance=h,Vt(h),h):(l=a,(h=Zn.get(m))&&(l=E({},a),Qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Vt(h),rn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uu(l,a.precedence,t));return n.instance}function Uu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var T=l[x];if(T.dataset.precedence===n)m=T;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var zu=null;function Qy(t,n,a){if(zu===null){var l=new Map,h=zu=new Map;h.set(a,l)}else h=zu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Cs]||m[Ot]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=t+x;var T=l.get(x);T?T.push(m):l.set(x,[m])}}return l}function $y(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function X2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Xy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function W2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ul(l.href),m=n.querySelector(Do(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Bu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Vt(m);return}m=n.ownerDocument||n,l=Yy(l),(h=Zn.get(h))&&Kf(l,h),m=m.createElement("link"),Vt(m);var x=m;x._p=new Promise(function(T,D){x.onload=T,x.onerror=D}),rn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Bu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var $f=0;function Z2(t,n){return t.stylesheets&&t.count===0&&Hu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&$f===0&&($f=62500*k2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>$f?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qu=null;function Hu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qu=new Map,n.forEach(J2,t),qu=null,Bu.call(t))}function J2(t,n){if(!(n.state.loading&4)){var a=qu.get(t);if(a)var l=a.get(null);else{a=new Map,qu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=Bu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Oo={$$typeof:me,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function ew(t,n,a,l,h,m,x,T,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Wy(t,n,a,l,h,m,x,T,D,H,Z,ie){return t=new ew(t,n,a,x,D,H,Z,ie,T),n=1,m===!0&&(n|=24),m=In(3,null,null,n),t.current=m,m.stateNode=t,n=Ah(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Ih(m),t}function Zy(t){return t?(t=qa,t):qa}function Jy(t,n,a,l,h,m){h=Zy(h),l.context===null?l.context=h:l.pendingContext=h,l=$r(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Xr(t,l,n),a!==null&&(En(a,t,n),fo(a,t,n))}function ev(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Xf(t,n){ev(t,n),(t=t.alternate)&&ev(t,n)}function tv(t){if(t.tag===13||t.tag===31){var n=Zi(t,67108864);n!==null&&En(n,t,67108864),Xf(t,67108864)}}function nv(t){if(t.tag===13||t.tag===31){var n=Vn();n=zi(n);var a=Zi(t,n);a!==null&&En(a,t,n),Xf(t,n)}}var Fu=!0;function tw(t,n,a,l){var h=Y.T;Y.T=null;var m=ge.p;try{ge.p=2,Wf(t,n,a,l)}finally{ge.p=m,Y.T=h}}function nw(t,n,a,l){var h=Y.T;Y.T=null;var m=ge.p;try{ge.p=8,Wf(t,n,a,l)}finally{ge.p=m,Y.T=h}}function Wf(t,n,a,l){if(Fu){var h=Zf(l);if(h===null)Lf(t,n,l,Gu,a),rv(t,l);else if(rw(h,t,n,a,l))l.stopPropagation();else if(rv(t,l),n&4&&-1<sw.indexOf(t)){for(;h!==null;){var m=Bn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Ss(m.pendingLanes);if(x!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;x;){var D=1<<31-At(x);T.entanglements[1]|=D,x&=~D}Fs(m),(at&6)===0&&(Au=Qt()+500,Co(0))}}break;case 31:case 13:T=Zi(m,2),T!==null&&En(T,m,2),Cu(),Xf(m,2)}if(m=Zf(l),m===null&&Lf(t,n,l,Gu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Lf(t,n,l,null,a)}}function Zf(t){return t=qn(t),Jf(t)}var Gu=null;function Jf(t){if(Gu=null,t=Rs(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Gu=t,null}function sv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tr()){case nr:return 2;case Mr:return 8;case Ts:case Un:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var em=!1,li=null,oi=null,ci=null,Vo=new Map,Lo=new Map,ui=[],sw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rv(t,n){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function Po(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=Bn(n),n!==null&&tv(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function rw(t,n,a,l,h){switch(n){case"focusin":return li=Po(li,t,n,a,l,h),!0;case"dragenter":return oi=Po(oi,t,n,a,l,h),!0;case"mouseover":return ci=Po(ci,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Vo.set(m,Po(Vo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Lo.set(m,Po(Lo.get(m)||null,t,n,a,l,h)),!0}return!1}function iv(t){var n=Rs(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,as(t.priority,function(){nv(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,as(t.priority,function(){nv(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Zf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xl=l,a.target.dispatchEvent(l),Xl=null}else return n=Bn(a),n!==null&&tv(n),t.blockedOn=a,!1;n.shift()}return!0}function av(t,n,a){Yu(t)&&a.delete(n)}function iw(){em=!1,li!==null&&Yu(li)&&(li=null),oi!==null&&Yu(oi)&&(oi=null),ci!==null&&Yu(ci)&&(ci=null),Vo.forEach(av),Lo.forEach(av)}function Ku(t,n){t.blockedOn===n&&(t.blockedOn=null,em||(em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,iw)))}var Qu=null;function lv(t){Qu!==t&&(Qu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Jf(l||a)===null)continue;break}var m=Bn(a);m!==null&&(t.splice(n,3),n-=3,Wh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function hl(t){function n(D){return Ku(D,t)}li!==null&&Ku(li,t),oi!==null&&Ku(oi,t),ci!==null&&Ku(ci,t),Vo.forEach(n),Lo.forEach(n);for(var a=0;a<ui.length;a++){var l=ui[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ui.length&&(a=ui[0],a.blockedOn===null);)iv(a),a.blockedOn===null&&ui.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[$t]||null;if(typeof m=="function")x||lv(a);else if(x){var T=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[$t]||null)T=x.formAction;else if(Jf(h)!==null)continue}else T=x.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),lv(a)}}}function ov(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function tm(t){this._internalRoot=t}$u.prototype.render=tm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Vn();Jy(a,l,t,n,null,null)},$u.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Jy(t.current,2,null,t,null,null),Cu(),n[js]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var n=Cc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<ui.length&&n!==0&&n<ui[a].priority;a++);ui.splice(a,0,t),a===0&&iv(t)}};var cv=e.version;if(cv!=="19.2.0")throw Error(i(527,cv,"19.2.0"));ge.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var aw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{rs=Xu.inject(aw),Jt=Xu}catch{}}return zo.createRoot=function(t,n){if(!o(t))throw Error(i(299));var a=!1,l="",h=p0,m=y0,x=v0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Wy(t,1,!1,null,null,a,l,null,h,m,x,ov),t[js]=n.current,Vf(t),new tm(n)},zo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=p0,x=y0,T=v0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Wy(t,1,!0,n,a??null,l,h,D,m,x,T,ov),n.context=Zy(null),a=n.current,l=Vn(),l=zi(l),h=$r(l),h.callback=null,Xr(a,h,l),a=l,n.current.lanes=a,Pi(n,a),Fs(n),t[js]=n.current,Vf(t),new $u(n)},zo.version="19.2.0",zo}var xv;function yw(){if(xv)return rm.exports;xv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=pw(),rm.exports}var vw=yw();const xw=()=>{};var bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=function(r){const e=[];let s=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},bw=function(r){const e=[];let s=0,i=0;for(;s<r.length;){const o=r[s++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const d=r[s++];e[i++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=r[s++],f=r[s++],p=r[s++],v=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const d=r[s++],f=r[s++];e[i++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const d=r[o],f=o+1<r.length,p=f?r[o+1]:0,v=o+2<r.length,y=v?r[o+2]:0,_=d>>2,E=(d&3)<<4|p>>4;let A=(p&15)<<2|y>>6,z=y&63;v||(z=64,f||(A=64)),i.push(s[_],s[E],s[A],s[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):bw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const d=s[r.charAt(o++)],p=o<r.length?s[r.charAt(o)]:0;++o;const y=o<r.length?s[r.charAt(o)]:64;++o;const E=o<r.length?s[r.charAt(o)]:64;if(++o,d==null||p==null||y==null||E==null)throw new _w;const A=d<<2|p>>4;if(i.push(A),y!==64){const z=p<<4&240|y>>2;if(i.push(z),E!==64){const X=y<<6&192|E;i.push(X)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ww=function(r){const e=nb(r);return sb.encodeByteArray(e,!0)},pd=function(r){return ww(r).replace(/\./g,"")},rb=function(r){try{return sb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=()=>Tw().__FIREBASE_DEFAULTS__,Sw=()=>{if(typeof process>"u"||typeof bv>"u")return;const r=bv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Nw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rb(r[1]);return e&&JSON.parse(e)},Vd=()=>{try{return xw()||Ew()||Sw()||Nw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ib=r=>Vd()?.emulatorHosts?.[r],Aw=r=>{const e=ib(r);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),i]:[e.substring(0,s),i]},ab=()=>Vd()?.config,lb=r=>Vd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ob(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[pd(JSON.stringify(s)),pd(JSON.stringify(f)),""].join(".")}const Ko={};function Rw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?r.emulator.push(e):r.prod.push(e);return r}function Iw(r){let e=document.getElementById(r),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),s=!0),{created:s,element:e}}let _v=!1;function cb(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ko[r]===e||Ko[r]||_v)return;Ko[r]=e;function s(A){return`__firebase__banner__${A}`}const i="__firebase__banner",d=Rw().prod.length>0;function f(){const A=document.getElementById(i);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,z){A.setAttribute("width","24"),A.setAttribute("id",z),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{_v=!0,f()},A}function _(A,z){A.setAttribute("id",z),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Iw(i),z=s("text"),X=document.getElementById(z)||document.createElement("span"),$=s("learnmore"),U=document.getElementById($)||document.createElement("a"),ue=s("preprendIcon"),W=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const me=A.element;p(me),_(U,$);const ae=y();v(W,ue),me.append(W,X,U,ae),document.body.appendChild(me)}d?(X.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Dw(){const r=Vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ow(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lw(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Pw(){return!Dw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uw(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((r,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="FirebaseError";class Ir extends Error{constructor(e,s,i){super(s),this.code=e,this.customData=i,this.name=Bw,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,s,i){this.service=e,this.serviceName=s,this.errors=i}create(e,...s){const i=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?qw(d,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Ir(o,p,i)}}function qw(r,e){return r.replace(Hw,(s,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Hw=/\{\$([^}]+)}/g;function Fw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ya(r,e){if(r===e)return!0;const s=Object.keys(r),i=Object.keys(e);for(const o of s){if(!i.includes(o))return!1;const d=r[o],f=e[o];if(wv(d)&&wv(f)){if(!ya(d,f))return!1}else if(d!==f)return!1}for(const o of i)if(!s.includes(o))return!1;return!0}function wv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r){const e=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Bo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,d]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function qo(r){const e=r.indexOf("?");if(!e)return"";const s=r.indexOf("#",e);return r.substring(e,s>0?s:void 0)}function Gw(r,e){const s=new Yw(r,e);return s.subscribe.bind(s)}class Yw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,i){let o;if(e===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");Kw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:i},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kw(r,e){if(typeof r!="object"||r===null)return!1;for(const s of e)if(s in r&&typeof r[s]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r){return r&&r._delegate?r._delegate:r}class va{constructor(e,s,i){this.name=e,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const i=new jw;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xw(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});i.resolve(d)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);i===p&&f.resolve(o)}return o}onInit(e,s){const i=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const d=this.instances.get(i);return d&&e(d,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const i=this.onInitCallbacks.get(s);if(i)for(const o of i)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$w(e),options:s}),this.instances.set(e,i),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $w(r){return r===ha?void 0:r}function Xw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Qw(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const Zw={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},Jw=Ze.INFO,eT={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},tT=(r,e,...s)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=eT[e];if(o)console[o](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=Jw,this._logHandler=tT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const nT=(r,e)=>e.some(s=>r instanceof s);let Tv,Ev;function sT(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rT(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,Em=new WeakMap,db=new WeakMap,cm=new WeakMap,Jm=new WeakMap;function iT(r){const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{s(xi(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&ub.set(s,r)}).catch(()=>{}),Jm.set(e,r),e}function aT(r){if(Em.has(r))return;const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});Em.set(r,e)}let Sm={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return Em.get(r);if(e==="objectStoreNames")return r.objectStoreNames||db.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return xi(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lT(r){Sm=r(Sm)}function oT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const i=r.call(um(this),e,...s);return db.set(i,e.sort?e.sort():[e]),xi(i)}:rT().includes(r)?function(...e){return r.apply(um(this),e),xi(ub.get(this))}:function(...e){return xi(r.apply(um(this),e))}}function cT(r){return typeof r=="function"?oT(r):(r instanceof IDBTransaction&&aT(r),nT(r,sT())?new Proxy(r,Sm):r)}function xi(r){if(r instanceof IDBRequest)return iT(r);if(cm.has(r))return cm.get(r);const e=cT(r);return e!==r&&(cm.set(r,e),Jm.set(e,r)),e}const um=r=>Jm.get(r);function uT(r,e,{blocked:s,upgrade:i,blocking:o,terminated:d}={}){const f=indexedDB.open(r,e),p=xi(f);return i&&f.addEventListener("upgradeneeded",v=>{i(xi(f.result),v.oldVersion,v.newVersion,xi(f.transaction),v)}),s&&f.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const dT=["get","getKey","getAll","getAllKeys","count"],hT=["put","add","delete","clear"],dm=new Map;function Sv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,o=hT.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dT.includes(s)))return;const d=async function(f,...p){const v=this.transaction(f,o?"readwrite":"readonly");let y=v.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&v.done]))[0]};return dm.set(e,d),d}lT(r=>({...r,get:(e,s,i)=>Sv(e,s)||r.get(e,s,i),has:(e,s)=>!!Sv(e,s)||r.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(mT(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function mT(r){return r.getComponent()?.type==="VERSION"}const Nm="@firebase/app",Nv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Zm("@firebase/app"),gT="@firebase/app-compat",pT="@firebase/analytics-compat",yT="@firebase/analytics",vT="@firebase/app-check-compat",xT="@firebase/app-check",bT="@firebase/auth",_T="@firebase/auth-compat",wT="@firebase/database",TT="@firebase/data-connect",ET="@firebase/database-compat",ST="@firebase/functions",NT="@firebase/functions-compat",AT="@firebase/installations",jT="@firebase/installations-compat",CT="@firebase/messaging",RT="@firebase/messaging-compat",IT="@firebase/performance",kT="@firebase/performance-compat",DT="@firebase/remote-config",MT="@firebase/remote-config-compat",OT="@firebase/storage",VT="@firebase/storage-compat",LT="@firebase/firestore",PT="@firebase/ai",UT="@firebase/firestore-compat",zT="firebase",BT="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",qT={[Nm]:"fire-core",[gT]:"fire-core-compat",[yT]:"fire-analytics",[pT]:"fire-analytics-compat",[xT]:"fire-app-check",[vT]:"fire-app-check-compat",[bT]:"fire-auth",[_T]:"fire-auth-compat",[wT]:"fire-rtdb",[TT]:"fire-data-connect",[ET]:"fire-rtdb-compat",[ST]:"fire-fn",[NT]:"fire-fn-compat",[AT]:"fire-iid",[jT]:"fire-iid-compat",[CT]:"fire-fcm",[RT]:"fire-fcm-compat",[IT]:"fire-perf",[kT]:"fire-perf-compat",[DT]:"fire-rc",[MT]:"fire-rc-compat",[OT]:"fire-gcs",[VT]:"fire-gcs-compat",[LT]:"fire-fst",[UT]:"fire-fst-compat",[PT]:"fire-vertex","fire-js":"fire-js",[zT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,HT=new Map,jm=new Map;function Av(r,e){try{r.container.addComponent(e)}catch(s){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function Tl(r){const e=r.name;if(jm.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,r);for(const s of yd.values())Av(s,r);for(const s of HT.values())Av(s,r);return!0}function eg(r,e){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(e)}function es(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new cc("app","Firebase",FT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,s,i){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=BT;function hb(r,e={}){let s=r;typeof e!="object"&&(e={name:e});const i={name:Am,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(s||(s=ab()),!s)throw bi.create("no-options");const d=yd.get(o);if(d){if(ya(s,d.options)&&ya(i,d.config))return d;throw bi.create("duplicate-app",{appName:o})}const f=new Ww(o);for(const v of jm.values())f.addComponent(v);const p=new GT(s,i,f);return yd.set(o,p),p}function fb(r=Am){const e=yd.get(r);if(!e&&r===Am&&ab())return hb();if(!e)throw bi.create("no-app",{appName:r});return e}function _i(r,e,s){let i=qT[r]??r;s&&(i+=`-${s}`);const o=i.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(f.join(" "));return}Tl(new va(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="firebase-heartbeat-database",KT=1,Jo="firebase-heartbeat-store";let hm=null;function mb(){return hm||(hm=uT(YT,KT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Jo)}catch(s){console.warn(s)}}}}).catch(r=>{throw bi.create("idb-open",{originalErrorMessage:r.message})})),hm}async function QT(r){try{const s=(await mb()).transaction(Jo),i=await s.objectStore(Jo).get(gb(r));return await s.done,i}catch(e){if(e instanceof Ir)Nr.warn(e.message);else{const s=bi.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(s.message)}}}async function jv(r,e){try{const i=(await mb()).transaction(Jo,"readwrite");await i.objectStore(Jo).put(e,gb(r)),await i.done}catch(s){if(s instanceof Ir)Nr.warn(s.message);else{const i=bi.create("idb-set",{originalErrorMessage:s?.message});Nr.warn(i.message)}}}function gb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=1024,XT=30;class WT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new JT(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Cv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>XT){const o=eE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Cv(),{heartbeatsToSend:s,unsentEntries:i}=ZT(this._heartbeatsCache.heartbeats),o=pd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Nr.warn(e),""}}}function Cv(){return new Date().toISOString().substring(0,10)}function ZT(r,e=$T){const s=[];let i=r.slice();for(const o of r){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),Rv(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Rv(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class JT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uw()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await QT(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rv(r){return pd(JSON.stringify({version:2,heartbeats:r})).length}function eE(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r){Tl(new va("platform-logger",e=>new fT(e),"PRIVATE")),Tl(new va("heartbeat",e=>new WT(e),"PRIVATE")),_i(Nm,Nv,r),_i(Nm,Nv,"esm2020"),_i("fire-js","")}tE("");function pb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nE=pb,yb=new cc("auth","Firebase",pb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Zm("@firebase/auth");function sE(r,...e){vd.logLevel<=Ze.WARN&&vd.warn(`Auth (${Il}): ${r}`,...e)}function id(r,...e){vd.logLevel<=Ze.ERROR&&vd.error(`Auth (${Il}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(r,...e){throw tg(r,...e)}function Ks(r,...e){return tg(r,...e)}function vb(r,e,s){const i={...nE(),[e]:s};return new cc("auth","Firebase",i).create(e,{appName:r.name})}function Er(r){return vb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tg(r,...e){if(typeof r!="string"){const s=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return yb.create(r,...e)}function Oe(r,e,...s){if(!r)throw tg(e,...s)}function wr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw id(e),new Error(e)}function Ar(r,e){r||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){return typeof self<"u"&&self.location?.href||""}function rE(){return Iv()==="http:"||Iv()==="https:"}function Iv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rE()||Ow()||"connection"in navigator)?navigator.onLine:!0}function aE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ar(s>e,"Short delay should be less than long delay!"),this.isMobile=kw()||Vw()}get(){return iE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r,e){Ar(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{static initialize(e,s,i){this.fetchImpl=e,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cE=new dc(3e4,6e4);function kr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Dr(r,e,s,i,o={}){return bb(r,o,async()=>{let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});const p=uc({key:r.config.apiKey,...f}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:v,...d};return Mw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(y.credentials="include"),xb.fetch()(await _b(r,r.config.apiHost,s,p),y)})}async function bb(r,e,s){r._canInitEmulator=!1;const i={...lE,...e};try{const o=new dE(r),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Wu(r,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[v,y]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw Wu(r,"user-disabled",f);const _=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw vb(r,_,y);bs(r,_)}}catch(o){if(o instanceof Ir)throw o;bs(r,"network-request-failed",{message:String(o)})}}async function hc(r,e,s,i,o={}){const d=await Dr(r,e,s,i,o);return"mfaPendingCredential"in d&&bs(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function _b(r,e,s,i){const o=`${e}${s}?${i}`,d=r,f=d.config.emulator?ng(r.config,o):`${r.config.apiScheme}://${o}`;return oE.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function uE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(Ks(this.auth,"network-request-failed")),cE.get())})}}function Wu(r,e,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const o=Ks(r,e,i);return o.customData._tokenResponse=s,o}function kv(r){return r!==void 0&&r.enterprise!==void 0}class hE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return uE(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fE(r,e){return Dr(r,"GET","/v2/recaptchaConfig",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(r,e){return Dr(r,"POST","/v1/accounts:delete",e)}async function xd(r,e){return Dr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gE(r,e=!1){const s=Dt(r),i=await s.getIdToken(e),o=sg(i);Oe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:i,authTime:Qo(fm(o.auth_time)),issuedAtTime:Qo(fm(o.iat)),expirationTime:Qo(fm(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function fm(r){return Number(r)*1e3}function sg(r){const[e,s,i]=r.split(".");if(e===void 0||s===void 0||i===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{const o=rb(s);return o?JSON.parse(o):(id("Failed to decode base64 JWT payload"),null)}catch(o){return id("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Dv(r){const e=sg(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(r,e,s=!1){if(s)return e;try{return await e}catch(i){throw i instanceof Ir&&pE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function pE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(r){const e=r.auth,s=await r.getIdToken(),i=await ec(r,xd(e,{idToken:s}));Oe(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const d=o.providerUserInfo?.length?wb(o.providerUserInfo):[],f=xE(r.providerData,d),p=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!f?.length,y=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function vE(r){const e=Dt(r);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xE(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function wb(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE(r,e){const s=await bb(r,{},async()=>{const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=r.config,f=await _b(r,o,"/v1/token",`key=${d}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:i};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(v.credentials="include"),xb.fetch()(f,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function _E(r,e){return Dr(r,"POST","/v2/accounts:revokeToken",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const s=Dv(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:i,refreshToken:o,expiresIn:d}=await bE(e,s);this.updateTokensAndExpiration(i,o,Number(d))}updateTokensAndExpiration(e,s,i){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,s){const{refreshToken:i,accessToken:o,expirationTime:d}=s,f=new xl;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Oe(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:s,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new yE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ec(this,this.stsTokenManager.getToken(this.auth,e));return Oe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return gE(this,e)}reload(){return vE(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),s&&await bd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await ec(this,mE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const i=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,v=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:z,providerData:X,stsTokenManager:$}=s;Oe(E&&$,e,"internal-error");const U=xl.fromJSON(this.name,$);Oe(typeof E=="string",e,"internal-error"),hi(i,e.name),hi(o,e.name),Oe(typeof A=="boolean",e,"internal-error"),Oe(typeof z=="boolean",e,"internal-error"),hi(d,e.name),hi(f,e.name),hi(p,e.name),hi(v,e.name),hi(y,e.name),hi(_,e.name);const ue=new xs({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:z,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:U,createdAt:y,lastLoginAt:_});return X&&Array.isArray(X)&&(ue.providerData=X.map(W=>({...W}))),v&&(ue._redirectEventId=v),ue}static async _fromIdTokenResponse(e,s,i=!1){const o=new xl;o.updateFromServerResponse(s);const d=new xs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await bd(d),d}static async _fromGetAccountInfoResponse(e,s,i){const o=s.users[0];Oe(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?wb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new xl;p.updateFromIdToken(i);const v=new xs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;function Tr(r){Ar(r instanceof Function,"Expected a class definition");let e=Mv.get(r);return e?(Ar(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Mv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Tb.type="NONE";const Ov=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(r,e,s){return`firebase:${r}:${e}:${s}`}class bl{constructor(e,s,i){this.persistence=e,this.auth=s,this.userKey=i;const{config:o,name:d}=this.auth;this.fullUserKey=ad(this.userKey,o.apiKey,d),this.fullPersistenceKey=ad("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await xd(this.auth,{idToken:e}).catch(()=>{});return s?xs._fromGetAccountInfoResponse(this.auth,s,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,i="authUser"){if(!s.length)return new bl(Tr(Ov),e,i);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||Tr(Ov);const f=ad(i,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let E;if(typeof _=="string"){const A=await xd(e,{idToken:_}).catch(()=>{});if(!A)break;E=await xs._fromGetAccountInfoResponse(e,A,_)}else E=xs._fromJSON(e,_);y!==d&&(p=E),d=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new bl(d,e,i):(d=v[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new bl(d,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cb(e))return"Blackberry";if(Rb(e))return"Webos";if(Sb(e))return"Safari";if((e.includes("chrome/")||Nb(e))&&!e.includes("edge/"))return"Chrome";if(jb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function Eb(r=fn()){return/firefox\//i.test(r)}function Sb(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nb(r=fn()){return/crios\//i.test(r)}function Ab(r=fn()){return/iemobile/i.test(r)}function jb(r=fn()){return/android/i.test(r)}function Cb(r=fn()){return/blackberry/i.test(r)}function Rb(r=fn()){return/webos/i.test(r)}function rg(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function wE(r=fn()){return rg(r)&&!!window.navigator?.standalone}function TE(){return Lw()&&document.documentMode===10}function Ib(r=fn()){return rg(r)||jb(r)||Rb(r)||Cb(r)||/windows phone/i.test(r)||Ab(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r,e=[]){let s;switch(r){case"Browser":s=Vv(fn());break;case"Worker":s=`${Vv(fn())}-${r}`;break;default:s=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const i=d=>new Promise((f,p)=>{try{const v=e(d);f(v)}catch(v){p(v)}});i.onAbort=s,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const i of this.queue)await i(e),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(r,e={}){return Dr(r,"GET","/v2/passwordPolicy",kr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=6;class AE{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??NE,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=e.length>=i),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,s,i,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,s,i,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new EE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Tr(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await xd(this,{idToken:e}),i=await xs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(es(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(Er(this));const s=e?Dt(e):null;return s&&Oe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SE(this),s=new AE(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,s,i){return this.registerStateListener(this.authStateSubscription,e,s,i)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,i){return this.registerStateListener(this.idTokenSubscription,e,s,i)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await _E(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const i=await this.getOrInitRedirectPersistenceManager(s);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Tr(e)||this._popupRedirectResolver;Oe(s,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Tr(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,i,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,i,o);return()=>{f=!0,v()}}else{const v=e.addObserver(s);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sE(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ki(r){return Dt(r)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gw(s=>this.observer=s)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CE(r){Ld=r}function Db(r){return Ld.loadJS(r)}function RE(){return Ld.recaptchaEnterpriseScript}function IE(){return Ld.gapiScript}function kE(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class DE{constructor(){this.enterprise=new ME}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class ME{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const OE="recaptcha-enterprise",Mb="NO_RECAPTCHA";class VE{constructor(e){this.type=OE,this.auth=ki(e)}async verify(e="verify",s=!1){async function i(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{fE(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new hE(v);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(v=>{p(v)})})}function o(d,f,p){const v=window.grecaptcha;kv(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(Mb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DE().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{i(this.auth).then(p=>{if(!s&&kv(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=RE();v.length!==0&&(v+=p),Db(v).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Pv(r,e,s,i=!1,o=!1){const d=new VE(r);let f;if(o)f=Mb;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function _d(r,e,s,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Pv(r,e,s,s==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Pv(r,e,s,s==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(r,e){const s=eg(r,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(ya(d,e??{}))return o;bs(o,"already-initialized")}return s.initialize({options:e})}function PE(r,e){const s=e?.persistence||[],i=(Array.isArray(s)?s:[s]).map(Tr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function UE(r,e,s){const i=ki(r);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,d=Ob(e),{host:f,port:p}=zE(e),v=p===null?"":`:${p}`,y={url:`${d}//${f}${v}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(ya(y,i.config.emulator)&&ya(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Rl(f)?(ob(`${d}//${f}${v}`),cb("Auth",!0)):BE()}function Ob(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zE(r){const e=Ob(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const d=o[1];return{host:d,port:Uv(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:Uv(f)}}}function Uv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BE(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,s){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}async function qE(r,e){return Dr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(r,e){return hc(r,"POST","/v1/accounts:signInWithPassword",kr(r,e))}async function FE(r,e){return Dr(r,"POST","/v1/accounts:sendOobCode",kr(r,e))}async function GE(r,e){return FE(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",kr(r,e))}async function KE(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends ig{constructor(e,s,i,o=null){super("password",i),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new tc(e,s,"password")}static _fromEmailAndCode(e,s,i=null){return new tc(e,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,s,"signInWithPassword",HE);case"emailLink":return YE(e,{email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,i,"signUpPassword",qE);case"emailLink":return KE(e,{idToken:s,email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(r,e){return hc(r,"POST","/v1/accounts:signInWithIdp",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="http://localhost";class xa extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):bs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...d}=s;if(!i||!o)return null;const f=new xa(i,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return _l(e,s)}_linkToIdToken(e,s){const i=this.buildRequest();return i.idToken=s,_l(e,i)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,_l(e,s)}buildRequest(){const e={requestUri:QE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=uc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XE(r){const e=Bo(qo(r)).link,s=e?Bo(qo(e)).deep_link_id:null,i=Bo(qo(r)).deep_link_id;return(i?Bo(qo(i)).link:null)||i||s||e||r}class ag{constructor(e){const s=Bo(qo(e)),i=s.apiKey??null,o=s.oobCode??null,d=$E(s.mode??null);Oe(i&&o&&d,"argument-error"),this.apiKey=i,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=XE(e);try{return new ag(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,s){return tc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const i=ag.parseLink(s);return Oe(i,"argument-error"),tc._fromEmailAndCode(e,i.code,i.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Vb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends fc{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return xa._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:i}=e;if(!s&&!i)return null;try{return gi.credential(s,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends fc{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends fc{constructor(){super("twitter.com")}static credential(e,s){return xa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=e;if(!s||!i)return null;try{return yi.credential(s,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(r,e){return hc(r,"POST","/v1/accounts:signUp",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,i,o=!1){const d=await xs._fromIdTokenResponse(e,i,o),f=zv(i);return new ba({user:d,providerId:f,_tokenResponse:i,operationType:s})}static async _forOperation(e,s,i){await e._updateTokensIfNecessary(i,!0);const o=zv(i);return new ba({user:e,providerId:o,_tokenResponse:i,operationType:s})}}function zv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends Ir{constructor(e,s,i,o){super(s.code,s.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,s,i,o){return new wd(e,s,i,o)}}function Lb(r,e,s,i){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(r,d,e,i):d})}async function ZE(r,e,s=!1){const i=await ec(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return ba._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(r,e,s=!1){const{auth:i}=r;if(es(i.app))return Promise.reject(Er(i));const o="reauthenticate";try{const d=await ec(r,Lb(i,o,e,r),s);Oe(d.idToken,i,"internal-error");const f=sg(d.idToken);Oe(f,i,"internal-error");const{sub:p}=f;return Oe(r.uid===p,i,"user-mismatch"),ba._forOperation(r,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&bs(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(r,e,s=!1){if(es(r.app))return Promise.reject(Er(r));const i="signIn",o=await Lb(r,i,e),d=await ba._fromIdTokenResponse(r,i,o);return s||await r._updateCurrentUser(d.user),d}async function eS(r,e){return Pb(ki(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(r){const e=ki(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tS(r,e,s){const i=ki(r);await _d(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",GE)}async function nS(r,e,s){if(es(r.app))return Promise.reject(Er(r));const i=ki(r),f=await _d(i,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WE).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Ub(r),v}),p=await ba._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function sS(r,e,s){return es(r.app)?Promise.reject(Er(r)):eS(Dt(r),kl.credential(e,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ub(r),i})}function rS(r,e,s,i){return Dt(r).onIdTokenChanged(e,s,i)}function iS(r,e,s){return Dt(r).beforeAuthStateChanged(e,s)}function aS(r,e,s,i){return Dt(r).onAuthStateChanged(e,s,i)}function lS(r){return Dt(r).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=1e3,cS=10;class Bb extends zb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),o=this.localCache[s];i!==o&&e(s,o,i)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,v)=>{this.notifyListeners(f,v)});return}const i=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!s&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);TE()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,cS):o()}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:i}),!0)})},oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bb.type="LOCAL";const uS=Bb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends zb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}qb.type="SESSION";const Hb=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const i=new Pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:i,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),v=await dS(p);s.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(r="",e=10){let s="";for(let i=0;i<e;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,v)=>{const y=lg("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(A.data.response);break;default:clearTimeout(_),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}function fS(r){Qs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function mS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gS(){return navigator?.serviceWorker?.controller||null}function pS(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebaseLocalStorageDb",yS=1,Ed="firebaseLocalStorage",Yb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ud(r,e){return r.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function vS(){const r=indexedDB.deleteDatabase(Gb);return new mc(r).toPromise()}function Im(){const r=indexedDB.open(Gb,yS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ed,{keyPath:Yb})}catch(o){s(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ed)?e(i):(i.close(),await vS(),e(await Im()))})})}async function Bv(r,e,s){const i=Ud(r,!0).put({[Yb]:e,value:s});return new mc(i).toPromise()}async function xS(r,e){const s=Ud(r,!1).get(e),i=await new mc(s).toPromise();return i===void 0?null:i.value}function qv(r,e){const s=Ud(r,!0).delete(e);return new mc(s).toPromise()}const bS=800,_S=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let s=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(s++>_S)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(pS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mS(),!this.activeServiceWorker)return;this.sender=new hS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await Bv(e,Td,"1"),await qv(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bv(i,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(i=>xS(i,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>qv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Ud(o,!1).getAll();return new mc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const wS=Kb;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r,e){return e?Tr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _l(e,this._buildIdpRequest())}_linkToIdToken(e,s){return _l(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return _l(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function ES(r){return Pb(r.auth,new og(r),r.bypassAuthState)}function SS(r){const{auth:e,user:s}=r;return Oe(s,e,"internal-error"),JE(s,new og(r),r.bypassAuthState)}async function NS(r){const{auth:e,user:s}=r;return Oe(s,e,"internal-error"),ZE(s,new og(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,s,i,o,d=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:i,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:s,sessionId:i,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ES;case"linkViaPopup":case"linkViaRedirect":return NS;case"reauthViaPopup":case"reauthViaRedirect":return SS;default:bs(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new dc(2e3,1e4);class vl extends Qb{constructor(e,s,i,o,d){super(e,s,o,d),this.provider=i,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AS.get())};e()}}vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="pendingRedirect",ld=new Map;class CS extends Qb{constructor(e,s,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const i=await RS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(s){e=()=>Promise.reject(s)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RS(r,e){const s=DS(e),i=kS(r);if(!await i._isAvailable())return!1;const o=await i._get(s)==="true";return await i._remove(s),o}function IS(r,e){ld.set(r._key(),e)}function kS(r){return Tr(r._redirectPersistence)}function DS(r){return ad(jS,r.config.apiKey,r.name)}async function MS(r,e,s=!1){if(es(r.app))return Promise.reject(Er(r));const i=ki(r),o=TS(i,e),f=await new CS(i,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=600*1e3;class VS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(s=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!$b(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Ks(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const i=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hv(e))}saveEventToCache(e){this.cachedEventUids.add(Hv(e)),this.lastProcessedEventTime=Date.now()}}function Hv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function $b({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function LS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(r,e={}){return Dr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zS=/^https?/;async function BS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PS(r);for(const s of e)try{if(qS(s))return}catch{}bs(r,"unauthorized-domain")}function qS(r){const e=Cm(),{protocol:s,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===i}if(!zS.test(s))return!1;if(US.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new dc(3e4,6e4);function Fv(){const r=Qs().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function FS(r){return new Promise((e,s)=>{function i(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),s(Ks(r,"network-request-failed"))},timeout:HS.get()})}if(Qs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qs().gapi?.load)i();else{const o=kE("iframefcb");return Qs()[o]=()=>{gapi.load?i():s(Ks(r,"network-request-failed"))},Db(`${IE()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw od=null,e})}let od=null;function GS(r){return od=od||FS(r),od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new dc(5e3,15e3),KS="__/auth/iframe",QS="emulator/auth/iframe",$S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WS(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?ng(e,QS):`https://${r.config.authDomain}/${KS}`,i={apiKey:e.apiKey,appName:r.name,v:Il},o=XS.get(r.config.apiHost);o&&(i.eid=o);const d=r._getFrameworks();return d.length&&(i.fw=d.join(",")),`${s}?${uc(i).slice(1)}`}async function ZS(r){const e=await GS(r),s=Qs().gapi;return Oe(s,r,"internal-error"),e.open({where:document.body,url:WS(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$S,dontclear:!0},i=>new Promise(async(o,d)=>{await i.restyle({setHideOnLeave:!1});const f=Ks(r,"network-request-failed"),p=Qs().setTimeout(()=>{d(f)},YS.get());function v(){Qs().clearTimeout(p),o(i)}i.ping(v).then(v,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eN=500,tN=600,nN="_blank",sN="http://localhost";class Gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rN(r,e,s,i=eN,o=tN){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const v={...JS,width:i.toString(),height:o.toString(),top:d,left:f},y=fn().toLowerCase();s&&(p=Nb(y)?nN:s),Eb(y)&&(e=e||sN,v.scrollbars="yes");const _=Object.entries(v).reduce((A,[z,X])=>`${A}${z}=${X},`,"");if(wE(y)&&p!=="_self")return iN(e||"",p),new Gv(null);const E=window.open(e||"",p,_);Oe(E,r,"popup-blocked");try{E.focus()}catch{}return new Gv(E)}function iN(r,e){const s=document.createElement("a");s.href=r,s.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="__/auth/handler",lN="emulator/auth/handler",oN=encodeURIComponent("fac");async function Yv(r,e,s,i,o,d){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Il,eventId:o};if(e instanceof Vb){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Fw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof fc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await r._getAppCheckToken(),y=v?`#${oN}=${encodeURIComponent(v)}`:"";return`${cN(r)}?${uc(p).slice(1)}${y}`}function cN({config:r}){return r.emulator?ng(r,lN):`https://${r.authDomain}/${aN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class uN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hb,this._completeRedirectFn=MS,this._overrideRedirectResult=IS}async _openPopup(e,s,i,o){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Yv(e,s,i,Cm(),o);return rN(e,d,lg())}async _openRedirect(e,s,i,o){await this._originValidation(e);const d=await Yv(e,s,i,Cm(),o);return fS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Ar(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(e);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(e){const s=await ZS(e),i=new VS(e);return s.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=s,i}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(mm,{type:mm},o=>{const d=o?.[0]?.[mm];d!==void 0&&s(!!d),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=BS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Ib()||Sb()||rg()}}const dN=uN;var Kv="@firebase/auth",Qv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mN(r){Tl(new va("auth",(e,{options:s})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;Oe(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kb(r)},y=new jE(i,o,d,v);return PE(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,i)=>{e.getProvider("auth-internal").initialize()})),Tl(new va("auth-internal",e=>{const s=ki(e.getProvider("auth").getImmediate());return(i=>new hN(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(Kv,Qv,fN(r)),_i(Kv,Qv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=300,pN=lb("authIdTokenMaxAge")||gN;let $v=null;const yN=r=>async e=>{const s=e&&await e.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>pN)return;const o=s?.token;$v!==o&&($v=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vN(r=fb()){const e=eg(r,"auth");if(e.isInitialized())return e.getImmediate();const s=LE(r,{popupRedirectResolver:dN,persistence:[wS,uS,Hb]}),i=lb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(i,location.origin);if(location.origin===d.origin){const f=yN(d.toString());iS(s,f,()=>f(s.currentUser)),rS(s,p=>f(p))}}const o=ib("auth");return o&&UE(s,`http://${o}`),s}function xN(){return document.getElementsByTagName("head")?.[0]??document}CE({loadJS(r){return new Promise((e,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const d=Ks("internal-error");d.customData=o,s(d)},i.type="text/javascript",i.charset="UTF-8",xN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mN("Browser");var bN="firebase",_N="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(bN,_N,"app");var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,Xb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function N(){}N.prototype=w.prototype,R.F=w.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(C,j,k){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return w.prototype[j].apply(C,I)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,N){N||(N=0);const C=Array(16);if(typeof w=="string")for(var j=0;j<16;++j)C[j]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(j=0;j<16;++j)C[j]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=R.g[0],N=R.g[1],j=R.g[2];let k=R.g[3],I;I=w+(k^N&(j^k))+C[0]+3614090360&4294967295,w=N+(I<<7&4294967295|I>>>25),I=k+(j^w&(N^j))+C[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(N^k&(w^N))+C[2]+606105819&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(w^j&(k^w))+C[3]+3250441966&4294967295,N=j+(I<<22&4294967295|I>>>10),I=w+(k^N&(j^k))+C[4]+4118548399&4294967295,w=N+(I<<7&4294967295|I>>>25),I=k+(j^w&(N^j))+C[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(N^k&(w^N))+C[6]+2821735955&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(w^j&(k^w))+C[7]+4249261313&4294967295,N=j+(I<<22&4294967295|I>>>10),I=w+(k^N&(j^k))+C[8]+1770035416&4294967295,w=N+(I<<7&4294967295|I>>>25),I=k+(j^w&(N^j))+C[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(N^k&(w^N))+C[10]+4294925233&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(w^j&(k^w))+C[11]+2304563134&4294967295,N=j+(I<<22&4294967295|I>>>10),I=w+(k^N&(j^k))+C[12]+1804603682&4294967295,w=N+(I<<7&4294967295|I>>>25),I=k+(j^w&(N^j))+C[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(N^k&(w^N))+C[14]+2792965006&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(w^j&(k^w))+C[15]+1236535329&4294967295,N=j+(I<<22&4294967295|I>>>10),I=w+(j^k&(N^j))+C[1]+4129170786&4294967295,w=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(w^N))+C[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^N&(k^w))+C[11]+643717713&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^w&(j^k))+C[0]+3921069994&4294967295,N=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(N^j))+C[5]+3593408605&4294967295,w=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(w^N))+C[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^N&(k^w))+C[15]+3634488961&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^w&(j^k))+C[4]+3889429448&4294967295,N=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(N^j))+C[9]+568446438&4294967295,w=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(w^N))+C[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^N&(k^w))+C[3]+4107603335&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^w&(j^k))+C[8]+1163531501&4294967295,N=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(N^j))+C[13]+2850285829&4294967295,w=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(w^N))+C[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^N&(k^w))+C[7]+1735328473&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^w&(j^k))+C[12]+2368359562&4294967295,N=j+(I<<20&4294967295|I>>>12),I=w+(N^j^k)+C[5]+4294588738&4294967295,w=N+(I<<4&4294967295|I>>>28),I=k+(w^N^j)+C[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^N)+C[11]+1839030562&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^w)+C[14]+4259657740&4294967295,N=j+(I<<23&4294967295|I>>>9),I=w+(N^j^k)+C[1]+2763975236&4294967295,w=N+(I<<4&4294967295|I>>>28),I=k+(w^N^j)+C[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^N)+C[7]+4139469664&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^w)+C[10]+3200236656&4294967295,N=j+(I<<23&4294967295|I>>>9),I=w+(N^j^k)+C[13]+681279174&4294967295,w=N+(I<<4&4294967295|I>>>28),I=k+(w^N^j)+C[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^N)+C[3]+3572445317&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^w)+C[6]+76029189&4294967295,N=j+(I<<23&4294967295|I>>>9),I=w+(N^j^k)+C[9]+3654602809&4294967295,w=N+(I<<4&4294967295|I>>>28),I=k+(w^N^j)+C[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^N)+C[15]+530742520&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^w)+C[2]+3299628645&4294967295,N=j+(I<<23&4294967295|I>>>9),I=w+(j^(N|~k))+C[0]+4096336452&4294967295,w=N+(I<<6&4294967295|I>>>26),I=k+(N^(w|~j))+C[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~N))+C[14]+2878612391&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~w))+C[5]+4237533241&4294967295,N=j+(I<<21&4294967295|I>>>11),I=w+(j^(N|~k))+C[12]+1700485571&4294967295,w=N+(I<<6&4294967295|I>>>26),I=k+(N^(w|~j))+C[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~N))+C[10]+4293915773&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~w))+C[1]+2240044497&4294967295,N=j+(I<<21&4294967295|I>>>11),I=w+(j^(N|~k))+C[8]+1873313359&4294967295,w=N+(I<<6&4294967295|I>>>26),I=k+(N^(w|~j))+C[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~N))+C[6]+2734768916&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~w))+C[13]+1309151649&4294967295,N=j+(I<<21&4294967295|I>>>11),I=w+(j^(N|~k))+C[4]+4149444226&4294967295,w=N+(I<<6&4294967295|I>>>26),I=k+(N^(w|~j))+C[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~N))+C[2]+718787259&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~w))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+k&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const N=w-this.blockSize,C=this.C;let j=this.h,k=0;for(;k<w;){if(j==0)for(;k<=N;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(C[j++]=R.charCodeAt(k++),j==this.blockSize){o(this,C),j=0;break}}else for(;k<w;)if(C[j++]=R[k++],j==this.blockSize){o(this,C),j=0;break}}this.h=j,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,N=0;N<4;++N)for(let C=0;C<32;C+=8)R[w++]=this.g[N]>>>C&255;return R};function d(R,w){var N=p;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=w(R)}function f(R,w){this.h=w;const N=[];let C=!0;for(let j=R.length-1;j>=0;j--){const k=R[j]|0;C&&k==w||(N[j]=k,C=!1)}this.g=N}var p={};function v(R){return-128<=R&&R<128?d(R,function(w){return new f([w|0],w<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return U(y(-R));const w=[];let N=1;for(let C=0;R>=N;C++)w[C]=R/N|0,N*=4294967296;return new f(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return U(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(w,8));let C=E;for(let k=0;k<R.length;k+=8){var j=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+j),w);j<8?(j=y(Math.pow(w,j)),C=C.j(j).add(y(I))):(C=C.j(N),C=C.add(y(I)))}return C}var E=v(0),A=v(1),z=v(16777216);r=f.prototype,r.m=function(){if($(this))return-U(this).m();let R=0,w=1;for(let N=0;N<this.g.length;N++){const C=this.i(N);R+=(C>=0?C:4294967296+C)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(X(this))return"0";if($(this))return"-"+U(this).toString(R);const w=y(Math.pow(R,6));var N=this;let C="";for(;;){const j=ae(N,w).g;N=ue(N,j.j(w));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=j,X(N))return k+C;for(;k.length<6;)k="0"+k;C=k+C}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function X(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function $(R){return R.h==-1}r.l=function(R){return R=ue(this,R),$(R)?-1:X(R)?0:1};function U(R){const w=R.g.length,N=[];for(let C=0;C<w;C++)N[C]=~R.g[C];return new f(N,~R.h).add(A)}r.abs=function(){return $(this)?U(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),N=[];let C=0;for(let j=0;j<=w;j++){let k=C+(this.i(j)&65535)+(R.i(j)&65535),I=(k>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);C=I>>>16,k&=65535,I&=65535,N[j]=I<<16|k}return new f(N,N[N.length-1]&-2147483648?-1:0)};function ue(R,w){return R.add(U(w))}r.j=function(R){if(X(this)||X(R))return E;if($(this))return $(R)?U(this).j(U(R)):U(U(this).j(R));if($(R))return U(this.j(U(R)));if(this.l(z)<0&&R.l(z)<0)return y(this.m()*R.m());const w=this.g.length+R.g.length,N=[];for(var C=0;C<2*w;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(let j=0;j<R.g.length;j++){const k=this.i(C)>>>16,I=this.i(C)&65535,de=R.i(j)>>>16,ke=R.i(j)&65535;N[2*C+2*j]+=I*ke,W(N,2*C+2*j),N[2*C+2*j+1]+=k*ke,W(N,2*C+2*j+1),N[2*C+2*j+1]+=I*de,W(N,2*C+2*j+1),N[2*C+2*j+2]+=k*de,W(N,2*C+2*j+2)}for(R=0;R<w;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=w;R<2*w;R++)N[R]=0;return new f(N,0)};function W(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function me(R,w){this.g=R,this.h=w}function ae(R,w){if(X(w))throw Error("division by zero");if(X(R))return new me(E,E);if($(R))return w=ae(U(R),w),new me(U(w.g),U(w.h));if($(w))return w=ae(R,U(w)),new me(U(w.g),w.h);if(R.g.length>30){if($(R)||$(w))throw Error("slowDivide_ only works with positive integers.");for(var N=A,C=w;C.l(R)<=0;)N=be(N),C=be(C);var j=xe(N,1),k=xe(C,1);for(C=xe(C,2),N=xe(N,2);!X(C);){var I=k.add(C);I.l(R)<=0&&(j=j.add(N),k=I),C=xe(C,1),N=xe(N,1)}return w=ue(R,j.j(w)),new me(j,w)}for(j=E;R.l(w)>=0;){for(N=Math.max(1,Math.floor(R.m()/w.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),k=y(N),I=k.j(w);$(I)||I.l(R)>0;)N-=C,k=y(N),I=k.j(w);X(k)&&(k=A),j=j.add(k),R=ue(R,I)}return new me(j,R)}r.B=function(R){return ae(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let C=0;C<w;C++)N[C]=this.i(C)&R.i(C);return new f(N,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let C=0;C<w;C++)N[C]=this.i(C)|R.i(C);return new f(N,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let C=0;C<w;C++)N[C]=this.i(C)^R.i(C);return new f(N,this.h^R.h)};function be(R){const w=R.g.length+1,N=[];for(let C=0;C<w;C++)N[C]=R.i(C)<<1|R.i(C-1)>>>31;return new f(N,R.h)}function xe(R,w){const N=w>>5;w%=32;const C=R.g.length-N,j=[];for(let k=0;k<C;k++)j[k]=w>0?R.i(k+N)>>>w|R.i(k+N+1)<<32-w:R.i(k+N);return new f(j,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Xb=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,wi=f}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wb,Ho,Zb,cd,km,Jb,e_,t_;(function(){var r,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function o(u,g){if(g)e:{var b=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in b))break e;b=b[B]}u=u[u.length-1],S=b[u],g=g(S),g!=S&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.push([S,g[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=v,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,B,K){for(var ve=Array(arguments.length-2),He=2;He<arguments.length;He++)ve[He-2]=arguments[He];return g.prototype[B].apply(S,ve)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function z(u){const g=u.length;if(g>0){const b=Array(g);for(let S=0;S<g;S++)b[S]=u[S];return b}return[]}function X(u,g){for(let S=1;S<arguments.length;S++){const B=arguments[S];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const K=B.length||0;u.length=b+K;for(let ve=0;ve<K;ve++)u[b+ve]=B[ve]}else u.push(B)}}class ${constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function U(u){f.setTimeout(()=>{throw u},0)}function ue(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class W{constructor(){this.h=this.g=null}add(g,b){const S=me.get();S.set(g,b),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new $(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let be,xe=!1,R=new W,w=()=>{const u=Promise.resolve(void 0);be=()=>{u.then(N)}};function N(){for(var u;u=ue();){try{u.h.call(u.g)}catch(b){U(b)}var g=me;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}xe=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function de(u,g){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(de,j),de.prototype.init=function(u,g){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ge(u,g,b,S,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!S,this.ha=B,this.key=++Y,this.da=this.fa=!1}function we(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qe(u,g,b){for(const S in u)g.call(b,u[S],S,u)}function Ye(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function M(u){const g={};for(const b in u)g[b]=u[b];return g}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(u,g){let b,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(b in S)u[b]=S[b];for(let K=0;K<ee.length;K++)b=ee[K],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function L(u){this.src=u,this.g={},this.h=0}L.prototype.add=function(u,g,b,S,B){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const ve=se(u,g,S,B);return ve>-1?(g=u[ve],b||(g.fa=!1)):(g=new ge(g,this.src,K,!!S,B),g.fa=b,u.push(g)),g};function V(u,g){const b=g.type;if(b in u.g){var S=u.g[b],B=Array.prototype.indexOf.call(S,g,void 0),K;(K=B>=0)&&Array.prototype.splice.call(S,B,1),K&&(we(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function se(u,g,b,S){for(let B=0;B<u.length;++B){const K=u[B];if(!K.da&&K.listener==g&&K.capture==!!b&&K.ha==S)return B}return-1}var he="closure_lm_"+(Math.random()*1e6|0),Ce={};function Me(u,g,b,S,B){if(Array.isArray(g)){for(let K=0;K<g.length;K++)Me(u,g[K],b,S,B);return null}return b=je(b),u&&u[ke]?u.J(g,b,p(S)?!!S.capture:!1,B):J(u,g,b,!1,S,B)}function J(u,g,b,S,B,K){if(!g)throw Error("Invalid event type");const ve=p(B)?!!B.capture:!!B;let He=Te(u);if(He||(u[he]=He=new L(u)),b=He.add(g,b,S,ve,K),b.proxy)return b;if(S=Ee(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)k||(B=ve),B===void 0&&(B=!1),u.addEventListener(g.toString(),S,B);else if(u.attachEvent)u.attachEvent(le(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ee(){function u(b){return g.call(u.src,u.listener,b)}const g=oe;return u}function fe(u,g,b,S,B){if(Array.isArray(g))for(var K=0;K<g.length;K++)fe(u,g[K],b,S,B);else S=p(S)?!!S.capture:!!S,b=je(b),u&&u[ke]?(u=u.i,K=String(g).toString(),K in u.g&&(g=u.g[K],b=se(g,b,S,B),b>-1&&(we(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[K],u.h--)))):u&&(u=Te(u))&&(g=u.g[g.toString()],u=-1,g&&(u=se(g,b,S,B)),(b=u>-1?g[u]:null)&&F(b))}function F(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ke])V(g.i,u);else{var b=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(b,S,u.capture):g.detachEvent?g.detachEvent(le(b),S):g.addListener&&g.removeListener&&g.removeListener(S),(b=Te(g))?(V(b,u),b.h==0&&(b.src=null,g[he]=null)):we(u)}}}function le(u){return u in Ce?Ce[u]:Ce[u]="on"+u}function oe(u,g){if(u.da)u=!0;else{g=new de(g,this);const b=u.listener,S=u.ha||u.src;u.fa&&F(u),u=b.call(S,g)}return u}function Te(u){return u=u[he],u instanceof L?u:null}var ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(u){return typeof u=="function"?u:(u[ye]||(u[ye]=function(g){return u.handleEvent(g)}),u[ye])}function Ke(){C.call(this),this.i=new L(this),this.M=this,this.G=null}E(Ke,C),Ke.prototype[ke]=!0,Ke.prototype.removeEventListener=function(u,g,b,S){fe(this,u,g,b,S)};function pt(u,g){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new j(g,u);else if(g instanceof j)g.target=g.target||u;else{var B=g;g=new j(S,u),pe(g,B)}B=!0;let K,ve;if(b)for(ve=b.length-1;ve>=0;ve--)K=g.g=b[ve],B=mn(K,S,!0,g)&&B;if(K=g.g=u,B=mn(K,S,!0,g)&&B,B=mn(K,S,!1,g)&&B,b)for(ve=0;ve<b.length;ve++)K=g.g=b[ve],B=mn(K,S,!1,g)&&B}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let S=0;S<b.length;S++)we(b[S]);delete u.g[g],u.h--}}this.G=null},Ke.prototype.J=function(u,g,b,S){return this.i.add(String(u),g,!1,b,S)},Ke.prototype.K=function(u,g,b,S){return this.i.add(String(u),g,!0,b,S)};function mn(u,g,b,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let K=0;K<g.length;++K){const ve=g[K];if(ve&&!ve.da&&ve.capture==b){const He=ve.listener,jt=ve.ha||ve.src;ve.fa&&V(u.i,ve),B=He.call(jt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Pl(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Vi(u){u.g=Pl(()=>{u.g=null,u.i&&(u.i=!1,Vi(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Qt extends C{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(u){C.call(this),this.h=u,this.g={}}E(tr,C);var nr=[];function Mr(u){qe(u.g,function(g,b){this.g.hasOwnProperty(b)&&F(g)},u),u.g={}}tr.prototype.N=function(){tr.Z.N.call(this),Mr(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=f.JSON.stringify,Un=f.JSON.parse,Sa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ec(){}function Sc(){}var rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){j.call(this,"d")}E(Jt,j);function zn(){j.call(this,"c")}E(zn,j);var At={},Nc=null;function Na(){return Nc=Nc||new Ke}At.Ia="serverreachability";function Ac(u){j.call(this,At.Ia,u)}E(Ac,j);function Es(u){const g=Na();pt(g,new Ac(g))}At.STAT_EVENT="statevent";function Li(u,g){j.call(this,At.STAT_EVENT,u),this.stat=g}E(Li,j);function Mt(u){const g=Na();pt(g,new Li(g,u))}At.Ja="timingevent";function Ss(u,g){j.call(this,At.Ja,u),this.size=g}E(Ss,j);function Ns(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function ih(u,g,b,S,B,K){u.info(function(){if(u.g)if(K){var ve="",He=K.split("&");for(let it=0;it<He.length;it++){var jt=He[it].split("=");if(jt.length>1){const _t=jt[0];jt=jt[1];const Fn=_t.split("_");ve=Fn.length>=2&&Fn[1]=="type"?ve+(_t+"="+jt+"&"):ve+(_t+"=redacted&")}}}else ve=null;else ve=K;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+b+`
`+ve})}function jc(u,g,b,S,B,K,ve){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+b+`
`+K+" "+ve})}function As(u,g,b,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ah(u,b)+(S?" "+S:"")})}function Pi(u,g){u.info(function(){return"TIMEOUT: "+g})}is.prototype.info=function(){};function ah(u,g){if(!u.g)return g;if(!g)return null;try{const K=JSON.parse(g);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var b=K[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ve=1;ve<S.length;ve++)S[ve]=""}}}}return Ts(K)}catch{return g}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zl;function zi(){}E(zi,Ec),zi.prototype.g=function(){return new XMLHttpRequest},zl=new zi;function sr(u){return encodeURIComponent(String(u))}function Cc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function as(u,g,b,S){this.j=u,this.i=g,this.l=b,this.S=S||1,this.V=new tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}var Ot={},$t={};function js(u,g,b){u.M=1,u.A=Bi(Lt(g)),u.u=b,u.R=!0,Aa(u,null)}function Aa(u,g){u.F=Date.now(),Cs(u),u.B=Lt(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ia(b.i,"t",S),u.C=0,b=u.j.L,u.h=new ls,u.g=Fc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Qt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(nr[0]=B.toString()),B=nr);for(let K=0;K<B.length;K++){const ve=Me(b,B[K],S||g.handleEvent,!1,g.h||g);if(!ve)break;g.g[ve.key]=ve}g=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Es(),ih(u.i,u.v,u.B,u.l,u.S,u.u)}as.prototype.ba=function(u){u=u.target;const g=this.O;g&&us(u)==3?g.j():this.Y(u)},as.prototype.Y=function(u){try{if(u==this.g)e:{const He=us(this.g),jt=this.g.ya(),it=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||He!=4||jt==7||(jt==8||it<=0?Es(3):Es(2)),Rs(this);var g=this.g.ca();this.X=g;var b=lh(this);if(this.o=g==200,jc(this.i,this.v,this.B,this.l,this.S,He,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var K=S;break t}}K=null}if(u=K)As(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Is(this,u);else{this.o=!1,this.m=3,Mt(12),jn(this),Bn(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<b.length;)if(_t=Ic(this,b),_t==$t){He==4&&(this.m=4,Mt(14),u=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Mt(15),As(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else As(this.i,this.l,_t,null),Is(this,_t);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||b.length!=0||this.h.h||(this.m=1,Mt(16),u=!1),this.o=this.o&&u,!u)As(this.i,this.l,b,"[Invalid Chunked Response]"),jn(this),Bn(this);else if(b.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),to(ve),ve.P=!0,Mt(11))}}else As(this.i,this.l,b,null),Is(this,b);He==4&&jn(this),this.o&&!this.K&&(He==4?zc(this.j,this):(this.o=!1,Cs(this)))}else ir(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),jn(this),Bn(this)}}}catch{}finally{}};function lh(u){if(!Rc(u))return u.g.la();const g=en(u.g);if(g==="")return"";let b="";const S=g.length,B=us(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return jn(u),Bn(u),"";u.h.i=new f.TextDecoder}for(let K=0;K<S;K++)u.h.h=!0,b+=u.h.i.decode(g[K],{stream:!(B&&K==S-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Rc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ic(u,g){var b=u.C,S=g.indexOf(`
`,b);return S==-1?$t:(b=Number(g.substring(b,S)),isNaN(b)?Ot:(S+=1,S+b>g.length?$t:(g=g.slice(S,S+b),u.C=S+b,g)))}as.prototype.cancel=function(){this.K=!0,jn(this)};function Cs(u){u.T=Date.now()+u.H,ja(u,u.H)}function ja(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ns(y(u.aa,u),g)}function Rs(u){u.D&&(f.clearTimeout(u.D),u.D=null)}as.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(Es(),Mt(17)),jn(this),this.m=2,Bn(this)):ja(this,this.T-u)};function Bn(u){u.j.I==0||u.K||zc(u.j,u)}function jn(u){Rs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Mr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Is(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ds(b.h,u))){if(!u.L&&Ds(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Va(b),qr(b);else break e;Qi(b),Mt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ns(y(b.Va,b),6e3));ks(b.h)<=1&&b.ta&&(b.ta=void 0)}else Us(b,11)}else if((u.L||b.g==u)&&Va(b),!I(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let it=B[g];const _t=it[0];if(!(_t<=b.K))if(b.K=_t,it=it[1],b.I==2)if(it[0]=="c"){b.M=it[1],b.ba=it[2];const Fn=it[3];Fn!=null&&(b.ka=Fn,b.j.info("VER="+b.ka));const zs=it[4];zs!=null&&(b.za=zs,b.j.info("SVER="+b.za));const ds=it[5];ds!=null&&typeof ds=="number"&&ds>0&&(S=1.5*ds,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const hs=u.g;if(hs){const $i=hs.g?hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var K=S.h;K.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Hl(K,K.h),K.h=null))}if(S.G){const La=hs.g?hs.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,ot(S.J,S.G,La))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ve=u;if(S.na=Hc(S,S.L?S.ba:null,S.W),ve.L){Fl(S.h,ve);var He=ve,jt=S.O;jt&&(He.H=jt),He.D&&(Rs(He),Cs(He)),S.g=ve}else Pc(S);b.i.length>0&&Ps(b)}else it[0]!="stop"&&it[0]!="close"||Us(b,7);else b.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Us(b,7):Jl(b):it[0]!="noop"&&b.l&&b.l.qa(it),b.A=0)}}Es(4)}catch{}}var Vt=class{constructor(u,g){this.g=u,this.map=g}};function Bl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ql(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ks(u){return u.h?1:u.g?u.g.size:0}function Ds(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Hl(u,g){u.g?u.g.add(g):u.h=g}function Fl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return z(u.i)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let B,K=null;S>=0?(B=u[b].substring(0,S),K=u[b].substring(S+1)):B=u[b],g(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Cn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Cn?(this.l=u.l,Xt(this,u.j),this.o=u.o,this.g=u.g,Or(this,u.u),this.h=u.h,Yl(this,Vc(u.i)),this.m=u.m):u&&(g=String(u).match(kc))?(this.l=!1,Xt(this,g[1]||"",!0),this.o=Ms(g[2]||""),this.g=Ms(g[3]||"",!0),Or(this,g[4]),this.h=Ms(g[5]||"",!0),Yl(this,g[6]||"",!0),this.m=Ms(g[7]||"")):(this.l=!1,this.i=new Lr(null,this.l))}Cn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(qi(g,Ra,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(qi(g,Ra,!0),"@"),u.push(sr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(qi(b,b.charAt(0)=="/"?Kl:Dc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",qi(b,Mc)),u.join("")},Cn.prototype.resolve=function(u){const g=Lt(this);let b=!!u.j;b?Xt(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var S=u.h;if(b)Or(g,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=g.h.lastIndexOf("/");B!=-1&&(S=g.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let ve=0;ve<B.length;){const He=B[ve++];He=="."?S&&ve==B.length&&K.push(""):He==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&ve==B.length&&K.push("")):(K.push(He),S=!0)}S=K.join("/")}else S=B}return b?g.h=S:b=u.i.toString()!=="",b?Yl(g,Vc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Lt(u){return new Cn(u)}function Xt(u,g,b){u.j=b?Ms(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Or(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Yl(u,g,b){g instanceof Lr?(u.i=g,ka(u.i,u.l)):(b||(g=qi(g,Vr)),u.i=new Lr(g,u.l))}function ot(u,g,b){u.i.set(g,b)}function Bi(u){return ot(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qi(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,vn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ra=/[#\/\?@]/g,Dc=/[#\?:]/g,Kl=/[#\?]/g,Vr=/[#\?@]/g,Mc=/#/g;function Lr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function xn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ca(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=Lr.prototype,r.add=function(u,g){xn(this),this.i=null,u=Pr(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Oc(u,g){xn(u),g=Pr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ql(u,g){return xn(u),g=Pr(u,g),u.g.has(g)}r.forEach=function(u,g){xn(this),this.g.forEach(function(b,S){b.forEach(function(B){u.call(g,B,S,this)},this)},this)};function $l(u,g){xn(u);let b=[];if(typeof g=="string")Ql(u,g)&&(b=b.concat(u.g.get(Pr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return xn(this),this.i=null,u=Pr(this,u),Ql(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=$l(this,u),u.length>0?String(u[0]):g):g};function Ia(u,g,b){Oc(u,g),b.length>0&&(u.i=null,u.g.set(Pr(u,g),z(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var b=g[S];const B=sr(b);b=$l(this,b);for(let K=0;K<b.length;K++){let ve=B;b[K]!==""&&(ve+="="+sr(b[K])),u.push(ve)}}return this.i=u.join("&")};function Vc(u){const g=new Lr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Pr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ka(u,g){g&&!u.j&&(xn(u),u.i=null,u.g.forEach(function(b,S){const B=S.toLowerCase();S!=B&&(Oc(this,S),Ia(this,B,b))},u)),u.j=g}function os(u,g){const b=new is;if(f.Image){const S=new Image;S.onload=_(qn,b,"TestLoadImage: loaded",!0,g,S),S.onerror=_(qn,b,"TestLoadImage: error",!1,g,S),S.onabort=_(qn,b,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(qn,b,"TestLoadImage: timeout",!1,g,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Xl(u,g){const b=new is,S=new AbortController,B=setTimeout(()=>{S.abort(),qn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(B),K.ok?qn(b,"TestPingServer: ok",!0,g):qn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),qn(b,"TestPingServer: error",!1,g)})}function qn(u,g,b,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(b)}catch{}}function Ur(){this.g=new Sa}function Os(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Os,Ec),Os.prototype.g=function(){return new Hi(this.i,this.h)};function Hi(u,g){Ke.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Hi,Ke),r=Hi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,cs(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Da(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Da(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?zr(this):cs(this),this.readyState==3&&Da(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,zr(this))},r.Na=function(u){this.g&&(this.response=u,zr(this))},r.ga=function(){this.g&&zr(this)};function zr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,cs(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function cs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hn(u){let g="";return qe(u,function(b,S){g+=S,g+=":",g+=b,g+=`\r
`}),g}function Fi(u,g,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Hn(b),typeof u=="string"?b!=null&&sr(b):ot(u,g,b))}function dt(u){Ke.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,Ke);var Vs=/^https?$/i,Wl=["POST","PUT"];r=dt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){Gi(this,K);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)b.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())b.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Wl,g,void 0)>=0)||S||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ve]of b)this.g.setRequestHeader(K,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Gi(this,K)}};function Gi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Zl(u),rr(u)}function Zl(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,pt(this,"complete"),pt(this,"abort"),rr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},r.Xa=function(){Yi(this)};function Yi(u){if(u.h&&typeof d<"u"){if(u.v&&us(u)==4)setTimeout(u.Ca.bind(u),0);else if(pt(u,"readystatechange"),us(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var S;if(S=K===0){let ve=String(u.D).match(kc)[1]||null;!ve&&f.self&&f.self.location&&(ve=f.self.location.protocol.slice(0,-1)),S=!Vs.test(ve?ve.toLowerCase():"")}b=S}if(b)pt(u,"complete"),pt(u,"success");else{u.o=6;try{var B=us(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Zl(u)}}finally{rr(u)}}}}function rr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||pt(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function us(u){return u.g?u.g.readyState:0}r.ca=function(){try{return us(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Un(g)}};function en(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ir(u){const g={};u=(u.g&&us(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(I(u[S]))continue;var b=Cc(u[S]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=g[B]||[];g[B]=K,K.push(b)}Ye(g,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Br(u){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ls("baseRetryDelayMs",5e3,u),this.Za=Ls("retryDelaySeedMs",1e4,u),this.Ta=Ls("forwardChannelMaxRetries",2,u),this.va=Ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bl(u&&u.concurrentRequestLimit),this.Ba=new Ur,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Br.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,S){Mt(0),this.W=u,this.H=g||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Hc(this,null,this.W),Ps(this)};function Jl(u){if(Ma(u),u.I==3){var g=u.V++,b=Lt(u.J);if(ot(b,"SID",u.M),ot(b,"RID",g),ot(b,"TYPE","terminate"),Ki(u,b),g=new as(u,u.j,g),g.M=2,g.A=Bi(Lt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Fc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Cs(g)}qc(u)}function qr(u){u.g&&(to(u),u.g.cancel(),u.g=null)}function Ma(u){qr(u),u.v&&(f.clearTimeout(u.v),u.v=null),Va(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ps(u){if(!ql(u.h)&&!u.m){u.m=!0;var g=u.Ea;be||w(),xe||(be(),xe=!0),R.add(g,u),u.D=0}}function Oa(u,g){return ks(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ns(y(u.Ea,u,g),Bc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new as(this,this.j,u);let K=this.o;if(this.U&&(K?(K=M(K),pe(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Lc(this,B,g),b=Lt(this.J),ot(b,"RID",u),ot(b,"CVER",22),this.G&&ot(b,"X-HTTP-Session-Id",this.G),Ki(this,b),K&&(this.R?g="headers="+sr(Hn(K))+"&"+g:this.u&&Fi(b,this.u,K)),Hl(this.h,B),this.Ra&&ot(b,"TYPE","init"),this.S?(ot(b,"$req",g),ot(b,"SID","null"),B.U=!0,js(B,b,null)):js(B,b,g),this.I=2}}else this.I==3&&(u?eo(this,u):this.i.length==0||ql(this.h)||eo(this))};function eo(u,g){var b;g?b=g.l:b=u.V++;const S=Lt(u.J);ot(S,"SID",u.M),ot(S,"RID",b),ot(S,"AID",u.K),Ki(u,S),u.u&&u.o&&Fi(S,u.u,u.o),b=new as(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Lc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Hl(u.h,b),js(b,S,g)}function Ki(u,g){u.H&&qe(u.H,function(b,S){ot(g,S,b)}),u.l&&qe({},function(b,S){ot(g,S,b)})}function Lc(u,g,b){b=Math.min(u.i.length,b);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let He=-1;for(;;){const jt=["count="+b];He==-1?b>0?(He=B[0].g,jt.push("ofs="+He)):He=0:jt.push("ofs="+He);let it=!0;for(let _t=0;_t<b;_t++){var K=B[_t].g;const Fn=B[_t].map;if(K-=He,K<0)He=Math.max(0,B[_t].g-100),it=!1;else try{K="req"+K+"_"||"";try{var ve=Fn instanceof Map?Fn:Object.entries(Fn);for(const[zs,ds]of ve){let hs=ds;p(ds)&&(hs=Ts(ds)),jt.push(K+zs+"="+encodeURIComponent(hs))}}catch(zs){throw jt.push(K+"type="+encodeURIComponent("_badmap")),zs}}catch{S&&S(Fn)}}if(it){ve=jt.join("&");break e}}ve=void 0}return u=u.i.splice(0,b),g.G=u,ve}function Pc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;be||w(),xe||(be(),xe=!0),R.add(g,u),u.A=0}}function Qi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ns(y(u.Da,u),Bc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ns(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),qr(this),Uc(this))};function to(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Uc(u){u.g=new as(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Lt(u.na);ot(g,"RID","rpc"),ot(g,"SID",u.M),ot(g,"AID",u.K),ot(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ot(g,"TO",u.ia),ot(g,"TYPE","xmlhttp"),Ki(u,g),u.u&&u.o&&Fi(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Bi(Lt(g)),b.u=null,b.R=!0,Aa(b,u)}r.Va=function(){this.C!=null&&(this.C=null,qr(this),Qi(this),Mt(19))};function Va(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function zc(u,g){var b=null;if(u.g==g){Va(u),to(u),u.g=null;var S=2}else if(Ds(u.h,g))b=g.G,Fl(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;S=Na(),pt(S,new Ss(S,b)),Ps(u)}else Pc(u);else if(B=g.m,B==3||B==0&&g.X>0||!(S==1&&Oa(u,g)||S==2&&Qi(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Us(u,5);break;case 4:Us(u,10);break;case 3:Us(u,6);break;default:Us(u,2)}}}function Bc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Us(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),S=u.Ua;const B=!S;S=new Cn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Xt(S,"https"),Bi(S),B?os(S.toString(),b):Xl(S.toString(),b)}else Mt(2);u.I=0,u.l&&u.l.pa(g),qc(u),Ma(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function qc(u){if(u.I=0,u.ja=[],u.l){const g=Gl(u.h);(g.length!=0||u.i.length!=0)&&(X(u.ja,g),X(u.ja,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.oa()}}function Hc(u,g,b){var S=b instanceof Cn?Lt(b):new Cn(b);if(S.g!="")g&&(S.g=g+"."+S.g),Or(S,S.u);else{var B=f.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const K=new Cn(null);S&&Xt(K,S),g&&(K.g=g),B&&Or(K,B),b&&(K.h=b),S=K}return b=u.G,g=u.wa,b&&g&&ot(S,b,g),ot(S,"VER",u.ka),Ki(u,S),S}function Fc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new dt(new Os({ab:b})):new dt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}r=Gc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hr(){}Hr.prototype.g=function(u,g){return new gn(u,g)};function gn(u,g){Ke.call(this),this.g=new Br(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ar(this)}E(gn,Ke),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jl(this.g)},gn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ts(u),u=b);g.i.push(new Vt(g.Ya++,u)),g.I==3&&Ps(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,gn.Z.N.call(this)};function Yc(u){Jt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Yc,Jt);function Kc(){zn.call(this),this.status=1}E(Kc,zn);function ar(u){this.g=u}E(ar,Gc),ar.prototype.ra=function(){pt(this.g,"a")},ar.prototype.qa=function(u){pt(this.g,new Yc(u))},ar.prototype.pa=function(u){pt(this.g,new Kc)},ar.prototype.oa=function(){pt(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,t_=function(){return new Hr},e_=function(){return Na()},Jb=At,km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,cd=Ui,Ul.COMPLETE="complete",Zb=Ul,Sc.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Ho=Sc,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,Wb=dt}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore",Zv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Zm("@firebase/firestore");function ml(){return _a.logLevel}function Se(r,...e){if(_a.logLevel<=Ze.DEBUG){const s=e.map(cg);_a.debug(`Firestore (${Dl}): ${r}`,...s)}}function jr(r,...e){if(_a.logLevel<=Ze.ERROR){const s=e.map(cg);_a.error(`Firestore (${Dl}): ${r}`,...s)}}function El(r,...e){if(_a.logLevel<=Ze.WARN){const s=e.map(cg);_a.warn(`Firestore (${Dl}): ${r}`,...s)}}function cg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,n_(r,i,s)}function n_(r,e,s){let i=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw jr(i),new Error(i)}function lt(r,e,s,i){let o="Unexpected state";typeof s=="string"?o=s:i=s,r||n_(e,o,i)}function Be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ir{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(dn.UNAUTHENTICATED)))}shutdown(){}}class TN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class EN{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){lt(this.o===void 0,42304);let i=this.i;const o=v=>this.i!==i?(i=this.i,s(v)):Promise.resolve();let d=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ti,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ti)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new s_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class SN{constructor(e,s,i){this.P=e,this.T=s,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NN{constructor(e,s,i){this.P=e,this.T=s,this.I=i}getToken(){return Promise.resolve(new SN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){lt(this.o===void 0,3512);const i=d=>{d.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>i(d)))};const o=d=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(lt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Jv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=jN(40);for(let d=0;d<o.length;++d)i.length<20&&o[d]<s&&(i+=e.charAt(o[d]%62))}return i}}function Je(r,e){return r<e?-1:r>e?1:0}function Dm(r,e){const s=Math.min(r.length,e.length);for(let i=0;i<s;i++){const o=r.charAt(i),d=e.charAt(i);if(o!==d)return gm(o)===gm(d)?Je(o,d):gm(o)?1:-1}return Je(r.length,e.length)}const CN=55296,RN=57343;function gm(r){const e=r.charCodeAt(0);return e>=CN&&e<=RN}function Sl(r,e,s){return r.length===e.length&&r.every(((i,o)=>s(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="__name__";class Ys{constructor(e,s,i){s===void 0?s=0:s>e.length&&Ve(637,{offset:s,range:e.length}),i===void 0?i=e.length-s:i>e.length-s&&Ve(1746,{length:i,range:e.length-s}),this.segments=e,this.offset=s,this.len=i}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach((i=>{s.push(i)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,i=this.limit();s<i;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const i=Math.min(e.length,s.length);for(let o=0;o<i;o++){const d=Ys.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return Je(e.length,s.length)}static compareSegments(e,s){const i=Ys.isNumericId(e),o=Ys.isNumericId(s);return i&&!o?-1:!i&&o?1:i&&o?Ys.extractNumericId(e).compare(Ys.extractNumericId(s)):Dm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class yt extends Ys{construct(e,s,i){return new yt(e,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((o=>o.length>0)))}return new yt(s)}static emptyPath(){return new yt([])}}const IN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Ys{construct(e,s,i){return new ln(e,s,i)}static isValidIdentifier(e){return IN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ex}static keyField(){return new ln([ex])}static fromServerFormat(e){const s=[];let i="",o=0;const d=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(d(),o++)}if(d(),f)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(s)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(yt.fromString(e))}static fromName(e){return new Ie(yt.fromString(e).popFirst(5))}static empty(){return new Ie(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return yt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r,e,s){if(!s)throw new _e(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kN(r,e,s,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function tx(r){if(!Ie.isDocumentKey(r))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function nx(r){if(Ie.isDocumentKey(r))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function i_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Pn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=zd(r);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r,e){const s={typeString:r};return e&&(s.value=e),s}function gc(r,e){if(!i_(r))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in e)if(e[i]){const o=e[i].typeString,d="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){s=`JSON field '${i}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${i}' field to equal '${d.value}'`;break}}if(s)throw new _e(re.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=-62135596800,rx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),i=Math.floor((e-1e3*s)*rx);return new bt(s,i)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<sx)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rx}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Ft("string",bt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new bt(0,0))}static max(){return new Pe(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function DN(r,e){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new bt(s+1,0):new bt(s,i));return new Si(o,Ie.empty(),e)}function MN(r){return new Si(r.readTime,r.key,nc)}class Si{constructor(e,s,i){this.readTime=e,this.documentKey=s,this.largestBatchId=i}static min(){return new Si(Pe.min(),Ie.empty(),nc)}static max(){return new Si(Pe.max(),Ie.empty(),nc)}}function ON(r,e){let s=r.readTime.compareTo(e.readTime);return s!==0?s:(s=Ie.comparator(r.documentKey,e.documentKey),s!==0?s:Je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==VN)throw r;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ce(((i,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(i,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(i,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ce?s:ce.resolve(s)}catch(s){return ce.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ce.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ce.reject(s)}static resolve(e){return new ce(((s,i)=>{s(e)}))}static reject(e){return new ce(((s,i)=>{i(e)}))}static waitFor(e){return new ce(((s,i)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(v=>i(v)))})),f=!0,d===o&&s()}))}static or(e){let s=ce.resolve(!1);for(const i of e)s=s.next((o=>o?ce.resolve(o):i()));return s}static forEach(e,s){const i=[];return e.forEach(((o,d)=>{i.push(s.call(this,o,d))})),this.waitFor(i)}static mapArray(e,s){return new ce(((i,o)=>{const d=e.length,f=new Array(d);let p=0;for(let v=0;v<d;v++){const y=v;s(e[y]).next((_=>{f[y]=_,++p,p===d&&i(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new ce(((i,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):i()};d()}))}}function PN(r){const e=r.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ol(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=-1;function qd(r){return r==null}function Sd(r){return r===0&&1/r==-1/0}function UN(r){return typeof r=="number"&&Number.isInteger(r)&&!Sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="";function zN(r){let e="";for(let s=0;s<r.length;s++)e.length>0&&(e=ix(e)),e=BN(r.get(s),e);return ix(e)}function BN(r,e){let s=e;const i=r.length;for(let o=0;o<i;o++){const d=r.charAt(o);switch(d){case"\0":s+="";break;case a_:s+="";break;default:s+=d}}return s}function ix(r){return r+a_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(r){let e=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e++;return e}function Di(r,e){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e(s,r[s])}function l_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,s){this.comparator=e,this.root=s||an.EMPTY}insert(e,s){return new Et(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(e){let s=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return s+i.left.size;o<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,i)=>(e(s,i),!1)))}toString(){const e=[];return this.inorderTraversal(((s,i)=>(e.push(`${s}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,s,i,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?i(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,s,i,o,d){this.key=e,this.value=s,this.color=i??an.RED,this.left=o??an.EMPTY,this.right=d??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,i,o,d){return new an(e??this.key,s??this.value,i??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,i){let o=this;const d=i(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,i),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let i,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,s,i,o,d){return this}insert(e,s,i){return new an(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,i)=>(e(s),!1)))}forEachInRange(e,s){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new lx(this.data.getIterator())}getIteratorFrom(e){return new lx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((i=>{s=s.add(i)})),s}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const s=this.data.getIterator(),i=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Kt(this.comparator);return s.data=e,s}}class lx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Ln([])}unionWith(e){let s=new Kt(ln.comparator);for(const i of this.fields)s=s.add(i);for(const i of e)s=s.add(i);return new Ln(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new o_("Invalid base64 string: "+d):d}})(e);return new on(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new on(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const qN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(r){if(lt(!!r,39018),typeof r=="string"){let e=0;const s=qN.exec(r);if(lt(!!s,46558,{timestamp:r}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="server_timestamp",u_="__type__",d_="__previous_value__",h_="__local_write_time__";function hg(r){return(r?.mapValue?.fields||{})[u_]?.stringValue===c_}function Hd(r){const e=r.mapValue.fields[d_];return hg(e)?Hd(e):e}function sc(r){const e=Ni(r.mapValue.fields[h_].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,s,i,o,d,f,p,v,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=i,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=_}}const Nd="(default)";class rc{constructor(e,s){this.projectId=e,this.database=s||Nd}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__type__",FN="__max__",ed={mapValue:{}},m_="__vector__",Ad="value";function ji(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hg(r)?4:YN(r)?9007199254740991:GN(r)?10:11:Ve(28295,{value:r})}function Js(r,e){if(r===e)return!0;const s=ji(r);if(s!==ji(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sc(r).isEqual(sc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Ni(o.timestampValue),p=Ni(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,d){return Ai(o.bytesValue).isEqual(Ai(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,d){return It(o.geoPointValue.latitude)===It(d.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(d.geoPointValue.longitude)})(r,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return It(o.integerValue)===It(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=It(o.doubleValue),p=It(d.doubleValue);return f===p?Sd(f)===Sd(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return Sl(r.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(ax(f)!==ax(p))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(p[v]===void 0||!Js(f[v],p[v])))return!1;return!0})(r,e);default:return Ve(52216,{left:r})}}function ic(r,e){return(r.values||[]).find((s=>Js(s,e)))!==void 0}function Nl(r,e){if(r===e)return 0;const s=ji(r),i=ji(e);if(s!==i)return Je(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return Je(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=It(d.integerValue||d.doubleValue),v=It(f.integerValue||f.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(r,e);case 3:return ox(r.timestampValue,e.timestampValue);case 4:return ox(sc(r),sc(e));case 5:return Dm(r.stringValue,e.stringValue);case 6:return(function(d,f){const p=Ai(d),v=Ai(f);return p.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),v=f.split("/");for(let y=0;y<p.length&&y<v.length;y++){const _=Je(p[y],v[y]);if(_!==0)return _}return Je(p.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=Je(It(d.latitude),It(f.latitude));return p!==0?p:Je(It(d.longitude),It(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return cx(r.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},v=f.fields||{},y=p[Ad]?.arrayValue,_=v[Ad]?.arrayValue,E=Je(y?.values?.length||0,_?.values?.length||0);return E!==0?E:cx(y,_)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===ed.mapValue&&f===ed.mapValue)return 0;if(d===ed.mapValue)return 1;if(f===ed.mapValue)return-1;const p=d.fields||{},v=Object.keys(p),y=f.fields||{},_=Object.keys(y);v.sort(),_.sort();for(let E=0;E<v.length&&E<_.length;++E){const A=Dm(v[E],_[E]);if(A!==0)return A;const z=Nl(p[v[E]],y[_[E]]);if(z!==0)return z}return Je(v.length,_.length)})(r.mapValue,e.mapValue);default:throw Ve(23264,{he:s})}}function ox(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Je(r,e);const s=Ni(r),i=Ni(e),o=Je(s.seconds,i.seconds);return o!==0?o:Je(s.nanos,i.nanos)}function cx(r,e){const s=r.values||[],i=e.values||[];for(let o=0;o<s.length&&o<i.length;++o){const d=Nl(s[o],i[o]);if(d)return d}return Je(s.length,i.length)}function Al(r){return Mm(r)}function Mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ni(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ai(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Ie.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",o=!0;for(const d of s.values||[])o?o=!1:i+=",",i+=Mm(d);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of i)d?d=!1:o+=",",o+=`${f}:${Mm(s.fields[f])}`;return o+"}"})(r.mapValue):Ve(61005,{value:r})}function ud(r){switch(ji(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(r);return e?16+ud(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,d)=>o+ud(d)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Di(i.fields,((d,f)=>{o+=d.length+ud(f)})),o})(r.mapValue);default:throw Ve(13486,{value:r})}}function ux(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Om(r){return!!r&&"integerValue"in r}function fg(r){return!!r&&"arrayValue"in r}function dx(r){return!!r&&"nullValue"in r}function hx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function dd(r){return!!r&&"mapValue"in r}function GN(r){return(r?.mapValue?.fields||{})[f_]?.stringValue===m_}function $o(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Di(r.mapValue.fields,((s,i)=>e.mapValue.fields[s]=$o(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=$o(r.arrayValue.values[s]);return e}return{...r}}function YN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let i=0;i<e.length-1;++i)if(s=(s.mapValue.fields||{})[e.get(i)],!dd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(s)}setAll(e){let s=ln.emptyPath(),i={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,i,o),i={},o=[],s=p.popLast()}f?i[p.lastSegment()]=$o(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,i,o)}delete(e){const s=this.field(e.popLast());dd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=s.mapValue.fields[e.get(i)];dd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(i)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,i){Di(s,((o,d)=>e[o]=d));for(const o of i)delete e[o]}clone(){return new Nn($o(this.value))}}function g_(r){const e=[];return Di(r.fields,((s,i)=>{const o=new ln([s]);if(dd(i)){const d=g_(i.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,s,i,o,d,f,p){this.key=e,this.documentType=s,this.version=i,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new hn(e,0,Pe.min(),Pe.min(),Pe.min(),Nn.empty(),0)}static newFoundDocument(e,s,i,o){return new hn(e,1,s,Pe.min(),i,o,0)}static newNoDocument(e,s){return new hn(e,2,s,Pe.min(),Pe.min(),Nn.empty(),0)}static newUnknownDocument(e,s){return new hn(e,3,s,Pe.min(),Pe.min(),Nn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,s){this.position=e,this.inclusive=s}}function fx(r,e,s){let i=0;for(let o=0;o<r.position.length;o++){const d=e[o],f=r.position[o];if(d.field.isKeyField()?i=Ie.comparator(Ie.fromName(f.referenceValue),s.key):i=Nl(f,s.data.field(d.field)),d.dir==="desc"&&(i*=-1),i!==0)break}return i}function mx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Js(r.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,s="asc"){this.field=e,this.dir=s}}function KN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{}class Ht extends p_{constructor(e,s,i){super(),this.field=e,this.op=s,this.value=i}static create(e,s,i){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,i):new $N(e,s,i):s==="array-contains"?new ZN(e,i):s==="in"?new JN(e,i):s==="not-in"?new eA(e,i):s==="array-contains-any"?new tA(e,i):new Ht(e,s,i)}static createKeyFieldInFilter(e,s,i){return s==="in"?new XN(e,i):new WN(e,i)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Nl(s,this.value)):s!==null&&ji(this.value)===ji(s)&&this.matchesComparison(Nl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends p_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new _s(e,s)}matches(e){return y_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y_(r){return r.op==="and"}function v_(r){return QN(r)&&y_(r)}function QN(r){for(const e of r.filters)if(e instanceof _s)return!1;return!0}function Vm(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+Al(r.value);if(v_(r))return r.filters.map((e=>Vm(e))).join(",");{const e=r.filters.map((s=>Vm(s))).join(",");return`${r.op}(${e})`}}function x_(r,e){return r instanceof Ht?(function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&Js(i.value,o.value)})(r,e):r instanceof _s?(function(i,o){return o instanceof _s&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((d,f,p)=>d&&x_(f,o.filters[p])),!0):!1})(r,e):void Ve(19439)}function b_(r){return r instanceof Ht?(function(s){return`${s.field.canonicalString()} ${s.op} ${Al(s.value)}`})(r):r instanceof _s?(function(s){return s.op.toString()+" {"+s.getFilters().map(b_).join(" ,")+"}"})(r):"Filter"}class $N extends Ht{constructor(e,s,i){super(e,s,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const s=Ie.comparator(e.key,this.key);return this.matchesComparison(s)}}class XN extends Ht{constructor(e,s){super(e,"in",s),this.keys=__("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class WN extends Ht{constructor(e,s){super(e,"not-in",s),this.keys=__("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function __(r,e){return(e.arrayValue?.values||[]).map((s=>Ie.fromName(s.referenceValue)))}class ZN extends Ht{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return fg(s)&&ic(s.arrayValue,this.value)}}class JN extends Ht{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ic(this.value.arrayValue,s)}}class eA extends Ht{constructor(e,s){super(e,"not-in",s)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ic(this.value.arrayValue,s)}}class tA extends Ht{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!fg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>ic(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,s=null,i=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=i,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function gx(r,e=null,s=[],i=[],o=null,d=null,f=null){return new nA(r,e,s,i,o,d,f)}function mg(r){const e=Be(r);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((i=>Vm(i))).join(","),s+="|ob:",s+=e.orderBy.map((i=>(function(d){return d.field.canonicalString()+d.dir})(i))).join(","),qd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>Al(i))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>Al(i))).join(",")),e.Te=s}return e.Te}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!KN(r.orderBy[s],e.orderBy[s]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!x_(r.filters[s],e.filters[s]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!mx(r.startAt,e.startAt)&&mx(r.endAt,e.endAt)}function Lm(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,s=null,i=[],o=[],d=null,f="F",p=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sA(r,e,s,i,o,d,f,p){return new Vl(r,e,s,i,o,d,f,p)}function pg(r){return new Vl(r)}function px(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function w_(r){return r.collectionGroup!==null}function Xo(r){const e=Be(r);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Kt(ln.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new ac(d,i))})),s.has(ln.keyField().canonicalString())||e.Ie.push(new ac(ln.keyField(),i))}return e.Ie}function $s(r){const e=Be(r);return e.Ee||(e.Ee=rA(e,Xo(r))),e.Ee}function rA(r,e){if(r.limitType==="F")return gx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new ac(o.field,d)}));const s=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return gx(r.path,r.collectionGroup,e,r.filters,r.limit,s,i)}}function Pm(r,e){const s=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function Um(r,e,s){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,s,r.startAt,r.endAt)}function Fd(r,e){return gg($s(r),$s(e))&&r.limitType===e.limitType}function T_(r){return`${mg($s(r))}|lt:${r.limitType}`}function gl(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((o=>b_(o))).join(", ")}]`),qd(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((o=>Al(o))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((o=>Al(o))).join(",")),`Target(${i})`})($s(r))}; limitType=${r.limitType})`}function Gd(r,e){return e.isFoundDocument()&&(function(i,o){const d=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(d):Ie.isDocumentKey(i.path)?i.path.isEqual(d):i.path.isImmediateParentOf(d)})(r,e)&&(function(i,o){for(const d of Xo(i))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const d of i.filters)if(!d.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,p,v){const y=fx(f,p,v);return f.inclusive?y<=0:y<0})(i.startAt,Xo(i),o)||i.endAt&&!(function(f,p,v){const y=fx(f,p,v);return f.inclusive?y>=0:y>0})(i.endAt,Xo(i),o))})(r,e)}function iA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function E_(r){return(e,s)=>{let i=!1;for(const o of Xo(r)){const d=aA(o,e,s);if(d!==0)return d;i=i||o.field.isKeyField()}return 0}}function aA(r,e,s){const i=r.field.isKeyField()?Ie.comparator(e.key,s.key):(function(d,f,p){const v=f.data.field(d),y=p.data.field(d);return v!==null&&y!==null?Nl(v,y):Ve(42886)})(r.field,e,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i!==void 0){for(const[o,d]of i)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[s]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((s,i)=>{for(const[o,d]of i)e(o,d)}))}isEmpty(){return l_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Et(Ie.comparator);function Cr(){return lA}const S_=new Et(Ie.comparator);function Fo(...r){let e=S_;for(const s of r)e=e.insert(s.key,s);return e}function N_(r){let e=S_;return r.forEach(((s,i)=>e=e.insert(s,i.overlayedDocument))),e}function ma(){return Wo()}function A_(){return Wo()}function Wo(){return new Ta((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oA=new Et(Ie.comparator),cA=new Kt(Ie.comparator);function et(...r){let e=cA;for(const s of r)e=e.add(s);return e}const uA=new Kt(Je);function dA(){return uA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function j_(r){return{integerValue:""+r}}function hA(r,e){return UN(e)?j_(e):yg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function fA(r,e,s){return r instanceof Cd?(function(o,d){const f={fields:{[u_]:{stringValue:c_},[h_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&hg(d)&&(d=Hd(d)),d&&(f.fields[d_]=d),{mapValue:f}})(s,e):r instanceof lc?R_(r,e):r instanceof oc?I_(r,e):(function(o,d){const f=C_(o,d),p=yx(f)+yx(o.Ae);return Om(f)&&Om(o.Ae)?j_(p):yg(o.serializer,p)})(r,e)}function mA(r,e,s){return r instanceof lc?R_(r,e):r instanceof oc?I_(r,e):s}function C_(r,e){return r instanceof Rd?(function(i){return Om(i)||(function(d){return!!d&&"doubleValue"in d})(i)})(e)?e:{integerValue:0}:null}class Cd extends Yd{}class lc extends Yd{constructor(e){super(),this.elements=e}}function R_(r,e){const s=k_(e);for(const i of r.elements)s.some((o=>Js(o,i)))||s.push(i);return{arrayValue:{values:s}}}class oc extends Yd{constructor(e){super(),this.elements=e}}function I_(r,e){let s=k_(e);for(const i of r.elements)s=s.filter((o=>!Js(o,i)));return{arrayValue:{values:s}}}class Rd extends Yd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function yx(r){return It(r.integerValue||r.doubleValue)}function k_(r){return fg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function gA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof lc&&o instanceof lc||i instanceof oc&&o instanceof oc?Sl(i.elements,o.elements,Js):i instanceof Rd&&o instanceof Rd?Js(i.Ae,o.Ae):i instanceof Cd&&o instanceof Cd})(r.transform,e.transform)}class pA{constructor(e,s){this.version=e,this.transformResults=s}}class yn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kd{}function D_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qd(r.key,yn.none()):new pc(r.key,r.data,yn.none());{const s=r.data,i=Nn.empty();let o=new Kt(ln.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?i.delete(d):i.set(d,f),o=o.add(d)}return new Mi(r.key,i,new Ln(o.toArray()),yn.none())}}function yA(r,e,s){r instanceof pc?(function(o,d,f){const p=o.value.clone(),v=xx(o.fieldTransforms,d,f.transformResults);p.setAll(v),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,s):r instanceof Mi?(function(o,d,f){if(!hd(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=xx(o.fieldTransforms,d,f.transformResults),v=d.data;v.setAll(M_(o)),v.setAll(p),d.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Zo(r,e,s,i){return r instanceof pc?(function(d,f,p,v){if(!hd(d.precondition,f))return p;const y=d.value.clone(),_=bx(d.fieldTransforms,v,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,s,i):r instanceof Mi?(function(d,f,p,v){if(!hd(d.precondition,f))return p;const y=bx(d.fieldTransforms,v,f),_=f.data;return _.setAll(M_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((E=>E.field)))})(r,e,s,i):(function(d,f,p){return hd(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,s)}function vA(r,e){let s=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),d=C_(i.transform,o||null);d!=null&&(s===null&&(s=Nn.empty()),s.set(i.field,d))}return s||null}function vx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sl(i,o,((d,f)=>gA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class pc extends Kd{constructor(e,s,i,o=[]){super(),this.key=e,this.value=s,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mi extends Kd{constructor(e,s,i,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=i,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function M_(r){const e=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);e.set(s,i)}})),e}function xx(r,e,s){const i=new Map;lt(r.length===s.length,32656,{Re:s.length,Ve:r.length});for(let o=0;o<s.length;o++){const d=r[o],f=d.transform,p=e.data.field(d.field);i.set(d.field,mA(f,p,s[o]))}return i}function bx(r,e,s){const i=new Map;for(const o of r){const d=o.transform,f=s.data.field(o.field);i.set(o.field,fA(d,f,e))}return i}class Qd extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xA extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,s,i,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,s){const i=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&yA(d,e,i[o])}}applyToLocalView(e,s){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const i=A_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const v=D_(f,p);v!==null&&i.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),et())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,i)=>vx(s,i)))&&Sl(this.baseMutations,e.baseMutations,((s,i)=>vx(s,i)))}}class vg{constructor(e,s,i,o){this.batch=e,this.commitVersion=s,this.mutationResults=i,this.docVersions=o}static from(e,s,i){lt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return oA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,i[f].version);return new vg(e,s,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function TA(r){switch(r){case re.OK:return Ve(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function O_(r){if(r===void 0)return jr("GRPC error has no .code"),re.UNKNOWN;switch(r){case qt.OK:return re.OK;case qt.CANCELLED:return re.CANCELLED;case qt.UNKNOWN:return re.UNKNOWN;case qt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case qt.INTERNAL:return re.INTERNAL;case qt.UNAVAILABLE:return re.UNAVAILABLE;case qt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case qt.NOT_FOUND:return re.NOT_FOUND;case qt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case qt.ABORTED:return re.ABORTED;case qt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case qt.DATA_LOSS:return re.DATA_LOSS;default:return Ve(39323,{code:r})}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new wi([4294967295,4294967295],0);function _x(r){const e=EA().encode(r),s=new Xb;return s.update(e),new Uint8Array(s.digest())}function wx(r){const e=new DataView(r.buffer),s=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new wi([s,i],0),new wi([o,d],0)]}class xg{constructor(e,s,i){if(this.bitmap=e,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Go(`Invalid padding: ${s}`);if(i<0)throw new Go(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${i}`);if(e.length===0&&s!==0)throw new Go(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=wi.fromNumber(this.ge)}ye(e,s,i){let o=e.add(s.multiply(wi.fromNumber(i)));return o.compare(SA)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=_x(e),[i,o]=wx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);if(!this.we(f))return!1}return!0}static create(e,s,i){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new xg(d,o,s);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=_x(e),[i,o]=wx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),i=e%8;this.bitmap[s]|=1<<i}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,s,i,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,i){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,s,i)),new $d(Pe.min(),o,new Et(Je),Cr(),et())}}class yc{constructor(e,s,i,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,i){return new yc(i,s,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,s,i,o){this.be=e,this.removedTargetIds=s,this.key=i,this.De=o}}class V_{constructor(e,s){this.targetId=e,this.Ce=s}}class L_{constructor(e,s,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=i,this.cause=o}}class Tx{constructor(){this.ve=0,this.Fe=Ex(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),s=et(),i=et();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:i=i.add(o);break;default:Ve(38017,{changeType:d})}})),new yc(this.Me,this.xe,e,s,i)}qe(){this.Oe=!1,this.Fe=Ex()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.Je=td(),this.He=td(),this.Ye=new Et(Je)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const i=this.nt(s);switch(e.state){case 0:this.rt(s)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((i,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,i=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Lm(d))if(i===0){const f=new Ie(d.path);this.et(s,f,hn.newNoDocument(f,Pe.min()))}else lt(i===1,20013,{expectedCount:i});else{const f=this._t(s);if(f!==i){const p=this.ut(e),v=p?this.ct(p,e,f):1;if(v!==0){this.it(s);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Ai(i).toUint8Array()}catch(v){if(v instanceof o_)return El("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new xg(f,o,d)}catch(v){return El(v instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,s,i){return s.Ce.count===i-this.Pt(e,s.targetId)?0:2}Pt(e,s){const i=this.Ge.getRemoteKeysForTarget(s);let o=0;return i.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Lm(p.target)){const v=new Ie(p.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,hn.newNoDocument(v,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let i=et();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new $d(e,s,this.Ye,this.je,i);return this.je=Cr(),this.Je=td(),this.He=td(),this.Ye=new Et(Je),o}Xe(e,s){if(!this.rt(e))return;const i=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,i),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),i&&(this.je=this.je.insert(s,i))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Tx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Kt(Je),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Kt(Je),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Se("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function td(){return new Et(Ie.comparator)}function Ex(){return new Et(Ie.comparator)}const AA={asc:"ASCENDING",desc:"DESCENDING"},jA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CA={and:"AND",or:"OR"};class RA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function zm(r,e){return r.useProto3Json||qd(e)?e:{value:e}}function Id(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IA(r,e){return Id(r,e.toTimestamp())}function Xs(r){return lt(!!r,49232),Pe.fromTimestamp((function(s){const i=Ni(s);return new bt(i.seconds,i.nanos)})(r))}function bg(r,e){return Bm(r,e).canonicalString()}function Bm(r,e){const s=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?s:s.child(e)}function U_(r){const e=yt.fromString(r);return lt(F_(e),10190,{key:e.toString()}),e}function qm(r,e){return bg(r.databaseId,e.path)}function pm(r,e){const s=U_(e);if(s.get(1)!==r.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Ie(B_(s))}function z_(r,e){return bg(r.databaseId,e)}function kA(r){const e=U_(r);return e.length===4?yt.emptyPath():B_(e)}function Hm(r){return new yt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function B_(r){return lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Sx(r,e,s){return{name:qm(r,e),fields:s.value.mapValue.fields}}function DA(r,e){let s;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ve(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(lt(_===void 0||typeof _=="string",58123),on.fromBase64String(_||"")):(lt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),on.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?re.UNKNOWN:O_(y.code);return new _e(_,y.message||"")})(f);s=new L_(i,o,d,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(r,i.document.name),d=Xs(i.document.updateTime),f=i.document.createTime?Xs(i.document.createTime):Pe.min(),p=new Nn({mapValue:{fields:i.document.fields}}),v=hn.newFoundDocument(o,d,f,p),y=i.targetIds||[],_=i.removedTargetIds||[];s=new fd(y,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(r,i.document),d=i.readTime?Xs(i.readTime):Pe.min(),f=hn.newNoDocument(o,d),p=i.removedTargetIds||[];s=new fd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(r,i.document),d=i.removedTargetIds||[];s=new fd([],d,o,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:d}=i,f=new wA(o,d),p=i.targetId;s=new V_(p,f)}}return s}function MA(r,e){let s;if(e instanceof pc)s={update:Sx(r,e.key,e.value)};else if(e instanceof Qd)s={delete:qm(r,e.key)};else if(e instanceof Mi)s={update:Sx(r,e.key,e.data),updateMask:HA(e.fieldMask)};else{if(!(e instanceof xA))return Ve(16599,{Vt:e.type});s={verify:qm(r,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((i=>(function(d,f){const p=f.transform;if(p instanceof Cd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof oc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Rd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ve(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:IA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Ve(27497)})(r,e.precondition)),s}function OA(r,e){return r&&r.length>0?(lt(e!==void 0,14353),r.map((s=>(function(o,d){let f=o.updateTime?Xs(o.updateTime):Xs(d);return f.isEqual(Pe.min())&&(f=Xs(d)),new pA(f,o.transformResults||[])})(s,e)))):[]}function VA(r,e){return{documents:[z_(r,e.path)]}}function LA(r,e){const s={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=z_(r,o);const d=(function(y){if(y.length!==0)return H_(_s.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:pl(A.field),direction:zA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=zm(r,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function PA(r){let e=kA(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let o=null;if(i>0){lt(i===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(E){const A=q_(E);return A instanceof _s&&v_(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(E){return E.map((A=>(function(X){return new ac(yl(X.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(A)))})(s.orderBy));let p=null;s.limit&&(p=(function(E){let A;return A=typeof E=="object"?E.value:E,qd(A)?null:A})(s.limit));let v=null;s.startAt&&(v=(function(E){const A=!!E.before,z=E.values||[];return new jd(z,A)})(s.startAt));let y=null;return s.endAt&&(y=(function(E){const A=!E.before,z=E.values||[];return new jd(z,A)})(s.endAt)),sA(e,o,f,d,p,"F",v,y)}function UA(r,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function q_(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=yl(s.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yl(s.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=yl(s.unaryFilter.field);return Ht.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=yl(s.unaryFilter.field);return Ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ht.create(yl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return _s.create(s.compositeFilter.filters.map((i=>q_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(s.compositeFilter.op))})(r):Ve(30097,{filter:r})}function zA(r){return AA[r]}function BA(r){return jA[r]}function qA(r){return CA[r]}function pl(r){return{fieldPath:r.canonicalString()}}function yl(r){return ln.fromServerFormat(r.fieldPath)}function H_(r){return r instanceof Ht?(function(s){if(s.op==="=="){if(hx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NAN"}};if(dx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(hx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NAN"}};if(dx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(s.field),op:BA(s.op),value:s.value}}})(r):r instanceof _s?(function(s){const i=s.getFilters().map((o=>H_(o)));return i.length===1?i[0]:{compositeFilter:{op:qA(s.op),filters:i}}})(r):Ve(54877,{filter:r})}function HA(r){const e=[];return r.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function F_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,s,i,o,d=Pe.min(),f=Pe.min(),p=on.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.yt=e}}function GA(r){const e=PA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.Cn=new KA}addToCollectionParentIndex(e,s){return this.Cn.add(s),ce.resolve()}getCollectionParents(e,s){return ce.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ce.resolve()}deleteFieldIndex(e,s){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,s){return ce.resolve()}getDocumentsMatchingTarget(e,s){return ce.resolve(null)}getIndexType(e,s){return ce.resolve(0)}getFieldIndexes(e,s){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,s){return ce.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,s){return ce.resolve(Si.min())}updateCollectionGroup(e,s,i){return ce.resolve()}updateIndexEntries(e,s){return ce.resolve()}}class KA{constructor(){this.index={}}add(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s]||new Kt(yt.comparator),d=!o.has(i);return this.index[s]=o.add(i),d}has(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Kt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G_=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(G_,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jl(0)}static cr(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="LruGarbageCollector",QA=1048576;function jx([r,e],[s,i]){const o=Je(r,s);return o===0?Je(e,i):o}class $A{constructor(e){this.Ir=e,this.buffer=new Kt(jx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();jx(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class XA{constructor(e,s,i){this.garbageCollector=e,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(Ax,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ol(s)?Se(Ax,"Ignoring IndexedDB error during garbage collection: ",s):await Ml(s)}await this.Vr(3e5)}))}}class WA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(e,s){if(s===0)return ce.resolve(Bd.ce);const i=new $A(s);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,s,i){return this.mr.removeTargets(e,s,i)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Nx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let i,o,d,f,p,v,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,s)))).next((E=>(d=E,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),ml()<=Ze.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(v-p)+`ms
	Removed ${E} documents in `+(y-v)+`ms
Total Duration: ${y-_}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:E}))))}}function ZA(r,e){return new WA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.changes=new Ta((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?ce.resolve(i):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,s,i,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,s){let i=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(i!==null&&Zo(i.mutation,o,Ln.empty(),bt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.getLocalViewOfDocuments(e,i,et()).next((()=>i))))}getLocalViewOfDocuments(e,s,i=et()){const o=ma();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,i).next((d=>{let f=Fo();return d.forEach(((p,v)=>{f=f.insert(p,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const i=ma();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,et())))}populateOverlays(e,s,i){const o=[];return i.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,i,o){let d=Cr();const f=Wo(),p=(function(){return Wo()})();return s.forEach(((v,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Mi)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Zo(_.mutation,y,_.mutation.getFieldMask(),bt.now())):f.set(y.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new e4(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const i=Wo();let o=new Et(((f,p)=>f-p)),d=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((v=>{const y=s.get(v);if(y===null)return;let _=i.get(v)||Ln.empty();_=p.applyToLocalView(y,_),i.set(v,_);const E=(o.get(p.batchId)||et()).add(v);o=o.insert(p.batchId,E)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),y=v.key,_=v.value,E=A_();_.forEach((A=>{if(!d.has(A)){const z=D_(s.get(A),i.get(A));z!==null&&E.set(A,z),d=d.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ce.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,s,i,o){return(function(f){return Ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):w_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,i,o):this.getDocumentsMatchingCollectionQuery(e,s,i,o)}getNextDocuments(e,s,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,i,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,i.largestBatchId,o-d.size):ce.resolve(ma());let p=nc,v=d;return f.next((y=>ce.forEach(y,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),d.get(_)?ce.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{v=v.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,v,y,et()))).next((_=>({batchId:p,changes:N_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ie(s)).next((i=>{let o=Fo();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,i,o){const d=s.collectionGroup;let f=Fo();return this.indexManager.getCollectionParents(e,d).next((p=>ce.forEach(p,(v=>{const y=(function(E,A){return new Vl(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,A)=>{f=f.insert(E,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,i,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,i.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,i,d,o)))).next((f=>{d.forEach(((v,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,hn.newInvalidDocument(_)))}));let p=Fo();return f.forEach(((v,y)=>{const _=d.get(v);_!==void 0&&Zo(_.mutation,y,Ln.empty(),bt.now()),Gd(s,y)&&(p=p.insert(v,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ce.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Xs(o.createTime)}})(s)),ce.resolve()}getNamedQuery(e,s){return ce.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:GA(o.bundledQuery),readTime:Xs(o.readTime)}})(s)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.overlays=new Et(Ie.comparator),this.qr=new Map}getOverlay(e,s){return ce.resolve(this.overlays.get(s))}getOverlays(e,s){const i=ma();return ce.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&i.set(o,d)})))).next((()=>i))}saveOverlays(e,s,i){return i.forEach(((o,d)=>{this.St(e,s,d)})),ce.resolve()}removeOverlaysForBatchId(e,s,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(i)),ce.resolve()}getOverlaysForCollection(e,s,i){const o=ma(),d=s.length+1,f=new Ie(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const v=p.getNext().value,y=v.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&v.largestBatchId>i&&o.set(v.getKey(),v)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,s,i,o){let d=new Et(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>i){let _=d.get(y.largestBatchId);_===null&&(_=ma(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=ma(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return ce.resolve(p)}St(e,s,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new _A(s,i));let d=this.qr.get(s);d===void 0&&(d=et(),this.qr.set(s,d)),this.qr.set(s,d.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new Kt(Zt.$r),this.Ur=new Kt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const i=new Zt(e,s);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,s){e.forEach((i=>this.addReference(i,s)))}removeReference(e,s){this.Gr(new Zt(e,s))}zr(e,s){e.forEach((i=>this.removeReference(i,s)))}jr(e){const s=new Ie(new yt([])),i=new Zt(s,e),o=new Zt(s,e+1),d=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ie(new yt([])),i=new Zt(s,e),o=new Zt(s,e+1);let d=et();return this.Ur.forEachInRange([i,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new Zt(e,0),i=this.Qr.firstAfterOrEqual(s);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ie.comparator(e.key,s.key)||Je(e.Yr,s.Yr)}static Kr(e,s){return Je(e.Yr,s.Yr)||Ie.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Zt.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,i,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new bA(d,s,i,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new Zt(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(f)}lookupMutationBatch(e,s){return ce.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const i=s+1,o=this.ei(i),d=o<0?0:o;return ce.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?dg:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const i=new Zt(s,0),o=new Zt(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([i,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),ce.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let i=new Kt(Je);return s.forEach((o=>{const d=new Zt(o,0),f=new Zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{i=i.add(p.Yr)}))})),ce.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,s){const i=s.path,o=i.length+1;let d=i;Ie.isDocumentKey(d)||(d=d.child(""));const f=new Zt(new Ie(d),0);let p=new Kt(Je);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(v.Yr)),!0)}),f),ce.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){lt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ce.forEach(s.mutations,(o=>{const d=new Zt(o.key,s.batchId);return i=i.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,s){const i=new Zt(s,0),o=this.Zr.firstAfterOrEqual(i);return ce.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const i=s.key,o=this.docs.get(i),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const i=this.docs.get(s);return ce.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(s))}getEntries(e,s){let i=Cr();return s.forEach((o=>{const d=this.docs.get(o);i=i.insert(o,d?d.document.mutableCopy():hn.newInvalidDocument(o))})),ce.resolve(i)}getDocumentsMatchingQuery(e,s,i,o){let d=Cr();const f=s.path,p=new Ie(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:y,value:{document:_}}=v.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||ON(MN(_),i)<=0||(o.has(_.key)||Gd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return ce.resolve(d)}getAllFromCollectionGroup(e,s,i,o){Ve(9500)}ii(e,s){return ce.forEach(this.docs,(i=>s(i)))}newChangeBuffer(e){return new l4(this)}getSize(e){return ce.resolve(this.size)}}class l4 extends JA{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ce.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.persistence=e,this.si=new Ta((s=>mg(s)),gg),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=jl.ur()}forEachTarget(e,s){return this.si.forEach(((i,o)=>s(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.oi&&(this.oi=s),ce.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new jl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ce.resolve()}updateTargetData(e,s){return this.Pr(s),ce.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,s,i){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ce.waitFor(d).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,s){const i=this.si.get(s)||null;return ce.resolve(i)}addMatchingKeys(e,s,i){return this._i.Wr(s,i),ce.resolve()}removeMatchingKeys(e,s,i){this._i.zr(s,i);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),ce.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ce.resolve()}getMatchingKeysForTargetId(e,s){const i=this._i.Hr(s);return ce.resolve(i)}containsKey(e,s){return ce.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Bd(0),this.li=!1,this.li=!0,this.hi=new r4,this.referenceDelegate=e(this),this.Pi=new o4(this),this.indexManager=new YA,this.remoteDocumentCache=(function(o){return new a4(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new FA(s),this.Ii=new n4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new s4,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let i=this.ui[e.toKey()];return i||(i=new i4(s,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,i){Se("MemoryPersistence","Starting transaction:",e);const o=new c4(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return ce.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,s))))}}class c4 extends LN{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new wg(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,s,i){return this.Ri.addReference(i,s),this.fi.delete(i.toString()),ce.resolve()}removeReference(e,s,i){return this.Ri.removeReference(i,s),this.fi.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ce.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>i.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(i=>{const o=Ie.fromPath(i);return this.gi(e,o).next((d=>{d||s.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((i=>{i?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ce.or([()=>ce.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class kd{constructor(e,s){this.persistence=e,this.pi=new Ta((i=>zN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=ZA(this,s)}static mi(e,s){return new kd(e,s)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>s.next((o=>i+o))))}wr(e){let s=0;return this.pr(e,(i=>{s++})).next((()=>s))}pr(e,s){return ce.forEach(this.pi,((i,o)=>this.br(e,i,o).next((d=>d?ce.resolve():s(o)))))}removeTargets(e,s,i){return this.persistence.getTargetCache().removeTargets(e,s,i)}removeOrphanedDocuments(e,s){let i=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(i++,d.removeEntry(f,Pe.min()))})))).next((()=>d.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}removeTarget(e,s){const i=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}removeReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=ud(e.data.value)),s}br(e,s,i){return ce.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ce.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,s,i,o){this.targetId=e,this.fromCache=s,this.Es=i,this.ds=o}static As(e,s){let i=et(),o=et();for(const d of s.docChanges)switch(d.type){case 0:i=i.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new Tg(e,s.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Pw()?8:PN(fn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,i,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,i).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new u4;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,i,o){return i.documentReadCount<this.fs?(ml()<=Ze.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",gl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(ml()<=Ze.DEBUG&&Se("QueryEngine","Query:",gl(s),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ml()<=Ze.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",gl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(s))):ce.resolve())}ys(e,s){if(px(s))return ce.resolve(null);let i=$s(s);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Um(s,null,"F"),i=$s(s)),this.indexManager.getDocumentsMatchingTarget(e,i).next((d=>{const f=et(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((v=>{const y=this.Ds(s,p);return this.Cs(s,y,f,v.readTime)?this.ys(e,Um(s,null,"F")):this.vs(e,y,s,v)}))))})))))}ws(e,s,i,o){return px(s)||o.isEqual(Pe.min())?ce.resolve(null):this.ps.getDocuments(e,i).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,i,o)?ce.resolve(null):(ml()<=Ze.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),gl(s)),this.vs(e,f,s,DN(o,nc)).next((p=>p)))}))}Ds(e,s){let i=new Kt(E_(e));return s.forEach(((o,d)=>{Gd(e,d)&&(i=i.add(d))})),i}Cs(e,s,i,o){if(e.limit===null)return!1;if(i.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,i){return ml()<=Ze.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",gl(s)),this.ps.getDocumentsMatchingQuery(e,s,Si.min(),i)}vs(e,s,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",h4=3e8;class f4{constructor(e,s,i,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Et(Je),this.xs=new Ta((d=>mg(d)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function m4(r,e,s,i){return new f4(r,e,s,i)}async function K_(r,e){const s=Be(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return s.mutationQueue.getAllMutationBatches(i).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(i)))).next((d=>{const f=[],p=[];let v=et();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(i,v).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function g4(r,e){const s=Be(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,y,_){const E=y.batch,A=E.keys();let z=ce.resolve();return A.forEach((X=>{z=z.next((()=>_.getEntry(v,X))).next(($=>{const U=y.docVersions.get(X);lt(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),_.addEntry($)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(v,E)))})(s,i,e,d).next((()=>d.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let v=et();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(v=v.add(p.batch.mutations[y].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(i,o)))}))}function Q_(r){const e=Be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function p4(r,e){const s=Be(r),i=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,E))));let z=A.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(on.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(_.resumeToken,i)),o=o.insert(E,z),(function($,U,ue){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=h4?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0})(A,z,_)&&p.push(s.Pi.updateTargetData(d,z))}));let v=Cr(),y=et();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(y4(d,f,e.documentUpdates).next((_=>{v=_.ks,y=_.qs}))),!i.isEqual(Pe.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((E=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,i)));p.push(_)}return ce.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,v,y))).next((()=>v))})).then((d=>(s.Ms=o,d)))}function y4(r,e,s){let i=et(),o=et();return s.forEach((d=>i=i.add(d))),e.getEntries(r,i).next((d=>{let f=Cr();return s.forEach(((p,v)=>{const y=d.get(p);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(Pe.min())?(e.removeEntry(p,v.readTime),f=f.insert(p,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),f=f.insert(p,v)):Se(Eg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function v4(r,e){const s=Be(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=dg),s.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function x4(r,e){const s=Be(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return s.Pi.getTargetData(i,e).next((d=>d?(o=d,ce.resolve(o)):s.Pi.allocateTargetId(i).next((f=>(o=new vi(e,f,"TargetPurposeListen",i.currentSequenceNumber),s.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=s.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(i.targetId,i),s.xs.set(e,i.targetId)),i}))}async function Fm(r,e,s){const i=Be(r),o=i.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",d,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ol(f))throw f;Se(Eg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Cx(r,e,s){const i=Be(r);let o=Pe.min(),d=et();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,y,_){const E=Be(v),A=E.xs.get(_);return A!==void 0?ce.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,_)})(i,f,$s(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,p.targetId).next((v=>{d=v}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,s?o:Pe.min(),s?d:et()))).next((p=>(b4(i,iA(e),p),{documents:p,Qs:d})))))}function b4(r,e,s){let i=r.Os.get(e)||Pe.min();s.forEach(((o,d)=>{d.readTime.compareTo(i)>0&&(i=d.readTime)})),r.Os.set(e,i)}class Rx{constructor(){this.activeTargetIds=dA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _4{constructor(){this.Mo=new Rx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,i){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,i){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Rx,Promise.resolve()}handleUserChange(e,s,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="ConnectivityMonitor";class kx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(Ix,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(Ix,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Gm(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",T4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class E4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,s,i,o,d){const f=Gm(),p=this.zo(e,s.toUriEncodedString());Se(ym,`Sending RPC '${e}' ${f}:`,p,i);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,d);const{host:y}=new URL(p),_=Rl(y);return this.Jo(e,p,v,i,_).then((E=>(Se(ym,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw El(ym,`RPC '${e}' ${f} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,s,i,o,d,f){return this.Go(e,s,i,o,d)}jo(e,s,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),i&&i.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const i=T4[e];return`${this.Uo}/v1/${s}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class N4 extends E4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,i,o,d){const f=Gm();return new Promise(((p,v)=>{const y=new Wb;y.setWithCredentials(!0),y.listenOnce(Zb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case cd.NO_ERROR:const E=y.getResponseJson();Se(un,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),p(E);break;case cd.TIMEOUT:Se(un,`RPC '${e}' ${f} timed out`),v(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const A=y.getStatus();if(Se(un,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=z?.error;if(X&&X.status&&X.message){const $=(function(ue){const W=ue.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(W)>=0?W:re.UNKNOWN})(X.status);v(new _e($,X.message))}else v(new _e(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Se(un,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Se(un,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,i,15)}))}T_(e,s,i){const o=Gm(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=t_(),p=e_(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,i),v.encodeInitMessageHeaders=!0;const _=d.join("");Se(un,`Creating RPC '${e}' stream ${o}: ${_}`,v);const E=f.createWebChannel(_,v);this.I_(E);let A=!1,z=!1;const X=new S4({Yo:U=>{z?Se(un,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(Se(un,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),Se(un,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,ue,W)=>{U.listen(ue,(me=>{try{W(me)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return $(E,Ho.EventType.OPEN,(()=>{z||(Se(un,`RPC '${e}' stream ${o} transport opened.`),X.o_())})),$(E,Ho.EventType.CLOSE,(()=>{z||(z=!0,Se(un,`RPC '${e}' stream ${o} transport closed`),X.a_(),this.E_(E))})),$(E,Ho.EventType.ERROR,(U=>{z||(z=!0,El(un,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),X.a_(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),$(E,Ho.EventType.MESSAGE,(U=>{if(!z){const ue=U.data[0];lt(!!ue,16349);const W=ue,me=W?.error||W[0]?.error;if(me){Se(un,`RPC '${e}' stream ${o} received error:`,me);const ae=me.status;let be=(function(w){const N=qt[w];if(N!==void 0)return O_(N)})(ae),xe=me.message;be===void 0&&(be=re.INTERNAL,xe="Unknown error status: "+ae+" with message "+me.message),z=!0,X.a_(new _e(be,xe)),E.close()}else Se(un,`RPC '${e}' stream ${o} received:`,ue),X.u_(ue)}})),$(p,Jb.STAT_EVENT,(U=>{U.stat===km.PROXY?Se(un,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===km.NOPROXY&&Se(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(r){return new RA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,s,i=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=i,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-i);o>0&&Se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="PersistentStream";class X_{constructor(e,s,i,o,d,f,p,v){this.Mi=e,this.S_=i,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===re.RESOURCE_EXHAUSTED?(jr(s.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===s&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,s){const i=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(Dx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Se(Dx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A4 extends X_{constructor(e,s,i,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=DA(this.serializer,e),i=(function(d){if(!("targetChange"in d))return Pe.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?Pe.min():f.readTime?Xs(f.readTime):Pe.min()})(e);return this.listener.H_(s,i)}Y_(e){const s={};s.database=Hm(this.serializer),s.addTarget=(function(d,f){let p;const v=f.target;if(p=Lm(v)?{documents:VA(d,v)}:{query:LA(d,v).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=P_(d,f.resumeToken);const y=zm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Pe.min())>0){p.readTime=Id(d,f.snapshotVersion.toTimestamp());const y=zm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=UA(this.serializer,e);i&&(s.labels=i),this.q_(s)}Z_(e){const s={};s.database=Hm(this.serializer),s.removeTarget=e,this.q_(s)}}class j4 extends X_{constructor(e,s,i,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=OA(e.writeResults,e.commitTime),i=Xs(e.commitTime);return this.listener.na(i,s)}ra(){const e={};e.database=Hm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((i=>MA(this.serializer,i)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{}class R4 extends C4{constructor(e,s,i,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Bm(s,i),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new _e(re.UNKNOWN,d.toString())}))}Ho(e,s,i,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Bm(s,i),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new _e(re.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class I4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jr(s),this.aa=!1):Se("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class k4{constructor(e,s,i,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{Ea(this)&&(Se(wa,"Restarting streams for network reachability change."),await(async function(v){const y=Be(v);y.Ea.add(4),await vc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Wd(y)})(this))}))})),this.Ra=new I4(i,o)}}async function Wd(r){if(Ea(r))for(const e of r.da)await e(!0)}async function vc(r){for(const e of r.da)await e(!1)}function W_(r,e){const s=Be(r);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),jg(s)?Ag(s):Ll(s).O_()&&Ng(s,e))}function Sg(r,e){const s=Be(r),i=Ll(s);s.Ia.delete(e),i.O_()&&Z_(s,e),s.Ia.size===0&&(i.O_()?i.L_():Ea(s)&&s.Ra.set("Unknown"))}function Ng(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ll(r).Y_(e)}function Z_(r,e){r.Va.Ue(e),Ll(r).Z_(e)}function Ag(r){r.Va=new NA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ll(r).start(),r.Ra.ua()}function jg(r){return Ea(r)&&!Ll(r).x_()&&r.Ia.size>0}function Ea(r){return Be(r).Ea.size===0}function J_(r){r.Va=void 0}async function D4(r){r.Ra.set("Online")}async function M4(r){r.Ia.forEach(((e,s)=>{Ng(r,e)}))}async function O4(r,e){J_(r),jg(r)?(r.Ra.ha(e),Ag(r)):r.Ra.set("Unknown")}async function V4(r,e,s){if(r.Ra.set("Online"),e instanceof L_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){Se(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dd(r,i)}else if(e instanceof fd?r.Va.Ze(e):e instanceof V_?r.Va.st(e):r.Va.tt(e),!s.isEqual(Pe.min()))try{const i=await Q_(r.localStore);s.compareTo(i)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(v.resumeToken,f))}})),p.targetMismatches.forEach(((v,y)=>{const _=d.Ia.get(v);if(!_)return;d.Ia.set(v,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),Z_(d,v);const E=new vi(_.target,v,y,_.sequenceNumber);Ng(d,E)})),d.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){Se(wa,"Failed to raise snapshot:",i),await Dd(r,i)}}async function Dd(r,e,s){if(!Ol(e))throw e;r.Ea.add(1),await vc(r),r.Ra.set("Offline"),s||(s=()=>Q_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Se(wa,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Wd(r)}))}function e1(r,e){return e().catch((s=>Dd(r,s,e)))}async function Zd(r){const e=Be(r),s=Ci(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dg;for(;L4(e);)try{const o=await v4(e.localStore,i);if(o===null){e.Ta.length===0&&s.L_();break}i=o.batchId,P4(e,o)}catch(o){await Dd(e,o)}t1(e)&&n1(e)}function L4(r){return Ea(r)&&r.Ta.length<10}function P4(r,e){r.Ta.push(e);const s=Ci(r);s.O_()&&s.X_&&s.ea(e.mutations)}function t1(r){return Ea(r)&&!Ci(r).x_()&&r.Ta.length>0}function n1(r){Ci(r).start()}async function U4(r){Ci(r).ra()}async function z4(r){const e=Ci(r);for(const s of r.Ta)e.ea(s.mutations)}async function B4(r,e,s){const i=r.Ta.shift(),o=vg.from(i,e,s);await e1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Zd(r)}async function q4(r,e){e&&Ci(r).X_&&await(async function(i,o){if((function(f){return TA(f)&&f!==re.ABORTED})(o.code)){const d=i.Ta.shift();Ci(i).B_(),await e1(i,(()=>i.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Zd(i)}})(r,e),t1(r)&&n1(r)}async function Mx(r,e){const s=Be(r);s.asyncQueue.verifyOperationInProgress(),Se(wa,"RemoteStore received new credentials");const i=Ea(s);s.Ea.add(3),await vc(s),i&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Wd(s)}async function H4(r,e){const s=Be(r);e?(s.Ea.delete(2),await Wd(s)):e||(s.Ea.add(2),await vc(s),s.Ra.set("Unknown"))}function Ll(r){return r.ma||(r.ma=(function(s,i,o){const d=Be(s);return d.sa(),new A4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:D4.bind(null,r),t_:M4.bind(null,r),r_:O4.bind(null,r),H_:V4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),jg(r)?Ag(r):r.Ra.set("Unknown")):(await r.ma.stop(),J_(r))}))),r.ma}function Ci(r){return r.fa||(r.fa=(function(s,i,o){const d=Be(s);return d.sa(),new j4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:U4.bind(null,r),r_:q4.bind(null,r),ta:z4.bind(null,r),na:B4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Zd(r)):(await r.fa.stop(),r.Ta.length>0&&(Se(wa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,s,i,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=i,this.op=o,this.removalCallback=d,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,i,o,d){const f=Date.now()+i,p=new Cg(e,s,f,o,d);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(r,e){if(jr("AsyncQueue",`${e}: ${r}`),Ol(r))return new _e(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(s,i)=>e(s,i)||Ie.comparator(s.key,i.key):(s,i)=>Ie.comparator(s.key,i.key),this.keyedMap=Fo(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,i)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.ga=new Et(Ie.comparator)}track(e){const s=e.doc.key,i=this.ga.get(s);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(s,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(s):e.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,i)=>{e.push(i)})),e}}class Cl{constructor(e,s,i,o,d,f,p,v,y){this.query=e,this.docs=s,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,s,i,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Cl(e,s,wl.emptySet(s),f,i,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,i=e.docChanges;if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==i[o].type||!s[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class G4{constructor(){this.queries=Vx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const o=Be(s),d=o.queries;o.queries=Vx(),d.forEach(((f,p)=>{for(const v of p.Sa)v.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function Vx(){return new Ta((r=>T_(r)),Fd)}async function s1(r,e){const s=Be(r);let i=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(i=2):(d=new F4,i=e.Da()?0:1);try{switch(i){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Rg(f,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&Ig(s)}async function r1(r,e){const s=Be(r),i=e.query;let o=3;const d=s.queries.get(i);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function Y4(r,e){const s=Be(r);let i=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(i=!0);f.wa=o}}i&&Ig(s)}function K4(r,e,s){const i=Be(r),o=i.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);i.queries.delete(e)}function Ig(r){r.Ca.forEach((e=>{e.next()}))}var Ym,Lx;(Lx=Ym||(Ym={})).Ma="default",Lx.Cache="cache";class i1{constructor(e,s,i){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class Q4{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=E_(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,s){const i=s?s.iu:new Ox,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),z=Gd(this.query,E)?E:null,X=!!A&&this.mutatedKeys.has(A.key),$=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let U=!1;A&&z?A.data.isEqual(z.data)?X!==$&&(i.track({type:3,doc:z}),U=!0):this.su(A,z)||(i.track({type:2,doc:z}),U=!0,(v&&this.eu(z,v)>0||y&&this.eu(z,y)<0)&&(p=!0)):!A&&z?(i.track({type:0,doc:z}),U=!0):A&&!z&&(i.track({type:1,doc:A}),U=!0,(v||y)&&(p=!0)),U&&(z?(f=f.add(z),d=$?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,i,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(z,X){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:U})}};return $(z)-$(X)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const p=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,f.length!==0||y?{snapshot:new Cl(this.query,e.tu,d,f,e.mutatedKeys,v===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ox,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const s=[];return e.forEach((i=>{this.Xa.has(i)||s.push(new l1(i))})),this.Xa.forEach((i=>{e.has(i)||s.push(new a1(i))})),s}cu(e){this.Ya=e.Qs,this.Xa=et();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kg="SyncEngine";class $4{constructor(e,s,i){this.query=e,this.targetId=s,this.view=i}}class X4{constructor(e){this.key=e,this.hu=!1}}class W4{constructor(e,s,i,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=i,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ta((p=>T_(p)),Fd),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ie.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z4(r,e,s=!0){const i=f1(r);let o;const d=i.Tu.get(e);return d?(i.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await o1(i,e,s,!0),o}async function J4(r,e){const s=f1(r);await o1(s,e,!0,!1)}async function o1(r,e,s,i){const o=await x4(r.localStore,$s(e)),d=o.targetId,f=r.sharedClientState.addLocalQueryTarget(d,s);let p;return i&&(p=await ej(r,e,d,f==="current",o.resumeToken)),r.isPrimaryClient&&s&&W_(r.remoteStore,o),p}async function ej(r,e,s,i,o){r.pu=(E,A,z)=>(async function($,U,ue,W){let me=U.view.ru(ue);me.Cs&&(me=await Cx($.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,me))));const ae=W&&W.targetChanges.get(U.targetId),be=W&&W.targetMismatches.get(U.targetId)!=null,xe=U.view.applyChanges(me,$.isPrimaryClient,ae,be);return Ux($,U.targetId,xe.au),xe.snapshot})(r,E,A,z);const d=await Cx(r.localStore,e,!0),f=new Q4(e,d.Qs),p=f.ru(d.documents),v=yc.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,v);Ux(r,s,y.au);const _=new $4(e,s,f);return r.Tu.set(e,_),r.Iu.has(s)?r.Iu.get(s).push(e):r.Iu.set(s,[e]),y.snapshot}async function tj(r,e,s){const i=Be(r),o=i.Tu.get(e),d=i.Iu.get(o.targetId);if(d.length>1)return i.Iu.set(o.targetId,d.filter((f=>!Fd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Fm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),s&&Sg(i.remoteStore,o.targetId),Km(i,o.targetId)})).catch(Ml)):(Km(i,o.targetId),await Fm(i.localStore,o.targetId,!0))}async function nj(r,e){const s=Be(r),i=s.Tu.get(e),o=s.Iu.get(i.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(s.remoteStore,i.targetId))}async function sj(r,e,s){const i=uj(r);try{const o=await(function(f,p){const v=Be(f),y=bt.now(),_=p.reduce(((z,X)=>z.add(X.key)),et());let E,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let X=Cr(),$=et();return v.Ns.getEntries(z,_).next((U=>{X=U,X.forEach(((ue,W)=>{W.isValidDocument()||($=$.add(ue))}))})).next((()=>v.localDocuments.getOverlayedDocuments(z,X))).next((U=>{E=U;const ue=[];for(const W of p){const me=vA(W,E.get(W.key).overlayedDocument);me!=null&&ue.push(new Mi(W.key,me,g_(me.value.mapValue),yn.exists(!0)))}return v.mutationQueue.addMutationBatch(z,y,ue,p)})).next((U=>{A=U;const ue=U.applyToLocalDocumentSet(E,$);return v.documentOverlayCache.saveOverlays(z,U.batchId,ue)}))})).then((()=>({batchId:A.batchId,changes:N_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,p,v){let y=f.Vu[f.currentUser.toKey()];y||(y=new Et(Je)),y=y.insert(p,v),f.Vu[f.currentUser.toKey()]=y})(i,o.batchId,s),await xc(i,o.changes),await Zd(i.remoteStore)}catch(o){const d=Rg(o,"Failed to persist write");s.reject(d)}}async function c1(r,e){const s=Be(r);try{const i=await p4(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?lt(f.hu,14607):o.removedDocuments.size>0&&(lt(f.hu,42227),f.hu=!1))})),await xc(s,i,e)}catch(i){await Ml(i)}}function Px(r,e,s){const i=Be(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const o=[];i.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const v=Be(f);v.onlineState=p;let y=!1;v.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(p)&&(y=!0)})),y&&Ig(v)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rj(r,e,s){const i=Be(r);i.sharedClientState.updateQueryState(e,"rejected",s);const o=i.Au.get(e),d=o&&o.key;if(d){let f=new Et(Ie.comparator);f=f.insert(d,hn.newNoDocument(d,Pe.min()));const p=et().add(d),v=new $d(Pe.min(),new Map,new Et(Je),f,p);await c1(i,v),i.du=i.du.remove(d),i.Au.delete(e),Dg(i)}else await Fm(i.localStore,e,!1).then((()=>Km(i,e,s))).catch(Ml)}async function ij(r,e){const s=Be(r),i=e.batch.batchId;try{const o=await g4(s.localStore,e);d1(s,i,null),u1(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await xc(s,o)}catch(o){await Ml(o)}}async function aj(r,e,s){const i=Be(r);try{const o=await(function(f,p){const v=Be(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return v.mutationQueue.lookupMutationBatch(y,p).next((E=>(lt(E!==null,37113),_=E.keys(),v.mutationQueue.removeMutationBatch(y,E)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>v.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);d1(i,e,s),u1(i,e),i.sharedClientState.updateMutationState(e,"rejected",s),await xc(i,o)}catch(o){await Ml(o)}}function u1(r,e){(r.mu.get(e)||[]).forEach((s=>{s.resolve()})),r.mu.delete(e)}function d1(r,e,s){const i=Be(r);let o=i.Vu[i.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Km(r,e,s=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||h1(r,i)}))}function h1(r,e){r.Eu.delete(e.path.canonicalString());const s=r.du.get(e);s!==null&&(Sg(r.remoteStore,s),r.du=r.du.remove(e),r.Au.delete(s),Dg(r))}function Ux(r,e,s){for(const i of s)i instanceof a1?(r.Ru.addReference(i.key,e),lj(r,i)):i instanceof l1?(Se(kg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||h1(r,i.key)):Ve(19791,{wu:i})}function lj(r,e){const s=e.key,i=s.path.canonicalString();r.du.get(s)||r.Eu.has(i)||(Se(kg,"New document in limbo: "+s),r.Eu.add(i),Dg(r))}function Dg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const s=new Ie(yt.fromString(e)),i=r.fu.next();r.Au.set(i,new X4(s)),r.du=r.du.insert(s,i),W_(r.remoteStore,new vi($s(pg(s.path)),i,"TargetPurposeLimboResolution",Bd.ce))}}async function xc(r,e,s){const i=Be(r),o=[],d=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,v)=>{f.push(i.pu(v,e,s).then((y=>{if((y||s)&&i.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(v.targetId)?.current;i.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Tg.As(v.targetId,y);d.push(_)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(v,y){const _=Be(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ce.forEach(y,(A=>ce.forEach(A.Es,(z=>_.persistence.referenceDelegate.addReference(E,A.targetId,z))).next((()=>ce.forEach(A.ds,(z=>_.persistence.referenceDelegate.removeReference(E,A.targetId,z)))))))))}catch(E){if(!Ol(E))throw E;Se(Eg,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const z=_.Ms.get(A),X=z.snapshotVersion,$=z.withLastLimboFreeSnapshotVersion(X);_.Ms=_.Ms.insert(A,$)}}})(i.localStore,d))}async function oj(r,e){const s=Be(r);if(!s.currentUser.isEqual(e)){Se(kg,"User change. New user:",e.toKey());const i=await K_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((v=>{v.reject(new _e(re.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(s,i.Ls)}}function cj(r,e){const s=Be(r),i=s.Au.get(e);if(i&&i.hu)return et().add(i.key);{let o=et();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function f1(r){const e=Be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rj.bind(null,e),e.Pu.H_=Y4.bind(null,e.eventManager),e.Pu.yu=K4.bind(null,e.eventManager),e}function uj(r){const e=Be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ij.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aj.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return m4(this.persistence,new d4,e.initialUser,this.serializer)}Cu(e){return new Y_(wg.mi,this.serializer)}Du(e){return new _4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class dj extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){lt(this.persistence.referenceDelegate instanceof kd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new XA(i,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new Y_((i=>kd.mi(i,s)),this.serializer)}}class Qm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Px(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oj.bind(null,this.syncEngine),await H4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new G4})()}createDatastore(e){const s=Xd(e.databaseInfo.databaseId),i=(function(d){return new N4(d)})(e.databaseInfo);return(function(d,f,p,v){return new R4(d,f,p,v)})(e.authCredentials,e.appCheckCredentials,i,s)}createRemoteStore(e){return(function(i,o,d,f,p){return new k4(i,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Px(this.syncEngine,s,0)),(function(){return kx.v()?new kx:new w4})())}createSyncEngine(e,s){return(function(o,d,f,p,v,y,_){const E=new W4(o,d,f,p,v,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const i=Be(s);Se(wa,"RemoteStore shutting down."),i.Ea.add(5),await vc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="FirestoreClient";class hj{constructor(e,s,i,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=i,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(i,(async f=>{Se(Ri,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Se(Ri,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const i=Rg(s,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xm(r,e){r.asyncQueue.verifyOperationInProgress(),Se(Ri,"Initializing OfflineComponentProvider");const s=r.configuration;await e.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await K_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function zx(r,e){r.asyncQueue.verifyOperationInProgress();const s=await fj(r);Se(Ri,"Initializing OnlineComponentProvider"),await e.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Mx(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Mx(e.remoteStore,o))),r._onlineComponents=e}async function fj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Se(Ri,"Using user provided OfflineComponentProvider");try{await xm(r,r._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;El("Error using user provided cache. Falling back to memory cache: "+s),await xm(r,new Md)}}else Se(Ri,"Using default OfflineComponentProvider"),await xm(r,new dj(void 0));return r._offlineComponents}async function g1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Se(Ri,"Using user provided OnlineComponentProvider"),await zx(r,r._uninitializedComponentsProvider._online)):(Se(Ri,"Using default OnlineComponentProvider"),await zx(r,new Qm))),r._onlineComponents}function mj(r){return g1(r).then((e=>e.syncEngine))}async function $m(r){const e=await g1(r),s=e.eventManager;return s.onListen=Z4.bind(null,e.syncEngine),s.onUnlisten=tj.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=J4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=nj.bind(null,e.syncEngine),s}function gj(r,e,s={}){const i=new Ti;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,v,y){const _=new m1({next:A=>{_.Nu(),f.enqueueAndForget((()=>r1(d,E))),A.fromCache&&v.source==="server"?y.reject(new _e(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new i1(p,_,{includeMetadataChanges:!0,qa:!0});return s1(d,E)})(await $m(r),r.asyncQueue,e,s,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firestore.googleapis.com",qx=!0;class Hx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y1,this.ssl=qx}else this.host=e.host,this.ssl=e.ssl??qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QA)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,s,i,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new wN;switch(i.type){case"firstParty":return new NN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=Bx.get(s);i&&(Se("ComponentProvider","Removing Datastore"),Bx.delete(s),i.terminate())})(this),Promise.resolve()}}function pj(r,e,s,i={}){r=Pn(r,Jd);const o=Rl(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${s}`;o&&(ob(`https://${p}`),cb("Firestore",!0)),d.host!==y1&&d.host!==p&&El("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...d,host:p,ssl:o,emulatorOptions:i};if(!ya(v,f)&&(r._setSettings(v),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=dn.MOCK_USER;else{y=Cw(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new dn(E)}r._authCredentials=new TN(new s_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class kt{constructor(e,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,i){if(gc(s,kt._jsonSchema))return new kt(e,i||null,new Ie(yt.fromString(s.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Ft("string",kt._jsonSchemaVersion),referencePath:Ft("string")};class Ei extends Oi{constructor(e,s,i){super(e,s,pg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ie(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function Tt(r,e,...s){if(r=Dt(r),r_("collection","path",e),r instanceof Jd){const i=yt.fromString(e,...s);return nx(i),new Ei(r,null,i)}{if(!(r instanceof kt||r instanceof Ei))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(e,...s));return nx(i),new Ei(r.firestore,null,i)}}function Gt(r,e,...s){if(r=Dt(r),arguments.length===1&&(e=ug.newId()),r_("doc","path",e),r instanceof Jd){const i=yt.fromString(e,...s);return tx(i),new kt(r,null,new Ie(i))}{if(!(r instanceof kt||r instanceof Ei))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(e,...s));return tx(i),new kt(r.firestore,r instanceof Ei?r.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="AsyncQueue";class Gx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $_(this,"async_queue_retry"),this._c=()=>{const i=vm();i&&Se(Fx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const s=vm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=vm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;Se(Fx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,jr("INTERNAL UNHANDLED ERROR: ",Yx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(e,s,i){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Cg.createAndSchedule(this,e,s,i,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Ve(47125,{Pc:Yx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Yx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r){return(function(s,i){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of i)if(d in o&&typeof o[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Rr extends Jd{constructor(e,s,i,o){super(e,s,i,o),this.type="firestore",this._queue=new Gx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gx(e),this._firestoreClient=void 0,await e}}}function yj(r,e){const s=typeof r=="object"?r:fb(),i=typeof r=="string"?r:Nd,o=eg(s,"firestore").getImmediate({identifier:i});if(!o._initialized){const d=Aw("firestore");d&&pj(o,...d)}return o}function eh(r){if(r._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vj(r),r._firestoreClient}function vj(r){const e=r._freezeSettings(),s=(function(o,d,f,p){return new HN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new hj(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(on.fromBase64String(e))}catch(s){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ts(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:Ft("string",ts._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(gc(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:Ft("string",Ws._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let d=0;d<i.length;++d)if(i[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Zs(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:Ft("string",Zs._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=/^__.*__$/;class bj{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,s,this.fieldTransforms):new pc(e,this.data,s,this.fieldTransforms)}}class v1{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return new Mi(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function x1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:r})}}class Og{constructor(e,s,i,o,d,f){this.settings=e,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x1(this.Ac)&&xj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _j{constructor(e,s,i){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=i||Xd(e)}Cc(e,s,i,o=!1){return new Og({Ac:e,methodName:s,Dc:i,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(r){const e=r._freezeSettings(),s=Xd(r._databaseId);return new _j(r._databaseId,!!e.ignoreUndefinedProperties,s)}function Vg(r,e,s,i,o,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,s,o);Lg("Data must be an object, but it was:",f,i);const p=w1(i,f);let v,y;if(d.merge)v=new Ln(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const E of d.mergeFields){const A=Xm(e,E,s);if(!f.contains(A))throw new _e(re.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);E1(_,A)||_.push(A)}v=new Ln(_),y=f.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,y=f.fieldTransforms;return new bj(new Nn(p),v,y)}class th extends Mg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function b1(r,e,s,i){const o=r.Cc(1,e,s);Lg("Data must be an object, but it was:",o,i);const d=[],f=Nn.empty();Di(i,((v,y)=>{const _=Pg(e,v,s);y=Dt(y);const E=o.yc(_);if(y instanceof th)d.push(_);else{const A=wc(y,E);A!=null&&(d.push(_),f.set(_,A))}}));const p=new Ln(d);return new v1(f,p,o.fieldTransforms)}function _1(r,e,s,i,o,d){const f=r.Cc(1,e,s),p=[Xm(e,i,s)],v=[o];if(d.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)p.push(Xm(e,d[A])),v.push(d[A+1]);const y=[],_=Nn.empty();for(let A=p.length-1;A>=0;--A)if(!E1(y,p[A])){const z=p[A];let X=v[A];X=Dt(X);const $=f.yc(z);if(X instanceof th)y.push(z);else{const U=wc(X,$);U!=null&&(y.push(z),_.set(z,U))}}const E=new Ln(y);return new v1(_,E,f.fieldTransforms)}function wj(r,e,s,i=!1){return wc(s,r.Cc(i?4:3,e))}function wc(r,e){if(T1(r=Dt(r)))return Lg("Unsupported field value:",e,r),w1(r,e);if(r instanceof Mg)return(function(i,o){if(!x1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const d=i._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const d=[];let f=0;for(const p of i){let v=wc(p,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),f++}return{arrayValue:{values:d}}})(r,e)}return(function(i,o){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const d=bt.fromDate(i);return{timestampValue:Id(o.serializer,d)}}if(i instanceof bt){const d=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Id(o.serializer,d)}}if(i instanceof Ws)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ts)return{bytesValue:P_(o.serializer,i._byteString)};if(i instanceof kt){const d=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:bg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Zs)return(function(f,p){return{mapValue:{fields:{[f_]:{stringValue:m_},[Ad]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return yg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${zd(i)}`)})(r,e)}function w1(r,e){const s={};return l_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(r,((i,o)=>{const d=wc(o,e.mc(i));d!=null&&(s[i]=d)})),{mapValue:{fields:s}}}function T1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof Ws||r instanceof ts||r instanceof kt||r instanceof Mg||r instanceof Zs)}function Lg(r,e,s){if(!T1(s)||!i_(s)){const i=zd(s);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Xm(r,e,s){if((e=Dt(e))instanceof bc)return e._internalPath;if(typeof e=="string")return Pg(r,e);throw Od("Field path arguments must be of type string or ",r,!1,void 0,s)}const Tj=new RegExp("[~\\*/\\[\\]]");function Pg(r,e,s){if(e.search(Tj)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new bc(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Od(r,e,s,i,o){const d=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(d||f)&&(v+=" (found",d&&(v+=` in field ${i}`),f&&(v+=` in document ${o}`),v+=")"),new _e(re.INVALID_ARGUMENT,p+r+v)}function E1(r,e){return r.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,s,i,o,d){this._firestore=e,this._userDataWriter=s,this._key=i,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(nh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class Ej extends S1{data(){return super.data()}}function nh(r,e){return typeof e=="string"?Pg(r,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ug{}class A1 extends Ug{}function ss(r,e,...s){let i=[];e instanceof Ug&&i.push(e),i=i.concat(s),(function(d){const f=d.filter((v=>v instanceof zg)).length,p=d.filter((v=>v instanceof sh)).length;if(f>1||f>0&&p>0)throw new _e(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class sh extends A1{constructor(e,s,i){super(),this._field=e,this._op=s,this._value=i,this.type="where"}static _create(e,s,i){return new sh(e,s,i)}_apply(e){const s=this._parse(e);return j1(e._query,s),new Oi(e.firestore,e.converter,Pm(e._query,s))}_parse(e){const s=_c(e.firestore);return(function(d,f,p,v,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){$x(E,_);const X=[];for(const $ of E)X.push(Qx(v,d,$));A={arrayValue:{values:X}}}else A=Qx(v,d,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||$x(E,_),A=wj(p,f,E,_==="in"||_==="not-in");return Ht.create(y,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Sj(r,e,s){const i=e,o=nh("where",r);return sh._create(o,i,s)}class zg extends Ug{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new zg(e,s)}_parse(e){const s=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:_s.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const v of p)j1(f,v),f=Pm(f,v)})(e._query,s),new Oi(e.firestore,e.converter,Pm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bg extends A1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Bg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(d,f)})(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Vl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ws(r,e="asc"){const s=e,i=nh("orderBy",r);return Bg._create(i,s)}function Qx(r,e,s){if(typeof(s=Dt(s))=="string"){if(s==="")throw new _e(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w_(e)&&s.indexOf("/")!==-1)throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=e.path.child(yt.fromString(s));if(!Ie.isDocumentKey(i))throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ux(r,new Ie(i))}if(s instanceof kt)return ux(r,s._key);throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(s)}.`)}function $x(r,e){if(!Array.isArray(r)||r.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j1(r,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class Nj{convertValue(e,s="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const i={};return Di(e,((o,d)=>{i[o]=this.convertValue(d,s)})),i}convertVectorValue(e){const s=e.fields?.[Ad].arrayValue?.values?.map((i=>It(i.doubleValue)));return new Zs(s)}convertGeoPoint(e){return new Ws(It(e.latitude),It(e.longitude))}convertArray(e,s){return(e.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const s=Ni(e);return new bt(s.seconds,s.nanos)}convertDocumentKey(e,s){const i=yt.fromString(e);lt(F_(i),9688,{name:e});const o=new rc(i.get(1),i.get(3)),d=new Ie(i.popFirst(5));return o.isEqual(s)||jr(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r,e,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(e,s):r.toFirestore(e):e,i}class Yo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends S1{constructor(e,s,i,o,d,f){super(e,s,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const i=this._document.data.field(nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ga._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Ft("string",ga._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class md extends ga{data(e={}){return super.data(e)}}class pa{constructor(e,s,i,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((i=>{e.call(s,new md(this._firestore,this._userDataWriter,i.key,i,new Yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const v=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const v=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:Aj(p.type),doc:v,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),i.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Aj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:Ft("string",pa._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Hg extends Nj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,s)}}function jj(r){r=Pn(r,Oi);const e=Pn(r.firestore,Rr),s=eh(e),i=new Hg(e);return N1(r._query),gj(s,r._query).then((o=>new pa(e,i,r,o)))}function Cj(r,e,s){r=Pn(r,kt);const i=Pn(r.firestore,Rr),o=qg(r.converter,e,s);return Tc(i,[Vg(_c(i),"setDoc",r._key,o,r.converter!==null,s).toMutation(r._key,yn.none())])}function er(r,e,s,...i){r=Pn(r,kt);const o=Pn(r.firestore,Rr),d=_c(o);let f;return f=typeof(e=Dt(e))=="string"||e instanceof bc?_1(d,"updateDoc",r._key,e,s,i):b1(d,"updateDoc",r._key,e),Tc(o,[f.toMutation(r._key,yn.exists(!0))])}function Ii(r){return Tc(Pn(r.firestore,Rr),[new Qd(r._key,yn.none())])}function Sr(r,e){const s=Pn(r.firestore,Rr),i=Gt(r),o=qg(r.converter,e);return Tc(s,[Vg(_c(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,yn.exists(!1))]).then((()=>i))}function An(r,...e){r=Dt(r);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Kx(e[i])||(s=e[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kx(e[i])){const v=e[i];e[i]=v.next?.bind(v),e[i+1]=v.error?.bind(v),e[i+2]=v.complete?.bind(v)}let d,f,p;if(r instanceof kt)f=Pn(r.firestore,Rr),p=pg(r._key.path),d={next:v=>{e[i]&&e[i](Rj(f,r,v))},error:e[i+1],complete:e[i+2]};else{const v=Pn(r,Oi);f=Pn(v.firestore,Rr),p=v._query;const y=new Hg(f);d={next:_=>{e[i]&&e[i](new pa(f,y,v,_))},error:e[i+1],complete:e[i+2]},N1(r._query)}return(function(y,_,E,A){const z=new m1(A),X=new i1(_,z,E);return y.asyncQueue.enqueueAndForget((async()=>s1(await $m(y),X))),()=>{z.Nu(),y.asyncQueue.enqueueAndForget((async()=>r1(await $m(y),X)))}})(eh(f),p,o,d)}function Tc(r,e){return(function(i,o){const d=new Ti;return i.asyncQueue.enqueueAndForget((async()=>sj(await mj(i),o,d))),d.promise})(eh(r),e)}function Rj(r,e,s){const i=s.docs.get(e._key),o=new Hg(r);return new ga(r,o,e._key,i,new Yo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=_c(e)}set(e,s,i){this._verifyNotCommitted();const o=bm(e,this._firestore),d=qg(o.converter,s,i),f=Vg(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,yn.none())),this}update(e,s,i,...o){this._verifyNotCommitted();const d=bm(e,this._firestore);let f;return f=typeof(s=Dt(s))=="string"||s instanceof bc?_1(this._dataReader,"WriteBatch.update",d._key,s,i,o):b1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=bm(e,this._firestore);return this._mutations=this._mutations.concat(new Qd(s._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(r,e){if((r=Dt(r)).firestore!==e)throw new _e(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(r){return eh(r=Pn(r,Rr)),new Ij(r,(e=>Tc(r,e)))}(function(e,s=!0){(function(o){Dl=o})(Il),Tl(new va("firestore",((i,{instanceIdentifier:o,options:d})=>{const f=i.getProvider("app").getImmediate(),p=new Rr(new EN(i.getProvider("auth-internal")),new AN(f,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),_i(Wv,Zv,e),_i(Wv,Zv,"esm2020")})();const Dj={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},C1=hb(Dj),ns=vN(C1),ze=yj(C1),_m={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function Mj(){const[r,e]=te.useState(!0),[s,i]=te.useState(""),[o,d]=te.useState(""),[f,p]=te.useState(""),[v,y]=te.useState(""),[_,E]=te.useState(!1),A=async $=>{$.preventDefault(),p(""),y(""),E(!0);try{if(r)await sS(ns,s,o);else{const ue=(await nS(ns,s,o)).user;await Cj(Gt(ze,"users",ue.uid),{email:ue.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(U){p(X(U.code))}finally{E(!1)}},z=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await tS(ns,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch($){p(X($.code))}},X=$=>{switch($){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+$}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),v&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:v}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:$=>i($.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:$=>d($.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:z,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(_m.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const fi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},Oj=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,i=20,o=Math.max(...r.map(p=>p.value))||100,d=r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return`${E},${A}`}).join(" "),f=`${d} ${s-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:s-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return c.jsx("circle",{cx:E,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},sd=({title:r,value:e,subtext:s,icon:i,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(fi.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(i,{})})]});function Xx({onNavigate:r=()=>{}}){const[e,s]=te.useState(null),[i,o]=te.useState(!0),[d,f]=te.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,v]=te.useState([]),[y,_]=te.useState([]),[E,A]=te.useState([]),[z,X]=te.useState([]);return te.useEffect(()=>{const $=ns.onAuthStateChanged(ae=>{s(ae),o(!1)}),U=An(ss(Tt(ze,"siparisler"),ws("createdAt","desc")),ae=>{const be=ae.docs.map(w=>w.data());_(be.slice(0,5));const xe={};be.forEach(w=>{const N=w.date?w.date.slice(0,7):"N/A";xe[N]=(xe[N]||0)+1});const R=Object.entries(xe).map(([w,N])=>({label:w,value:N})).sort((w,N)=>w.label.localeCompare(N.label));X(R),f(w=>({...w,activeOrders:be.length}))}),ue=An(Tt(ze,"teklifler"),ae=>{f(be=>({...be,pendingProposals:ae.size}))}),W=An(Tt(ze,"employees"),ae=>{const be=ae.docs.map(w=>w.data());f(w=>({...w,totalWorkers:be.length}));const xe=new Date().toISOString().split("T")[0],R=be.filter(w=>{const N=w.attendance?.[xe];return N&&["paid_leave","unpaid_leave","off"].includes(N.type)});v(R)}),me=An(Tt(ze,"inventory_movements"),ae=>{const be=ae.docs.map(w=>w.data()),xe={};be.forEach(w=>{const N=Number(w.quantity)||0,C=w.action==="add"?N:-N;xe[w.productName]||(xe[w.productName]=0),xe[w.productName]+=C});const R=Object.entries(xe).filter(([w,N])=>N<100).map(([w,N])=>({name:w,qty:N}));A(R.slice(0,5)),f(w=>({...w,inventoryCount:Object.keys(xe).length}))});return()=>{$(),U(),ue(),W(),me()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(fi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(sd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:fi.Cart,color:"bg-indigo-600"}),c.jsx(sd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:fi.Document,color:"bg-purple-600"}),c.jsx(sd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:fi.Box,color:"bg-emerald-600"}),c.jsx(sd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:fi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(Oj,{data:z})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map(($,U)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",$.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",$.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:$.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},U)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(fi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map(($,U)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:$.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:$.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:$.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},U)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(fi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:E.length>0?E.map(($,U)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:$.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[$.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},U)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Le={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},vs=tb.forwardRef(({className:r="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${r}
    `,...e}));tb.forwardRef(({className:r="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${r}
    `,...e}));const fa=({children:r,variant:e="primary",className:s="",...i})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...i,children:r})},Vj=({checked:r,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})})}),gd=({options:r,selected:e,onChange:s,placeholder:i="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,v]=te.useState(!1),[y,_]=te.useState(""),E=te.useRef(null);te.useEffect(()=>{const U=ue=>{E.current&&!E.current.contains(ue.target)&&v(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const A=U=>{if(o){const ue=e.includes(U)?e.filter(W=>W!==U):[...e,U];s(ue)}else s(U),v(!1),_("")},z=U=>{_(U.target.value),f&&s(U.target.value)},X=o?e.length>0?`(${e.length})`:"":e||i,$=r.filter(U=>U.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(vs,{placeholder:i,value:e,onChange:z,onFocus:()=>v(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>v(!p),children:c.jsx(Le.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>v(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Le.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${i} ${X}`:X})]}),c.jsx(Le.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:U=>_(U.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[$.map(U=>{const ue=o?e.includes(U):e===U;return c.jsxs("div",{onClick:()=>f?s(U):A(U),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ue?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ue?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ue&&c.jsx(Le.Check,{})}),c.jsx("span",{className:"truncate",children:U})]}),d&&c.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),d(U)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Le.Trash,{})})]},U)}),$.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},R1=({isOpen:r,onClose:e,title:s,children:i,maxWidth:o="max-w-xl"})=>r?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:i})]})}):null,I1=({children:r,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:r}),rh=({startDate:r,endDate:e,onStartChange:s,onEndChange:i})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:r,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>i(o.target.value)})]}),ps=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",Lj=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"}):"-",Pj=({checked:r,onChange:e,label:s})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:[c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function Uj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState([]),[v,y]=te.useState(!1),[_,E]=te.useState({start:"",end:""}),[A,z]=te.useState(!1),[X,$]=te.useState(!1),[U,ue]=te.useState(!1),[W,me]=te.useState(null),[ae,be]=te.useState(null),[xe,R]=te.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[w,N]=te.useState({name:"",company:"",phone:"",email:""}),[C,j]=te.useState(null),[k,I]=te.useState({docNo:"",amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),de=F=>{const le=(F.qty||0)*(F.unitPrice||0),oe=le*((F.vatRate||0)/100);return le+oe},ke=F=>{if(!F)return{subtotal:0,totalVAT:0,grandTotal:0};const le=F.reduce((Te,ye)=>Te+(ye.qty||0)*(ye.unitPrice||0),0),oe=F.reduce((Te,ye)=>Te+de(ye),0);return{subtotal:le,totalVAT:oe-le,grandTotal:oe}},Y=F=>F?F.reduce((le,oe)=>le+de(oe),0):0,ge=F=>{const le=f.filter(ye=>ye.customerId===F);let oe=0,Te=0;return le.forEach(ye=>{ye.type==="payment"?Te+=parseFloat(ye.amount)||0:oe+=Y(ye.items)}),oe-Te};te.useEffect(()=>{const F=ns.onAuthStateChanged(je=>{e(je),i(!1)}),le=ss(Tt(ze,"customers"),ws("createdAt","desc")),oe=An(le,je=>{d(je.docs.map(Ke=>({id:Ke.id,...Ke.data()})))}),Te=ss(Tt(ze,"sales"),ws("createdAt","desc")),ye=An(Te,je=>{p(je.docs.map(Ke=>({id:Ke.id,...Ke.data()})))});return()=>{F(),oe(),ye()}},[]);const we=F=>{let le=f.filter(ye=>ye.customerId===F);le.sort((ye,je)=>new Date(ye.date)-new Date(je.date));let oe=0;const Te=[];return le.forEach(ye=>{if(ye.type==="payment"){const je=parseFloat(ye.amount)||0;oe-=je,Te.push({docNo:ye.docNo||"-",date:ye.date,action:"TAHSLAT",desc:`${ye.paymentMethod} ile deme - ${ye.note||""}`,qty:"-",unitPrice:"-",borc:je,alacak:0,balance:oe})}else ye.items?.forEach(je=>{const Ke=de(je);oe+=Ke,Te.push({docNo:ye.docNo,date:ye.date,action:"SATI",desc:je.name,qty:je.qty,unitPrice:je.unitPrice,borc:0,alacak:Ke,balance:oe})})}),Te},qe=async F=>{F.preventDefault();try{await Sr(Tt(ze,"customers"),{...w,createdAt:new Date().toISOString()}),N({name:"",company:"",phone:"",email:""}),$(!1)}catch(le){alert("Hata: "+le.message)}},Ye=async F=>{window.confirm("Mteriyi silmek istiyor musunuz?")&&await Ii(Gt(ze,"customers",F))},M=F=>{me(F),j(null);const le="TH-"+Date.now().toString().slice(-6);I({docNo:le,amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),ue(!0)},ee=(F,le)=>{me(le),j(F),I({docNo:F.docNo||"",amount:F.amount,type:F.paymentMethod,note:F.note,date:F.date}),ue(!0)},pe=async F=>{if(F.preventDefault(),!!W)try{const le={customerId:W.id,type:"payment",docNo:k.docNo,amount:parseFloat(k.amount),paymentMethod:k.type,note:k.note,date:k.date,createdAt:C?C.createdAt:new Date().toISOString()};C?await er(Gt(ze,"sales",C.id),le):await Sr(Tt(ze,"sales"),le),ue(!1)}catch(le){alert("Hata: "+le.message)}},L=F=>{me(F),be(null);const le="DOC-"+Date.now().toString().slice(-6);R({docNo:le,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{name:"",qty:1,unitPrice:0,vatRate:20}]}),z(!0)},V=(F,le)=>{me(le),be(F),R({docNo:F.docNo,date:F.date,description:F.description,status:F.status,items:F.items||[]}),z(!0)},se=async F=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Ii(Gt(ze,"sales",F))}catch(le){alert("Hata: "+le.message)}},he=async F=>{F.preventDefault();try{const le={customerId:W.id,...xe,type:"sale",createdAt:ae?ae.createdAt:new Date().toISOString()};ae?await er(Gt(ze,"sales",ae.id),le):await Sr(Tt(ze,"sales"),le),z(!1)}catch(le){alert("Hata: "+le.message)}},Ce=(F,le,oe)=>{const Te=[...xe.items];Te[F][le]=le==="name"?oe:Number(oe),R({...xe,items:Te})},Me=()=>R({...xe,items:[...xe.items,{name:"",qty:1,unitPrice:0,vatRate:20}]}),J=F=>R({...xe,items:xe.items.filter((le,oe)=>oe!==F)}),Ee=F=>{const le=we(F.id);let oe="data:text/csv;charset=utf-8,\uFEFF";oe+=`Tarih,Belge No,Hareket,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,le.forEach(je=>{const Ke=mn=>ps(mn).replace(" ",""),pt=[`"${je.date}"`,`"${je.docNo}"`,`"${je.action}"`,`"${je.desc}"`,`"${je.qty}"`,`"${Ke(je.unitPrice)}"`,`"${Ke(je.borc)}"`,`"${Ke(je.alacak)}"`,`"${Ke(je.balance)}"`].join(",");oe+=pt+`
`});const Te=encodeURI(oe),ye=document.createElement("a");ye.setAttribute("href",Te),ye.setAttribute("download",`${F.name}_Ekstre.csv`),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)},fe=F=>{const le=we(F.id),oe=window.open("","","height=800,width=1000");if(!oe)return;const Te=`
      <html><head><title>Ekstre - ${F.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:11px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:8px;text-align:left}
        td{border:1px solid #d1d5db;padding:6px}
        .right{text-align:right}
        .payment-row{background-color:#f0fdf4} 
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
      </style>
      </head><body>
        <h2>${F.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr><th>Tarih</th><th>Belge No</th><th>Aklama</th><th class="right">Miktar</th><th class="right">B.Fiyat</th><th class="right">deme (Alnan)</th><th class="right">Tutar (Bor)</th><th class="right">Bakiye</th></tr>
          </thead>
          <tbody>
            ${le.map(ye=>`
              <tr class="${ye.action==="TAHSLAT"?"payment-row":"sale-row"}">
                <td>${ye.date}</td>
                <td>${ye.docNo}</td>
                <td>${ye.desc}</td>
                <td class="right">${ye.qty}</td>
                <td class="right">${ye.unitPrice!=="-"?ps(ye.unitPrice):"-"}</td>
                <td class="right">${ye.borc>0?ps(ye.borc):"-"}</td>
                <td class="right">${ye.alacak>0?ps(ye.alacak):"-"}</td>
                <td class="right bold" style="color:${ye.balance>0?"#dc2626":"#059669"}">${ps(ye.balance)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body></html>
    `;oe.document.open(),oe.document.write(Te),oe.document.close(),oe.setTimeout(()=>{oe.focus(),oe.print()},500)};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Le.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:F=>E({..._,start:F}),onEndChange:F=>E({..._,end:F})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Pj,{checked:v,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>$(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Le.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(F=>{const le=f.filter(Te=>{const ye=Te.customerId===F.id;let je=!0;return _.start&&Te.date<_.start&&(je=!1),_.end&&Te.date>_.end&&(je=!1),ye&&je}).sort((Te,ye)=>new Date(ye.date)-new Date(Te.date)),oe=ge(F.id);return c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Le.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:F.name}),c.jsx("p",{className:"text-xs text-gray-500",children:F.company})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${oe>0?"text-red-500":"text-emerald-600"}`,children:ps(oe)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:oe>0?"(Borlu)":"(Alacakl/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>M(F),className:"flex items-center px-4 py-2 bg-emerald-100 text-emerald-700 rounded-xl hover:bg-emerald-200 transition-colors text-xs font-bold shadow-sm border border-emerald-200",children:[c.jsx(Le.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"deme Al"})]}),c.jsxs("button",{onClick:()=>L(F),className:"flex items-center px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl hover:bg-indigo-200 transition-colors text-xs font-bold shadow-sm border border-indigo-200",children:[c.jsx(Le.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>fe(F),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Le.Printer,{})}),c.jsx("button",{onClick:()=>Ee(F),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Le.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Ye(F.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Le.Trash,{})})]})]})]})]}),le.length>0?c.jsx("div",{className:"bg-white/40",children:le.map(Te=>{const ye=Te.type==="payment",je=ye?Te.amount:Y(Te.items);return c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${ye?"bg-emerald-50/30":""}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:["                                                    ",c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ye?"bg-emerald-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:ye?"TAHSLAT":"SATI"}),c.jsxs("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:["#",Te.docNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:Lj(Te.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ye?`${Te.paymentMethod} ile deme - ${Te.note||""}`:`${Te.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${ye?"text-emerald-600":"text-red-500"}`,children:[ye?"-":"+",ps(je)]}),!ye&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>V(Te,F),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Le.Edit,{})}),c.jsx("button",{onClick:()=>se(Te.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Le.Trash,{})})]}),ye&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>ee(Te,F),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Le.Edit,{})}),c.jsx("button",{onClick:()=>se(Te.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Le.Trash,{})})]})]})]},Te.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic",children:"Hareket bulunamad."})]},F.id)})}),X&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.name,onChange:F=>N({...w,name:F.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.company,onChange:F=>N({...w,company:F.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.phone,onChange:F=>N({...w,phone:F.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.email,onChange:F=>N({...w,email:F.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),U&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:C?"deme Dzenle":"deme Al"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:W?.name}),c.jsxs("form",{onSubmit:pe,className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-3 gap-2 p-1 bg-gray-100 rounded-xl",children:["Nakit","Kredi Kart","ek"].map(F=>c.jsx("button",{type:"button",onClick:()=>I({...k,type:F}),className:`py-2 text-xs font-bold rounded-lg transition-all ${k.type===F?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:F},F))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"number",autoFocus:!0,required:!0,className:"w-full border border-emerald-200 rounded-2xl px-4 py-4 text-2xl font-bold text-emerald-700 focus:ring-2 focus:ring-emerald-500 bg-emerald-50/30 text-center",placeholder:"0.00",value:k.amount,onChange:F=>I({...k,amount:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Belge No",value:k.docNo,onChange:F=>I({...k,docNo:F.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:k.date,onChange:F=>I({...k,date:F.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm mt-3",placeholder:"Not (Opsiyonel)",value:k.note,onChange:F=>I({...k,note:F.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>ue(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-emerald-600 text-white rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),A&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:he,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ae?"Sat Dzenle":"Yeni Sat"}),c.jsx("button",{type:"button",onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.docNo,onChange:F=>R({...xe,docNo:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.date,onChange:F=>R({...xe,date:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.description,onChange:F=>R({...xe,description:F.target.value})})]})]}),c.jsxs("table",{className:"w-full text-left text-sm border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:xe.items.map((F,le)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 font-medium",placeholder:"rn Ad",value:F.name,onChange:oe=>Ce(le,"name",oe.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-center [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:F.qty,onChange:oe=>Ce(le,"qty",oe.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-right [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:F.unitPrice,onChange:oe=>Ce(le,"unitPrice",oe.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded px-2 py-1.5 text-xs focus:ring-2 focus:ring-indigo-500",value:F.vatRate,onChange:oe=>Ce(le,"vatRate",oe.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 text-right font-bold text-indigo-600",children:ps(de(F))}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>J(le),className:"text-gray-400 hover:text-red-500",children:c.jsx(Le.Trash,{})})})]},le))})]}),c.jsx("button",{type:"button",onClick:Me,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-2",children:"+ Yeni Satr"}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-64 p-6 bg-gray-50 rounded-2xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{children:ps(ke(xe.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{children:ps(ke(xe.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{className:"whitespace-nowrap",children:ps(ke(xe.items).grandTotal)})]}),"                                    "]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const Wx={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},Zx=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function zj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState([]),[v,y]=te.useState({start:"",end:""}),[_,E]=te.useState(!1),[A,z]=te.useState(!1),[X,$]=te.useState(!1),[U,ue]=te.useState({}),[W,me]=te.useState({}),ae=te.useRef(null),[be,xe]=te.useState(null),[R,w]=te.useState(null),[N,C]=te.useState({en:6,boy:4}),[j,k]=te.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]});if(te.useEffect(()=>{const J=ns.onAuthStateChanged(oe=>{e(oe),i(!1)}),Ee=ss(Tt(ze,"customers"),ws("name","asc")),fe=An(Ee,oe=>{p(oe.docs.map(Te=>({id:Te.id,...Te.data()})))}),F=ss(Tt(ze,"siparisler"),ws("createdAt","desc")),le=An(F,oe=>{d(oe.docs.map(Te=>({id:Te.id,...Te.data()})))});return()=>{J(),fe(),le()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const I=r?.email==="furkan@avci.jp",de=J=>{if(!J)return;const Ee=new FileReader;Ee.onload=fe=>{const F=new Image;F.onload=()=>{const le=document.createElement("canvas"),oe=800,Te=800;let ye=F.width,je=F.height;ye>je?ye>oe&&(je*=oe/ye,ye=oe):je>Te&&(ye*=Te/je,je=Te),le.width=ye,le.height=je,le.getContext("2d").drawImage(F,0,0,ye,je);const pt=le.toDataURL("image/jpeg",.8);k(mn=>({...mn,image:pt}))},F.src=fe.target.result},Ee.readAsDataURL(J)},ke=J=>{J.preventDefault(),$(!0)},Y=()=>$(!1),ge=J=>{J.preventDefault(),$(!1),J.dataTransfer.files&&J.dataTransfer.files[0]&&de(J.dataTransfer.files[0])},we=J=>{J.clipboardData.files&&J.clipboardData.files[0]&&de(J.clipboardData.files[0])},qe=()=>{xe(null);const J="SP-"+Date.now().toString().slice(-6);k({siparisNo:J,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),C({en:6,boy:4}),E(!0)},Ye=J=>{xe(J),k({siparisNo:J.siparisNo,customerId:J.customerId,date:J.date,note:J.note||"",image:J.image,items:J.items||[]}),E(!0)},M=async J=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Ii(Gt(ze,"siparisler",J))}catch(Ee){alert(Ee.message)}},ee=async J=>{if(J.preventDefault(),!j.customerId){alert("Ltfen bir mteri seiniz.");return}try{const Ee={...j,createdAt:be?be.createdAt:new Date().toISOString()};be?await er(Gt(ze,"siparisler",be.id),Ee):await Sr(Tt(ze,"siparisler"),{...Ee,productionStatus:{}}),E(!1)}catch(Ee){alert(Ee.message)}},pe=(J,Ee,fe)=>{const F=[...j.items],le=F[J];if(le[Ee]=fe,Ee==="en1"){const oe=parseFloat(fe);isNaN(oe)?fe===""&&(le.en2=""):le.en2=oe-N.en}if(Ee==="boy1"){const oe=parseFloat(fe);isNaN(oe)?fe===""&&(le.boy2=""):le.boy2=oe-N.boy}k({...j,items:F})},L=()=>{k({...j,items:[...j.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},V=J=>{const Ee=j.items.filter((fe,F)=>F!==J);k({...j,items:Ee})},se=(J,Ee)=>{const fe=parseFloat(Ee)||0,F={...N,[J]:fe};C(F);const le=j.items.map(oe=>({...oe,en2:oe.en1?parseFloat(oe.en1)-F.en:oe.en2,boy2:oe.boy1?parseFloat(oe.boy1)-F.boy:oe.boy2}));k({...j,items:le})},he=J=>{w(J),z(!0)},Ce=async(J,Ee)=>{if(!R)return;const fe=R.productionStatus||{},F=fe[J]||{},le={...fe,[J]:{...F,[Ee]:!F[Ee]}};w({...R,productionStatus:le}),await er(Gt(ze,"siparisler",R.id),{productionStatus:le})},Me=J=>{const Ee=f.find(le=>le.id===J.customerId)||{name:"Bilinmeyen Mteri"},fe=window.open("","","height=800,width=1000");if(!fe){alert("Pop-up engelleyiciyi kapatn.");return}const F=`
      <html><head><title>Sipari - ${J.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 11px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${Ee.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${J.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${Zx(J.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 6%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 58%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- Sekil -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th>EKL</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
            </tr>
          </thead>
          <tbody>
            ${J.items.map(le=>`
              <tr>
                <td class="group-kasa">${le.en1||"-"}</td>
                <td class="group-kasa">${le.boy1||"-"}</td>
                <td class="group-kasa">${le.genislik||"-"}</td>
                <td>${le.takim||""}</td>
                <td class="col-desc">${le.aciklama||""}</td>
                <td>${le.sekil||""}</td>
                <td class="group-net"><strong>${le.en2||""}</strong></td>
                <td class="group-net"><strong>${le.boy2||""}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${J.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${J.note}
          </div>
        `:""}

        ${J.image?`
          <div class="door-image-container">
            <img src="${J.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;fe.document.write(F),fe.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:we,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:v.start,endDate:v.end,onStartChange:J=>y({...v,start:J}),onEndChange:J=>y({...v,end:J})}),I&&c.jsxs("button",{onClick:qe,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Le.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:f.map(J=>{const Ee=o.filter(fe=>{const F=fe.customerId===J.id;let le=!0;return v.start&&(le=le&&fe.date>=v.start),v.end&&(le=le&&fe.date<=v.end),F&&le});return Ee.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Le.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:J.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[Ee.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:Ee.map(fe=>{const F=U[fe.id],le=W[fe.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:fe.image?c.jsx("img",{src:fe.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",fe.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:Zx(fe.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[fe.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ue(oe=>({...oe,[fe.id]:!oe[fe.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[F?c.jsx(Le.ChevronUp,{}):c.jsx(Le.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>me(oe=>({...oe,[fe.id]:!oe[fe.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[le?c.jsx(Le.ChevronUp,{}):c.jsx(Le.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>he(fe),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Le.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Me(fe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Le.Printer,{})}),I&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Ye(fe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Le.Edit,{})}),c.jsx("button",{onClick:()=>M(fe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Le.Trash,{})})]})]})]}),F&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.items?.map((oe,Te)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:oe.aciklama||"-"}),c.jsx("td",{className:"py-2",children:oe.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[oe.en1||"-"," x ",oe.boy1||"-"," x ",oe.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[oe.en2," x ",oe.boy2]}),c.jsx("td",{className:"py-2",children:oe.sekil||"-"})]},Te))})]})}),le&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(Wx).map(([oe,Te])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:Te.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:Te.steps.map(ye=>{const je=fe.productionStatus?.[oe]?.[ye.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:je?"text-purple-700 font-medium":"text-gray-400",children:ye.label}),je?c.jsx(Le.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Le.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},ye.id)})})]},oe))})})]},fe.id)})})]},J.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:be?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:j.siparisNo,onChange:J=>k({...j,siparisNo:J.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:j.customerId,onChange:J=>k({...j,customerId:J.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",children:[c.jsx("option",{value:"",children:"Seiniz..."}),f.map(J=>c.jsxs("option",{value:J.id,children:[J.name," (",J.company,")"]},J.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:j.date,onChange:J=>k({...j,date:J.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${X?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:ke,onDragLeave:Y,onDrop:ge,children:[c.jsx("input",{ref:ae,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:J=>de(J.target.files[0])}),j.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:j.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Le.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:X?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:j.note,onChange:J=>k({...j,note:J.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:N.en,onChange:J=>se("en",J.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:N.boy,onChange:J=>se("boy",J.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:j.items.map((J,Ee)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:J.en1,onChange:fe=>pe(Ee,"en1",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:J.boy1,onChange:fe=>pe(Ee,"boy1",fe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:J.genislik,onChange:fe=>pe(Ee,"genislik",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:J.takim,onChange:fe=>pe(Ee,"takim",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:J.aciklama,onChange:fe=>pe(Ee,"aciklama",fe.target.value),onInput:fe=>{fe.target.style.height="auto",fe.target.style.height=fe.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${Ee}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:J.sekil,onChange:fe=>pe(Ee,"sekil",fe.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${Ee}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:J.en2,onChange:fe=>pe(Ee,"en2",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:J.boy2,onChange:fe=>pe(Ee,"boy2",fe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>V(Ee),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},Ee))})]}),c.jsx("button",{type:"button",onClick:L,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:be?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(Wx).map(([J,Ee])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:Ee.title}),c.jsx("div",{className:"space-y-2",children:Ee.steps.map(fe=>{const F=R.productionStatus?.[J]?.[fe.id];return c.jsxs("button",{onClick:()=>Ce(J,fe.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${F?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:fe.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${F?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:F&&c.jsx(Le.Check,{})})]},fe.id)})})]},J))})]})})]})}const Bj=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",qj=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Jx=({item:r,isAdd:e,onEdit:s,onDelete:i})=>c.jsxs(I1,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:Bj(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Le.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Le.Trash,{})})]})]})]});function Hj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState({start:"",end:""}),[v,y]=te.useState(!1),[_,E]=te.useState([]),[A,z]=te.useState(!0),[X,$]=te.useState(!0),[U,ue]=te.useState(null),[W,me]=te.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),ae=te.useMemo(()=>[...new Set(o.map(de=>de.productName))].sort(),[o]),be=te.useMemo(()=>{const de=o.map(Y=>Y.unit).filter(Boolean),ke=["adet","kg","m2","m3","mt","paket"];return[...new Set([...ke,...de])].sort()},[o]);te.useEffect(()=>{const de=ns.onAuthStateChanged(ge=>{e(ge),i(!1)}),ke=ss(Tt(ze,"inventory_movements"),ws("date","desc")),Y=An(ke,ge=>{d(ge.docs.map(we=>({id:we.id,...we.data()})))});return()=>{de(),Y()}},[]);const xe=te.useMemo(()=>o.filter(de=>{let ke=!0;if(f.start&&(ke=ke&&de.date>=f.start),f.end&&(ke=ke&&de.date<=f.end),de.productType==="raw"&&!A||(de.productType==="manufactured"||de.productType==="uretilmis")&&!X)return!1;let Y=!0;return _.length>0&&(Y=_.includes(de.productName)),ke&&Y}),[o,f,A,X,_]),R=xe.filter(de=>de.action==="add"),w=xe.filter(de=>de.action==="remove"),N=async de=>{de.preventDefault();try{const ke={...W,quantity:Number(W.quantity),createdAt:new Date().toISOString()};U?await er(Gt(ze,"inventory_movements",U),ke):await Sr(Tt(ze,"inventory_movements"),ke),I()}catch(ke){alert("Hata: "+ke.message)}},C=async de=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Ii(Gt(ze,"inventory_movements",de))},j=async de=>{if(window.confirm(`"${de}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const ke=ss(Tt(ze,"inventory_movements"),Sj("productName","==",de)),Y=await jj(ke),ge=kj(ze);Y.forEach(we=>{ge.delete(we.ref)}),await ge.commit(),_.includes(de)&&E(we=>we.filter(qe=>qe!==de)),W.productName===de&&me(we=>({...we,productName:""}))}catch(ke){alert("Silme hatas: "+ke.message)}},k=de=>{ue(de.id),me({productType:de.productType,productName:de.productName,action:de.action,quantity:de.quantity,unit:de.unit,date:de.date}),y(!0)},I=()=>{y(!1),ue(null),me({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:de=>p({...f,start:de}),onEndChange:de=>p({...f,end:de})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(qj,{showRaw:A,setShowRaw:z,showManufactured:X,setShowManufactured:$}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(gd,{options:ae,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Le.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(de=>c.jsx(Jx,{item:de,isAdd:!0,onEdit:k,onDelete:C},de.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[w.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[w.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),w.map(de=>c.jsx(Jx,{item:de,isAdd:!1,onEdit:k,onDelete:C},de.id))]})]})]}),c.jsx(R1,{isOpen:v,onClose:I,title:U?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:N,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${W.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:W.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(Vj,{checked:W.productType==="manufactured",onChange:de=>me({...W,productType:de?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(gd,{options:ae,selected:W.productName,onChange:de=>me({...W,productName:de}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:j})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>me({...W,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>me({...W,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(vs,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:W.quantity,onChange:de=>me({...W,quantity:de.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(gd,{options:be,selected:W.unit,onChange:de=>me({...W,unit:de}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(vs,{type:"date",required:!0,value:W.date,onChange:de=>me({...W,date:de.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(fa,{type:"submit",variant:"primary",children:U?"Gncelle":"Kaydet"}),c.jsx(fa,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const Fj=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Gj=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,i=800,o=40,d=i-o*2,f=s-o*2,p=r.flatMap(_=>e.map(E=>_[E]||0)),v=Math.max(...p,10)*1.1,y=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:E,x2:i-o,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(v/4*_)})]},_)}),e.map((_,E)=>{const A=y[E%y.length],z=r.map((X,$)=>{const U=o+$*(d/(r.length-1||1)),ue=X[_]||0,W=s-o-ue/v*f,me=isNaN(U)?o:U,ae=isNaN(W)?s-o:W;return`${me},${ae}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:z,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),r.map((X,$)=>{const U=o+$*(d/(r.length-1||1)),ue=X[_]||0,W=s-o-ue/v*f,me=isNaN(U)?o:U,ae=isNaN(W)?s-o:W;return c.jsx("circle",{cx:me,cy:ae,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${X.month} - ${_}: ${ue}`})},$)})]},_)}),r.map((_,E)=>{const A=o+E*(d/(r.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[E%y.length]}}),_]},_))})]})},Yj=({name:r,qty:e,unit:s,type:i,change:o,changePercent:d})=>{const f=i==="raw",p=e<0,v=d>10;let y="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});d>10?(y="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(Le.TrendingUp,{})):d<-10&&(y="text-red-600",_="bg-red-100/50",E=c.jsx(Le.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",z=f?"text-pink-900":"text-purple-900",X=f?"text-pink-700/70":"text-purple-700/70";p?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",z="text-red-700",X="text-red-500"):v&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",z="text-emerald-800",X="text-emerald-600");const $=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:$}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:r,children:r})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${z}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${X} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${y} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(d).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function Kj(){const[r,e]=te.useState([]),[s,i]=te.useState(!0),[o,d]=te.useState(!0),[f,p]=te.useState(!0),[v,y]=te.useState([]),[_,E]=te.useState("year");te.useEffect(()=>{const U=ss(Tt(ze,"inventory_movements"),ws("date","asc")),ue=An(U,W=>{const me=W.docs.map(ae=>ae.data());e(me),i(!1)});return()=>ue()},[]);const A=te.useMemo(()=>{const U={},ue=new Date;return ue.setDate(ue.getDate()-30),r.forEach(W=>{const me=Number(W.quantity)||0,ae=W.action==="add"?me:-me,be=new Date(W.date);U[W.productName]||(U[W.productName]={name:W.productName,qty:0,unit:W.unit,type:W.productType||"raw",change30Days:0}),U[W.productName].qty+=ae,U[W.productName].type=W.productType||U[W.productName].type,be>=ue&&(U[W.productName].change30Days+=ae)}),Object.values(U).map(W=>{const me=W.qty-W.change30Days;let ae=0;return me!==0?ae=W.change30Days/Math.abs(me)*100:W.change30Days!==0&&(ae=100),{...W,changePercent:ae}})},[r]),z=te.useMemo(()=>A.filter(U=>!(U.type==="raw"&&!o||(U.type==="manufactured"||U.type==="uretilmis")&&!f||v.length>0&&!v.includes(U.name))),[A,o,f,v]),X=te.useMemo(()=>A.map(U=>U.name).sort(),[A]),$=te.useMemo(()=>{const U=z.sort((ae,be)=>Math.abs(be.qty)-Math.abs(ae.qty)).slice(0,5).map(ae=>ae.name);if(U.length===0)return{data:[],keys:[]};const ue={},W={};return U.forEach(ae=>W[ae]=0),r.forEach(ae=>{if(!U.includes(ae.productName))return;const be=ae.date?ae.date.slice(0,7):"N/A";if(be==="N/A")return;if(_==="year"){const w=new Date().getFullYear();if(new Date(ae.date).getFullYear()!==w)return}const xe=Number(ae.quantity)||0,R=ae.action==="add"?xe:-xe;W[ae.productName]||(W[ae.productName]=0),W[ae.productName]+=R,ue[be]={...W,month:be}}),{data:Object.values(ue).sort((ae,be)=>ae.month.localeCompare(be.month)),keys:U}},[r,z,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(Fj,{showRaw:o,setShowRaw:d,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(gd,{options:X,selected:v,onChange:y,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:z.length>0?z.map((U,ue)=>c.jsx(Yj,{name:U.name,qty:U.qty,unit:U.unit,type:U.type,change:U.change30Days,changePercent:U.changePercent},ue)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Le.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),$.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Le.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:U=>E(U.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(Gj,{data:$.data,keys:$.keys})]})]})]})}const Gs=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",rd=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function Qj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState({start:"",end:""}),[v,y]=te.useState(!1),[_,E]=te.useState(null),[A,z]=te.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",items:[]});if(te.useEffect(()=>{const w=ns.onAuthStateChanged(j=>{e(j),i(!1)}),N=ss(Tt(ze,"teklifler"),ws("createdAt","desc")),C=An(N,j=>{d(j.docs.map(k=>({id:k.id,...k.data()})))});return()=>{w(),C()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Le.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const X=(w,N,C)=>{const j=w*N,k=j*(C/100);return j+k},$=w=>{if(!w)return{subtotal:0,totalVAT:0,grandTotal:0};const N=w.reduce((j,k)=>j+Number(k.quantity)*Number(k.price),0),C=w.reduce((j,k)=>j+Number(k.quantity)*Number(k.price)*(Number(k.vat)/100),0);return{subtotal:N,totalVAT:C,grandTotal:N+C}},U=()=>{E(null);const w="TK-"+Date.now().toString().slice(-6),N=new Date;N.setDate(N.getDate()+7),z({teklifNo:w,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:N.toISOString().split("T")[0],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),y(!0)},ue=w=>{E(w.id),z({teklifNo:w.teklifNo,teklifName:w.teklifName||"",customerName:w.customerName,date:w.date,validityDate:w.validityDate||"",items:w.items||[]}),y(!0)},W=async w=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Ii(Gt(ze,"teklifler",w))}catch(N){alert(N.message)}},me=async w=>{if(w.preventDefault(),!A.customerName){alert("Ltfen mteri ad giriniz.");return}try{const N={...A,createdAt:new Date().toISOString()};_?await er(Gt(ze,"teklifler",_),N):await Sr(Tt(ze,"teklifler"),N),y(!1)}catch(N){alert(N.message)}},ae=(w,N,C)=>{const j=[...A.items],k=j[w];k[N]=C;const I=parseFloat(N==="quantity"?C:k.quantity),de=parseFloat(N==="price"?C:k.price),ke=parseFloat(N==="vat"?C:k.vat);!isNaN(I)&&!isNaN(de)&&!isNaN(ke)&&(k.total=X(I,de,ke)),z({...A,items:j})},be=()=>{z({...A,items:[...A.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},xe=w=>{z({...A,items:A.items.filter((N,C)=>C!==w)})},R=w=>{const N=window.open("","","height=800,width=1000");if(!N){alert("Pop-up engelleyiciyi kapatn.");return}const C=$(w.items||[]),j=`
      <html><head><title>Teklif - ${w.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; }
        
        /* Header Layout */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
        
        /* Left: Company Info */
        .company-info { width: 55%; }
        .company-name { font-size: 22px; font-weight: bold; color: #4F46E5; margin-bottom: 5px; text-transform: uppercase; }
        .company-sub { font-size: 11px; color: #666; font-weight: bold; margin-bottom: 10px; display: block; }
        .company-details { font-size: 10px; color: #555; line-height: 1.4; }
        
        /* Right: Proposal Meta */
        .meta-info { width: 40%; text-align: right; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #ddd; letter-spacing: 2px; margin-bottom: 15px; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 4px 0; border-bottom: 1px solid #f9f9f9; }
        .meta-label { font-weight: bold; color: #666; }
        .meta-value { font-weight: bold; color: #333; }
        
        /* Customer Box */
        .customer-box { background: #f8fafc; padding: 15px; border-radius: 8px; margin-bottom: 30px; border: 1px solid #e2e8f0; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; margin-bottom: 4px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #334155; }

        /* Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 30px; }
        table.items th { background: #4F46E5; color: white; padding: 10px 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #e2e8f0; padding: 10px 8px; vertical-align: top; }
        
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .col-desc { width: 45%; }
        
        /* Totals */
        .totals-container { float: right; width: 250px; }
        .total-row { display: flex; justify-content: space-between; padding: 6px 0; font-size: 12px; border-bottom: 1px solid #f1f5f9; }
        .grand-total { font-size: 16px; font-weight: bold; color: #4F46E5; border-top: 2px solid #e2e8f0; padding-top: 10px; margin-top: 5px; border-bottom: none; }
        
        /* Footer */
        .footer { margin-top: auto; border-top: 1px solid #eee; padding-top: 15px; font-size: 9px; color: #94a3b8; text-align: center; }
      </style>
      </head><body>
        
        <div class="header-container">
          <div class="company-info">
            <div class="company-name">Erelebiler Ahap</div>
            <span class="company-sub">Ahap Dorama Scak Pres Kap Sanayii</span>
            <div class="company-details">
              Page  Industrial Company<br>
              Tosya, Turkey<br>
              Tel: +90 366 313 69 70<br>
              twitter.com/ercelebilerahsap<br>
              ercelebilerahsap.com.tr
            </div>
          </div>
          <div class="meta-info">
            <div class="invoice-title">TEKLF</div>
            <table class="meta-table" align="right">
              <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${w.teklifNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td class="meta-value">${rd(w.date)}</td></tr>
              <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${rd(w.validityDate)}</td></tr>
            </table>
          </div>
        </div>

        <div class="customer-box">
          <div class="customer-label">Sayn</div>
          <div class="customer-name">${w.customerName}</div>
        </div>

        <table class="items">
          <thead>
            <tr>
              <th class="col-desc">Aklama</th>
              <th class="text-center">Miktar</th>
              <th class="text-right">Birim Fiyat</th>
              <th class="text-center">KDV %</th>
              <th class="text-right">Tutar</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map(k=>`
              <tr>
                <td>${k.description}</td>
                <td class="text-center">${k.quantity}</td>
                <td class="text-right">${Gs(k.price)}</td>
                <td class="text-center">%${k.vat}</td>
                <td class="text-right"><strong>${Gs(k.total)}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals-container">
          <div class="total-row"><span>Ara Toplam:</span> <span>${Gs(C.subtotal)}</span></div>
          <div class="total-row"><span>Toplam KDV:</span> <span>${Gs(C.totalVAT)}</span></div>
          <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Gs(C.grandTotal)}</span></div>
        </div>

        <div class="footer">
          Bu belge elektronik ortamda retilmitir. Geerlilik tarihine kadar onaylanmas durumunda balaycl vardr.
        </div>

        <script>
           setTimeout(() => { window.print(); }, 500);
        <\/script>
      </body></html>
    `;N.document.write(j),N.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:w=>p({...f,start:w}),onEndChange:w=>p({...f,end:w})}),c.jsxs("button",{onClick:U,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Le.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(w=>{let N=!0;return f.start&&w.date<f.start&&(N=!1),f.end&&w.date>f.end&&(N=!1),N}).map(w=>{const N=$(w.items);return c.jsxs(I1,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Le.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:w.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",w.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:w.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",rd(w.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",rd(w.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Gs(N.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>R(w),children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})})}),c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>ue(w),children:c.jsx(Le.Edit,{})}),c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>W(w.id),children:c.jsx(Le.Trash,{})})]})]})]},w.id)})]}),c.jsx(R1,{isOpen:v,onClose:()=>y(!1),title:_?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:me,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(vs,{value:A.teklifNo,onChange:w=>z({...A,teklifNo:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(vs,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:A.teklifName,onChange:w=>z({...A,teklifName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(vs,{required:!0,placeholder:"Mteri ad giriniz...",value:A.customerName,onChange:w=>z({...A,customerName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(vs,{type:"date",required:!0,value:A.date,onChange:w=>z({...A,date:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(vs,{type:"date",required:!0,value:A.validityDate,onChange:w=>z({...A,validityDate:w.target.value})})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:A.items.map((w,N)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(vs,{placeholder:"rn/Hizmet aklamas",value:w.description,onChange:C=>ae(N,"description",C.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(vs,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white",value:w.quantity,onChange:C=>ae(N,"quantity",C.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(vs,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white",value:w.price,onChange:C=>ae(N,"price",C.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:w.vat,onChange:C=>ae(N,"vat",C.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Gs(w.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>xe(N),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Le.Trash,{})})})]},N))})]}),c.jsx("button",{type:"button",onClick:be,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Gs($(A.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Gs($(A.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Gs($(A.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(fa,{type:"submit",variant:"primary",children:_?"Kaydet":"Olutur"}),c.jsx(fa,{type:"button",variant:"secondary",onClick:()=>y(!1),children:"ptal"})]})]})})]})}const Jn={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},$j="86715dfc9d1046e7e8a0d95a",Xj=`https://v6.exchangerate-api.com/v6/${$j}/latest/USD`,wm=({ops:r,onChange:e,allowRefs:s=!1,rows:i=[],constants:o=[],constantsMap:d})=>{const f=(y,_,E)=>{const A=[...r];A[y]={...A[y],[_]:E},_==="type"&&E!=="op"&&(A[y].value=""),e(A)},p=()=>{e([...r,{type:"op",value:"+"},{type:"num",value:0}])},v=y=>{if(y===0)return;const _=[...r];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[r.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:E=>f(_,"type",E.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:E=>f(_,"value",E.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),i.map(E=>c.jsx("option",{value:E.id,children:E.name||"simsiz Satr"},E.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(Jn.Plus,{})})]})};function Wj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState([]),[v,y]=te.useState({TRY:1,USD:1,EUR:1}),[_,E]=te.useState(null),[A,z]=te.useState(!1),[X,$]=te.useState(!1),[U,ue]=te.useState(null),[W,me]=te.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[ae,be]=te.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});te.useEffect(()=>{const V=ns.onAuthStateChanged(J=>{e(J),i(!1)}),se=ss(Tt(ze,"pricing_constants"),ws("name","asc")),he=An(se,J=>{d(J.docs.map(Ee=>({id:Ee.id,...Ee.data()})))}),Ce=ss(Tt(ze,"pricing_items"),ws("updatedAt","desc")),Me=An(Ce,J=>{p(J.docs.map(Ee=>({id:Ee.id,...Ee.data()})))});return xe(),()=>{V(),he(),Me()}},[]);const xe=async()=>{try{const se=await(await fetch(Xj)).json();if(se&&se.conversion_rates){const he=se.conversion_rates.TRY,Ce=se.conversion_rates.EUR,Me=he/Ce;y({TRY:1,USD:he,EUR:Me}),E(new Date().toLocaleTimeString())}}catch(V){console.error("Rate fetch error",V)}},R=(V,se)=>{if(!se||se==="None"||se==="TRY")return parseFloat(V)||0;const he=v[se]||1;return parseFloat(V)*he},w=(V,se)=>{if(se==="TRY")return V;const he=v[se]||1;return V/he},N=(V,se={})=>{if(V.type==="num")return parseFloat(V.value)||0;if(V.type==="const"){const he=o.find(Ce=>Ce.id===V.value);return he?R(he.value,he.currency):0}return V.type==="ref"&&se[V.value]||0},C=(V,se={})=>{if(!V||V.length===0)return 0;let he=N(V[0],se);for(let Ce=1;Ce<V.length;Ce+=2){const Me=V[Ce].value,J=N(V[Ce+1],se);switch(Me){case"+":he+=J;break;case"-":he-=J;break;case"*":he*=J;break;case"/":he=J!==0?he/J:0;break}}return he},j=V=>{const se={};(V.rows||[]).forEach(Ce=>{se[Ce.id]=C(Ce.ops,se)});const he=C(V.finalFormula?.ops,se);return w(he,V.finalCurrency||"TRY")},k=V=>C(V,{}),I=te.useMemo(()=>j(ae),[ae,o,v]),de=te.useMemo(()=>k(W.ops),[W.ops,o,v]),ke=async V=>{V.preventDefault();const se=k(W.ops),he={...W,value:se};U?await er(Gt(ze,"pricing_constants",U),he):await Sr(Tt(ze,"pricing_constants"),he),me({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ue(null),z(!1)},Y=async V=>await Ii(Gt(ze,"pricing_constants",V)),ge=()=>{const V="row_"+Date.now();be({...ae,rows:[...ae.rows,{id:V,name:"",ops:[{type:"num",value:0}]}]})},we=V=>{const se=[...ae.rows];se.splice(V,1),be({...ae,rows:se})},qe=(V,se)=>{const he=[...ae.rows];he[V].name=se,be({...ae,rows:he})},Ye=(V,se)=>{const he=[...ae.rows];he[V].ops=se,be({...ae,rows:he})},M=async V=>{V.preventDefault();const se={...ae,updatedAt:new Date().toISOString()};U?await er(Gt(ze,"pricing_items",U),se):await Sr(Tt(ze,"pricing_items"),se),be({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),ue(null),$(!1)},ee=V=>{const se={...V,rows:V.rows||[],finalFormula:V.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:V.finalCurrency||"TRY"};be(se),ue(V.id),$(!0)},pe=async V=>{window.confirm("Silmek istediinize emin misiniz?")&&await Ii(Gt(ze,"pricing_items",V))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:xe,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Jn.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{ue(null),me({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),z(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Jn.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{ue(null),be({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),$(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Jn.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(Jn.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(V=>{const se=R(V.value,V.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:V.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[V.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",V.currency!=="None"?V.currency:"",V.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",V.unit]}):""]}),V.currency!=="TRY"&&V.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",se.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{me({...V,ops:V.ops||[{type:"num",value:V.value}]}),ue(V.id),z(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Jn.Edit,{})}),c.jsx("button",{onClick:()=>Y(V.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Jn.Trash,{})})]})]},V.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(V=>{const se=j(V),he=V.finalCurrency||"TRY",Ce=Math.random()>.5?"up":"down",Me=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(V.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:V.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:V.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[se.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",he]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ce==="up"?"text-emerald-500":"text-red-500"}`,children:[Ce==="up"?c.jsx(Jn.TrendingUp,{}):c.jsx(Jn.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",Me]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>ee(V),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>pe(V.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},V.id)})})]})]}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:ke,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.name,onChange:V=>me({...W,name:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.unit,onChange:V=>me({...W,unit:V.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(wm,{ops:W.ops,onChange:V=>me({...W,ops:V}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:de.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:W.currency,onChange:V=>me({...W,currency:V.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),X&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:M,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:ae.title,onChange:V=>be({...ae,title:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:ae.unitType,onChange:V=>be({...ae,unitType:V.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:ge,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),ae.rows.map((V,se)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:V.name,onChange:he=>qe(se,he.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(wm,{ops:V.ops,onChange:he=>Ye(se,he),allowRefs:!0,rows:ae.rows.slice(0,se),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:C(V.ops,j({...ae,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>we(se),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Jn.Trash,{})})]})]},V.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Jn.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:ae.finalCurrency,onChange:V=>be({...ae,finalCurrency:V.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(wm,{ops:ae.finalFormula.ops,onChange:V=>be({...ae,finalFormula:{...ae.finalFormula,ops:V}}),allowRefs:!0,rows:ae.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[I.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:ae.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:M,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>$(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Jn.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]})}const da={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},fl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},eb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],Zj=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Tm=2.5,ys=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function Jj(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState([]),[f,p]=te.useState(new Date),[v,y]=te.useState(!1),[_,E]=te.useState(!1),[A,z]=te.useState(null),[X,$]=te.useState(new Date),[U,ue]=te.useState(!1),[W,me]=te.useState(new Date().getFullYear()),[ae,be]=te.useState(!1),[xe,R]=te.useState(null),[w,N]=te.useState({type:"work",overtimeSlots:0,lateness:0}),[C,j]=te.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});te.useEffect(()=>{const L=ns.onAuthStateChanged(Ce=>{e(Ce),i(!1)}),V=ss(Tt(ze,"employees"),ws("name","asc")),se=An(V,Ce=>{d(Ce.docs.map(Me=>({id:Me.id,...Me.data()})))}),he=setInterval(()=>p(new Date),6e4);return()=>{L(),se(),clearInterval(he)}},[]);const k=L=>{const V=f.toISOString().split("T")[0],se=f.getDay(),he=f.getHours(),Ce=f.getMinutes(),Me=he*60+Ce,J=L.attendance?.[V];if(J){if(["paid_leave","unpaid_leave"].includes(J.type))return fl.LEAVE;if(J.overtimeSlots>0)return fl.OVERTIME}const[Ee,fe]=L.startHour.split(":").map(Number),[F,le]=L.endHour.split(":").map(Number),oe=Ee*60+fe,Te=F*60+le;return L.workDays.includes(se)?Me>=oe&&Me<Te?fl.ONLINE:Me>=Te&&J?.overtimeSlots>0?fl.OVERTIME:fl.OFFLINE:fl.OFFLINE},I=L=>{if(!L.attendance)return{used:0,remaining:L.vacationTotal};let V=0;return Object.values(L.attendance).forEach(se=>{se.type==="paid_leave"&&V++}),{used:V,remaining:L.vacationTotal-V}},de=(L,V)=>{const se=V.getFullYear(),he=V.getMonth(),Ce=new Date(se,he+1,0).getDate();let Me=0,J=0,Ee=0,fe=0,F=0;for(let nr=1;nr<=Ce;nr++){const Mr=`${se}-${String(he+1).padStart(2,"0")}-${String(nr).padStart(2,"0")}`,Ts=new Date(Mr).getDay(),Un=L.attendance?.[Mr],Sa=L.workDays.includes(Ts);Un?(Un.type==="work"&&Me++,Un.type==="paid_leave"&&F++,Un.type==="unpaid_leave"&&fe++,Un.overtimeSlots&&(J+=parseInt(Un.overtimeSlots)),Un.lateness&&(Ee+=parseFloat(Un.lateness))):Sa&&Me++}const le=parseFloat(L.salaryAmount)||0,oe=L.customDailyRate&&parseFloat(L.customDailyRate)>0?parseFloat(L.customDailyRate):le/30,Te=parseFloat(L.customDeductionRate),ye=!isNaN(Te)&&Te>0?Te:oe,je=oe/9,Ke=L.customOvertimeMultiplier?parseFloat(L.customOvertimeMultiplier):1.5,pt=J*Tm,mn=pt*(je*Ke),Pl=fe*ye,Vi=Ee*je,Qt=Pl+Vi,tr=le+mn-Qt+(parseFloat(L.insurance)||0)+(parseFloat(L.allowance)||0);return{workedDays:Me,totalOvertimeSlots:J,totalOvertimeHours:pt,unpaidLeaveDays:fe,paidLeaveDays:F,overtimePay:mn,totalLatenessHours:Ee,latenessDeduction:Vi,totalDeduction:Qt,totalSalary:tr,dailyRate:oe,hourlyRate:je,deductionRate:ye}},ke=(L,V)=>{const se=new Date(L,V,1);let he=0;return o.forEach(Ce=>{he+=de(Ce,se).totalSalary}),he},Y=te.useMemo(()=>{let L=0,V=0;const se=new Date(X);return se.setMonth(X.getMonth()-1),o.forEach(he=>{L+=de(he,X).totalSalary,V+=de(he,se).totalSalary}),{thisMonthTotal:L,lastMonthTotal:V}},[o,X]),ge=()=>{E(!1),j({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},we=()=>{A&&(E(!0),j({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),z(null),y(!0))},qe=async L=>{L.preventDefault();try{const V={...C,updatedAt:new Date().toISOString()};_&&A?await er(Gt(ze,"employees",A.id),V):await Sr(Tt(ze,"employees"),{...V,createdAt:new Date().toISOString()}),y(!1)}catch(V){alert("Hata: "+V.message)}},Ye=async L=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Ii(Gt(ze,"employees",L)),z(null))},M=(L,V)=>{R(L),N({type:V?.type||"work",overtimeSlots:V?.overtimeSlots||0,lateness:V?.lateness||0}),be(!0)},ee=async L=>{if(L.preventDefault(),!A||!xe)return;const V={...A.attendance};V[xe]={type:w.type,overtimeSlots:parseInt(w.overtimeSlots)||0,lateness:parseFloat(w.lateness)||0},await er(Gt(ze,"employees",A.id),{attendance:V}),z({...A,attendance:V}),be(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(da.Lock,{})," Yetkisiz Eriim"]});const pe=({employee:L,date:V,onDateClick:se})=>{const he=V.getFullYear(),Ce=V.getMonth(),Me=new Date(he,Ce+1,0).getDate(),J=new Date(he,Ce,1).getDay(),Ee=[];for(let fe=0;fe<J;fe++)Ee.push(null);for(let fe=1;fe<=Me;fe++)Ee.push(fe);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:eb.map((fe,F)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:fe.slice(0,3)},F))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:Ee.map((fe,F)=>{if(!fe)return c.jsx("div",{},F);const le=`${he}-${String(Ce+1).padStart(2,"0")}-${String(fe).padStart(2,"0")}`,oe=L.attendance?.[le],Te=new Date(le).getDay(),ye=L.workDays.includes(Te);let je="bg-gray-50 text-gray-400 border-gray-100";return ye&&(je="bg-white border-emerald-200 text-gray-700 shadow-sm"),oe&&(oe.type==="paid_leave"&&(je="bg-yellow-50 border-yellow-200 text-yellow-700"),oe.type==="unpaid_leave"&&(je="bg-red-50 border-red-200 text-red-700"),oe.type==="work"&&(oe.overtimeSlots>0||oe.lateness>0)&&(je="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),oe.type==="off"&&(je="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>se(le,oe),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${je}`,children:[c.jsx("span",{className:"text-sm",children:fe}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[oe?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",oe.overtimeSlots,"M"]}),oe?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",oe.lateness,"s"]})]})]},F)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ue(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:ys(Y.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(da.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ue(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:ys(Y.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:ge,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(da.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(L=>{const V=k(L),se=I(L);return c.jsxs("div",{onClick:()=>z(L),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${V.color} ${V.ring} ring-offset-2 ring-2`,children:V.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(da.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:L.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[L.startHour," - ",L.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[se.remaining," gn kald"]})]})]})]},L.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:we,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(da.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ye(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(da.Trash,{})}),c.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const L=de(A,X);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:ys(L.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:ys(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",L.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",ys(L.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",L.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",ys(L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",L.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",ys(L.totalDeduction-L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",ys(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Tm," Saat",c.jsx("br",{}),"Saatlik cret = ",ys(L.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",ys(L.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>$(new Date(X.setMonth(X.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:X.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>$(new Date(X.setMonth(X.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(pe,{employee:A,date:X,onDateClick:M})]})]})]})}),U&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ue(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(da.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>me(L=>L-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:W}),c.jsx("button",{onClick:()=>me(L=>L+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Zj.map((L,V)=>{const se=ke(W,V),he=new Date().getMonth()===V&&new Date().getFullYear()===W;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${he?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${he?"text-indigo-200":"text-gray-400"}`,children:L}),c.jsx("div",{className:`text-lg font-bold ${he?"text-white":"text-gray-800"}`,children:se>0?ys(se):"-"})]},L)})})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:qe,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:C.name,onChange:L=>j({...C,name:L.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:C.role,onChange:L=>j({...C,role:L.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.salaryType,onChange:L=>j({...C,salaryType:L.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.salaryAmount,onChange:L=>j({...C,salaryAmount:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.insurance,onChange:L=>j({...C,insurance:L.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.allowance,onChange:L=>j({...C,allowance:L.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customDailyRate,onChange:L=>j({...C,customDailyRate:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customOvertimeMultiplier,onChange:L=>j({...C,customOvertimeMultiplier:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customDeductionRate,onChange:L=>j({...C,customDeductionRate:L.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.vacationTotal,onChange:L=>j({...C,vacationTotal:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.startHour,onChange:L=>j({...C,startHour:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.endHour,onChange:L=>j({...C,endHour:L.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:eb.map((L,V)=>c.jsx("button",{type:"button",onClick:()=>{const se=C.workDays.includes(V)?C.workDays.filter(he=>he!==V):[...C.workDays,V];j({...C,workDays:se})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${C.workDays.includes(V)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:L.slice(0,3)},L))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),ae&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:xe}),c.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(L=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:L.id,checked:w.type===L.id,onChange:V=>N({...w,type:V.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:L.label})]},L.id))})]}),w.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Tm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(L=>c.jsx("button",{type:"button",onClick:()=>N({...w,overtimeSlots:w.overtimeSlots===L?0:L}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${w.overtimeSlots===L?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:L},L))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:w.lateness,onChange:L=>N({...w,lateness:L.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>be(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function eC(){const[r,e]=te.useState(null),[s,i]=te.useState(!0),[o,d]=te.useState("dashboard"),[f,p]=te.useState(!1);te.useEffect(()=>{const A=aS(ns,z=>{e(z),i(!1)});return()=>A()},[]);const v=async()=>{try{await lS(ns)}catch(A){console.error("k yaplrken hata:",A)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],E=()=>{switch(o){case"dashboard":return c.jsx(Xx,{onNavigate:d});case"musteriler":return c.jsx(Uj,{});case"urunler":return c.jsx(Hj,{});case"stok":return c.jsx(Kj,{});case"siparis":return c.jsx(zj,{});case"teklif":return c.jsx(Qj,{});case"fiyatlandirma":return c.jsx(Wj,{});case"calisan":return c.jsx(Jj,{});default:return c.jsx(Xx,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{d(A.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:E()})})]})]}):c.jsx(Mj,{})}vw.createRoot(document.getElementById("root")).render(c.jsx(te.StrictMode,{children:c.jsx(eC,{})}));
