(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function d2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var sm={exports:{}},Ho={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function h2(){if(mv)return Ho;mv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Ho.Fragment=e,Ho.jsx=s,Ho.jsxs=s,Ho}var pv;function f2(){return pv||(pv=1,sm.exports=h2()),sm.exports}var c=f2(),im={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function m2(){if(gv)return Ke;gv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.iterator;function H(E){return E===null||typeof E!="object"?null:(E=A&&E[A]||E["@@iterator"],typeof E=="function"?E:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,P={};function ne(E,L,$){this.props=E,this.context=L,this.refs=P,this.updater=$||ee}ne.prototype.isReactComponent={},ne.prototype.setState=function(E,L){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,L,"setState")},ne.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function se(){}se.prototype=ne.prototype;function ge(E,L,$){this.props=E,this.context=L,this.refs=P,this.updater=$||ee}var de=ge.prototype=new se;de.constructor=ge,Z(de,ne.prototype),de.isPureReactComponent=!0;var be=Array.isArray;function he(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function j(E,L,$){var M=$.ref;return{$$typeof:i,type:E,key:L,ref:M!==void 0?M:null,props:$}}function k(E,L){return j(E.type,L,E.props)}function R(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function V(E){var L={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function($){return L[$]})}var I=/\/+/g;function me(E,L){return typeof E=="object"&&E!==null&&E.key!=null?V(""+E.key):L.toString(36)}function ze(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(he,he):(E.status="pending",E.then(function(L){E.status==="pending"&&(E.status="fulfilled",E.value=L)},function(L){E.status==="pending"&&(E.status="rejected",E.reason=L)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function K(E,L,$,M,te){var fe=typeof E;(fe==="undefined"||fe==="boolean")&&(E=null);var _e=!1;if(E===null)_e=!0;else switch(fe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(E.$$typeof){case i:case e:_e=!0;break;case _:return _e=E._init,K(_e(E._payload),L,$,M,te)}}if(_e)return te=te(E),_e=M===""?"."+me(E,0):M,be(te)?($="",_e!=null&&($=_e.replace(I,"$&/")+"/"),K(te,L,$,"",function(W){return W})):te!=null&&(R(te)&&(te=k(te,$+(te.key==null||E&&E.key===te.key?"":(""+te.key).replace(I,"$&/")+"/")+_e)),L.push(te)),1;_e=0;var Be=M===""?".":M+":";if(be(E))for(var Le=0;Le<E.length;Le++)M=E[Le],fe=Be+me(M,Le),_e+=K(M,L,$,fe,te);else if(Le=H(E),typeof Le=="function")for(E=Le.call(E),Le=0;!(M=E.next()).done;)M=M.value,fe=Be+me(M,Le++),_e+=K(M,L,$,fe,te);else if(fe==="object"){if(typeof E.then=="function")return K(ze(E),L,$,M,te);throw L=String(E),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ae(E,L,$){if(E==null)return E;var M=[],te=0;return K(E,M,"","",function(fe){return L.call($,fe,te++)}),M}function xe(E){if(E._status===-1){var L=E._result;L=L(),L.then(function($){(E._status===0||E._status===-1)&&(E._status=1,E._result=$)},function($){(E._status===0||E._status===-1)&&(E._status=2,E._result=$)}),E._status===-1&&(E._status=0,E._result=L)}if(E._status===1)return E._result.default;throw E._result}var De=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Ge={map:ae,forEach:function(E,L,$){ae(E,function(){L.apply(this,arguments)},$)},count:function(E){var L=0;return ae(E,function(){L++}),L},toArray:function(E){return ae(E,function(L){return L})||[]},only:function(E){if(!R(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Ke.Activity=S,Ke.Children=Ge,Ke.Component=ne,Ke.Fragment=s,Ke.Profiler=o,Ke.PureComponent=ge,Ke.StrictMode=r,Ke.Suspense=y,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(E){return C.H.useMemoCache(E)}},Ke.cache=function(E){return function(){return E.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(E,L,$){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var M=Z({},E.props),te=E.key;if(L!=null)for(fe in L.key!==void 0&&(te=""+L.key),L)!N.call(L,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&L.ref===void 0||(M[fe]=L[fe]);var fe=arguments.length-2;if(fe===1)M.children=$;else if(1<fe){for(var _e=Array(fe),Be=0;Be<fe;Be++)_e[Be]=arguments[Be+2];M.children=_e}return j(E.type,te,M)},Ke.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},Ke.createElement=function(E,L,$){var M,te={},fe=null;if(L!=null)for(M in L.key!==void 0&&(fe=""+L.key),L)N.call(L,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(te[M]=L[M]);var _e=arguments.length-2;if(_e===1)te.children=$;else if(1<_e){for(var Be=Array(_e),Le=0;Le<_e;Le++)Be[Le]=arguments[Le+2];te.children=Be}if(E&&E.defaultProps)for(M in _e=E.defaultProps,_e)te[M]===void 0&&(te[M]=_e[M]);return j(E,fe,te)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(E){return{$$typeof:g,render:E}},Ke.isValidElement=R,Ke.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:xe}},Ke.memo=function(E,L){return{$$typeof:v,type:E,compare:L===void 0?null:L}},Ke.startTransition=function(E){var L=C.T,$={};C.T=$;try{var M=E(),te=C.S;te!==null&&te($,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(he,De)}catch(fe){De(fe)}finally{L!==null&&$.types!==null&&(L.types=$.types),C.T=L}},Ke.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ke.use=function(E){return C.H.use(E)},Ke.useActionState=function(E,L,$){return C.H.useActionState(E,L,$)},Ke.useCallback=function(E,L){return C.H.useCallback(E,L)},Ke.useContext=function(E){return C.H.useContext(E)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(E,L){return C.H.useDeferredValue(E,L)},Ke.useEffect=function(E,L){return C.H.useEffect(E,L)},Ke.useEffectEvent=function(E){return C.H.useEffectEvent(E)},Ke.useId=function(){return C.H.useId()},Ke.useImperativeHandle=function(E,L,$){return C.H.useImperativeHandle(E,L,$)},Ke.useInsertionEffect=function(E,L){return C.H.useInsertionEffect(E,L)},Ke.useLayoutEffect=function(E,L){return C.H.useLayoutEffect(E,L)},Ke.useMemo=function(E,L){return C.H.useMemo(E,L)},Ke.useOptimistic=function(E,L){return C.H.useOptimistic(E,L)},Ke.useReducer=function(E,L,$){return C.H.useReducer(E,L,$)},Ke.useRef=function(E){return C.H.useRef(E)},Ke.useState=function(E){return C.H.useState(E)},Ke.useSyncExternalStore=function(E,L,$){return C.H.useSyncExternalStore(E,L,$)},Ke.useTransition=function(){return C.H.useTransition()},Ke.version="19.2.0",Ke}var yv;function tp(){return yv||(yv=1,im.exports=m2()),im.exports}var J=tp();const rb=d2(J);var rm={exports:{}},Fo={},am={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function p2(){return vv||(vv=1,(function(i){function e(K,ae){var xe=K.length;K.push(ae);e:for(;0<xe;){var De=xe-1>>>1,Ge=K[De];if(0<o(Ge,ae))K[De]=ae,K[xe]=Ge,xe=De;else break e}}function s(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ae=K[0],xe=K.pop();if(xe!==ae){K[0]=xe;e:for(var De=0,Ge=K.length,E=Ge>>>1;De<E;){var L=2*(De+1)-1,$=K[L],M=L+1,te=K[M];if(0>o($,xe))M<Ge&&0>o(te,$)?(K[De]=te,K[M]=xe,De=M):(K[De]=$,K[L]=xe,De=L);else if(M<Ge&&0>o(te,xe))K[De]=te,K[M]=xe,De=M;else break e}}return ae}function o(K,ae){var xe=K.sortIndex-ae.sortIndex;return xe!==0?xe:K.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var y=[],v=[],_=1,S=null,A=3,H=!1,ee=!1,Z=!1,P=!1,ne=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function de(K){for(var ae=s(v);ae!==null;){if(ae.callback===null)r(v);else if(ae.startTime<=K)r(v),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=s(v)}}function be(K){if(Z=!1,de(K),!ee)if(s(y)!==null)ee=!0,he||(he=!0,V());else{var ae=s(v);ae!==null&&ze(be,ae.startTime-K)}}var he=!1,C=-1,N=5,j=-1;function k(){return P?!0:!(i.unstable_now()-j<N)}function R(){if(P=!1,he){var K=i.unstable_now();j=K;var ae=!0;try{e:{ee=!1,Z&&(Z=!1,se(C),C=-1),H=!0;var xe=A;try{t:{for(de(K),S=s(y);S!==null&&!(S.expirationTime>K&&k());){var De=S.callback;if(typeof De=="function"){S.callback=null,A=S.priorityLevel;var Ge=De(S.expirationTime<=K);if(K=i.unstable_now(),typeof Ge=="function"){S.callback=Ge,de(K),ae=!0;break t}S===s(y)&&r(y),de(K)}else r(y);S=s(y)}if(S!==null)ae=!0;else{var E=s(v);E!==null&&ze(be,E.startTime-K),ae=!1}}break e}finally{S=null,A=xe,H=!1}ae=void 0}}finally{ae?V():he=!1}}}var V;if(typeof ge=="function")V=function(){ge(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,me=I.port2;I.port1.onmessage=R,V=function(){me.postMessage(null)}}else V=function(){ne(R,0)};function ze(K,ae){C=ne(function(){K(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(K){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var xe=A;A=ae;try{return K()}finally{A=xe}},i.unstable_requestPaint=function(){P=!0},i.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var xe=A;A=K;try{return ae()}finally{A=xe}},i.unstable_scheduleCallback=function(K,ae,xe){var De=i.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?De+xe:De):xe=De,K){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=xe+Ge,K={id:_++,callback:ae,priorityLevel:K,startTime:xe,expirationTime:Ge,sortIndex:-1},xe>De?(K.sortIndex=xe,e(v,K),s(y)===null&&K===s(v)&&(Z?(se(C),C=-1):Z=!0,ze(be,xe-De))):(K.sortIndex=Ge,e(y,K),ee||H||(ee=!0,he||(he=!0,V()))),K},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(K){var ae=A;return function(){var xe=A;A=ae;try{return K.apply(this,arguments)}finally{A=xe}}}})(lm)),lm}var xv;function g2(){return xv||(xv=1,am.exports=p2()),am.exports}var om={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function y2(){if(bv)return Tn;bv=1;var i=tp();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)v+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,v,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:v,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tn.createPortal=function(y,v){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(y,v,null,_)},Tn.flushSync=function(y){var v=f.T,_=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=v,r.p=_,r.d.f()}},Tn.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(y,v))},Tn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Tn.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var _=v.as,S=g(_,v.crossOrigin),A=typeof v.integrity=="string"?v.integrity:void 0,H=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;_==="style"?r.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:H}):_==="script"&&r.d.X(y,{crossOrigin:S,integrity:A,fetchPriority:H,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Tn.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var _=g(v.as,v.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(y)},Tn.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var _=v.as,S=g(_,v.crossOrigin);r.d.L(y,_,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Tn.preloadModule=function(y,v){if(typeof y=="string")if(v){var _=g(v.as,v.crossOrigin);r.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(y)},Tn.requestFormReset=function(y){r.d.r(y)},Tn.unstable_batchedUpdates=function(y,v){return y(v)},Tn.useFormState=function(y,v,_){return f.H.useFormState(y,v,_)},Tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Tn.version="19.2.0",Tn}var _v;function v2(){if(_v)return om.exports;_v=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),om.exports=y2(),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function x2(){if(wv)return Fo;wv=1;var i=g2(),e=tp(),s=v2();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function v(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return y(h),t;if(m===l)return y(h),n;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,w=h.child;w;){if(w===a){x=!0,a=h,l=m;break}if(w===l){x=!0,l=h,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,l=h;break}if(w===l){x=!0,l=m,a=h;break}w=w.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case ne:return"Profiler";case P:return"StrictMode";case be:return"Suspense";case he:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case ge:return t.displayName||"Context";case se:return(t._context.displayName||"Context")+".Consumer";case de:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return n=t.displayName||null,n!==null?n:me(t.type)||"Memo";case N:n=t._payload,t=t._init;try{return me(t(n))}catch{}}return null}var ze=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},De=[],Ge=-1;function E(t){return{current:t}}function L(t){0>Ge||(t.current=De[Ge],De[Ge]=null,Ge--)}function $(t,n){Ge++,De[Ge]=t.current,t.current=n}var M=E(null),te=E(null),fe=E(null),_e=E(null);function Be(t,n){switch($(fe,n),$(te,t),$(M,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ly(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ly(n),t=Py(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(M),$(M,t)}function Le(){L(M),L(te),L(fe)}function W(t){t.memoizedState!==null&&$(_e,t);var n=M.current,a=Py(n,t.type);n!==a&&($(te,t),$(M,a))}function we(t){te.current===t&&(L(M),L(te)),_e.current===t&&(L(_e),Uo._currentValue=xe)}var Ee,G;function ye(t){if(Ee===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ee=n&&n[1]||"",G=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+t+G}var le=!1;function Ce(t,n){if(!t||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(X){var F=X}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(X){F=X}t.call(ce.prototype)}}else{try{throw Error()}catch(X){F=X}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var D=x.split(`
`),q=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===q.length)for(l=D.length-1,h=q.length-1;1<=l&&0<=h&&D[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==q[h]){var ie=`
`+D[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{le=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ye(a):""}function Qe(t,n){switch(t.tag){case 26:case 27:case 5:return ye(t.type);case 16:return ye("Lazy");case 13:return t.child!==n&&n!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ce(t.type,!1);case 11:return Ce(t.type.render,!1);case 1:return Ce(t.type,!0);case 31:return ye("Activity");default:return""}}function Te(t){try{var n="",a=null;do n+=Qe(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var tt=Object.prototype.hasOwnProperty,rt=i.unstable_scheduleCallback,Vt=i.unstable_cancelCallback,Hi=i.unstable_shouldYield,Cn=i.unstable_requestPaint,zt=i.unstable_now,bs=i.unstable_getCurrentPriorityLevel,_s=i.unstable_ImmediatePriority,ws=i.unstable_UserBlockingPriority,Y=i.unstable_NormalPriority,pe=i.unstable_LowPriority,ke=i.unstable_IdlePriority,Je=i.log,Ue=i.unstable_setDisableYieldValue,Ne=null,Ve=null;function Xe(t){if(typeof Je=="function"&&Ue(t),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Ne,t)}catch{}}var nt=Math.clz32?Math.clz32:at,Es=Math.log,Hn=Math.LN2;function at(t){return t>>>=0,t===0?32:31-(Es(t)/Hn|0)|0}var Nt=256,Rt=262144,At=4194304;function dn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xt(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=dn(l):(x&=w,x!==0?h=dn(x):a||(a=w&~t,a!==0&&(h=dn(a))))):(w=l&~m,w!==0?h=dn(w):x!==0?h=dn(x):a||(a=l&~t,a!==0&&(h=dn(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function Fn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ah(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var t=At;return At<<=1,(At&62914560)===0&&(At=4194304),t}function Us(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Gr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lh(t,n,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=x&~a;0<a;){var ie=31-nt(a),ce=1<<ie;w[ie]=0,D[ie]=-1;var F=q[ie];if(F!==null)for(q[ie]=null,ie=0;ie<F.length;ie++){var X=F[ie];X!==null&&(X.lane&=-536870913)}a&=~ce}l!==0&&Yr(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~n))}function Yr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-nt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Hl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-nt(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function Fl(t,n){var a=n&-n;return a=(a&42)!==0?1:Kr(a),(a&(t.suspendedLanes|n))!==0?0:a}function Kr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rc(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:lv(t.type))}function Ts(t,n){var a=ae.p;try{return ae.p=t,n()}finally{ae.p=a}}var Ss=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Ss,hn="__reactProps$"+Ss,zs="__reactContainer$"+Ss,Ia="__reactEvents$"+Ss,oh="__reactListeners$"+Ss,Ic="__reactHandles$"+Ss,kc="__reactResources$"+Ss,Bs="__reactMarker$"+Ss;function ka(t){delete t[Wt],delete t[hn],delete t[Ia],delete t[oh],delete t[Ic]}function qs(t){var n=t[Wt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[zs]||a[Wt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Gy(t);t!==null;){if(a=t[Wt])return a;t=Gy(t)}return n}t=a,a=t.parentNode}return null}function is(t){if(t=t[Wt]||t[zs]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Gn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Hs(t){var n=t[kc];return n||(n=t[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Zt(t){t[Bs]=!0}var Gl=new Set,Yl={};function Fs(t,n){Gs(t,n),Gs(t+"Capture",n)}function Gs(t,n){for(Yl[t]=n,t=0;t<n.length;t++)Gl.add(n[t])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$l={},Ql={};function Dc(t){return tt.call(Ql,t)?!0:tt.call($l,t)?!1:Kl.test(t)?Ql[t]=!0:($l[t]=!0,!1)}function Da(t,n,a){if(Dc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Yn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Jt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function xt(t){if(!t._valueTracker){var n=Fi(t)?"checked":"value";t._valueTracker=Xl(t,n,""+t[n])}}function $r(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Fi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qr=/[\n"\\]/g;function Mn(t){return t.replace(Qr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ma(t,n,a,l,h,m,x,w){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+fn(n)):t.value!==""+fn(n)&&(t.value=""+fn(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Wl(t,x,fn(n)):a!=null?Wl(t,x,fn(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+fn(w):t.removeAttribute("name")}function Mc(t,n,a,l,h,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){xt(t);return}a=a!=null?""+fn(a):"",n=n!=null?""+fn(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),xt(t)}function Wl(t,n,a){n==="number"&&Ys(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Gi(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Oc(t,n,a){if(n!=null&&(n=""+fn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+fn(a):""}function Yi(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(ze(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=fn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),xt(t)}function On(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Vc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Jl(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Zl(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Zl(t,m,n[m])}function Oa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(t){return Ki.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ns(){}var eo=null;function rs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,Ks=null;function Xr(t){var n=is(t);if(n&&(t=n.stateNode)){var a=t[hn]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ma(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[hn]||null;if(!h)throw Error(r(90));Ma(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&$r(l)}break e;case"textarea":Oc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Gi(t,!!a.multiple,n,!1)}}}var La=!1;function Qi(t,n,a){if(La)return t(n,a);La=!0;try{var l=t(n);return l}finally{if(La=!1,($i!==null||Ks!==null)&&(Ru(),$i&&(n=$i,t=Ks,Ks=$i=null,Xr(n),t)))for(n=0;n<t.length;n++)Xr(t[n])}}function As(t,n){var a=t.stateNode;if(a===null)return null;var l=a[hn]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wr=!1;if(as)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{Wr=!1}var $s=null,to=null,Zr=null;function no(){if(Zr)return Zr;var t,n=to,a=n.length,l,h="value"in $s?$s.value:$s.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[m-l];l++);return Zr=h.slice(t,1<l?1-l:void 0)}function Jr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function fi(){return!0}function js(){return!1}function gn(t){function n(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fi:js,this.isPropagationStopped=js,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),n}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=gn(mi),Xi=S({},mi,{view:0,detail:0}),so=gn(Xi),Wi,Pa,Xs,Ua=S({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(Wi=t.screenX-Xs.screenX,Pa=t.screenY-Xs.screenY):Pa=Wi=0,Xs=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),io=gn(Ua),ea=S({},Ua,{dataTransfer:0}),Pc=gn(ea),Uc=S({},Xi,{relatedTarget:0}),ta=gn(Uc),ro=S({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=gn(ro),za=S({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bc=gn(za),qc=S({},mi,{data:0}),Ws=gn(qc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Gc[t])?!!n[t]:!1}function Zi(){return Yc}var Rn=S({},Xi,{key:function(t){if(t.key){var n=Hc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(t){return t.type==="keypress"?Jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kc=gn(Rn),$c=S({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pi=gn($c),d=S({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),p=gn(d),b=S({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=gn(b),z=S({},Ua,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=gn(z),ve=S({},mi,{newState:0,oldState:0}),We=gn(ve),Ht=[9,13,27,32],gt=as&&"CompositionEvent"in window,Lt=null;as&&"documentMode"in document&&(Lt=document.documentMode);var ls=as&&"TextEvent"in window&&!Lt,Zs=as&&(!gt||Lt&&8<Lt&&11>=Lt),Cs=" ",Rs=!1;function na(t,n){switch(t){case"keyup":return Ht.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qa=!1;function O1(t,n){switch(t){case"compositionend":return Ba(n);case"keypress":return n.which!==32?null:(Rs=!0,Cs);case"textInput":return t=n.data,t===Cs&&Rs?null:t;default:return null}}function V1(t,n){if(qa)return t==="compositionend"||!gt&&na(t,n)?(t=no(),Zr=to=$s=null,qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Zs&&n.locale!=="ko"?null:n.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $p(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!L1[t.type]:n==="textarea"}function Qp(t,n,a,l){$i?Ks?Ks.push(l):Ks=[l]:$i=l,n=Lu(n,"onChange"),0<n.length&&(a=new Qs("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var ao=null,lo=null;function P1(t){Iy(t,0)}function Qc(t){var n=Gn(t);if($r(n))return t}function Xp(t,n){if(t==="change")return n}var Wp=!1;if(as){var ch;if(as){var uh="oninput"in document;if(!uh){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),uh=typeof Zp.oninput=="function"}ch=uh}else ch=!1;Wp=ch&&(!document.documentMode||9<document.documentMode)}function Jp(){ao&&(ao.detachEvent("onpropertychange",eg),lo=ao=null)}function eg(t){if(t.propertyName==="value"&&Qc(lo)){var n=[];Qp(n,lo,t,rs(t)),Qi(P1,n)}}function U1(t,n,a){t==="focusin"?(Jp(),ao=n,lo=a,ao.attachEvent("onpropertychange",eg)):t==="focusout"&&Jp()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(lo)}function B1(t,n){if(t==="click")return Qc(n)}function q1(t,n){if(t==="input"||t==="change")return Qc(n)}function H1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Kn=typeof Object.is=="function"?Object.is:H1;function oo(t,n){if(Kn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!tt.call(n,h)||!Kn(t[h],n[h]))return!1}return!0}function tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ng(t,n){var a=tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=tg(a)}}function sg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?sg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ig(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ys(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ys(t.document)}return n}function dh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var F1=as&&"documentMode"in document&&11>=document.documentMode,Ha=null,hh=null,co=null,fh=!1;function rg(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||Ha==null||Ha!==Ys(l)||(l=Ha,"selectionStart"in l&&dh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),co&&oo(co,l)||(co=l,l=Lu(hh,"onSelect"),0<l.length&&(n=new Qs("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ha)))}function sa(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Fa={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},mh={},ag={};as&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function ia(t){if(mh[t])return mh[t];if(!Fa[t])return t;var n=Fa[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in ag)return mh[t]=n[a];return t}var lg=ia("animationend"),og=ia("animationiteration"),cg=ia("animationstart"),G1=ia("transitionrun"),Y1=ia("transitionstart"),K1=ia("transitioncancel"),ug=ia("transitionend"),dg=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function Is(t,n){dg.set(t,n),Fs(n,[t])}var Xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},os=[],Ga=0,gh=0;function Wc(){for(var t=Ga,n=gh=Ga=0;n<t;){var a=os[n];os[n++]=null;var l=os[n];os[n++]=null;var h=os[n];os[n++]=null;var m=os[n];if(os[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&hg(a,h,m)}}function Zc(t,n,a,l){os[Ga++]=t,os[Ga++]=n,os[Ga++]=a,os[Ga++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yh(t,n,a,l){return Zc(t,n,a,l),Jc(t)}function ra(t,n){return Zc(t,null,null,n),Jc(t)}function hg(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-nt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Jc(t){if(50<ko)throw ko=0,Af=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ya={};function $1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,n,a,l){return new $1(t,n,a,l)}function vh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gi(t,n){var a=t.alternate;return a===null?(a=$n(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function fg(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function eu(t,n,a,l,h,m){var x=0;if(l=t,typeof t=="function")vh(t)&&(x=1);else if(typeof t=="string")x=Jw(t,a,M.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=$n(31,a,n,h),t.elementType=j,t.lanes=m,t;case Z:return aa(a.children,h,m,n);case P:x=8,h|=24;break;case ne:return t=$n(12,a,n,h|2),t.elementType=ne,t.lanes=m,t;case be:return t=$n(13,a,n,h),t.elementType=be,t.lanes=m,t;case he:return t=$n(19,a,n,h),t.elementType=he,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ge:x=10;break e;case se:x=9;break e;case de:x=11;break e;case C:x=14;break e;case N:x=16,l=null;break e}x=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=$n(x,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function aa(t,n,a,l){return t=$n(7,t,l,n),t.lanes=a,t}function xh(t,n,a){return t=$n(6,t,null,n),t.lanes=a,t}function mg(t){var n=$n(18,null,null,0);return n.stateNode=t,n}function bh(t,n,a){return n=$n(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var pg=new WeakMap;function cs(t,n){if(typeof t=="object"&&t!==null){var a=pg.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Te(n)},pg.set(t,n),n)}return{value:t,source:n,stack:Te(n)}}var Ka=[],$a=0,tu=null,uo=0,us=[],ds=0,Ji=null,Js=1,ei="";function yi(t,n){Ka[$a++]=uo,Ka[$a++]=tu,tu=t,uo=n}function gg(t,n,a){us[ds++]=Js,us[ds++]=ei,us[ds++]=Ji,Ji=t;var l=Js;t=ei;var h=32-nt(l)-1;l&=~(1<<h),a+=1;var m=32-nt(n)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Js=1<<32-nt(n)+h|a<<h|l,ei=m+t}else Js=1<<m|a<<h|l,ei=t}function _h(t){t.return!==null&&(yi(t,1),gg(t,1,0))}function wh(t){for(;t===tu;)tu=Ka[--$a],Ka[$a]=null,uo=Ka[--$a],Ka[$a]=null;for(;t===Ji;)Ji=us[--ds],us[ds]=null,ei=us[--ds],us[ds]=null,Js=us[--ds],us[ds]=null}function yg(t,n){us[ds++]=Js,us[ds++]=ei,us[ds++]=Ji,Js=n.id,ei=n.overflow,Ji=t}var yn=null,It=null,ht=!1,er=null,hs=!1,Eh=Error(r(519));function tr(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ho(cs(n,t)),Eh}function vg(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Wt]=t,n[hn]=l,a){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(a=0;a<Mo.length;a++)it(Mo[a],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":it("invalid",n),Mc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":it("invalid",n);break;case"textarea":it("invalid",n),Yi(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Oy(n.textContent,a)?(l.popover!=null&&(it("beforetoggle",n),it("toggle",n)),l.onScroll!=null&&it("scroll",n),l.onScrollEnd!=null&&it("scrollend",n),l.onClick!=null&&(n.onclick=Ns),n=!0):n=!1,n||tr(t,!0)}function xg(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:yn=yn.return}}function Qa(t){if(t!==yn)return!1;if(!ht)return xg(t),ht=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&It&&tr(t),xg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));It=Fy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));It=Fy(t)}else n===27?(n=It,pr(t.type)?(t=Kf,Kf=null,It=t):It=n):It=yn?ms(t.stateNode.nextSibling):null;return!0}function la(){It=yn=null,ht=!1}function Th(){var t=er;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),er=null),t}function ho(t){er===null?er=[t]:er.push(t)}var Sh=E(null),oa=null,vi=null;function nr(t,n,a){$(Sh,n._currentValue),n._currentValue=a}function xi(t){t._currentValue=Sh.current,L(Sh)}function Nh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Ah(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Nh(m.return,a,t),l||(x=null);break e}m=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(r(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Nh(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Xa(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var w=h.type;Kn(h.pendingProps.value,x.value)||(t!==null?t.push(w):t=[w])}}else if(h===_e.current){if(x=h.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Uo):t=[Uo])}h=h.return}t!==null&&Ah(n,t,a,l),n.flags|=262144}function nu(t){for(t=t.firstContext;t!==null;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){oa=t,vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return bg(oa,t)}function su(t,n){return oa===null&&ca(t),bg(t,n)}function bg(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},vi===null){if(t===null)throw Error(r(308));vi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else vi=vi.next=n;return a}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},X1=i.unstable_scheduleCallback,W1=i.unstable_NormalPriority,en={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new Q1,data:new Map,refCount:0}}function fo(t){t.refCount--,t.refCount===0&&X1(W1,function(){t.controller.abort()})}var mo=null,Ch=0,Wa=0,Za=null;function Z1(t,n){if(mo===null){var a=mo=[];Ch=0,Wa=Df(),Za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ch++,n.then(_g,_g),n}function _g(){if(--Ch===0&&mo!==null){Za!==null&&(Za.status="fulfilled");var t=mo;mo=null,Wa=0,Za=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function J1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var wg=K.S;K.S=function(t,n){ry=zt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Z1(t,n),wg!==null&&wg(t,n)};var ua=E(null);function Rh(){var t=ua.current;return t!==null?t:jt.pooledCache}function iu(t,n){n===null?$(ua,ua.current):$(ua,n.pool)}function Eg(){var t=Rh();return t===null?null:{parent:en._currentValue,pool:t}}var Ja=Error(r(460)),Ih=Error(r(474)),ru=Error(r(542)),au={then:function(){}};function Tg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sg(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Ns,Ns),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ag(t),t;default:if(typeof n.status=="string")n.then(Ns,Ns);else{if(t=jt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ag(t),t}throw ha=n,Ja}}function da(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ha=a,Ja):a}}var ha=null;function Ng(){if(ha===null)throw Error(r(459));var t=ha;return ha=null,t}function Ag(t){if(t===Ja||t===ru)throw Error(r(483))}var el=null,po=0;function lu(t){var n=po;return po+=1,el===null&&(el=[]),Sg(el,t,n)}function go(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ou(t,n){throw n.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function jg(t){function n(U,O){if(t){var B=U.deletions;B===null?(U.deletions=[O],U.flags|=16):B.push(O)}}function a(U,O){if(!t)return null;for(;O!==null;)n(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=gi(U,O),U.index=0,U.sibling=null,U}function m(U,O,B){return U.index=B,t?(B=U.alternate,B!==null?(B=B.index,B<O?(U.flags|=67108866,O):B):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,O,B,re){return O===null||O.tag!==6?(O=xh(B,U.mode,re),O.return=U,O):(O=h(O,B),O.return=U,O)}function D(U,O,B,re){var Me=B.type;return Me===Z?ie(U,O,B.props.children,re,B.key):O!==null&&(O.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&da(Me)===O.type)?(O=h(O,B.props),go(O,B),O.return=U,O):(O=eu(B.type,B.key,B.props,null,U.mode,re),go(O,B),O.return=U,O)}function q(U,O,B,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=bh(B,U.mode,re),O.return=U,O):(O=h(O,B.children||[]),O.return=U,O)}function ie(U,O,B,re,Me){return O===null||O.tag!==7?(O=aa(B,U.mode,re,Me),O.return=U,O):(O=h(O,B),O.return=U,O)}function ce(U,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=xh(""+O,U.mode,B),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return B=eu(O.type,O.key,O.props,null,U.mode,B),go(B,O),B.return=U,B;case ee:return O=bh(O,U.mode,B),O.return=U,O;case N:return O=da(O),ce(U,O,B)}if(ze(O)||V(O))return O=aa(O,U.mode,B,null),O.return=U,O;if(typeof O.then=="function")return ce(U,lu(O),B);if(O.$$typeof===ge)return ce(U,su(U,O),B);ou(U,O)}return null}function F(U,O,B,re){var Me=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Me!==null?null:w(U,O,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case H:return B.key===Me?D(U,O,B,re):null;case ee:return B.key===Me?q(U,O,B,re):null;case N:return B=da(B),F(U,O,B,re)}if(ze(B)||V(B))return Me!==null?null:ie(U,O,B,re,null);if(typeof B.then=="function")return F(U,O,lu(B),re);if(B.$$typeof===ge)return F(U,O,su(U,B),re);ou(U,B)}return null}function X(U,O,B,re,Me){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(B)||null,w(O,U,""+re,Me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case H:return U=U.get(re.key===null?B:re.key)||null,D(O,U,re,Me);case ee:return U=U.get(re.key===null?B:re.key)||null,q(O,U,re,Me);case N:return re=da(re),X(U,O,B,re,Me)}if(ze(re)||V(re))return U=U.get(B)||null,ie(O,U,re,Me,null);if(typeof re.then=="function")return X(U,O,B,lu(re),Me);if(re.$$typeof===ge)return X(U,O,B,su(O,re),Me);ou(O,re)}return null}function Re(U,O,B,re){for(var Me=null,mt=null,Ie=O,et=O=0,ot=null;Ie!==null&&et<B.length;et++){Ie.index>et?(ot=Ie,Ie=null):ot=Ie.sibling;var pt=F(U,Ie,B[et],re);if(pt===null){Ie===null&&(Ie=ot);break}t&&Ie&&pt.alternate===null&&n(U,Ie),O=m(pt,O,et),mt===null?Me=pt:mt.sibling=pt,mt=pt,Ie=ot}if(et===B.length)return a(U,Ie),ht&&yi(U,et),Me;if(Ie===null){for(;et<B.length;et++)Ie=ce(U,B[et],re),Ie!==null&&(O=m(Ie,O,et),mt===null?Me=Ie:mt.sibling=Ie,mt=Ie);return ht&&yi(U,et),Me}for(Ie=l(Ie);et<B.length;et++)ot=X(Ie,U,et,B[et],re),ot!==null&&(t&&ot.alternate!==null&&Ie.delete(ot.key===null?et:ot.key),O=m(ot,O,et),mt===null?Me=ot:mt.sibling=ot,mt=ot);return t&&Ie.forEach(function(br){return n(U,br)}),ht&&yi(U,et),Me}function Pe(U,O,B,re){if(B==null)throw Error(r(151));for(var Me=null,mt=null,Ie=O,et=O=0,ot=null,pt=B.next();Ie!==null&&!pt.done;et++,pt=B.next()){Ie.index>et?(ot=Ie,Ie=null):ot=Ie.sibling;var br=F(U,Ie,pt.value,re);if(br===null){Ie===null&&(Ie=ot);break}t&&Ie&&br.alternate===null&&n(U,Ie),O=m(br,O,et),mt===null?Me=br:mt.sibling=br,mt=br,Ie=ot}if(pt.done)return a(U,Ie),ht&&yi(U,et),Me;if(Ie===null){for(;!pt.done;et++,pt=B.next())pt=ce(U,pt.value,re),pt!==null&&(O=m(pt,O,et),mt===null?Me=pt:mt.sibling=pt,mt=pt);return ht&&yi(U,et),Me}for(Ie=l(Ie);!pt.done;et++,pt=B.next())pt=X(Ie,U,et,pt.value,re),pt!==null&&(t&&pt.alternate!==null&&Ie.delete(pt.key===null?et:pt.key),O=m(pt,O,et),mt===null?Me=pt:mt.sibling=pt,mt=pt);return t&&Ie.forEach(function(u2){return n(U,u2)}),ht&&yi(U,et),Me}function St(U,O,B,re){if(typeof B=="object"&&B!==null&&B.type===Z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case H:e:{for(var Me=B.key;O!==null;){if(O.key===Me){if(Me=B.type,Me===Z){if(O.tag===7){a(U,O.sibling),re=h(O,B.props.children),re.return=U,U=re;break e}}else if(O.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&da(Me)===O.type){a(U,O.sibling),re=h(O,B.props),go(re,B),re.return=U,U=re;break e}a(U,O);break}else n(U,O);O=O.sibling}B.type===Z?(re=aa(B.props.children,U.mode,re,B.key),re.return=U,U=re):(re=eu(B.type,B.key,B.props,null,U.mode,re),go(re,B),re.return=U,U=re)}return x(U);case ee:e:{for(Me=B.key;O!==null;){if(O.key===Me)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(U,O.sibling),re=h(O,B.children||[]),re.return=U,U=re;break e}else{a(U,O);break}else n(U,O);O=O.sibling}re=bh(B,U.mode,re),re.return=U,U=re}return x(U);case N:return B=da(B),St(U,O,B,re)}if(ze(B))return Re(U,O,B,re);if(V(B)){if(Me=V(B),typeof Me!="function")throw Error(r(150));return B=Me.call(B),Pe(U,O,B,re)}if(typeof B.then=="function")return St(U,O,lu(B),re);if(B.$$typeof===ge)return St(U,O,su(U,B),re);ou(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(U,O.sibling),re=h(O,B),re.return=U,U=re):(a(U,O),re=xh(B,U.mode,re),re.return=U,U=re),x(U)):a(U,O)}return function(U,O,B,re){try{po=0;var Me=St(U,O,B,re);return el=null,Me}catch(Ie){if(Ie===Ja||Ie===ru)throw Ie;var mt=$n(29,Ie,null,U.mode);return mt.lanes=re,mt.return=U,mt}finally{}}}var fa=jg(!0),Cg=jg(!1),sr=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function rr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(yt&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Jc(t),hg(t,null,a),n}return Zc(t,l,n,a),Jc(t)}function yo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Hl(t,a)}}function Mh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Oh=!1;function vo(){if(Oh){var t=Za;if(t!==null)throw t}}function xo(t,n,a,l){Oh=!1;var h=t.updateQueue;sr=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,q=D.next;D.next=null,x===null?m=q:x.next=q,x=D;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==x&&(w===null?ie.firstBaseUpdate=q:w.next=q,ie.lastBaseUpdate=D))}if(m!==null){var ce=h.baseState;x=0,ie=q=D=null,w=m;do{var F=w.lane&-536870913,X=F!==w.lane;if(X?(lt&F)===F:(l&F)===F){F!==0&&F===Wa&&(Oh=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=t,Pe=w;F=n;var St=a;switch(Pe.tag){case 1:if(Re=Pe.payload,typeof Re=="function"){ce=Re.call(St,ce,F);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Pe.payload,F=typeof Re=="function"?Re.call(St,ce,F):Re,F==null)break e;ce=S({},ce,F);break e;case 2:sr=!0}}F=w.callback,F!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[F]:X.push(F))}else X={lane:F,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(q=ie=X,D=ce):ie=ie.next=X,x|=F;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;X=w,w=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);ie===null&&(D=ce),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=ie,m===null&&(h.shared.lanes=0),ur|=x,t.lanes=x,t.memoizedState=ce}}function Rg(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Ig(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Rg(a[t],n)}var tl=E(null),cu=E(0);function kg(t,n){t=ji,$(cu,t),$(tl,n),ji=t|n.baseLanes}function Vh(){$(cu,ji),$(tl,tl.current)}function Lh(){ji=cu.current,L(tl),L(cu)}var Qn=E(null),fs=null;function ar(t){var n=t.alternate;$(Ft,Ft.current&1),$(Qn,t),fs===null&&(n===null||tl.current!==null||n.memoizedState!==null)&&(fs=t)}function Ph(t){$(Ft,Ft.current),$(Qn,t),fs===null&&(fs=t)}function Dg(t){t.tag===22?($(Ft,Ft.current),$(Qn,t),fs===null&&(fs=t)):lr()}function lr(){$(Ft,Ft.current),$(Qn,Qn.current)}function Xn(t){L(Qn),fs===t&&(fs=null),L(Ft)}var Ft=E(0);function uu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Yf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var bi=0,Ze=null,Et=null,tn=null,du=!1,nl=!1,ma=!1,hu=0,bo=0,sl=null,ew=0;function Bt(){throw Error(r(321))}function Uh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Kn(t[a],n[a]))return!1;return!0}function zh(t,n,a,l,h,m){return bi=m,Ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?g0:tf,ma=!1,m=a(l,h),ma=!1,nl&&(m=Og(n,a,l,h)),Mg(t),m}function Mg(t){K.H=Eo;var n=Et!==null&&Et.next!==null;if(bi=0,tn=Et=Ze=null,du=!1,bo=0,sl=null,n)throw Error(r(300));t===null||nn||(t=t.dependencies,t!==null&&nu(t)&&(nn=!0))}function Og(t,n,a,l){Ze=t;var h=0;do{if(nl&&(sl=null),bo=0,nl=!1,25<=h)throw Error(r(301));if(h+=1,tn=Et=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=y0,m=n(a,l)}while(nl);return m}function tw(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?_o(n):n,t=t.useState()[0],(Et!==null?Et.memoizedState:null)!==t&&(Ze.flags|=1024),n}function Bh(){var t=hu!==0;return hu=0,t}function qh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Hh(t){if(du){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}du=!1}bi=0,tn=Et=Ze=null,nl=!1,bo=hu=0,sl=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ze.memoizedState=tn=t:tn=tn.next=t,tn}function Gt(){if(Et===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var n=tn===null?Ze.memoizedState:tn.next;if(n!==null)tn=n,Et=t;else{if(t===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},tn===null?Ze.memoizedState=tn=t:tn=tn.next=t}return tn}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _o(t){var n=bo;return bo+=1,sl===null&&(sl=[]),t=Sg(sl,t,n),n=Ze,(tn===null?n.memoizedState:tn.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?g0:tf),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _o(t);if(t.$$typeof===ge)return vn(t)}throw Error(r(438,String(t)))}function Fh(t){var n=null,a=Ze.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=fu(),Ze.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function _i(t,n){return typeof n=="function"?n(t):n}function pu(t){var n=Gt();return Gh(n,Et,t)}function Gh(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=x=null,D=null,q=n,ie=!1;do{var ce=q.lane&-536870913;if(ce!==q.lane?(lt&ce)===ce:(bi&ce)===ce){var F=q.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ce===Wa&&(ie=!0);else if((bi&F)===F){q=q.next,F===Wa&&(ie=!0);continue}else ce={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=ce,x=m):D=D.next=ce,Ze.lanes|=F,ur|=F;ce=q.action,ma&&a(m,ce),m=q.hasEagerState?q.eagerState:a(m,ce)}else F={lane:ce,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=F,x=m):D=D.next=F,Ze.lanes|=ce,ur|=ce;q=q.next}while(q!==null&&q!==n);if(D===null?x=m:D.next=w,!Kn(m,t.memoizedState)&&(nn=!0,ie&&(a=Za,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yh(t){var n=Gt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);Kn(m,n.memoizedState)||(nn=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Vg(t,n,a){var l=Ze,h=Gt(),m=ht;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=n();var x=!Kn((Et||h).memoizedState,a);if(x&&(h.memoizedState=a,nn=!0),h=h.queue,Qh(Ug.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||tn!==null&&tn.memoizedState.tag&1){if(l.flags|=2048,il(9,{destroy:void 0},Pg.bind(null,l,h,a,n),null),jt===null)throw Error(r(349));m||(bi&127)!==0||Lg(l,n,a)}return a}function Lg(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ze.updateQueue,n===null?(n=fu(),Ze.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Pg(t,n,a,l){n.value=a,n.getSnapshot=l,zg(n)&&Bg(t)}function Ug(t,n,a){return a(function(){zg(n)&&Bg(t)})}function zg(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Kn(t,a)}catch{return!0}}function Bg(t){var n=ra(t,2);n!==null&&zn(n,t,2)}function Kh(t){var n=In();if(typeof t=="function"){var a=t;if(t=a(),ma){Xe(!0);try{a()}finally{Xe(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:t},n}function qg(t,n,a,l){return t.baseState=a,Gh(t,Et,typeof l=="function"?l:_i)}function nw(t,n,a,l,h){if(vu(t))throw Error(r(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Hg(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Hg(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=K.T,x={};K.T=x;try{var w=a(h,l),D=K.S;D!==null&&D(x,w),Fg(t,n,w)}catch(q){$h(t,n,q)}finally{m!==null&&x.types!==null&&(m.types=x.types),K.T=m}}else try{m=a(h,l),Fg(t,n,m)}catch(q){$h(t,n,q)}}function Fg(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Gg(t,n,l)},function(l){return $h(t,n,l)}):Gg(t,n,a)}function Gg(t,n,a){n.status="fulfilled",n.value=a,Yg(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Hg(t,a)))}function $h(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Yg(n),n=n.next;while(n!==l)}t.action=null}function Yg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Kg(t,n){return n}function $g(t,n){if(ht){var a=jt.formState;if(a!==null){e:{var l=Ze;if(ht){if(It){t:{for(var h=It,m=hs;h.nodeType!==8;){if(!m){h=null;break t}if(h=ms(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){It=ms(h.nextSibling),l=h.data==="F!";break e}}tr(l)}l=!1}l&&(n=a[0])}}return a=In(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:n},a.queue=l,a=f0.bind(null,Ze,l),l.dispatch=a,l=Kh(!1),m=ef.bind(null,Ze,!1,l.queue),l=In(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=nw.bind(null,Ze,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Qg(t){var n=Gt();return Xg(n,Et,t)}function Xg(t,n,a){if(n=Gh(t,n,Kg)[0],t=pu(_i)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=_o(n)}catch(x){throw x===Ja?ru:x}else l=n;n=Gt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Ze.flags|=2048,il(9,{destroy:void 0},sw.bind(null,h,a),null)),[l,m,t]}function sw(t,n){t.action=n}function Wg(t){var n=Gt(),a=Et;if(a!==null)return Xg(n,a,t);Gt(),n=n.memoizedState,a=Gt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function il(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Ze.updateQueue,n===null&&(n=fu(),Ze.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Zg(){return Gt().memoizedState}function gu(t,n,a,l){var h=In();Ze.flags|=t,h.memoizedState=il(1|n,{destroy:void 0},a,l===void 0?null:l)}function yu(t,n,a,l){var h=Gt();l=l===void 0?null:l;var m=h.memoizedState.inst;Et!==null&&l!==null&&Uh(l,Et.memoizedState.deps)?h.memoizedState=il(n,m,a,l):(Ze.flags|=t,h.memoizedState=il(1|n,m,a,l))}function Jg(t,n){gu(8390656,8,t,n)}function Qh(t,n){yu(2048,8,t,n)}function iw(t){Ze.flags|=4;var n=Ze.updateQueue;if(n===null)n=fu(),Ze.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function e0(t){var n=Gt().memoizedState;return iw({ref:n,nextImpl:t}),function(){if((yt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function t0(t,n){return yu(4,2,t,n)}function n0(t,n){return yu(4,4,t,n)}function s0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function i0(t,n,a){a=a!=null?a.concat([t]):null,yu(4,4,s0.bind(null,n,t),a)}function Xh(){}function r0(t,n){var a=Gt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Uh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function a0(t,n){var a=Gt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Uh(n,l[1]))return l[0];if(l=t(),ma){Xe(!0);try{t()}finally{Xe(!1)}}return a.memoizedState=[l,n],l}function Wh(t,n,a){return a===void 0||(bi&1073741824)!==0&&(lt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=ly(),Ze.lanes|=t,ur|=t,a)}function l0(t,n,a,l){return Kn(a,n)?a:tl.current!==null?(t=Wh(t,a,l),Kn(t,n)||(nn=!0),t):(bi&42)===0||(bi&1073741824)!==0&&(lt&261930)===0?(nn=!0,t.memoizedState=a):(t=ly(),Ze.lanes|=t,ur|=t,n)}function o0(t,n,a,l,h){var m=ae.p;ae.p=m!==0&&8>m?m:8;var x=K.T,w={};K.T=w,ef(t,!1,n,a);try{var D=h(),q=K.S;if(q!==null&&q(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ie=J1(D,l);wo(t,n,ie,Jn(t))}else wo(t,n,l,Jn(t))}catch(ce){wo(t,n,{then:function(){},status:"rejected",reason:ce},Jn())}finally{ae.p=m,x!==null&&w.types!==null&&(x.types=w.types),K.T=x}}function rw(){}function Zh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var h=c0(t).queue;o0(t,h,n,xe,a===null?rw:function(){return u0(t),a(l)})}function c0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:xe},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function u0(t){var n=c0(t);n.next===null&&(n=t.alternate.memoizedState),wo(t,n.next.queue,{},Jn())}function Jh(){return vn(Uo)}function d0(){return Gt().memoizedState}function h0(){return Gt().memoizedState}function aw(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Jn();t=ir(a);var l=rr(n,t,a);l!==null&&(zn(l,n,a),yo(l,n,a)),n={cache:jh()},t.payload=n;return}n=n.return}}function lw(t,n,a){var l=Jn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vu(t)?m0(n,a):(a=yh(t,n,a,l),a!==null&&(zn(a,t,l),p0(a,n,l)))}function f0(t,n,a){var l=Jn();wo(t,n,a,l)}function wo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(t))m0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,w=m(x,a);if(h.hasEagerState=!0,h.eagerState=w,Kn(w,x))return Zc(t,n,h,0),jt===null&&Wc(),!1}catch{}finally{}if(a=yh(t,n,h,l),a!==null)return zn(a,t,l),p0(a,n,l),!0}return!1}function ef(t,n,a,l){if(l={lane:2,revertLane:Df(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vu(t)){if(n)throw Error(r(479))}else n=yh(t,a,l,2),n!==null&&zn(n,t,2)}function vu(t){var n=t.alternate;return t===Ze||n!==null&&n===Ze}function m0(t,n){nl=du=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function p0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Hl(t,a)}}var Eo={readContext:vn,use:mu,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};Eo.useEffectEvent=Bt;var g0={readContext:vn,use:mu,useCallback:function(t,n){return In().memoizedState=[t,n===void 0?null:n],t},useContext:vn,useEffect:Jg,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,gu(4194308,4,s0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return gu(4194308,4,t,n)},useInsertionEffect:function(t,n){gu(4,2,t,n)},useMemo:function(t,n){var a=In();n=n===void 0?null:n;var l=t();if(ma){Xe(!0);try{t()}finally{Xe(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=In();if(a!==void 0){var h=a(n);if(ma){Xe(!0);try{a(n)}finally{Xe(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=lw.bind(null,Ze,t),[l.memoizedState,t]},useRef:function(t){var n=In();return t={current:t},n.memoizedState=t},useState:function(t){t=Kh(t);var n=t.queue,a=f0.bind(null,Ze,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Xh,useDeferredValue:function(t,n){var a=In();return Wh(a,t,n)},useTransition:function(){var t=Kh(!1);return t=o0.bind(null,Ze,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Ze,h=In();if(ht){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),jt===null)throw Error(r(349));(lt&127)!==0||Lg(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Jg(Ug.bind(null,l,m,t),[t]),l.flags|=2048,il(9,{destroy:void 0},Pg.bind(null,l,m,a,n),null),a},useId:function(){var t=In(),n=jt.identifierPrefix;if(ht){var a=ei,l=Js;a=(l&~(1<<32-nt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=hu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=ew++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Jh,useFormState:$g,useActionState:$g,useOptimistic:function(t){var n=In();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ef.bind(null,Ze,!0,a),a.dispatch=n,[t,n]},useMemoCache:Fh,useCacheRefresh:function(){return In().memoizedState=aw.bind(null,Ze)},useEffectEvent:function(t){var n=In(),a={impl:t};return n.memoizedState=a,function(){if((yt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:vn,use:mu,useCallback:r0,useContext:vn,useEffect:Qh,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:a0,useReducer:pu,useRef:Zg,useState:function(){return pu(_i)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=Gt();return l0(a,Et.memoizedState,t,n)},useTransition:function(){var t=pu(_i)[0],n=Gt().memoizedState;return[typeof t=="boolean"?t:_o(t),n]},useSyncExternalStore:Vg,useId:d0,useHostTransitionStatus:Jh,useFormState:Qg,useActionState:Qg,useOptimistic:function(t,n){var a=Gt();return qg(a,Et,t,n)},useMemoCache:Fh,useCacheRefresh:h0};tf.useEffectEvent=e0;var y0={readContext:vn,use:mu,useCallback:r0,useContext:vn,useEffect:Qh,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:a0,useReducer:Yh,useRef:Zg,useState:function(){return Yh(_i)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=Gt();return Et===null?Wh(a,t,n):l0(a,Et.memoizedState,t,n)},useTransition:function(){var t=Yh(_i)[0],n=Gt().memoizedState;return[typeof t=="boolean"?t:_o(t),n]},useSyncExternalStore:Vg,useId:d0,useHostTransitionStatus:Jh,useFormState:Wg,useActionState:Wg,useOptimistic:function(t,n){var a=Gt();return Et!==null?qg(a,Et,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fh,useCacheRefresh:h0};y0.useEffectEvent=e0;function nf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:S({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Jn(),h=ir(l);h.payload=n,a!=null&&(h.callback=a),n=rr(t,h,l),n!==null&&(zn(n,t,l),yo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Jn(),h=ir(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=rr(t,h,l),n!==null&&(zn(n,t,l),yo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Jn(),l=ir(a);l.tag=2,n!=null&&(l.callback=n),n=rr(t,l,a),n!==null&&(zn(n,t,a),yo(n,t,a))}};function v0(t,n,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!oo(a,l)||!oo(h,m):!0}function x0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&sf.enqueueReplaceState(n,n.state,null)}function pa(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function b0(t){Xc(t)}function _0(t){console.error(t)}function w0(t){Xc(t)}function xu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function E0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,n,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){xu(t,n)},a}function T0(t){return t=ir(t),t.tag=3,t}function S0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){E0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){E0(n,a,l),typeof h!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function ow(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Xa(n,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 31:case 13:return fs===null?Iu():a.alternate===null&&qt===0&&(qt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===au?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Rf(t,l,h)),!1;case 22:return a.flags|=65536,l===au?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Rf(t,l,h)),!1}throw Error(r(435,a.tag))}return Rf(t,l,h),Iu(),!1}if(ht)return n=Qn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Eh&&(t=Error(r(422),{cause:l}),ho(cs(t,a)))):(l!==Eh&&(n=Error(r(423),{cause:l}),ho(cs(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=cs(l,a),h=rf(t.stateNode,l,h),Mh(t,h),qt!==4&&(qt=2)),!1;var m=Error(r(520),{cause:l});if(m=cs(m,a),Io===null?Io=[m]:Io.push(m),qt!==4&&(qt=2),n===null)return!0;l=cs(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,l,t),Mh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(dr===null||!dr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=T0(h),S0(h,t,a,l),Mh(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(r(461)),nn=!1;function xn(t,n,a,l){n.child=t===null?Cg(n,null,a,l):fa(n,t.child,a,l)}function N0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return ca(n),l=zh(t,n,a,x,m,h),w=Bh(),t!==null&&!nn?(qh(t,n,h),wi(t,n,h)):(ht&&w&&_h(n),n.flags|=1,xn(t,n,l,h),n.child)}function A0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!vh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,j0(t,n,m,l,h)):(t=eu(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!mf(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:oo,a(x,l)&&t.ref===n.ref)return wi(t,n,h)}return n.flags|=1,t=gi(m,l),t.ref=n.ref,t.return=n,n.child=t}function j0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(oo(m,l)&&t.ref===n.ref)if(nn=!1,n.pendingProps=l=m,mf(t,h))(t.flags&131072)!==0&&(nn=!0);else return n.lanes=t.lanes,wi(t,n,h)}return lf(t,n,a,l,h)}function C0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return R0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&iu(n,m!==null?m.cachePool:null),m!==null?kg(n,m):Vh(),Dg(n);else return l=n.lanes=536870912,R0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(iu(n,m.cachePool),kg(n,m),lr(),n.memoizedState=null):(t!==null&&iu(n,null),Vh(),lr());return xn(t,n,h,a),n.child}function To(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function R0(t,n,a,l,h){var m=Rh();return m=m===null?null:{parent:en._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&iu(n,null),Vh(),Dg(n),t!==null&&Xa(t,n,l,!0),n.childLanes=h,null}function bu(t,n){return n=wu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function I0(t,n,a){return fa(n,t.child,null,a),t=bu(n,n.pendingProps),t.flags|=2,Xn(n),n.memoizedState=null,t}function cw(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(ht){if(l.mode==="hidden")return t=bu(n,l),n.lanes=536870912,To(null,t);if(Ph(n),(t=It)?(t=Hy(t,hs),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Js,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},a=mg(t),a.return=n,n.child=a,yn=n,It=null)):t=null,t===null)throw tr(n);return n.lanes=536870912,null}return bu(n,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Ph(n),h)if(n.flags&256)n.flags&=-257,n=I0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(nn||Xa(t,n,a,!1),h=(a&t.childLanes)!==0,nn||h){if(l=jt,l!==null&&(x=Fl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,ra(t,x),zn(l,t,x),af;Iu(),n=I0(t,n,a)}else t=m.treeContext,It=ms(x.nextSibling),yn=n,ht=!0,er=null,hs=!1,t!==null&&yg(n,t),n=bu(n,l),n.flags|=4096;return n}return t=gi(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function _u(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function lf(t,n,a,l,h){return ca(n),a=zh(t,n,a,l,void 0,h),l=Bh(),t!==null&&!nn?(qh(t,n,h),wi(t,n,h)):(ht&&l&&_h(n),n.flags|=1,xn(t,n,a,h),n.child)}function k0(t,n,a,l,h,m){return ca(n),n.updateQueue=null,a=Og(n,l,a,h),Mg(t),l=Bh(),t!==null&&!nn?(qh(t,n,m),wi(t,n,m)):(ht&&l&&_h(n),n.flags|=1,xn(t,n,a,m),n.child)}function D0(t,n,a,l,h){if(ca(n),n.stateNode===null){var m=Ya,x=a.contextType;typeof x=="object"&&x!==null&&(m=vn(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},kh(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?vn(x):Ya,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(nf(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&sf.enqueueReplaceState(m,m.state,null),xo(n,l,m,h),vo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=pa(a,w);m.props=D;var q=m.context,ie=a.contextType;x=Ya,typeof ie=="object"&&ie!==null&&(x=vn(ie));var ce=a.getDerivedStateFromProps;ie=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||q!==x)&&x0(n,m,l,x),sr=!1;var F=n.memoizedState;m.state=F,xo(n,l,m,h),vo(),q=n.memoizedState,w||F!==q||sr?(typeof ce=="function"&&(nf(n,a,ce,l),q=n.memoizedState),(D=sr||v0(n,a,D,l,F,q,x))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=q),m.props=l,m.state=q,m.context=x,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Dh(t,n),x=n.memoizedProps,ie=pa(a,x),m.props=ie,ce=n.pendingProps,F=m.context,q=a.contextType,D=Ya,typeof q=="object"&&q!==null&&(D=vn(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ce||F!==D)&&x0(n,m,l,D),sr=!1,F=n.memoizedState,m.state=F,xo(n,l,m,h),vo();var X=n.memoizedState;x!==ce||F!==X||sr||t!==null&&t.dependencies!==null&&nu(t.dependencies)?(typeof w=="function"&&(nf(n,a,w,l),X=n.memoizedState),(ie=sr||v0(n,a,ie,l,F,X,D)||t!==null&&t.dependencies!==null&&nu(t.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,X,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,X,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=X),m.props=l,m.state=X,m.context=D,l=ie):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,_u(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=fa(n,t.child,null,h),n.child=fa(n,null,a,h)):xn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=wi(t,n,h),t}function M0(t,n,a,l){return la(),n.flags|=256,xn(t,n,a,l),n.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:Eg()}}function uf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Zn),t}function O0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Ft.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(ht){if(h?ar(n):lr(),(t=It)?(t=Hy(t,hs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Js,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},a=mg(t),a.return=n,n.child=a,yn=n,It=null)):t=null,t===null)throw tr(n);return Yf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(lr(),h=n.mode,w=wu({mode:"hidden",children:w},h),l=aa(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,x,a),n.memoizedState=of,To(null,l)):(ar(n),df(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(ar(n),n.flags&=-257,n=hf(t,n,a)):n.memoizedState!==null?(lr(),n.child=t.child,n.flags|=128,n=null):(lr(),w=l.fallback,h=n.mode,l=wu({mode:"visible",children:l.children},h),w=aa(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,fa(n,t.child,null,a),l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,x,a),n.memoizedState=of,n=To(null,l));else if(ar(n),Yf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var q=x.dgst;x=q,l=Error(r(419)),l.stack="",l.digest=x,ho({value:l,source:null,stack:null}),n=hf(t,n,a)}else if(nn||Xa(t,n,a,!1),x=(a&t.childLanes)!==0,nn||x){if(x=jt,x!==null&&(l=Fl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ra(t,l),zn(x,t,l),af;Gf(w)||Iu(),n=hf(t,n,a)}else Gf(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,It=ms(w.nextSibling),yn=n,ht=!0,er=null,hs=!1,t!==null&&yg(n,t),n=df(n,l.children),n.flags|=4096);return n}return h?(lr(),w=l.fallback,h=n.mode,D=t.child,q=D.sibling,l=gi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?w=gi(q,w):(w=aa(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,To(null,l),l=n.child,w=t.child.memoizedState,w===null?w=cf(a):(h=w.cachePool,h!==null?(D=en._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Eg(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=uf(t,x,a),n.memoizedState=of,To(t.child,l)):(ar(n),a=t.child,t=a.sibling,a=gi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function df(t,n){return n=wu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function wu(t,n){return t=$n(22,t,null,n),t.lanes=0,t}function hf(t,n,a){return fa(n,t.child,null,a),t=df(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function V0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Nh(t.return,n,a)}function ff(t,n,a,l,h,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=m)}function L0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var x=Ft.current,w=(x&2)!==0;if(w?(x=x&1|2,n.flags|=128):x&=1,$(Ft,x),xn(t,n,l,a),l=ht?uo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V0(t,a,n);else if(t.tag===19)V0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),ff(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&uu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(n,!0,a,null,m,l);break;case"together":ff(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function wi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ur|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Xa(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=gi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=gi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function mf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&nu(t)))}function uw(t,n,a){switch(n.tag){case 3:Be(n,n.stateNode.containerInfo),nr(n,en,t.memoizedState.cache),la();break;case 27:case 5:W(n);break;case 4:Be(n,n.stateNode.containerInfo);break;case 10:nr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ph(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ar(n),n.flags|=128,null):(a&n.child.childLanes)!==0?O0(t,n,a):(ar(n),t=wi(t,n,a),t!==null?t.sibling:null);ar(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Xa(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return L0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$(Ft,Ft.current),l)break;return null;case 22:return n.lanes=0,C0(t,n,a,n.pendingProps);case 24:nr(n,en,t.memoizedState.cache)}return wi(t,n,a)}function P0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)nn=!0;else{if(!mf(t,a)&&(n.flags&128)===0)return nn=!1,uw(t,n,a);nn=(t.flags&131072)!==0}else nn=!1,ht&&(n.flags&1048576)!==0&&gg(n,uo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=da(n.elementType),n.type=t,typeof t=="function")vh(t)?(l=pa(t,l),n.tag=1,n=D0(null,n,t,l,a)):(n.tag=0,n=lf(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===de){n.tag=11,n=N0(null,n,t,l,a);break e}else if(h===C){n.tag=14,n=A0(null,n,t,l,a);break e}}throw n=me(t)||t,Error(r(306,n,""))}}return n;case 0:return lf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=pa(l,n.pendingProps),D0(t,n,l,h,a);case 3:e:{if(Be(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,Dh(t,n),xo(n,l,null,a);var x=n.memoizedState;if(l=x.cache,nr(n,en,l),l!==m.cache&&Ah(n,[en],a,!0),vo(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=M0(t,n,l,a);break e}else if(l!==h){h=cs(Error(r(424)),n),ho(h),n=M0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(It=ms(t.firstChild),yn=n,ht=!0,er=null,hs=!0,a=Cg(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(la(),l===h){n=wi(t,n,a);break e}xn(t,n,l,a)}n=n.child}return n;case 26:return _u(t,n),t===null?(a=Qy(n.type,null,n.pendingProps,null))?n.memoizedState=a:ht||(a=n.type,t=n.pendingProps,l=Pu(fe.current).createElement(a),l[Wt]=n,l[hn]=t,bn(l,a,t),Zt(l),n.stateNode=l):n.memoizedState=Qy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return W(n),t===null&&ht&&(l=n.stateNode=Yy(n.type,n.pendingProps,fe.current),yn=n,hs=!0,h=It,pr(n.type)?(Kf=h,It=ms(l.firstChild)):It=h),xn(t,n,n.pendingProps.children,a),_u(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ht&&((h=l=It)&&(l=zw(l,n.type,n.pendingProps,hs),l!==null?(n.stateNode=l,yn=n,It=ms(l.firstChild),hs=!1,h=!0):h=!1),h||tr(n)),W(n),h=n.type,m=n.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,qf(h,m)?l=null:x!==null&&qf(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=zh(t,n,tw,null,null,a),Uo._currentValue=h),_u(t,n),xn(t,n,l,a),n.child;case 6:return t===null&&ht&&((t=a=It)&&(a=Bw(a,n.pendingProps,hs),a!==null?(n.stateNode=a,yn=n,It=null,t=!0):t=!1),t||tr(n)),null;case 13:return O0(t,n,a);case 4:return Be(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=fa(n,null,l,a):xn(t,n,l,a),n.child;case 11:return N0(t,n,n.type,n.pendingProps,a);case 7:return xn(t,n,n.pendingProps,a),n.child;case 8:return xn(t,n,n.pendingProps.children,a),n.child;case 12:return xn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,nr(n,n.type,l.value),xn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ca(n),h=vn(h),l=l(h),n.flags|=1,xn(t,n,l,a),n.child;case 14:return A0(t,n,n.type,n.pendingProps,a);case 15:return j0(t,n,n.type,n.pendingProps,a);case 19:return L0(t,n,a);case 31:return cw(t,n,a);case 22:return C0(t,n,a,n.pendingProps);case 24:return ca(n),l=vn(en),t===null?(h=Rh(),h===null&&(h=jt,m=jh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},kh(n),nr(n,en,h)):((t.lanes&a)!==0&&(Dh(t,n),xo(n,null,null,a),vo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),nr(n,en,l)):(l=m.cache,nr(n,en,l),l!==h.cache&&Ah(n,[en],a,!0))),xn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Ei(t){t.flags|=4}function pf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(dy())t.flags|=8192;else throw ha=au,Ih}else t.flags&=-16777217}function U0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ev(n))if(dy())t.flags|=8192;else throw ha=au,Ih}function Eu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Cc():536870912,t.lanes|=n,ol|=n)}function So(t,n){if(!ht)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function kt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function dw(t,n,a){var l=n.pendingProps;switch(wh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(n),null;case 1:return kt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),xi(en),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qa(n)?Ei(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Th())),kt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(Ei(n),m!==null?(kt(n),U0(n,m)):(kt(n),pf(n,h,null,l,a))):m?m!==t.memoizedState?(Ei(n),kt(n),U0(n,m)):(kt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ei(n),kt(n),pf(n,h,t,l,a)),null;case 27:if(we(n),a=fe.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ei(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return kt(n),null}t=M.current,Qa(n)?vg(n):(t=Yy(h,l,a),n.stateNode=t,Ei(n))}return kt(n),null;case 5:if(we(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ei(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return kt(n),null}if(m=M.current,Qa(n))vg(n);else{var x=Pu(fe.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}m[Wt]=n,m[hn]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;e:switch(bn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ei(n)}}return kt(n),pf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Ei(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=fe.current,Qa(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Wt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Oy(t.nodeValue,a)),t||tr(n,!0)}else t=Pu(t).createTextNode(l),t[Wt]=n,n.stateNode=t}return kt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Qa(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Wt]=n}else la(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),t=!1}else a=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Xn(n),n):(Xn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return kt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Wt]=n}else la(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),h=!1}else h=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Xn(n),n):(Xn(n),null)}return Xn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Eu(n,n.updateQueue),kt(n),null);case 4:return Le(),t===null&&Lf(n.stateNode.containerInfo),kt(n),null;case 10:return xi(n.type),kt(n),null;case 19:if(L(Ft),l=n.memoizedState,l===null)return kt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)So(l,!1);else{if(qt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=uu(t),m!==null){for(n.flags|=128,So(l,!1),t=m.updateQueue,n.updateQueue=t,Eu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)fg(a,t),a=a.sibling;return $(Ft,Ft.current&1|2),ht&&yi(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&zt()>ju&&(n.flags|=128,h=!0,So(l,!1),n.lanes=4194304)}else{if(!h)if(t=uu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Eu(n,t),So(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!ht)return kt(n),null}else 2*zt()-l.renderingStartTime>ju&&a!==536870912&&(n.flags|=128,h=!0,So(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=zt(),t.sibling=null,a=Ft.current,$(Ft,h?a&1|2:a&1),ht&&yi(n,l.treeForkCount),t):(kt(n),null);case 22:case 23:return Xn(n),Lh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(kt(n),n.subtreeFlags&6&&(n.flags|=8192)):kt(n),a=n.updateQueue,a!==null&&Eu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&L(ua),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),xi(en),kt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function hw(t,n){switch(wh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return xi(en),Le(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return we(n),null;case 31:if(n.memoizedState!==null){if(Xn(n),n.alternate===null)throw Error(r(340));la()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Xn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));la()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return L(Ft),null;case 4:return Le(),null;case 10:return xi(n.type),null;case 22:case 23:return Xn(n),Lh(),t!==null&&L(ua),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return xi(en),null;case 25:return null;default:return null}}function z0(t,n){switch(wh(n),n.tag){case 3:xi(en),Le();break;case 26:case 27:case 5:we(n);break;case 4:Le();break;case 31:n.memoizedState!==null&&Xn(n);break;case 13:Xn(n);break;case 19:L(Ft);break;case 10:xi(n.type);break;case 22:case 23:Xn(n),Lh(),t!==null&&L(ua);break;case 24:xi(en)}}function No(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(w){_t(n,n.return,w)}}function or(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=n;var D=a,q=w;try{q()}catch(ie){_t(h,D,ie)}}}l=l.next}while(l!==m)}}catch(ie){_t(n,n.return,ie)}}function B0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Ig(n,a)}catch(l){_t(t,t.return,l)}}}function q0(t,n,a){a.props=pa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){_t(t,n,l)}}function Ao(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){_t(t,n,h)}}function ti(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){_t(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){_t(t,n,h)}else a.current=null}function H0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){_t(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;Mw(l,t.type,a,n),l[hn]=n}catch(h){_t(t,t.return,h)}}function F0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pr(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ns));else if(l!==4&&(l===27&&pr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(vf(t,n,a),t=t.sibling;t!==null;)vf(t,n,a),t=t.sibling}function Tu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&pr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tu(t,n,a),t=t.sibling;t!==null;)Tu(t,n,a),t=t.sibling}function G0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);bn(n,l,a),n[Wt]=t,n[hn]=a}catch(m){_t(t,t.return,m)}}var Ti=!1,sn=!1,xf=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,mn=null;function fw(t,n){if(t=t.containerInfo,zf=Gu,t=ig(t),dh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,w=-1,D=-1,q=0,ie=0,ce=t,F=null;t:for(;;){for(var X;ce!==a||h!==0&&ce.nodeType!==3||(w=x+h),ce!==m||l!==0&&ce.nodeType!==3||(D=x+l),ce.nodeType===3&&(x+=ce.nodeValue.length),(X=ce.firstChild)!==null;)F=ce,ce=X;for(;;){if(ce===t)break t;if(F===a&&++q===h&&(w=x),F===m&&++ie===l&&(D=x),(X=ce.nextSibling)!==null)break;ce=F,F=ce.parentNode}ce=X}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bf={focusedElem:t,selectionRange:a},Gu=!1,mn=n;mn!==null;)if(n=mn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,mn=t;else for(;mn!==null;){switch(n=mn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Re=pa(a.type,h);t=l.getSnapshotBeforeUpdate(Re,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Pe){_t(a,a.return,Pe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,mn=t;break}mn=n.return}}function K0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ni(t,a),l&4&&No(5,a);break;case 1:if(Ni(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){_t(a,a.return,x)}else{var h=pa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){_t(a,a.return,x)}}l&64&&B0(a),l&512&&Ao(a,a.return);break;case 3:if(Ni(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ig(t,n)}catch(x){_t(a,a.return,x)}}break;case 27:n===null&&l&4&&G0(a);case 26:case 5:Ni(t,a),n===null&&l&4&&H0(a),l&512&&Ao(a,a.return);break;case 12:Ni(t,a);break;case 31:Ni(t,a),l&4&&X0(t,a);break;case 13:Ni(t,a),l&4&&W0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ww.bind(null,a),qw(t,a))));break;case 22:if(l=a.memoizedState!==null||Ti,!l){n=n!==null&&n.memoizedState!==null||sn,h=Ti;var m=sn;Ti=l,(sn=n)&&!m?Ai(t,a,(a.subtreeFlags&8772)!==0):Ni(t,a),Ti=h,sn=m}break;case 30:break;default:Ni(t,a)}}function $0(t){var n=t.alternate;n!==null&&(t.alternate=null,$0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ka(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pt=null,Vn=!1;function Si(t,n,a){for(a=a.child;a!==null;)Q0(t,n,a),a=a.sibling}function Q0(t,n,a){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Ne,a)}catch{}switch(a.tag){case 26:sn||ti(a,n),Si(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:sn||ti(a,n);var l=Pt,h=Vn;pr(a.type)&&(Pt=a.stateNode,Vn=!1),Si(t,n,a),Vo(a.stateNode),Pt=l,Vn=h;break;case 5:sn||ti(a,n);case 6:if(l=Pt,h=Vn,Pt=null,Si(t,n,a),Pt=l,Vn=h,Pt!==null)if(Vn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(a.stateNode)}catch(m){_t(a,n,m)}else try{Pt.removeChild(a.stateNode)}catch(m){_t(a,n,m)}break;case 18:Pt!==null&&(Vn?(t=Pt,By(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),gl(t)):By(Pt,a.stateNode));break;case 4:l=Pt,h=Vn,Pt=a.stateNode.containerInfo,Vn=!0,Si(t,n,a),Pt=l,Vn=h;break;case 0:case 11:case 14:case 15:or(2,a,n),sn||or(4,a,n),Si(t,n,a);break;case 1:sn||(ti(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&q0(a,n,l)),Si(t,n,a);break;case 21:Si(t,n,a);break;case 22:sn=(l=sn)||a.memoizedState!==null,Si(t,n,a),sn=l;break;default:Si(t,n,a)}}function X0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{gl(t)}catch(a){_t(n,n.return,a)}}}function W0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gl(t)}catch(a){_t(n,n.return,a)}}function mw(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Y0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Y0),n;default:throw Error(r(435,t.tag))}}function Su(t,n){var a=mw(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=Ew.bind(null,t,l);l.then(h,h)}})}function Ln(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){Pt=w.stateNode,Vn=!1;break e}break;case 5:Pt=w.stateNode,Vn=!1;break e;case 3:case 4:Pt=w.stateNode.containerInfo,Vn=!0;break e}w=w.return}if(Pt===null)throw Error(r(160));Q0(m,x,h),Pt=null,Vn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Z0(n,t),n=n.sibling}var ks=null;function Z0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(n,t),Pn(t),l&4&&(or(3,t,t.return),No(3,t),or(5,t,t.return));break;case 1:Ln(n,t),Pn(t),l&512&&(sn||a===null||ti(a,a.return)),l&64&&Ti&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ks;if(Ln(n,t),Pn(t),l&512&&(sn||a===null||ti(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Bs]||m[Wt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),bn(m,l,a),m[Wt]=t,Zt(m),l=m;break e;case"link":var x=Zy("link","href",h).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}m=h.createElement(l),bn(m,l,a),h.head.appendChild(m);break;case"meta":if(x=Zy("meta","content",h).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}m=h.createElement(l),bn(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Wt]=t,Zt(m),l=m}t.stateNode=l}else Jy(h,t.type,t.stateNode);else t.stateNode=Wy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Jy(h,t.type,t.stateNode):Wy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ln(n,t),Pn(t),l&512&&(sn||a===null||ti(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ln(n,t),Pn(t),l&512&&(sn||a===null||ti(a,a.return)),t.flags&32){h=t.stateNode;try{On(h,"")}catch(Re){_t(t,t.return,Re)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(xf=!0);break;case 6:if(Ln(n,t),Pn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Re){_t(t,t.return,Re)}}break;case 3:if(Bu=null,h=ks,ks=Uu(n.containerInfo),Ln(n,t),ks=h,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(n.containerInfo)}catch(Re){_t(t,t.return,Re)}xf&&(xf=!1,J0(t));break;case 4:l=ks,ks=Uu(t.stateNode.containerInfo),Ln(n,t),Pn(t),ks=l;break;case 12:Ln(n,t),Pn(t);break;case 31:Ln(n,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Ln(n,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Au=zt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=Ti,ie=sn;if(Ti=q||h,sn=ie||D,Ln(n,t),sn=ie,Ti=q,Pn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||Ti||sn||ga(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=D.stateNode;var ce=D.memoizedProps.style,F=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;w.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Re){_t(D,D.return,Re)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Re){_t(D,D.return,Re)}}}else if(n.tag===18){if(a===null){D=n;try{var X=D.stateNode;h?qy(X,!0):qy(D.stateNode,!1)}catch(Re){_t(D,D.return,Re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Su(t,a))));break;case 19:Ln(n,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Ln(n,t),Pn(t)}}function Pn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(F0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=yf(t);Tu(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(On(x,""),a.flags&=-33);var w=yf(t);Tu(t,w,x);break;case 3:case 4:var D=a.stateNode.containerInfo,q=yf(t);vf(t,q,D);break;default:throw Error(r(161))}}catch(ie){_t(t,t.return,ie)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function J0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;J0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ni(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)K0(t,n.alternate,n),n=n.sibling}function ga(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:or(4,n,n.return),ga(n);break;case 1:ti(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&q0(n,n.return,a),ga(n);break;case 27:Vo(n.stateNode);case 26:case 5:ti(n,n.return),ga(n);break;case 22:n.memoizedState===null&&ga(n);break;case 30:ga(n);break;default:ga(n)}t=t.sibling}}function Ai(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ai(h,m,a),No(4,m);break;case 1:if(Ai(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){_t(l,l.return,q)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Rg(D[h],w)}catch(q){_t(l,l.return,q)}}a&&x&64&&B0(m),Ao(m,m.return);break;case 27:G0(m);case 26:case 5:Ai(h,m,a),a&&l===null&&x&4&&H0(m),Ao(m,m.return);break;case 12:Ai(h,m,a);break;case 31:Ai(h,m,a),a&&x&4&&X0(h,m);break;case 13:Ai(h,m,a),a&&x&4&&W0(h,m);break;case 22:m.memoizedState===null&&Ai(h,m,a),Ao(m,m.return);break;case 30:break;default:Ai(h,m,a)}n=n.sibling}}function bf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&fo(a))}function _f(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&fo(t))}function Ds(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ey(t,n,a,l),n=n.sibling}function ey(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Ds(t,n,a,l),h&2048&&No(9,n);break;case 1:Ds(t,n,a,l);break;case 3:Ds(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&fo(t)));break;case 12:if(h&2048){Ds(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){_t(n,n.return,D)}}else Ds(t,n,a,l);break;case 31:Ds(t,n,a,l);break;case 13:Ds(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?Ds(t,n,a,l):jo(t,n):m._visibility&2?Ds(t,n,a,l):(m._visibility|=2,rl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&bf(x,n);break;case 24:Ds(t,n,a,l),h&2048&&_f(n.alternate,n);break;default:Ds(t,n,a,l)}}function rl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,x=n,w=a,D=l,q=x.flags;switch(x.tag){case 0:case 11:case 15:rl(m,x,w,D,h),No(8,x);break;case 23:break;case 22:var ie=x.stateNode;x.memoizedState!==null?ie._visibility&2?rl(m,x,w,D,h):jo(m,x):(ie._visibility|=2,rl(m,x,w,D,h)),h&&q&2048&&bf(x.alternate,x);break;case 24:rl(m,x,w,D,h),h&&q&2048&&_f(x.alternate,x);break;default:rl(m,x,w,D,h)}n=n.sibling}}function jo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:jo(a,l),h&2048&&bf(l.alternate,l);break;case 24:jo(a,l),h&2048&&_f(l.alternate,l);break;default:jo(a,l)}n=n.sibling}}var Co=8192;function al(t,n,a){if(t.subtreeFlags&Co)for(t=t.child;t!==null;)ty(t,n,a),t=t.sibling}function ty(t,n,a){switch(t.tag){case 26:al(t,n,a),t.flags&Co&&t.memoizedState!==null&&e2(a,ks,t.memoizedState,t.memoizedProps);break;case 5:al(t,n,a);break;case 3:case 4:var l=ks;ks=Uu(t.stateNode.containerInfo),al(t,n,a),ks=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Co,Co=16777216,al(t,n,a),Co=l):al(t,n,a));break;default:al(t,n,a)}}function ny(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ro(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];mn=l,iy(l,t)}ny(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)sy(t),t=t.sibling}function sy(t){switch(t.tag){case 0:case 11:case 15:Ro(t),t.flags&2048&&or(9,t,t.return);break;case 3:Ro(t);break;case 12:Ro(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Nu(t)):Ro(t);break;default:Ro(t)}}function Nu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];mn=l,iy(l,t)}ny(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:or(8,n,n.return),Nu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(n));break;default:Nu(n)}t=t.sibling}}function iy(t,n){for(;mn!==null;){var a=mn;switch(a.tag){case 0:case 11:case 15:or(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,mn=l;else e:for(a=t;mn!==null;){l=mn;var h=l.sibling,m=l.return;if($0(l),l===a){mn=null;break e}if(h!==null){h.return=m,mn=h;break e}mn=m}}}var pw={getCacheForType:function(t){var n=vn(en),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return vn(en).controller.signal}},gw=typeof WeakMap=="function"?WeakMap:Map,yt=0,jt=null,st=null,lt=0,bt=0,Wn=null,cr=!1,ll=!1,wf=!1,ji=0,qt=0,ur=0,ya=0,Ef=0,Zn=0,ol=0,Io=null,Un=null,Tf=!1,Au=0,ry=0,ju=1/0,Cu=null,dr=null,on=0,hr=null,cl=null,Ci=0,Sf=0,Nf=null,ay=null,ko=0,Af=null;function Jn(){return(yt&2)!==0&&lt!==0?lt&-lt:K.T!==null?Df():Rc()}function ly(){if(Zn===0)if((lt&536870912)===0||ht){var t=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Zn=t}else Zn=536870912;return t=Qn.current,t!==null&&(t.flags|=32),Zn}function zn(t,n,a){(t===jt&&(bt===2||bt===9)||t.cancelPendingCommit!==null)&&(ul(t,0),fr(t,lt,Zn,!1)),Gr(t,a),((yt&2)===0||t!==jt)&&(t===jt&&((yt&2)===0&&(ya|=a),qt===4&&fr(t,lt,Zn,!1)),ni(t))}function oy(t,n,a){if((yt&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Fn(t,n),h=l?xw(t,n):Cf(t,n,!0),m=l;do{if(h===0){ll&&!l&&fr(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!yw(a)){h=Cf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var w=t;h=Io;var D=w.current.memoizedState.isDehydrated;if(D&&(ul(w,x).flags|=256),x=Cf(w,x,!1),x!==2){if(wf&&!D){w.errorRecoveryDisabledLanes|=m,ya|=m,h=4;break e}m=Un,Un=h,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){ul(t,0),fr(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:fr(l,n,Zn,!cr);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=Au+300-zt(),10<h)){if(fr(l,n,Zn,!cr),Xt(l,0,!0)!==0)break e;Ci=n,l.timeoutHandle=Uy(cy.bind(null,l,a,Un,Cu,Tf,n,Zn,ya,ol,cr,m,"Throttled",-0,0),h);break e}cy(l,a,Un,Cu,Tf,n,Zn,ya,ol,cr,m,null,-0,0)}}break}while(!0);ni(t)}function cy(t,n,a,l,h,m,x,w,D,q,ie,ce,F,X){if(t.timeoutHandle=-1,ce=n.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ns},ty(n,m,ce);var Re=(m&62914560)===m?Au-zt():(m&4194048)===m?ry-zt():0;if(Re=t2(ce,Re),Re!==null){Ci=m,t.cancelPendingCommit=Re(yy.bind(null,t,n,m,a,l,h,x,w,D,ie,ce,null,F,X)),fr(t,m,x,!q);return}}yy(t,n,m,a,l,h,x,w,D)}function yw(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Kn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fr(t,n,a,l){n&=~Ef,n&=~ya,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-nt(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Yr(t,a,n)}function Ru(){return(yt&6)===0?(Do(0),!1):!0}function jf(){if(st!==null){if(bt===0)var t=st.return;else t=st,vi=oa=null,Hh(t),el=null,po=0,t=st;for(;t!==null;)z0(t.alternate,t),t=t.return;st=null}}function ul(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Lw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ci=0,jf(),jt=t,st=a=gi(t.current,null),lt=n,bt=0,Wn=null,cr=!1,ll=Fn(t,n),wf=!1,ol=Zn=Ef=ya=ur=qt=0,Un=Io=null,Tf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-nt(l),m=1<<h;n|=t[h],l&=~m}return ji=n,Wc(),a}function uy(t,n){Ze=null,K.H=Eo,n===Ja||n===ru?(n=Ng(),bt=3):n===Ih?(n=Ng(),bt=4):bt=n===af?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Wn=n,st===null&&(qt=1,xu(t,cs(n,t.current)))}function dy(){var t=Qn.current;return t===null?!0:(lt&4194048)===lt?fs===null:(lt&62914560)===lt||(lt&536870912)!==0?t===fs:!1}function hy(){var t=K.H;return K.H=Eo,t===null?Eo:t}function fy(){var t=K.A;return K.A=pw,t}function Iu(){qt=4,cr||(lt&4194048)!==lt&&Qn.current!==null||(ll=!0),(ur&134217727)===0&&(ya&134217727)===0||jt===null||fr(jt,lt,Zn,!1)}function Cf(t,n,a){var l=yt;yt|=2;var h=hy(),m=fy();(jt!==t||lt!==n)&&(Cu=null,ul(t,n)),n=!1;var x=qt;e:do try{if(bt!==0&&st!==null){var w=st,D=Wn;switch(bt){case 8:jf(),x=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(n=!0);var q=bt;if(bt=0,Wn=null,dl(t,w,D,q),a&&ll){x=0;break e}break;default:q=bt,bt=0,Wn=null,dl(t,w,D,q)}}vw(),x=qt;break}catch(ie){uy(t,ie)}while(!0);return n&&t.shellSuspendCounter++,vi=oa=null,yt=l,K.H=h,K.A=m,st===null&&(jt=null,lt=0,Wc()),x}function vw(){for(;st!==null;)my(st)}function xw(t,n){var a=yt;yt|=2;var l=hy(),h=fy();jt!==t||lt!==n?(Cu=null,ju=zt()+500,ul(t,n)):ll=Fn(t,n);e:do try{if(bt!==0&&st!==null){n=st;var m=Wn;t:switch(bt){case 1:bt=0,Wn=null,dl(t,n,m,1);break;case 2:case 9:if(Tg(m)){bt=0,Wn=null,py(n);break}n=function(){bt!==2&&bt!==9||jt!==t||(bt=7),ni(t)},m.then(n,n);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Tg(m)?(bt=0,Wn=null,py(n)):(bt=0,Wn=null,dl(t,n,m,7));break;case 5:var x=null;switch(st.tag){case 26:x=st.memoizedState;case 5:case 27:var w=st;if(x?ev(x):w.stateNode.complete){bt=0,Wn=null;var D=w.sibling;if(D!==null)st=D;else{var q=w.return;q!==null?(st=q,ku(q)):st=null}break t}}bt=0,Wn=null,dl(t,n,m,5);break;case 6:bt=0,Wn=null,dl(t,n,m,6);break;case 8:jf(),qt=6;break e;default:throw Error(r(462))}}bw();break}catch(ie){uy(t,ie)}while(!0);return vi=oa=null,K.H=l,K.A=h,yt=a,st!==null?0:(jt=null,lt=0,Wc(),qt)}function bw(){for(;st!==null&&!Hi();)my(st)}function my(t){var n=P0(t.alternate,t,ji);t.memoizedProps=t.pendingProps,n===null?ku(t):st=n}function py(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=k0(a,n,n.pendingProps,n.type,void 0,lt);break;case 11:n=k0(a,n,n.pendingProps,n.type.render,n.ref,lt);break;case 5:Hh(n);default:z0(a,n),n=st=fg(n,ji),n=P0(a,n,ji)}t.memoizedProps=t.pendingProps,n===null?ku(t):st=n}function dl(t,n,a,l){vi=oa=null,Hh(n),el=null,po=0;var h=n.return;try{if(ow(t,h,n,a,lt)){qt=1,xu(t,cs(a,t.current)),st=null;return}}catch(m){if(h!==null)throw st=h,m;qt=1,xu(t,cs(a,t.current)),st=null;return}n.flags&32768?(ht||l===1?t=!0:ll||(lt&536870912)!==0?t=!1:(cr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),gy(n,t)):ku(n)}function ku(t){var n=t;do{if((n.flags&32768)!==0){gy(n,cr);return}t=n.return;var a=dw(n.alternate,n,ji);if(a!==null){st=a;return}if(n=n.sibling,n!==null){st=n;return}st=n=t}while(n!==null);qt===0&&(qt=5)}function gy(t,n){do{var a=hw(t.alternate,t);if(a!==null){a.flags&=32767,st=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){st=t;return}st=t=a}while(t!==null);qt=6,st=null}function yy(t,n,a,l,h,m,x,w,D){t.cancelPendingCommit=null;do Du();while(on!==0);if((yt&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=gh,lh(t,a,m,x,w,D),t===jt&&(st=jt=null,lt=0),cl=n,hr=t,Ci=a,Sf=m,Nf=h,ay=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Tw(Y,function(){return wy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=ae.p,ae.p=2,x=yt,yt|=4;try{fw(t,n,a)}finally{yt=x,ae.p=h,K.T=l}}on=1,vy(),xy(),by()}}function vy(){if(on===1){on=0;var t=hr,n=cl,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var h=yt;yt|=4;try{Z0(n,t);var m=Bf,x=ig(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&sg(w.ownerDocument.documentElement,w)){if(D!==null&&dh(w)){var q=D.start,ie=D.end;if(ie===void 0&&(ie=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(ie,w.value.length);else{var ce=w.ownerDocument||document,F=ce&&ce.defaultView||window;if(F.getSelection){var X=F.getSelection(),Re=w.textContent.length,Pe=Math.min(D.start,Re),St=D.end===void 0?Pe:Math.min(D.end,Re);!X.extend&&Pe>St&&(x=St,St=Pe,Pe=x);var U=ng(w,Pe),O=ng(w,St);if(U&&O&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==O.node||X.focusOffset!==O.offset)){var B=ce.createRange();B.setStart(U.node,U.offset),X.removeAllRanges(),Pe>St?(X.addRange(B),X.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),X.addRange(B))}}}}for(ce=[],X=w;X=X.parentNode;)X.nodeType===1&&ce.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ce.length;w++){var re=ce[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Gu=!!zf,Bf=zf=null}finally{yt=h,ae.p=l,K.T=a}}t.current=n,on=2}}function xy(){if(on===2){on=0;var t=hr,n=cl,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var h=yt;yt|=4;try{K0(t,n.alternate,n)}finally{yt=h,ae.p=l,K.T=a}}on=3}}function by(){if(on===4||on===3){on=0,Cn();var t=hr,n=cl,a=Ci,l=ay;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?on=5:(on=0,cl=hr=null,_y(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(dr=null),hi(a),n=n.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Ne,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=ae.p,ae.p=2,K.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var w=l[x];m(w.value,{componentStack:w.stack})}}finally{K.T=n,ae.p=h}}(Ci&3)!==0&&Du(),ni(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Af?ko++:(ko=0,Af=t):ko=0,Do(0)}}function _y(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,fo(n)))}function Du(){return vy(),xy(),by(),wy()}function wy(){if(on!==5)return!1;var t=hr,n=Sf;Sf=0;var a=hi(Ci),l=K.T,h=ae.p;try{ae.p=32>a?32:a,K.T=null,a=Nf,Nf=null;var m=hr,x=Ci;if(on=0,cl=hr=null,Ci=0,(yt&6)!==0)throw Error(r(331));var w=yt;if(yt|=4,sy(m.current),ey(m,m.current,x,a),yt=w,Do(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Ne,m)}catch{}return!0}finally{ae.p=h,K.T=l,_y(t,n)}}function Ey(t,n,a){n=cs(a,n),n=rf(t.stateNode,n,2),t=rr(t,n,2),t!==null&&(Gr(t,2),ni(t))}function _t(t,n,a){if(t.tag===3)Ey(t,t,a);else for(;n!==null;){if(n.tag===3){Ey(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(dr===null||!dr.has(l))){t=cs(a,t),a=T0(2),l=rr(n,a,2),l!==null&&(S0(a,l,n,t),Gr(l,2),ni(l));break}}n=n.return}}function Rf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new gw;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(wf=!0,h.add(a),t=_w.bind(null,t,n,a),n.then(t,t))}function _w(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,jt===t&&(lt&a)===a&&(qt===4||qt===3&&(lt&62914560)===lt&&300>zt()-Au?(yt&2)===0&&ul(t,0):Ef|=a,ol===lt&&(ol=0)),ni(t)}function Ty(t,n){n===0&&(n=Cc()),t=ra(t,n),t!==null&&(Gr(t,n),ni(t))}function ww(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Ty(t,a)}function Ew(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Ty(t,a)}function Tw(t,n){return rt(t,n)}var Mu=null,hl=null,If=!1,Ou=!1,kf=!1,mr=0;function ni(t){t!==hl&&t.next===null&&(hl===null?Mu=hl=t:hl=hl.next=t),Ou=!0,If||(If=!0,Nw())}function Do(t,n){if(!kf&&Ou){kf=!0;do for(var a=!1,l=Mu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-nt(42|t)+1)-1,m&=h&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,jy(l,m))}else m=lt,m=Xt(l,l===jt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Fn(l,m)||(a=!0,jy(l,m));l=l.next}while(a);kf=!1}}function Sw(){Sy()}function Sy(){Ou=If=!1;var t=0;mr!==0&&Vw()&&(t=mr);for(var n=zt(),a=null,l=Mu;l!==null;){var h=l.next,m=Ny(l,n);m===0?(l.next=null,a===null?Mu=h:a.next=h,h===null&&(hl=a)):(a=l,(t!==0||(m&3)!==0)&&(Ou=!0)),l=h}on!==0&&on!==5||Do(t),mr!==0&&(mr=0)}function Ny(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-nt(m),w=1<<x,D=h[x];D===-1?((w&a)===0||(w&l)!==0)&&(h[x]=ah(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=jt,a=lt,a=Xt(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(bt===2||bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Vt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Fn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Vt(l),hi(a)){case 2:case 8:a=ws;break;case 32:a=Y;break;case 268435456:a=ke;break;default:a=Y}return l=Ay.bind(null,t),a=rt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Vt(l),t.callbackPriority=2,t.callbackNode=null,2}function Ay(t,n){if(on!==0&&on!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Du()&&t.callbackNode!==a)return null;var l=lt;return l=Xt(t,t===jt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(oy(t,l,n),Ny(t,zt()),t.callbackNode!=null&&t.callbackNode===a?Ay.bind(null,t):null)}function jy(t,n){if(Du())return null;oy(t,n,!0)}function Nw(){Pw(function(){(yt&6)!==0?rt(_s,Sw):Sy()})}function Df(){if(mr===0){var t=Wa;t===0&&(t=Nt,Nt<<=1,(Nt&261888)===0&&(Nt=256)),mr=t}return mr}function Cy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Va(""+t)}function Ry(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Aw(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Cy((h[hn]||null).action),x=l.submitter;x&&(n=(n=x[hn]||null)?Cy(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var w=new Qs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(mr!==0){var D=x?Ry(h,x):new FormData(h);Zh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=x?Ry(h,x):new FormData(h),Zh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Mf=0;Mf<ph.length;Mf++){var Of=ph[Mf],jw=Of.toLowerCase(),Cw=Of[0].toUpperCase()+Of.slice(1);Is(jw,"on"+Cw)}Is(lg,"onAnimationEnd"),Is(og,"onAnimationIteration"),Is(cg,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(G1,"onTransitionRun"),Is(Y1,"onTransitionStart"),Is(K1,"onTransitionCancel"),Is(ug,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mo));function Iy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var w=l[x],D=w.instance,q=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=q;try{m(h)}catch(ie){Xc(ie)}h.currentTarget=null,m=D}else for(x=0;x<l.length;x++){if(w=l[x],D=w.instance,q=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=q;try{m(h)}catch(ie){Xc(ie)}h.currentTarget=null,m=D}}}}function it(t,n){var a=n[Ia];a===void 0&&(a=n[Ia]=new Set);var l=t+"__bubble";a.has(l)||(ky(n,t,2,!1),a.add(l))}function Vf(t,n,a){var l=0;n&&(l|=4),ky(a,t,l,n)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Lf(t){if(!t[Vu]){t[Vu]=!0,Gl.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Vu]||(n[Vu]=!0,Vf("selectionchange",!1,n))}}function ky(t,n,a,l){switch(lv(n)){case 2:var h=i2;break;case 8:h=r2;break;default:h=Zf}a=h.bind(null,n,a,t),h=void 0,!Wr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Pf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=qs(w),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=m=x;continue e}w=w.parentNode}}l=l.return}Qi(function(){var q=m,ie=rs(a),ce=[];e:{var F=dg.get(t);if(F!==void 0){var X=Qs,Re=t;switch(t){case"keypress":if(Jr(a)===0)break e;case"keydown":case"keyup":X=Kc;break;case"focusin":Re="focus",X=ta;break;case"focusout":Re="blur",X=ta;break;case"beforeblur":case"afterblur":X=ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=p;break;case lg:case og:case cg:X=zc;break;case ug:X=T;break;case"scroll":case"scrollend":X=so;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=pi;break;case"toggle":case"beforetoggle":X=We}var Pe=(n&4)!==0,St=!Pe&&(t==="scroll"||t==="scrollend"),U=Pe?F!==null?F+"Capture":null:F;Pe=[];for(var O=q,B;O!==null;){var re=O;if(B=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||B===null||U===null||(re=As(O,U),re!=null&&Pe.push(Oo(O,re,B))),St)break;O=O.return}0<Pe.length&&(F=new X(F,Re,null,a,ie),ce.push({event:F,listeners:Pe}))}}if((n&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",F&&a!==eo&&(Re=a.relatedTarget||a.fromElement)&&(qs(Re)||Re[zs]))break e;if((X||F)&&(F=ie.window===ie?ie:(F=ie.ownerDocument)?F.defaultView||F.parentWindow:window,X?(Re=a.relatedTarget||a.toElement,X=q,Re=Re?qs(Re):null,Re!==null&&(St=u(Re),Pe=Re.tag,Re!==St||Pe!==5&&Pe!==27&&Pe!==6)&&(Re=null)):(X=null,Re=q),X!==Re)){if(Pe=io,re="onMouseLeave",U="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Pe=pi,re="onPointerLeave",U="onPointerEnter",O="pointer"),St=X==null?F:Gn(X),B=Re==null?F:Gn(Re),F=new Pe(re,O+"leave",X,a,ie),F.target=St,F.relatedTarget=B,re=null,qs(ie)===q&&(Pe=new Pe(U,O+"enter",Re,a,ie),Pe.target=B,Pe.relatedTarget=St,re=Pe),St=re,X&&Re)t:{for(Pe=Iw,U=X,O=Re,B=0,re=U;re;re=Pe(re))B++;re=0;for(var Me=O;Me;Me=Pe(Me))re++;for(;0<B-re;)U=Pe(U),B--;for(;0<re-B;)O=Pe(O),re--;for(;B--;){if(U===O||O!==null&&U===O.alternate){Pe=U;break t}U=Pe(U),O=Pe(O)}Pe=null}else Pe=null;X!==null&&Dy(ce,F,X,Pe,!1),Re!==null&&St!==null&&Dy(ce,St,Re,Pe,!0)}}e:{if(F=q?Gn(q):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var mt=Xp;else if($p(F))if(Wp)mt=q1;else{mt=z1;var Ie=U1}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Oa(q.elementType)&&(mt=Xp):mt=B1;if(mt&&(mt=mt(t,q))){Qp(ce,mt,a,ie);break e}Ie&&Ie(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Wl(F,"number",F.value)}switch(Ie=q?Gn(q):window,t){case"focusin":($p(Ie)||Ie.contentEditable==="true")&&(Ha=Ie,hh=q,co=null);break;case"focusout":co=hh=Ha=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,rg(ce,a,ie);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":rg(ce,a,ie)}var et;if(gt)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else qa?na(t,a)&&(ot="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ot="onCompositionStart");ot&&(Zs&&a.locale!=="ko"&&(qa||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&qa&&(et=no()):($s=ie,to="value"in $s?$s.value:$s.textContent,qa=!0)),Ie=Lu(q,ot),0<Ie.length&&(ot=new Ws(ot,t,null,a,ie),ce.push({event:ot,listeners:Ie}),et?ot.data=et:(et=Ba(a),et!==null&&(ot.data=et)))),(et=ls?O1(t,a):V1(t,a))&&(ot=Lu(q,"onBeforeInput"),0<ot.length&&(Ie=new Ws("onBeforeInput","beforeinput",null,a,ie),ce.push({event:Ie,listeners:ot}),Ie.data=et)),Aw(ce,t,q,a,ie)}Iy(ce,n)})}function Oo(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Lu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=As(t,a),h!=null&&l.unshift(Oo(t,h,m)),h=As(t,n),h!=null&&l.push(Oo(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Iw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Dy(t,n,a,l,h){for(var m=n._reactName,x=[];a!==null&&a!==l;){var w=a,D=w.alternate,q=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||q===null||(D=q,h?(q=As(a,m),q!=null&&x.unshift(Oo(a,q,D))):h||(q=As(a,m),q!=null&&x.push(Oo(a,q,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var kw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function My(t){return(typeof t=="string"?t:""+t).replace(kw,`
`).replace(Dw,"")}function Oy(t,n){return n=My(n),My(t)===n}function Tt(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||On(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&On(t,""+l);break;case"className":Yn(t,"class",l);break;case"tabIndex":Yn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(t,a,l);break;case"style":Jl(t,l,m);break;case"data":if(n!=="object"){Yn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Tt(t,n,"name",h.name,h,null),Tt(t,n,"formEncType",h.formEncType,h,null),Tt(t,n,"formMethod",h.formMethod,h,null),Tt(t,n,"formTarget",h.formTarget,h,null)):(Tt(t,n,"encType",h.encType,h,null),Tt(t,n,"method",h.method,h,null),Tt(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ns);break;case"onScroll":l!=null&&it("scroll",t);break;case"onScrollEnd":l!=null&&it("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Va(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":it("beforetoggle",t),it("toggle",t),Da(t,"popover",l);break;case"xlinkActuate":Jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Da(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Lc.get(a)||a,Da(t,a,l))}}function Uf(t,n,a,l,h,m){switch(a){case"style":Jl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?On(t,l):(typeof l=="number"||typeof l=="bigint")&&On(t,""+l);break;case"onScroll":l!=null&&it("scroll",t);break;case"onScrollEnd":l!=null&&it("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[hn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Da(t,a,l)}}}function bn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",t),it("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Tt(t,n,m,x,a,null)}}h&&Tt(t,n,"srcSet",a.srcSet,a,null),l&&Tt(t,n,"src",a.src,a,null);return;case"input":it("invalid",t);var w=m=x=h=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":x=ie;break;case"checked":D=ie;break;case"defaultChecked":q=ie;break;case"value":m=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,n));break;default:Tt(t,n,l,ie,a,null)}}Mc(t,m,w,D,q,x,h,!1);return;case"select":it("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:Tt(t,n,h,w,a,null)}n=m,a=x,t.multiple=!!l,n!=null?Gi(t,!!l,n,!1):a!=null&&Gi(t,!!l,a,!0);return;case"textarea":it("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Tt(t,n,x,w,a,null)}Yi(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Tt(t,n,D,l,a,null)}return;case"dialog":it("beforetoggle",t),it("toggle",t),it("cancel",t),it("close",t);break;case"iframe":case"object":it("load",t);break;case"video":case"audio":for(l=0;l<Mo.length;l++)it(Mo[l],t);break;case"image":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"embed":case"source":case"link":it("error",t),it("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Tt(t,n,q,l,a,null)}return;default:if(Oa(n)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&Uf(t,n,ie,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Tt(t,n,w,l,a,null))}function Mw(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,w=null,D=null,q=null,ie=null;for(X in a){var ce=a[X];if(a.hasOwnProperty(X)&&ce!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ce;default:l.hasOwnProperty(X)||Tt(t,n,X,null,l,ce)}}for(var F in l){var X=l[F];if(ce=a[F],l.hasOwnProperty(F)&&(X!=null||ce!=null))switch(F){case"type":m=X;break;case"name":h=X;break;case"checked":q=X;break;case"defaultChecked":ie=X;break;case"value":x=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,n));break;default:X!==ce&&Tt(t,n,F,X,l,ce)}}Ma(t,x,w,D,q,ie,m,h);return;case"select":X=x=w=F=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":X=D;default:l.hasOwnProperty(m)||Tt(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":F=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==D&&Tt(t,n,h,m,l,D)}n=w,a=x,l=X,F!=null?Gi(t,!!a,F,!1):!!l!=!!a&&(n!=null?Gi(t,!!a,n,!0):Gi(t,!!a,a?[]:"",!1));return;case"textarea":X=F=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Tt(t,n,w,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":F=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&Tt(t,n,x,h,l,m)}Oc(t,F,X);return;case"option":for(var Re in a)if(F=a[Re],a.hasOwnProperty(Re)&&F!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:Tt(t,n,Re,null,l,F)}for(D in l)if(F=l[D],X=a[D],l.hasOwnProperty(D)&&F!==X&&(F!=null||X!=null))switch(D){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Tt(t,n,D,F,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in a)F=a[Pe],a.hasOwnProperty(Pe)&&F!=null&&!l.hasOwnProperty(Pe)&&Tt(t,n,Pe,null,l,F);for(q in l)if(F=l[q],X=a[q],l.hasOwnProperty(q)&&F!==X&&(F!=null||X!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:Tt(t,n,q,F,l,X)}return;default:if(Oa(n)){for(var St in a)F=a[St],a.hasOwnProperty(St)&&F!==void 0&&!l.hasOwnProperty(St)&&Uf(t,n,St,void 0,l,F);for(ie in l)F=l[ie],X=a[ie],!l.hasOwnProperty(ie)||F===X||F===void 0&&X===void 0||Uf(t,n,ie,F,l,X);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!l.hasOwnProperty(U)&&Tt(t,n,U,null,l,F);for(ce in l)F=l[ce],X=a[ce],!l.hasOwnProperty(ce)||F===X||F==null&&X==null||Tt(t,n,ce,F,l,X)}function Vy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ow(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,x=h.initiatorType,w=h.duration;if(m&&w&&Vy(x)){for(x=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>w)break;var ie=D.transferSize,ce=D.initiatorType;ie&&Vy(ce)&&(D=D.responseEnd,x+=ie*(D<w?1:(w-q)/(D-q)))}if(--l,n+=8*(m+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zf=null,Bf=null;function Pu(t){return t.nodeType===9?t:t.ownerDocument}function Ly(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function qf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Hf=null;function Vw(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var Uy=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(t){return zy.resolve(null).then(t).catch(Uw)}:Uy;function Uw(t){setTimeout(function(){throw t})}function pr(t){return t==="head"}function By(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),gl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Vo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Vo(a);for(var m=a.firstChild;m;){var x=m.nextSibling,w=m.nodeName;m[Bs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Vo(t.ownerDocument.body);a=h}while(a);gl(n)}function qy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ff(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function zw(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Bs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ms(t.nextSibling),t===null)break}return null}function Bw(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ms(t.nextSibling),t===null))return null;return t}function Hy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ms(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function qw(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ms(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Kf=null;function Fy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return ms(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Gy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Yy(t,n,a){switch(n=Pu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Vo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ka(t)}var ps=new Map,Ky=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ri=ae.d;ae.d={f:Hw,r:Fw,D:Gw,C:Yw,L:Kw,m:$w,X:Xw,S:Qw,M:Ww};function Hw(){var t=Ri.f(),n=Ru();return t||n}function Fw(t){var n=is(t);n!==null&&n.tag===5&&n.type==="form"?u0(n):Ri.r(t)}var fl=typeof document>"u"?null:document;function $y(t,n,a){var l=fl;if(l&&typeof n=="string"&&n){var h=Mn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Ky.has(h)||(Ky.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),bn(n,"link",t),Zt(n),l.head.appendChild(n)))}}function Gw(t){Ri.D(t),$y("dns-prefetch",t,null)}function Yw(t,n){Ri.C(t,n),$y("preconnect",t,n)}function Kw(t,n,a){Ri.L(t,n,a);var l=fl;if(l&&t&&n){var h='link[rel="preload"][as="'+Mn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Mn(a.imageSizes)+'"]')):h+='[href="'+Mn(t)+'"]';var m=h;switch(n){case"style":m=ml(t);break;case"script":m=pl(t)}ps.has(m)||(t=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ps.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Lo(m))||n==="script"&&l.querySelector(Po(m))||(n=l.createElement("link"),bn(n,"link",t),Zt(n),l.head.appendChild(n)))}}function $w(t,n){Ri.m(t,n);var a=fl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Mn(l)+'"][href="'+Mn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=pl(t)}if(!ps.has(m)&&(t=S({rel:"modulepreload",href:t},n),ps.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Po(m)))return}l=a.createElement("link"),bn(l,"link",t),Zt(l),a.head.appendChild(l)}}}function Qw(t,n,a){Ri.S(t,n,a);var l=fl;if(l&&t){var h=Hs(l).hoistableStyles,m=ml(t);n=n||"default";var x=h.get(m);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(Lo(m)))w.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ps.get(m))&&$f(t,a);var D=x=l.createElement("link");Zt(D),bn(D,"link",t),D._p=new Promise(function(q,ie){D.onload=q,D.onerror=ie}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,zu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(m,x)}}}function Xw(t,n){Ri.X(t,n);var a=fl;if(a&&t){var l=Hs(a).hoistableScripts,h=pl(t),m=l.get(h);m||(m=a.querySelector(Po(h)),m||(t=S({src:t,async:!0},n),(n=ps.get(h))&&Qf(t,n),m=a.createElement("script"),Zt(m),bn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Ww(t,n){Ri.M(t,n);var a=fl;if(a&&t){var l=Hs(a).hoistableScripts,h=pl(t),m=l.get(h);m||(m=a.querySelector(Po(h)),m||(t=S({src:t,async:!0,type:"module"},n),(n=ps.get(h))&&Qf(t,n),m=a.createElement("script"),Zt(m),bn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Qy(t,n,a,l){var h=(h=fe.current)?Uu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ml(a.href),a=Hs(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ml(a.href);var m=Hs(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Lo(t)))&&!m._p&&(x.instance=m,x.state.loading=5),ps.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ps.set(t,a),m||Zw(h,t,a,x.state))),n&&l===null)throw Error(r(528,""));return x}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=pl(a),a=Hs(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ml(t){return'href="'+Mn(t)+'"'}function Lo(t){return'link[rel="stylesheet"]['+t+"]"}function Xy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Zw(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),bn(n,"link",a),Zt(n),t.head.appendChild(n))}function pl(t){return'[src="'+Mn(t)+'"]'}function Po(t){return"script[async]"+t}function Wy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Mn(a.href)+'"]');if(l)return n.instance=l,Zt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Zt(l),bn(l,"style",h),zu(l,a.precedence,t),n.instance=l;case"stylesheet":h=ml(a.href);var m=t.querySelector(Lo(h));if(m)return n.state.loading|=4,n.instance=m,Zt(m),m;l=Xy(a),(h=ps.get(h))&&$f(l,h),m=(t.ownerDocument||t).createElement("link"),Zt(m);var x=m;return x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),bn(m,"link",l),n.state.loading|=4,zu(m,a.precedence,t),n.instance=m;case"script":return m=pl(a.src),(h=t.querySelector(Po(m)))?(n.instance=h,Zt(h),h):(l=a,(h=ps.get(m))&&(l=S({},a),Qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Zt(h),bn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,zu(l,a.precedence,t));return n.instance}function zu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function $f(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Bu=null;function Zy(t,n,a){if(Bu===null){var l=new Map,h=Bu=new Map;h.set(a,l)}else h=Bu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Bs]||m[Wt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=t+x;var w=l.get(x);w?w.push(m):l.set(x,[m])}}return l}function Jy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Jw(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function ev(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function e2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ml(l.href),m=n.querySelector(Lo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=qu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Zt(m);return}m=n.ownerDocument||n,l=Xy(l),(h=ps.get(h))&&$f(l,h),m=m.createElement("link"),Zt(m);var x=m;x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),bn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=qu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Xf=0;function t2(t,n){return t.stylesheets&&t.count===0&&Fu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Xf===0&&(Xf=62500*Ow());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Xf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hu=null;function Fu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hu=new Map,n.forEach(n2,t),Hu=null,qu.call(t))}function n2(t,n){if(!(n.state.loading&4)){var a=Hu.get(t);if(a)var l=a.get(null);else{a=new Map,Hu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=qu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Uo={$$typeof:ge,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function s2(t,n,a,l,h,m,x,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function tv(t,n,a,l,h,m,x,w,D,q,ie,ce){return t=new s2(t,n,a,x,D,q,ie,ce,w),n=1,m===!0&&(n|=24),m=$n(3,null,null,n),t.current=m,m.stateNode=t,n=jh(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},kh(m),t}function nv(t){return t?(t=Ya,t):Ya}function sv(t,n,a,l,h,m){h=nv(h),l.context===null?l.context=h:l.pendingContext=h,l=ir(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=rr(t,l,n),a!==null&&(zn(a,t,n),yo(a,t,n))}function iv(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Wf(t,n){iv(t,n),(t=t.alternate)&&iv(t,n)}function rv(t){if(t.tag===13||t.tag===31){var n=ra(t,67108864);n!==null&&zn(n,t,67108864),Wf(t,67108864)}}function av(t){if(t.tag===13||t.tag===31){var n=Jn();n=Kr(n);var a=ra(t,n);a!==null&&zn(a,t,n),Wf(t,n)}}var Gu=!0;function i2(t,n,a,l){var h=K.T;K.T=null;var m=ae.p;try{ae.p=2,Zf(t,n,a,l)}finally{ae.p=m,K.T=h}}function r2(t,n,a,l){var h=K.T;K.T=null;var m=ae.p;try{ae.p=8,Zf(t,n,a,l)}finally{ae.p=m,K.T=h}}function Zf(t,n,a,l){if(Gu){var h=Jf(l);if(h===null)Pf(t,n,l,Yu,a),ov(t,l);else if(l2(h,t,n,a,l))l.stopPropagation();else if(ov(t,l),n&4&&-1<a2.indexOf(t)){for(;h!==null;){var m=is(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=dn(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var D=1<<31-nt(x);w.entanglements[1]|=D,x&=~D}ni(m),(yt&6)===0&&(ju=zt()+500,Do(0))}}break;case 31:case 13:w=ra(m,2),w!==null&&zn(w,m,2),Ru(),Wf(m,2)}if(m=Jf(l),m===null&&Pf(t,n,l,Yu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Pf(t,n,l,null,a)}}function Jf(t){return t=rs(t),em(t)}var Yu=null;function em(t){if(Yu=null,t=qs(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=g(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Yu=t,null}function lv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case _s:return 2;case ws:return 8;case Y:case pe:return 32;case ke:return 268435456;default:return 32}default:return 32}}var tm=!1,gr=null,yr=null,vr=null,zo=new Map,Bo=new Map,xr=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ov(t,n){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":zo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(n.pointerId)}}function qo(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=is(n),n!==null&&rv(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function l2(t,n,a,l,h){switch(n){case"focusin":return gr=qo(gr,t,n,a,l,h),!0;case"dragenter":return yr=qo(yr,t,n,a,l,h),!0;case"mouseover":return vr=qo(vr,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return zo.set(m,qo(zo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Bo.set(m,qo(Bo.get(m)||null,t,n,a,l,h)),!0}return!1}function cv(t){var n=qs(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,Ts(t.priority,function(){av(a)});return}}else if(n===31){if(n=g(a),n!==null){t.blockedOn=n,Ts(t.priority,function(){av(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ku(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);eo=l,a.target.dispatchEvent(l),eo=null}else return n=is(a),n!==null&&rv(n),t.blockedOn=a,!1;n.shift()}return!0}function uv(t,n,a){Ku(t)&&a.delete(n)}function o2(){tm=!1,gr!==null&&Ku(gr)&&(gr=null),yr!==null&&Ku(yr)&&(yr=null),vr!==null&&Ku(vr)&&(vr=null),zo.forEach(uv),Bo.forEach(uv)}function $u(t,n){t.blockedOn===n&&(t.blockedOn=null,tm||(tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,o2)))}var Qu=null;function dv(t){Qu!==t&&(Qu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var m=is(a);m!==null&&(t.splice(n,3),n-=3,Zh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function gl(t){function n(D){return $u(D,t)}gr!==null&&$u(gr,t),yr!==null&&$u(yr,t),vr!==null&&$u(vr,t),zo.forEach(n),Bo.forEach(n);for(var a=0;a<xr.length;a++){var l=xr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)cv(a),a.blockedOn===null&&xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[hn]||null;if(typeof m=="function")x||dv(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[hn]||null)w=x.formAction;else if(em(h)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),dv(a)}}}function hv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}Xu.prototype.render=nm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Jn();sv(a,l,t,n,null,null)},Xu.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;sv(t.current,2,null,t,null,null),Ru(),n[zs]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Rc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<xr.length&&n!==0&&n<xr[a].priority;a++);xr.splice(a,0,t),a===0&&cv(t)}};var fv=e.version;if(fv!=="19.2.0")throw Error(r(527,fv,"19.2.0"));ae.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var c2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{Ne=Wu.inject(c2),Ve=Wu}catch{}}return Fo.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",h=b0,m=_0,x=w0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=tv(t,1,!1,null,null,a,l,null,h,m,x,hv),t[zs]=n.current,Lf(t),new nm(n)},Fo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=b0,x=_0,w=w0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=tv(t,1,!0,n,a??null,l,h,D,m,x,w,hv),n.context=nv(null),a=n.current,l=Jn(),l=Kr(l),h=ir(l),h.callback=null,rr(a,h,l),a=l,n.current.lanes=a,Gr(n,a),ni(n),t[zs]=n.current,Lf(t),new Xu(n)},Fo.version="19.2.0",Fo}var Ev;function b2(){if(Ev)return rm.exports;Ev=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rm.exports=x2(),rm.exports}var _2=b2();const w2=()=>{};var Tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},E2=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[s++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[s++],f=i[s++],g=i[s++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=i[s++],f=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,g=f?i[o+1]:0,y=o+2<i.length,v=y?i[o+2]:0,_=u>>2,S=(u&3)<<4|g>>4;let A=(g&15)<<2|v>>6,H=v&63;y||(H=64,f||(A=64)),r.push(s[_],s[S],s[A],s[H])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ab(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):E2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=s[i.charAt(o++)],g=o<i.length?s[i.charAt(o)]:0;++o;const v=o<i.length?s[i.charAt(o)]:64;++o;const S=o<i.length?s[i.charAt(o)]:64;if(++o,u==null||g==null||v==null||S==null)throw new T2;const A=u<<2|g>>4;if(r.push(A),v!==64){const H=g<<4&240|v>>2;if(r.push(H),S!==64){const ee=v<<6&192|S;r.push(ee)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class T2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S2=function(i){const e=ab(i);return lb.encodeByteArray(e,!0)},gd=function(i){return S2(i).replace(/\./g,"")},ob=function(i){try{return lb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=()=>N2().__FIREBASE_DEFAULTS__,j2=()=>{if(typeof process>"u"||typeof Tv>"u")return;const i=Tv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},C2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ob(i[1]);return e&&JSON.parse(e)},Vd=()=>{try{return w2()||A2()||j2()||C2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},cb=i=>Vd()?.emulatorHosts?.[i],R2=i=>{const e=cb(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},ub=()=>Vd()?.config,db=i=>Vd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[gd(JSON.stringify(s)),gd(JSON.stringify(f)),""].join(".")}const Wo={};function D2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wo))Wo[e]?i.emulator.push(e):i.prod.push(e);return i}function M2(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let Sv=!1;function fb(i,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||Wo[i]===e||Wo[i]||Sv)return;Wo[i]=e;function s(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=D2().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,H){A.setAttribute("width","24"),A.setAttribute("id",H),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function v(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Sv=!0,f()},A}function _(A,H){A.setAttribute("id",H),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=M2(r),H=s("text"),ee=document.getElementById(H)||document.createElement("span"),Z=s("learnmore"),P=document.getElementById(Z)||document.createElement("a"),ne=s("preprendIcon"),se=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ge=A.element;g(ge),_(P,Z);const de=v();y(se,ne),ge.append(se,ee,P,de),document.body.appendChild(ge)}u?(ee.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function V2(){const i=Vd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function U2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z2(){const i=jn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function B2(){return!V2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q2(){try{return typeof indexedDB=="object"}catch{return!1}}function H2(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="FirebaseError";class zi extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=F2,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?G2(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new zi(o,g,r)}}function G2(i,e){return i.replace(Y2,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Y2=/\{\$([^}]+)}/g;function K2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ea(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const u=i[o],f=e[o];if(Nv(u)&&Nv(f)){if(!Ea(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Nv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Go(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Yo(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function $2(i,e){const s=new Q2(i,e);return s.subscribe.bind(s)}class Q2{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");X2(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X2(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(i){return i&&i._delegate?i._delegate:i}class Ta{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new I2;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J2(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(i){return i===xa?void 0:i}function J2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new W2(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ct||(ct={}));const tE={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},nE=ct.INFO,sE={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},iE=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=sE[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class np{constructor(e){this.name=e,this._logLevel=nE,this._logHandler=iE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const rE=(i,e)=>e.some(s=>i instanceof s);let Av,jv;function aE(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lE(){return jv||(jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mb=new WeakMap,Am=new WeakMap,pb=new WeakMap,um=new WeakMap,sp=new WeakMap;function oE(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{s(jr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&mb.set(s,i)}).catch(()=>{}),sp.set(e,i),e}function cE(i){if(Am.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{s(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Am.set(i,e)}let jm={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return Am.get(i);if(e==="objectStoreNames")return i.objectStoreNames||pb.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return jr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function uE(i){jm=i(jm)}function dE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(dm(this),e,...s);return pb.set(r,e.sort?e.sort():[e]),jr(r)}:lE().includes(i)?function(...e){return i.apply(dm(this),e),jr(mb.get(this))}:function(...e){return jr(i.apply(dm(this),e))}}function hE(i){return typeof i=="function"?dE(i):(i instanceof IDBTransaction&&cE(i),rE(i,aE())?new Proxy(i,jm):i)}function jr(i){if(i instanceof IDBRequest)return oE(i);if(um.has(i))return um.get(i);const e=hE(i);return e!==i&&(um.set(i,e),sp.set(e,i)),e}const dm=i=>sp.get(i);function fE(i,e,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),g=jr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(jr(f.result),y.oldVersion,y.newVersion,jr(f.transaction),y)}),s&&f.addEventListener("blocked",y=>s(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const mE=["get","getKey","getAll","getAllKeys","count"],pE=["put","add","delete","clear"],hm=new Map;function Cv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=pE.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||mE.includes(s)))return;const u=async function(f,...g){const y=this.transaction(f,o?"readwrite":"readonly");let v=y.store;return r&&(v=v.index(g.shift())),(await Promise.all([v[s](...g),o&&y.done]))[0]};return hm.set(e,u),u}uE(i=>({...i,get:(e,s,r)=>Cv(e,s)||i.get(e,s,r),has:(e,s)=>!!Cv(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(yE(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function yE(i){return i.getComponent()?.type==="VERSION"}const Cm="@firebase/app",Rv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new np("@firebase/app"),vE="@firebase/app-compat",xE="@firebase/analytics-compat",bE="@firebase/analytics",_E="@firebase/app-check-compat",wE="@firebase/app-check",EE="@firebase/auth",TE="@firebase/auth-compat",SE="@firebase/database",NE="@firebase/data-connect",AE="@firebase/database-compat",jE="@firebase/functions",CE="@firebase/functions-compat",RE="@firebase/installations",IE="@firebase/installations-compat",kE="@firebase/messaging",DE="@firebase/messaging-compat",ME="@firebase/performance",OE="@firebase/performance-compat",VE="@firebase/remote-config",LE="@firebase/remote-config-compat",PE="@firebase/storage",UE="@firebase/storage-compat",zE="@firebase/firestore",BE="@firebase/ai",qE="@firebase/firestore-compat",HE="firebase",FE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="[DEFAULT]",GE={[Cm]:"fire-core",[vE]:"fire-core-compat",[bE]:"fire-analytics",[xE]:"fire-analytics-compat",[wE]:"fire-app-check",[_E]:"fire-app-check-compat",[EE]:"fire-auth",[TE]:"fire-auth-compat",[SE]:"fire-rtdb",[NE]:"fire-data-connect",[AE]:"fire-rtdb-compat",[jE]:"fire-fn",[CE]:"fire-fn-compat",[RE]:"fire-iid",[IE]:"fire-iid-compat",[kE]:"fire-fcm",[DE]:"fire-fcm-compat",[ME]:"fire-perf",[OE]:"fire-perf-compat",[VE]:"fire-rc",[LE]:"fire-rc-compat",[PE]:"fire-gcs",[UE]:"fire-gcs-compat",[zE]:"fire-fst",[qE]:"fire-fst-compat",[BE]:"fire-vertex","fire-js":"fire-js",[HE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,YE=new Map,Im=new Map;function Iv(i,e){try{i.container.addComponent(e)}catch(s){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function jl(i){const e=i.name;if(Im.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,i);for(const s of yd.values())Iv(s,i);for(const s of YE.values())Iv(s,i);return!0}function ip(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function gs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new mc("app","Firebase",KE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=FE;function gb(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:Rm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Cr.create("bad-app-name",{appName:String(o)});if(s||(s=ub()),!s)throw Cr.create("no-options");const u=yd.get(o);if(u){if(Ea(s,u.options)&&Ea(r,u.config))return u;throw Cr.create("duplicate-app",{appName:o})}const f=new eE(o);for(const y of Im.values())f.addComponent(y);const g=new $E(s,r,f);return yd.set(o,g),g}function yb(i=Rm){const e=yd.get(i);if(!e&&i===Rm&&ub())return gb();if(!e)throw Cr.create("no-app",{appName:i});return e}function Rr(i,e,s){let r=GE[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(f.join(" "));return}jl(new Ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebase-heartbeat-database",XE=1,sc="firebase-heartbeat-store";let fm=null;function vb(){return fm||(fm=fE(QE,XE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(sc)}catch(s){console.warn(s)}}}}).catch(i=>{throw Cr.create("idb-open",{originalErrorMessage:i.message})})),fm}async function WE(i){try{const s=(await vb()).transaction(sc),r=await s.objectStore(sc).get(xb(i));return await s.done,r}catch(e){if(e instanceof zi)Oi.warn(e.message);else{const s=Cr.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(s.message)}}}async function kv(i,e){try{const r=(await vb()).transaction(sc,"readwrite");await r.objectStore(sc).put(e,xb(i)),await r.done}catch(s){if(s instanceof zi)Oi.warn(s.message);else{const r=Cr.create("idb-set",{originalErrorMessage:s?.message});Oi.warn(r.message)}}}function xb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1024,JE=30;class eT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new nT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Dv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>JE){const o=sT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Oi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Dv(),{heartbeatsToSend:s,unsentEntries:r}=tT(this._heartbeatsCache.heartbeats),o=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Oi.warn(e),""}}}function Dv(){return new Date().toISOString().substring(0,10)}function tT(i,e=ZE){const s=[];let r=i.slice();for(const o of i){const u=s.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Mv(s)>e){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Mv(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class nT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q2()?H2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await WE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mv(i){return gd(JSON.stringify({version:2,heartbeats:i})).length}function sT(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(i){jl(new Ta("platform-logger",e=>new gE(e),"PRIVATE")),jl(new Ta("heartbeat",e=>new eT(e),"PRIVATE")),Rr(Cm,Rv,i),Rr(Cm,Rv,"esm2020"),Rr("fire-js","")}iT("");function bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rT=bb,_b=new mc("auth","Firebase",bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new np("@firebase/auth");function aT(i,...e){vd.logLevel<=ct.WARN&&vd.warn(`Auth (${Vl}): ${i}`,...e)}function ad(i,...e){vd.logLevel<=ct.ERROR&&vd.error(`Auth (${Vl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(i,...e){throw rp(i,...e)}function ri(i,...e){return rp(i,...e)}function wb(i,e,s){const r={...rT(),[e]:s};return new mc("auth","Firebase",r).create(e,{appName:i.name})}function Di(i){return wb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rp(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return _b.create(i,...e)}function qe(i,e,...s){if(!i)throw rp(e,...s)}function Ii(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ad(e),new Error(e)}function Vi(i,e){i||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return typeof self<"u"&&self.location?.href||""}function lT(){return Ov()==="http:"||Ov()==="https:"}function Ov(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lT()||P2()||"connection"in navigator)?navigator.onLine:!0}function cT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Vi(s>e,"Short delay should be less than long delay!"),this.isMobile=O2()||U2()}get(){return oT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(i,e){Vi(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hT=new gc(3e4,6e4);function Bi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function qi(i,e,s,r,o={}){return Tb(i,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=pc({key:i.config.apiKey,...f}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const v={method:e,headers:y,...u};return L2()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Ol(i.emulatorConfig.host)&&(v.credentials="include"),Eb.fetch()(await Sb(i,i.config.apiHost,s,g),v)})}async function Tb(i,e,s){i._canInitEmulator=!1;const r={...uT,...e};try{const o=new mT(i),u=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Zu(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Zu(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw Zu(i,"user-disabled",f);const _=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw wb(i,_,v);Ls(i,_)}}catch(o){if(o instanceof zi)throw o;Ls(i,"network-request-failed",{message:String(o)})}}async function yc(i,e,s,r,o={}){const u=await qi(i,e,s,r,o);return"mfaPendingCredential"in u&&Ls(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Sb(i,e,s,r){const o=`${e}${s}?${r}`,u=i,f=u.config.emulator?ap(i.config,o):`${i.config.apiScheme}://${o}`;return dT.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function fT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),hT.get())})}}function Zu(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=ri(i,e,r);return o.customData._tokenResponse=s,o}function Vv(i){return i!==void 0&&i.enterprise!==void 0}class pT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return fT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gT(i,e){return qi(i,"GET","/v2/recaptchaConfig",Bi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(i,e){return qi(i,"POST","/v1/accounts:delete",e)}async function xd(i,e){return qi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vT(i,e=!1){const s=Qt(i),r=await s.getIdToken(e),o=lp(r);qe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:Zo(mm(o.auth_time)),issuedAtTime:Zo(mm(o.iat)),expirationTime:Zo(mm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function mm(i){return Number(i)*1e3}function lp(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const o=ob(s);return o?JSON.parse(o):(ad("Failed to decode base64 JWT payload"),null)}catch(o){return ad("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Lv(i){const e=lp(i);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof zi&&xT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function xT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(i){const e=i.auth,s=await i.getIdToken(),r=await ic(i,xd(e,{idToken:s}));qe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?Nb(o.providerUserInfo):[],f=wT(i.providerData,u),g=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!f?.length,v=g?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(i,_)}async function _T(i){const e=Qt(i);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wT(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Nb(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(i,e){const s=await Tb(i,{},async()=>{const r=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Sb(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:r};return i.emulatorConfig&&Ol(i.emulatorConfig.host)&&(y.credentials="include"),Eb.fetch()(f,y)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function TT(i,e){return qi(i,"POST","/v2/accounts:revokeToken",Bi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const s=Lv(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:u}=await ET(e,s);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:u}=s,f=new El;return r&&(qe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(qe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(qe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(i,e){qe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Os{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new bT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ic(this,this.stsTokenManager.getToken(this.auth,e));return qe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return vT(this,e)}reload(){return _T(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await ic(this,yT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,u=s.phoneNumber??void 0,f=s.photoURL??void 0,g=s.tenantId??void 0,y=s._redirectEventId??void 0,v=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:H,providerData:ee,stsTokenManager:Z}=s;qe(S&&Z,e,"internal-error");const P=El.fromJSON(this.name,Z);qe(typeof S=="string",e,"internal-error"),_r(r,e.name),_r(o,e.name),qe(typeof A=="boolean",e,"internal-error"),qe(typeof H=="boolean",e,"internal-error"),_r(u,e.name),_r(f,e.name),_r(g,e.name),_r(y,e.name),_r(v,e.name),_r(_,e.name);const ne=new Os({uid:S,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:H,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:P,createdAt:v,lastLoginAt:_});return ee&&Array.isArray(ee)&&(ne.providerData=ee.map(se=>({...se}))),y&&(ne._redirectEventId=y),ne}static async _fromIdTokenResponse(e,s,r=!1){const o=new El;o.updateFromServerResponse(s);const u=new Os({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await bd(u),u}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];qe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Nb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,g=new El;g.updateFromIdToken(r);const y=new Os({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function ki(i){Vi(i instanceof Function,"Expected a class definition");let e=Pv.get(i);return e?(Vi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Pv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Ab.type="NONE";const Uv=Ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(i,e,s){return`firebase:${i}:${e}:${s}`}class Tl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ld(this.userKey,o.apiKey,u),this.fullPersistenceKey=ld("persistence",o.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await xd(this.auth,{idToken:e}).catch(()=>{});return s?Os._fromGetAccountInfoResponse(this.auth,s,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new Tl(ki(Uv),e,r);const o=(await Promise.all(s.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||ki(Uv);const f=ld(r,e.config.apiKey,e.name);let g=null;for(const v of s)try{const _=await v._get(f);if(_){let S;if(typeof _=="string"){const A=await xd(e,{idToken:_}).catch(()=>{});if(!A)break;S=await Os._fromGetAccountInfoResponse(e,A,_)}else S=Os._fromJSON(e,_);v!==u&&(g=S),u=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Tl(u,e,r):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(s.map(async v=>{if(v!==u)try{await v._remove(f)}catch{}})),new Tl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ib(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Db(e))return"Blackberry";if(Mb(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||Rb(e))&&!e.includes("edge/"))return"Chrome";if(kb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function jb(i=jn()){return/firefox\//i.test(i)}function Cb(i=jn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rb(i=jn()){return/crios\//i.test(i)}function Ib(i=jn()){return/iemobile/i.test(i)}function kb(i=jn()){return/android/i.test(i)}function Db(i=jn()){return/blackberry/i.test(i)}function Mb(i=jn()){return/webos/i.test(i)}function op(i=jn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function ST(i=jn()){return op(i)&&!!window.navigator?.standalone}function NT(){return z2()&&document.documentMode===10}function Ob(i=jn()){return op(i)||kb(i)||Mb(i)||Db(i)||/windows phone/i.test(i)||Ib(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(i,e=[]){let s;switch(i){case"Browser":s=zv(jn());break;case"Worker":s=`${zv(jn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Vl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(i,e={}){return qi(i,"GET","/v2/passwordPolicy",Bi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=6;class RT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??CT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bv(this),this.idTokenSubscription=new Bv(this),this.beforeStateQueue=new AT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=ki(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await xd(this,{idToken:e}),r=await Os._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&g?.user&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(Di(this));const s=e?Qt(e):null;return s&&qe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jT(this),s=new RT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await TT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&ki(e)||this._popupRedirectResolver;qe(s,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[ki(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof s=="function"){const y=e.addObserver(s,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(s);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Br(i){return Qt(i)}class Bv{constructor(e){this.auth=e,this.observer=null,this.addObserver=$2(s=>this.observer=s)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kT(i){Ld=i}function Lb(i){return Ld.loadJS(i)}function DT(){return Ld.recaptchaEnterpriseScript}function MT(){return Ld.gapiScript}function OT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class VT{constructor(){this.enterprise=new LT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class LT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const PT="recaptcha-enterprise",Pb="NO_RECAPTCHA";class UT{constructor(e){this.type=PT,this.auth=Br(e)}async verify(e="verify",s=!1){async function r(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{gT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const v=new pT(y);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,f(v.siteKey)}}).catch(y=>{g(y)})})}function o(u,f,g){const y=window.grecaptcha;Vv(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(v=>{f(v)}).catch(()=>{f(Pb)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VT().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(g=>{if(!s&&Vv(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=DT();y.length!==0&&(y+=g),Lb(y).then(()=>{o(g,u,f)}).catch(v=>{f(v)})}}).catch(g=>{f(g)})})}}async function qv(i,e,s,r=!1,o=!1){const u=new UT(i);let f;if(o)f=Pb;else try{f=await u.verify(s)}catch{f=await u.verify(s,!0)}const g={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,v=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function _d(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await qv(i,e,s,s==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await qv(i,e,s,s==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(i,e){const s=ip(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),u=s.getOptions();if(Ea(u,e??{}))return o;Ls(o,"already-initialized")}return s.initialize({options:e})}function BT(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(ki);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function qT(i,e,s){const r=Br(i);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Ub(e),{host:f,port:g}=HT(e),y=g===null?"":`:${g}`,v={url:`${u}//${f}${y}/`},_=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(Ea(v,r.config.emulator)&&Ea(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Ol(f)?(hb(`${u}//${f}${y}`),fb("Auth",!0)):FT()}function Ub(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function HT(i){const e=Ub(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Hv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Hv(f)}}}function Hv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function FT(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,s){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function GT(i,e){return qi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(i,e){return yc(i,"POST","/v1/accounts:signInWithPassword",Bi(i,e))}async function KT(i,e){return qi(i,"POST","/v1/accounts:sendOobCode",Bi(i,e))}async function $T(i,e){return KT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(i,e){return yc(i,"POST","/v1/accounts:signInWithEmailLink",Bi(i,e))}async function XT(i,e){return yc(i,"POST","/v1/accounts:signInWithEmailLink",Bi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends cp{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new rc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new rc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,s,"signInWithPassword",YT);case"emailLink":return QT(e,{email:this._email,oobCode:this._password});default:Ls(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,r,"signUpPassword",GT);case"emailLink":return XT(e,{idToken:s,email:this._email,oobCode:this._password});default:Ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(i,e){return yc(i,"POST","/v1/accounts:signInWithIdp",Bi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="http://localhost";class Sa extends cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Ls("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=s;if(!r||!o)return null;const f=new Sa(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return Sl(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,Sl(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Sl(e,s)}buildRequest(){const e={requestUri:WT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=pc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JT(i){const e=Go(Yo(i)).link,s=e?Go(Yo(e)).deep_link_id:null,r=Go(Yo(i)).deep_link_id;return(r?Go(Yo(r)).link:null)||r||s||e||i}class up{constructor(e){const s=Go(Yo(e)),r=s.apiKey??null,o=s.oobCode??null,u=ZT(s.mode??null);qe(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=JT(e);try{return new up(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(e,s){return rc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=up.parseLink(s);return qe(r,"argument-error"),rc._fromEmailAndCode(e,r.code,r.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends zb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends vc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Sa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Tr.credential(s,r)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends vc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends vc{constructor(){super("twitter.com")}static credential(e,s){return Sa._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Nr.credential(s,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i,e){return yc(i,"POST","/v1/accounts:signUp",Bi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const u=await Os._fromIdTokenResponse(e,r,o),f=Fv(r);return new Na({user:u,providerId:f,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=Fv(r);return new Na({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function Fv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends zi{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new wd(e,s,r,o)}}function Bb(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(i,u,e,r):u})}async function tS(i,e,s=!1){const r=await ic(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return Na._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(i,e,s=!1){const{auth:r}=i;if(gs(r.app))return Promise.reject(Di(r));const o="reauthenticate";try{const u=await ic(i,Bb(r,o,e,i),s);qe(u.idToken,r,"internal-error");const f=lp(u.idToken);qe(f,r,"internal-error");const{sub:g}=f;return qe(i.uid===g,r,"user-mismatch"),Na._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ls(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(i,e,s=!1){if(gs(i.app))return Promise.reject(Di(i));const r="signIn",o=await Bb(i,r,e),u=await Na._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(u.user),u}async function sS(i,e){return qb(Br(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(i){const e=Br(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iS(i,e,s){const r=Br(i);await _d(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$T)}async function rS(i,e,s){if(gs(i.app))return Promise.reject(Di(i));const r=Br(i),f=await _d(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Hb(i),y}),g=await Na._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function aS(i,e,s){return gs(i.app)?Promise.reject(Di(i)):sS(Qt(i),Ll.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Hb(i),r})}function lS(i,e,s,r){return Qt(i).onIdTokenChanged(e,s,r)}function oS(i,e,s){return Qt(i).beforeAuthStateChanged(e,s)}function cS(i,e,s,r){return Qt(i).onAuthStateChanged(e,s,r)}function uS(i){return Qt(i).signOut()}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1e3,hS=10;class Gb extends Fb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ob(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!s&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);NT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hS):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gb.type="LOCAL";const fS=Gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Fb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Yb.type="SESSION";const Kb=Yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new Pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:u}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async v=>v(s.origin,u)),y=await mS(g);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const v=dp("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(A.data.response);break;default:clearTimeout(_),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:v,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function gS(i){ai().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function yS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){return navigator?.serviceWorker?.controller||null}function xS(){return $b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",bS=1,Td="firebaseLocalStorage",Xb="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ud(i,e){return i.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function _S(){const i=indexedDB.deleteDatabase(Qb);return new xc(i).toPromise()}function Mm(){const i=indexedDB.open(Qb,bS);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Td,{keyPath:Xb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Td)?e(r):(r.close(),await _S(),e(await Mm()))})})}async function Gv(i,e,s){const r=Ud(i,!0).put({[Xb]:e,value:s});return new xc(r).toPromise()}async function wS(i,e){const s=Ud(i,!1).get(e),r=await new xc(s).toPromise();return r===void 0?null:r.value}function Yv(i,e){const s=Ud(i,!0).delete(e);return new xc(s).toPromise()}const ES=800,TS=3;class Wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>TS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(xS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new pS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await Gv(e,Ed,"1"),await Yv(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gv(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>wS(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ud(o,!1).getAll();return new xc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wb.type="LOCAL";const SS=Wb;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(i,e){return e?ki(e):(qe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Sl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function AS(i){return qb(i.auth,new hp(i),i.bypassAuthState)}function jS(i){const{auth:e,user:s}=i;return qe(s,e,"internal-error"),nS(s,new hp(i),i.bypassAuthState)}async function CS(i){const{auth:e,user:s}=i;return qe(s,e,"internal-error"),tS(s,new hp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,s,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:s,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AS;case"linkViaPopup":case"linkViaRedirect":return CS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:Ls(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new gc(2e3,1e4);class wl extends Zb{constructor(e,s,r,o,u){super(e,s,o,u),this.provider=r,this.authWindow=null,this.pollId=null,wl.currentPopupAction&&wl.currentPopupAction.cancel(),wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}wl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",od=new Map;class kS extends Zb{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const r=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(i,e){const s=VS(e),r=OS(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function MS(i,e){od.set(i._key(),e)}function OS(i){return ki(i._redirectPersistence)}function VS(i){return ld(IS,i.config.apiKey,i.name)}async function LS(i,e,s=!1){if(gs(i.app))return Promise.reject(Di(i));const r=Br(i),o=NS(r,e),f=await new kS(r,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=600*1e3;class US{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Jb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError(ri(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kv(e))}saveEventToCache(e){this.cachedEventUids.add(Kv(e)),this.lastProcessedEventTime=Date.now()}}function Kv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Jb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function zS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(i,e={}){return qi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;async function FS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await BS(i);for(const s of e)try{if(GS(s))return}catch{}Ls(i,"unauthorized-domain")}function GS(i){const e=km(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===r}if(!HS.test(s))return!1;if(qS.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new gc(3e4,6e4);function $v(){const i=ai().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function KS(i){return new Promise((e,s)=>{function r(){$v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$v(),s(ri(i,"network-request-failed"))},timeout:YS.get()})}if(ai().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ai().gapi?.load)r();else{const o=OT("iframefcb");return ai()[o]=()=>{gapi.load?r():s(ri(i,"network-request-failed"))},Lb(`${MT()}?onload=${o}`).catch(u=>s(u))}}).catch(e=>{throw cd=null,e})}let cd=null;function $S(i){return cd=cd||KS(i),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new gc(5e3,15e3),XS="__/auth/iframe",WS="emulator/auth/iframe",ZS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(i){const e=i.config;qe(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?ap(e,WS):`https://${i.config.authDomain}/${XS}`,r={apiKey:e.apiKey,appName:i.name,v:Vl},o=JS.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${s}?${pc(r).slice(1)}`}async function tN(i){const e=await $S(i),s=ai().gapi;return qe(s,i,"internal-error"),e.open({where:document.body,url:eN(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZS,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ri(i,"network-request-failed"),g=ai().setTimeout(()=>{u(f)},QS.get());function y(){ai().clearTimeout(g),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sN=500,iN=600,rN="_blank",aN="http://localhost";class Qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(i,e,s,r=sN,o=iN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y={...nN,width:r.toString(),height:o.toString(),top:u,left:f},v=jn().toLowerCase();s&&(g=Rb(v)?rN:s),jb(v)&&(e=e||aN,y.scrollbars="yes");const _=Object.entries(y).reduce((A,[H,ee])=>`${A}${H}=${ee},`,"");if(ST(v)&&g!=="_self")return oN(e||"",g),new Qv(null);const S=window.open(e||"",g,_);qe(S,i,"popup-blocked");try{S.focus()}catch{}return new Qv(S)}function oN(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",uN="emulator/auth/handler",dN=encodeURIComponent("fac");async function Xv(i,e,s,r,o,u){qe(i.config.authDomain,i,"auth-domain-config-required"),qe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Vl,eventId:o};if(e instanceof zb){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",K2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))f[_]=S}if(e instanceof vc){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const g=f;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const y=await i._getAppCheckToken(),v=y?`#${dN}=${encodeURIComponent(y)}`:"";return`${hN(i)}?${pc(g).slice(1)}${v}`}function hN({config:i}){return i.emulator?ap(i,uN):`https://${i.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kb,this._completeRedirectFn=LS,this._overrideRedirectResult=MS}async _openPopup(e,s,r,o){Vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Xv(e,s,r,km(),o);return lN(e,u,dp())}async _openRedirect(e,s,r,o){await this._originValidation(e);const u=await Xv(e,s,r,km(),o);return gS(u),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:u}=this.eventManagers[s];return o?Promise.resolve(o):(Vi(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await tN(e),r=new US(e);return s.register("authEvent",o=>(qe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(pm,{type:pm},o=>{const u=o?.[0]?.[pm];u!==void 0&&s(!!u),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=FS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Ob()||Cb()||op()}}const mN=fN;var Wv="@firebase/auth",Zv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(i){jl(new Ta("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;qe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vb(i)},v=new IT(r,o,u,y);return BT(v,s),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),jl(new Ta("auth-internal",e=>{const s=Br(e.getProvider("auth").getImmediate());return(r=>new pN(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(Wv,Zv,gN(i)),Rr(Wv,Zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=300,xN=db("authIdTokenMaxAge")||vN;let Jv=null;const bN=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>xN)return;const o=s?.token;Jv!==o&&(Jv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _N(i=yb()){const e=ip(i,"auth");if(e.isInitialized())return e.getImmediate();const s=zT(i,{popupRedirectResolver:mN,persistence:[SS,fS,Kb]}),r=db("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=bN(u.toString());oS(s,f,()=>f(s.currentUser)),lS(s,g=>f(g))}}const o=cb("auth");return o&&qT(s,`http://${o}`),s}function wN(){return document.getElementsByTagName("head")?.[0]??document}kT({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const u=ri("internal-error");u.customData=o,s(u)},r.type="text/javascript",r.charset="UTF-8",wN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");var EN="firebase",TN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(EN,TN,"app");var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,e_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,N){function j(){}j.prototype=N.prototype,C.F=N.prototype,C.prototype=new j,C.prototype.constructor=C,C.D=function(k,R,V){for(var I=Array(arguments.length-2),me=2;me<arguments.length;me++)I[me-2]=arguments[me];return N.prototype[R].apply(k,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,N,j){j||(j=0);const k=Array(16);if(typeof N=="string")for(var R=0;R<16;++R)k[R]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(R=0;R<16;++R)k[R]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=C.g[0],j=C.g[1],R=C.g[2];let V=C.g[3],I;I=N+(V^j&(R^V))+k[0]+3614090360&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[1]+3905402710&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[2]+606105819&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[3]+3250441966&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[4]+4118548399&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[5]+1200080426&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[6]+2821735955&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[7]+4249261313&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[8]+1770035416&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[9]+2336552879&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[10]+4294925233&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[11]+2304563134&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[12]+1804603682&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[13]+4254626195&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[14]+2792965006&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[15]+1236535329&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(R^V&(j^R))+k[1]+4129170786&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[6]+3225465664&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[11]+643717713&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[0]+3921069994&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[5]+3593408605&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[10]+38016083&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[15]+3634488961&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[4]+3889429448&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[9]+568446438&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[14]+3275163606&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[3]+4107603335&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[8]+1163531501&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[13]+2850285829&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[2]+4243563512&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[7]+1735328473&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[12]+2368359562&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(j^R^V)+k[5]+4294588738&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[8]+2272392833&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[11]+1839030562&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[14]+4259657740&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[1]+2763975236&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[4]+1272893353&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[7]+4139469664&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[10]+3200236656&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[13]+681279174&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[0]+3936430074&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[3]+3572445317&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[6]+76029189&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[9]+3654602809&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[12]+3873151461&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[15]+530742520&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[2]+3299628645&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(R^(j|~V))+k[0]+4096336452&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[7]+1126891415&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[14]+2878612391&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[5]+4237533241&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[12]+1700485571&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[3]+2399980690&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[10]+4293915773&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[1]+2240044497&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[8]+1873313359&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[15]+4264355552&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[6]+2734768916&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[13]+1309151649&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[4]+4149444226&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[11]+3174756917&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[2]+718787259&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const j=N-this.blockSize,k=this.C;let R=this.h,V=0;for(;V<N;){if(R==0)for(;V<=j;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<N;)if(k[R++]=C.charCodeAt(V++),R==this.blockSize){o(this,k),R=0;break}}else for(;V<N;)if(k[R++]=C[V++],R==this.blockSize){o(this,k),R=0;break}}this.h=R,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var j=C.length-8;j<C.length;++j)C[j]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)C[N++]=this.g[j]>>>k&255;return C};function u(C,N){var j=g;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=N(C)}function f(C,N){this.h=N;const j=[];let k=!0;for(let R=C.length-1;R>=0;R--){const V=C[R]|0;k&&V==N||(j[R]=V,k=!1)}this.g=j}var g={};function y(C){return-128<=C&&C<128?u(C,function(N){return new f([N|0],N<0?-1:0)}):new f([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return S;if(C<0)return P(v(-C));const N=[];let j=1;for(let k=0;C>=j;k++)N[k]=C/j|0,j*=4294967296;return new f(N,0)}function _(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return P(_(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=v(Math.pow(N,8));let k=S;for(let V=0;V<C.length;V+=8){var R=Math.min(8,C.length-V);const I=parseInt(C.substring(V,V+R),N);R<8?(R=v(Math.pow(N,R)),k=k.j(R).add(v(I))):(k=k.j(j),k=k.add(v(I)))}return k}var S=y(0),A=y(1),H=y(16777216);i=f.prototype,i.m=function(){if(Z(this))return-P(this).m();let C=0,N=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);C+=(k>=0?k:4294967296+k)*N,N*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(ee(this))return"0";if(Z(this))return"-"+P(this).toString(C);const N=v(Math.pow(C,6));var j=this;let k="";for(;;){const R=de(j,N).g;j=ne(j,R.j(N));let V=((j.g.length>0?j.g[0]:j.h)>>>0).toString(C);if(j=R,ee(j))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function ee(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function Z(C){return C.h==-1}i.l=function(C){return C=ne(this,C),Z(C)?-1:ee(C)?0:1};function P(C){const N=C.g.length,j=[];for(let k=0;k<N;k++)j[k]=~C.g[k];return new f(j,~C.h).add(A)}i.abs=function(){return Z(this)?P(this):this},i.add=function(C){const N=Math.max(this.g.length,C.g.length),j=[];let k=0;for(let R=0;R<=N;R++){let V=k+(this.i(R)&65535)+(C.i(R)&65535),I=(V>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);k=I>>>16,V&=65535,I&=65535,j[R]=I<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function ne(C,N){return C.add(P(N))}i.j=function(C){if(ee(this)||ee(C))return S;if(Z(this))return Z(C)?P(this).j(P(C)):P(P(this).j(C));if(Z(C))return P(this.j(P(C)));if(this.l(H)<0&&C.l(H)<0)return v(this.m()*C.m());const N=this.g.length+C.g.length,j=[];for(var k=0;k<2*N;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let R=0;R<C.g.length;R++){const V=this.i(k)>>>16,I=this.i(k)&65535,me=C.i(R)>>>16,ze=C.i(R)&65535;j[2*k+2*R]+=I*ze,se(j,2*k+2*R),j[2*k+2*R+1]+=V*ze,se(j,2*k+2*R+1),j[2*k+2*R+1]+=I*me,se(j,2*k+2*R+1),j[2*k+2*R+2]+=V*me,se(j,2*k+2*R+2)}for(C=0;C<N;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=N;C<2*N;C++)j[C]=0;return new f(j,0)};function se(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function ge(C,N){this.g=C,this.h=N}function de(C,N){if(ee(N))throw Error("division by zero");if(ee(C))return new ge(S,S);if(Z(C))return N=de(P(C),N),new ge(P(N.g),P(N.h));if(Z(N))return N=de(C,P(N)),new ge(P(N.g),N.h);if(C.g.length>30){if(Z(C)||Z(N))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=N;k.l(C)<=0;)j=be(j),k=be(k);var R=he(j,1),V=he(k,1);for(k=he(k,2),j=he(j,2);!ee(k);){var I=V.add(k);I.l(C)<=0&&(R=R.add(j),V=I),k=he(k,1),j=he(j,1)}return N=ne(C,R.j(N)),new ge(R,N)}for(R=S;C.l(N)>=0;){for(j=Math.max(1,Math.floor(C.m()/N.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=v(j),I=V.j(N);Z(I)||I.l(C)>0;)j-=k,V=v(j),I=V.j(N);ee(V)&&(V=A),R=R.add(V),C=ne(C,I)}return new ge(R,C)}i.B=function(C){return de(this,C).h},i.and=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)&C.i(k);return new f(j,this.h&C.h)},i.or=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)|C.i(k);return new f(j,this.h|C.h)},i.xor=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)^C.i(k);return new f(j,this.h^C.h)};function be(C){const N=C.g.length+1,j=[];for(let k=0;k<N;k++)j[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(j,C.h)}function he(C,N){const j=N>>5;N%=32;const k=C.g.length-j,R=[];for(let V=0;V<k;V++)R[V]=N>0?C.i(V+j)>>>N|C.i(V+j+1)<<32-N:C.i(V+j);return new f(R,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,e_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=_,Ir=f}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t_,Ko,n_,ud,Om,s_,i_,r_;(function(){var i,e=Object.defineProperty;function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var p=0;p<d.length;++p){var b=d[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(d,p){if(p)e:{var b=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var z=d[T];if(!(z in b))break e;b=b[z]}d=d[d.length-1],T=b[d],p=p(T),p!=T&&p!=null&&e(b,d,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(p){var b=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&b.push([T,p[T]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function y(d,p,b){return d.call.apply(d.bind,arguments)}function v(d,p,b){return v=y,v.apply(null,arguments)}function _(d,p){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function S(d,p){function b(){}b.prototype=p.prototype,d.Z=p.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(T,z,Q){for(var ve=Array(arguments.length-2),We=2;We<arguments.length;We++)ve[We-2]=arguments[We];return p.prototype[z].apply(T,ve)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function H(d){const p=d.length;if(p>0){const b=Array(p);for(let T=0;T<p;T++)b[T]=d[T];return b}return[]}function ee(d,p){for(let T=1;T<arguments.length;T++){const z=arguments[T];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=d.length||0;const Q=z.length||0;d.length=b+Q;for(let ve=0;ve<Q;ve++)d[b+ve]=z[ve]}else d.push(z)}}class Z{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(d){f.setTimeout(()=>{throw d},0)}function ne(){var d=C;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class se{constructor(){this.h=this.g=null}add(p,b){const T=ge.get();T.set(p,b),this.h?this.h.next=T:this.g=T,this.h=T}}var ge=new Z(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let be,he=!1,C=new se,N=()=>{const d=Promise.resolve(void 0);be=()=>{d.then(j)}};function j(){for(var d;d=ne();){try{d.h.call(d.g)}catch(b){P(b)}var p=ge;p.j(d),p.h<100&&(p.h++,d.next=p.g,p.g=d)}he=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,p),f.removeEventListener("test",b,p)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function me(d,p){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,p)}S(me,R),me.prototype.init=function(d,p){const b=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget,p||(b=="mouseover"?p=d.fromElement:b=="mouseout"&&(p=d.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),K=0;function ae(d,p,b,T,z){this.listener=d,this.proxy=null,this.src=p,this.type=b,this.capture=!!T,this.ha=z,this.key=++K,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function De(d,p,b){for(const T in d)p.call(b,d[T],T,d)}function Ge(d,p){for(const b in d)p.call(void 0,d[b],b,d)}function E(d){const p={};for(const b in d)p[b]=d[b];return p}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(d,p){let b,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(b in T)d[b]=T[b];for(let Q=0;Q<L.length;Q++)b=L[Q],Object.prototype.hasOwnProperty.call(T,b)&&(d[b]=T[b])}}function M(d){this.src=d,this.g={},this.h=0}M.prototype.add=function(d,p,b,T,z){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const ve=fe(d,p,T,z);return ve>-1?(p=d[ve],b||(p.fa=!1)):(p=new ae(p,this.src,Q,!!T,z),p.fa=b,d.push(p)),p};function te(d,p){const b=p.type;if(b in d.g){var T=d.g[b],z=Array.prototype.indexOf.call(T,p,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(T,z,1),Q&&(xe(p),d.g[b].length==0&&(delete d.g[b],d.h--))}}function fe(d,p,b,T){for(let z=0;z<d.length;++z){const Q=d[z];if(!Q.da&&Q.listener==p&&Q.capture==!!b&&Q.ha==T)return z}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Be={};function Le(d,p,b,T,z){if(Array.isArray(p)){for(let Q=0;Q<p.length;Q++)Le(d,p[Q],b,T,z);return null}return b=Te(b),d&&d[ze]?d.J(p,b,g(T)?!!T.capture:!1,z):W(d,p,b,!1,T,z)}function W(d,p,b,T,z,Q){if(!p)throw Error("Invalid event type");const ve=g(z)?!!z.capture:!!z;let We=Ce(d);if(We||(d[_e]=We=new M(d)),b=We.add(p,b,T,ve,Q),b.proxy)return b;if(T=we(),b.proxy=T,T.src=d,T.listener=b,d.addEventListener)V||(z=ve),z===void 0&&(z=!1),d.addEventListener(p.toString(),T,z);else if(d.attachEvent)d.attachEvent(ye(p.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function we(){function d(b){return p.call(d.src,d.listener,b)}const p=le;return d}function Ee(d,p,b,T,z){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)Ee(d,p[Q],b,T,z);else T=g(T)?!!T.capture:!!T,b=Te(b),d&&d[ze]?(d=d.i,Q=String(p).toString(),Q in d.g&&(p=d.g[Q],b=fe(p,b,T,z),b>-1&&(xe(p[b]),Array.prototype.splice.call(p,b,1),p.length==0&&(delete d.g[Q],d.h--)))):d&&(d=Ce(d))&&(p=d.g[p.toString()],d=-1,p&&(d=fe(p,b,T,z)),(b=d>-1?p[d]:null)&&G(b))}function G(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[ze])te(p.i,d);else{var b=d.type,T=d.proxy;p.removeEventListener?p.removeEventListener(b,T,d.capture):p.detachEvent?p.detachEvent(ye(b),T):p.addListener&&p.removeListener&&p.removeListener(T),(b=Ce(p))?(te(b,d),b.h==0&&(b.src=null,p[_e]=null)):xe(d)}}}function ye(d){return d in Be?Be[d]:Be[d]="on"+d}function le(d,p){if(d.da)d=!0;else{p=new me(p,this);const b=d.listener,T=d.ha||d.src;d.fa&&G(d),d=b.call(T,p)}return d}function Ce(d){return d=d[_e],d instanceof M?d:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Te(d){return typeof d=="function"?d:(d[Qe]||(d[Qe]=function(p){return d.handleEvent(p)}),d[Qe])}function tt(){k.call(this),this.i=new M(this),this.M=this,this.G=null}S(tt,k),tt.prototype[ze]=!0,tt.prototype.removeEventListener=function(d,p,b,T){Ee(this,d,p,b,T)};function rt(d,p){var b,T=d.G;if(T)for(b=[];T;T=T.G)b.push(T);if(d=d.M,T=p.type||p,typeof p=="string")p=new R(p,d);else if(p instanceof R)p.target=p.target||d;else{var z=p;p=new R(T,d),$(p,z)}z=!0;let Q,ve;if(b)for(ve=b.length-1;ve>=0;ve--)Q=p.g=b[ve],z=Vt(Q,T,!0,p)&&z;if(Q=p.g=d,z=Vt(Q,T,!0,p)&&z,z=Vt(Q,T,!1,p)&&z,b)for(ve=0;ve<b.length;ve++)Q=p.g=b[ve],z=Vt(Q,T,!1,p)&&z}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var d=this.i;for(const p in d.g){const b=d.g[p];for(let T=0;T<b.length;T++)xe(b[T]);delete d.g[p],d.h--}}this.G=null},tt.prototype.J=function(d,p,b,T){return this.i.add(String(d),p,!1,b,T)},tt.prototype.K=function(d,p,b,T){return this.i.add(String(d),p,!0,b,T)};function Vt(d,p,b,T){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();let z=!0;for(let Q=0;Q<p.length;++Q){const ve=p[Q];if(ve&&!ve.da&&ve.capture==b){const We=ve.listener,Ht=ve.ha||ve.src;ve.fa&&te(d.i,ve),z=We.call(Ht,T)!==!1&&z}}return z&&!T.defaultPrevented}function Hi(d,p){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=v(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(d,p||0)}function Cn(d){d.g=Hi(()=>{d.g=null,d.i&&(d.i=!1,Cn(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class zt extends k{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Cn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(d){k.call(this),this.h=d,this.g={}}S(bs,k);var _s=[];function ws(d){De(d.g,function(p,b){this.g.hasOwnProperty(b)&&G(p)},d),d.g={}}bs.prototype.N=function(){bs.Z.N.call(this),ws(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Y=f.JSON.stringify,pe=f.JSON.parse,ke=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Je(){}function Ue(){}var Ne={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ve(){R.call(this,"d")}S(Ve,R);function Xe(){R.call(this,"c")}S(Xe,R);var nt={},Es=null;function Hn(){return Es=Es||new tt}nt.Ia="serverreachability";function at(d){R.call(this,nt.Ia,d)}S(at,R);function Nt(d){const p=Hn();rt(p,new at(p))}nt.STAT_EVENT="statevent";function Rt(d,p){R.call(this,nt.STAT_EVENT,d),this.stat=p}S(Rt,R);function At(d){const p=Hn();rt(p,new Rt(p,d))}nt.Ja="timingevent";function dn(d,p){R.call(this,nt.Ja,d),this.size=p}S(dn,R);function Xt(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},p)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function ah(d,p,b,T,z,Q){d.info(function(){if(d.g)if(Q){var ve="",We=Q.split("&");for(let gt=0;gt<We.length;gt++){var Ht=We[gt].split("=");if(Ht.length>1){const Lt=Ht[0];Ht=Ht[1];const ls=Lt.split("_");ve=ls.length>=2&&ls[1]=="type"?ve+(Lt+"="+Ht+"&"):ve+(Lt+"=redacted&")}}}else ve=null;else ve=Q;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+p+`
`+b+`
`+ve})}function Cc(d,p,b,T,z,Q,ve){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+p+`
`+b+`
`+Q+" "+ve})}function Us(d,p,b,T){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+lh(d,b)+(T?" "+T:"")})}function Gr(d,p){d.info(function(){return"TIMEOUT: "+p})}Fn.prototype.info=function(){};function lh(d,p){if(!d.g)return p;if(!p)return null;try{const Q=JSON.parse(p);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var b=Q[d];if(!(b.length<2)){var T=b[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ve=1;ve<T.length;ve++)T[ve]=""}}}}return Y(Q)}catch{return p}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function Kr(){}S(Kr,Je),Kr.prototype.g=function(){return new XMLHttpRequest},Fl=new Kr;function hi(d){return encodeURIComponent(String(d))}function Rc(d){var p=1;d=d.split(":");const b=[];for(;p>0&&d.length;)b.push(d.shift()),p--;return d.length&&b.push(d.join(":")),b}function Ts(d,p,b,T){this.j=d,this.i=p,this.l=b,this.S=T||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}var Wt={},hn={};function zs(d,p,b){d.M=1,d.A=$r(Jt(p)),d.u=b,d.R=!0,Ia(d,null)}function Ia(d,p){d.F=Date.now(),Bs(d),d.B=Jt(d.A);var b=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),Oa(b.i,"t",T),d.C=0,b=d.j.L,d.h=new Ss,d.g=Gc(d.j,b?p:null,!d.u),d.P>0&&(d.O=new zt(v(d.Y,d,d.g),d.P)),p=d.V,b=d.g,T=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(_s[0]=z.toString()),z=_s);for(let Q=0;Q<z.length;Q++){const ve=Le(b,z[Q],T||p.handleEvent,!1,p.h||p);if(!ve)break;p.g[ve.key]=ve}p=d.J?E(d.J):{},d.u?(d.v||(d.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,p)):(d.v="GET",d.g.ea(d.B,d.v,null,p)),Nt(),ah(d.i,d.v,d.B,d.l,d.S,d.u)}Ts.prototype.ba=function(d){d=d.target;const p=this.O;p&&js(d)==3?p.j():this.Y(d)},Ts.prototype.Y=function(d){try{if(d==this.g)e:{const We=js(this.g),Ht=this.g.ya(),gt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||We!=4||Ht==7||(Ht==8||gt<=0?Nt(3):Nt(2)),qs(this);var p=this.g.ca();this.X=p;var b=oh(this);if(this.o=p==200,Cc(this.i,this.v,this.B,this.l,this.S,We,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var Q=T;break t}}Q=null}if(d=Q)Us(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hs(this,d);else{this.o=!1,this.m=3,At(12),Gn(this),is(this);break e}}if(this.R){d=!0;let Lt;for(;!this.K&&this.C<b.length;)if(Lt=kc(this,b),Lt==hn){We==4&&(this.m=4,At(14),d=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Wt){this.m=4,At(15),Us(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Us(this.i,this.l,Lt,null),Hs(this,Lt);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||b.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)Us(this.i,this.l,b,"[Invalid Chunked Response]"),Gn(this),is(this);else if(b.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ro(ve),ve.P=!0,At(11))}}else Us(this.i,this.l,b,null),Hs(this,b);We==4&&Gn(this),this.o&&!this.K&&(We==4?Bc(this.j,this):(this.o=!1,Bs(this)))}else mi(this.g),p==400&&b.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Gn(this),is(this)}}}catch{}finally{}};function oh(d){if(!Ic(d))return d.g.la();const p=gn(d.g);if(p==="")return"";let b="";const T=p.length,z=js(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Gn(d),is(d),"";d.h.i=new f.TextDecoder}for(let Q=0;Q<T;Q++)d.h.h=!0,b+=d.h.i.decode(p[Q],{stream:!(z&&Q==T-1)});return p.length=0,d.h.g+=b,d.C=0,d.h.g}function Ic(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function kc(d,p){var b=d.C,T=p.indexOf(`
`,b);return T==-1?hn:(b=Number(p.substring(b,T)),isNaN(b)?Wt:(T+=1,T+b>p.length?hn:(p=p.slice(T,T+b),d.C=T+b,p)))}Ts.prototype.cancel=function(){this.K=!0,Gn(this)};function Bs(d){d.T=Date.now()+d.H,ka(d,d.H)}function ka(d,p){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Xt(v(d.aa,d),p)}function qs(d){d.D&&(f.clearTimeout(d.D),d.D=null)}Ts.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Gr(this.i,this.B),this.M!=2&&(Nt(),At(17)),Gn(this),this.m=2,is(this)):ka(this,this.T-d)};function is(d){d.j.I==0||d.K||Bc(d.j,d)}function Gn(d){qs(d);var p=d.O;p&&typeof p.dispose=="function"&&p.dispose(),d.O=null,ws(d.V),d.g&&(p=d.g,d.g=null,p.abort(),p.dispose())}function Hs(d,p){try{var b=d.j;if(b.I!=0&&(b.g==d||Gs(b.h,d))){if(!d.L&&Gs(b.h,d)&&b.I==3){try{var T=b.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)za(b),Wi(b);else break e;ta(b),At(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Xt(v(b.Va,b),6e3));Fs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ws(b,11)}else if((d.L||b.g==d)&&za(b),!I(p))for(z=b.Ba.g.parse(p),p=0;p<z.length;p++){let gt=z[p];const Lt=gt[0];if(!(Lt<=b.K))if(b.K=Lt,gt=gt[1],b.I==2)if(gt[0]=="c"){b.M=gt[1],b.ba=gt[2];const ls=gt[3];ls!=null&&(b.ka=ls,b.j.info("VER="+b.ka));const Zs=gt[4];Zs!=null&&(b.za=Zs,b.j.info("SVER="+b.za));const Cs=gt[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(T=1.5*Cs,b.O=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const Rs=d.g;if(Rs){const na=Rs.g?Rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Q=T.h;Q.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Kl(Q,Q.h),Q.h=null))}if(T.G){const Ba=Rs.g?Rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(T.wa=Ba,xt(T.J,T.G,Ba))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),T=b;var ve=d;if(T.na=Fc(T,T.L?T.ba:null,T.W),ve.L){$l(T.h,ve);var We=ve,Ht=T.O;Ht&&(We.H=Ht),We.D&&(qs(We),Bs(We)),T.g=ve}else Uc(T);b.i.length>0&&Xs(b)}else gt[0]!="stop"&&gt[0]!="close"||Ws(b,7);else b.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Ws(b,7):so(b):gt[0]!="noop"&&b.l&&b.l.qa(gt),b.A=0)}}Nt(4)}catch{}}var Zt=class{constructor(d,p){this.g=d,this.map=p}};function Gl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Fs(d){return d.h?1:d.g?d.g.size:0}function Gs(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function Kl(d,p){d.g?d.g.add(p):d.h=p}function $l(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}Gl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ql(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const b of d.g.values())p=p.concat(b.G);return p}return H(d.i)}var Dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Da(d,p){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const T=d[b].indexOf("=");let z,Q=null;T>=0?(z=d[b].substring(0,T),Q=d[b].substring(T+1)):z=d[b],p(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Yn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;d instanceof Yn?(this.l=d.l,fn(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.u),this.h=d.h,Xl(this,Lc(d.i)),this.m=d.m):d&&(p=String(d).match(Dc))?(this.l=!1,fn(this,p[1]||"",!0),this.o=Ys(p[2]||""),this.g=Ys(p[3]||"",!0),Fi(this,p[4]),this.h=Ys(p[5]||"",!0),Xl(this,p[6]||"",!0),this.m=Ys(p[7]||"")):(this.l=!1,this.i=new Yi(null,this.l))}Yn.prototype.toString=function(){const d=[];var p=this.j;p&&d.push(Qr(p,Ma,!0),":");var b=this.g;return(b||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Qr(p,Ma,!0),"@"),d.push(hi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qr(b,b.charAt(0)=="/"?Wl:Mc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qr(b,Oc)),d.join("")},Yn.prototype.resolve=function(d){const p=Jt(this);let b=!!d.j;b?fn(p,d.j):b=!!d.o,b?p.o=d.o:b=!!d.g,b?p.g=d.g:b=d.u!=null;var T=d.h;if(b)Fi(p,d.u);else if(b=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=p.h.lastIndexOf("/");z!=-1&&(T=p.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let ve=0;ve<z.length;){const We=z[ve++];We=="."?T&&ve==z.length&&Q.push(""):We==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),T&&ve==z.length&&Q.push("")):(Q.push(We),T=!0)}T=Q.join("/")}else T=z}return b?p.h=T:b=d.i.toString()!=="",b?Xl(p,Lc(d.i)):b=!!d.m,b&&(p.m=d.m),p};function Jt(d){return new Yn(d)}function fn(d,p,b){d.j=b?Ys(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);d.u=p}else d.u=null}function Xl(d,p,b){p instanceof Yi?(d.i=p,Va(d.i,d.l)):(b||(p=Qr(p,Gi)),d.i=new Yi(p,d.l))}function xt(d,p,b){d.i.set(p,b)}function $r(d){return xt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ys(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qr(d,p,b){return typeof d=="string"?(d=encodeURI(d).replace(p,Mn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ma=/[#\/\?@]/g,Mc=/[#\?:]/g,Wl=/[#\?]/g,Gi=/[#\?@]/g,Oc=/#/g;function Yi(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function On(d){d.g||(d.g=new Map,d.h=0,d.i&&Da(d.i,function(p,b){d.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}i=Yi.prototype,i.add=function(d,p){On(this),this.i=null,d=Ki(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(p),this.h+=1,this};function Vc(d,p){On(d),p=Ki(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function Zl(d,p){return On(d),p=Ki(d,p),d.g.has(p)}i.forEach=function(d,p){On(this),this.g.forEach(function(b,T){b.forEach(function(z){d.call(p,z,T,this)},this)},this)};function Jl(d,p){On(d);let b=[];if(typeof p=="string")Zl(d,p)&&(b=b.concat(d.g.get(Ki(d,p))));else for(d=Array.from(d.g.values()),p=0;p<d.length;p++)b=b.concat(d[p]);return b}i.set=function(d,p){return On(this),this.i=null,d=Ki(this,d),Zl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},i.get=function(d,p){return d?(d=Jl(this,d),d.length>0?String(d[0]):p):p};function Oa(d,p,b){Vc(d,p),b.length>0&&(d.i=null,d.g.set(Ki(d,p),H(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var b=p[T];const z=hi(b);b=Jl(this,b);for(let Q=0;Q<b.length;Q++){let ve=z;b[Q]!==""&&(ve+="="+hi(b[Q])),d.push(ve)}}return this.i=d.join("&")};function Lc(d){const p=new Yi;return p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),p}function Ki(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function Va(d,p){p&&!d.j&&(On(d),d.i=null,d.g.forEach(function(b,T){const z=T.toLowerCase();T!=z&&(Vc(this,T),Oa(this,z,b))},d)),d.j=p}function Ns(d,p){const b=new Fn;if(f.Image){const T=new Image;T.onload=_(rs,b,"TestLoadImage: loaded",!0,p,T),T.onerror=_(rs,b,"TestLoadImage: error",!1,p,T),T.onabort=_(rs,b,"TestLoadImage: abort",!1,p,T),T.ontimeout=_(rs,b,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else p(!1)}function eo(d,p){const b=new Fn,T=new AbortController,z=setTimeout(()=>{T.abort(),rs(b,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:T.signal}).then(Q=>{clearTimeout(z),Q.ok?rs(b,"TestPingServer: ok",!0,p):rs(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),rs(b,"TestPingServer: error",!1,p)})}function rs(d,p,b,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(b)}catch{}}function $i(){this.g=new ke}function Ks(d){this.i=d.Sb||null,this.h=d.ab||!1}S(Ks,Je),Ks.prototype.g=function(){return new Xr(this.i,this.h)};function Xr(d,p){tt.call(this),this.H=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Xr,tt),i=Xr.prototype,i.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=p,this.readyState=1,As(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(p.body=d),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;La(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function La(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Qi(this):As(this),this.readyState==3&&La(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Qi(this))},i.Na=function(d){this.g&&(this.response=d,Qi(this))},i.ga=function(){this.g&&Qi(this)};function Qi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,As(d)}i.setRequestHeader=function(d,p){this.A.append(d,p)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=p.next();return d.join(`\r
`)};function As(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function as(d){let p="";return De(d,function(b,T){p+=T,p+=":",p+=b,p+=`\r
`}),p}function Wr(d,p,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=as(b),typeof d=="string"?b!=null&&hi(b):xt(d,p,b))}function wt(d){tt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(wt,tt);var $s=/^https?$/i,to=["POST","PUT"];i=wt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,p,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=A(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(Q){Zr(this,Q);return}if(d=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)b.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Q of T.keys())b.set(Q,T.get(Q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(to,p,void 0)>=0)||T||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ve]of b)this.g.setRequestHeader(Q,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Zr(this,Q)}};function Zr(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.o=5,no(d),fi(d)}function no(d){d.A||(d.A=!0,rt(d,"complete"),rt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,rt(this,"complete"),rt(this,"abort"),fi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),wt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},i.Xa=function(){Jr(this)};function Jr(d){if(d.h&&typeof u<"u"){if(d.v&&js(d)==4)setTimeout(d.Ca.bind(d),0);else if(rt(d,"readystatechange"),js(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var T;if(T=Q===0){let ve=String(d.D).match(Dc)[1]||null;!ve&&f.self&&f.self.location&&(ve=f.self.location.protocol.slice(0,-1)),T=!$s.test(ve?ve.toLowerCase():"")}b=T}if(b)rt(d,"complete"),rt(d,"success");else{d.o=6;try{var z=js(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",no(d)}}finally{fi(d)}}}}function fi(d,p){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,p||rt(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function js(d){return d.g?d.g.readyState:0}i.ca=function(){try{return js(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),pe(p)}};function gn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function mi(d){const p={};d=(d.g&&js(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(I(d[T]))continue;var b=Rc(d[T]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=p[z]||[];p[z]=Q,Q.push(b)}Ge(p,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(d,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||p}function Xi(d){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qs("baseRetryDelayMs",5e3,d),this.Za=Qs("retryDelaySeedMs",1e4,d),this.Ta=Qs("forwardChannelMaxRetries",2,d),this.va=Qs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Gl(d&&d.concurrentRequestLimit),this.Ba=new $i,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Xi.prototype,i.ka=8,i.I=1,i.connect=function(d,p,b,T){At(0),this.W=d,this.H=p||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.J=Fc(this,null,this.W),Xs(this)};function so(d){if(Pa(d),d.I==3){var p=d.V++,b=Jt(d.J);if(xt(b,"SID",d.M),xt(b,"RID",p),xt(b,"TYPE","terminate"),ea(d,b),p=new Ts(d,d.j,p),p.M=2,p.A=$r(Jt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=p.A,b=!0),b||(p.g=Gc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Bs(p)}Hc(d)}function Wi(d){d.g&&(ro(d),d.g.cancel(),d.g=null)}function Pa(d){Wi(d),d.v&&(f.clearTimeout(d.v),d.v=null),za(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Xs(d){if(!Yl(d.h)&&!d.m){d.m=!0;var p=d.Ea;be||N(),he||(be(),he=!0),C.add(p,d),d.D=0}}function Ua(d,p){return Fs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=p.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Xt(v(d.Ea,d,p),qc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Ts(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=E(Q),$(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Pc(this,z,p),b=Jt(this.J),xt(b,"RID",d),xt(b,"CVER",22),this.G&&xt(b,"X-HTTP-Session-Id",this.G),ea(this,b),Q&&(this.R?p="headers="+hi(as(Q))+"&"+p:this.u&&Wr(b,this.u,Q)),Kl(this.h,z),this.Ra&&xt(b,"TYPE","init"),this.S?(xt(b,"$req",p),xt(b,"SID","null"),z.U=!0,zs(z,b,null)):zs(z,b,p),this.I=2}}else this.I==3&&(d?io(this,d):this.i.length==0||Yl(this.h)||io(this))};function io(d,p){var b;p?b=p.l:b=d.V++;const T=Jt(d.J);xt(T,"SID",d.M),xt(T,"RID",b),xt(T,"AID",d.K),ea(d,T),d.u&&d.o&&Wr(T,d.u,d.o),b=new Ts(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),p&&(d.i=p.G.concat(d.i)),p=Pc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Kl(d.h,b),zs(b,T,p)}function ea(d,p){d.H&&De(d.H,function(b,T){xt(p,T,b)}),d.l&&De({},function(b,T){xt(p,T,b)})}function Pc(d,p,b){b=Math.min(d.i.length,b);const T=d.l?v(d.l.Ka,d.l,d):null;e:{var z=d.i;let We=-1;for(;;){const Ht=["count="+b];We==-1?b>0?(We=z[0].g,Ht.push("ofs="+We)):We=0:Ht.push("ofs="+We);let gt=!0;for(let Lt=0;Lt<b;Lt++){var Q=z[Lt].g;const ls=z[Lt].map;if(Q-=We,Q<0)We=Math.max(0,z[Lt].g-100),gt=!1;else try{Q="req"+Q+"_"||"";try{var ve=ls instanceof Map?ls:Object.entries(ls);for(const[Zs,Cs]of ve){let Rs=Cs;g(Cs)&&(Rs=Y(Cs)),Ht.push(Q+Zs+"="+encodeURIComponent(Rs))}}catch(Zs){throw Ht.push(Q+"type="+encodeURIComponent("_badmap")),Zs}}catch{T&&T(ls)}}if(gt){ve=Ht.join("&");break e}}ve=void 0}return d=d.i.splice(0,b),p.G=d,ve}function Uc(d){if(!d.g&&!d.v){d.Y=1;var p=d.Da;be||N(),he||(be(),he=!0),C.add(p,d),d.A=0}}function ta(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Xt(v(d.Da,d),qc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Xt(v(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Wi(this),zc(this))};function ro(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function zc(d){d.g=new Ts(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var p=Jt(d.na);xt(p,"RID","rpc"),xt(p,"SID",d.M),xt(p,"AID",d.K),xt(p,"CI",d.F?"0":"1"),!d.F&&d.ia&&xt(p,"TO",d.ia),xt(p,"TYPE","xmlhttp"),ea(d,p),d.u&&d.o&&Wr(p,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=$r(Jt(p)),b.u=null,b.R=!0,Ia(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Wi(this),ta(this),At(19))};function za(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Bc(d,p){var b=null;if(d.g==p){za(d),ro(d),d.g=null;var T=2}else if(Gs(d.h,p))b=p.G,$l(d.h,p),T=1;else return;if(d.I!=0){if(p.o)if(T==1){b=p.u?p.u.length:0,p=Date.now()-p.F;var z=d.D;T=Hn(),rt(T,new dn(T,b)),Xs(d)}else Uc(d);else if(z=p.m,z==3||z==0&&p.X>0||!(T==1&&Ua(d,p)||T==2&&ta(d)))switch(b&&b.length>0&&(p=d.h,p.i=p.i.concat(b)),z){case 1:Ws(d,5);break;case 4:Ws(d,10);break;case 3:Ws(d,6);break;default:Ws(d,2)}}}function qc(d,p){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*p}function Ws(d,p){if(d.j.info("Error code "+p),p==2){var b=v(d.bb,d),T=d.Ua;const z=!T;T=new Yn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||fn(T,"https"),$r(T),z?Ns(T.toString(),b):eo(T.toString(),b)}else At(2);d.I=0,d.l&&d.l.pa(p),Hc(d),Pa(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Hc(d){if(d.I=0,d.ja=[],d.l){const p=Ql(d.h);(p.length!=0||d.i.length!=0)&&(ee(d.ja,p),ee(d.ja,d.i),d.h.i.length=0,H(d.i),d.i.length=0),d.l.oa()}}function Fc(d,p,b){var T=b instanceof Yn?Jt(b):new Yn(b);if(T.g!="")p&&(T.g=p+"."+T.g),Fi(T,T.u);else{var z=f.location;T=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;const Q=new Yn(null);T&&fn(Q,T),p&&(Q.g=p),z&&Fi(Q,z),b&&(Q.h=b),T=Q}return b=d.G,p=d.wa,b&&p&&xt(T,b,p),xt(T,"VER",d.ka),ea(d,T),T}function Gc(d,p,b){if(p&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Aa&&!d.ma?new wt(new Ks({ab:b})):new wt(d.ma),p.Fa(d.L),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}i=Yc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Zi(){}Zi.prototype.g=function(d,p){return new Rn(d,p)};function Rn(d,p){tt.call(this),this.g=new Xi(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(d?d["X-WebChannel-Client-Profile"]=p.sa:d={"X-WebChannel-Client-Profile":p.sa}),this.g.U=d,(d=p&&p.Qb)&&!I(d)&&(this.g.u=d),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.G=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new pi(this)}S(Rn,tt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){so(this.g)},Rn.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=Y(d),d=b);p.i.push(new Zt(p.Ya++,d)),p.I==3&&Xs(p)},Rn.prototype.N=function(){this.g.l=null,delete this.j,so(this.g),delete this.g,Rn.Z.N.call(this)};function Kc(d){Ve.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const b in p){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}S(Kc,Ve);function $c(){Xe.call(this),this.status=1}S($c,Xe);function pi(d){this.g=d}S(pi,Yc),pi.prototype.ra=function(){rt(this.g,"a")},pi.prototype.qa=function(d){rt(this.g,new Kc(d))},pi.prototype.pa=function(d){rt(this.g,new $c)},pi.prototype.oa=function(){rt(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,r_=function(){return new Zi},i_=function(){return Hn()},s_=nt,Om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,ud=Yr,Hl.COMPLETE="complete",n_=Hl,Ue.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",tt.prototype.listen=tt.prototype.J,Ko=Ue,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,t_=wt}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});const tx="@firebase/firestore",nx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new np("@firebase/firestore");function vl(){return Aa.logLevel}function je(i,...e){if(Aa.logLevel<=ct.DEBUG){const s=e.map(fp);Aa.debug(`Firestore (${Pl}): ${i}`,...s)}}function Li(i,...e){if(Aa.logLevel<=ct.ERROR){const s=e.map(fp);Aa.error(`Firestore (${Pl}): ${i}`,...s)}}function Cl(i,...e){if(Aa.logLevel<=ct.WARN){const s=e.map(fp);Aa.warn(`Firestore (${Pl}): ${i}`,...s)}}function fp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,a_(i,r,s)}function a_(i,e,s){let r=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Li(r),new Error(r)}function vt(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||a_(e,o,r)}function $e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends zi{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(Nn.UNAUTHENTICATED)))}shutdown(){}}class NN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class AN{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){vt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,s(y)):Promise.resolve();let u=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new kr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new kr)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string",31837,{l:r}),new l_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class jN{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CN{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new jN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){vt(this.o===void 0,3512);const r=u=>{u.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,je("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(vt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new sx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=IN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<s&&(r+=e.charAt(o[u]%62))}return r}}function ut(i,e){return i<e?-1:i>e?1:0}function Vm(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),u=e.charAt(r);if(o!==u)return gm(o)===gm(u)?ut(o,u):gm(o)?1:-1}return ut(i.length,e.length)}const kN=55296,DN=57343;function gm(i){const e=i.charCodeAt(0);return e>=kN&&e<=DN}function Rl(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__name__";class ii{constructor(e,s,r){s===void 0?s=0:s>e.length&&He(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&He(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const u=ii.compareSegments(e.get(o),s.get(o));if(u!==0)return u}return ut(e.length,s.length)}static compareSegments(e,s){const r=ii.isNumericId(e),o=ii.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?ii.extractNumericId(e).compare(ii.extractNumericId(s)):Vm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class Ct extends ii{construct(e,s,r){return new Ct(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new Ct(s)}static emptyPath(){return new Ct([])}}const MN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends ii{construct(e,s,r){return new wn(e,s,r)}static isValidIdentifier(e){return MN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ix}static keyField(){return new wn([ix])}static fromServerFormat(e){const s=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Se(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Se(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Se(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new Se(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(s)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Ct.fromString(e))}static fromName(e){return new Oe(Ct.fromString(e).popFirst(5))}static empty(){return new Oe(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ct.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(i,e,s){if(!s)throw new Se(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ON(i,e,s,r){if(e===!0&&r===!0)throw new Se(oe.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function rx(i){if(!Oe.isDocumentKey(i))throw new Se(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ax(i){if(Oe.isDocumentKey(i))throw new Se(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function c_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function zd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He(12329,{type:typeof i})}function ns(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Se(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=zd(i);throw new Se(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(i,e){const s={typeString:i};return e&&(s.value=e),s}function bc(i,e){if(!c_(i))throw new Se(oe.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){s=`Expected '${r}' field to equal '${u.value}'`;break}}if(s)throw new Se(oe.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=-62135596800,ox=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*ox);return new Mt(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Se(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Se(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<lx)throw new Se(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ox}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:ln("string",Mt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Mt(0,0))}static max(){return new Ye(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=-1;function VN(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ye.fromTimestamp(r===1e9?new Mt(s+1,0):new Mt(s,r));return new Mr(o,Oe.empty(),e)}function LN(i){return new Mr(i.readTime,i.key,ac)}class Mr{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Mr(Ye.min(),Oe.empty(),ac)}static max(){return new Mr(Ye.max(),Oe.empty(),ac)}}function PN(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=Oe.comparator(i.documentKey,e.documentKey),s!==0?s:ut(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==UN)throw i;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ue(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ue?s:ue.resolve(s)}catch(s){return ue.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.reject(s)}static resolve(e){return new ue(((s,r)=>{s(e)}))}static reject(e){return new ue(((s,r)=>{r(e)}))}static waitFor(e){return new ue(((s,r)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&s()}),(y=>r(y)))})),f=!0,u===o&&s()}))}static or(e){let s=ue.resolve(!1);for(const r of e)s=s.next((o=>o?ue.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,u)=>{r.push(s.call(this,o,u))})),this.waitFor(r)}static mapArray(e,s){return new ue(((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const v=y;s(e[v]).next((_=>{f[v]=_,++g,g===u&&r(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new ue(((r,o)=>{const u=()=>{e()===!0?s().next((()=>{u()}),o):r()};u()}))}}function BN(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function zl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=-1;function qd(i){return i==null}function Sd(i){return i===0&&1/i==-1/0}function qN(i){return typeof i=="number"&&Number.isInteger(i)&&!Sd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="";function HN(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=cx(e)),e=FN(i.get(s),e);return cx(e)}function FN(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":s+="";break;case u_:s+="";break;default:s+=u}}return s}function cx(i){return i+u_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function qr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function d_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,s){this.comparator=e,this.root=s||_n.EMPTY}insert(e,s){return new Ut(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=s?r(e.key,s):1,s&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,s,r,o,u){this.key=e,this.value=s,this.color=r??_n.RED,this.left=o??_n.EMPTY,this.right=u??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,u){return new _n(e??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,s,r),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,s,r,o,u){return this}insert(e,s,r){return new _n(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new dx(this.data.getIterator())}getIteratorFrom(e){return new dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new un(this.comparator);return s.data=e,s}}class dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new ts([])}unionWith(e){let s=new un(wn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new ts(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new h_("Invalid base64 string: "+u):u}})(e);return new En(s)}static fromUint8Array(e){const s=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new En(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(i){if(vt(!!i,39018),typeof i=="string"){let e=0;const s=GN.exec(i);if(vt(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(i.seconds),nanos:Yt(i.nanos)}}function Yt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Vr(i){return typeof i=="string"?En.fromBase64String(i):En.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="server_timestamp",m_="__type__",p_="__previous_value__",g_="__local_write_time__";function gp(i){return(i?.mapValue?.fields||{})[m_]?.stringValue===f_}function Hd(i){const e=i.mapValue.fields[p_];return gp(e)?Hd(e):e}function lc(i){const e=Or(i.mapValue.fields[g_].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,s,r,o,u,f,g,y,v,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=_}}const Nd="(default)";class oc{constructor(e,s){this.projectId=e,this.database=s||Nd}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__type__",KN="__max__",td={mapValue:{}},v_="__vector__",Ad="value";function Lr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?gp(i)?4:QN(i)?9007199254740991:$N(i)?10:11:He(28295,{value:i})}function di(i,e){if(i===e)return!0;const s=Lr(i);if(s!==Lr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return lc(i).isEqual(lc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Or(o.timestampValue),g=Or(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Vr(o.bytesValue).isEqual(Vr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Yt(o.geoPointValue.latitude)===Yt(u.geoPointValue.latitude)&&Yt(o.geoPointValue.longitude)===Yt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Yt(o.integerValue)===Yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Yt(o.doubleValue),g=Yt(u.doubleValue);return f===g?Sd(f)===Sd(g):isNaN(f)&&isNaN(g)}return!1})(i,e);case 9:return Rl(i.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(ux(f)!==ux(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!di(f[y],g[y])))return!1;return!0})(i,e);default:return He(52216,{left:i})}}function cc(i,e){return(i.values||[]).find((s=>di(s,e)))!==void 0}function Il(i,e){if(i===e)return 0;const s=Lr(i),r=Lr(e);if(s!==r)return ut(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ut(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=Yt(u.integerValue||u.doubleValue),y=Yt(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(i,e);case 3:return hx(i.timestampValue,e.timestampValue);case 4:return hx(lc(i),lc(e));case 5:return Vm(i.stringValue,e.stringValue);case 6:return(function(u,f){const g=Vr(u),y=Vr(f);return g.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),y=f.split("/");for(let v=0;v<g.length&&v<y.length;v++){const _=ut(g[v],y[v]);if(_!==0)return _}return ut(g.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=ut(Yt(u.latitude),Yt(f.latitude));return g!==0?g:ut(Yt(u.longitude),Yt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return fx(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const g=u.fields||{},y=f.fields||{},v=g[Ad]?.arrayValue,_=y[Ad]?.arrayValue,S=ut(v?.values?.length||0,_?.values?.length||0);return S!==0?S:fx(v,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===td.mapValue&&f===td.mapValue)return 0;if(u===td.mapValue)return 1;if(f===td.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),v=f.fields||{},_=Object.keys(v);y.sort(),_.sort();for(let S=0;S<y.length&&S<_.length;++S){const A=Vm(y[S],_[S]);if(A!==0)return A;const H=Il(g[y[S]],v[_[S]]);if(H!==0)return H}return ut(y.length,_.length)})(i.mapValue,e.mapValue);default:throw He(23264,{he:s})}}function hx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ut(i,e);const s=Or(i),r=Or(e),o=ut(s.seconds,r.seconds);return o!==0?o:ut(s.nanos,r.nanos)}function fx(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const u=Il(s[o],r[o]);if(u)return u}return ut(s.length,r.length)}function kl(i){return Lm(i)}function Lm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Or(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return Vr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Oe.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const u of s.values||[])o?o=!1:r+=",",r+=Lm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Lm(s.fields[f])}`;return o+"}"})(i.mapValue):He(61005,{value:i})}function dd(i){switch(Lr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(i);return e?16+dd(e):16;case 5:return 2*i.stringValue.length;case 6:return Vr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+dd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return qr(r.fields,((u,f)=>{o+=u.length+dd(f)})),o})(i.mapValue);default:throw He(13486,{value:i})}}function mx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Pm(i){return!!i&&"integerValue"in i}function yp(i){return!!i&&"arrayValue"in i}function px(i){return!!i&&"nullValue"in i}function gx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function hd(i){return!!i&&"mapValue"in i}function $N(i){return(i?.mapValue?.fields||{})[y_]?.stringValue===v_}function Jo(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return qr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Jo(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Jo(i.arrayValue.values[s]);return e}return{...i}}function QN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===KN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!hd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(s)}setAll(e){let s=wn.emptyPath(),r={},o=[];e.forEach(((f,g)=>{if(!s.isImmediateParentOf(g)){const y=this.getFieldsMap(s);this.applyChanges(y,r,o),r={},o=[],s=g.popLast()}f?r[g.lastSegment()]=Jo(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,r,o)}delete(e){const s=this.field(e.popLast());hd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];hd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){qr(s,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new qn(Jo(this.value))}}function x_(i){const e=[];return qr(i.fields,((s,r)=>{const o=new wn([s]);if(hd(r)){const u=x_(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,s,r,o,u,f,g){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new An(e,0,Ye.min(),Ye.min(),Ye.min(),qn.empty(),0)}static newFoundDocument(e,s,r,o){return new An(e,1,s,Ye.min(),r,o,0)}static newNoDocument(e,s){return new An(e,2,s,Ye.min(),Ye.min(),qn.empty(),0)}static newUnknownDocument(e,s){return new An(e,3,s,Ye.min(),Ye.min(),qn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,s){this.position=e,this.inclusive=s}}function yx(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?r=Oe.comparator(Oe.fromName(f.referenceValue),s.key):r=Il(f,s.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function vx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!di(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,s="asc"){this.field=e,this.dir=s}}function XN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{}class an extends b_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new ZN(e,s,r):s==="array-contains"?new tA(e,r):s==="in"?new nA(e,r):s==="not-in"?new sA(e,r):s==="array-contains-any"?new iA(e,r):new an(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new JN(e,r):new eA(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Il(s,this.value)):s!==null&&Lr(this.value)===Lr(s)&&this.matchesComparison(Il(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ps extends b_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Ps(e,s)}matches(e){return __(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __(i){return i.op==="and"}function w_(i){return WN(i)&&__(i)}function WN(i){for(const e of i.filters)if(e instanceof Ps)return!1;return!0}function Um(i){if(i instanceof an)return i.field.canonicalString()+i.op.toString()+kl(i.value);if(w_(i))return i.filters.map((e=>Um(e))).join(",");{const e=i.filters.map((s=>Um(s))).join(",");return`${i.op}(${e})`}}function E_(i,e){return i instanceof an?(function(r,o){return o instanceof an&&r.op===o.op&&r.field.isEqual(o.field)&&di(r.value,o.value)})(i,e):i instanceof Ps?(function(r,o){return o instanceof Ps&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,g)=>u&&E_(f,o.filters[g])),!0):!1})(i,e):void He(19439)}function T_(i){return i instanceof an?(function(s){return`${s.field.canonicalString()} ${s.op} ${kl(s.value)}`})(i):i instanceof Ps?(function(s){return s.op.toString()+" {"+s.getFilters().map(T_).join(" ,")+"}"})(i):"Filter"}class ZN extends an{constructor(e,s,r){super(e,s,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const s=Oe.comparator(e.key,this.key);return this.matchesComparison(s)}}class JN extends an{constructor(e,s){super(e,"in",s),this.keys=S_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class eA extends an{constructor(e,s){super(e,"not-in",s),this.keys=S_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function S_(i,e){return(e.arrayValue?.values||[]).map((s=>Oe.fromName(s.referenceValue)))}class tA extends an{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return yp(s)&&cc(s.arrayValue,this.value)}}class nA extends an{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&cc(this.value.arrayValue,s)}}class sA extends an{constructor(e,s){super(e,"not-in",s)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!cc(this.value.arrayValue,s)}}class iA extends an{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!yp(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>cc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,s=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function xx(i,e=null,s=[],r=[],o=null,u=null,f=null){return new rA(i,e,s,r,o,u,f)}function vp(i){const e=$e(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Um(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),qd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>kl(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>kl(r))).join(",")),e.Te=s}return e.Te}function xp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!XN(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!E_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!vx(i.startAt,e.startAt)&&vx(i.endAt,e.endAt)}function zm(i){return Oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,s=null,r=[],o=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aA(i,e,s,r,o,u,f,g){return new Bl(i,e,s,r,o,u,f,g)}function bp(i){return new Bl(i)}function bx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function N_(i){return i.collectionGroup!==null}function ec(i){const e=$e(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),s.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new un(wn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new uc(u,r))})),s.has(wn.keyField().canonicalString())||e.Ie.push(new uc(wn.keyField(),r))}return e.Ie}function li(i){const e=$e(i);return e.Ee||(e.Ee=lA(e,ec(i))),e.Ee}function lA(i,e){if(i.limitType==="F")return xx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new uc(o.field,u)}));const s=i.endAt?new jd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new jd(i.startAt.position,i.startAt.inclusive):null;return xx(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function Bm(i,e){const s=i.filters.concat([e]);return new Bl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function qm(i,e,s){return new Bl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function Fd(i,e){return xp(li(i),li(e))&&i.limitType===e.limitType}function A_(i){return`${vp(li(i))}|lt:${i.limitType}`}function xl(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>T_(o))).join(", ")}]`),qd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>kl(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>kl(o))).join(",")),`Target(${r})`})(li(i))}; limitType=${i.limitType})`}function Gd(i,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,o){for(const u of ec(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,g,y){const v=yx(f,g,y);return f.inclusive?v<=0:v<0})(r.startAt,ec(r),o)||r.endAt&&!(function(f,g,y){const v=yx(f,g,y);return f.inclusive?v>=0:v>0})(r.endAt,ec(r),o))})(i,e)}function oA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function j_(i){return(e,s)=>{let r=!1;for(const o of ec(i)){const u=cA(o,e,s);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function cA(i,e,s){const r=i.field.isKeyField()?Oe.comparator(e.key,s.key):(function(u,f,g){const y=f.data.field(u),v=g.data.field(u);return y!==null&&v!==null?Il(y,v):He(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,((s,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return d_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Ut(Oe.comparator);function Pi(){return uA}const C_=new Ut(Oe.comparator);function $o(...i){let e=C_;for(const s of i)e=e.insert(s.key,s);return e}function R_(i){let e=C_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function ba(){return tc()}function I_(){return tc()}function tc(){return new Ca((i=>i.toString()),((i,e)=>i.isEqual(e)))}const dA=new Ut(Oe.comparator),hA=new un(Oe.comparator);function dt(...i){let e=hA;for(const s of i)e=e.add(s);return e}const fA=new un(ut);function mA(){return fA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function k_(i){return{integerValue:""+i}}function pA(i,e){return qN(e)?k_(e):_p(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function gA(i,e,s){return i instanceof Cd?(function(o,u){const f={fields:{[m_]:{stringValue:f_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&gp(u)&&(u=Hd(u)),u&&(f.fields[p_]=u),{mapValue:f}})(s,e):i instanceof dc?M_(i,e):i instanceof hc?O_(i,e):(function(o,u){const f=D_(o,u),g=_x(f)+_x(o.Ae);return Pm(f)&&Pm(o.Ae)?k_(g):_p(o.serializer,g)})(i,e)}function yA(i,e,s){return i instanceof dc?M_(i,e):i instanceof hc?O_(i,e):s}function D_(i,e){return i instanceof Rd?(function(r){return Pm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Cd extends Yd{}class dc extends Yd{constructor(e){super(),this.elements=e}}function M_(i,e){const s=V_(e);for(const r of i.elements)s.some((o=>di(o,r)))||s.push(r);return{arrayValue:{values:s}}}class hc extends Yd{constructor(e){super(),this.elements=e}}function O_(i,e){let s=V_(e);for(const r of i.elements)s=s.filter((o=>!di(o,r)));return{arrayValue:{values:s}}}class Rd extends Yd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function _x(i){return Yt(i.integerValue||i.doubleValue)}function V_(i){return yp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function vA(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof dc&&o instanceof dc||r instanceof hc&&o instanceof hc?Rl(r.elements,o.elements,di):r instanceof Rd&&o instanceof Rd?di(r.Ae,o.Ae):r instanceof Cd&&o instanceof Cd})(i.transform,e.transform)}class xA{constructor(e,s){this.version=e,this.transformResults=s}}class Dn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Kd{}function L_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new $d(i.key,Dn.none()):new _c(i.key,i.data,Dn.none());{const s=i.data,r=qn.empty();let o=new un(wn.comparator);for(let u of e.fields)if(!o.has(u)){let f=s.field(u);f===null&&u.length>1&&(u=u.popLast(),f=s.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Hr(i.key,r,new ts(o.toArray()),Dn.none())}}function bA(i,e,s){i instanceof _c?(function(o,u,f){const g=o.value.clone(),y=Ex(o.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,s):i instanceof Hr?(function(o,u,f){if(!fd(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Ex(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(P_(o)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,s):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function nc(i,e,s,r){return i instanceof _c?(function(u,f,g,y){if(!fd(u.precondition,f))return g;const v=u.value.clone(),_=Tx(u.fieldTransforms,y,f);return v.setAll(_),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null})(i,e,s,r):i instanceof Hr?(function(u,f,g,y){if(!fd(u.precondition,f))return g;const v=Tx(u.fieldTransforms,y,f),_=f.data;return _.setAll(P_(u)),_.setAll(v),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(i,e,s,r):(function(u,f,g){return fd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(i,e,s)}function _A(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),u=D_(r.transform,o||null);u!=null&&(s===null&&(s=qn.empty()),s.set(r.field,u))}return s||null}function wx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Rl(r,o,((u,f)=>vA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class _c extends Kd{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Hr extends Kd{constructor(e,s,r,o,u=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function P_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function Ex(i,e,s){const r=new Map;vt(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const u=i[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,yA(f,g,s[o]))}return r}function Tx(i,e,s){const r=new Map;for(const o of i){const u=o.transform,f=s.data.field(o.field);r.set(o.field,gA(u,f,e))}return r}class $d extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&bA(u,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=nc(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=nc(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=I_();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=s.has(o.key)?null:g;const y=L_(f,g);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),dt())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((s,r)=>wx(s,r)))&&Rl(this.baseMutations,e.baseMutations,((s,r)=>wx(s,r)))}}class wp{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){vt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return dA})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new wp(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,ft;function NA(i){switch(i){case oe.OK:return He(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return He(15467,{code:i})}}function U_(i){if(i===void 0)return Li("GRPC error has no .code"),oe.UNKNOWN;switch(i){case rn.OK:return oe.OK;case rn.CANCELLED:return oe.CANCELLED;case rn.UNKNOWN:return oe.UNKNOWN;case rn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case rn.INTERNAL:return oe.INTERNAL;case rn.UNAVAILABLE:return oe.UNAVAILABLE;case rn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case rn.NOT_FOUND:return oe.NOT_FOUND;case rn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case rn.ABORTED:return oe.ABORTED;case rn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case rn.DATA_LOSS:return oe.DATA_LOSS;default:return He(39323,{code:i})}}(ft=rn||(rn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new Ir([4294967295,4294967295],0);function Sx(i){const e=AA().encode(i),s=new e_;return s.update(e),new Uint8Array(s.digest())}function Nx(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ir([s,r],0),new Ir([o,u],0)]}class Ep{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Qo(`Invalid padding: ${s}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Ir.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(Ir.fromNumber(r)));return o.compare(jA)===1&&(o=new Ir([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Sx(e),[r,o]=Nx(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ep(u,o,s);return r.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const s=Sx(e),[r,o]=Nx(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,s,r,o,u){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Qd(Ye.min(),o,new Ut(ut),Pi(),dt())}}class wc{constructor(e,s,r,o,u){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new wc(r,s,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class z_{constructor(e,s){this.targetId=e,this.Ce=s}}class B_{constructor(e,s,r=En.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Ax{constructor(){this.ve=0,this.Fe=jx(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),s=dt(),r=dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:He(38017,{changeType:u})}})),new wc(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=jx()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.Je=nd(),this.He=nd(),this.Ye=new Ut(ut)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const u=o.target;if(zm(u))if(r===0){const f=new Oe(u.path);this.et(s,f,An.newNoDocument(f,Ye.min()))}else vt(r===1,20013,{expectedCount:r});else{const f=this._t(s);if(f!==r){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(s);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,v)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=s;let f,g;try{f=Vr(r).toUint8Array()}catch(y){if(y instanceof h_)return Cl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Ep(f,o,u)}catch(y){return Cl(y instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(s,u,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&zm(g.target)){const y=new Oe(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,An.newNoDocument(y,e))}u.Be&&(s.set(f,u.ke()),u.qe())}}));let r=dt();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Qd(e,s,this.Ye,this.je,r);return this.je=Pi(),this.Je=nd(),this.He=nd(),this.Ye=new Ut(ut),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Ax,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new un(ut),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new un(ut),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||je("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ax),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function nd(){return new Ut(Oe.comparator)}function jx(){return new Ut(Oe.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},IA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kA={and:"AND",or:"OR"};class DA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Hm(i,e){return i.useProto3Json||qd(e)?e:{value:e}}function Id(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function MA(i,e){return Id(i,e.toTimestamp())}function oi(i){return vt(!!i,49232),Ye.fromTimestamp((function(s){const r=Or(s);return new Mt(r.seconds,r.nanos)})(i))}function Tp(i,e){return Fm(i,e).canonicalString()}function Fm(i,e){const s=(function(o){return new Ct(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function H_(i){const e=Ct.fromString(i);return vt($_(e),10190,{key:e.toString()}),e}function Gm(i,e){return Tp(i.databaseId,e.path)}function ym(i,e){const s=H_(e);if(s.get(1)!==i.databaseId.projectId)throw new Se(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new Se(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Oe(G_(s))}function F_(i,e){return Tp(i.databaseId,e)}function OA(i){const e=H_(i);return e.length===4?Ct.emptyPath():G_(e)}function Ym(i){return new Ct(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function G_(i){return vt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Cx(i,e,s){return{name:Gm(i,e),fields:s.value.mapValue.fields}}function VA(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:He(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(v,_){return v.useProto3Json?(vt(_===void 0||typeof _=="string",58123),En.fromBase64String(_||"")):(vt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),En.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(v){const _=v.code===void 0?oe.UNKNOWN:U_(v.code);return new Se(_,v.message||"")})(f);s=new B_(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ym(i,r.document.name),u=oi(r.document.updateTime),f=r.document.createTime?oi(r.document.createTime):Ye.min(),g=new qn({mapValue:{fields:r.document.fields}}),y=An.newFoundDocument(o,u,f,g),v=r.targetIds||[],_=r.removedTargetIds||[];s=new md(v,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ym(i,r.document),u=r.readTime?oi(r.readTime):Ye.min(),f=An.newNoDocument(o,u),g=r.removedTargetIds||[];s=new md([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ym(i,r.document),u=r.removedTargetIds||[];s=new md([],u,o,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new SA(o,u),g=r.targetId;s=new z_(g,f)}}return s}function LA(i,e){let s;if(e instanceof _c)s={update:Cx(i,e.key,e.value)};else if(e instanceof $d)s={delete:Gm(i,e.key)};else if(e instanceof Hr)s={update:Cx(i,e.key,e.data),updateMask:YA(e.fieldMask)};else{if(!(e instanceof wA))return He(16599,{Vt:e.type});s={verify:Gm(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof Cd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof dc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof hc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Rd)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw He(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:MA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)})(i,e.precondition)),s}function PA(i,e){return i&&i.length>0?(vt(e!==void 0,14353),i.map((s=>(function(o,u){let f=o.updateTime?oi(o.updateTime):oi(u);return f.isEqual(Ye.min())&&(f=oi(u)),new xA(f,o.transformResults||[])})(s,e)))):[]}function UA(i,e){return{documents:[F_(i,e.path)]}}function zA(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=F_(i,o);const u=(function(v){if(v.length!==0)return K_(Ps.create(v,"and"))})(e.filters);u&&(s.structuredQuery.where=u);const f=(function(v){if(v.length!==0)return v.map((_=>(function(A){return{field:bl(A.field),direction:HA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const g=Hm(i,e.limit);return g!==null&&(s.structuredQuery.limit=g),e.startAt&&(s.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:s,parent:o}}function BA(i){let e=OA(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){vt(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];s.where&&(u=(function(S){const A=Y_(S);return A instanceof Ps&&w_(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(S){return S.map((A=>(function(ee){return new uc(_l(ee.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(A)))})(s.orderBy));let g=null;s.limit&&(g=(function(S){let A;return A=typeof S=="object"?S.value:S,qd(A)?null:A})(s.limit));let y=null;s.startAt&&(y=(function(S){const A=!!S.before,H=S.values||[];return new jd(H,A)})(s.startAt));let v=null;return s.endAt&&(v=(function(S){const A=!S.before,H=S.values||[];return new jd(H,A)})(s.endAt)),aA(e,o,f,u,g,"F",y,v)}function qA(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function Y_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=_l(s.unaryFilter.field);return an.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=_l(s.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=_l(s.unaryFilter.field);return an.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=_l(s.unaryFilter.field);return an.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(i):i.fieldFilter!==void 0?(function(s){return an.create(_l(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return Ps.create(s.compositeFilter.filters.map((r=>Y_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(s.compositeFilter.op))})(i):He(30097,{filter:i})}function HA(i){return RA[i]}function FA(i){return IA[i]}function GA(i){return kA[i]}function bl(i){return{fieldPath:i.canonicalString()}}function _l(i){return wn.fromServerFormat(i.fieldPath)}function K_(i){return i instanceof an?(function(s){if(s.op==="=="){if(gx(s.value))return{unaryFilter:{field:bl(s.field),op:"IS_NAN"}};if(px(s.value))return{unaryFilter:{field:bl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(gx(s.value))return{unaryFilter:{field:bl(s.field),op:"IS_NOT_NAN"}};if(px(s.value))return{unaryFilter:{field:bl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(s.field),op:FA(s.op),value:s.value}}})(i):i instanceof Ps?(function(s){const r=s.getFilters().map((o=>K_(o)));return r.length===1?r[0]:{compositeFilter:{op:GA(s.op),filters:r}}})(i):He(54877,{filter:i})}function YA(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function $_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,s,r,o,u=Ye.min(),f=Ye.min(),g=En.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.yt=e}}function $A(i){const e=BA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.Cn=new XA}addToCollectionParentIndex(e,s){return this.Cn.add(s),ue.resolve()}getCollectionParents(e,s){return ue.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ue.resolve()}deleteFieldIndex(e,s){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,s){return ue.resolve()}getDocumentsMatchingTarget(e,s){return ue.resolve(null)}getIndexType(e,s){return ue.resolve(0)}getFieldIndexes(e,s){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,s){return ue.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,s){return ue.resolve(Mr.min())}updateCollectionGroup(e,s,r){return ue.resolve()}updateIndexEntries(e,s){return ue.resolve()}}class XA{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new un(Ct.comparator),u=!o.has(r);return this.index[s]=o.add(r),u}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(Q_,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="LruGarbageCollector",WA=1048576;function kx([i,e],[s,r]){const o=ut(i,s);return o===0?ut(e,r):o}class ZA{constructor(e){this.Ir=e,this.buffer=new un(kx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();kx(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(Ix,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){zl(s)?je(Ix,"Ignoring IndexedDB error during garbage collection: ",s):await Ul(s)}await this.Vr(3e5)}))}}class ej{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return ue.resolve(Bd.ce);const r=new ZA(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Rx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,u,f,g,y,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,g=Date.now(),this.removeTargets(e,r,s)))).next((S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(v=Date.now(),vl()<=ct.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${S} documents in `+(v-y)+`ms
Total Duration: ${v-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function tj(i,e){return new ej(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.changes=new Ca((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ue.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&nc(r.mutation,o,ts.empty(),Mt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,dt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=dt()){const o=ba();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((u=>{let f=$o();return u.forEach(((g,y)=>{f=f.insert(g,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const r=ba();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,dt())))}populateOverlays(e,s,r){const o=[];return r.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{s.set(f,g)}))}))}computeViews(e,s,r,o){let u=Pi();const f=tc(),g=(function(){return tc()})();return s.forEach(((y,v)=>{const _=r.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof Hr)?u=u.insert(v.key,v):_!==void 0?(f.set(v.key,_.mutation.getFieldMask()),nc(_.mutation,v,_.mutation.getFieldMask(),Mt.now())):f.set(v.key,ts.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((v,_)=>f.set(v,_))),s.forEach(((v,_)=>g.set(v,new sj(_,f.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,s){const r=tc();let o=new Ut(((f,g)=>f-g)),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const g of f)g.keys().forEach((y=>{const v=s.get(y);if(v===null)return;let _=r.get(y)||ts.empty();_=g.applyToLocalView(v,_),r.set(y,_);const S=(o.get(g.batchId)||dt()).add(y);o=o.insert(g.batchId,S)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,_=y.value,S=I_();_.forEach((A=>{if(!u.has(A)){const H=L_(s.get(A),r.get(A));H!==null&&S.set(A,H),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ue.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(f){return Oe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):N_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-u.size):ue.resolve(ba());let g=ac,y=u;return f.next((v=>ue.forEach(v,((_,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{y=y.insert(_,A)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,y,v,dt()))).next((_=>({batchId:g,changes:R_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Oe(s)).next((r=>{let o=$o();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const u=s.collectionGroup;let f=$o();return this.indexManager.getCollectionParents(e,u).next((g=>ue.forEach(g,(y=>{const v=(function(S,A){return new Bl(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(s,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((_=>{_.forEach(((S,A)=>{f=f.insert(S,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,u,o)))).next((f=>{u.forEach(((y,v)=>{const _=v.getKey();f.get(_)===null&&(f=f.insert(_,An.newInvalidDocument(_)))}));let g=$o();return f.forEach(((y,v)=>{const _=u.get(y);_!==void 0&&nc(_.mutation,v,ts.empty(),Mt.now()),Gd(s,v)&&(g=g.insert(y,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ue.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:oi(o.createTime)}})(s)),ue.resolve()}getNamedQuery(e,s){return ue.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:$A(o.bundledQuery),readTime:oi(o.readTime)}})(s)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.overlays=new Ut(Oe.comparator),this.qr=new Map}getOverlay(e,s){return ue.resolve(this.overlays.get(s))}getOverlays(e,s){const r=ba();return ue.forEach(s,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,u)=>{this.St(e,s,u)})),ue.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,s,r){const o=ba(),u=s.length+1,f=new Oe(s.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!s.isPrefixOf(v.path))break;v.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let u=new Ut(((v,_)=>v-_));const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===s&&v.largestBatchId>r){let _=u.get(v.largestBatchId);_===null&&(_=ba(),u=u.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const g=ba(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,_)=>g.set(v,_))),!(g.size()>=o)););return ue.resolve(g)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new TA(s,r));let u=this.qr.get(s);u===void 0&&(u=dt(),this.qr.set(s,u)),this.qr.set(s,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Qr=new un(pn.$r),this.Ur=new un(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new pn(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new pn(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new Oe(new Ct([])),r=new pn(s,e),o=new pn(s,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Oe(new Ct([])),r=new pn(s,e),o=new pn(s,e+1);let u=dt();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const s=new pn(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Oe.comparator(e.key,s.key)||ut(e.Yr,s.Yr)}static Kr(e,s){return ut(e.Yr,s.Yr)||Oe.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new un(pn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new EA(u,s,r,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new pn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,s){return ue.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?pp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new pn(s,0),o=new pn(s,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new un(ut);return s.forEach((o=>{const u=new pn(o,0),f=new pn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{r=r.add(g.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let u=r;Oe.isDocumentKey(u)||(u=u.child(""));const f=new pn(new Oe(u),0);let g=new un(ut);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Yr)),!0)}),f),ue.resolve(this.ti(g))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){vt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(s.mutations,(o=>{const u=new pn(o.key,s.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new pn(s,0),o=this.Zr.firstAfterOrEqual(r);return ue.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ue.resolve(r?r.document.mutableCopy():An.newInvalidDocument(s))}getEntries(e,s){let r=Pi();return s.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():An.newInvalidDocument(o))})),ue.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let u=Pi();const f=s.path,g=new Oe(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:_}}=y.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||PN(LN(_),r)<=0||(o.has(_.key)||Gd(s,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,s,r,o){He(9500)}ii(e,s){return ue.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new uj(this)}getSize(e){return ue.resolve(this.size)}}class uj extends nj{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ue.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.si=new Ca((s=>vp(s)),xp),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Sp,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),ue.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Dl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ue.resolve()}updateTargetData(e,s){return this.Pr(s),ue.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,s,r){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=s&&r.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return ue.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),ue.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ue.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return ue.resolve(r)}containsKey(e,s){return ue.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Bd(0),this.li=!1,this.li=!0,this.hi=new lj,this.referenceDelegate=e(this),this.Pi=new dj(this),this.indexManager=new QA,this.remoteDocumentCache=(function(o){return new cj(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new KA(s),this.Ii=new rj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new aj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new oj(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){je("MemoryPersistence","Starting transaction:",e);const o=new hj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,s){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class hj extends zN{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new Sp,this.Vi=null}static mi(e){return new Np(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ue.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const o=Oe.fromPath(r);return this.gi(e,o).next((u=>{u||s.removeEntry(o,Ye.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ue.or([()=>ue.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class kd{constructor(e,s){this.persistence=e,this.pi=new Ca((r=>HN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=tj(this,s)}static mi(e,s){return new kd(e,s)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return ue.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?ue.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((g=>{g||(r++,u.removeEntry(f,Ye.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=dd(e.data.value)),s}br(e,s,r){return ue.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ue.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=dt(),o=dt();for(const u of s.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ap(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return B2()?8:BN(jn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const u={result:null};return this.ys(e,s).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,s,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new fj;return this.Ss(e,s,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,s,f,g.size)}))})).next((()=>u.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(vl()<=ct.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",xl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(vl()<=ct.DEBUG&&je("QueryEngine","Query:",xl(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(vl()<=ct.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",xl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(s))):ue.resolve())}ys(e,s){if(bx(s))return ue.resolve(null);let r=li(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=qm(s,null,"F"),r=li(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=dt(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,r).next((y=>{const v=this.Ds(s,g);return this.Cs(s,v,f,y.readTime)?this.ys(e,qm(s,null,"F")):this.vs(e,v,s,y)}))))})))))}ws(e,s,r,o){return bx(s)||o.isEqual(Ye.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(s,u);return this.Cs(s,f,r,o)?ue.resolve(null):(vl()<=ct.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xl(s)),this.vs(e,f,s,VN(o,ac)).next((g=>g)))}))}Ds(e,s){let r=new un(j_(e));return s.forEach(((o,u)=>{Gd(e,u)&&(r=r.add(u))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const u=e.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,s,r){return vl()<=ct.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",xl(s)),this.ps.getDocumentsMatchingQuery(e,s,Mr.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(s.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",pj=3e8;class gj{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Ut(ut),this.xs=new Ca((u=>vp(u)),xp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ij(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function yj(i,e,s,r){return new gj(i,e,s,r)}async function W_(i,e){const s=$e(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let y=dt();for(const v of o){f.push(v.batchId);for(const _ of v.mutations)y=y.add(_.key)}for(const v of u){g.push(v.batchId);for(const _ of v.mutations)y=y.add(_.key)}return s.localDocuments.getDocuments(r,y).next((v=>({Ls:v,removedBatchIds:f,addedBatchIds:g})))}))}))}function vj(i,e){const s=$e(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,v,_){const S=v.batch,A=S.keys();let H=ue.resolve();return A.forEach((ee=>{H=H.next((()=>_.getEntry(y,ee))).next((Z=>{const P=v.docVersions.get(ee);vt(P!==null,48541),Z.version.compareTo(P)<0&&(S.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),_.addEntry(Z)))}))})),H.next((()=>g.mutationQueue.removeMutationBatch(y,S)))})(s,r,e,u).next((()=>u.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let y=dt();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function Z_(i){const e=$e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function xj(i,e){const s=$e(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const g=[];e.targetChanges.forEach(((_,S)=>{const A=o.get(S);if(!A)return;g.push(s.Pi.removeMatchingKeys(u,_.removedDocuments,S).next((()=>s.Pi.addMatchingKeys(u,_.addedDocuments,S))));let H=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?H=H.withResumeToken(En.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):_.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(_.resumeToken,r)),o=o.insert(S,H),(function(Z,P,ne){return Z.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=pj?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(A,H,_)&&g.push(s.Pi.updateTargetData(u,H))}));let y=Pi(),v=dt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(s.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(bj(u,f,e.documentUpdates).next((_=>{y=_.ks,v=_.qs}))),!r.isEqual(Ye.min())){const _=s.Pi.getLastRemoteSnapshotVersion(u).next((S=>s.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(_)}return ue.waitFor(g).next((()=>f.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,y,v))).next((()=>y))})).then((u=>(s.Ms=o,u)))}function bj(i,e,s){let r=dt(),o=dt();return s.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Pi();return s.forEach(((g,y)=>{const v=u.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Ye.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):je(jp,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function _j(i,e){const s=$e(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=pp),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function wj(i,e){const s=$e(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((u=>u?(o=u,ue.resolve(o)):s.Pi.allocateTargetId(r).next((f=>(o=new Ar(e,f,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Km(i,e,s){const r=$e(i),o=r.Ms.get(e),u=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!zl(f))throw f;je(jp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Dx(i,e,s){const r=$e(i);let o=Ye.min(),u=dt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,v,_){const S=$e(y),A=S.xs.get(_);return A!==void 0?ue.resolve(S.Ms.get(A)):S.Pi.getTargetData(v,_)})(r,f,li(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,s?o:Ye.min(),s?u:dt()))).next((g=>(Ej(r,oA(e),g),{documents:g,Qs:u})))))}function Ej(i,e,s){let r=i.Os.get(e)||Ye.min();s.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class Mx{constructor(){this.activeTargetIds=mA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tj{constructor(){this.Mo=new Mx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mx,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="ConnectivityMonitor";class Vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(Ox,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(Ox,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function $m(){return sd===null?sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,u){const f=$m(),g=this.zo(e,s.toUriEncodedString());je(vm,`Sending RPC '${e}' ${f}:`,g,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:v}=new URL(g),_=Ol(v);return this.Jo(e,g,y,r,_).then((S=>(je(vm,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw Cl(vm,`RPC '${e}' ${f} failed with error: `,S,"url: ",g,"request:",r),S}))}Ho(e,s,r,o,u,f){return this.Go(e,s,r,o,u)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,s){const r=Nj[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class Cj extends Aj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,u){const f=$m();return new Promise(((g,y)=>{const v=new t_;v.setWithCredentials(!0),v.listenOnce(n_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ud.NO_ERROR:const S=v.getResponseJson();je(Sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),g(S);break;case ud.TIMEOUT:je(Sn,`RPC '${e}' ${f} timed out`),y(new Se(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const A=v.getStatus();if(je(Sn,`RPC '${e}' ${f} failed with status:`,A,"response text:",v.getResponseText()),A>0){let H=v.getResponseJson();Array.isArray(H)&&(H=H[0]);const ee=H?.error;if(ee&&ee.status&&ee.message){const Z=(function(ne){const se=ne.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(se)>=0?se:oe.UNKNOWN})(ee.status);y(new Se(Z,ee.message))}else y(new Se(oe.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new Se(oe.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{je(Sn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);je(Sn,`RPC '${e}' ${f} sending request:`,o),v.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=$m(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=r_(),g=i_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,s,r),y.encodeInitMessageHeaders=!0;const _=u.join("");je(Sn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const S=f.createWebChannel(_,y);this.I_(S);let A=!1,H=!1;const ee=new jj({Yo:P=>{H?je(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(A||(je(Sn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),je(Sn,`RPC '${e}' stream ${o} sending:`,P),S.send(P))},Zo:()=>S.close()}),Z=(P,ne,se)=>{P.listen(ne,(ge=>{try{se(ge)}catch(de){setTimeout((()=>{throw de}),0)}}))};return Z(S,Ko.EventType.OPEN,(()=>{H||(je(Sn,`RPC '${e}' stream ${o} transport opened.`),ee.o_())})),Z(S,Ko.EventType.CLOSE,(()=>{H||(H=!0,je(Sn,`RPC '${e}' stream ${o} transport closed`),ee.a_(),this.E_(S))})),Z(S,Ko.EventType.ERROR,(P=>{H||(H=!0,Cl(Sn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),ee.a_(new Se(oe.UNAVAILABLE,"The operation could not be completed")))})),Z(S,Ko.EventType.MESSAGE,(P=>{if(!H){const ne=P.data[0];vt(!!ne,16349);const se=ne,ge=se?.error||se[0]?.error;if(ge){je(Sn,`RPC '${e}' stream ${o} received error:`,ge);const de=ge.status;let be=(function(N){const j=rn[N];if(j!==void 0)return U_(j)})(de),he=ge.message;be===void 0&&(be=oe.INTERNAL,he="Unknown error status: "+de+" with message "+ge.message),H=!0,ee.a_(new Se(be,he)),S.close()}else je(Sn,`RPC '${e}' stream ${o} received:`,ne),ee.u_(ne)}})),Z(g,s_.STAT_EVENT,(P=>{P.stat===Om.PROXY?je(Sn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Om.NOPROXY&&je(Sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(i){return new DA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,s,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&je("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="PersistentStream";class e1{constructor(e,s,r,o,u,f,g,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===oe.RESOURCE_EXHAUSTED?(Li(s.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new Se(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return je(Lx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(je(Lx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rj extends e1{constructor(e,s,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=VA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ye.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ye.min():f.readTime?oi(f.readTime):Ye.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=Ym(this.serializer),s.addTarget=(function(u,f){let g;const y=f.target;if(g=zm(y)?{documents:UA(u,y)}:{query:zA(u,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=q_(u,f.resumeToken);const v=Hm(u,f.expectedCount);v!==null&&(g.expectedCount=v)}else if(f.snapshotVersion.compareTo(Ye.min())>0){g.readTime=Id(u,f.snapshotVersion.toTimestamp());const v=Hm(u,f.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const r=qA(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=Ym(this.serializer),s.removeTarget=e,this.q_(s)}}class Ij extends e1{constructor(e,s,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=PA(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=Ym(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>LA(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{}class Dj extends kj{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Se(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Fm(s,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(oe.UNKNOWN,u.toString())}))}Ho(e,s,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Fm(s,r),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Se(oe.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Mj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Li(s),this.aa=!1):je("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class Oj{constructor(e,s,r,o,u){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Ra(this)&&(je(ja,"Restarting streams for network reachability change."),await(async function(y){const v=$e(y);v.Ea.add(4),await Ec(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Wd(v)})(this))}))})),this.Ra=new Mj(r,o)}}async function Wd(i){if(Ra(i))for(const e of i.da)await e(!0)}async function Ec(i){for(const e of i.da)await e(!1)}function t1(i,e){const s=$e(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),kp(s)?Ip(s):ql(s).O_()&&Rp(s,e))}function Cp(i,e){const s=$e(i),r=ql(s);s.Ia.delete(e),r.O_()&&n1(s,e),s.Ia.size===0&&(r.O_()?r.L_():Ra(s)&&s.Ra.set("Unknown"))}function Rp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}ql(i).Y_(e)}function n1(i,e){i.Va.Ue(e),ql(i).Z_(e)}function Ip(i){i.Va=new CA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ql(i).start(),i.Ra.ua()}function kp(i){return Ra(i)&&!ql(i).x_()&&i.Ia.size>0}function Ra(i){return $e(i).Ea.size===0}function s1(i){i.Va=void 0}async function Vj(i){i.Ra.set("Online")}async function Lj(i){i.Ia.forEach(((e,s)=>{Rp(i,e)}))}async function Pj(i,e){s1(i),kp(i)?(i.Ra.ha(e),Ip(i)):i.Ra.set("Unknown")}async function Uj(i,e,s){if(i.Ra.set("Online"),e instanceof B_&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(r){je(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(i,r)}else if(e instanceof md?i.Va.Ze(e):e instanceof z_?i.Va.st(e):i.Va.tt(e),!s.isEqual(Ye.min()))try{const r=await Z_(i.localStore);s.compareTo(r)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ia.get(v);_&&u.Ia.set(v,_.withResumeToken(y.resumeToken,f))}})),g.targetMismatches.forEach(((y,v)=>{const _=u.Ia.get(y);if(!_)return;u.Ia.set(y,_.withResumeToken(En.EMPTY_BYTE_STRING,_.snapshotVersion)),n1(u,y);const S=new Ar(_.target,y,v,_.sequenceNumber);Rp(u,S)})),u.remoteSyncer.applyRemoteEvent(g)})(i,s)}catch(r){je(ja,"Failed to raise snapshot:",r),await Dd(i,r)}}async function Dd(i,e,s){if(!zl(e))throw e;i.Ea.add(1),await Ec(i),i.Ra.set("Offline"),s||(s=()=>Z_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{je(ja,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Wd(i)}))}function i1(i,e){return e().catch((s=>Dd(i,s,e)))}async function Zd(i){const e=$e(i),s=Pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pp;for(;zj(e);)try{const o=await _j(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,Bj(e,o)}catch(o){await Dd(e,o)}r1(e)&&a1(e)}function zj(i){return Ra(i)&&i.Ta.length<10}function Bj(i,e){i.Ta.push(e);const s=Pr(i);s.O_()&&s.X_&&s.ea(e.mutations)}function r1(i){return Ra(i)&&!Pr(i).x_()&&i.Ta.length>0}function a1(i){Pr(i).start()}async function qj(i){Pr(i).ra()}async function Hj(i){const e=Pr(i);for(const s of i.Ta)e.ea(s.mutations)}async function Fj(i,e,s){const r=i.Ta.shift(),o=wp.from(r,e,s);await i1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Zd(i)}async function Gj(i,e){e&&Pr(i).X_&&await(async function(r,o){if((function(f){return NA(f)&&f!==oe.ABORTED})(o.code)){const u=r.Ta.shift();Pr(r).B_(),await i1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Zd(r)}})(i,e),r1(i)&&a1(i)}async function Px(i,e){const s=$e(i);s.asyncQueue.verifyOperationInProgress(),je(ja,"RemoteStore received new credentials");const r=Ra(s);s.Ea.add(3),await Ec(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Wd(s)}async function Yj(i,e){const s=$e(i);e?(s.Ea.delete(2),await Wd(s)):e||(s.Ea.add(2),await Ec(s),s.Ra.set("Unknown"))}function ql(i){return i.ma||(i.ma=(function(s,r,o){const u=$e(s);return u.sa(),new Rj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Vj.bind(null,i),t_:Lj.bind(null,i),r_:Pj.bind(null,i),H_:Uj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),kp(i)?Ip(i):i.Ra.set("Unknown")):(await i.ma.stop(),s1(i))}))),i.ma}function Pr(i){return i.fa||(i.fa=(function(s,r,o){const u=$e(s);return u.sa(),new Ij(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:qj.bind(null,i),r_:Gj.bind(null,i),ta:Hj.bind(null,i),na:Fj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Zd(i)):(await i.fa.stop(),i.Ta.length>0&&(je(ja,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,s,r,o,u){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,u){const f=Date.now()+r,g=new Dp(e,s,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(i,e){if(Li("AsyncQueue",`${e}: ${i}`),zl(i))return new Se(oe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Oe.comparator(s.key,r.key):(s,r)=>Oe.comparator(s.key,r.key),this.keyedMap=$o(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Nl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new Nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.ga=new Ut(Oe.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class Ml{constructor(e,s,r,o,u,f,g,y,v){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,s,r,o,u){const f=[];return s.forEach((g=>{f.push({type:0,doc:g})})),new Ml(e,s,Nl.emptySet(s),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $j{constructor(){this.queries=zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=$e(s),u=o.queries;o.queries=zx(),u.forEach(((f,g)=>{for(const y of g.Sa)y.onError(r)}))})(this,new Se(oe.ABORTED,"Firestore shutting down"))}}function zx(){return new Ca((i=>A_(i)),Fd)}async function l1(i,e){const s=$e(i);let r=3;const o=e.query;let u=s.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new Kj,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const g=Mp(f,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(g)}s.queries.set(o,u),u.Sa.push(e),e.va(s.onlineState),u.wa&&e.Fa(u.wa)&&Op(s)}async function o1(i,e){const s=$e(i),r=e.query;let o=3;const u=s.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function Qj(i,e){const s=$e(i);let r=!1;for(const o of e){const u=o.query,f=s.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(r=!0);f.wa=o}}r&&Op(s)}function Xj(i,e,s){const r=$e(i),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(s);r.queries.delete(e)}function Op(i){i.Ca.forEach((e=>{e.next()}))}var Qm,Bx;(Bx=Qm||(Qm={})).Ma="default",Bx.Cache="cache";class c1{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.key=e}}class d1{constructor(e){this.key=e}}class Wj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=j_(e),this.tu=new Nl(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new Ux,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,f=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,S)=>{const A=o.get(_),H=Gd(this.query,S)?S:null,ee=!!A&&this.mutatedKeys.has(A.key),Z=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let P=!1;A&&H?A.data.isEqual(H.data)?ee!==Z&&(r.track({type:3,doc:H}),P=!0):this.su(A,H)||(r.track({type:2,doc:H}),P=!0,(y&&this.eu(H,y)>0||v&&this.eu(H,v)<0)&&(g=!0)):!A&&H?(r.track({type:0,doc:H}),P=!0):A&&!H&&(r.track({type:1,doc:A}),P=!0,(y||v)&&(g=!0)),P&&(H?(f=f.add(H),u=Z?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:g,mutatedKeys:u}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,S)=>(function(H,ee){const Z=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:P})}};return Z(H)-Z(ee)})(_.type,S.type)||this.eu(_.doc,S.doc))),this.ou(r),o=o??!1;const g=s&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,f.length!==0||v?{snapshot:new Ml(this.query,e.tu,u,f,e.mutatedKeys,y===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new d1(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new u1(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=dt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vp="SyncEngine";class Zj{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class Jj{constructor(e){this.key=e,this.hu=!1}}class eC{constructor(e,s,r,o,u,f){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ca((g=>A_(g)),Fd),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Oe.comparator),this.Au=new Map,this.Ru=new Sp,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tC(i,e,s=!0){const r=y1(i);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await h1(r,e,s,!0),o}async function nC(i,e){const s=y1(i);await h1(s,e,!0,!1)}async function h1(i,e,s,r){const o=await wj(i.localStore,li(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,s);let g;return r&&(g=await sC(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&s&&t1(i.remoteStore,o),g}async function sC(i,e,s,r,o){i.pu=(S,A,H)=>(async function(Z,P,ne,se){let ge=P.view.ru(ne);ge.Cs&&(ge=await Dx(Z.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,ge))));const de=se&&se.targetChanges.get(P.targetId),be=se&&se.targetMismatches.get(P.targetId)!=null,he=P.view.applyChanges(ge,Z.isPrimaryClient,de,be);return Hx(Z,P.targetId,he.au),he.snapshot})(i,S,A,H);const u=await Dx(i.localStore,e,!0),f=new Wj(e,u.Qs),g=f.ru(u.documents),y=wc.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),v=f.applyChanges(g,i.isPrimaryClient,y);Hx(i,s,v.au);const _=new Zj(e,s,f);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),v.snapshot}async function iC(i,e,s){const r=$e(i),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Fd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Km(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Cp(r.remoteStore,o.targetId),Xm(r,o.targetId)})).catch(Ul)):(Xm(r,o.targetId),await Km(r.localStore,o.targetId,!0))}async function rC(i,e){const s=$e(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Cp(s.remoteStore,r.targetId))}async function aC(i,e,s){const r=fC(i);try{const o=await(function(f,g){const y=$e(f),v=Mt.now(),_=g.reduce(((H,ee)=>H.add(ee.key)),dt());let S,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let ee=Pi(),Z=dt();return y.Ns.getEntries(H,_).next((P=>{ee=P,ee.forEach(((ne,se)=>{se.isValidDocument()||(Z=Z.add(ne))}))})).next((()=>y.localDocuments.getOverlayedDocuments(H,ee))).next((P=>{S=P;const ne=[];for(const se of g){const ge=_A(se,S.get(se.key).overlayedDocument);ge!=null&&ne.push(new Hr(se.key,ge,x_(ge.value.mapValue),Dn.exists(!0)))}return y.mutationQueue.addMutationBatch(H,v,ne,g)})).next((P=>{A=P;const ne=P.applyToLocalDocumentSet(S,Z);return y.documentOverlayCache.saveOverlays(H,P.batchId,ne)}))})).then((()=>({batchId:A.batchId,changes:R_(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,g,y){let v=f.Vu[f.currentUser.toKey()];v||(v=new Ut(ut)),v=v.insert(g,y),f.Vu[f.currentUser.toKey()]=v})(r,o.batchId,s),await Tc(r,o.changes),await Zd(r.remoteStore)}catch(o){const u=Mp(o,"Failed to persist write");s.reject(u)}}async function f1(i,e){const s=$e(i);try{const r=await xj(s.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=s.Au.get(u);f&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?vt(f.hu,14607):o.removedDocuments.size>0&&(vt(f.hu,42227),f.hu=!1))})),await Tc(s,r,e)}catch(r){await Ul(r)}}function qx(i,e,s){const r=$e(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const y=$e(f);y.onlineState=g;let v=!1;y.queries.forEach(((_,S)=>{for(const A of S.Sa)A.va(g)&&(v=!0)})),v&&Op(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lC(i,e,s){const r=$e(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new Ut(Oe.comparator);f=f.insert(u,An.newNoDocument(u,Ye.min()));const g=dt().add(u),y=new Qd(Ye.min(),new Map,new Ut(ut),f,g);await f1(r,y),r.du=r.du.remove(u),r.Au.delete(e),Lp(r)}else await Km(r.localStore,e,!1).then((()=>Xm(r,e,s))).catch(Ul)}async function oC(i,e){const s=$e(i),r=e.batch.batchId;try{const o=await vj(s.localStore,e);p1(s,r,null),m1(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(s,o)}catch(o){await Ul(o)}}async function cC(i,e,s){const r=$e(i);try{const o=await(function(f,g){const y=$e(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let _;return y.mutationQueue.lookupMutationBatch(v,g).next((S=>(vt(S!==null,37113),_=S.keys(),y.mutationQueue.removeMutationBatch(v,S)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,_,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_))).next((()=>y.localDocuments.getDocuments(v,_)))}))})(r.localStore,e);p1(r,e,s),m1(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await Tc(r,o)}catch(o){await Ul(o)}}function m1(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function p1(i,e,s){const r=$e(i);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(s?u.reject(s):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Xm(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||g1(i,r)}))}function g1(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(Cp(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),Lp(i))}function Hx(i,e,s){for(const r of s)r instanceof u1?(i.Ru.addReference(r.key,e),uC(i,r)):r instanceof d1?(je(Vp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||g1(i,r.key)):He(19791,{wu:r})}function uC(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(je(Vp,"New document in limbo: "+s),i.Eu.add(r),Lp(i))}function Lp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new Oe(Ct.fromString(e)),r=i.fu.next();i.Au.set(r,new Jj(s)),i.du=i.du.insert(s,r),t1(i.remoteStore,new Ar(li(bp(s.path)),r,"TargetPurposeLimboResolution",Bd.ce))}}async function Tc(i,e,s){const r=$e(i),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,y)=>{f.push(r.pu(y,e,s).then((v=>{if((v||s)&&r.isPrimaryClient){const _=v?!v.fromCache:s?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(v){o.push(v);const _=Ap.As(y.targetId,v);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(y,v){const _=$e(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ue.forEach(v,(A=>ue.forEach(A.Es,(H=>_.persistence.referenceDelegate.addReference(S,A.targetId,H))).next((()=>ue.forEach(A.ds,(H=>_.persistence.referenceDelegate.removeReference(S,A.targetId,H)))))))))}catch(S){if(!zl(S))throw S;je(jp,"Failed to update sequence numbers: "+S)}for(const S of v){const A=S.targetId;if(!S.fromCache){const H=_.Ms.get(A),ee=H.snapshotVersion,Z=H.withLastLimboFreeSnapshotVersion(ee);_.Ms=_.Ms.insert(A,Z)}}})(r.localStore,u))}async function dC(i,e){const s=$e(i);if(!s.currentUser.isEqual(e)){je(Vp,"User change. New user:",e.toKey());const r=await W_(s.localStore,e);s.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new Se(oe.CANCELLED,f))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tc(s,r.Ls)}}function hC(i,e){const s=$e(i),r=s.Au.get(e);if(r&&r.hu)return dt().add(r.key);{let o=dt();const u=s.Iu.get(e);if(!u)return o;for(const f of u){const g=s.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function y1(i){const e=$e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=f1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lC.bind(null,e),e.Pu.H_=Qj.bind(null,e.eventManager),e.Pu.yu=Xj.bind(null,e.eventManager),e}function fC(i){const e=$e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cC.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return yj(this.persistence,new mj,e.initialUser,this.serializer)}Cu(e){return new X_(Np.mi,this.serializer)}Du(e){return new Tj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class mC extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){vt(this.persistence.referenceDelegate instanceof kd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new X_((r=>kd.mi(r,s)),this.serializer)}}class Wm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,this.syncEngine),await Yj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $j})()}createDatastore(e){const s=Xd(e.databaseInfo.databaseId),r=(function(u){return new Cj(u)})(e.databaseInfo);return(function(u,f,g,y){return new Dj(u,f,g,y)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,u,f,g){return new Oj(r,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(s=>qx(this.syncEngine,s,0)),(function(){return Vx.v()?new Vx:new Sj})())}createSyncEngine(e,s){return(function(o,u,f,g,y,v,_){const S=new eC(o,u,f,g,y,v);return _&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=$e(s);je(ja,"RemoteStore shutting down."),r.Ea.add(5),await Ec(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class pC{constructor(e,s,r,o,u){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{je(Ur,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(je(Ur,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Mp(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bm(i,e){i.asyncQueue.verifyOperationInProgress(),je(Ur,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await W_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Fx(i,e){i.asyncQueue.verifyOperationInProgress();const s=await gC(i);je(Ur,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Px(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Px(e.remoteStore,o))),i._onlineComponents=e}async function gC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){je(Ur,"Using user provided OfflineComponentProvider");try{await bm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Cl("Error using user provided cache. Falling back to memory cache: "+s),await bm(i,new Md)}}else je(Ur,"Using default OfflineComponentProvider"),await bm(i,new mC(void 0));return i._offlineComponents}async function x1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(je(Ur,"Using user provided OnlineComponentProvider"),await Fx(i,i._uninitializedComponentsProvider._online)):(je(Ur,"Using default OnlineComponentProvider"),await Fx(i,new Wm))),i._onlineComponents}function yC(i){return x1(i).then((e=>e.syncEngine))}async function Zm(i){const e=await x1(i),s=e.eventManager;return s.onListen=tC.bind(null,e.syncEngine),s.onUnlisten=iC.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=nC.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=rC.bind(null,e.syncEngine),s}function vC(i,e,s={}){const r=new kr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,v){const _=new v1({next:A=>{_.Nu(),f.enqueueAndForget((()=>o1(u,S))),A.fromCache&&y.source==="server"?v.reject(new Se(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),S=new c1(g,_,{includeMetadataChanges:!0,qa:!0});return l1(u,S)})(await Zm(i),i.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firestore.googleapis.com",Yx=!0;class Kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_1,this.ssl=Yx}else this.host=e.host,this.ssl=e.ssl??Yx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WA)throw new Se(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ON("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new SN;switch(r.type){case"firstParty":return new CN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Gx.get(s);r&&(je("ComponentProvider","Removing Datastore"),Gx.delete(s),r.terminate())})(this),Promise.resolve()}}function xC(i,e,s,r={}){i=ns(i,Jd);const o=Ol(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${s}`;o&&(hb(`https://${g}`),fb("Firestore",!0)),u.host!==_1&&u.host!==g&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:r};if(!Ea(y,f)&&(i._setSettings(y),r.mockUserToken)){let v,_;if(typeof r.mockUserToken=="string")v=r.mockUserToken,_=Nn.MOCK_USER;else{v=k2(r.mockUserToken,i._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new Se(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Nn(S)}i._authCredentials=new NN(new l_(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class $t{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(bc(s,$t._jsonSchema))return new $t(e,r||null,new Oe(Ct.fromString(s.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class Dr extends Fr{constructor(e,s,r){super(e,s,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Oe(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function Ot(i,e,...s){if(i=Qt(i),o_("collection","path",e),i instanceof Jd){const r=Ct.fromString(e,...s);return ax(r),new Dr(i,null,r)}{if(!(i instanceof $t||i instanceof Dr))throw new Se(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ct.fromString(e,...s));return ax(r),new Dr(i.firestore,null,r)}}function Kt(i,e,...s){if(i=Qt(i),arguments.length===1&&(e=mp.newId()),o_("doc","path",e),i instanceof Jd){const r=Ct.fromString(e,...s);return rx(r),new $t(i,null,new Oe(r))}{if(!(i instanceof $t||i instanceof Dr))throw new Se(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ct.fromString(e,...s));return rx(r),new $t(i.firestore,i instanceof Dr?i.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="AsyncQueue";class Qx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J_(this,"async_queue_retry"),this._c=()=>{const r=xm();r&&je($x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=xm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=xm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zl(e))throw e;je($x,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Li("INTERNAL UNHANDLED ERROR: ",Xx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Dp.createAndSchedule(this,e,s,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&He(47125,{Pc:Xx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Xx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Ui extends Jd{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Qx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qx(e),this._firestoreClient=void 0,await e}}}function bC(i,e){const s=typeof i=="object"?i:yb(),r=typeof i=="string"?i:Nd,o=ip(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=R2("firestore");u&&xC(o,...u)}return o}function eh(i){if(i._terminated)throw new Se(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||_C(i),i._firestoreClient}function _C(i){const e=i._freezeSettings(),s=(function(o,u,f,g){return new YN(o,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,b1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new pC(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(En.fromBase64String(e))}catch(s){throw new Se(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ys(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ys._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,ys._jsonSchema))return ys.fromBase64String(e.bytes)}}ys._jsonSchemaVersion="firestore/bytes/1.0",ys._jsonSchema={type:ln("string",ys._jsonSchemaVersion),bytes:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Se(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Se(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Se(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(bc(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:ln("string",ci._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new ui(e.vectorValues);throw new Se(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:ln("string",ui._jsonSchemaVersion),vectorValues:ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^__.*__$/;class EC{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,s,this.fieldTransforms):new _c(e,this.data,s,this.fieldTransforms)}}class w1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Hr(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function E1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:i})}}class Up{constructor(e,s,r,o,u,f){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Up({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(E1(this.Ac)&&wC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TC{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Xd(e)}Cc(e,s,r,o=!1){return new Up({Ac:e,methodName:s,Dc:r,path:wn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(i){const e=i._freezeSettings(),s=Xd(i._databaseId);return new TC(i._databaseId,!!e.ignoreUndefinedProperties,s)}function zp(i,e,s,r,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,s,o);Bp("Data must be an object, but it was:",f,r);const g=N1(r,f);let y,v;if(u.merge)y=new ts(f.fieldMask),v=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const S of u.mergeFields){const A=Jm(e,S,s);if(!f.contains(A))throw new Se(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);j1(_,A)||_.push(A)}y=new ts(_),v=f.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,v=f.fieldTransforms;return new EC(new qn(g),y,v)}class th extends Pp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function T1(i,e,s,r){const o=i.Cc(1,e,s);Bp("Data must be an object, but it was:",o,r);const u=[],f=qn.empty();qr(r,((y,v)=>{const _=qp(e,y,s);v=Qt(v);const S=o.yc(_);if(v instanceof th)u.push(_);else{const A=Ac(v,S);A!=null&&(u.push(_),f.set(_,A))}}));const g=new ts(u);return new w1(f,g,o.fieldTransforms)}function S1(i,e,s,r,o,u){const f=i.Cc(1,e,s),g=[Jm(e,r,s)],y=[o];if(u.length%2!=0)throw new Se(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)g.push(Jm(e,u[A])),y.push(u[A+1]);const v=[],_=qn.empty();for(let A=g.length-1;A>=0;--A)if(!j1(v,g[A])){const H=g[A];let ee=y[A];ee=Qt(ee);const Z=f.yc(H);if(ee instanceof th)v.push(H);else{const P=Ac(ee,Z);P!=null&&(v.push(H),_.set(H,P))}}const S=new ts(v);return new w1(_,S,f.fieldTransforms)}function SC(i,e,s,r=!1){return Ac(s,i.Cc(r?4:3,e))}function Ac(i,e){if(A1(i=Qt(i)))return Bp("Unsupported field value:",e,i),N1(i,e);if(i instanceof Pp)return(function(r,o){if(!E1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const g of r){let y=Ac(g,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,o){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Mt.fromDate(r);return{timestampValue:Id(o.serializer,u)}}if(r instanceof Mt){const u=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Id(o.serializer,u)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ys)return{bytesValue:q_(o.serializer,r._byteString)};if(r instanceof $t){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ui)return(function(f,g){return{mapValue:{fields:{[y_]:{stringValue:v_},[Ad]:{arrayValue:{values:f.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return _p(g.serializer,v)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${zd(r)}`)})(i,e)}function N1(i,e){const s={};return d_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(i,((r,o)=>{const u=Ac(o,e.mc(r));u!=null&&(s[r]=u)})),{mapValue:{fields:s}}}function A1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Mt||i instanceof ci||i instanceof ys||i instanceof $t||i instanceof Pp||i instanceof ui)}function Bp(i,e,s){if(!A1(s)||!c_(s)){const r=zd(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Jm(i,e,s){if((e=Qt(e))instanceof Sc)return e._internalPath;if(typeof e=="string")return qp(i,e);throw Od("Field path arguments must be of type string or ",i,!1,void 0,s)}const NC=new RegExp("[~\\*/\\[\\]]");function qp(i,e,s){if(e.search(NC)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new Sc(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Od(i,e,s,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;s&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Se(oe.INVALID_ARGUMENT,g+i+y)}function j1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,s,r,o,u){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(nh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class AC extends C1{data(){return super.data()}}function nh(i,e){return typeof e=="string"?qp(i,e):e instanceof Sc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Se(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class I1 extends Hp{}function ss(i,e,...s){let r=[];e instanceof Hp&&r.push(e),r=r.concat(s),(function(u){const f=u.filter((y=>y instanceof Fp)).length,g=u.filter((y=>y instanceof sh)).length;if(f>1||f>0&&g>0)throw new Se(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class sh extends I1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new sh(e,s,r)}_apply(e){const s=this._parse(e);return k1(e._query,s),new Fr(e.firestore,e.converter,Bm(e._query,s))}_parse(e){const s=Nc(e.firestore);return(function(u,f,g,y,v,_,S){let A;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Se(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Jx(S,_);const ee=[];for(const Z of S)ee.push(Zx(y,u,Z));A={arrayValue:{values:ee}}}else A=Zx(y,u,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Jx(S,_),A=SC(g,f,S,_==="in"||_==="not-in");return an.create(v,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function jC(i,e,s){const r=e,o=nh("where",i);return sh._create(o,r,s)}class Fp extends Hp{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Fp(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Ps.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const y of g)k1(f,y),f=Bm(f,y)})(e._query,s),new Fr(e.firestore,e.converter,Bm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends I1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Gp(e,s)}_apply(e){const s=(function(o,u,f){if(o.startAt!==null)throw new Se(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Se(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uc(u,f)})(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Bl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function xs(i,e="asc"){const s=e,r=nh("orderBy",i);return Gp._create(r,s)}function Zx(i,e,s){if(typeof(s=Qt(s))=="string"){if(s==="")throw new Se(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N_(e)&&s.indexOf("/")!==-1)throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(Ct.fromString(s));if(!Oe.isDocumentKey(r))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mx(i,new Oe(r))}if(s instanceof $t)return mx(i,s._key);throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(s)}.`)}function Jx(i,e){if(!Array.isArray(i)||i.length===0)throw new Se(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(i,e){const s=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Se(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class CC{convertValue(e,s="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return qr(e,((o,u)=>{r[o]=this.convertValue(u,s)})),r}convertVectorValue(e){const s=e.fields?.[Ad].arrayValue?.values?.map((r=>Yt(r.doubleValue)));return new ui(s)}convertGeoPoint(e){return new ci(Yt(e.latitude),Yt(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Hd(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const s=Or(e);return new Mt(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Ct.fromString(e);vt($_(r),9688,{name:e});const o=new oc(r.get(1),r.get(3)),u=new Oe(r.popFirst(5));return o.isEqual(s)||Li(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(i,e,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(e,s):i.toFirestore(e):e,r}class Xo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends C1{constructor(e,s,r,o,u,f){super(e,s,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(nh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=_a._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}_a._jsonSchemaVersion="firestore/documentSnapshot/1.0",_a._jsonSchema={type:ln("string",_a._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class pd extends _a{data(e={}){return super.data(e)}}class wa{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Xo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new pd(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Se(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const y=new pd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Xo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new pd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Xo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return g.type!==0&&(v=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),_=f.indexOf(g.doc.key)),{type:RC(g.type),doc:y,oldIndex:v,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:i})}}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:ln("string",wa._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class Kp extends CC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,s)}}function IC(i){i=ns(i,Fr);const e=ns(i.firestore,Ui),s=eh(e),r=new Kp(e);return R1(i._query),vC(s,i._query).then((o=>new wa(e,r,i,o)))}function kC(i,e,s){i=ns(i,$t);const r=ns(i.firestore,Ui),o=Yp(i.converter,e,s);return jc(r,[zp(Nc(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,Dn.none())])}function Vs(i,e,s,...r){i=ns(i,$t);const o=ns(i.firestore,Ui),u=Nc(o);let f;return f=typeof(e=Qt(e))=="string"||e instanceof Sc?S1(u,"updateDoc",i._key,e,s,r):T1(u,"updateDoc",i._key,e),jc(o,[f.toMutation(i._key,Dn.exists(!0))])}function zr(i){return jc(ns(i.firestore,Ui),[new $d(i._key,Dn.none())])}function Mi(i,e){const s=ns(i.firestore,Ui),r=Kt(i),o=Yp(i.converter,e);return jc(s,[zp(Nc(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then((()=>r))}function kn(i,...e){i=Qt(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Wx(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wx(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,g;if(i instanceof $t)f=ns(i.firestore,Ui),g=bp(i._key.path),u={next:y=>{e[r]&&e[r](DC(f,i,y))},error:e[r+1],complete:e[r+2]};else{const y=ns(i,Fr);f=ns(y.firestore,Ui),g=y._query;const v=new Kp(f);u={next:_=>{e[r]&&e[r](new wa(f,v,y,_))},error:e[r+1],complete:e[r+2]},R1(i._query)}return(function(v,_,S,A){const H=new v1(A),ee=new c1(_,H,S);return v.asyncQueue.enqueueAndForget((async()=>l1(await Zm(v),ee))),()=>{H.Nu(),v.asyncQueue.enqueueAndForget((async()=>o1(await Zm(v),ee)))}})(eh(f),g,o,u)}function jc(i,e){return(function(r,o){const u=new kr;return r.asyncQueue.enqueueAndForget((async()=>aC(await yC(r),o,u))),u.promise})(eh(i),e)}function DC(i,e,s){const r=s.docs.get(e._key),o=new Kp(i);return new _a(i,o,e._key,r,new Xo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,s,r){this._verifyNotCommitted();const o=_m(e,this._firestore),u=Yp(o.converter,s,r),f=zp(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,Dn.none())),this}update(e,s,r,...o){this._verifyNotCommitted();const u=_m(e,this._firestore);let f;return f=typeof(s=Qt(s))=="string"||s instanceof Sc?S1(this._dataReader,"WriteBatch.update",u._key,s,r,o):T1(this._dataReader,"WriteBatch.update",u._key,s),this._mutations.push(f.toMutation(u._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=_m(e,this._firestore);return this._mutations=this._mutations.concat(new $d(s._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(i,e){if((i=Qt(i)).firestore!==e)throw new Se(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(i){return eh(i=ns(i,Ui)),new MC(i,(e=>jc(i,e)))}(function(e,s=!0){(function(o){Pl=o})(Vl),jl(new Ta("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new Ui(new AN(r.getProvider("auth-internal")),new RN(f,r.getProvider("app-check-internal")),(function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Se(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(v.options.projectId,_)})(f,o),f);return u={useFetchStreams:s,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Rr(tx,nx,e),Rr(tx,nx,"esm2020")})();const VC={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},D1=gb(VC),vs=_N(D1),Fe=bC(D1),wm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function LC(){const[i,e]=J.useState(!0),[s,r]=J.useState(""),[o,u]=J.useState(""),[f,g]=J.useState(""),[y,v]=J.useState(""),[_,S]=J.useState(!1),A=async Z=>{Z.preventDefault(),g(""),v(""),S(!0);try{if(i)await aS(vs,s,o);else{const ne=(await rS(vs,s,o)).user;await kC(Kt(Fe,"users",ne.uid),{email:ne.email,role:"user",createdAt:new Date().toISOString()}),v("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(P){g(ee(P.code))}finally{S(!1)}},H=async()=>{if(!s){g("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await iS(vs,s),v("ifre sfrlama balants e-posta adresinize gnderildi."),g("")}catch(Z){g(ee(Z.code))}},ee=Z=>{switch(Z){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+Z}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),y&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:y}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:Z=>r(Z.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:Z=>u(Z.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:H,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(wm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const wr={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},PC=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(g=>g.value))||100,u=i.map((g,y)=>{const v=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-g.value/o*(e-r*2),S=isNaN(v)?r:v,A=isNaN(_)?e-r:_;return`${S},${A}`}).join(" "),f=`${u} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:u,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((g,y)=>{const v=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-g.value/o*(e-r*2),S=isNaN(v)?r:v,A=isNaN(_)?e-r:_;return c.jsx("circle",{cx:S,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},y)})]})},id=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(wr.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function eb({onNavigate:i=()=>{}}){const[e,s]=J.useState(null),[r,o]=J.useState(!0),[u,f]=J.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[g,y]=J.useState([]),[v,_]=J.useState([]),[S,A]=J.useState([]),[H,ee]=J.useState([]);return J.useEffect(()=>{const Z=vs.onAuthStateChanged(de=>{s(de),o(!1)}),P=kn(ss(Ot(Fe,"siparisler"),xs("createdAt","desc")),de=>{const be=de.docs.map(N=>N.data());_(be.slice(0,5));const he={};be.forEach(N=>{const j=N.date?N.date.slice(0,7):"N/A";he[j]=(he[j]||0)+1});const C=Object.entries(he).map(([N,j])=>({label:N,value:j})).sort((N,j)=>N.label.localeCompare(j.label));ee(C),f(N=>({...N,activeOrders:be.length}))}),ne=kn(Ot(Fe,"teklifler"),de=>{f(be=>({...be,pendingProposals:de.size}))}),se=kn(Ot(Fe,"employees"),de=>{const be=de.docs.map(N=>N.data());f(N=>({...N,totalWorkers:be.length}));const he=new Date().toISOString().split("T")[0],C=be.filter(N=>{const j=N.attendance?.[he];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});y(C)}),ge=kn(Ot(Fe,"inventory_movements"),de=>{const be=de.docs.map(N=>N.data()),he={};be.forEach(N=>{const j=Number(N.quantity)||0,k=N.action==="add"?j:-j;he[N.productName]||(he[N.productName]=0),he[N.productName]+=k});const C=Object.entries(he).filter(([N,j])=>j<100).map(([N,j])=>({name:N,qty:j}));A(C.slice(0,5)),f(N=>({...N,inventoryCount:Object.keys(he).length}))});return()=>{Z(),P(),ne(),se(),ge()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(wr.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(id,{title:"Aktif Sipariler",value:u.activeOrders,subtext:"Geen aya gre art",icon:wr.Cart,color:"bg-indigo-600"}),c.jsx(id,{title:"Bekleyen Teklifler",value:u.pendingProposals,subtext:"Onay bekleyen",icon:wr.Document,color:"bg-purple-600"}),c.jsx(id,{title:"Toplam Stok Kalemi",value:u.inventoryCount,subtext:"Kritik seviye kontrol",icon:wr.Box,color:"bg-emerald-600"}),c.jsx(id,{title:"Toplam Personel",value:u.totalWorkers,subtext:"Aktif alan",icon:wr.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(PC,{data:H})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[v.map((Z,P)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",Z.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",Z.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:Z.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},P)),v.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(wr.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:g.length>0?g.map((Z,P)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:Z.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:Z.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:Z.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},P)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(wr.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:S.length>0?S.map((Z,P)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Z.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[Z.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},P)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ae={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Dt=rb.forwardRef(({className:i="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),UC=rb.forwardRef(({className:i="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),cn=({children:i,variant:e="primary",className:s="",...r})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...r,children:i})},M1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Al=({options:i,selected:e,onChange:s,placeholder:r="Seiniz...",isMulti:o=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[g,y]=J.useState(!1),[v,_]=J.useState(""),S=J.useRef(null);J.useEffect(()=>{const P=ne=>{S.current&&!S.current.contains(ne.target)&&y(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const A=P=>{if(o){const ne=e.includes(P)?e.filter(se=>se!==P):[...e,P];s(ne)}else s(P),y(!1),_("")},H=P=>{_(P.target.value),f&&s(P.target.value)},ee=o?e.length>0?`(${e.length})`:"":e||r,Z=i.filter(P=>P.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":v.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:S,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Dt,{placeholder:r,value:e,onChange:H,onFocus:()=>y(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>y(!g),children:c.jsx(Ae.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>y(!g),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Ae.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${r} ${ee}`:ee})]}),c.jsx(Ae.ChevronDown,{})]}),g&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:v,onChange:P=>_(P.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[Z.map(P=>{const ne=o?e.includes(P):e===P;return c.jsxs("div",{onClick:()=>f?s(P):A(P),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ne?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ne?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ne&&c.jsx(Ae.Check,{})}),c.jsx("span",{className:"truncate",children:P})]}),u&&c.jsx("button",{type:"button",onClick:se=>{se.stopPropagation(),u(P)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Ae.Trash,{})})]},P)}),Z.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},fc=({isOpen:i,onClose:e,title:s,children:r,maxWidth:o="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,ih=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),rh=({startDate:i,endDate:e,onStartChange:s,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>r(o.target.value)})]}),ep=i=>i==="USD"?"$":i==="EUR"?"":"",es=(i,e="TRY")=>{const s=ep(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" "+s},Em=i=>i===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),zC=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function BC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState([]),[y,v]=J.useState(!1),[_,S]=J.useState({start:"",end:""}),[A,H]=J.useState({}),[ee,Z]=J.useState({}),[P,ne]=J.useState(!1),[se,ge]=J.useState(!1),[de,be]=J.useState(!1),[he,C]=J.useState(null),[N,j]=J.useState(null),[k,R]=J.useState(null),[V,I]=J.useState(null),me=Y=>{I(Y)},ze=Y=>{Y.preventDefault()},K=Y=>{if(V===null)return;const pe=[...ae.items],ke=pe[V];pe.splice(V,1),pe.splice(Y,0,ke),xe({...ae,items:pe}),I(null)},[ae,xe]=J.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[De,Ge]=J.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[E,L]=J.useState(null),[$,M]=J.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]});if(J.useEffect(()=>{const Y=vs.onAuthStateChanged(Ne=>{e(Ne),r(!1)}),pe=ss(Ot(Fe,"customers"),xs("createdAt","desc")),ke=kn(pe,Ne=>{u(Ne.docs.map(Ve=>({id:Ve.id,...Ve.data()})))}),Je=ss(Ot(Fe,"sales"),xs("createdAt","desc")),Ue=kn(Je,Ne=>{g(Ne.docs.map(Ve=>({id:Ve.id,...Ve.data()})))});return()=>{Y(),ke(),Ue()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ae.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const te=Y=>{const pe=parseFloat(Y.qty)||0,ke=parseFloat(Y.unitPrice)||0,Je=parseFloat(Y.vatRate)||0,Ue=pe*ke,Ne=Ue*(Je/100);return Ue+Ne},fe=Y=>{if(!Y)return{subtotal:0,totalVAT:0,grandTotal:0};const pe=Y.reduce((Je,Ue)=>Je+(parseFloat(Ue.qty)||0)*(parseFloat(Ue.unitPrice)||0),0),ke=Y.reduce((Je,Ue)=>Je+te(Ue),0);return{subtotal:pe,totalVAT:ke-pe,grandTotal:ke}},_e=Y=>Y?Y.reduce((pe,ke)=>pe+te(ke),0):0,Be=Y=>{const pe=f.filter(Je=>Je.customerId===Y);let ke=0;return pe.forEach(Je=>{if(Je.type==="payment"){const Ue=parseFloat(Je.amount)||0;Je.direction==="in"?ke-=Ue:ke+=Ue}else{const Ue=_e(Je.items);Je.transactionType==="purchase"?ke-=Ue:ke+=Ue}}),ke},Le=Y=>{H(pe=>({...pe,[Y]:!pe[Y]}))},W=Y=>{let pe=f.filter(Ue=>Ue.customerId===Y);pe.sort((Ue,Ne)=>new Date(Ue.date)-new Date(Ne.date));let ke=0;const Je=[];return pe.forEach(Ue=>{if(Ue.type==="payment"){const Ne=parseFloat(Ue.amount)||0,Ve=Ue.direction==="out";Ve?ke+=Ne:ke-=Ne,Je.push({docNo:Ue.docNo||"-",date:Ue.date,action:Ve?"DEME YAPILDI":"DEME ALINDI",type:Ue.paymentMethod||"-",note:Ue.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:Ve?Ne:0,alacak:Ve?0:Ne,balance:ke})}else{const Ne=Ue.transactionType==="purchase",Ve=Ne?"ALI":"SATI";Ue.items?.forEach(Xe=>{const nt=te(Xe);Ne?ke-=nt:ke+=nt,Je.push({docNo:Ue.docNo,date:Ue.date,action:Ve,type:"-",note:Ue.note||"",ek:Xe.ek||"",desc:Xe.name,qty:Xe.qty,unitPrice:Xe.unitPrice,borc:Ne?0:nt,alacak:Ne?nt:0,balance:ke})})}}),Je},we=()=>{R(null),Ge({name:"",company:"",phone:"",email:"",currency:"TRY"}),ge(!0)},Ee=Y=>{R(Y),Ge({name:Y.name,company:Y.company,phone:Y.phone,email:Y.email,currency:Y.currency||"TRY"}),ge(!0)},G=async Y=>{Y.preventDefault();try{const pe={...De,updatedAt:new Date().toISOString()};k?await Vs(Kt(Fe,"customers",k.id),pe):await Mi(Ot(Fe,"customers"),{...pe,createdAt:new Date().toISOString()}),ge(!1)}catch(pe){alert("Hata: "+pe.message)}},ye=async Y=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await zr(Kt(Fe,"customers",Y))},le=Y=>{C(Y),L(null);const pe="TH-"+Date.now().toString().slice(-6);M({docNo:pe,amount:0,formattedAmount:Em(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),be(!0)},Ce=(Y,pe)=>{C(pe),L(Y),M({docNo:Y.docNo||"",amount:Y.amount,formattedAmount:Em(Y.amount),type:Y.paymentMethod,direction:Y.direction||"in",note:Y.note,date:Y.date}),be(!0)},Qe=Y=>{let pe=Y.target.value.replace(/\D/g,"");pe===""&&(pe="0");const ke=parseInt(pe,10)/100;M({...$,amount:ke,formattedAmount:Em(ke)})},Te=async Y=>{if(Y.preventDefault(),!!he)try{const pe={customerId:he.id,type:"payment",docNo:$.docNo,amount:$.amount,paymentMethod:$.type,direction:$.direction,note:$.note,date:$.date,createdAt:E?E.createdAt:new Date().toISOString()};E?await Vs(Kt(Fe,"sales",E.id),pe):await Mi(Ot(Fe,"sales"),pe),be(!1)}catch(pe){alert("Hata: "+pe.message)}},tt=Y=>{C(Y),j(null);const pe="DOC-"+Date.now().toString().slice(-6);xe({docNo:pe,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),ne(!0)},rt=(Y,pe)=>{C(pe),j(Y);const ke=(Y.items||[]).map(Je=>({...Je,ek:Je.ek||""}));xe({docNo:Y.docNo,transactionType:Y.transactionType||"sale",date:Y.date,description:Y.description,status:Y.status,items:ke}),ne(!0)},Vt=async Y=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await zr(Kt(Fe,"sales",Y))}catch(pe){alert("Hata: "+pe.message)}},Hi=async Y=>{Y.preventDefault();try{const pe={customerId:he.id,...ae,type:"sale",createdAt:N?N.createdAt:new Date().toISOString()};N?await Vs(Kt(Fe,"sales",N.id),pe):await Mi(Ot(Fe,"sales"),pe),ne(!1)}catch(pe){alert("Hata: "+pe.message)}},Cn=(Y,pe,ke)=>{const Je=[...ae.items];Je[Y][pe]=ke,xe({...ae,items:Je})},zt=()=>xe({...ae,items:[...ae.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20,total:0}]}),bs=Y=>xe({...ae,items:ae.items.filter((pe,ke)=>ke!==Y)}),_s=Y=>{const pe=W(Y.id),ke=Y.currency||"TRY",Je=ep(ke);let Ue="data:text/csv;charset=utf-8,\uFEFF";Ue+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,pe.forEach(Xe=>{const nt=at=>es(Math.abs(at),ke).replace(Je,"").trim(),Es=(Xe.balance<0?"-":"")+nt(Xe.balance),Hn=[`"${Xe.date}"`,`"${Xe.docNo}"`,`"${Xe.action}"`,`"${Xe.type}"`,`"${Xe.note}"`,`"${Xe.ek}"`,`"${Xe.desc}"`,`"${Xe.qty}"`,`"${Xe.unitPrice!=="-"?nt(parseFloat(Xe.unitPrice)):"-"}"`,`"${nt(Xe.borc)}"`,`"${nt(Xe.alacak)}"`,`"${Es}"`].join(",");Ue+=Hn+`
`});const Ne=encodeURI(Ue),Ve=document.createElement("a");Ve.setAttribute("href",Ne),Ve.setAttribute("download",`${Y.name}_Ekstre.csv`),document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve)},ws=(Y,pe=null)=>{const Je=W(Y.id).filter(at=>pe?at.docNo===pe:!(_.start&&at.date<_.start||_.end&&at.date>_.end)),Ue=[];let Ne=null;Je.forEach(at=>{(!Ne||Ne.docNo!==at.docNo||Ne.action!==at.action)&&(Ne&&Ue.push(Ne),Ne={docNo:at.docNo,date:at.date,action:at.action,type:at.type,items:[]}),Ne.items.push(at)}),Ne&&Ue.push(Ne);const Ve=window.open("","","height=800,width=1000");if(!Ve)return;const Xe=at=>{if(!at)return"-";const Nt=new Date(at);return`${String(Nt.getDate()).padStart(2,"0")}/${String(Nt.getMonth()+1).padStart(2,"0")}/${String(Nt.getFullYear()).slice(2)}`},nt=Je.length>0?Je[Je.length-1].balance:0,Es=pe?Je.reduce((at,Nt)=>at+(Nt.borc||0)+(Nt.alacak||0),0):0,Hn=`
      <html><head><title>Ekstre - ${Y.name}</title>
      <style>
        @page { size: A4; margin: 10mm; }
        body { font-family: 'Helvetica', sans-serif; padding: 10px; color: #000; font-size: 10px; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
        .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
        .company-info p { margin: 0; font-size: 9pt; color: #333; }
        .report-info { text-align: right; }
        .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
        
        /* Transaction Group Styling */
        .transaction-block { margin-bottom: 20px; page-break-inside: avoid; }
        
        .transaction-header {
            background-color: #e5e7eb;
            border: 1px solid #999;
            border-bottom: none;
            padding: 8px;
            font-size: 11pt;
            font-weight: bold;
            display: flex;
            gap: 30px;
        }

        /* Table Styling */
        table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
        
        /* THEAD tekrar iin */
        thead { display: table-header-group; }
        tr { page-break-inside: avoid; }
        
        th { 
            background-color: #f3f4f6; 
            border-bottom: 1px solid #999; 
            padding: 5px; 
            text-align: left; 
            font-weight: bold; 
            font-size: 9pt;
        }
        
        td { 
            border-bottom: 1px solid #ccc; 
            padding: 5px; 
            vertical-align: top; 
            font-size: 9pt;
        }

        .right { text-align: right; }
        .bold { font-weight: bold; }
        .col-desc { white-space: normal; overflow-wrap: break-word; }
        
        /* Footer Balance */
        .balance-container {
           margin-top: 20px; 
           text-align: right; 
           font-size: 12pt;
           border-top: 2px solid #000;
           padding-top: 10px;
        }
      </style>
      </head><body>
        
        <div class="header">
          <div class="company-info">
            <h1>ERCELEBILER AHSAP</h1>
            <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
            <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
          </div>
          <div class="report-info">
            <h2>${pe?"LEM DETAYI":"HESAP EKSTRES"}</h2>
            <p>Sayn: <strong>${Y.name}</strong></p>
            <p>${_.start?Xe(_.start):""} - ${_.end?Xe(_.end):"Tm"}</p>
          </div>
        </div>

        <!-- GRUPLANMI VERLER YAZDIR -->
        ${Ue.map(at=>{const Nt=at.action.includes("DEME")||at.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII (TARIH | BELGE | ISLEM) -->
                <div class="transaction-header">
                    <span style="width: 100px;">${Xe(at.date)}</span>
                    <span style="width: 120px;">#${at.docNo}</span>
                    <span>${at.action} ${Nt?`(${at.type})`:""}</span>
                </div>

                <!-- 2. ERK TABLOSU -->
                <table>
                    <colgroup>
                        <col style="width: 15%;"> <!-- Tip / Ek -->
                        <col style="width: auto;"> <!-- Aklama (En Geni) -->
                        <col style="width: 10%;"> <!-- Miktar -->
                        <col style="width: 15%;"> <!-- B.Fiyat -->
                        <col style="width: 15%;"> <!-- Tutar (B) -->
                    </colgroup>
                    <thead>
                        <tr>
                            <th>TP / EK</th>
                            <th>AIKLAMA</th>
                            <th class="right">MK.</th>
                            <th class="right">B.FYAT</th>
                            <th class="right">TUTAR</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${at.items.map(Rt=>{const At=Rt.borc>0?Rt.borc:Rt.alacak,dn=Nt&&Rt.note||Rt.desc;return`
                            <tr>
                                <td>${Nt?"-":Rt.ek||"-"}</td>
                                <td class="col-desc">${dn}</td>
                                <td class="right">${Rt.qty!=="-"?Rt.qty:"-"}</td>
                                <td class="right">${Rt.unitPrice!=="-"?es(Rt.unitPrice).replace(" ",""):"-"}</td>
                                <td class="right bold">${es(At)}</td>
                            </tr>
                            `}).join("")}
                    </tbody>
                </table>
            </div>
            `}).join("")}

        <div class="balance-container">
           <strong>${pe?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
           <span style="font-weight: bold; margin-left: 10px; color:${(pe?Es:nt)>0?"#dc2626":"#059669"}">
             ${pe?es(Es):(nt<0?"-":"")+es(Math.abs(nt))+(nt>0?" (Bor)":" (Alacak)")}
           </span>
        </div>

      </body></html>
    `;Ve.document.write(Hn),setTimeout(()=>{Ve.document.close(),Ve.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:Y=>S({..._,start:Y}),onEndChange:Y=>S({..._,end:Y})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(M1,{checked:y,onChange:v,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:we,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ae.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(Y=>{const pe=f.filter(Ne=>{const Ve=Ne.customerId===Y.id;let Xe=!0;return _.start&&Ne.date<_.start&&(Xe=!1),_.end&&Ne.date>_.end&&(Xe=!1),Ve&&Xe}).sort((Ne,Ve)=>new Date(Ve.date)-new Date(Ne.date)),ke=Be(Y.id),Je=A[Y.id],Ue=Y.currency||"TRY";return c.jsxs(ih,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Le(Y.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ae.User,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:Y.name}),c.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ee(Y)},className:"text-gray-400 hover:text-indigo-500 transition-colors",children:c.jsx(Ae.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:Y.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Je?c.jsx(Ae.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ae.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${ke>0?"text-emerald-600":"text-red-500"}`,children:es(ke,Ue)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:ke>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(cn,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>le(Y),children:[c.jsx(Ae.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(cn,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>tt(Y),children:[c.jsx(Ae.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>ws(Y),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ae.Printer,{})}),c.jsx("button",{onClick:()=>_s(Y),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ae.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>ye(Y.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ae.Trash,{})})]})]})]})]}),Je&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:pe.map(Ne=>{const Ve=Ne.type==="payment",Xe=Ne.transactionType==="purchase",nt=Ne.direction==="out",Es=Ve?Ne.amount:_e(Ne.items),Hn=ee[Ne.id];let at="",Nt="",Rt="bg-indigo-400",At=`SATI #${Ne.docNo}`,dn="+";return Ve?nt?(At="DEME YAPILDI",at="bg-emerald-50/30",Nt="text-emerald-600",Rt="bg-emerald-400",dn="+"):(At="DEME ALINDI",at="bg-red-50/30",Nt="text-red-500",Rt="bg-red-400",dn="-"):Xe?(at="bg-red-50/30",Nt="text-red-500",Rt="bg-red-400",At=`ALI #${Ne.docNo}`,dn="-"):(Nt="text-emerald-600",Rt="bg-emerald-400",dn="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${at}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Rt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:At}),Ve&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:Ne.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:zC(Ne.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ve?Ne.note||"-":`${Ne.items?.length||0} Kalem rn`}),!Ve&&c.jsxs("button",{onClick:()=>Z(Xt=>({...Xt,[Ne.id]:!Xt[Ne.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[Hn?c.jsx(Ae.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(Ae.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${Nt}`,children:[dn,es(Es,Ue)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>ws(Y,Ne.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(Ae.Printer,{})}),Ve?c.jsx("button",{onClick:()=>Ce(Ne,Y),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ae.Edit,{})}):c.jsx("button",{onClick:()=>rt(Ne,Y),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>Vt(Ne.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ae.Trash,{})})]})]})]}),Hn&&!Ve&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:Ne.items?.map((Xt,Fn)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:Xt.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:Xt.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:Xt.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:es(Xt.unitPrice,Ue)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:es(te(Xt),Ue)})]},Fn))})]})})})]},Ne.id)})})]},Y.id)})}),se&&c.jsx(fc,{isOpen:se,onClose:()=>ge(!1),title:k?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:G,className:"space-y-4",children:[c.jsx(Dt,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:De.name,onChange:Y=>Ge({...De,name:Y.target.value})}),c.jsx(Dt,{placeholder:"Firma (Opsiyonel)",value:De.company,onChange:Y=>Ge({...De,company:Y.target.value})}),c.jsx(Dt,{placeholder:"Telefon",value:De.phone,onChange:Y=>Ge({...De,phone:Y.target.value})}),c.jsx(Dt,{placeholder:"E-Posta",value:De.email,onChange:Y=>Ge({...De,email:Y.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(Y=>c.jsx("button",{type:"button",onClick:()=>Ge({...De,currency:Y}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${De.currency===Y?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Y},Y))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(cn,{variant:"secondary",type:"button",onClick:()=>ge(!1),children:"ptal"}),c.jsx(cn,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),de&&c.jsxs(fc,{isOpen:de,onClose:()=>be(!1),title:E?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:he?.name}),c.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>M({...$,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${$.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>M({...$,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${$.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","KrediK","ek"].map(Y=>c.jsx("button",{type:"button",onClick:()=>M({...$,type:Y}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${$.type===Y?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:Y},Y))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${$.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:$.formattedAmount,onChange:Qe}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:ep(he?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(Dt,{placeholder:"Belge No",value:$.docNo,onChange:Y=>M({...$,docNo:Y.target.value})}),c.jsx(Dt,{type:"date",required:!0,value:$.date,onChange:Y=>M({...$,date:Y.target.value})})]}),c.jsx(Dt,{placeholder:"Not (Opsiyonel)",value:$.note,onChange:Y=>M({...$,note:Y.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(cn,{variant:"secondary",type:"button",onClick:()=>be(!1),children:"ptal"}),c.jsx(cn,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),P&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:Hi,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:N?"lemi Dzenle":"Yeni lem"}),"                                ",c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>xe({...ae,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ae.transactionType==="sale"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP"}),c.jsx("button",{type:"button",onClick:()=>xe({...ae,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ae.transactionType==="purchase"?"bg-white text-amber-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP"})]})]}),c.jsx("button",{type:"button",onClick:()=>ne(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Dt,{value:ae.docNo,onChange:Y=>xe({...ae,docNo:Y.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Dt,{type:"date",required:!0,value:ae.date,onChange:Y=>xe({...ae,date:Y.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Dt,{value:ae.description,onChange:Y=>xe({...ae,description:Y.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}})," ",c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{})," ",c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:ae.items.map((Y,pe)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>me(pe),onDragOver:ze,onDrop:()=>K(pe),style:{opacity:V===pe?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:Y.ek,onChange:ke=>Cn(pe,"ek",ke.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:Y.name,onChange:ke=>Cn(pe,"name",ke.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:Y.qty,onChange:ke=>Cn(pe,"qty",ke.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:Y.unitPrice,onChange:ke=>Cn(pe,"unitPrice",ke.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:Y.vatRate,onChange:ke=>Cn(pe,"vatRate",ke.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:es(te(Y))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>bs(pe),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ae.Trash,{})})})]},pe))})]}),c.jsx("button",{type:"button",onClick:zt,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:es(fe(ae.items).subtotal,he?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:es(fe(ae.items).totalVAT,he?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:es(fe(ae.items).grandTotal,he?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>ne(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const tb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},nb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function qC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState([]),[y,v]=J.useState({start:"",end:""}),[_,S]=J.useState(!1),[A,H]=J.useState(!1),[ee,Z]=J.useState(!1),[P,ne]=J.useState({}),[se,ge]=J.useState({}),de=J.useRef(null),[be,he]=J.useState(null),[C,N]=J.useState(null),[j,k]=J.useState({en:6,boy:4}),[R,V]=J.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=J.useMemo(()=>f.map(G=>G.name).sort(),[f]);J.useEffect(()=>{const G=vs.onAuthStateChanged(Te=>{e(Te),r(!1)}),ye=ss(Ot(Fe,"customers"),xs("name","asc")),le=kn(ye,Te=>{g(Te.docs.map(tt=>({id:tt.id,...tt.data()})))}),Ce=ss(Ot(Fe,"siparisler"),xs("createdAt","desc")),Qe=kn(Ce,Te=>{u(Te.docs.map(tt=>({id:tt.id,...tt.data()})))});return()=>{G(),le(),Qe()}},[]);const me=J.useMemo(()=>{const G=[...f],ye=new Set(f.map(le=>le.id));return o.forEach(le=>{le.customerId&&!ye.has(le.customerId)&&(G.find(Ce=>Ce.id===le.customerId)||G.push({id:le.customerId,name:le.customerId,company:"Kaytsz (Manuel)"}))}),G.sort((le,Ce)=>le.name.localeCompare(Ce.name))},[o,f]);if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const ze=i?.email==="furkan@avci.jp",K=G=>{if(!G)return;const ye=new FileReader;ye.onload=le=>{const Ce=new Image;Ce.onload=()=>{const Qe=document.createElement("canvas"),Te=800,tt=800;let rt=Ce.width,Vt=Ce.height;rt>Vt?rt>Te&&(Vt*=Te/rt,rt=Te):Vt>tt&&(rt*=tt/Vt,Vt=tt),Qe.width=rt,Qe.height=Vt,Qe.getContext("2d").drawImage(Ce,0,0,rt,Vt);const Cn=Qe.toDataURL("image/jpeg",.8);V(zt=>({...zt,image:Cn}))},Ce.src=le.target.result},ye.readAsDataURL(G)},ae=G=>{G.preventDefault(),Z(!0)},xe=()=>Z(!1),De=G=>{G.preventDefault(),Z(!1),G.dataTransfer.files&&G.dataTransfer.files[0]&&K(G.dataTransfer.files[0])},Ge=G=>{G.clipboardData.files&&G.clipboardData.files[0]&&K(G.clipboardData.files[0])},E=()=>{he(null);const G="SP-"+Date.now().toString().slice(-6);V({siparisNo:G,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),S(!0)},L=G=>{he(G);const ye=f.find(Ce=>Ce.id===G.customerId),le=ye?ye.name:G.customerId;V({siparisNo:G.siparisNo,customerId:le,date:G.date,note:G.note||"",image:G.image,items:G.items||[]}),S(!0)},$=async G=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await zr(Kt(Fe,"siparisler",G))}catch(ye){alert(ye.message)}},M=async G=>{if(G.preventDefault(),!R.customerId){alert("Ltfen mteri giriniz.");return}try{const ye=f.find(Qe=>Qe.name===R.customerId),le=ye?ye.id:R.customerId,Ce={...R,customerId:le,createdAt:be?be.createdAt:new Date().toISOString()};be?await Vs(Kt(Fe,"siparisler",be.id),Ce):await Mi(Ot(Fe,"siparisler"),{...Ce,productionStatus:{}}),S(!1)}catch(ye){alert(ye.message)}},te=(G,ye,le)=>{const Ce=[...R.items],Qe=Ce[G];if(Qe[ye]=le,ye==="en1"){const Te=parseFloat(le);isNaN(Te)?le===""&&(Qe.en2=""):Qe.en2=Te-j.en}if(ye==="boy1"){const Te=parseFloat(le);isNaN(Te)?le===""&&(Qe.boy2=""):Qe.boy2=Te-j.boy}V({...R,items:Ce})},fe=()=>{V({...R,items:[...R.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},_e=()=>{if(R.items.length===0)return;const ye={...R.items[R.items.length-1]};V({...R,items:[...R.items,ye]})},Be=G=>{const ye=R.items.filter((le,Ce)=>Ce!==G);V({...R,items:ye})},Le=(G,ye)=>{const le=parseFloat(ye)||0,Ce={...j,[G]:le};k(Ce);const Qe=R.items.map(Te=>({...Te,en2:Te.en1?parseFloat(Te.en1)-Ce.en:Te.en2,boy2:Te.boy1?parseFloat(Te.boy1)-Ce.boy:Te.boy2}));V({...R,items:Qe})},W=G=>{N(G),H(!0)},we=async(G,ye)=>{if(!C)return;const le=C.productionStatus||{},Ce=le[G]||{},Qe={...le,[G]:{...Ce,[ye]:!Ce[ye]}};N({...C,productionStatus:Qe}),await Vs(Kt(Fe,"siparisler",C.id),{productionStatus:Qe})},Ee=G=>{const ye=f.find(Te=>Te.id===G.customerId),le=ye?ye.name:G.customerId||"simsiz";f.find(Te=>Te.id===G.customerId);const Ce=window.open("","","height=800,width=1000");if(!Ce){alert("Pop-up engelleyiciyi kapatn.");return}const Qe=`
      <html><head><title>Sipari - ${G.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 16px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: normal; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 10px; font-size: 16px; word-wrap: break-word; border: 5px solid #eee; padding: 1px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${le}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${G.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${nb(G.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map(Te=>`
              <tr>
                <td class="group-kasa">${Te.en1||"-"}</td>
                <td class="group-kasa">${Te.boy1||"-"}</td>
                <td class="group-kasa">${Te.genislik||"-"}</td>
                <td>${Te.takim||""}</td>
                <td class="col-desc">${Te.aciklama||""}</td>
                <td class="group-net"><strong>${Te.en2||""}</strong></td>
                <td class="group-net"><strong>${Te.boy2||""}</strong></td>
                <td>${Te.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${G.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${G.note}
          </div>
        `:""}

        ${G.image?`
          <div class="door-image-container">
            <img src="${G.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ce.document.write(Qe),Ce.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Ge,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:y.start,endDate:y.end,onStartChange:G=>v({...y,start:G}),onEndChange:G=>v({...y,end:G})}),ze&&c.jsxs("button",{onClick:E,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ae.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:me.map(G=>{const ye=o.filter(le=>{const Ce=le.customerId===G.id;let Qe=!0;return y.start&&(Qe=Qe&&le.date>=y.start),y.end&&(Qe=Qe&&le.date<=y.end),Ce&&Qe});return ye.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Ae.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:G.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[ye.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:ye.map(le=>{const Ce=P[le.id],Qe=se[le.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:le.image?c.jsx("img",{src:le.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",le.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:nb(le.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ne(Te=>({...Te,[le.id]:!Te[le.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ce?c.jsx(Ae.ChevronUp,{}):c.jsx(Ae.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>ge(Te=>({...Te,[le.id]:!Te[le.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Qe?c.jsx(Ae.ChevronUp,{}):c.jsx(Ae.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>W(le),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Ae.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Ee(le),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Printer,{})}),ze&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>L(le),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>$(le.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Trash,{})})]})]})]}),Ce&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:le.items?.map((Te,tt)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Te.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Te.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Te.en1||"-"," x ",Te.boy1||"-"," x ",Te.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Te.en2," x ",Te.boy2]}),c.jsx("td",{className:"py-2",children:Te.sekil||"-"})]},tt))})]})}),Qe&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(tb).map(([Te,tt])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:tt.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:tt.steps.map(rt=>{const Vt=le.productionStatus?.[Te]?.[rt.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:Vt?"text-purple-700 font-medium":"text-gray-400",children:rt.label}),Vt?c.jsx(Ae.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Ae.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},rt.id)})})]},Te))})})]},le.id)})})]},G.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:M,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:be?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:R.siparisNo,onChange:G=>V({...R,siparisNo:G.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Al,{options:I,selected:R.customerId,onChange:G=>V({...R,customerId:G}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:G=>V({...R,date:G.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${ee?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:ae,onDragLeave:xe,onDrop:De,children:[c.jsx("input",{ref:de,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:G=>K(G.target.files[0])}),R.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:R.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ae.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:ee?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:R.note,onChange:G=>V({...R,note:G.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:G=>Le("en",G.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:G=>Le("boy",G.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map((G,ye)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:G.en1,onChange:le=>te(ye,"en1",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:G.boy1,onChange:le=>te(ye,"boy1",le.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:G.genislik,onChange:le=>te(ye,"genislik",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:G.takim,onChange:le=>te(ye,"takim",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:G.aciklama,onChange:le=>te(ye,"aciklama",le.target.value),onInput:le=>{le.target.style.height="auto",le.target.style.height=le.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${ye}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:G.sekil,onChange:le=>te(ye,"sekil",le.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${ye}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:G.en2,onChange:le=>te(ye,"en2",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:G.boy2,onChange:le=>te(ye,"boy2",le.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Be(ye),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},ye))})]}),c.jsxs("button",{type:"button",onClick:_e,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Ae.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:fe,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:be?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&C&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",C.siparisNo]})]}),c.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(tb).map(([G,ye])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:ye.title}),c.jsx("div",{className:"space-y-2",children:ye.steps.map(le=>{const Ce=C.productionStatus?.[G]?.[le.id];return c.jsxs("button",{onClick:()=>we(G,le.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ce?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:le.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ce?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ce&&c.jsx(Ae.Check,{})})]},le.id)})})]},G))})]})})]})}const HC=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",FC=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),sb=({item:i,isAdd:e,onEdit:s,onDelete:r})=>c.jsxs(ih,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:HC(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ae.Trash,{})})]})]})]});function GC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState({start:"",end:""}),[y,v]=J.useState(!1),[_,S]=J.useState([]),[A,H]=J.useState(!0),[ee,Z]=J.useState(!0),[P,ne]=J.useState(null),[se,ge]=J.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),de=J.useMemo(()=>[...new Set(o.map(me=>me.productName))].sort(),[o]),be=J.useMemo(()=>{const me=o.map(K=>K.unit).filter(Boolean),ze=["adet","kg","m2","m3","mt","paket"];return[...new Set([...ze,...me])].sort()},[o]);J.useEffect(()=>{const me=vs.onAuthStateChanged(ae=>{e(ae),r(!1)}),ze=ss(Ot(Fe,"inventory_movements"),xs("date","desc")),K=kn(ze,ae=>{u(ae.docs.map(xe=>({id:xe.id,...xe.data()})))});return()=>{me(),K()}},[]);const he=J.useMemo(()=>o.filter(me=>{let ze=!0;if(f.start&&(ze=ze&&me.date>=f.start),f.end&&(ze=ze&&me.date<=f.end),me.productType==="raw"&&!A||(me.productType==="manufactured"||me.productType==="uretilmis")&&!ee)return!1;let K=!0;return _.length>0&&(K=_.includes(me.productName)),ze&&K}),[o,f,A,ee,_]),C=he.filter(me=>me.action==="add"),N=he.filter(me=>me.action==="remove"),j=async me=>{me.preventDefault();try{const ze={...se,quantity:Number(se.quantity),createdAt:new Date().toISOString()};P?await Vs(Kt(Fe,"inventory_movements",P),ze):await Mi(Ot(Fe,"inventory_movements"),ze),I()}catch(ze){alert("Hata: "+ze.message)}},k=async me=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await zr(Kt(Fe,"inventory_movements",me))},R=async me=>{if(window.confirm(`"${me}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const ze=ss(Ot(Fe,"inventory_movements"),jC("productName","==",me)),K=await IC(ze),ae=OC(Fe);K.forEach(xe=>{ae.delete(xe.ref)}),await ae.commit(),_.includes(me)&&S(xe=>xe.filter(De=>De!==me)),se.productName===me&&ge(xe=>({...xe,productName:""}))}catch(ze){alert("Silme hatas: "+ze.message)}},V=me=>{ne(me.id),ge({productType:me.productType,productName:me.productName,action:me.action,quantity:me.quantity,unit:me.unit,date:me.date}),v(!0)},I=()=>{v(!1),ne(null),ge({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:me=>g({...f,start:me}),onEndChange:me=>g({...f,end:me})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(FC,{showRaw:A,setShowRaw:H,showManufactured:ee,setShowManufactured:Z}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Al,{options:de,selected:_,onChange:S,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>v(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Ae.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[C.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[C.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),C.map(me=>c.jsx(sb,{item:me,isAdd:!0,onEdit:V,onDelete:k},me.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[N.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[N.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),N.map(me=>c.jsx(sb,{item:me,isAdd:!1,onEdit:V,onDelete:k},me.id))]})]})]}),c.jsx(fc,{isOpen:y,onClose:I,title:P?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${se.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:se.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(M1,{checked:se.productType==="manufactured",onChange:me=>ge({...se,productType:me?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Al,{options:de,selected:se.productName,onChange:me=>ge({...se,productName:me}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>ge({...se,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${se.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>ge({...se,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${se.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Dt,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:se.quantity,onChange:me=>ge({...se,quantity:me.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Al,{options:be,selected:se.unit,onChange:me=>ge({...se,unit:me}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Dt,{type:"date",required:!0,value:se.date,onChange:me=>ge({...se,date:me.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(cn,{type:"submit",variant:"primary",children:P?"Gncelle":"Kaydet"}),c.jsx(cn,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const YC=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),KC=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,r=800,o=40,u=r-o*2,f=s-o*2,g=i.flatMap(_=>e.map(S=>_[S]||0)),y=Math.max(...g,10)*1.1,v=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const S=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:S,x2:r-o,y2:S,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:S+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(y/4*_)})]},_)}),e.map((_,S)=>{const A=v[S%v.length],H=i.map((ee,Z)=>{const P=o+Z*(u/(i.length-1||1)),ne=ee[_]||0,se=s-o-ne/y*f,ge=isNaN(P)?o:P,de=isNaN(se)?s-o:se;return`${ge},${de}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:H,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((ee,Z)=>{const P=o+Z*(u/(i.length-1||1)),ne=ee[_]||0,se=s-o-ne/y*f,ge=isNaN(P)?o:P,de=isNaN(se)?s-o:se;return c.jsx("circle",{cx:ge,cy:de,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${ee.month} - ${_}: ${ne}`})},Z)})]},_)}),i.map((_,S)=>{const A=o+S*(u/(i.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},S)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,S)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:v[S%v.length]}}),_]},_))})]})},$C=({name:i,qty:e,unit:s,type:r,change:o,changePercent:u})=>{const f=r==="raw",g=e<0,y=u>10;let v="text-gray-400",_="bg-gray-100",S=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(v="text-emerald-600",_="bg-emerald-100/50",S=c.jsx(Ae.TrendingUp,{})):u<-10&&(v="text-red-600",_="bg-red-100/50",S=c.jsx(Ae.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",H=f?"text-pink-900":"text-purple-900",ee=f?"text-pink-700/70":"text-purple-700/70";g?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",H="text-red-700",ee="text-red-500"):y&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",H="text-emerald-800",ee="text-emerald-600");const Z=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:Z}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${H}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${ee} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${v} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:S}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function QC(){const[i,e]=J.useState([]),[s,r]=J.useState(!0),[o,u]=J.useState(!0),[f,g]=J.useState(!0),[y,v]=J.useState([]),[_,S]=J.useState("year");J.useEffect(()=>{const P=ss(Ot(Fe,"inventory_movements"),xs("date","asc")),ne=kn(P,se=>{const ge=se.docs.map(de=>de.data());e(ge),r(!1)});return()=>ne()},[]);const A=J.useMemo(()=>{const P={},ne=new Date;return ne.setDate(ne.getDate()-30),i.forEach(se=>{const ge=Number(se.quantity)||0,de=se.action==="add"?ge:-ge,be=new Date(se.date);P[se.productName]||(P[se.productName]={name:se.productName,qty:0,unit:se.unit,type:se.productType||"raw",change30Days:0}),P[se.productName].qty+=de,P[se.productName].type=se.productType||P[se.productName].type,be>=ne&&(P[se.productName].change30Days+=de)}),Object.values(P).map(se=>{const ge=se.qty-se.change30Days;let de=0;return ge!==0?de=se.change30Days/Math.abs(ge)*100:se.change30Days!==0&&(de=100),{...se,changePercent:de}})},[i]),H=J.useMemo(()=>A.filter(P=>!(P.type==="raw"&&!o||(P.type==="manufactured"||P.type==="uretilmis")&&!f||y.length>0&&!y.includes(P.name))),[A,o,f,y]),ee=J.useMemo(()=>A.map(P=>P.name).sort(),[A]),Z=J.useMemo(()=>{const P=H.sort((de,be)=>Math.abs(be.qty)-Math.abs(de.qty)).slice(0,5).map(de=>de.name);if(P.length===0)return{data:[],keys:[]};const ne={},se={};return P.forEach(de=>se[de]=0),i.forEach(de=>{if(!P.includes(de.productName))return;const be=de.date?de.date.slice(0,7):"N/A";if(be==="N/A")return;if(_==="year"){const N=new Date().getFullYear();if(new Date(de.date).getFullYear()!==N)return}const he=Number(de.quantity)||0,C=de.action==="add"?he:-he;se[de.productName]||(se[de.productName]=0),se[de.productName]+=C,ne[be]={...se,month:be}}),{data:Object.values(ne).sort((de,be)=>de.month.localeCompare(be.month)),keys:P}},[i,H,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(YC,{showRaw:o,setShowRaw:u,showManufactured:f,setShowManufactured:g}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Al,{options:ee,selected:y,onChange:v,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:H.length>0?H.map((P,ne)=>c.jsx($C,{name:P.name,qty:P.qty,unit:P.unit,type:P.type,change:P.change30Days,changePercent:P.changePercent},ne)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Ae.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),Z.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Ae.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:P=>S(P.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(KC,{data:Z.data,keys:Z.keys})]})]})]})}const Tm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,si=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",rd=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function XC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState([]),[y,v]=J.useState({start:"",end:""}),[_,S]=J.useState(!1),[A,H]=J.useState(!1),ee=J.useRef(null),[Z,P]=J.useState(null),[ne,se]=J.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:Tm,images:[],items:[]}),ge=J.useMemo(()=>f.map(E=>E.name).sort(),[f]);if(J.useEffect(()=>{const E=vs.onAuthStateChanged(fe=>{e(fe),r(!1)}),L=ss(Ot(Fe,"teklifler"),xs("createdAt","desc")),$=kn(L,fe=>{u(fe.docs.map(_e=>({id:_e.id,..._e.data()})))}),M=ss(Ot(Fe,"customers"),xs("name","asc")),te=kn(M,fe=>{g(fe.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{E(),$(),te()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ae.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const de=(E,L,$)=>{const M=E*L,te=M*($/100);return M+te},be=E=>{if(!E)return{subtotal:0,totalVAT:0,grandTotal:0};const L=E.reduce((M,te)=>M+Number(te.quantity)*Number(te.price),0),$=E.reduce((M,te)=>M+Number(te.quantity)*Number(te.price)*(Number(te.vat)/100),0);return{subtotal:L,totalVAT:$,grandTotal:L+$}},he=E=>{const L=Array.from(E.target.files||E.dataTransfer.files);L.length&&L.forEach($=>{if(!$.type.startsWith("image/"))return;const M=new FileReader;M.onload=te=>{const fe=new Image;fe.onload=()=>{const _e=document.createElement("canvas"),Be=1e3;let Le=fe.width,W=fe.height;Le>W?Le>Be&&(W*=Be/Le,Le=Be):W>Be&&(Le*=Be/W,W=Be),_e.width=Le,_e.height=W,_e.getContext("2d").drawImage(fe,0,0,Le,W);const Ee=_e.toDataURL("image/jpeg",.7);se(G=>({...G,images:[...G.images,Ee]}))},fe.src=te.target.result},M.readAsDataURL($)})},C=E=>{se(L=>({...L,images:L.images.filter(($,M)=>M!==E)}))},N=(E,L)=>{const $=[...ne.images];L===-1&&E>0?[$[E],$[E-1]]=[$[E-1],$[E]]:L===1&&E<$.length-1&&([$[E],$[E+1]]=[$[E+1],$[E]]),se({...ne,images:$})},j=E=>{E.preventDefault(),H(!0)},k=()=>H(!1),R=E=>{E.preventDefault(),H(!1),he(E)},V=E=>{E.clipboardData.files&&E.clipboardData.files.length>0&&(E.preventDefault(),he({target:{files:E.clipboardData.files}}))},I=()=>{P(null);const E="TK-"+Date.now().toString().slice(-6),L=new Date;L.setDate(L.getDate()+7),se({teklifNo:E,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:L.toISOString().split("T")[0],note:Tm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),S(!0)},me=E=>{P(E.id),se({teklifNo:E.teklifNo,teklifName:E.teklifName||"",customerName:E.customerName,date:E.date,validityDate:E.validityDate||"",note:E.note||Tm,images:E.images||[],items:E.items||[]}),S(!0)},ze=async E=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await zr(Kt(Fe,"teklifler",E))}catch(L){alert(L.message)}},K=async E=>{if(E.preventDefault(),!ne.customerName){alert("Ltfen mteri ad giriniz.");return}try{const L={...ne,createdAt:new Date().toISOString()};Z?await Vs(Kt(Fe,"teklifler",Z),L):await Mi(Ot(Fe,"teklifler"),L),S(!1)}catch(L){alert(L.message)}},ae=(E,L,$)=>{const M=[...ne.items],te=M[E];te[L]=$;const fe=parseFloat(L==="quantity"?$:te.quantity),_e=parseFloat(L==="price"?$:te.price),Be=parseFloat(L==="vat"?$:te.vat);!isNaN(fe)&&!isNaN(_e)&&!isNaN(Be)&&(te.total=de(fe,_e,Be)),se({...ne,items:M})},xe=()=>{se({...ne,items:[...ne.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},De=E=>{se({...ne,items:ne.items.filter((L,$)=>$!==E)})},Ge=E=>{const L=window.open("","","height=800,width=1000");if(!L){alert("Pop-up engelleyiciyi kapatn.");return}const $=be(E.items||[]),M=E.images||[],te=`
      <html><head><title>Teklif - ${E.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${E.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${rd(E.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${rd(E.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${E.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${E.items.map(fe=>`
                <tr>
                  <td>${fe.description}</td>
                  <td class="text-center">${fe.quantity}</td>
                  <td class="text-right">${si(fe.price)}</td>
                  <td class="text-center">%${fe.vat}</td>
                  <td class="text-right"><strong>${si(fe.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${si($.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${si($.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${si($.grandTotal)}</span></div>
            </div>
          </div>

          ${E.note?`<div class="notes-section"><strong>NOT:</strong><br/>${E.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${M.map(fe=>`<img src="${fe}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;L.document.write(te),L.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?V:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:y.start,endDate:y.end,onStartChange:E=>v({...y,start:E}),onEndChange:E=>v({...y,end:E})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ae.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(E=>{let L=!0;return y.start&&E.date<y.start&&(L=!1),y.end&&E.date>y.end&&(L=!1),L}).map(E=>{const L=be(E.items);return c.jsxs(ih,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Ae.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:E.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",E.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:E.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",rd(E.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",rd(E.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:si(L.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Ge(E),children:c.jsx(Ae.Printer,{})}),c.jsx(cn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>me(E),children:c.jsx(Ae.Edit,{})}),c.jsx(cn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>ze(E.id),children:c.jsx(Ae.Trash,{})})]})]})]},E.id)})]}),c.jsx(fc,{isOpen:_,onClose:()=>S(!1),title:Z?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:K,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(Dt,{value:ne.teklifNo,onChange:E=>se({...ne,teklifNo:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(Dt,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:ne.teklifName,onChange:E=>se({...ne,teklifName:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Al,{options:ge,selected:ne.customerName,onChange:E=>se({...ne,customerName:E}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(Dt,{type:"date",required:!0,value:ne.date,onChange:E=>se({...ne,date:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(Dt,{type:"date",required:!0,value:ne.validityDate,onChange:E=>se({...ne,validityDate:E.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(UC,{rows:"4",value:ne.note,onChange:E=>se({...ne,note:E.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:R,children:[c.jsx("input",{ref:ee,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:he}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ae.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:ne.images.map((E,L)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:E,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>C(L),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>N(L,-1),disabled:L===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>N(L,1),disabled:L===ne.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},L))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:ne.items.map((E,L)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(Dt,{placeholder:"rn/Hizmet aklamas",value:E.description,onChange:$=>ae(L,"description",$.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(Dt,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.quantity,onChange:$=>ae(L,"quantity",$.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(Dt,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.price,onChange:$=>ae(L,"price",$.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:E.vat,onChange:$=>ae(L,"vat",$.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:si(E.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>De(L),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Ae.Trash,{})})})]},L))})]}),c.jsx("button",{type:"button",onClick:xe,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:si(be(ne.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:si(be(ne.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:si(be(ne.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(cn,{type:"submit",variant:"primary",children:Z?"Kaydet":"Olutur"}),c.jsx(cn,{type:"button",variant:"secondary",onClick:()=>S(!1),children:"ptal"})]})]})})]})}const WC="86715dfc9d1046e7e8a0d95a",ZC=`https://v6.exchangerate-api.com/v6/${WC}/latest/USD`,Sm=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[]})=>{const u=(y,v,_)=>{const S=[...i];S[y]={...S[y],[v]:_},v==="type"&&_!=="op"&&(S[y].value=""),e(S)},f=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},g=y=>{if(y===0)return;const v=[...i];v.splice(y,2),e(v)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2",children:[i.map((y,v)=>v%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-indigo-50 border-none rounded-lg text-center font-bold text-indigo-700 w-10 py-2 cursor-pointer hover:bg-indigo-100 transition-colors appearance-none text-lg",value:y.value,onChange:_=>u(v,"value",_.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>g(v),className:"absolute -top-3 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs hidden group-hover:flex items-center justify-center shadow-md z-20 hover:bg-red-600",title:"Sil",children:""})]},v):c.jsxs("div",{className:"flex bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg overflow-hidden shadow-sm items-center h-10",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-200 text-[10px] uppercase font-bold text-gray-500 px-2 h-full cursor-pointer focus:outline-none hover:bg-gray-100",value:y.type,onChange:_=>u(v,"type",_.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Satr"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-20 border-none text-sm px-2 h-full focus:ring-0 text-gray-900 bg-transparent [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:y.value,onChange:_=>u(v,"value",_.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-transparent cursor-pointer text-gray-900 truncate",value:y.value,onChange:_=>u(v,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-indigo-50 text-indigo-700 font-bold cursor-pointer truncate",value:y.value,onChange:_=>u(v,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(_=>c.jsx("option",{value:_.id,children:_.name||"simsiz"},_.id))]})]},v)),c.jsx("button",{type:"button",onClick:f,className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 hover:shadow-lg transition-all z-10",children:c.jsx(Ae.Plus,{})})]})};function JC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState([]),[y,v]=J.useState({TRY:1,USD:1,EUR:1}),[_,S]=J.useState(null),[A,H]=J.useState(!1),[ee,Z]=J.useState(!1),[P,ne]=J.useState(null),[se,ge]=J.useState({}),[de,be]=J.useState({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[he,C]=J.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});J.useEffect(()=>{const W=vs.onAuthStateChanged(le=>{e(le),r(!1)}),we=ss(Ot(Fe,"pricing_constants"),xs("name","asc")),Ee=kn(we,le=>{u(le.docs.map(Ce=>({id:Ce.id,...Ce.data()})))}),G=ss(Ot(Fe,"pricing_items"),xs("updatedAt","desc")),ye=kn(G,le=>{g(le.docs.map(Ce=>({id:Ce.id,...Ce.data()})))});return N(),()=>{W(),Ee(),ye()}},[]);const N=async()=>{try{const we=await(await fetch(ZC)).json();if(we&&we.conversion_rates){const Ee=we.conversion_rates.TRY,G=we.conversion_rates.EUR,ye=Ee/G;v({TRY:1,USD:Ee,EUR:ye}),S(new Date().toLocaleTimeString())}}catch(W){console.error("Rate error",W)}},j=(W,we)=>{if(!we||we==="None"||we==="TRY")return parseFloat(W)||0;const Ee=y[we]||1;return parseFloat(W)*Ee},k=(W,we)=>{if(we==="TRY")return W;const Ee=y[we]||1;return W/Ee},R=(W,we={})=>{if(W.type==="num")return parseFloat(W.value)||0;if(W.type==="const"){const Ee=o.find(G=>G.id===W.value);return Ee?j(Ee.value,Ee.currency):0}return W.type==="ref"&&we[W.value]||0},V=(W,we={})=>{if(!W||W.length===0)return 0;let Ee=R(W[0],we);for(let G=1;G<W.length;G+=2){const ye=W[G].value,le=R(W[G+1],we);switch(ye){case"+":Ee+=le;break;case"-":Ee-=le;break;case"*":Ee*=le;break;case"/":Ee=le!==0?Ee/le:0;break}}return Ee},I=W=>{const we={};(W.rows||[]).forEach(G=>{we[G.id]=V(G.ops,we)});const Ee=V(W.finalFormula?.ops,we);return k(Ee,W.finalCurrency||"TRY")},me=W=>V(W,{}),ze=J.useMemo(()=>I(he),[he,o,y]),K=J.useMemo(()=>me(de.ops),[de.ops,o,y]),ae=J.useMemo(()=>[...new Set(o.map(we=>we.category||"Kategorisiz"))].sort(),[o]),xe=J.useMemo(()=>{const W={};return o.forEach(we=>{const Ee=we.category||"Kategorisiz";W[Ee]||(W[Ee]=[]),W[Ee].push(we)}),W},[o]),De=async W=>{W.preventDefault();const we=me(de.ops),Ee={...de,value:we,category:de.category||"Kategorisiz"};P?await Vs(Kt(Fe,"pricing_constants",P),Ee):await Mi(Ot(Fe,"pricing_constants"),Ee),be({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ne(null)},Ge=W=>{be({...W,ops:W.ops||[{type:"num",value:W.value}]}),ne(W.id)},E=async W=>{window.confirm("Silmek istediinize emin misiniz?")&&await zr(Kt(Fe,"pricing_constants",W))},L=W=>{ge(we=>({...we,[W]:!we[W]}))},$=()=>{const W="row_"+Date.now();C({...he,rows:[...he.rows,{id:W,name:"",ops:[{type:"num",value:0}]}]})},M=W=>{const we=[...he.rows];we.splice(W,1),C({...he,rows:we})},te=(W,we)=>{const Ee=[...he.rows];Ee[W].name=we,C({...he,rows:Ee})},fe=(W,we)=>{const Ee=[...he.rows];Ee[W].ops=we,C({...he,rows:Ee})},_e=async W=>{W.preventDefault();const we={...he,updatedAt:new Date().toISOString()};P?await Vs(Kt(Fe,"pricing_items",P),we):await Mi(Ot(Fe,"pricing_items"),we),Z(!1),ne(null),C({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"})},Be=W=>{C(W),ne(W.id),Z(!0)},Le=async W=>{window.confirm("Silmek istediinize emin misiniz?")&&await zr(Kt(Fe,"pricing_items",W))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):!i||i.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Ae.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve esnek hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white/80 backdrop-blur-md px-5 py-3 rounded-xl shadow-sm border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[y.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[y.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Ae.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs(cn,{variant:"secondary",onClick:()=>H(!0),children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Ae.Variable,{})})," Sabit Deerler"]}),c.jsxs(cn,{variant:"primary",onClick:()=>{ne(null),C({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),Z(!0)},children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Ae.Calculator,{})})," Fiyatlandrma"]})]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center bg-white/40 backdrop-blur-sm rounded-3xl border border-dashed border-gray-300 text-gray-400",children:"Henz fiyatlandrma oluturulmad."}),f.map(W=>{const we=I(W),Ee=W.finalCurrency||"TRY",G=Math.random()>.5?"up":"down",ye=(Math.random()*5).toFixed(1);return c.jsxs(ih,{className:"p-6 hover:scale-[1.02] transition-transform relative group",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-100/50 px-3 py-1 rounded-bl-xl text-[10px] font-bold text-gray-400",children:new Date(W.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1 pr-12 truncate",title:W.title,children:W.title}),c.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider mb-4",children:W.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-6",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[we.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-sm ml-1 font-medium text-indigo-400",children:Ee})]}),c.jsxs("div",{className:`flex items-center text-xs font-bold ${G==="up"?"text-emerald-500":"text-red-500"}`,children:[G==="up"?c.jsx(Ae.TrendingUp,{}):c.jsx(Ae.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",ye]})]})]}),c.jsxs("div",{className:"flex gap-2 border-t border-gray-100 pt-4 opacity-80 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Be(W),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 rounded-lg font-bold transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>Le(W.id),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-lg font-bold transition-colors",children:"Sil"})]})]},W.id)})]})}),A&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-0 sm:p-4 bg-gray-900/40 backdrop-blur-sm overflow-y-auto",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl w-full max-w-6xl min-h-full sm:min-h-0 sm:rounded-3xl shadow-2xl border border-white/50 flex flex-col my-0 sm:my-8 relative",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 sticky top-0 z-10 backdrop-blur-xl rounded-t-3xl",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sabit Deer Ynetimi"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maliyet hesaplamalarnda kullanlacak temel deerler"})]}),c.jsx("button",{onClick:()=>H(!1),className:"bg-gray-100 hover:bg-gray-200 p-2 rounded-full transition-colors",children:c.jsx("span",{className:"text-xl font-bold text-gray-600",children:""})})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row flex-grow overflow-hidden h-full",children:[c.jsxs("div",{className:"lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-gray-200 overflow-y-auto bg-gray-50/30",children:[c.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center",children:c.jsx(Ae.Plus,{})}),P?"Sabiti Dzenle":"Yeni Sabit Ekle"]}),c.jsxs("form",{onSubmit:De,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Tanmlama"}),c.jsx(Dt,{required:!0,placeholder:"Sabit Ad (rn: Elektrik Kw/s)",value:de.name,onChange:W=>be({...de,name:W.target.value})}),c.jsxs("div",{className:"relative",children:[c.jsx(Dt,{list:"cat-options",placeholder:"Kategori (rn: Enerji, Hammadde)",value:de.category,onChange:W=>be({...de,category:W.target.value})}),c.jsx("datalist",{id:"cat-options",children:ae.map((W,we)=>c.jsx("option",{value:W},we))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Dt,{placeholder:"Birim (kg, saat...)",value:de.unit,onChange:W=>be({...de,unit:W.target.value})}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 text-sm",value:de.currency,onChange:W=>be({...de,currency:W.target.value}),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Deer Hesaplama"}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[c.jsx(Sm,{ops:de.ops,onChange:W=>be({...de,ops:W}),constants:o}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Sonu"}),c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:K.toLocaleString("tr-TR",{maximumFractionDigits:4})})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[P&&c.jsx(cn,{type:"button",variant:"ghost",onClick:()=>{ne(null),be({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]})},children:"ptal"}),c.jsx(cn,{type:"submit",variant:"primary",children:P?"Gncelle":"Ekle"})]})]})]}),c.jsx("div",{className:"lg:w-2/3 p-8 overflow-y-auto bg-white/40",children:c.jsxs("div",{className:"space-y-6",children:[Object.entries(xe).map(([W,we])=>{const Ee=se[W]??!1;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[c.jsx("div",{onClick:()=>L(W),className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Ee?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:Ee?c.jsx(Ae.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ae.ChevronDown,{})}),c.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:W}),c.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs font-bold px-2 py-0.5 rounded-md",children:we.length})]})}),Ee&&c.jsx("div",{className:"p-6 bg-gray-50/50 border-t border-gray-100 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-fadeIn",children:we.map(G=>{const ye=j(G.value,G.currency);return c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-1 truncate",title:G.name,children:G.name}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:G.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})}),c.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[G.currency!=="None"?G.currency:""," ",G.unit?`/ ${G.unit}`:""]})]}),G.currency!=="TRY"&&G.currency!=="None"&&c.jsxs("div",{className:"text-[10px] text-emerald-600 font-bold bg-emerald-50 inline-block px-2 py-0.5 rounded",children:["~ ",ye.toFixed(2)," "]}),c.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 backdrop-blur p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>Ge(G),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Ae.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>E(G.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Ae.Trash,{className:"w-3 h-3"})})]})]},G.id)})})]},W)}),o.length===0&&c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Ae.Variable,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Henz sabit deer eklenmemi."})]})]})})]})]})}),c.jsx(fc,{isOpen:ee,onClose:()=>Z(!1),title:P?"Fiyatlandrmay Dzenle":"Yeni Fiyatlandrma",maxWidth:"max-w-7xl",children:c.jsxs("form",{id:"pricingForm",onSubmit:_e,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx(Dt,{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",value:he.title,onChange:W=>C({...he,title:W.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx(Dt,{placeholder:"adet, m3, kg...",value:he.unitType,onChange:W=>C({...he,unitType:W.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Maliyet Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:$,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),he.rows.map((W,we)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsx("div",{className:"w-full xl:w-64 shrink-0",children:c.jsx("input",{placeholder:"Adm Ad (rn: Ham Madde)",className:"w-full text-sm font-medium border-0 border-b border-gray-200 focus:ring-0 px-0 bg-transparent",value:W.name,onChange:Ee=>te(we,Ee.target.value)})}),c.jsx("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:c.jsx(Sm,{ops:W.ops,onChange:Ee=>fe(we,Ee),allowRefs:!0,rows:he.rows.slice(0,we),constants:o})}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:V(W.ops,I({...he,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>M(we),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Ae.Trash,{})})]})]},W.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Ae.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:he.finalCurrency,onChange:W=>C({...he,finalCurrency:W.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Sm,{ops:he.finalFormula.ops,onChange:W=>C({...he,finalFormula:{...he.finalFormula,ops:W}}),allowRefs:!0,rows:he.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[ze.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:he.finalCurrency})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(cn,{type:"button",variant:"secondary",onClick:()=>Z(!1),children:"ptal"}),c.jsx(cn,{type:"submit",variant:"primary",children:"Kaydet"})]})]})})]})}const va={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},yl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},ib=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],e4=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Nm=2.5,Ms=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function t4(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,g]=J.useState(new Date),[y,v]=J.useState(!1),[_,S]=J.useState(!1),[A,H]=J.useState(null),[ee,Z]=J.useState(new Date),[P,ne]=J.useState(!1),[se,ge]=J.useState(new Date().getFullYear()),[de,be]=J.useState(!1),[he,C]=J.useState(null),[N,j]=J.useState({type:"work",overtimeSlots:0,lateness:0}),[k,R]=J.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});J.useEffect(()=>{const M=vs.onAuthStateChanged(Be=>{e(Be),r(!1)}),te=ss(Ot(Fe,"employees"),xs("name","asc")),fe=kn(te,Be=>{u(Be.docs.map(Le=>({id:Le.id,...Le.data()})))}),_e=setInterval(()=>g(new Date),6e4);return()=>{M(),fe(),clearInterval(_e)}},[]);const V=M=>{const te=f.toISOString().split("T")[0],fe=f.getDay(),_e=f.getHours(),Be=f.getMinutes(),Le=_e*60+Be,W=M.attendance?.[te];if(W){if(["paid_leave","unpaid_leave"].includes(W.type))return yl.LEAVE;if(W.overtimeSlots>0)return yl.OVERTIME}const[we,Ee]=M.startHour.split(":").map(Number),[G,ye]=M.endHour.split(":").map(Number),le=we*60+Ee,Ce=G*60+ye;return M.workDays.includes(fe)?Le>=le&&Le<Ce?yl.ONLINE:Le>=Ce&&W?.overtimeSlots>0?yl.OVERTIME:yl.OFFLINE:yl.OFFLINE},I=M=>{if(!M.attendance)return{used:0,remaining:M.vacationTotal};let te=0;return Object.values(M.attendance).forEach(fe=>{fe.type==="paid_leave"&&te++}),{used:te,remaining:M.vacationTotal-te}},me=(M,te)=>{const fe=te.getFullYear(),_e=te.getMonth(),Be=new Date(fe,_e+1,0).getDate();let Le=0,W=0,we=0,Ee=0,G=0;for(let _s=1;_s<=Be;_s++){const ws=`${fe}-${String(_e+1).padStart(2,"0")}-${String(_s).padStart(2,"0")}`,Y=new Date(ws).getDay(),pe=M.attendance?.[ws],ke=M.workDays.includes(Y);pe?(pe.type==="work"&&Le++,pe.type==="paid_leave"&&G++,pe.type==="unpaid_leave"&&Ee++,pe.overtimeSlots&&(W+=parseInt(pe.overtimeSlots)),pe.lateness&&(we+=parseFloat(pe.lateness))):ke&&Le++}const ye=parseFloat(M.salaryAmount)||0,le=M.customDailyRate&&parseFloat(M.customDailyRate)>0?parseFloat(M.customDailyRate):ye/30,Ce=parseFloat(M.customDeductionRate),Qe=!isNaN(Ce)&&Ce>0?Ce:le,Te=le/9,tt=M.customOvertimeMultiplier?parseFloat(M.customOvertimeMultiplier):1.5,rt=W*Nm,Vt=rt*(Te*tt),Hi=Ee*Qe,Cn=we*Te,zt=Hi+Cn,bs=ye+Vt-zt+(parseFloat(M.insurance)||0)+(parseFloat(M.allowance)||0);return{workedDays:Le,totalOvertimeSlots:W,totalOvertimeHours:rt,unpaidLeaveDays:Ee,paidLeaveDays:G,overtimePay:Vt,totalLatenessHours:we,latenessDeduction:Cn,totalDeduction:zt,totalSalary:bs,dailyRate:le,hourlyRate:Te,deductionRate:Qe}},ze=(M,te)=>{const fe=new Date(M,te,1);let _e=0;return o.forEach(Be=>{_e+=me(Be,fe).totalSalary}),_e},K=J.useMemo(()=>{let M=0,te=0;const fe=new Date(ee);return fe.setMonth(ee.getMonth()-1),o.forEach(_e=>{M+=me(_e,ee).totalSalary,te+=me(_e,fe).totalSalary}),{thisMonthTotal:M,lastMonthTotal:te}},[o,ee]),ae=()=>{S(!1),R({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),v(!0)},xe=()=>{A&&(S(!0),R({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),H(null),v(!0))},De=async M=>{M.preventDefault();try{const te={...k,updatedAt:new Date().toISOString()};_&&A?await Vs(Kt(Fe,"employees",A.id),te):await Mi(Ot(Fe,"employees"),{...te,createdAt:new Date().toISOString()}),v(!1)}catch(te){alert("Hata: "+te.message)}},Ge=async M=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await zr(Kt(Fe,"employees",M)),H(null))},E=(M,te)=>{C(M),j({type:te?.type||"work",overtimeSlots:te?.overtimeSlots||0,lateness:te?.lateness||0}),be(!0)},L=async M=>{if(M.preventDefault(),!A||!he)return;const te={...A.attendance};te[he]={type:N.type,overtimeSlots:parseInt(N.overtimeSlots)||0,lateness:parseFloat(N.lateness)||0},await Vs(Kt(Fe,"employees",A.id),{attendance:te}),H({...A,attendance:te}),be(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(va.Lock,{})," Yetkisiz Eriim"]});const $=({employee:M,date:te,onDateClick:fe})=>{const _e=te.getFullYear(),Be=te.getMonth(),Le=new Date(_e,Be+1,0).getDate(),W=new Date(_e,Be,1).getDay(),we=[];for(let Ee=0;Ee<W;Ee++)we.push(null);for(let Ee=1;Ee<=Le;Ee++)we.push(Ee);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:ib.map((Ee,G)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:Ee.slice(0,3)},G))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.map((Ee,G)=>{if(!Ee)return c.jsx("div",{},G);const ye=`${_e}-${String(Be+1).padStart(2,"0")}-${String(Ee).padStart(2,"0")}`,le=M.attendance?.[ye],Ce=new Date(ye).getDay(),Qe=M.workDays.includes(Ce);let Te="bg-gray-50 text-gray-400 border-gray-100";return Qe&&(Te="bg-white border-emerald-200 text-gray-700 shadow-sm"),le&&(le.type==="paid_leave"&&(Te="bg-yellow-50 border-yellow-200 text-yellow-700"),le.type==="unpaid_leave"&&(Te="bg-red-50 border-red-200 text-red-700"),le.type==="work"&&(le.overtimeSlots>0||le.lateness>0)&&(Te="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),le.type==="off"&&(Te="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>fe(ye,le),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${Te}`,children:[c.jsx("span",{className:"text-sm",children:Ee}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[le?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",le.overtimeSlots,"M"]}),le?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",le.lateness,"s"]})]})]},G)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ne(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:Ms(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(va.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ne(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:Ms(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:ae,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(va.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(M=>{const te=V(M),fe=I(M);return c.jsxs("div",{onClick:()=>H(M),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${te.color} ${te.ring} ring-offset-2 ring-2`,children:te.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(va.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:M.name}),c.jsx("p",{className:"text-sm text-gray-500",children:M.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[M.startHour," - ",M.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[fe.remaining," gn kald"]})]})]})]},M.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:xe,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(va.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ge(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(va.Trash,{})}),c.jsx("button",{onClick:()=>H(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const M=me(A,ee);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:Ms(M.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:Ms(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",M.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",Ms(M.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",M.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",Ms(M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",M.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",Ms(M.totalDeduction-M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",Ms(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Nm," Saat",c.jsx("br",{}),"Saatlik cret = ",Ms(M.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",Ms(M.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>Z(new Date(ee.setMonth(ee.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ee.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>Z(new Date(ee.setMonth(ee.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx($,{employee:A,date:ee,onDateClick:E})]})]})]})}),P&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ne(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(va.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>ge(M=>M-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:se}),c.jsx("button",{onClick:()=>ge(M=>M+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e4.map((M,te)=>{const fe=ze(se,te),_e=new Date().getMonth()===te&&new Date().getFullYear()===se;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${_e?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${_e?"text-indigo-200":"text-gray-400"}`,children:M}),c.jsx("div",{className:`text-lg font-bold ${_e?"text-white":"text-gray-800"}`,children:fe>0?Ms(fe):"-"})]},M)})})]})}),y&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:De,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:M=>R({...k,name:M.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:M=>R({...k,role:M.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:M=>R({...k,salaryType:M.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:M=>R({...k,salaryAmount:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:M=>R({...k,insurance:M.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:M=>R({...k,allowance:M.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:M=>R({...k,customDailyRate:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:M=>R({...k,customOvertimeMultiplier:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:M=>R({...k,customDeductionRate:M.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:M=>R({...k,vacationTotal:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:M=>R({...k,startHour:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:M=>R({...k,endHour:M.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:ib.map((M,te)=>c.jsx("button",{type:"button",onClick:()=>{const fe=k.workDays.includes(te)?k.workDays.filter(_e=>_e!==te):[...k.workDays,te];R({...k,workDays:fe})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(te)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:M.slice(0,3)},M))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),de&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:he}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(M=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:M.id,checked:N.type===M.id,onChange:te=>j({...N,type:te.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:M.label})]},M.id))})]}),N.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Nm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(M=>c.jsx("button",{type:"button",onClick:()=>j({...N,overtimeSlots:N.overtimeSlots===M?0:M}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${N.overtimeSlots===M?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:N.lateness,onChange:M=>j({...N,lateness:M.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>be(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function n4(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState("dashboard"),[f,g]=J.useState(!1);J.useEffect(()=>{const A=cS(vs,H=>{e(H),r(!1)});return()=>A()},[]);const y=async()=>{try{await uS(vs)}catch(A){console.error("k yaplrken hata:",A)}},v={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:v.Home},{id:"musteriler",label:"Mteriler",icon:v.Users},{id:"urunler",label:"rnler",icon:v.Box},{id:"stok",label:"Stok Durumu",icon:v.Chart},{id:"siparis",label:"Sipari Formu",icon:v.Cart},{id:"teklif",label:"Teklif Formu",icon:v.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:v.Calculator},{id:"calisan",label:"alanlar",icon:v.Briefcase}],S=()=>{switch(o){case"dashboard":return c.jsx(eb,{onNavigate:u});case"musteriler":return c.jsx(BC,{});case"urunler":return c.jsx(GC,{});case"stok":return c.jsx(QC,{});case"siparis":return c.jsx(qC,{});case"teklif":return c.jsx(XC,{});case"fiyatlandirma":return c.jsx(JC,{});case"calisan":return c.jsx(t4,{});default:return c.jsx(eb,{onNavigate:u})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>g(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>g(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(v.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{u(A.id),g(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(v.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>g(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(v.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:S()})})]})]}):c.jsx(LC,{})}_2.createRoot(document.getElementById("root")).render(c.jsx(J.StrictMode,{children:c.jsx(n4,{})}));
