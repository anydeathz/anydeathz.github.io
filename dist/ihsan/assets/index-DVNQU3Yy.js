(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function u2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nm={exports:{}},Bo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function d2(){if(hx)return Bo;hx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Bo.Fragment=e,Bo.jsx=s,Bo.jsxs=s,Bo}var fx;function h2(){return fx||(fx=1,nm.exports=d2()),nm.exports}var c=h2(),sm={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function f2(){if(mx)return Ke;mx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),j=Symbol.iterator;function H(E){return E===null||typeof E!="object"?null:(E=j&&E[j]||E["@@iterator"],typeof E=="function"?E:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,P={};function ee(E,L,ne){this.props=E,this.context=L,this.refs=P,this.updater=ne||Z}ee.prototype.isReactComponent={},ee.prototype.setState=function(E,L){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,L,"setState")},ee.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function te(){}te.prototype=ee.prototype;function ye(E,L,ne){this.props=E,this.context=L,this.refs=P,this.updater=ne||Z}var fe=ye.prototype=new te;fe.constructor=ye,X(fe,ee.prototype),fe.isPureReactComponent=!0;var Ee=Array.isArray;function ge(){}var R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(E,L,ne){var V=ne.ref;return{$$typeof:i,type:E,key:L,ref:V!==void 0?V:null,props:ne}}function k(E,L){return C(E.type,L,E.props)}function A(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function M(E){var L={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(ne){return L[ne]})}var I=/\/+/g;function de(E,L){return typeof E=="object"&&E!==null&&E.key!=null?M(""+E.key):L.toString(36)}function Le(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(ge,ge):(E.status="pending",E.then(function(L){E.status==="pending"&&(E.status="fulfilled",E.value=L)},function(L){E.status==="pending"&&(E.status="rejected",E.reason=L)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function K(E,L,ne,V,se){var me=typeof E;(me==="undefined"||me==="boolean")&&(E=null);var _e=!1;if(E===null)_e=!0;else switch(me){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(E.$$typeof){case i:case e:_e=!0;break;case _:return _e=E._init,K(_e(E._payload),L,ne,V,se)}}if(_e)return se=se(E),_e=V===""?"."+de(E,0):V,Ee(se)?(ne="",_e!=null&&(ne=_e.replace(I,"$&/")+"/"),K(se,L,ne,"",function(W){return W})):se!=null&&(A(se)&&(se=k(se,ne+(se.key==null||E&&E.key===se.key?"":(""+se.key).replace(I,"$&/")+"/")+_e)),L.push(se)),1;_e=0;var Be=V===""?".":V+":";if(Ee(E))for(var Pe=0;Pe<E.length;Pe++)V=E[Pe],me=Be+de(V,Pe),_e+=K(V,L,ne,me,se);else if(Pe=H(E),typeof Pe=="function")for(E=Pe.call(E),Pe=0;!(V=E.next()).done;)V=V.value,me=Be+de(V,Pe++),_e+=K(V,L,ne,me,se);else if(me==="object"){if(typeof E.then=="function")return K(Le(E),L,ne,V,se);throw L=String(E),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return _e}function le(E,L,ne){if(E==null)return E;var V=[],se=0;return K(E,V,"","",function(me){return L.call(ne,me,se++)}),V}function be(E){if(E._status===-1){var L=E._result;L=L(),L.then(function(ne){(E._status===0||E._status===-1)&&(E._status=1,E._result=ne)},function(ne){(E._status===0||E._status===-1)&&(E._status=2,E._result=ne)}),E._status===-1&&(E._status=0,E._result=L)}if(E._status===1)return E._result.default;throw E._result}var ze=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Ze={map:le,forEach:function(E,L,ne){le(E,function(){L.apply(this,arguments)},ne)},count:function(E){var L=0;return le(E,function(){L++}),L},toArray:function(E){return le(E,function(L){return L})||[]},only:function(E){if(!A(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Ke.Activity=S,Ke.Children=Ze,Ke.Component=ee,Ke.Fragment=s,Ke.Profiler=o,Ke.PureComponent=ye,Ke.StrictMode=r,Ke.Suspense=y,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(E){return R.H.useMemoCache(E)}},Ke.cache=function(E){return function(){return E.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(E,L,ne){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var V=X({},E.props),se=E.key;if(L!=null)for(me in L.key!==void 0&&(se=""+L.key),L)!N.call(L,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&L.ref===void 0||(V[me]=L[me]);var me=arguments.length-2;if(me===1)V.children=ne;else if(1<me){for(var _e=Array(me),Be=0;Be<me;Be++)_e[Be]=arguments[Be+2];V.children=_e}return C(E.type,se,V)},Ke.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},Ke.createElement=function(E,L,ne){var V,se={},me=null;if(L!=null)for(V in L.key!==void 0&&(me=""+L.key),L)N.call(L,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(se[V]=L[V]);var _e=arguments.length-2;if(_e===1)se.children=ne;else if(1<_e){for(var Be=Array(_e),Pe=0;Pe<_e;Pe++)Be[Pe]=arguments[Pe+2];se.children=Be}if(E&&E.defaultProps)for(V in _e=E.defaultProps,_e)se[V]===void 0&&(se[V]=_e[V]);return C(E,me,se)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(E){return{$$typeof:p,render:E}},Ke.isValidElement=A,Ke.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:be}},Ke.memo=function(E,L){return{$$typeof:x,type:E,compare:L===void 0?null:L}},Ke.startTransition=function(E){var L=R.T,ne={};R.T=ne;try{var V=E(),se=R.S;se!==null&&se(ne,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(ge,ze)}catch(me){ze(me)}finally{L!==null&&ne.types!==null&&(L.types=ne.types),R.T=L}},Ke.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ke.use=function(E){return R.H.use(E)},Ke.useActionState=function(E,L,ne){return R.H.useActionState(E,L,ne)},Ke.useCallback=function(E,L){return R.H.useCallback(E,L)},Ke.useContext=function(E){return R.H.useContext(E)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(E,L){return R.H.useDeferredValue(E,L)},Ke.useEffect=function(E,L){return R.H.useEffect(E,L)},Ke.useEffectEvent=function(E){return R.H.useEffectEvent(E)},Ke.useId=function(){return R.H.useId()},Ke.useImperativeHandle=function(E,L,ne){return R.H.useImperativeHandle(E,L,ne)},Ke.useInsertionEffect=function(E,L){return R.H.useInsertionEffect(E,L)},Ke.useLayoutEffect=function(E,L){return R.H.useLayoutEffect(E,L)},Ke.useMemo=function(E,L){return R.H.useMemo(E,L)},Ke.useOptimistic=function(E,L){return R.H.useOptimistic(E,L)},Ke.useReducer=function(E,L,ne){return R.H.useReducer(E,L,ne)},Ke.useRef=function(E){return R.H.useRef(E)},Ke.useState=function(E){return R.H.useState(E)},Ke.useSyncExternalStore=function(E,L,ne){return R.H.useSyncExternalStore(E,L,ne)},Ke.useTransition=function(){return R.H.useTransition()},Ke.version="19.2.0",Ke}var gx;function Zm(){return gx||(gx=1,sm.exports=f2()),sm.exports}var J=Zm();const ib=u2(J);var im={exports:{}},qo={},rm={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function m2(){return px||(px=1,(function(i){function e(K,le){var be=K.length;K.push(le);e:for(;0<be;){var ze=be-1>>>1,Ze=K[ze];if(0<o(Ze,le))K[ze]=le,K[be]=Ze,be=ze;else break e}}function s(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var le=K[0],be=K.pop();if(be!==le){K[0]=be;e:for(var ze=0,Ze=K.length,E=Ze>>>1;ze<E;){var L=2*(ze+1)-1,ne=K[L],V=L+1,se=K[V];if(0>o(ne,be))V<Ze&&0>o(se,ne)?(K[ze]=se,K[V]=be,ze=V):(K[ze]=ne,K[L]=be,ze=L);else if(V<Ze&&0>o(se,be))K[ze]=se,K[V]=be,ze=V;else break e}}return le}function o(K,le){var be=K.sortIndex-le.sortIndex;return be!==0?be:K.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var y=[],x=[],_=1,S=null,j=3,H=!1,Z=!1,X=!1,P=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function fe(K){for(var le=s(x);le!==null;){if(le.callback===null)r(x);else if(le.startTime<=K)r(x),le.sortIndex=le.expirationTime,e(y,le);else break;le=s(x)}}function Ee(K){if(X=!1,fe(K),!Z)if(s(y)!==null)Z=!0,ge||(ge=!0,M());else{var le=s(x);le!==null&&Le(Ee,le.startTime-K)}}var ge=!1,R=-1,N=5,C=-1;function k(){return P?!0:!(i.unstable_now()-C<N)}function A(){if(P=!1,ge){var K=i.unstable_now();C=K;var le=!0;try{e:{Z=!1,X&&(X=!1,te(R),R=-1),H=!0;var be=j;try{t:{for(fe(K),S=s(y);S!==null&&!(S.expirationTime>K&&k());){var ze=S.callback;if(typeof ze=="function"){S.callback=null,j=S.priorityLevel;var Ze=ze(S.expirationTime<=K);if(K=i.unstable_now(),typeof Ze=="function"){S.callback=Ze,fe(K),le=!0;break t}S===s(y)&&r(y),fe(K)}else r(y);S=s(y)}if(S!==null)le=!0;else{var E=s(x);E!==null&&Le(Ee,E.startTime-K),le=!1}}break e}finally{S=null,j=be,H=!1}le=void 0}}finally{le?M():ge=!1}}}var M;if(typeof ye=="function")M=function(){ye(A)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=A,M=function(){de.postMessage(null)}}else M=function(){ee(A,0)};function Le(K,le){R=ee(function(){K(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_next=function(K){switch(j){case 1:case 2:case 3:var le=3;break;default:le=j}var be=j;j=le;try{return K()}finally{j=be}},i.unstable_requestPaint=function(){P=!0},i.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var be=j;j=K;try{return le()}finally{j=be}},i.unstable_scheduleCallback=function(K,le,be){var ze=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ze+be:ze):be=ze,K){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=be+Ze,K={id:_++,callback:le,priorityLevel:K,startTime:be,expirationTime:Ze,sortIndex:-1},be>ze?(K.sortIndex=be,e(x,K),s(y)===null&&K===s(x)&&(X?(te(R),R=-1):X=!0,Le(Ee,be-ze))):(K.sortIndex=Ze,e(y,K),Z||H||(Z=!0,ge||(ge=!0,M()))),K},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(K){var le=j;return function(){var be=j;j=le;try{return K.apply(this,arguments)}finally{j=be}}}})(am)),am}var yx;function g2(){return yx||(yx=1,rm.exports=m2()),rm.exports}var lm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function p2(){if(xx)return _n;xx=1;var i=Zm();function e(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,x,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:x,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(y,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(y,x,null,_)},_n.flushSync=function(y){var x=f.T,_=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=x,r.p=_,r.d.f()}},_n.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(y,x))},_n.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},_n.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var _=x.as,S=p(_,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,H=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:S,integrity:j,fetchPriority:H}):_==="script"&&r.d.X(y,{crossOrigin:S,integrity:j,fetchPriority:H,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},_n.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=p(x.as,x.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(y)},_n.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,S=p(_,x.crossOrigin);r.d.L(y,_,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},_n.preloadModule=function(y,x){if(typeof y=="string")if(x){var _=p(x.as,x.crossOrigin);r.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(y)},_n.requestFormReset=function(y){r.d.r(y)},_n.unstable_batchedUpdates=function(y,x){return y(x)},_n.useFormState=function(y,x,_){return f.H.useFormState(y,x,_)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var vx;function y2(){if(vx)return lm.exports;vx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lm.exports=p2(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function x2(){if(bx)return qo;bx=1;var i=g2(),e=Zm(),s=y2();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function x(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return y(h),t;if(m===l)return y(h),n;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=m;break}if(w===l){v=!0,l=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,l=h;break}if(w===l){v=!0,l=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,j=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=A&&t[A]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case ee:return"Profiler";case P:return"StrictMode";case Ee:return"Suspense";case ge:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Z:return"Portal";case ye:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case fe:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:de(t.type)||"Memo";case N:n=t._payload,t=t._init;try{return de(t(n))}catch{}}return null}var Le=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ze=[],Ze=-1;function E(t){return{current:t}}function L(t){0>Ze||(t.current=ze[Ze],ze[Ze]=null,Ze--)}function ne(t,n){Ze++,ze[Ze]=t.current,t.current=n}var V=E(null),se=E(null),me=E(null),_e=E(null);function Be(t,n){switch(ne(me,n),ne(se,t),ne(V,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Oy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Oy(n),t=Vy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(V),ne(V,t)}function Pe(){L(V),L(se),L(me)}function W(t){t.memoizedState!==null&&ne(_e,t);var n=V.current,a=Vy(n,t.type);n!==a&&(ne(se,t),ne(V,a))}function we(t){se.current===t&&(L(V),L(se)),_e.current===t&&(L(_e),Lo._currentValue=be)}var Te,Y;function pe(t){if(Te===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Te=n&&n[1]||"",Y=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+t+Y}var ae=!1;function Ie(t,n){if(!t||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Q){var G=Q}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(Q){G=Q}t.call(ce.prototype)}}else{try{throw Error()}catch(Q){G=Q}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var D=v.split(`
`),q=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===q.length)for(l=D.length-1,h=q.length-1;1<=l&&0<=h&&D[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==q[h]){var ie=`
`+D[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?pe(a):""}function Qe(t,n){switch(t.tag){case 26:case 27:case 5:return pe(t.type);case 16:return pe("Lazy");case 13:return t.child!==n&&n!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Ie(t.type,!1);case 11:return Ie(t.type.render,!1);case 1:return Ie(t.type,!0);case 31:return pe("Activity");default:return""}}function Se(t){try{var n="",a=null;do n+=Qe(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var F=Object.prototype.hasOwnProperty,he=i.unstable_scheduleCallback,je=i.unstable_cancelCallback,Fe=i.unstable_shouldYield,ve=i.unstable_requestPaint,Ne=i.unstable_now,ot=i.unstable_getCurrentPriorityLevel,Me=i.unstable_ImmediatePriority,Ct=i.unstable_UserBlockingPriority,Ht=i.unstable_NormalPriority,Rt=i.unstable_LowPriority,vn=i.unstable_IdlePriority,In=i.log,ps=i.unstable_setDisableYieldValue,rn=null,xt=null;function bn(t){if(typeof In=="function"&&ps(t),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(rn,t)}catch{}}var Mt=Math.clz32?Math.clz32:Ac,Nc=Math.log,ja=Math.LN2;function Ac(t){return t>>>=0,t===0?32:31-(Nc(t)/ja|0)|0}var ks=256,Br=262144,Ft=4194304;function Ds(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ms(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=Ds(l):(v&=w,v!==0?h=Ds(v):a||(a=w&~t,a!==0&&(h=Ds(a))))):(w=l&~m,w!==0?h=Ds(w):v!==0?h=Ds(v):a||(a=l&~t,a!==0&&(h=Ds(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function ys(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function rh(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(){var t=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),t}function Os(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function qr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ah(t,n,a,l,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var ie=31-Mt(a),ce=1<<ie;w[ie]=0,D[ie]=-1;var G=q[ie];if(G!==null)for(q[ie]=null,ie=0;ie<G.length;ie++){var Q=G[ie];Q!==null&&(Q.lane&=-536870913)}a&=~ce}l!==0&&Hr(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~n))}function Hr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Mt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Bl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-Mt(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function ql(t,n){var a=n&-n;return a=(a&42)!==0?1:Fr(a),(a&(t.suspendedLanes|n))!==0?0:a}function Fr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cc(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:rx(t.type))}function xs(t,n){var a=le.p;try{return le.p=t,n()}finally{le.p=a}}var vs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+vs,an="__reactProps$"+vs,Vs="__reactContainer$"+vs,Ca="__reactEvents$"+vs,lh="__reactListeners$"+vs,Rc="__reactHandles$"+vs,Ic="__reactResources$"+vs,Ls="__reactMarker$"+vs;function Ra(t){delete t[Gt],delete t[an],delete t[Ca],delete t[lh],delete t[Rc]}function Ps(t){var n=t[Gt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Vs]||a[Gt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Hy(t);t!==null;){if(a=t[Gt])return a;t=Hy(t)}return n}t=a,a=t.parentNode}return null}function es(t){if(t=t[Gt]||t[Vs]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function qn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Us(t){var n=t[Ic];return n||(n=t[Ic]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Yt(t){t[Ls]=!0}var Hl=new Set,Fl={};function zs(t,n){Bs(t,n),Bs(t+"Capture",n)}function Bs(t,n){for(Fl[t]=n,t=0;t<n.length;t++)Hl.add(n[t])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yl={},Kl={};function kc(t){return F.call(Kl,t)?!0:F.call(Yl,t)?!1:Gl.test(t)?Kl[t]=!0:(Yl[t]=!0,!1)}function Ia(t,n,a){if(kc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Hn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Kt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function $l(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function gt(t){if(!t._valueTracker){var n=zi(t)?"checked":"value";t._valueTracker=$l(t,n,""+t[n])}}function Gr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=zi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yr=/[\n"\\]/g;function kn(t){return t.replace(Yr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ka(t,n,a,l,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+ln(n)):t.value!==""+ln(n)&&(t.value=""+ln(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?Ql(t,v,ln(n)):a!=null?Ql(t,v,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+ln(w):t.removeAttribute("name")}function Dc(t,n,a,l,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){gt(t);return}a=a!=null?""+ln(a):"",n=n!=null?""+ln(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),gt(t)}function Ql(t,n,a){n==="number"&&qs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Bi(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Mc(t,n,a){if(n!=null&&(n=""+ln(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+ln(a):""}function qi(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Le(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=ln(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),gt(t)}function Dn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xl(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Oc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Wl(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Xl(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Xl(t,m,n[m])}function Da(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(t){return Hi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function bs(){}var Zl=null;function ts(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,Hs=null;function Kr(t){var n=es(t);if(n&&(t=n.stateNode)){var a=t[an]||null;e:switch(t=n.stateNode,n.type){case"input":if(ka(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[an]||null;if(!h)throw Error(r(90));ka(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Gr(l)}break e;case"textarea":Mc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Bi(t,!!a.multiple,n,!1)}}}var Oa=!1;function Gi(t,n,a){if(Oa)return t(n,a);Oa=!0;try{var l=t(n);return l}finally{if(Oa=!1,(Fi!==null||Hs!==null)&&(Cu(),Fi&&(n=Fi,t=Hs,Hs=Fi=null,Kr(n),t)))for(n=0;n<t.length;n++)Kr(t[n])}}function _s(t,n){var a=t.stateNode;if(a===null)return null;var l=a[an]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(ns)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){$r=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{$r=!1}var Fs=null,Jl=null,Qr=null;function eo(){if(Qr)return Qr;var t,n=Jl,a=n.length,l,h="value"in Fs?Fs.value:Fs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&n[a-l]===h[m-l];l++);return Qr=h.slice(t,1<l?1-l:void 0)}function Xr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function ws(){return!1}function dn(t){function n(a,l,h,m,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ui:ws,this.isPropagationStopped=ws,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),n}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=dn(di),Yi=S({},di,{view:0,detail:0}),to=dn(Yi),Ki,Va,Ys,La=S({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ys&&(Ys&&t.type==="mousemove"?(Ki=t.screenX-Ys.screenX,Va=t.screenY-Ys.screenY):Va=Ki=0,Ys=t),Ki)},movementY:function(t){return"movementY"in t?t.movementY:Va}}),no=dn(La),Wr=S({},La,{dataTransfer:0}),Lc=dn(Wr),Pc=S({},Yi,{relatedTarget:0}),Zr=dn(Pc),so=S({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),Uc=dn(so),Pa=S({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zc=dn(Pa),Bc=S({},di,{data:0}),Ks=dn(Bc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Fc[t])?!!n[t]:!1}function $i(){return Gc}var Nn=S({},Yi,{key:function(t){if(t.key){var n=qc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(t){return t.type==="keypress"?Xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yc=dn(Nn),Kc=S({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hi=dn(Kc),d=S({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),g=dn(d),b=S({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=dn(b),z=S({},La,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=dn(z),xe=S({},di,{newState:0,oldState:0}),Xe=dn(xe),Lt=[9,13,27,32],ht=ns&&"CompositionEvent"in window,It=null;ns&&"documentMode"in document&&(It=document.documentMode);var ss=ns&&"TextEvent"in window&&!It,$s=ns&&(!ht||It&&8<It&&11>=It),Es=" ",Ts=!1;function Jr(t,n){switch(t){case"keyup":return Lt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ua(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var za=!1;function M1(t,n){switch(t){case"compositionend":return Ua(n);case"keypress":return n.which!==32?null:(Ts=!0,Es);case"textInput":return t=n.data,t===Es&&Ts?null:t;default:return null}}function O1(t,n){if(za)return t==="compositionend"||!ht&&Jr(t,n)?(t=eo(),Qr=Jl=Fs=null,za=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return $s&&n.locale!=="ko"?null:n.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!V1[t.type]:n==="textarea"}function Kg(t,n,a,l){Fi?Hs?Hs.push(l):Hs=[l]:Fi=l,n=Vu(n,"onChange"),0<n.length&&(a=new Gs("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var io=null,ro=null;function L1(t){Cy(t,0)}function $c(t){var n=qn(t);if(Gr(n))return t}function $g(t,n){if(t==="change")return n}var Qg=!1;if(ns){var oh;if(ns){var ch="oninput"in document;if(!ch){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),ch=typeof Xg.oninput=="function"}oh=ch}else oh=!1;Qg=oh&&(!document.documentMode||9<document.documentMode)}function Wg(){io&&(io.detachEvent("onpropertychange",Zg),ro=io=null)}function Zg(t){if(t.propertyName==="value"&&$c(ro)){var n=[];Kg(n,ro,t,ts(t)),Gi(L1,n)}}function P1(t,n,a){t==="focusin"?(Wg(),io=n,ro=a,io.attachEvent("onpropertychange",Zg)):t==="focusout"&&Wg()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(ro)}function z1(t,n){if(t==="click")return $c(n)}function B1(t,n){if(t==="input"||t==="change")return $c(n)}function q1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Fn=typeof Object.is=="function"?Object.is:q1;function ao(t,n){if(Fn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!F.call(n,h)||!Fn(t[h],n[h]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,n){var a=Jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jg(a)}}function tp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?tp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function np(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=qs(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=qs(t.document)}return n}function uh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var H1=ns&&"documentMode"in document&&11>=document.documentMode,Ba=null,dh=null,lo=null,hh=!1;function sp(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hh||Ba==null||Ba!==qs(l)||(l=Ba,"selectionStart"in l&&uh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),lo&&ao(lo,l)||(lo=l,l=Vu(dh,"onSelect"),0<l.length&&(n=new Gs("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ba)))}function ea(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var qa={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},fh={},ip={};ns&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function ta(t){if(fh[t])return fh[t];if(!qa[t])return t;var n=qa[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in ip)return fh[t]=n[a];return t}var rp=ta("animationend"),ap=ta("animationiteration"),lp=ta("animationstart"),F1=ta("transitionrun"),G1=ta("transitionstart"),Y1=ta("transitioncancel"),op=ta("transitionend"),cp=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Ss(t,n){cp.set(t,n),zs(n,[t])}var Qc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],Ha=0,gh=0;function Xc(){for(var t=Ha,n=gh=Ha=0;n<t;){var a=is[n];is[n++]=null;var l=is[n];is[n++]=null;var h=is[n];is[n++]=null;var m=is[n];if(is[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}m!==0&&up(a,h,m)}}function Wc(t,n,a,l){is[Ha++]=t,is[Ha++]=n,is[Ha++]=a,is[Ha++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ph(t,n,a,l){return Wc(t,n,a,l),Zc(t)}function na(t,n){return Wc(t,null,null,n),Zc(t)}function up(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-Mt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Zc(t){if(50<Ro)throw Ro=0,Nf=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Fa={};function K1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,n,a,l){return new K1(t,n,a,l)}function yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fi(t,n){var a=t.alternate;return a===null?(a=Gn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Jc(t,n,a,l,h,m){var v=0;if(l=t,typeof t=="function")yh(t)&&(v=1);else if(typeof t=="string")v=Zw(t,a,V.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Gn(31,a,n,h),t.elementType=C,t.lanes=m,t;case X:return sa(a.children,h,m,n);case P:v=8,h|=24;break;case ee:return t=Gn(12,a,n,h|2),t.elementType=ee,t.lanes=m,t;case Ee:return t=Gn(13,a,n,h),t.elementType=Ee,t.lanes=m,t;case ge:return t=Gn(19,a,n,h),t.elementType=ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ye:v=10;break e;case te:v=9;break e;case fe:v=11;break e;case R:v=14;break e;case N:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=Gn(v,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function sa(t,n,a,l){return t=Gn(7,t,l,n),t.lanes=a,t}function xh(t,n,a){return t=Gn(6,t,null,n),t.lanes=a,t}function hp(t){var n=Gn(18,null,null,0);return n.stateNode=t,n}function vh(t,n,a){return n=Gn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var fp=new WeakMap;function rs(t,n){if(typeof t=="object"&&t!==null){var a=fp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Se(n)},fp.set(t,n),n)}return{value:t,source:n,stack:Se(n)}}var Ga=[],Ya=0,eu=null,oo=0,as=[],ls=0,Qi=null,Qs=1,Xs="";function mi(t,n){Ga[Ya++]=oo,Ga[Ya++]=eu,eu=t,oo=n}function mp(t,n,a){as[ls++]=Qs,as[ls++]=Xs,as[ls++]=Qi,Qi=t;var l=Qs;t=Xs;var h=32-Mt(l)-1;l&=~(1<<h),a+=1;var m=32-Mt(n)+h;if(30<m){var v=h-h%5;m=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Qs=1<<32-Mt(n)+h|a<<h|l,Xs=m+t}else Qs=1<<m|a<<h|l,Xs=t}function bh(t){t.return!==null&&(mi(t,1),mp(t,1,0))}function _h(t){for(;t===eu;)eu=Ga[--Ya],Ga[Ya]=null,oo=Ga[--Ya],Ga[Ya]=null;for(;t===Qi;)Qi=as[--ls],as[ls]=null,Xs=as[--ls],as[ls]=null,Qs=as[--ls],as[ls]=null}function gp(t,n){as[ls++]=Qs,as[ls++]=Xs,as[ls++]=Qi,Qs=n.id,Xs=n.overflow,Qi=t}var hn=null,St=null,lt=!1,Xi=null,os=!1,wh=Error(r(519));function Wi(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw co(rs(n,t)),wh}function pp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Gt]=t,n[an]=l,a){case"dialog":tt("cancel",n),tt("close",n);break;case"iframe":case"object":case"embed":tt("load",n);break;case"video":case"audio":for(a=0;a<ko.length;a++)tt(ko[a],n);break;case"source":tt("error",n);break;case"img":case"image":case"link":tt("error",n),tt("load",n);break;case"details":tt("toggle",n);break;case"input":tt("invalid",n),Dc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":tt("invalid",n);break;case"textarea":tt("invalid",n),qi(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Dy(n.textContent,a)?(l.popover!=null&&(tt("beforetoggle",n),tt("toggle",n)),l.onScroll!=null&&tt("scroll",n),l.onScrollEnd!=null&&tt("scrollend",n),l.onClick!=null&&(n.onclick=bs),n=!0):n=!1,n||Wi(t,!0)}function yp(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:hn=hn.return}}function Ka(t){if(t!==hn)return!1;if(!lt)return yp(t),lt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Bf(t.type,t.memoizedProps)),a=!a),a&&St&&Wi(t),yp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));St=qy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));St=qy(t)}else n===27?(n=St,dr(t.type)?(t=Yf,Yf=null,St=t):St=n):St=hn?us(t.stateNode.nextSibling):null;return!0}function ia(){St=hn=null,lt=!1}function Eh(){var t=Xi;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),Xi=null),t}function co(t){Xi===null?Xi=[t]:Xi.push(t)}var Th=E(null),ra=null,gi=null;function Zi(t,n,a){ne(Th,n._currentValue),n._currentValue=a}function pi(t){t._currentValue=Th.current,L(Th)}function Sh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Nh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Sh(m.return,a,t),l||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Sh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function $a(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;Fn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===_e.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Lo):t=[Lo])}h=h.return}t!==null&&Nh(n,t,a,l),n.flags|=262144}function tu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function aa(t){ra=t,gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return xp(ra,t)}function nu(t,n){return ra===null&&aa(t),xp(t,n)}function xp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},gi===null){if(t===null)throw Error(r(308));gi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else gi=gi.next=n;return a}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Q1=i.unstable_scheduleCallback,X1=i.unstable_NormalPriority,$t={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new $1,data:new Map,refCount:0}}function uo(t){t.refCount--,t.refCount===0&&Q1(X1,function(){t.controller.abort()})}var ho=null,jh=0,Qa=0,Xa=null;function W1(t,n){if(ho===null){var a=ho=[];jh=0,Qa=kf(),Xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jh++,n.then(vp,vp),n}function vp(){if(--jh===0&&ho!==null){Xa!==null&&(Xa.status="fulfilled");var t=ho;ho=null,Qa=0,Xa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Z1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var bp=K.S;K.S=function(t,n){sy=Ne(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&W1(t,n),bp!==null&&bp(t,n)};var la=E(null);function Ch(){var t=la.current;return t!==null?t:Et.pooledCache}function su(t,n){n===null?ne(la,la.current):ne(la,n.pool)}function _p(){var t=Ch();return t===null?null:{parent:$t._currentValue,pool:t}}var Wa=Error(r(460)),Rh=Error(r(474)),iu=Error(r(542)),ru={then:function(){}};function wp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ep(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(bs,bs),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(bs,bs);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw ca=n,Wa}}function oa(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ca=a,Wa):a}}var ca=null;function Tp(){if(ca===null)throw Error(r(459));var t=ca;return ca=null,t}function Sp(t){if(t===Wa||t===iu)throw Error(r(483))}var Za=null,fo=0;function au(t){var n=fo;return fo+=1,Za===null&&(Za=[]),Ep(Za,t,n)}function mo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lu(t,n){throw n.$$typeof===j?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Np(t){function n(U,O){if(t){var B=U.deletions;B===null?(U.deletions=[O],U.flags|=16):B.push(O)}}function a(U,O){if(!t)return null;for(;O!==null;)n(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=fi(U,O),U.index=0,U.sibling=null,U}function m(U,O,B){return U.index=B,t?(B=U.alternate,B!==null?(B=B.index,B<O?(U.flags|=67108866,O):B):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,O,B,re){return O===null||O.tag!==6?(O=xh(B,U.mode,re),O.return=U,O):(O=h(O,B),O.return=U,O)}function D(U,O,B,re){var Oe=B.type;return Oe===X?ie(U,O,B.props.children,re,B.key):O!==null&&(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&oa(Oe)===O.type)?(O=h(O,B.props),mo(O,B),O.return=U,O):(O=Jc(B.type,B.key,B.props,null,U.mode,re),mo(O,B),O.return=U,O)}function q(U,O,B,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=vh(B,U.mode,re),O.return=U,O):(O=h(O,B.children||[]),O.return=U,O)}function ie(U,O,B,re,Oe){return O===null||O.tag!==7?(O=sa(B,U.mode,re,Oe),O.return=U,O):(O=h(O,B),O.return=U,O)}function ce(U,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=xh(""+O,U.mode,B),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return B=Jc(O.type,O.key,O.props,null,U.mode,B),mo(B,O),B.return=U,B;case Z:return O=vh(O,U.mode,B),O.return=U,O;case N:return O=oa(O),ce(U,O,B)}if(Le(O)||M(O))return O=sa(O,U.mode,B,null),O.return=U,O;if(typeof O.then=="function")return ce(U,au(O),B);if(O.$$typeof===ye)return ce(U,nu(U,O),B);lu(U,O)}return null}function G(U,O,B,re){var Oe=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Oe!==null?null:w(U,O,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case H:return B.key===Oe?D(U,O,B,re):null;case Z:return B.key===Oe?q(U,O,B,re):null;case N:return B=oa(B),G(U,O,B,re)}if(Le(B)||M(B))return Oe!==null?null:ie(U,O,B,re,null);if(typeof B.then=="function")return G(U,O,au(B),re);if(B.$$typeof===ye)return G(U,O,nu(U,B),re);lu(U,B)}return null}function Q(U,O,B,re,Oe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(B)||null,w(O,U,""+re,Oe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case H:return U=U.get(re.key===null?B:re.key)||null,D(O,U,re,Oe);case Z:return U=U.get(re.key===null?B:re.key)||null,q(O,U,re,Oe);case N:return re=oa(re),Q(U,O,B,re,Oe)}if(Le(re)||M(re))return U=U.get(B)||null,ie(O,U,re,Oe,null);if(typeof re.then=="function")return Q(U,O,B,au(re),Oe);if(re.$$typeof===ye)return Q(U,O,B,nu(O,re),Oe);lu(O,re)}return null}function ke(U,O,B,re){for(var Oe=null,ut=null,De=O,Je=O=0,st=null;De!==null&&Je<B.length;Je++){De.index>Je?(st=De,De=null):st=De.sibling;var dt=G(U,De,B[Je],re);if(dt===null){De===null&&(De=st);break}t&&De&&dt.alternate===null&&n(U,De),O=m(dt,O,Je),ut===null?Oe=dt:ut.sibling=dt,ut=dt,De=st}if(Je===B.length)return a(U,De),lt&&mi(U,Je),Oe;if(De===null){for(;Je<B.length;Je++)De=ce(U,B[Je],re),De!==null&&(O=m(De,O,Je),ut===null?Oe=De:ut.sibling=De,ut=De);return lt&&mi(U,Je),Oe}for(De=l(De);Je<B.length;Je++)st=Q(De,U,Je,B[Je],re),st!==null&&(t&&st.alternate!==null&&De.delete(st.key===null?Je:st.key),O=m(st,O,Je),ut===null?Oe=st:ut.sibling=st,ut=st);return t&&De.forEach(function(pr){return n(U,pr)}),lt&&mi(U,Je),Oe}function Ue(U,O,B,re){if(B==null)throw Error(r(151));for(var Oe=null,ut=null,De=O,Je=O=0,st=null,dt=B.next();De!==null&&!dt.done;Je++,dt=B.next()){De.index>Je?(st=De,De=null):st=De.sibling;var pr=G(U,De,dt.value,re);if(pr===null){De===null&&(De=st);break}t&&De&&pr.alternate===null&&n(U,De),O=m(pr,O,Je),ut===null?Oe=pr:ut.sibling=pr,ut=pr,De=st}if(dt.done)return a(U,De),lt&&mi(U,Je),Oe;if(De===null){for(;!dt.done;Je++,dt=B.next())dt=ce(U,dt.value,re),dt!==null&&(O=m(dt,O,Je),ut===null?Oe=dt:ut.sibling=dt,ut=dt);return lt&&mi(U,Je),Oe}for(De=l(De);!dt.done;Je++,dt=B.next())dt=Q(De,U,Je,dt.value,re),dt!==null&&(t&&dt.alternate!==null&&De.delete(dt.key===null?Je:dt.key),O=m(dt,O,Je),ut===null?Oe=dt:ut.sibling=dt,ut=dt);return t&&De.forEach(function(c2){return n(U,c2)}),lt&&mi(U,Je),Oe}function wt(U,O,B,re){if(typeof B=="object"&&B!==null&&B.type===X&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case H:e:{for(var Oe=B.key;O!==null;){if(O.key===Oe){if(Oe=B.type,Oe===X){if(O.tag===7){a(U,O.sibling),re=h(O,B.props.children),re.return=U,U=re;break e}}else if(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&oa(Oe)===O.type){a(U,O.sibling),re=h(O,B.props),mo(re,B),re.return=U,U=re;break e}a(U,O);break}else n(U,O);O=O.sibling}B.type===X?(re=sa(B.props.children,U.mode,re,B.key),re.return=U,U=re):(re=Jc(B.type,B.key,B.props,null,U.mode,re),mo(re,B),re.return=U,U=re)}return v(U);case Z:e:{for(Oe=B.key;O!==null;){if(O.key===Oe)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(U,O.sibling),re=h(O,B.children||[]),re.return=U,U=re;break e}else{a(U,O);break}else n(U,O);O=O.sibling}re=vh(B,U.mode,re),re.return=U,U=re}return v(U);case N:return B=oa(B),wt(U,O,B,re)}if(Le(B))return ke(U,O,B,re);if(M(B)){if(Oe=M(B),typeof Oe!="function")throw Error(r(150));return B=Oe.call(B),Ue(U,O,B,re)}if(typeof B.then=="function")return wt(U,O,au(B),re);if(B.$$typeof===ye)return wt(U,O,nu(U,B),re);lu(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(U,O.sibling),re=h(O,B),re.return=U,U=re):(a(U,O),re=xh(B,U.mode,re),re.return=U,U=re),v(U)):a(U,O)}return function(U,O,B,re){try{fo=0;var Oe=wt(U,O,B,re);return Za=null,Oe}catch(De){if(De===Wa||De===iu)throw De;var ut=Gn(29,De,null,U.mode);return ut.lanes=re,ut.return=U,ut}finally{}}}var ua=Np(!0),Ap=Np(!1),Ji=!1;function Ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function er(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function tr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ft&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Zc(t),up(t,null,a),n}return Wc(t,l,n,a),Zc(t)}function go(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Bl(t,a)}}function Dh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Mh=!1;function po(){if(Mh){var t=Xa;if(t!==null)throw t}}function yo(t,n,a,l){Mh=!1;var h=t.updateQueue;Ji=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,q=D.next;D.next=null,v===null?m=q:v.next=q,v=D;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==v&&(w===null?ie.firstBaseUpdate=q:w.next=q,ie.lastBaseUpdate=D))}if(m!==null){var ce=h.baseState;v=0,ie=q=D=null,w=m;do{var G=w.lane&-536870913,Q=G!==w.lane;if(Q?(nt&G)===G:(l&G)===G){G!==0&&G===Qa&&(Mh=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ke=t,Ue=w;G=n;var wt=a;switch(Ue.tag){case 1:if(ke=Ue.payload,typeof ke=="function"){ce=ke.call(wt,ce,G);break e}ce=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ue.payload,G=typeof ke=="function"?ke.call(wt,ce,G):ke,G==null)break e;ce=S({},ce,G);break e;case 2:Ji=!0}}G=w.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(q=ie=Q,D=ce):ie=ie.next=Q,v|=G;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);ie===null&&(D=ce),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=ie,m===null&&(h.shared.lanes=0),ar|=v,t.lanes=v,t.memoizedState=ce}}function jp(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Cp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)jp(a[t],n)}var Ja=E(null),ou=E(0);function Rp(t,n){t=Si,ne(ou,t),ne(Ja,n),Si=t|n.baseLanes}function Oh(){ne(ou,Si),ne(Ja,Ja.current)}function Vh(){Si=ou.current,L(Ja),L(ou)}var Yn=E(null),cs=null;function nr(t){var n=t.alternate;ne(Pt,Pt.current&1),ne(Yn,t),cs===null&&(n===null||Ja.current!==null||n.memoizedState!==null)&&(cs=t)}function Lh(t){ne(Pt,Pt.current),ne(Yn,t),cs===null&&(cs=t)}function Ip(t){t.tag===22?(ne(Pt,Pt.current),ne(Yn,t),cs===null&&(cs=t)):sr()}function sr(){ne(Pt,Pt.current),ne(Yn,Yn.current)}function Kn(t){L(Yn),cs===t&&(cs=null),L(Pt)}var Pt=E(0);function cu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ff(a)||Gf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var yi=0,We=null,bt=null,Qt=null,uu=!1,el=!1,da=!1,du=0,xo=0,tl=null,J1=0;function Ot(){throw Error(r(321))}function Ph(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Fn(t[a],n[a]))return!1;return!0}function Uh(t,n,a,l,h,m){return yi=m,We=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?m0:ef,da=!1,m=a(l,h),da=!1,el&&(m=Dp(n,a,l,h)),kp(t),m}function kp(t){K.H=_o;var n=bt!==null&&bt.next!==null;if(yi=0,Qt=bt=We=null,uu=!1,xo=0,tl=null,n)throw Error(r(300));t===null||Xt||(t=t.dependencies,t!==null&&tu(t)&&(Xt=!0))}function Dp(t,n,a,l){We=t;var h=0;do{if(el&&(tl=null),xo=0,el=!1,25<=h)throw Error(r(301));if(h+=1,Qt=bt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=g0,m=n(a,l)}while(el);return m}function ew(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?vo(n):n,t=t.useState()[0],(bt!==null?bt.memoizedState:null)!==t&&(We.flags|=1024),n}function zh(){var t=du!==0;return du=0,t}function Bh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function qh(t){if(uu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}uu=!1}yi=0,Qt=bt=We=null,el=!1,xo=du=0,tl=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?We.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function Ut(){if(bt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var n=Qt===null?We.memoizedState:Qt.next;if(n!==null)Qt=n,bt=t;else{if(t===null)throw We.alternate===null?Error(r(467)):Error(r(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Qt===null?We.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(t){var n=xo;return xo+=1,tl===null&&(tl=[]),t=Ep(tl,t,n),n=We,(Qt===null?n.memoizedState:Qt.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?m0:ef),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vo(t);if(t.$$typeof===ye)return fn(t)}throw Error(r(438,String(t)))}function Hh(t){var n=null,a=We.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=We.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hu(),We.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function xi(t,n){return typeof n=="function"?n(t):n}function mu(t){var n=Ut();return Fh(n,bt,t)}function Fh(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=v=null,D=null,q=n,ie=!1;do{var ce=q.lane&-536870913;if(ce!==q.lane?(nt&ce)===ce:(yi&ce)===ce){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ce===Qa&&(ie=!0);else if((yi&G)===G){q=q.next,G===Qa&&(ie=!0);continue}else ce={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=ce,v=m):D=D.next=ce,We.lanes|=G,ar|=G;ce=q.action,da&&a(m,ce),m=q.hasEagerState?q.eagerState:a(m,ce)}else G={lane:ce,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=G,v=m):D=D.next=G,We.lanes|=ce,ar|=ce;q=q.next}while(q!==null&&q!==n);if(D===null?v=m:D.next=w,!Fn(m,t.memoizedState)&&(Xt=!0,ie&&(a=Xa,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gh(t){var n=Ut(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Fn(m,n.memoizedState)||(Xt=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Mp(t,n,a){var l=We,h=Ut(),m=lt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!Fn((bt||h).memoizedState,a);if(v&&(h.memoizedState=a,Xt=!0),h=h.queue,$h(Lp.bind(null,l,h,t),[t]),h.getSnapshot!==n||v||Qt!==null&&Qt.memoizedState.tag&1){if(l.flags|=2048,nl(9,{destroy:void 0},Vp.bind(null,l,h,a,n),null),Et===null)throw Error(r(349));m||(yi&127)!==0||Op(l,n,a)}return a}function Op(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=We.updateQueue,n===null?(n=hu(),We.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Vp(t,n,a,l){n.value=a,n.getSnapshot=l,Pp(n)&&Up(t)}function Lp(t,n,a){return a(function(){Pp(n)&&Up(t)})}function Pp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Fn(t,a)}catch{return!0}}function Up(t){var n=na(t,2);n!==null&&Pn(n,t,2)}function Yh(t){var n=An();if(typeof t=="function"){var a=t;if(t=a(),da){bn(!0);try{a()}finally{bn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},n}function zp(t,n,a,l){return t.baseState=a,Fh(t,bt,typeof l=="function"?l:xi)}function tw(t,n,a,l,h){if(yu(t))throw Error(r(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Bp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Bp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=K.T,v={};K.T=v;try{var w=a(h,l),D=K.S;D!==null&&D(v,w),qp(t,n,w)}catch(q){Kh(t,n,q)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,l),qp(t,n,m)}catch(q){Kh(t,n,q)}}function qp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hp(t,n,l)},function(l){return Kh(t,n,l)}):Hp(t,n,a)}function Hp(t,n,a){n.status="fulfilled",n.value=a,Fp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Bp(t,a)))}function Kh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Fp(n),n=n.next;while(n!==l)}t.action=null}function Fp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Gp(t,n){return n}function Yp(t,n){if(lt){var a=Et.formState;if(a!==null){e:{var l=We;if(lt){if(St){t:{for(var h=St,m=os;h.nodeType!==8;){if(!m){h=null;break t}if(h=us(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){St=us(h.nextSibling),l=h.data==="F!";break e}}Wi(l)}l=!1}l&&(n=a[0])}}return a=An(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:n},a.queue=l,a=d0.bind(null,We,l),l.dispatch=a,l=Yh(!1),m=Jh.bind(null,We,!1,l.queue),l=An(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=tw.bind(null,We,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Kp(t){var n=Ut();return $p(n,bt,t)}function $p(t,n,a){if(n=Fh(t,n,Gp)[0],t=mu(xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=vo(n)}catch(v){throw v===Wa?iu:v}else l=n;n=Ut();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(We.flags|=2048,nl(9,{destroy:void 0},nw.bind(null,h,a),null)),[l,m,t]}function nw(t,n){t.action=n}function Qp(t){var n=Ut(),a=bt;if(a!==null)return $p(n,a,t);Ut(),n=n.memoizedState,a=Ut();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function nl(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=We.updateQueue,n===null&&(n=hu(),We.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Xp(){return Ut().memoizedState}function gu(t,n,a,l){var h=An();We.flags|=t,h.memoizedState=nl(1|n,{destroy:void 0},a,l===void 0?null:l)}function pu(t,n,a,l){var h=Ut();l=l===void 0?null:l;var m=h.memoizedState.inst;bt!==null&&l!==null&&Ph(l,bt.memoizedState.deps)?h.memoizedState=nl(n,m,a,l):(We.flags|=t,h.memoizedState=nl(1|n,m,a,l))}function Wp(t,n){gu(8390656,8,t,n)}function $h(t,n){pu(2048,8,t,n)}function sw(t){We.flags|=4;var n=We.updateQueue;if(n===null)n=hu(),We.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Zp(t){var n=Ut().memoizedState;return sw({ref:n,nextImpl:t}),function(){if((ft&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Jp(t,n){return pu(4,2,t,n)}function e0(t,n){return pu(4,4,t,n)}function t0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function n0(t,n,a){a=a!=null?a.concat([t]):null,pu(4,4,t0.bind(null,n,t),a)}function Qh(){}function s0(t,n){var a=Ut();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Ph(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function i0(t,n){var a=Ut();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Ph(n,l[1]))return l[0];if(l=t(),da){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,n],l}function Xh(t,n,a){return a===void 0||(yi&1073741824)!==0&&(nt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=ry(),We.lanes|=t,ar|=t,a)}function r0(t,n,a,l){return Fn(a,n)?a:Ja.current!==null?(t=Xh(t,a,l),Fn(t,n)||(Xt=!0),t):(yi&42)===0||(yi&1073741824)!==0&&(nt&261930)===0?(Xt=!0,t.memoizedState=a):(t=ry(),We.lanes|=t,ar|=t,n)}function a0(t,n,a,l,h){var m=le.p;le.p=m!==0&&8>m?m:8;var v=K.T,w={};K.T=w,Jh(t,!1,n,a);try{var D=h(),q=K.S;if(q!==null&&q(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ie=Z1(D,l);bo(t,n,ie,Xn(t))}else bo(t,n,l,Xn(t))}catch(ce){bo(t,n,{then:function(){},status:"rejected",reason:ce},Xn())}finally{le.p=m,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function iw(){}function Wh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var h=l0(t).queue;a0(t,h,n,be,a===null?iw:function(){return o0(t),a(l)})}function l0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:be},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function o0(t){var n=l0(t);n.next===null&&(n=t.alternate.memoizedState),bo(t,n.next.queue,{},Xn())}function Zh(){return fn(Lo)}function c0(){return Ut().memoizedState}function u0(){return Ut().memoizedState}function rw(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Xn();t=er(a);var l=tr(n,t,a);l!==null&&(Pn(l,n,a),go(l,n,a)),n={cache:Ah()},t.payload=n;return}n=n.return}}function aw(t,n,a){var l=Xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yu(t)?h0(n,a):(a=ph(t,n,a,l),a!==null&&(Pn(a,t,l),f0(a,n,l)))}function d0(t,n,a){var l=Xn();bo(t,n,a,l)}function bo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yu(t))h0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Fn(w,v))return Wc(t,n,h,0),Et===null&&Xc(),!1}catch{}finally{}if(a=ph(t,n,h,l),a!==null)return Pn(a,t,l),f0(a,n,l),!0}return!1}function Jh(t,n,a,l){if(l={lane:2,revertLane:kf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yu(t)){if(n)throw Error(r(479))}else n=ph(t,a,l,2),n!==null&&Pn(n,t,2)}function yu(t){var n=t.alternate;return t===We||n!==null&&n===We}function h0(t,n){el=uu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function f0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Bl(t,a)}}var _o={readContext:fn,use:fu,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};_o.useEffectEvent=Ot;var m0={readContext:fn,use:fu,useCallback:function(t,n){return An().memoizedState=[t,n===void 0?null:n],t},useContext:fn,useEffect:Wp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,gu(4194308,4,t0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return gu(4194308,4,t,n)},useInsertionEffect:function(t,n){gu(4,2,t,n)},useMemo:function(t,n){var a=An();n=n===void 0?null:n;var l=t();if(da){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=An();if(a!==void 0){var h=a(n);if(da){bn(!0);try{a(n)}finally{bn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=aw.bind(null,We,t),[l.memoizedState,t]},useRef:function(t){var n=An();return t={current:t},n.memoizedState=t},useState:function(t){t=Yh(t);var n=t.queue,a=d0.bind(null,We,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Qh,useDeferredValue:function(t,n){var a=An();return Xh(a,t,n)},useTransition:function(){var t=Yh(!1);return t=a0.bind(null,We,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=We,h=An();if(lt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Et===null)throw Error(r(349));(nt&127)!==0||Op(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Wp(Lp.bind(null,l,m,t),[t]),l.flags|=2048,nl(9,{destroy:void 0},Vp.bind(null,l,m,a,n),null),a},useId:function(){var t=An(),n=Et.identifierPrefix;if(lt){var a=Xs,l=Qs;a=(l&~(1<<32-Mt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=du++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=J1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Zh,useFormState:Yp,useActionState:Yp,useOptimistic:function(t){var n=An();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Jh.bind(null,We,!0,a),a.dispatch=n,[t,n]},useMemoCache:Hh,useCacheRefresh:function(){return An().memoizedState=rw.bind(null,We)},useEffectEvent:function(t){var n=An(),a={impl:t};return n.memoizedState=a,function(){if((ft&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},ef={readContext:fn,use:fu,useCallback:s0,useContext:fn,useEffect:$h,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:i0,useReducer:mu,useRef:Xp,useState:function(){return mu(xi)},useDebugValue:Qh,useDeferredValue:function(t,n){var a=Ut();return r0(a,bt.memoizedState,t,n)},useTransition:function(){var t=mu(xi)[0],n=Ut().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var a=Ut();return zp(a,bt,t,n)},useMemoCache:Hh,useCacheRefresh:u0};ef.useEffectEvent=Zp;var g0={readContext:fn,use:fu,useCallback:s0,useContext:fn,useEffect:$h,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:i0,useReducer:Gh,useRef:Xp,useState:function(){return Gh(xi)},useDebugValue:Qh,useDeferredValue:function(t,n){var a=Ut();return bt===null?Xh(a,t,n):r0(a,bt.memoizedState,t,n)},useTransition:function(){var t=Gh(xi)[0],n=Ut().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:Qp,useActionState:Qp,useOptimistic:function(t,n){var a=Ut();return bt!==null?zp(a,bt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:u0};g0.useEffectEvent=Zp;function tf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:S({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var nf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Xn(),h=er(l);h.payload=n,a!=null&&(h.callback=a),n=tr(t,h,l),n!==null&&(Pn(n,t,l),go(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Xn(),h=er(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=tr(t,h,l),n!==null&&(Pn(n,t,l),go(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Xn(),l=er(a);l.tag=2,n!=null&&(l.callback=n),n=tr(t,l,a),n!==null&&(Pn(n,t,a),go(n,t,a))}};function p0(t,n,a,l,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!ao(a,l)||!ao(h,m):!0}function y0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&nf.enqueueReplaceState(n,n.state,null)}function ha(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function x0(t){Qc(t)}function v0(t){console.error(t)}function b0(t){Qc(t)}function xu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sf(t,n,a){return a=er(a),a.tag=3,a.payload={element:null},a.callback=function(){xu(t,n)},a}function w0(t){return t=er(t),t.tag=3,t}function E0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){_0(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){_0(n,a,l),typeof h!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function lw(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&$a(n,a,h,!0),a=Yn.current,a!==null){switch(a.tag){case 31:case 13:return cs===null?Ru():a.alternate===null&&Vt===0&&(Vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===ru?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Cf(t,l,h)),!1;case 22:return a.flags|=65536,l===ru?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Cf(t,l,h)),!1}throw Error(r(435,a.tag))}return Cf(t,l,h),Ru(),!1}if(lt)return n=Yn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==wh&&(t=Error(r(422),{cause:l}),co(rs(t,a)))):(l!==wh&&(n=Error(r(423),{cause:l}),co(rs(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=rs(l,a),h=sf(t.stateNode,l,h),Dh(t,h),Vt!==4&&(Vt=2)),!1;var m=Error(r(520),{cause:l});if(m=rs(m,a),Co===null?Co=[m]:Co.push(m),Vt!==4&&(Vt=2),n===null)return!0;l=rs(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=sf(a.stateNode,l,t),Dh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(lr===null||!lr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=w0(h),E0(h,t,a,l),Dh(a,h),!1}a=a.return}while(a!==null);return!1}var rf=Error(r(461)),Xt=!1;function mn(t,n,a,l){n.child=t===null?Ap(n,null,a,l):ua(n,t.child,a,l)}function T0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return aa(n),l=Uh(t,n,a,v,m,h),w=zh(),t!==null&&!Xt?(Bh(t,n,h),vi(t,n,h)):(lt&&w&&bh(n),n.flags|=1,mn(t,n,l,h),n.child)}function S0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!yh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,N0(t,n,m,l,h)):(t=Jc(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!ff(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ao,a(v,l)&&t.ref===n.ref)return vi(t,n,h)}return n.flags|=1,t=fi(m,l),t.ref=n.ref,t.return=n,n.child=t}function N0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(ao(m,l)&&t.ref===n.ref)if(Xt=!1,n.pendingProps=l=m,ff(t,h))(t.flags&131072)!==0&&(Xt=!0);else return n.lanes=t.lanes,vi(t,n,h)}return af(t,n,a,l,h)}function A0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return j0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&su(n,m!==null?m.cachePool:null),m!==null?Rp(n,m):Oh(),Ip(n);else return l=n.lanes=536870912,j0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(su(n,m.cachePool),Rp(n,m),sr(),n.memoizedState=null):(t!==null&&su(n,null),Oh(),sr());return mn(t,n,h,a),n.child}function wo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function j0(t,n,a,l,h){var m=Ch();return m=m===null?null:{parent:$t._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&su(n,null),Oh(),Ip(n),t!==null&&$a(t,n,l,!0),n.childLanes=h,null}function vu(t,n){return n=_u({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function C0(t,n,a){return ua(n,t.child,null,a),t=vu(n,n.pendingProps),t.flags|=2,Kn(n),n.memoizedState=null,t}function ow(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(lt){if(l.mode==="hidden")return t=vu(n,l),n.lanes=536870912,wo(null,t);if(Lh(n),(t=St)?(t=By(t,os),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qi!==null?{id:Qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,hn=n,St=null)):t=null,t===null)throw Wi(n);return n.lanes=536870912,null}return vu(n,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Lh(n),h)if(n.flags&256)n.flags&=-257,n=C0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Xt||$a(t,n,a,!1),h=(a&t.childLanes)!==0,Xt||h){if(l=Et,l!==null&&(v=ql(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,na(t,v),Pn(l,t,v),rf;Ru(),n=C0(t,n,a)}else t=m.treeContext,St=us(v.nextSibling),hn=n,lt=!0,Xi=null,os=!1,t!==null&&gp(n,t),n=vu(n,l),n.flags|=4096;return n}return t=fi(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function bu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function af(t,n,a,l,h){return aa(n),a=Uh(t,n,a,l,void 0,h),l=zh(),t!==null&&!Xt?(Bh(t,n,h),vi(t,n,h)):(lt&&l&&bh(n),n.flags|=1,mn(t,n,a,h),n.child)}function R0(t,n,a,l,h,m){return aa(n),n.updateQueue=null,a=Dp(n,l,a,h),kp(t),l=zh(),t!==null&&!Xt?(Bh(t,n,m),vi(t,n,m)):(lt&&l&&bh(n),n.flags|=1,mn(t,n,a,m),n.child)}function I0(t,n,a,l,h){if(aa(n),n.stateNode===null){var m=Fa,v=a.contextType;typeof v=="object"&&v!==null&&(m=fn(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=nf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Ih(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?fn(v):Fa,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(tf(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&nf.enqueueReplaceState(m,m.state,null),yo(n,l,m,h),po(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=ha(a,w);m.props=D;var q=m.context,ie=a.contextType;v=Fa,typeof ie=="object"&&ie!==null&&(v=fn(ie));var ce=a.getDerivedStateFromProps;ie=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||q!==v)&&y0(n,m,l,v),Ji=!1;var G=n.memoizedState;m.state=G,yo(n,l,m,h),po(),q=n.memoizedState,w||G!==q||Ji?(typeof ce=="function"&&(tf(n,a,ce,l),q=n.memoizedState),(D=Ji||p0(n,a,D,l,G,q,v))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=q),m.props=l,m.state=q,m.context=v,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,kh(t,n),v=n.memoizedProps,ie=ha(a,v),m.props=ie,ce=n.pendingProps,G=m.context,q=a.contextType,D=Fa,typeof q=="object"&&q!==null&&(D=fn(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ce||G!==D)&&y0(n,m,l,D),Ji=!1,G=n.memoizedState,m.state=G,yo(n,l,m,h),po();var Q=n.memoizedState;v!==ce||G!==Q||Ji||t!==null&&t.dependencies!==null&&tu(t.dependencies)?(typeof w=="function"&&(tf(n,a,w,l),Q=n.memoizedState),(ie=Ji||p0(n,a,ie,l,G,Q,D)||t!==null&&t.dependencies!==null&&tu(t.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),m.props=l,m.state=Q,m.context=D,l=ie):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,bu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=ua(n,t.child,null,h),n.child=ua(n,null,a,h)):mn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=vi(t,n,h),t}function k0(t,n,a,l){return ia(),n.flags|=256,mn(t,n,a,l),n.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function of(t){return{baseLanes:t,cachePool:_p()}}function cf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Qn),t}function D0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(lt){if(h?nr(n):sr(),(t=St)?(t=By(t,os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qi!==null?{id:Qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,hn=n,St=null)):t=null,t===null)throw Wi(n);return Gf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(sr(),h=n.mode,w=_u({mode:"hidden",children:w},h),l=sa(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,v,a),n.memoizedState=lf,wo(null,l)):(nr(n),uf(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(nr(n),n.flags&=-257,n=df(t,n,a)):n.memoizedState!==null?(sr(),n.child=t.child,n.flags|=128,n=null):(sr(),w=l.fallback,h=n.mode,l=_u({mode:"visible",children:l.children},h),w=sa(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,ua(n,t.child,null,a),l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,v,a),n.memoizedState=lf,n=wo(null,l));else if(nr(n),Gf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(r(419)),l.stack="",l.digest=v,co({value:l,source:null,stack:null}),n=df(t,n,a)}else if(Xt||$a(t,n,a,!1),v=(a&t.childLanes)!==0,Xt||v){if(v=Et,v!==null&&(l=ql(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,na(t,l),Pn(v,t,l),rf;Ff(w)||Ru(),n=df(t,n,a)}else Ff(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,St=us(w.nextSibling),hn=n,lt=!0,Xi=null,os=!1,t!==null&&gp(n,t),n=uf(n,l.children),n.flags|=4096);return n}return h?(sr(),w=l.fallback,h=n.mode,D=t.child,q=D.sibling,l=fi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?w=fi(q,w):(w=sa(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,wo(null,l),l=n.child,w=t.child.memoizedState,w===null?w=of(a):(h=w.cachePool,h!==null?(D=$t._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=_p(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=cf(t,v,a),n.memoizedState=lf,wo(t.child,l)):(nr(n),a=t.child,t=a.sibling,a=fi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function uf(t,n){return n=_u({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function _u(t,n){return t=Gn(22,t,null,n),t.lanes=0,t}function df(t,n,a){return ua(n,t.child,null,a),t=uf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function M0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Sh(t.return,n,a)}function hf(t,n,a,l,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function O0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var v=Pt.current,w=(v&2)!==0;if(w?(v=v&1|2,n.flags|=128):v&=1,ne(Pt,v),mn(t,n,l,a),l=lt?oo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,a,n);else if(t.tag===19)M0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&cu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),hf(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&cu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}hf(n,!0,a,null,m,l);break;case"together":hf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function vi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ar|=n.lanes,(a&n.childLanes)===0)if(t!==null){if($a(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=fi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=fi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function ff(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&tu(t)))}function cw(t,n,a){switch(n.tag){case 3:Be(n,n.stateNode.containerInfo),Zi(n,$t,t.memoizedState.cache),ia();break;case 27:case 5:W(n);break;case 4:Be(n,n.stateNode.containerInfo);break;case 10:Zi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Lh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(nr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?D0(t,n,a):(nr(n),t=vi(t,n,a),t!==null?t.sibling:null);nr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||($a(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return O0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(Pt,Pt.current),l)break;return null;case 22:return n.lanes=0,A0(t,n,a,n.pendingProps);case 24:Zi(n,$t,t.memoizedState.cache)}return vi(t,n,a)}function V0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Xt=!0;else{if(!ff(t,a)&&(n.flags&128)===0)return Xt=!1,cw(t,n,a);Xt=(t.flags&131072)!==0}else Xt=!1,lt&&(n.flags&1048576)!==0&&mp(n,oo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=oa(n.elementType),n.type=t,typeof t=="function")yh(t)?(l=ha(t,l),n.tag=1,n=I0(null,n,t,l,a)):(n.tag=0,n=af(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===fe){n.tag=11,n=T0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=S0(null,n,t,l,a);break e}}throw n=de(t)||t,Error(r(306,n,""))}}return n;case 0:return af(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=ha(l,n.pendingProps),I0(t,n,l,h,a);case 3:e:{if(Be(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,kh(t,n),yo(n,l,null,a);var v=n.memoizedState;if(l=v.cache,Zi(n,$t,l),l!==m.cache&&Nh(n,[$t],a,!0),po(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=k0(t,n,l,a);break e}else if(l!==h){h=rs(Error(r(424)),n),co(h),n=k0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(St=us(t.firstChild),hn=n,lt=!0,Xi=null,os=!0,a=Ap(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ia(),l===h){n=vi(t,n,a);break e}mn(t,n,l,a)}n=n.child}return n;case 26:return bu(t,n),t===null?(a=Ky(n.type,null,n.pendingProps,null))?n.memoizedState=a:lt||(a=n.type,t=n.pendingProps,l=Lu(me.current).createElement(a),l[Gt]=n,l[an]=t,gn(l,a,t),Yt(l),n.stateNode=l):n.memoizedState=Ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return W(n),t===null&&lt&&(l=n.stateNode=Fy(n.type,n.pendingProps,me.current),hn=n,os=!0,h=St,dr(n.type)?(Yf=h,St=us(l.firstChild)):St=h),mn(t,n,n.pendingProps.children,a),bu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&lt&&((h=l=St)&&(l=Uw(l,n.type,n.pendingProps,os),l!==null?(n.stateNode=l,hn=n,St=us(l.firstChild),os=!1,h=!0):h=!1),h||Wi(n)),W(n),h=n.type,m=n.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,Bf(h,m)?l=null:v!==null&&Bf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Uh(t,n,ew,null,null,a),Lo._currentValue=h),bu(t,n),mn(t,n,l,a),n.child;case 6:return t===null&&lt&&((t=a=St)&&(a=zw(a,n.pendingProps,os),a!==null?(n.stateNode=a,hn=n,St=null,t=!0):t=!1),t||Wi(n)),null;case 13:return D0(t,n,a);case 4:return Be(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ua(n,null,l,a):mn(t,n,l,a),n.child;case 11:return T0(t,n,n.type,n.pendingProps,a);case 7:return mn(t,n,n.pendingProps,a),n.child;case 8:return mn(t,n,n.pendingProps.children,a),n.child;case 12:return mn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Zi(n,n.type,l.value),mn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,aa(n),h=fn(h),l=l(h),n.flags|=1,mn(t,n,l,a),n.child;case 14:return S0(t,n,n.type,n.pendingProps,a);case 15:return N0(t,n,n.type,n.pendingProps,a);case 19:return O0(t,n,a);case 31:return ow(t,n,a);case 22:return A0(t,n,a,n.pendingProps);case 24:return aa(n),l=fn($t),t===null?(h=Ch(),h===null&&(h=Et,m=Ah(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},Ih(n),Zi(n,$t,h)):((t.lanes&a)!==0&&(kh(t,n),yo(n,null,null,a),po()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Zi(n,$t,l)):(l=m.cache,Zi(n,$t,l),l!==h.cache&&Nh(n,[$t],a,!0))),mn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function bi(t){t.flags|=4}function mf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(cy())t.flags|=8192;else throw ca=ru,Rh}else t.flags&=-16777217}function L0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zy(n))if(cy())t.flags|=8192;else throw ca=ru,Rh}function wu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?jc():536870912,t.lanes|=n,al|=n)}function Eo(t,n){if(!lt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Nt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function uw(t,n,a){var l=n.pendingProps;switch(_h(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(n),null;case 1:return Nt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),pi($t),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ka(n)?bi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Eh())),Nt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(bi(n),m!==null?(Nt(n),L0(n,m)):(Nt(n),mf(n,h,null,l,a))):m?m!==t.memoizedState?(bi(n),Nt(n),L0(n,m)):(Nt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&bi(n),Nt(n),mf(n,h,t,l,a)),null;case 27:if(we(n),a=me.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&bi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Nt(n),null}t=V.current,Ka(n)?pp(n):(t=Fy(h,l,a),n.stateNode=t,bi(n))}return Nt(n),null;case 5:if(we(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&bi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Nt(n),null}if(m=V.current,Ka(n))pp(n);else{var v=Lu(me.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}m[Gt]=n,m[an]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;e:switch(gn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&bi(n)}}return Nt(n),mf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&bi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=me.current,Ka(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=hn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Gt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dy(t.nodeValue,a)),t||Wi(n,!0)}else t=Lu(t).createTextNode(l),t[Gt]=n,n.stateNode=t}return Nt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ka(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Gt]=n}else ia(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Nt(n),t=!1}else a=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Kn(n),n):(Kn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return Nt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ka(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Gt]=n}else ia(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Nt(n),h=!1}else h=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Kn(n),n):(Kn(n),null)}return Kn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),wu(n,n.updateQueue),Nt(n),null);case 4:return Pe(),t===null&&Vf(n.stateNode.containerInfo),Nt(n),null;case 10:return pi(n.type),Nt(n),null;case 19:if(L(Pt),l=n.memoizedState,l===null)return Nt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)Eo(l,!1);else{if(Vt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=cu(t),m!==null){for(n.flags|=128,Eo(l,!1),t=m.updateQueue,n.updateQueue=t,wu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)dp(a,t),a=a.sibling;return ne(Pt,Pt.current&1|2),lt&&mi(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Ne()>Au&&(n.flags|=128,h=!0,Eo(l,!1),n.lanes=4194304)}else{if(!h)if(t=cu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,wu(n,t),Eo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!lt)return Nt(n),null}else 2*Ne()-l.renderingStartTime>Au&&a!==536870912&&(n.flags|=128,h=!0,Eo(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ne(),t.sibling=null,a=Pt.current,ne(Pt,h?a&1|2:a&1),lt&&mi(n,l.treeForkCount),t):(Nt(n),null);case 22:case 23:return Kn(n),Vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Nt(n),n.subtreeFlags&6&&(n.flags|=8192)):Nt(n),a=n.updateQueue,a!==null&&wu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&L(la),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),pi($t),Nt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function dw(t,n){switch(_h(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return pi($t),Pe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return we(n),null;case 31:if(n.memoizedState!==null){if(Kn(n),n.alternate===null)throw Error(r(340));ia()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Kn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ia()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return L(Pt),null;case 4:return Pe(),null;case 10:return pi(n.type),null;case 22:case 23:return Kn(n),Vh(),t!==null&&L(la),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return pi($t),null;case 25:return null;default:return null}}function P0(t,n){switch(_h(n),n.tag){case 3:pi($t),Pe();break;case 26:case 27:case 5:we(n);break;case 4:Pe();break;case 31:n.memoizedState!==null&&Kn(n);break;case 13:Kn(n);break;case 19:L(Pt);break;case 10:pi(n.type);break;case 22:case 23:Kn(n),Vh(),t!==null&&L(la);break;case 24:pi($t)}}function To(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){yt(n,n.return,w)}}function ir(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=n;var D=a,q=w;try{q()}catch(ie){yt(h,D,ie)}}}l=l.next}while(l!==m)}}catch(ie){yt(n,n.return,ie)}}function U0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Cp(n,a)}catch(l){yt(t,t.return,l)}}}function z0(t,n,a){a.props=ha(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){yt(t,n,l)}}function So(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){yt(t,n,h)}}function Ws(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){yt(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){yt(t,n,h)}else a.current=null}function B0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){yt(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;Dw(l,t.type,a,n),l[an]=n}catch(h){yt(t,t.return,h)}}function q0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&dr(t.type)||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&dr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=bs));else if(l!==4&&(l===27&&dr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(yf(t,n,a),t=t.sibling;t!==null;)yf(t,n,a),t=t.sibling}function Eu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&dr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Eu(t,n,a),t=t.sibling;t!==null;)Eu(t,n,a),t=t.sibling}function H0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);gn(n,l,a),n[Gt]=t,n[an]=a}catch(m){yt(t,t.return,m)}}var _i=!1,Wt=!1,xf=!1,F0=typeof WeakSet=="function"?WeakSet:Set,on=null;function hw(t,n){if(t=t.containerInfo,Uf=Fu,t=np(t),uh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,D=-1,q=0,ie=0,ce=t,G=null;t:for(;;){for(var Q;ce!==a||h!==0&&ce.nodeType!==3||(w=v+h),ce!==m||l!==0&&ce.nodeType!==3||(D=v+l),ce.nodeType===3&&(v+=ce.nodeValue.length),(Q=ce.firstChild)!==null;)G=ce,ce=Q;for(;;){if(ce===t)break t;if(G===a&&++q===h&&(w=v),G===m&&++ie===l&&(D=v),(Q=ce.nextSibling)!==null)break;ce=G,G=ce.parentNode}ce=Q}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(zf={focusedElem:t,selectionRange:a},Fu=!1,on=n;on!==null;)if(n=on,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,on=t;else for(;on!==null;){switch(n=on,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ke=ha(a.type,h);t=l.getSnapshotBeforeUpdate(ke,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ue){yt(a,a.return,Ue)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Hf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,on=t;break}on=n.return}}function G0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ei(t,a),l&4&&To(5,a);break;case 1:if(Ei(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){yt(a,a.return,v)}else{var h=ha(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){yt(a,a.return,v)}}l&64&&U0(a),l&512&&So(a,a.return);break;case 3:if(Ei(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Cp(t,n)}catch(v){yt(a,a.return,v)}}break;case 27:n===null&&l&4&&H0(a);case 26:case 5:Ei(t,a),n===null&&l&4&&B0(a),l&512&&So(a,a.return);break;case 12:Ei(t,a);break;case 31:Ei(t,a),l&4&&$0(t,a);break;case 13:Ei(t,a),l&4&&Q0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=_w.bind(null,a),Bw(t,a))));break;case 22:if(l=a.memoizedState!==null||_i,!l){n=n!==null&&n.memoizedState!==null||Wt,h=_i;var m=Wt;_i=l,(Wt=n)&&!m?Ti(t,a,(a.subtreeFlags&8772)!==0):Ei(t,a),_i=h,Wt=m}break;case 30:break;default:Ei(t,a)}}function Y0(t){var n=t.alternate;n!==null&&(t.alternate=null,Y0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ra(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var kt=null,Mn=!1;function wi(t,n,a){for(a=a.child;a!==null;)K0(t,n,a),a=a.sibling}function K0(t,n,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(rn,a)}catch{}switch(a.tag){case 26:Wt||Ws(a,n),wi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Wt||Ws(a,n);var l=kt,h=Mn;dr(a.type)&&(kt=a.stateNode,Mn=!1),wi(t,n,a),Mo(a.stateNode),kt=l,Mn=h;break;case 5:Wt||Ws(a,n);case 6:if(l=kt,h=Mn,kt=null,wi(t,n,a),kt=l,Mn=h,kt!==null)if(Mn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(m){yt(a,n,m)}else try{kt.removeChild(a.stateNode)}catch(m){yt(a,n,m)}break;case 18:kt!==null&&(Mn?(t=kt,Uy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ml(t)):Uy(kt,a.stateNode));break;case 4:l=kt,h=Mn,kt=a.stateNode.containerInfo,Mn=!0,wi(t,n,a),kt=l,Mn=h;break;case 0:case 11:case 14:case 15:ir(2,a,n),Wt||ir(4,a,n),wi(t,n,a);break;case 1:Wt||(Ws(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&z0(a,n,l)),wi(t,n,a);break;case 21:wi(t,n,a);break;case 22:Wt=(l=Wt)||a.memoizedState!==null,wi(t,n,a),Wt=l;break;default:wi(t,n,a)}}function $0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ml(t)}catch(a){yt(n,n.return,a)}}}function Q0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ml(t)}catch(a){yt(n,n.return,a)}}function fw(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new F0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new F0),n;default:throw Error(r(435,t.tag))}}function Tu(t,n){var a=fw(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=ww.bind(null,t,l);l.then(h,h)}})}function On(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,v=n,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(dr(w.type)){kt=w.stateNode,Mn=!1;break e}break;case 5:kt=w.stateNode,Mn=!1;break e;case 3:case 4:kt=w.stateNode.containerInfo,Mn=!0;break e}w=w.return}if(kt===null)throw Error(r(160));K0(m,v,h),kt=null,Mn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)X0(n,t),n=n.sibling}var Ns=null;function X0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(n,t),Vn(t),l&4&&(ir(3,t,t.return),To(3,t),ir(5,t,t.return));break;case 1:On(n,t),Vn(t),l&512&&(Wt||a===null||Ws(a,a.return)),l&64&&_i&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ns;if(On(n,t),Vn(t),l&512&&(Wt||a===null||Ws(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ls]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),gn(m,l,a),m[Gt]=t,Yt(m),l=m;break e;case"link":var v=Xy("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(l),gn(m,l,a),h.head.appendChild(m);break;case"meta":if(v=Xy("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(l),gn(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Gt]=t,Yt(m),l=m}t.stateNode=l}else Wy(h,t.type,t.stateNode);else t.stateNode=Qy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Wy(h,t.type,t.stateNode):Qy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(n,t),Vn(t),l&512&&(Wt||a===null||Ws(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(n,t),Vn(t),l&512&&(Wt||a===null||Ws(a,a.return)),t.flags&32){h=t.stateNode;try{Dn(h,"")}catch(ke){yt(t,t.return,ke)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(xf=!0);break;case 6:if(On(n,t),Vn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ke){yt(t,t.return,ke)}}break;case 3:if(zu=null,h=Ns,Ns=Pu(n.containerInfo),On(n,t),Ns=h,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ml(n.containerInfo)}catch(ke){yt(t,t.return,ke)}xf&&(xf=!1,W0(t));break;case 4:l=Ns,Ns=Pu(t.stateNode.containerInfo),On(n,t),Vn(t),Ns=l;break;case 12:On(n,t),Vn(t);break;case 31:On(n,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 13:On(n,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nu=Ne()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=_i,ie=Wt;if(_i=q||h,Wt=ie||D,On(n,t),Wt=ie,_i=q,Vn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||_i||Wt||fa(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var ce=D.memoizedProps.style,G=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ke){yt(D,D.return,ke)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(ke){yt(D,D.return,ke)}}}else if(n.tag===18){if(a===null){D=n;try{var Q=D.stateNode;h?zy(Q,!0):zy(D.stateNode,!1)}catch(ke){yt(D,D.return,ke)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tu(t,a))));break;case 19:On(n,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 30:break;case 21:break;default:On(n,t),Vn(t)}}function Vn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(q0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=pf(t);Eu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(Dn(v,""),a.flags&=-33);var w=pf(t);Eu(t,w,v);break;case 3:case 4:var D=a.stateNode.containerInfo,q=pf(t);yf(t,q,D);break;default:throw Error(r(161))}}catch(ie){yt(t,t.return,ie)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function W0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;W0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ei(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)G0(t,n.alternate,n),n=n.sibling}function fa(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ir(4,n,n.return),fa(n);break;case 1:Ws(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&z0(n,n.return,a),fa(n);break;case 27:Mo(n.stateNode);case 26:case 5:Ws(n,n.return),fa(n);break;case 22:n.memoizedState===null&&fa(n);break;case 30:fa(n);break;default:fa(n)}t=t.sibling}}function Ti(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ti(h,m,a),To(4,m);break;case 1:if(Ti(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){yt(l,l.return,q)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)jp(D[h],w)}catch(q){yt(l,l.return,q)}}a&&v&64&&U0(m),So(m,m.return);break;case 27:H0(m);case 26:case 5:Ti(h,m,a),a&&l===null&&v&4&&B0(m),So(m,m.return);break;case 12:Ti(h,m,a);break;case 31:Ti(h,m,a),a&&v&4&&$0(h,m);break;case 13:Ti(h,m,a),a&&v&4&&Q0(h,m);break;case 22:m.memoizedState===null&&Ti(h,m,a),So(m,m.return);break;case 30:break;default:Ti(h,m,a)}n=n.sibling}}function vf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&uo(a))}function bf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&uo(t))}function As(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Z0(t,n,a,l),n=n.sibling}function Z0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:As(t,n,a,l),h&2048&&To(9,n);break;case 1:As(t,n,a,l);break;case 3:As(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&uo(t)));break;case 12:if(h&2048){As(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){yt(n,n.return,D)}}else As(t,n,a,l);break;case 31:As(t,n,a,l);break;case 13:As(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?As(t,n,a,l):No(t,n):m._visibility&2?As(t,n,a,l):(m._visibility|=2,sl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&vf(v,n);break;case 24:As(t,n,a,l),h&2048&&bf(n.alternate,n);break;default:As(t,n,a,l)}}function sl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,v=n,w=a,D=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:sl(m,v,w,D,h),To(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?sl(m,v,w,D,h):No(m,v):(ie._visibility|=2,sl(m,v,w,D,h)),h&&q&2048&&vf(v.alternate,v);break;case 24:sl(m,v,w,D,h),h&&q&2048&&bf(v.alternate,v);break;default:sl(m,v,w,D,h)}n=n.sibling}}function No(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:No(a,l),h&2048&&vf(l.alternate,l);break;case 24:No(a,l),h&2048&&bf(l.alternate,l);break;default:No(a,l)}n=n.sibling}}var Ao=8192;function il(t,n,a){if(t.subtreeFlags&Ao)for(t=t.child;t!==null;)J0(t,n,a),t=t.sibling}function J0(t,n,a){switch(t.tag){case 26:il(t,n,a),t.flags&Ao&&t.memoizedState!==null&&Jw(a,Ns,t.memoizedState,t.memoizedProps);break;case 5:il(t,n,a);break;case 3:case 4:var l=Ns;Ns=Pu(t.stateNode.containerInfo),il(t,n,a),Ns=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ao,Ao=16777216,il(t,n,a),Ao=l):il(t,n,a));break;default:il(t,n,a)}}function ey(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function jo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];on=l,ny(l,t)}ey(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ty(t),t=t.sibling}function ty(t){switch(t.tag){case 0:case 11:case 15:jo(t),t.flags&2048&&ir(9,t,t.return);break;case 3:jo(t);break;case 12:jo(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Su(t)):jo(t);break;default:jo(t)}}function Su(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];on=l,ny(l,t)}ey(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ir(8,n,n.return),Su(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Su(n));break;default:Su(n)}t=t.sibling}}function ny(t,n){for(;on!==null;){var a=on;switch(a.tag){case 0:case 11:case 15:ir(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:uo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,on=l;else e:for(a=t;on!==null;){l=on;var h=l.sibling,m=l.return;if(Y0(l),l===a){on=null;break e}if(h!==null){h.return=m,on=h;break e}on=m}}}var mw={getCacheForType:function(t){var n=fn($t),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return fn($t).controller.signal}},gw=typeof WeakMap=="function"?WeakMap:Map,ft=0,Et=null,et=null,nt=0,pt=0,$n=null,rr=!1,rl=!1,_f=!1,Si=0,Vt=0,ar=0,ma=0,wf=0,Qn=0,al=0,Co=null,Ln=null,Ef=!1,Nu=0,sy=0,Au=1/0,ju=null,lr=null,nn=0,or=null,ll=null,Ni=0,Tf=0,Sf=null,iy=null,Ro=0,Nf=null;function Xn(){return(ft&2)!==0&&nt!==0?nt&-nt:K.T!==null?kf():Cc()}function ry(){if(Qn===0)if((nt&536870912)===0||lt){var t=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),Qn=t}else Qn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Qn}function Pn(t,n,a){(t===Et&&(pt===2||pt===9)||t.cancelPendingCommit!==null)&&(ol(t,0),cr(t,nt,Qn,!1)),qr(t,a),((ft&2)===0||t!==Et)&&(t===Et&&((ft&2)===0&&(ma|=a),Vt===4&&cr(t,nt,Qn,!1)),Zs(t))}function ay(t,n,a){if((ft&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||ys(t,n),h=l?xw(t,n):jf(t,n,!0),m=l;do{if(h===0){rl&&!l&&cr(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!pw(a)){h=jf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var w=t;h=Co;var D=w.current.memoizedState.isDehydrated;if(D&&(ol(w,v).flags|=256),v=jf(w,v,!1),v!==2){if(_f&&!D){w.errorRecoveryDisabledLanes|=m,ma|=m,h=4;break e}m=Ln,Ln=h,m!==null&&(Ln===null?Ln=m:Ln.push.apply(Ln,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){ol(t,0),cr(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:cr(l,n,Qn,!rr);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=Nu+300-Ne(),10<h)){if(cr(l,n,Qn,!rr),Ms(l,0,!0)!==0)break e;Ni=n,l.timeoutHandle=Ly(ly.bind(null,l,a,Ln,ju,Ef,n,Qn,ma,al,rr,m,"Throttled",-0,0),h);break e}ly(l,a,Ln,ju,Ef,n,Qn,ma,al,rr,m,null,-0,0)}}break}while(!0);Zs(t)}function ly(t,n,a,l,h,m,v,w,D,q,ie,ce,G,Q){if(t.timeoutHandle=-1,ce=n.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bs},J0(n,m,ce);var ke=(m&62914560)===m?Nu-Ne():(m&4194048)===m?sy-Ne():0;if(ke=e2(ce,ke),ke!==null){Ni=m,t.cancelPendingCommit=ke(gy.bind(null,t,n,m,a,l,h,v,w,D,ie,ce,null,G,Q)),cr(t,m,v,!q);return}}gy(t,n,m,a,l,h,v,w,D)}function pw(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Fn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function cr(t,n,a,l){n&=~wf,n&=~ma,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-Mt(h),v=1<<m;l[m]=-1,h&=~v}a!==0&&Hr(t,a,n)}function Cu(){return(ft&6)===0?(Io(0),!1):!0}function Af(){if(et!==null){if(pt===0)var t=et.return;else t=et,gi=ra=null,qh(t),Za=null,fo=0,t=et;for(;t!==null;)P0(t.alternate,t),t=t.return;et=null}}function ol(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Vw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ni=0,Af(),Et=t,et=a=fi(t.current,null),nt=n,pt=0,$n=null,rr=!1,rl=ys(t,n),_f=!1,al=Qn=wf=ma=ar=Vt=0,Ln=Co=null,Ef=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-Mt(l),m=1<<h;n|=t[h],l&=~m}return Si=n,Xc(),a}function oy(t,n){We=null,K.H=_o,n===Wa||n===iu?(n=Tp(),pt=3):n===Rh?(n=Tp(),pt=4):pt=n===rf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$n=n,et===null&&(Vt=1,xu(t,rs(n,t.current)))}function cy(){var t=Yn.current;return t===null?!0:(nt&4194048)===nt?cs===null:(nt&62914560)===nt||(nt&536870912)!==0?t===cs:!1}function uy(){var t=K.H;return K.H=_o,t===null?_o:t}function dy(){var t=K.A;return K.A=mw,t}function Ru(){Vt=4,rr||(nt&4194048)!==nt&&Yn.current!==null||(rl=!0),(ar&134217727)===0&&(ma&134217727)===0||Et===null||cr(Et,nt,Qn,!1)}function jf(t,n,a){var l=ft;ft|=2;var h=uy(),m=dy();(Et!==t||nt!==n)&&(ju=null,ol(t,n)),n=!1;var v=Vt;e:do try{if(pt!==0&&et!==null){var w=et,D=$n;switch(pt){case 8:Af(),v=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(n=!0);var q=pt;if(pt=0,$n=null,cl(t,w,D,q),a&&rl){v=0;break e}break;default:q=pt,pt=0,$n=null,cl(t,w,D,q)}}yw(),v=Vt;break}catch(ie){oy(t,ie)}while(!0);return n&&t.shellSuspendCounter++,gi=ra=null,ft=l,K.H=h,K.A=m,et===null&&(Et=null,nt=0,Xc()),v}function yw(){for(;et!==null;)hy(et)}function xw(t,n){var a=ft;ft|=2;var l=uy(),h=dy();Et!==t||nt!==n?(ju=null,Au=Ne()+500,ol(t,n)):rl=ys(t,n);e:do try{if(pt!==0&&et!==null){n=et;var m=$n;t:switch(pt){case 1:pt=0,$n=null,cl(t,n,m,1);break;case 2:case 9:if(wp(m)){pt=0,$n=null,fy(n);break}n=function(){pt!==2&&pt!==9||Et!==t||(pt=7),Zs(t)},m.then(n,n);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:wp(m)?(pt=0,$n=null,fy(n)):(pt=0,$n=null,cl(t,n,m,7));break;case 5:var v=null;switch(et.tag){case 26:v=et.memoizedState;case 5:case 27:var w=et;if(v?Zy(v):w.stateNode.complete){pt=0,$n=null;var D=w.sibling;if(D!==null)et=D;else{var q=w.return;q!==null?(et=q,Iu(q)):et=null}break t}}pt=0,$n=null,cl(t,n,m,5);break;case 6:pt=0,$n=null,cl(t,n,m,6);break;case 8:Af(),Vt=6;break e;default:throw Error(r(462))}}vw();break}catch(ie){oy(t,ie)}while(!0);return gi=ra=null,K.H=l,K.A=h,ft=a,et!==null?0:(Et=null,nt=0,Xc(),Vt)}function vw(){for(;et!==null&&!Fe();)hy(et)}function hy(t){var n=V0(t.alternate,t,Si);t.memoizedProps=t.pendingProps,n===null?Iu(t):et=n}function fy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=R0(a,n,n.pendingProps,n.type,void 0,nt);break;case 11:n=R0(a,n,n.pendingProps,n.type.render,n.ref,nt);break;case 5:qh(n);default:P0(a,n),n=et=dp(n,Si),n=V0(a,n,Si)}t.memoizedProps=t.pendingProps,n===null?Iu(t):et=n}function cl(t,n,a,l){gi=ra=null,qh(n),Za=null,fo=0;var h=n.return;try{if(lw(t,h,n,a,nt)){Vt=1,xu(t,rs(a,t.current)),et=null;return}}catch(m){if(h!==null)throw et=h,m;Vt=1,xu(t,rs(a,t.current)),et=null;return}n.flags&32768?(lt||l===1?t=!0:rl||(nt&536870912)!==0?t=!1:(rr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Yn.current,l!==null&&l.tag===13&&(l.flags|=16384))),my(n,t)):Iu(n)}function Iu(t){var n=t;do{if((n.flags&32768)!==0){my(n,rr);return}t=n.return;var a=uw(n.alternate,n,Si);if(a!==null){et=a;return}if(n=n.sibling,n!==null){et=n;return}et=n=t}while(n!==null);Vt===0&&(Vt=5)}function my(t,n){do{var a=dw(t.alternate,t);if(a!==null){a.flags&=32767,et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){et=t;return}et=t=a}while(t!==null);Vt=6,et=null}function gy(t,n,a,l,h,m,v,w,D){t.cancelPendingCommit=null;do ku();while(nn!==0);if((ft&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=gh,ah(t,a,m,v,w,D),t===Et&&(et=Et=null,nt=0),ll=n,or=t,Ni=a,Tf=m,Sf=h,iy=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ew(Ht,function(){return by(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=le.p,le.p=2,v=ft,ft|=4;try{hw(t,n,a)}finally{ft=v,le.p=h,K.T=l}}nn=1,py(),yy(),xy()}}function py(){if(nn===1){nn=0;var t=or,n=ll,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=le.p;le.p=2;var h=ft;ft|=4;try{X0(n,t);var m=zf,v=np(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&tp(w.ownerDocument.documentElement,w)){if(D!==null&&uh(w)){var q=D.start,ie=D.end;if(ie===void 0&&(ie=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(ie,w.value.length);else{var ce=w.ownerDocument||document,G=ce&&ce.defaultView||window;if(G.getSelection){var Q=G.getSelection(),ke=w.textContent.length,Ue=Math.min(D.start,ke),wt=D.end===void 0?Ue:Math.min(D.end,ke);!Q.extend&&Ue>wt&&(v=wt,wt=Ue,Ue=v);var U=ep(w,Ue),O=ep(w,wt);if(U&&O&&(Q.rangeCount!==1||Q.anchorNode!==U.node||Q.anchorOffset!==U.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var B=ce.createRange();B.setStart(U.node,U.offset),Q.removeAllRanges(),Ue>wt?(Q.addRange(B),Q.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),Q.addRange(B))}}}}for(ce=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ce.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ce.length;w++){var re=ce[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Fu=!!Uf,zf=Uf=null}finally{ft=h,le.p=l,K.T=a}}t.current=n,nn=2}}function yy(){if(nn===2){nn=0;var t=or,n=ll,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=le.p;le.p=2;var h=ft;ft|=4;try{G0(t,n.alternate,n)}finally{ft=h,le.p=l,K.T=a}}nn=3}}function xy(){if(nn===4||nn===3){nn=0,ve();var t=or,n=ll,a=Ni,l=iy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?nn=5:(nn=0,ll=or=null,vy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(lr=null),ci(a),n=n.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(rn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=le.p,le.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];m(w.value,{componentStack:w.stack})}}finally{K.T=n,le.p=h}}(Ni&3)!==0&&ku(),Zs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Nf?Ro++:(Ro=0,Nf=t):Ro=0,Io(0)}}function vy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,uo(n)))}function ku(){return py(),yy(),xy(),by()}function by(){if(nn!==5)return!1;var t=or,n=Tf;Tf=0;var a=ci(Ni),l=K.T,h=le.p;try{le.p=32>a?32:a,K.T=null,a=Sf,Sf=null;var m=or,v=Ni;if(nn=0,ll=or=null,Ni=0,(ft&6)!==0)throw Error(r(331));var w=ft;if(ft|=4,ty(m.current),Z0(m,m.current,v,a),ft=w,Io(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(rn,m)}catch{}return!0}finally{le.p=h,K.T=l,vy(t,n)}}function _y(t,n,a){n=rs(a,n),n=sf(t.stateNode,n,2),t=tr(t,n,2),t!==null&&(qr(t,2),Zs(t))}function yt(t,n,a){if(t.tag===3)_y(t,t,a);else for(;n!==null;){if(n.tag===3){_y(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(lr===null||!lr.has(l))){t=rs(a,t),a=w0(2),l=tr(n,a,2),l!==null&&(E0(a,l,n,t),qr(l,2),Zs(l));break}}n=n.return}}function Cf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new gw;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(_f=!0,h.add(a),t=bw.bind(null,t,n,a),n.then(t,t))}function bw(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(nt&a)===a&&(Vt===4||Vt===3&&(nt&62914560)===nt&&300>Ne()-Nu?(ft&2)===0&&ol(t,0):wf|=a,al===nt&&(al=0)),Zs(t)}function wy(t,n){n===0&&(n=jc()),t=na(t,n),t!==null&&(qr(t,n),Zs(t))}function _w(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),wy(t,a)}function ww(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),wy(t,a)}function Ew(t,n){return he(t,n)}var Du=null,ul=null,Rf=!1,Mu=!1,If=!1,ur=0;function Zs(t){t!==ul&&t.next===null&&(ul===null?Du=ul=t:ul=ul.next=t),Mu=!0,Rf||(Rf=!0,Sw())}function Io(t,n){if(!If&&Mu){If=!0;do for(var a=!1,l=Du;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var v=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-Mt(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ny(l,m))}else m=nt,m=Ms(l,l===Et?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ys(l,m)||(a=!0,Ny(l,m));l=l.next}while(a);If=!1}}function Tw(){Ey()}function Ey(){Mu=Rf=!1;var t=0;ur!==0&&Ow()&&(t=ur);for(var n=Ne(),a=null,l=Du;l!==null;){var h=l.next,m=Ty(l,n);m===0?(l.next=null,a===null?Du=h:a.next=h,h===null&&(ul=a)):(a=l,(t!==0||(m&3)!==0)&&(Mu=!0)),l=h}nn!==0&&nn!==5||Io(t),ur!==0&&(ur=0)}function Ty(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Mt(m),w=1<<v,D=h[v];D===-1?((w&a)===0||(w&l)!==0)&&(h[v]=rh(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=Et,a=nt,a=Ms(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(pt===2||pt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&je(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ys(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&je(l),ci(a)){case 2:case 8:a=Ct;break;case 32:a=Ht;break;case 268435456:a=vn;break;default:a=Ht}return l=Sy.bind(null,t),a=he(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&je(l),t.callbackPriority=2,t.callbackNode=null,2}function Sy(t,n){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=nt;return l=Ms(t,t===Et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ay(t,l,n),Ty(t,Ne()),t.callbackNode!=null&&t.callbackNode===a?Sy.bind(null,t):null)}function Ny(t,n){if(ku())return null;ay(t,n,!0)}function Sw(){Lw(function(){(ft&6)!==0?he(Me,Tw):Ey()})}function kf(){if(ur===0){var t=Qa;t===0&&(t=ks,ks<<=1,(ks&261888)===0&&(ks=256)),ur=t}return ur}function Ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ma(""+t)}function jy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Nw(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ay((h[an]||null).action),v=l.submitter;v&&(n=(n=v[an]||null)?Ay(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var w=new Gs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ur!==0){var D=v?jy(h,v):new FormData(h);Wh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=v?jy(h,v):new FormData(h),Wh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],Aw=Mf.toLowerCase(),jw=Mf[0].toUpperCase()+Mf.slice(1);Ss(Aw,"on"+jw)}Ss(rp,"onAnimationEnd"),Ss(ap,"onAnimationIteration"),Ss(lp,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(F1,"onTransitionRun"),Ss(G1,"onTransitionStart"),Ss(Y1,"onTransitionCancel"),Ss(op,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ko));function Cy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var w=l[v],D=w.instance,q=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=q;try{m(h)}catch(ie){Qc(ie)}h.currentTarget=null,m=D}else for(v=0;v<l.length;v++){if(w=l[v],D=w.instance,q=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=q;try{m(h)}catch(ie){Qc(ie)}h.currentTarget=null,m=D}}}}function tt(t,n){var a=n[Ca];a===void 0&&(a=n[Ca]=new Set);var l=t+"__bubble";a.has(l)||(Ry(n,t,2,!1),a.add(l))}function Of(t,n,a){var l=0;n&&(l|=4),Ry(a,t,l,n)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Ou]){t[Ou]=!0,Hl.forEach(function(a){a!=="selectionchange"&&(Cw.has(a)||Of(a,!1,t),Of(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ou]||(n[Ou]=!0,Of("selectionchange",!1,n))}}function Ry(t,n,a,l){switch(rx(n)){case 2:var h=s2;break;case 8:h=i2;break;default:h=Wf}a=h.bind(null,n,a,t),h=void 0,!$r||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Lf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Ps(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=m=v;continue e}w=w.parentNode}}l=l.return}Gi(function(){var q=m,ie=ts(a),ce=[];e:{var G=cp.get(t);if(G!==void 0){var Q=Gs,ke=t;switch(t){case"keypress":if(Xr(a)===0)break e;case"keydown":case"keyup":Q=Yc;break;case"focusin":ke="focus",Q=Zr;break;case"focusout":ke="blur",Q=Zr;break;case"beforeblur":case"afterblur":Q=Zr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case rp:case ap:case lp:Q=Uc;break;case op:Q=T;break;case"scroll":case"scrollend":Q=to;break;case"wheel":Q=$;break;case"copy":case"cut":case"paste":Q=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=hi;break;case"toggle":case"beforetoggle":Q=Xe}var Ue=(n&4)!==0,wt=!Ue&&(t==="scroll"||t==="scrollend"),U=Ue?G!==null?G+"Capture":null:G;Ue=[];for(var O=q,B;O!==null;){var re=O;if(B=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||B===null||U===null||(re=_s(O,U),re!=null&&Ue.push(Do(O,re,B))),wt)break;O=O.return}0<Ue.length&&(G=new Q(G,ke,null,a,ie),ce.push({event:G,listeners:Ue}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==Zl&&(ke=a.relatedTarget||a.fromElement)&&(Ps(ke)||ke[Vs]))break e;if((Q||G)&&(G=ie.window===ie?ie:(G=ie.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(ke=a.relatedTarget||a.toElement,Q=q,ke=ke?Ps(ke):null,ke!==null&&(wt=u(ke),Ue=ke.tag,ke!==wt||Ue!==5&&Ue!==27&&Ue!==6)&&(ke=null)):(Q=null,ke=q),Q!==ke)){if(Ue=no,re="onMouseLeave",U="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=hi,re="onPointerLeave",U="onPointerEnter",O="pointer"),wt=Q==null?G:qn(Q),B=ke==null?G:qn(ke),G=new Ue(re,O+"leave",Q,a,ie),G.target=wt,G.relatedTarget=B,re=null,Ps(ie)===q&&(Ue=new Ue(U,O+"enter",ke,a,ie),Ue.target=B,Ue.relatedTarget=wt,re=Ue),wt=re,Q&&ke)t:{for(Ue=Rw,U=Q,O=ke,B=0,re=U;re;re=Ue(re))B++;re=0;for(var Oe=O;Oe;Oe=Ue(Oe))re++;for(;0<B-re;)U=Ue(U),B--;for(;0<re-B;)O=Ue(O),re--;for(;B--;){if(U===O||O!==null&&U===O.alternate){Ue=U;break t}U=Ue(U),O=Ue(O)}Ue=null}else Ue=null;Q!==null&&Iy(ce,G,Q,Ue,!1),ke!==null&&wt!==null&&Iy(ce,wt,ke,Ue,!0)}}e:{if(G=q?qn(q):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var ut=$g;else if(Yg(G))if(Qg)ut=B1;else{ut=U1;var De=P1}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Da(q.elementType)&&(ut=$g):ut=z1;if(ut&&(ut=ut(t,q))){Kg(ce,ut,a,ie);break e}De&&De(t,G,q),t==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Ql(G,"number",G.value)}switch(De=q?qn(q):window,t){case"focusin":(Yg(De)||De.contentEditable==="true")&&(Ba=De,dh=q,lo=null);break;case"focusout":lo=dh=Ba=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,sp(ce,a,ie);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":sp(ce,a,ie)}var Je;if(ht)e:{switch(t){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else za?Jr(t,a)&&(st="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&($s&&a.locale!=="ko"&&(za||st!=="onCompositionStart"?st==="onCompositionEnd"&&za&&(Je=eo()):(Fs=ie,Jl="value"in Fs?Fs.value:Fs.textContent,za=!0)),De=Vu(q,st),0<De.length&&(st=new Ks(st,t,null,a,ie),ce.push({event:st,listeners:De}),Je?st.data=Je:(Je=Ua(a),Je!==null&&(st.data=Je)))),(Je=ss?M1(t,a):O1(t,a))&&(st=Vu(q,"onBeforeInput"),0<st.length&&(De=new Ks("onBeforeInput","beforeinput",null,a,ie),ce.push({event:De,listeners:st}),De.data=Je)),Nw(ce,t,q,a,ie)}Cy(ce,n)})}function Do(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Vu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=_s(t,a),h!=null&&l.unshift(Do(t,h,m)),h=_s(t,n),h!=null&&l.push(Do(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Rw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Iy(t,n,a,l,h){for(var m=n._reactName,v=[];a!==null&&a!==l;){var w=a,D=w.alternate,q=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||q===null||(D=q,h?(q=_s(a,m),q!=null&&v.unshift(Do(a,q,D))):h||(q=_s(a,m),q!=null&&v.push(Do(a,q,D)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var Iw=/\r\n?/g,kw=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(Iw,`
`).replace(kw,"")}function Dy(t,n){return n=ky(n),ky(t)===n}function _t(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Dn(t,""+l);break;case"className":Hn(t,"class",l);break;case"tabIndex":Hn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,a,l);break;case"style":Wl(t,l,m);break;case"data":if(n!=="object"){Hn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ma(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&_t(t,n,"name",h.name,h,null),_t(t,n,"formEncType",h.formEncType,h,null),_t(t,n,"formMethod",h.formMethod,h,null),_t(t,n,"formTarget",h.formTarget,h,null)):(_t(t,n,"encType",h.encType,h,null),_t(t,n,"method",h.method,h,null),_t(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ma(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=bs);break;case"onScroll":l!=null&&tt("scroll",t);break;case"onScrollEnd":l!=null&&tt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ma(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":tt("beforetoggle",t),tt("toggle",t),Ia(t,"popover",l);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ia(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,Ia(t,a,l))}}function Pf(t,n,a,l,h,m){switch(a){case"style":Wl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&Dn(t,""+l);break;case"onScroll":l!=null&&tt("scroll",t);break;case"onScrollEnd":l!=null&&tt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[an]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ia(t,a,l)}}}function gn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",t),tt("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:_t(t,n,m,v,a,null)}}h&&_t(t,n,"srcSet",a.srcSet,a,null),l&&_t(t,n,"src",a.src,a,null);return;case"input":tt("invalid",t);var w=m=v=h=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":v=ie;break;case"checked":D=ie;break;case"defaultChecked":q=ie;break;case"value":m=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,n));break;default:_t(t,n,l,ie,a,null)}}Dc(t,m,w,D,q,v,h,!1);return;case"select":tt("invalid",t),l=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:_t(t,n,h,w,a,null)}n=m,a=v,t.multiple=!!l,n!=null?Bi(t,!!l,n,!1):a!=null&&Bi(t,!!l,a,!0);return;case"textarea":tt("invalid",t),m=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:_t(t,n,v,w,a,null)}qi(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:_t(t,n,D,l,a,null)}return;case"dialog":tt("beforetoggle",t),tt("toggle",t),tt("cancel",t),tt("close",t);break;case"iframe":case"object":tt("load",t);break;case"video":case"audio":for(l=0;l<ko.length;l++)tt(ko[l],t);break;case"image":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"embed":case"source":case"link":tt("error",t),tt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:_t(t,n,q,l,a,null)}return;default:if(Da(n)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&Pf(t,n,ie,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&_t(t,n,w,l,a,null))}function Dw(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,D=null,q=null,ie=null;for(Q in a){var ce=a[Q];if(a.hasOwnProperty(Q)&&ce!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=ce;default:l.hasOwnProperty(Q)||_t(t,n,Q,null,l,ce)}}for(var G in l){var Q=l[G];if(ce=a[G],l.hasOwnProperty(G)&&(Q!=null||ce!=null))switch(G){case"type":m=Q;break;case"name":h=Q;break;case"checked":q=Q;break;case"defaultChecked":ie=Q;break;case"value":v=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:Q!==ce&&_t(t,n,G,Q,l,ce)}}ka(t,v,w,D,q,ie,m,h);return;case"select":Q=v=w=G=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Q=D;default:l.hasOwnProperty(m)||_t(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==D&&_t(t,n,h,m,l,D)}n=w,a=v,l=Q,G!=null?Bi(t,!!a,G,!1):!!l!=!!a&&(n!=null?Bi(t,!!a,n,!0):Bi(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:_t(t,n,w,null,l,h)}for(v in l)if(h=l[v],m=a[v],l.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":G=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&_t(t,n,v,h,l,m)}Mc(t,G,Q);return;case"option":for(var ke in a)if(G=a[ke],a.hasOwnProperty(ke)&&G!=null&&!l.hasOwnProperty(ke))switch(ke){case"selected":t.selected=!1;break;default:_t(t,n,ke,null,l,G)}for(D in l)if(G=l[D],Q=a[D],l.hasOwnProperty(D)&&G!==Q&&(G!=null||Q!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:_t(t,n,D,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in a)G=a[Ue],a.hasOwnProperty(Ue)&&G!=null&&!l.hasOwnProperty(Ue)&&_t(t,n,Ue,null,l,G);for(q in l)if(G=l[q],Q=a[q],l.hasOwnProperty(q)&&G!==Q&&(G!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:_t(t,n,q,G,l,Q)}return;default:if(Da(n)){for(var wt in a)G=a[wt],a.hasOwnProperty(wt)&&G!==void 0&&!l.hasOwnProperty(wt)&&Pf(t,n,wt,void 0,l,G);for(ie in l)G=l[ie],Q=a[ie],!l.hasOwnProperty(ie)||G===Q||G===void 0&&Q===void 0||Pf(t,n,ie,G,l,Q);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&_t(t,n,U,null,l,G);for(ce in l)G=l[ce],Q=a[ce],!l.hasOwnProperty(ce)||G===Q||G==null&&Q==null||_t(t,n,ce,G,l,Q)}function My(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&My(v)){for(v=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>w)break;var ie=D.transferSize,ce=D.initiatorType;ie&&My(ce)&&(D=D.responseEnd,v+=ie*(D<w?1:(w-q)/(D-q)))}if(--l,n+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Uf=null,zf=null;function Lu(t){return t.nodeType===9?t:t.ownerDocument}function Oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qf=null;function Ow(){var t=window.event;return t&&t.type==="popstate"?t===qf?!1:(qf=t,!0):(qf=null,!1)}var Ly=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(Pw)}:Ly;function Pw(t){setTimeout(function(){throw t})}function dr(t){return t==="head"}function Uy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ml(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Mo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Mo(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Ls]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Mo(t.ownerDocument.body);a=h}while(a);ml(n)}function zy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Hf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hf(a),Ra(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Uw(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ls])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=us(t.nextSibling),t===null)break}return null}function zw(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=us(t.nextSibling),t===null))return null;return t}function By(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=us(t.nextSibling),t===null))return null;return t}function Ff(t){return t.data==="$?"||t.data==="$~"}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Bw(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function us(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Yf=null;function qy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return us(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Hy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Fy(t,n,a){switch(n=Lu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Mo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ra(t)}var ds=new Map,Gy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ai=le.d;le.d={f:qw,r:Hw,D:Fw,C:Gw,L:Yw,m:Kw,X:Qw,S:$w,M:Xw};function qw(){var t=Ai.f(),n=Cu();return t||n}function Hw(t){var n=es(t);n!==null&&n.tag===5&&n.type==="form"?o0(n):Ai.r(t)}var dl=typeof document>"u"?null:document;function Yy(t,n,a){var l=dl;if(l&&typeof n=="string"&&n){var h=kn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gy.has(h)||(Gy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),gn(n,"link",t),Yt(n),l.head.appendChild(n)))}}function Fw(t){Ai.D(t),Yy("dns-prefetch",t,null)}function Gw(t,n){Ai.C(t,n),Yy("preconnect",t,n)}function Yw(t,n,a){Ai.L(t,n,a);var l=dl;if(l&&t&&n){var h='link[rel="preload"][as="'+kn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+kn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+kn(a.imageSizes)+'"]')):h+='[href="'+kn(t)+'"]';var m=h;switch(n){case"style":m=hl(t);break;case"script":m=fl(t)}ds.has(m)||(t=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ds.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Oo(m))||n==="script"&&l.querySelector(Vo(m))||(n=l.createElement("link"),gn(n,"link",t),Yt(n),l.head.appendChild(n)))}}function Kw(t,n){Ai.m(t,n);var a=dl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+kn(l)+'"][href="'+kn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fl(t)}if(!ds.has(m)&&(t=S({rel:"modulepreload",href:t},n),ds.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vo(m)))return}l=a.createElement("link"),gn(l,"link",t),Yt(l),a.head.appendChild(l)}}}function $w(t,n,a){Ai.S(t,n,a);var l=dl;if(l&&t){var h=Us(l).hoistableStyles,m=hl(t);n=n||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Oo(m)))w.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ds.get(m))&&Kf(t,a);var D=v=l.createElement("link");Yt(D),gn(D,"link",t),D._p=new Promise(function(q,ie){D.onload=q,D.onerror=ie}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Uu(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function Qw(t,n){Ai.X(t,n);var a=dl;if(a&&t){var l=Us(a).hoistableScripts,h=fl(t),m=l.get(h);m||(m=a.querySelector(Vo(h)),m||(t=S({src:t,async:!0},n),(n=ds.get(h))&&$f(t,n),m=a.createElement("script"),Yt(m),gn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Xw(t,n){Ai.M(t,n);var a=dl;if(a&&t){var l=Us(a).hoistableScripts,h=fl(t),m=l.get(h);m||(m=a.querySelector(Vo(h)),m||(t=S({src:t,async:!0,type:"module"},n),(n=ds.get(h))&&$f(t,n),m=a.createElement("script"),Yt(m),gn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Ky(t,n,a,l){var h=(h=me.current)?Pu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=hl(a.href),a=Us(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=hl(a.href);var m=Us(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Oo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),ds.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ds.set(t,a),m||Ww(h,t,a,v.state))),n&&l===null)throw Error(r(528,""));return v}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=fl(a),a=Us(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function hl(t){return'href="'+kn(t)+'"'}function Oo(t){return'link[rel="stylesheet"]['+t+"]"}function $y(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Ww(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),gn(n,"link",a),Yt(n),t.head.appendChild(n))}function fl(t){return'[src="'+kn(t)+'"]'}function Vo(t){return"script[async]"+t}function Qy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+kn(a.href)+'"]');if(l)return n.instance=l,Yt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Yt(l),gn(l,"style",h),Uu(l,a.precedence,t),n.instance=l;case"stylesheet":h=hl(a.href);var m=t.querySelector(Oo(h));if(m)return n.state.loading|=4,n.instance=m,Yt(m),m;l=$y(a),(h=ds.get(h))&&Kf(l,h),m=(t.ownerDocument||t).createElement("link"),Yt(m);var v=m;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),gn(m,"link",l),n.state.loading|=4,Uu(m,a.precedence,t),n.instance=m;case"script":return m=fl(a.src),(h=t.querySelector(Vo(m)))?(n.instance=h,Yt(h),h):(l=a,(h=ds.get(m))&&(l=S({},a),$f(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Yt(h),gn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uu(l,a.precedence,t));return n.instance}function Uu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function $f(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var zu=null;function Xy(t,n,a){if(zu===null){var l=new Map,h=zu=new Map;h.set(a,l)}else h=zu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Ls]||m[Gt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=t+v;var w=l.get(v);w?w.push(m):l.set(v,[m])}}return l}function Wy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Zw(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Zy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Jw(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=hl(l.href),m=n.querySelector(Oo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Bu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Yt(m);return}m=n.ownerDocument||n,l=$y(l),(h=ds.get(h))&&Kf(l,h),m=m.createElement("link"),Yt(m);var v=m;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),gn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Bu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Qf=0;function e2(t,n){return t.stylesheets&&t.count===0&&Hu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Qf===0&&(Qf=62500*Mw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Qf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qu=null;function Hu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qu=new Map,n.forEach(t2,t),qu=null,Bu.call(t))}function t2(t,n){if(!(n.state.loading&4)){var a=qu.get(t);if(a)var l=a.get(null);else{a=new Map,qu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,h),a.set(v,h),this.count++,l=Bu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Lo={$$typeof:ye,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function n2(t,n,a,l,h,m,v,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Jy(t,n,a,l,h,m,v,w,D,q,ie,ce){return t=new n2(t,n,a,v,D,q,ie,ce,w),n=1,m===!0&&(n|=24),m=Gn(3,null,null,n),t.current=m,m.stateNode=t,n=Ah(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Ih(m),t}function ex(t){return t?(t=Fa,t):Fa}function tx(t,n,a,l,h,m){h=ex(h),l.context===null?l.context=h:l.pendingContext=h,l=er(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=tr(t,l,n),a!==null&&(Pn(a,t,n),go(a,t,n))}function nx(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Xf(t,n){nx(t,n),(t=t.alternate)&&nx(t,n)}function sx(t){if(t.tag===13||t.tag===31){var n=na(t,67108864);n!==null&&Pn(n,t,67108864),Xf(t,67108864)}}function ix(t){if(t.tag===13||t.tag===31){var n=Xn();n=Fr(n);var a=na(t,n);a!==null&&Pn(a,t,n),Xf(t,n)}}var Fu=!0;function s2(t,n,a,l){var h=K.T;K.T=null;var m=le.p;try{le.p=2,Wf(t,n,a,l)}finally{le.p=m,K.T=h}}function i2(t,n,a,l){var h=K.T;K.T=null;var m=le.p;try{le.p=8,Wf(t,n,a,l)}finally{le.p=m,K.T=h}}function Wf(t,n,a,l){if(Fu){var h=Zf(l);if(h===null)Lf(t,n,l,Gu,a),ax(t,l);else if(a2(h,t,n,a,l))l.stopPropagation();else if(ax(t,l),n&4&&-1<r2.indexOf(t)){for(;h!==null;){var m=es(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ds(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-Mt(v);w.entanglements[1]|=D,v&=~D}Zs(m),(ft&6)===0&&(Au=Ne()+500,Io(0))}}break;case 31:case 13:w=na(m,2),w!==null&&Pn(w,m,2),Cu(),Xf(m,2)}if(m=Zf(l),m===null&&Lf(t,n,l,Gu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Lf(t,n,l,null,a)}}function Zf(t){return t=ts(t),Jf(t)}var Gu=null;function Jf(t){if(Gu=null,t=Ps(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Gu=t,null}function rx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case Me:return 2;case Ct:return 8;case Ht:case Rt:return 32;case vn:return 268435456;default:return 32}default:return 32}}var em=!1,hr=null,fr=null,mr=null,Po=new Map,Uo=new Map,gr=[],r2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ax(t,n){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Po.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(n.pointerId)}}function zo(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=es(n),n!==null&&sx(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function a2(t,n,a,l,h){switch(n){case"focusin":return hr=zo(hr,t,n,a,l,h),!0;case"dragenter":return fr=zo(fr,t,n,a,l,h),!0;case"mouseover":return mr=zo(mr,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Po.set(m,zo(Po.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Uo.set(m,zo(Uo.get(m)||null,t,n,a,l,h)),!0}return!1}function lx(t){var n=Ps(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,xs(t.priority,function(){ix(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,xs(t.priority,function(){ix(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Zf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Zl=l,a.target.dispatchEvent(l),Zl=null}else return n=es(a),n!==null&&sx(n),t.blockedOn=a,!1;n.shift()}return!0}function ox(t,n,a){Yu(t)&&a.delete(n)}function l2(){em=!1,hr!==null&&Yu(hr)&&(hr=null),fr!==null&&Yu(fr)&&(fr=null),mr!==null&&Yu(mr)&&(mr=null),Po.forEach(ox),Uo.forEach(ox)}function Ku(t,n){t.blockedOn===n&&(t.blockedOn=null,em||(em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,l2)))}var $u=null;function cx(t){$u!==t&&($u=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){$u===t&&($u=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Jf(l||a)===null)continue;break}var m=es(a);m!==null&&(t.splice(n,3),n-=3,Wh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ml(t){function n(D){return Ku(D,t)}hr!==null&&Ku(hr,t),fr!==null&&Ku(fr,t),mr!==null&&Ku(mr,t),Po.forEach(n),Uo.forEach(n);for(var a=0;a<gr.length;a++){var l=gr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<gr.length&&(a=gr[0],a.blockedOn===null);)lx(a),a.blockedOn===null&&gr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],v=h[an]||null;if(typeof m=="function")v||cx(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[an]||null)w=v.formAction;else if(Jf(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),cx(a)}}}function ux(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function tm(t){this._internalRoot=t}Qu.prototype.render=tm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Xn();tx(a,l,t,n,null,null)},Qu.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;tx(t.current,2,null,t,null,null),Cu(),n[Vs]=null}};function Qu(t){this._internalRoot=t}Qu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Cc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<gr.length&&n!==0&&n<gr[a].priority;a++);gr.splice(a,0,t),a===0&&lx(t)}};var dx=e.version;if(dx!=="19.2.0")throw Error(r(527,dx,"19.2.0"));le.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var o2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{rn=Xu.inject(o2),xt=Xu}catch{}}return qo.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",h=x0,m=v0,v=b0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Jy(t,1,!1,null,null,a,l,null,h,m,v,ux),t[Vs]=n.current,Vf(t),new tm(n)},qo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=x0,v=v0,w=b0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Jy(t,1,!0,n,a??null,l,h,D,m,v,w,ux),n.context=ex(null),a=n.current,l=Xn(),l=Fr(l),h=er(l),h.callback=null,tr(a,h,l),a=l,n.current.lanes=a,qr(n,a),Zs(n),t[Vs]=n.current,Vf(t),new Qu(n)},qo.version="19.2.0",qo}var _x;function v2(){if(_x)return im.exports;_x=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),im.exports=x2(),im.exports}var b2=v2();const _2=()=>{};var wx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},w2=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[s++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[s++],f=i[s++],p=i[s++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=i[s++],f=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,p=f?i[o+1]:0,y=o+2<i.length,x=y?i[o+2]:0,_=u>>2,S=(u&3)<<4|p>>4;let j=(p&15)<<2|x>>6,H=x&63;y||(H=64,f||(j=64)),r.push(s[_],s[S],s[j],s[H])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(rb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):w2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=s[i.charAt(o++)],p=o<i.length?s[i.charAt(o)]:0;++o;const x=o<i.length?s[i.charAt(o)]:64;++o;const S=o<i.length?s[i.charAt(o)]:64;if(++o,u==null||p==null||x==null||S==null)throw new E2;const j=u<<2|p>>4;if(r.push(j),x!==64){const H=p<<4&240|x>>2;if(r.push(H),S!==64){const Z=x<<6&192|S;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class E2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T2=function(i){const e=rb(i);return ab.encodeByteArray(e,!0)},gd=function(i){return T2(i).replace(/\./g,"")},lb=function(i){try{return ab.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=()=>S2().__FIREBASE_DEFAULTS__,A2=()=>{if(typeof process>"u"||typeof wx>"u")return;const i=wx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},j2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&lb(i[1]);return e&&JSON.parse(e)},Od=()=>{try{return _2()||N2()||A2()||j2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ob=i=>Od()?.emulatorHosts?.[i],C2=i=>{const e=ob(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},cb=()=>Od()?.config,ub=i=>Od()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function db(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[gd(JSON.stringify(s)),gd(JSON.stringify(f)),""].join(".")}const Qo={};function k2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?i.emulator.push(e):i.prod.push(e);return i}function D2(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let Ex=!1;function hb(i,e){if(typeof window>"u"||typeof document>"u"||!Dl(window.location.host)||Qo[i]===e||Qo[i]||Ex)return;Qo[i]=e;function s(j){return`__firebase__banner__${j}`}const r="__firebase__banner",u=k2().prod.length>0;function f(){const j=document.getElementById(r);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function y(j,H){j.setAttribute("width","24"),j.setAttribute("id",H),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function x(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{Ex=!0,f()},j}function _(j,H){j.setAttribute("id",H),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function S(){const j=D2(r),H=s("text"),Z=document.getElementById(H)||document.createElement("span"),X=s("learnmore"),P=document.getElementById(X)||document.createElement("a"),ee=s("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const ye=j.element;p(ye),_(P,X);const fe=x();y(te,ee),ye.append(te,Z,P,fe),document.body.appendChild(ye)}u?(Z.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function O2(){const i=Od()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function P2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U2(){const i=Sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function z2(){return!O2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B2(){try{return typeof indexedDB=="object"}catch{return!1}}function q2(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="FirebaseError";class Li extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=H2,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?F2(u,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Li(o,p,r)}}function F2(i,e){return i.replace(G2,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const G2=/\{\$([^}]+)}/g;function Y2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ba(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const u=i[o],f=e[o];if(Tx(u)&&Tx(f)){if(!ba(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Tx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Fo(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function K2(i,e){const s=new $2(i,e);return s.subscribe.bind(s)}class $2{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");Q2(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q2(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(i){return i&&i._delegate?i._delegate:i}class _a{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new R2;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z2(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:W2(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W2(i){return i===pa?void 0:i}function Z2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new X2(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(it||(it={}));const eE={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},tE=it.INFO,nE={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},sE=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=nE[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=tE,this._logHandler=sE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const iE=(i,e)=>e.some(s=>i instanceof s);let Sx,Nx;function rE(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aE(){return Nx||(Nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Sm=new WeakMap,mb=new WeakMap,cm=new WeakMap,eg=new WeakMap;function lE(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{s(Tr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&fb.set(s,i)}).catch(()=>{}),eg.set(e,i),e}function oE(i){if(Sm.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{s(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Sm.set(i,e)}let Nm={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return Sm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||mb.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Tr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function cE(i){Nm=i(Nm)}function uE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(um(this),e,...s);return mb.set(r,e.sort?e.sort():[e]),Tr(r)}:aE().includes(i)?function(...e){return i.apply(um(this),e),Tr(fb.get(this))}:function(...e){return Tr(i.apply(um(this),e))}}function dE(i){return typeof i=="function"?uE(i):(i instanceof IDBTransaction&&oE(i),iE(i,rE())?new Proxy(i,Nm):i)}function Tr(i){if(i instanceof IDBRequest)return lE(i);if(cm.has(i))return cm.get(i);const e=dE(i);return e!==i&&(cm.set(i,e),eg.set(e,i)),e}const um=i=>eg.get(i);function hE(i,e,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),p=Tr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Tr(f.result),y.oldVersion,y.newVersion,Tr(f.transaction),y)}),s&&f.addEventListener("blocked",y=>s(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const fE=["get","getKey","getAll","getAllKeys","count"],mE=["put","add","delete","clear"],dm=new Map;function Ax(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=mE.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||fE.includes(s)))return;const u=async function(f,...p){const y=this.transaction(f,o?"readwrite":"readonly");let x=y.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[s](...p),o&&y.done]))[0]};return dm.set(e,u),u}cE(i=>({...i,get:(e,s,r)=>Ax(e,s)||i.get(e,s,r),has:(e,s)=>!!Ax(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(pE(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function pE(i){return i.getComponent()?.type==="VERSION"}const Am="@firebase/app",jx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new Jm("@firebase/app"),yE="@firebase/app-compat",xE="@firebase/analytics-compat",vE="@firebase/analytics",bE="@firebase/app-check-compat",_E="@firebase/app-check",wE="@firebase/auth",EE="@firebase/auth-compat",TE="@firebase/database",SE="@firebase/data-connect",NE="@firebase/database-compat",AE="@firebase/functions",jE="@firebase/functions-compat",CE="@firebase/installations",RE="@firebase/installations-compat",IE="@firebase/messaging",kE="@firebase/messaging-compat",DE="@firebase/performance",ME="@firebase/performance-compat",OE="@firebase/remote-config",VE="@firebase/remote-config-compat",LE="@firebase/storage",PE="@firebase/storage-compat",UE="@firebase/firestore",zE="@firebase/ai",BE="@firebase/firestore-compat",qE="firebase",HE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",FE={[Am]:"fire-core",[yE]:"fire-core-compat",[vE]:"fire-analytics",[xE]:"fire-analytics-compat",[_E]:"fire-app-check",[bE]:"fire-app-check-compat",[wE]:"fire-auth",[EE]:"fire-auth-compat",[TE]:"fire-rtdb",[SE]:"fire-data-connect",[NE]:"fire-rtdb-compat",[AE]:"fire-fn",[jE]:"fire-fn-compat",[CE]:"fire-iid",[RE]:"fire-iid-compat",[IE]:"fire-fcm",[kE]:"fire-fcm-compat",[DE]:"fire-perf",[ME]:"fire-perf-compat",[OE]:"fire-rc",[VE]:"fire-rc-compat",[LE]:"fire-gcs",[PE]:"fire-gcs-compat",[UE]:"fire-fst",[BE]:"fire-fst-compat",[zE]:"fire-vertex","fire-js":"fire-js",[qE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,GE=new Map,Cm=new Map;function Cx(i,e){try{i.container.addComponent(e)}catch(s){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function Nl(i){const e=i.name;if(Cm.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,i);for(const s of pd.values())Cx(s,i);for(const s of GE.values())Cx(s,i);return!0}function tg(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function hs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new dc("app","Firebase",YE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=HE;function gb(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:jm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Sr.create("bad-app-name",{appName:String(o)});if(s||(s=cb()),!s)throw Sr.create("no-options");const u=pd.get(o);if(u){if(ba(s,u.options)&&ba(r,u.config))return u;throw Sr.create("duplicate-app",{appName:o})}const f=new J2(o);for(const y of Cm.values())f.addComponent(y);const p=new KE(s,r,f);return pd.set(o,p),p}function pb(i=jm){const e=pd.get(i);if(!e&&i===jm&&cb())return gb();if(!e)throw Sr.create("no-app",{appName:i});return e}function Nr(i,e,s){let r=FE[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(f.join(" "));return}Nl(new _a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",QE=1,tc="firebase-heartbeat-store";let hm=null;function yb(){return hm||(hm=hE($E,QE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(tc)}catch(s){console.warn(s)}}}}).catch(i=>{throw Sr.create("idb-open",{originalErrorMessage:i.message})})),hm}async function XE(i){try{const s=(await yb()).transaction(tc),r=await s.objectStore(tc).get(xb(i));return await s.done,r}catch(e){if(e instanceof Li)ki.warn(e.message);else{const s=Sr.create("idb-get",{originalErrorMessage:e?.message});ki.warn(s.message)}}}async function Rx(i,e){try{const r=(await yb()).transaction(tc,"readwrite");await r.objectStore(tc).put(e,xb(i)),await r.done}catch(s){if(s instanceof Li)ki.warn(s.message);else{const r=Sr.create("idb-set",{originalErrorMessage:s?.message});ki.warn(r.message)}}}function xb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1024,ZE=30;class JE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new tT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ix();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>ZE){const o=nT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ki.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ix(),{heartbeatsToSend:s,unsentEntries:r}=eT(this._heartbeatsCache.heartbeats),o=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ki.warn(e),""}}}function Ix(){return new Date().toISOString().substring(0,10)}function eT(i,e=WE){const s=[];let r=i.slice();for(const o of i){const u=s.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),kx(s)>e){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),kx(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class tT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B2()?q2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await XE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kx(i){return gd(JSON.stringify({version:2,heartbeats:i})).length}function nT(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(i){Nl(new _a("platform-logger",e=>new gE(e),"PRIVATE")),Nl(new _a("heartbeat",e=>new JE(e),"PRIVATE")),Nr(Am,jx,i),Nr(Am,jx,"esm2020"),Nr("fire-js","")}sT("");function vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iT=vb,bb=new dc("auth","Firebase",vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Jm("@firebase/auth");function rT(i,...e){yd.logLevel<=it.WARN&&yd.warn(`Auth (${Ml}): ${i}`,...e)}function rd(i,...e){yd.logLevel<=it.ERROR&&yd.error(`Auth (${Ml}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i,...e){throw ng(i,...e)}function ti(i,...e){return ng(i,...e)}function _b(i,e,s){const r={...iT(),[e]:s};return new dc("auth","Firebase",r).create(e,{appName:i.name})}function Ri(i){return _b(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return bb.create(i,...e)}function qe(i,e,...s){if(!i)throw ng(e,...s)}function ji(i){const e="INTERNAL ASSERTION FAILED: "+i;throw rd(e),new Error(e)}function Di(i,e){i||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return typeof self<"u"&&self.location?.href||""}function aT(){return Dx()==="http:"||Dx()==="https:"}function Dx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aT()||L2()||"connection"in navigator)?navigator.onLine:!0}function oT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Di(s>e,"Short delay should be less than long delay!"),this.isMobile=M2()||P2()}get(){return lT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(i,e){Di(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dT=new fc(3e4,6e4);function Pi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ui(i,e,s,r,o={}){return Eb(i,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=hc({key:i.config.apiKey,...f}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:y,...u};return V2()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(x.credentials="include"),wb.fetch()(await Tb(i,i.config.apiHost,s,p),x)})}async function Eb(i,e,s){i._canInitEmulator=!1;const r={...cT,...e};try{const o=new fT(i),u=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Wu(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[y,x]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Wu(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw Wu(i,"user-disabled",f);const _=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw _b(i,_,x);Rs(i,_)}}catch(o){if(o instanceof Li)throw o;Rs(i,"network-request-failed",{message:String(o)})}}async function mc(i,e,s,r,o={}){const u=await Ui(i,e,s,r,o);return"mfaPendingCredential"in u&&Rs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Tb(i,e,s,r){const o=`${e}${s}?${r}`,u=i,f=u.config.emulator?sg(i.config,o):`${i.config.apiScheme}://${o}`;return uT.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function hT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),dT.get())})}}function Wu(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=ti(i,e,r);return o.customData._tokenResponse=s,o}function Mx(i){return i!==void 0&&i.enterprise!==void 0}class mT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return hT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gT(i,e){return Ui(i,"GET","/v2/recaptchaConfig",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(i,e){return Ui(i,"POST","/v1/accounts:delete",e)}async function xd(i,e){return Ui(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yT(i,e=!1){const s=qt(i),r=await s.getIdToken(e),o=ig(r);qe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:Xo(fm(o.auth_time)),issuedAtTime:Xo(fm(o.iat)),expirationTime:Xo(fm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function fm(i){return Number(i)*1e3}function ig(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return rd("JWT malformed, contained fewer than 3 sections"),null;try{const o=lb(s);return o?JSON.parse(o):(rd("Failed to decode base64 JWT payload"),null)}catch(o){return rd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ox(i){const e=ig(i);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Li&&xT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function xT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(i){const e=i.auth,s=await i.getIdToken(),r=await nc(i,xd(e,{idToken:s}));qe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?Sb(o.providerUserInfo):[],f=_T(i.providerData,u),p=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!f?.length,x=p?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(i,_)}async function bT(i){const e=qt(i);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _T(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Sb(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(i,e){const s=await Eb(i,{},async()=>{const r=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Tb(i,o,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(y.credentials="include"),wb.fetch()(f,y)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function ET(i,e){return Ui(i,"POST","/v2/accounts:revokeToken",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ox(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const s=Ox(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:u}=await wT(e,s);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:u}=s,f=new _l;return r&&(qe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(qe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(qe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(i,e){qe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Cs{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new vT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await nc(this,this.stsTokenManager.getToken(this.auth,e));return qe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return yT(this,e)}reload(){return bT(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Cs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await nc(this,pT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,u=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,y=s._redirectEventId??void 0,x=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:S,emailVerified:j,isAnonymous:H,providerData:Z,stsTokenManager:X}=s;qe(S&&X,e,"internal-error");const P=_l.fromJSON(this.name,X);qe(typeof S=="string",e,"internal-error"),yr(r,e.name),yr(o,e.name),qe(typeof j=="boolean",e,"internal-error"),qe(typeof H=="boolean",e,"internal-error"),yr(u,e.name),yr(f,e.name),yr(p,e.name),yr(y,e.name),yr(x,e.name),yr(_,e.name);const ee=new Cs({uid:S,auth:e,email:o,emailVerified:j,displayName:r,isAnonymous:H,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:P,createdAt:x,lastLoginAt:_});return Z&&Array.isArray(Z)&&(ee.providerData=Z.map(te=>({...te}))),y&&(ee._redirectEventId=y),ee}static async _fromIdTokenResponse(e,s,r=!1){const o=new _l;o.updateFromServerResponse(s);const u=new Cs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await vd(u),u}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];qe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,p=new _l;p.updateFromIdToken(r);const y=new Cs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,x),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new Map;function Ci(i){Di(i instanceof Function,"Expected a class definition");let e=Vx.get(i);return e?(Di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Vx.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Nb.type="NONE";const Lx=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(i,e,s){return`firebase:${i}:${e}:${s}`}class wl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ad(this.userKey,o.apiKey,u),this.fullPersistenceKey=ad("persistence",o.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await xd(this.auth,{idToken:e}).catch(()=>{});return s?Cs._fromGetAccountInfoResponse(this.auth,s,e):null}return Cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new wl(Ci(Lx),e,r);const o=(await Promise.all(s.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||Ci(Lx);const f=ad(r,e.config.apiKey,e.name);let p=null;for(const x of s)try{const _=await x._get(f);if(_){let S;if(typeof _=="string"){const j=await xd(e,{idToken:_}).catch(()=>{});if(!j)break;S=await Cs._fromGetAccountInfoResponse(e,j,_)}else S=Cs._fromJSON(e,_);x!==u&&(p=S),u=x;break}}catch{}const y=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new wl(u,e,r):(u=y[0],p&&await u._set(f,p.toJSON()),await Promise.all(s.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new wl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ab(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Db(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(Ib(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function Ab(i=Sn()){return/firefox\//i.test(i)}function jb(i=Sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(i=Sn()){return/crios\//i.test(i)}function Rb(i=Sn()){return/iemobile/i.test(i)}function Ib(i=Sn()){return/android/i.test(i)}function kb(i=Sn()){return/blackberry/i.test(i)}function Db(i=Sn()){return/webos/i.test(i)}function rg(i=Sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function TT(i=Sn()){return rg(i)&&!!window.navigator?.standalone}function ST(){return U2()&&document.documentMode===10}function Mb(i=Sn()){return rg(i)||Ib(i)||Db(i)||kb(i)||/windows phone/i.test(i)||Rb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(i,e=[]){let s;switch(i){case"Browser":s=Px(Sn());break;case"Worker":s=`${Px(Sn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=u=>new Promise((f,p)=>{try{const y=e(u);f(y)}catch(y){p(y)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(i,e={}){return Ui(i,"GET","/v2/passwordPolicy",Pi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=6;class CT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??jT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ux(this),this.idTokenSubscription=new Ux(this),this.beforeStateQueue=new NT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Ci(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await xd(this,{idToken:e}),r=await Cs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hs(this.app))return Promise.reject(Ri(this));const s=e?qt(e):null;return s&&qe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hs(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AT(this),s=new CT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await ET(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Ci(e)||this._popupRedirectResolver;qe(s,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[Ci(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof s=="function"){const y=e.addObserver(s,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(s);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lr(i){return qt(i)}class Ux{constructor(e){this.auth=e,this.observer=null,this.addObserver=K2(s=>this.observer=s)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IT(i){Vd=i}function Vb(i){return Vd.loadJS(i)}function kT(){return Vd.recaptchaEnterpriseScript}function DT(){return Vd.gapiScript}function MT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class OT{constructor(){this.enterprise=new VT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class VT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const LT="recaptcha-enterprise",Lb="NO_RECAPTCHA";class PT{constructor(e){this.type=LT,this.auth=Lr(e)}async verify(e="verify",s=!1){async function r(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{gT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new mT(y);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(y=>{p(y)})})}function o(u,f,p){const y=window.grecaptcha;Mx(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(Lb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OT().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!s&&Mx(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=kT();y.length!==0&&(y+=p),Vb(y).then(()=>{o(p,u,f)}).catch(x=>{f(x)})}}).catch(p=>{f(p)})})}}async function zx(i,e,s,r=!1,o=!1){const u=new PT(i);let f;if(o)f=Lb;else try{f=await u.verify(s)}catch{f=await u.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function bd(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await zx(i,e,s,s==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await zx(i,e,s,s==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(i,e){const s=tg(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),u=s.getOptions();if(ba(u,e??{}))return o;Rs(o,"already-initialized")}return s.initialize({options:e})}function zT(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(Ci);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function BT(i,e,s){const r=Lr(i);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Pb(e),{host:f,port:p}=qT(e),y=p===null?"":`:${p}`,x={url:`${u}//${f}${y}/`},_=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(ba(x,r.config.emulator)&&ba(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Dl(f)?(db(`${u}//${f}${y}`),hb("Auth",!0)):HT()}function Pb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function qT(i){const e=Pb(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Bx(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Bx(f)}}}function Bx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function HT(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,s){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}async function FT(i,e){return Ui(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(i,e){return mc(i,"POST","/v1/accounts:signInWithPassword",Pi(i,e))}async function YT(i,e){return Ui(i,"POST","/v1/accounts:sendOobCode",Pi(i,e))}async function KT(i,e){return YT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",Pi(i,e))}async function QT(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends ag{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new sc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new sc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bd(e,s,"signInWithPassword",GT);case"emailLink":return $T(e,{email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bd(e,r,"signUpPassword",FT);case"emailLink":return QT(e,{idToken:s,email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(i,e){return mc(i,"POST","/v1/accounts:signInWithIdp",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="http://localhost";class wa extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Rs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=s;if(!r||!o)return null;const f=new wa(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return El(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,El(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,El(e,s)}buildRequest(){const e={requestUri:XT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=hc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZT(i){const e=Ho(Fo(i)).link,s=e?Ho(Fo(e)).deep_link_id:null,r=Ho(Fo(i)).deep_link_id;return(r?Ho(Fo(r)).link:null)||r||s||e||i}class lg{constructor(e){const s=Ho(Fo(e)),r=s.apiKey??null,o=s.oobCode??null,u=WT(s.mode??null);qe(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=ZT(e);try{return new lg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,s){return sc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=lg.parseLink(s);return qe(r,"argument-error"),sc._fromEmailAndCode(e,r.code,r.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends gc{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return wa._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return br.credential(s,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends gc{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends gc{constructor(){super("twitter.com")}static credential(e,s){return wa._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return wr.credential(s,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(i,e){return mc(i,"POST","/v1/accounts:signUp",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const u=await Cs._fromIdTokenResponse(e,r,o),f=qx(r);return new Ea({user:u,providerId:f,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=qx(r);return new Ea({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function qx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Li{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new _d(e,s,r,o)}}function zb(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(i,u,e,r):u})}async function eS(i,e,s=!1){const r=await nc(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return Ea._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,s=!1){const{auth:r}=i;if(hs(r.app))return Promise.reject(Ri(r));const o="reauthenticate";try{const u=await nc(i,zb(r,o,e,i),s);qe(u.idToken,r,"internal-error");const f=ig(u.idToken);qe(f,r,"internal-error");const{sub:p}=f;return qe(i.uid===p,r,"user-mismatch"),Ea._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Rs(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(i,e,s=!1){if(hs(i.app))return Promise.reject(Ri(i));const r="signIn",o=await zb(i,r,e),u=await Ea._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(u.user),u}async function nS(i,e){return Bb(Lr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(i){const e=Lr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sS(i,e,s){const r=Lr(i);await bd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KT)}async function iS(i,e,s){if(hs(i.app))return Promise.reject(Ri(i));const r=Lr(i),f=await bd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JT).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&qb(i),y}),p=await Ea._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function rS(i,e,s){return hs(i.app)?Promise.reject(Ri(i)):nS(qt(i),Ol.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qb(i),r})}function aS(i,e,s,r){return qt(i).onIdTokenChanged(e,s,r)}function lS(i,e,s){return qt(i).beforeAuthStateChanged(e,s)}function oS(i,e,s,r){return qt(i).onAuthStateChanged(e,s,r)}function cS(i){return qt(i).signOut()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e3,dS=10;class Fb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!s&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);ST()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dS):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},uS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const hS=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Gb.type="SESSION";const Yb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new Ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:u}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async x=>x(s.origin,u)),y=await fS(p);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,y)=>{const x=og("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const j=S;if(j.data.eventId===x)switch(j.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(_),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function gS(i){ni().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function pS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yS(){return navigator?.serviceWorker?.controller||null}function xS(){return Kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firebaseLocalStorageDb",vS=1,Ed="firebaseLocalStorage",Qb="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Pd(i,e){return i.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function bS(){const i=indexedDB.deleteDatabase($b);return new pc(i).toPromise()}function km(){const i=indexedDB.open($b,vS);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ed,{keyPath:Qb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ed)?e(r):(r.close(),await bS(),e(await km()))})})}async function Hx(i,e,s){const r=Pd(i,!0).put({[Qb]:e,value:s});return new pc(r).toPromise()}async function _S(i,e){const s=Pd(i,!1).get(e),r=await new pc(s).toPromise();return r===void 0?null:r.value}function Fx(i,e){const s=Pd(i,!0).delete(e);return new pc(s).toPromise()}const wS=800,ES=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>ES)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(xS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pS(),!this.activeServiceWorker)return;this.sender=new mS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Hx(e,wd,"1"),await Fx(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hx(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>_S(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fx(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Pd(o,!1).getAll();return new pc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const TS=Xb;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(i,e){return e?Ci(e):(qe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,s){return El(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function NS(i){return Bb(i.auth,new cg(i),i.bypassAuthState)}function AS(i){const{auth:e,user:s}=i;return qe(s,e,"internal-error"),tS(s,new cg(i),i.bypassAuthState)}async function jS(i){const{auth:e,user:s}=i;return qe(s,e,"internal-error"),eS(s,new cg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,s,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:s,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NS;case"linkViaPopup":case"linkViaRedirect":return jS;case"reauthViaPopup":case"reauthViaRedirect":return AS;default:Rs(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new fc(2e3,1e4);class bl extends Wb{constructor(e,s,r,o,u){super(e,s,o,u),this.provider=r,this.authWindow=null,this.pollId=null,bl.currentPopupAction&&bl.currentPopupAction.cancel(),bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CS.get())};e()}}bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="pendingRedirect",ld=new Map;class IS extends Wb{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const r=await kS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kS(i,e){const s=OS(e),r=MS(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function DS(i,e){ld.set(i._key(),e)}function MS(i){return Ci(i._redirectPersistence)}function OS(i){return ad(RS,i.config.apiKey,i.name)}async function VS(i,e,s=!1){if(hs(i.app))return Promise.reject(Ri(i));const r=Lr(i),o=SS(r,e),f=await new IS(r,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=600*1e3;class PS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!US(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Zb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError(ti(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(e))}saveEventToCache(e){this.cachedEventUids.add(Gx(e)),this.lastProcessedEventTime=Date.now()}}function Gx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Zb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function US(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(i,e={}){return Ui(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qS=/^https?/;async function HS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await zS(i);for(const s of e)try{if(FS(s))return}catch{}Rs(i,"unauthorized-domain")}function FS(i){const e=Rm(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===r}if(!qS.test(s))return!1;if(BS.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new fc(3e4,6e4);function Yx(){const i=ni().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function YS(i){return new Promise((e,s)=>{function r(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),s(ti(i,"network-request-failed"))},timeout:GS.get()})}if(ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ni().gapi?.load)r();else{const o=MT("iframefcb");return ni()[o]=()=>{gapi.load?r():s(ti(i,"network-request-failed"))},Vb(`${DT()}?onload=${o}`).catch(u=>s(u))}}).catch(e=>{throw od=null,e})}let od=null;function KS(i){return od=od||YS(i),od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new fc(5e3,15e3),QS="__/auth/iframe",XS="emulator/auth/iframe",WS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JS(i){const e=i.config;qe(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?sg(e,XS):`https://${i.config.authDomain}/${QS}`,r={apiKey:e.apiKey,appName:i.name,v:Ml},o=ZS.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${s}?${hc(r).slice(1)}`}async function eN(i){const e=await KS(i),s=ni().gapi;return qe(s,i,"internal-error"),e.open({where:document.body,url:JS(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WS,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ti(i,"network-request-failed"),p=ni().setTimeout(()=>{u(f)},$S.get());function y(){ni().clearTimeout(p),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,sN=600,iN="_blank",rN="http://localhost";class Kx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(i,e,s,r=nN,o=sN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...tN,width:r.toString(),height:o.toString(),top:u,left:f},x=Sn().toLowerCase();s&&(p=Cb(x)?iN:s),Ab(x)&&(e=e||rN,y.scrollbars="yes");const _=Object.entries(y).reduce((j,[H,Z])=>`${j}${H}=${Z},`,"");if(TT(x)&&p!=="_self")return lN(e||"",p),new Kx(null);const S=window.open(e||"",p,_);qe(S,i,"popup-blocked");try{S.focus()}catch{}return new Kx(S)}function lN(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="__/auth/handler",cN="emulator/auth/handler",uN=encodeURIComponent("fac");async function $x(i,e,s,r,o,u){qe(i.config.authDomain,i,"auth-domain-config-required"),qe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Ml,eventId:o};if(e instanceof Ub){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",Y2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))f[_]=S}if(e instanceof gc){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const y=await i._getAppCheckToken(),x=y?`#${uN}=${encodeURIComponent(y)}`:"";return`${dN(i)}?${hc(p).slice(1)}${x}`}function dN({config:i}){return i.emulator?sg(i,cN):`https://${i.authDomain}/${oN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class hN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=VS,this._overrideRedirectResult=DS}async _openPopup(e,s,r,o){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await $x(e,s,r,Rm(),o);return aN(e,u,og())}async _openRedirect(e,s,r,o){await this._originValidation(e);const u=await $x(e,s,r,Rm(),o);return gS(u),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:u}=this.eventManagers[s];return o?Promise.resolve(o):(Di(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await eN(e),r=new PS(e);return s.register("authEvent",o=>(qe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(mm,{type:mm},o=>{const u=o?.[0]?.[mm];u!==void 0&&s(!!u),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=HS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Mb()||jb()||rg()}}const fN=hN;var Qx="@firebase/auth",Xx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pN(i){Nl(new _a("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;qe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(i)},x=new RT(r,o,u,y);return zT(x,s),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Nl(new _a("auth-internal",e=>{const s=Lr(e.getProvider("auth").getImmediate());return(r=>new mN(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(Qx,Xx,gN(i)),Nr(Qx,Xx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=300,xN=ub("authIdTokenMaxAge")||yN;let Wx=null;const vN=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>xN)return;const o=s?.token;Wx!==o&&(Wx=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bN(i=pb()){const e=tg(i,"auth");if(e.isInitialized())return e.getImmediate();const s=UT(i,{popupRedirectResolver:fN,persistence:[TS,hS,Yb]}),r=ub("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=vN(u.toString());lS(s,f,()=>f(s.currentUser)),aS(s,p=>f(p))}}const o=ob("auth");return o&&BT(s,`http://${o}`),s}function _N(){return document.getElementsByTagName("head")?.[0]??document}IT({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const u=ti("internal-error");u.customData=o,s(u)},r.type="text/javascript",r.charset="UTF-8",_N().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pN("Browser");var wN="firebase",EN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(wN,EN,"app");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,Jb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function C(){}C.prototype=N.prototype,R.F=N.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(k,A,M){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return N.prototype[A].apply(k,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,N,C){C||(C=0);const k=Array(16);if(typeof N=="string")for(var A=0;A<16;++A)k[A]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(A=0;A<16;++A)k[A]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=R.g[0],C=R.g[1],A=R.g[2];let M=R.g[3],I;I=N+(M^C&(A^M))+k[0]+3614090360&4294967295,N=C+(I<<7&4294967295|I>>>25),I=M+(A^N&(C^A))+k[1]+3905402710&4294967295,M=N+(I<<12&4294967295|I>>>20),I=A+(C^M&(N^C))+k[2]+606105819&4294967295,A=M+(I<<17&4294967295|I>>>15),I=C+(N^A&(M^N))+k[3]+3250441966&4294967295,C=A+(I<<22&4294967295|I>>>10),I=N+(M^C&(A^M))+k[4]+4118548399&4294967295,N=C+(I<<7&4294967295|I>>>25),I=M+(A^N&(C^A))+k[5]+1200080426&4294967295,M=N+(I<<12&4294967295|I>>>20),I=A+(C^M&(N^C))+k[6]+2821735955&4294967295,A=M+(I<<17&4294967295|I>>>15),I=C+(N^A&(M^N))+k[7]+4249261313&4294967295,C=A+(I<<22&4294967295|I>>>10),I=N+(M^C&(A^M))+k[8]+1770035416&4294967295,N=C+(I<<7&4294967295|I>>>25),I=M+(A^N&(C^A))+k[9]+2336552879&4294967295,M=N+(I<<12&4294967295|I>>>20),I=A+(C^M&(N^C))+k[10]+4294925233&4294967295,A=M+(I<<17&4294967295|I>>>15),I=C+(N^A&(M^N))+k[11]+2304563134&4294967295,C=A+(I<<22&4294967295|I>>>10),I=N+(M^C&(A^M))+k[12]+1804603682&4294967295,N=C+(I<<7&4294967295|I>>>25),I=M+(A^N&(C^A))+k[13]+4254626195&4294967295,M=N+(I<<12&4294967295|I>>>20),I=A+(C^M&(N^C))+k[14]+2792965006&4294967295,A=M+(I<<17&4294967295|I>>>15),I=C+(N^A&(M^N))+k[15]+1236535329&4294967295,C=A+(I<<22&4294967295|I>>>10),I=N+(A^M&(C^A))+k[1]+4129170786&4294967295,N=C+(I<<5&4294967295|I>>>27),I=M+(C^A&(N^C))+k[6]+3225465664&4294967295,M=N+(I<<9&4294967295|I>>>23),I=A+(N^C&(M^N))+k[11]+643717713&4294967295,A=M+(I<<14&4294967295|I>>>18),I=C+(M^N&(A^M))+k[0]+3921069994&4294967295,C=A+(I<<20&4294967295|I>>>12),I=N+(A^M&(C^A))+k[5]+3593408605&4294967295,N=C+(I<<5&4294967295|I>>>27),I=M+(C^A&(N^C))+k[10]+38016083&4294967295,M=N+(I<<9&4294967295|I>>>23),I=A+(N^C&(M^N))+k[15]+3634488961&4294967295,A=M+(I<<14&4294967295|I>>>18),I=C+(M^N&(A^M))+k[4]+3889429448&4294967295,C=A+(I<<20&4294967295|I>>>12),I=N+(A^M&(C^A))+k[9]+568446438&4294967295,N=C+(I<<5&4294967295|I>>>27),I=M+(C^A&(N^C))+k[14]+3275163606&4294967295,M=N+(I<<9&4294967295|I>>>23),I=A+(N^C&(M^N))+k[3]+4107603335&4294967295,A=M+(I<<14&4294967295|I>>>18),I=C+(M^N&(A^M))+k[8]+1163531501&4294967295,C=A+(I<<20&4294967295|I>>>12),I=N+(A^M&(C^A))+k[13]+2850285829&4294967295,N=C+(I<<5&4294967295|I>>>27),I=M+(C^A&(N^C))+k[2]+4243563512&4294967295,M=N+(I<<9&4294967295|I>>>23),I=A+(N^C&(M^N))+k[7]+1735328473&4294967295,A=M+(I<<14&4294967295|I>>>18),I=C+(M^N&(A^M))+k[12]+2368359562&4294967295,C=A+(I<<20&4294967295|I>>>12),I=N+(C^A^M)+k[5]+4294588738&4294967295,N=C+(I<<4&4294967295|I>>>28),I=M+(N^C^A)+k[8]+2272392833&4294967295,M=N+(I<<11&4294967295|I>>>21),I=A+(M^N^C)+k[11]+1839030562&4294967295,A=M+(I<<16&4294967295|I>>>16),I=C+(A^M^N)+k[14]+4259657740&4294967295,C=A+(I<<23&4294967295|I>>>9),I=N+(C^A^M)+k[1]+2763975236&4294967295,N=C+(I<<4&4294967295|I>>>28),I=M+(N^C^A)+k[4]+1272893353&4294967295,M=N+(I<<11&4294967295|I>>>21),I=A+(M^N^C)+k[7]+4139469664&4294967295,A=M+(I<<16&4294967295|I>>>16),I=C+(A^M^N)+k[10]+3200236656&4294967295,C=A+(I<<23&4294967295|I>>>9),I=N+(C^A^M)+k[13]+681279174&4294967295,N=C+(I<<4&4294967295|I>>>28),I=M+(N^C^A)+k[0]+3936430074&4294967295,M=N+(I<<11&4294967295|I>>>21),I=A+(M^N^C)+k[3]+3572445317&4294967295,A=M+(I<<16&4294967295|I>>>16),I=C+(A^M^N)+k[6]+76029189&4294967295,C=A+(I<<23&4294967295|I>>>9),I=N+(C^A^M)+k[9]+3654602809&4294967295,N=C+(I<<4&4294967295|I>>>28),I=M+(N^C^A)+k[12]+3873151461&4294967295,M=N+(I<<11&4294967295|I>>>21),I=A+(M^N^C)+k[15]+530742520&4294967295,A=M+(I<<16&4294967295|I>>>16),I=C+(A^M^N)+k[2]+3299628645&4294967295,C=A+(I<<23&4294967295|I>>>9),I=N+(A^(C|~M))+k[0]+4096336452&4294967295,N=C+(I<<6&4294967295|I>>>26),I=M+(C^(N|~A))+k[7]+1126891415&4294967295,M=N+(I<<10&4294967295|I>>>22),I=A+(N^(M|~C))+k[14]+2878612391&4294967295,A=M+(I<<15&4294967295|I>>>17),I=C+(M^(A|~N))+k[5]+4237533241&4294967295,C=A+(I<<21&4294967295|I>>>11),I=N+(A^(C|~M))+k[12]+1700485571&4294967295,N=C+(I<<6&4294967295|I>>>26),I=M+(C^(N|~A))+k[3]+2399980690&4294967295,M=N+(I<<10&4294967295|I>>>22),I=A+(N^(M|~C))+k[10]+4293915773&4294967295,A=M+(I<<15&4294967295|I>>>17),I=C+(M^(A|~N))+k[1]+2240044497&4294967295,C=A+(I<<21&4294967295|I>>>11),I=N+(A^(C|~M))+k[8]+1873313359&4294967295,N=C+(I<<6&4294967295|I>>>26),I=M+(C^(N|~A))+k[15]+4264355552&4294967295,M=N+(I<<10&4294967295|I>>>22),I=A+(N^(M|~C))+k[6]+2734768916&4294967295,A=M+(I<<15&4294967295|I>>>17),I=C+(M^(A|~N))+k[13]+1309151649&4294967295,C=A+(I<<21&4294967295|I>>>11),I=N+(A^(C|~M))+k[4]+4149444226&4294967295,N=C+(I<<6&4294967295|I>>>26),I=M+(C^(N|~A))+k[11]+3174756917&4294967295,M=N+(I<<10&4294967295|I>>>22),I=A+(N^(M|~C))+k[2]+718787259&4294967295,A=M+(I<<15&4294967295|I>>>17),I=C+(M^(A|~N))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+M&4294967295}r.prototype.v=function(R,N){N===void 0&&(N=R.length);const C=N-this.blockSize,k=this.C;let A=this.h,M=0;for(;M<N;){if(A==0)for(;M<=C;)o(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<N;)if(k[A++]=R.charCodeAt(M++),A==this.blockSize){o(this,k),A=0;break}}else for(;M<N;)if(k[A++]=R[M++],A==this.blockSize){o(this,k),A=0;break}}this.h=A,this.o+=N},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)R[N++]=this.g[C]>>>k&255;return R};function u(R,N){var C=p;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=N(R)}function f(R,N){this.h=N;const C=[];let k=!0;for(let A=R.length-1;A>=0;A--){const M=R[A]|0;k&&M==N||(C[A]=M,k=!1)}this.g=C}var p={};function y(R){return-128<=R&&R<128?u(R,function(N){return new f([N|0],N<0?-1:0)}):new f([R|0],R<0?-1:0)}function x(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return P(x(-R));const N=[];let C=1;for(let k=0;R>=C;k++)N[k]=R/C|0,C*=4294967296;return new f(N,0)}function _(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return P(_(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=x(Math.pow(N,8));let k=S;for(let M=0;M<R.length;M+=8){var A=Math.min(8,R.length-M);const I=parseInt(R.substring(M,M+A),N);A<8?(A=x(Math.pow(N,A)),k=k.j(A).add(x(I))):(k=k.j(C),k=k.add(x(I)))}return k}var S=y(0),j=y(1),H=y(16777216);i=f.prototype,i.m=function(){if(X(this))return-P(this).m();let R=0,N=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);R+=(k>=0?k:4294967296+k)*N,N*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(Z(this))return"0";if(X(this))return"-"+P(this).toString(R);const N=x(Math.pow(R,6));var C=this;let k="";for(;;){const A=fe(C,N).g;C=ee(C,A.j(N));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=A,Z(C))return M+k;for(;M.length<6;)M="0"+M;k=M+k}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function Z(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function X(R){return R.h==-1}i.l=function(R){return R=ee(this,R),X(R)?-1:Z(R)?0:1};function P(R){const N=R.g.length,C=[];for(let k=0;k<N;k++)C[k]=~R.g[k];return new f(C,~R.h).add(j)}i.abs=function(){return X(this)?P(this):this},i.add=function(R){const N=Math.max(this.g.length,R.g.length),C=[];let k=0;for(let A=0;A<=N;A++){let M=k+(this.i(A)&65535)+(R.i(A)&65535),I=(M>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);k=I>>>16,M&=65535,I&=65535,C[A]=I<<16|M}return new f(C,C[C.length-1]&-2147483648?-1:0)};function ee(R,N){return R.add(P(N))}i.j=function(R){if(Z(this)||Z(R))return S;if(X(this))return X(R)?P(this).j(P(R)):P(P(this).j(R));if(X(R))return P(this.j(P(R)));if(this.l(H)<0&&R.l(H)<0)return x(this.m()*R.m());const N=this.g.length+R.g.length,C=[];for(var k=0;k<2*N;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<R.g.length;A++){const M=this.i(k)>>>16,I=this.i(k)&65535,de=R.i(A)>>>16,Le=R.i(A)&65535;C[2*k+2*A]+=I*Le,te(C,2*k+2*A),C[2*k+2*A+1]+=M*Le,te(C,2*k+2*A+1),C[2*k+2*A+1]+=I*de,te(C,2*k+2*A+1),C[2*k+2*A+2]+=M*de,te(C,2*k+2*A+2)}for(R=0;R<N;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=N;R<2*N;R++)C[R]=0;return new f(C,0)};function te(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function ye(R,N){this.g=R,this.h=N}function fe(R,N){if(Z(N))throw Error("division by zero");if(Z(R))return new ye(S,S);if(X(R))return N=fe(P(R),N),new ye(P(N.g),P(N.h));if(X(N))return N=fe(R,P(N)),new ye(P(N.g),N.h);if(R.g.length>30){if(X(R)||X(N))throw Error("slowDivide_ only works with positive integers.");for(var C=j,k=N;k.l(R)<=0;)C=Ee(C),k=Ee(k);var A=ge(C,1),M=ge(k,1);for(k=ge(k,2),C=ge(C,2);!Z(k);){var I=M.add(k);I.l(R)<=0&&(A=A.add(C),M=I),k=ge(k,1),C=ge(C,1)}return N=ee(R,A.j(N)),new ye(A,N)}for(A=S;R.l(N)>=0;){for(C=Math.max(1,Math.floor(R.m()/N.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),M=x(C),I=M.j(N);X(I)||I.l(R)>0;)C-=k,M=x(C),I=M.j(N);Z(M)&&(M=j),A=A.add(M),R=ee(R,I)}return new ye(A,R)}i.B=function(R){return fe(this,R).h},i.and=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)&R.i(k);return new f(C,this.h&R.h)},i.or=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)|R.i(k);return new f(C,this.h|R.h)},i.xor=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)^R.i(k);return new f(C,this.h^R.h)};function Ee(R){const N=R.g.length+1,C=[];for(let k=0;k<N;k++)C[k]=R.i(k)<<1|R.i(k-1)>>>31;return new f(C,R.h)}function ge(R,N){const C=N>>5;N%=32;const k=R.g.length-C,A=[];for(let M=0;M<k;M++)A[M]=N>0?R.i(M+C)>>>N|R.i(M+C+1)<<32-N:R.i(M+C);return new f(A,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Jb=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,Ar=f}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e_,Go,t_,cd,Dm,n_,s_,i_;(function(){var i,e=Object.defineProperty;function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(d,g){if(g)e:{var b=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var z=d[T];if(!(z in b))break e;b=b[z]}d=d[d.length-1],T=b[d],g=g(T),g!=T&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(g){var b=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&b.push([T,g[T]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function y(d,g,b){return d.call.apply(d.bind,arguments)}function x(d,g,b){return x=y,x.apply(null,arguments)}function _(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function S(d,g){function b(){}b.prototype=g.prototype,d.Z=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(T,z,$){for(var xe=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)xe[Xe-2]=arguments[Xe];return g.prototype[z].apply(T,xe)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function H(d){const g=d.length;if(g>0){const b=Array(g);for(let T=0;T<g;T++)b[T]=d[T];return b}return[]}function Z(d,g){for(let T=1;T<arguments.length;T++){const z=arguments[T];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=d.length||0;const $=z.length||0;d.length=b+$;for(let xe=0;xe<$;xe++)d[b+xe]=z[xe]}else d.push(z)}}class X{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(d){f.setTimeout(()=>{throw d},0)}function ee(){var d=R;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class te{constructor(){this.h=this.g=null}add(g,b){const T=ye.get();T.set(g,b),this.h?this.h.next=T:this.g=T,this.h=T}}var ye=new X(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ge=!1,R=new te,N=()=>{const d=Promise.resolve(void 0);Ee=()=>{d.then(C)}};function C(){for(var d;d=ee();){try{d.h.call(d.g)}catch(b){P(b)}var g=ye;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}ge=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function de(d,g){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}S(de,A),de.prototype.init=function(d,g){const b=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),K=0;function le(d,g,b,T,z){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!T,this.ha=z,this.key=++K,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ze(d,g,b){for(const T in d)g.call(b,d[T],T,d)}function Ze(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function E(d){const g={};for(const b in d)g[b]=d[b];return g}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(d,g){let b,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(b in T)d[b]=T[b];for(let $=0;$<L.length;$++)b=L[$],Object.prototype.hasOwnProperty.call(T,b)&&(d[b]=T[b])}}function V(d){this.src=d,this.g={},this.h=0}V.prototype.add=function(d,g,b,T,z){const $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);const xe=me(d,g,T,z);return xe>-1?(g=d[xe],b||(g.fa=!1)):(g=new le(g,this.src,$,!!T,z),g.fa=b,d.push(g)),g};function se(d,g){const b=g.type;if(b in d.g){var T=d.g[b],z=Array.prototype.indexOf.call(T,g,void 0),$;($=z>=0)&&Array.prototype.splice.call(T,z,1),$&&(be(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function me(d,g,b,T){for(let z=0;z<d.length;++z){const $=d[z];if(!$.da&&$.listener==g&&$.capture==!!b&&$.ha==T)return z}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Be={};function Pe(d,g,b,T,z){if(Array.isArray(g)){for(let $=0;$<g.length;$++)Pe(d,g[$],b,T,z);return null}return b=Se(b),d&&d[Le]?d.J(g,b,p(T)?!!T.capture:!1,z):W(d,g,b,!1,T,z)}function W(d,g,b,T,z,$){if(!g)throw Error("Invalid event type");const xe=p(z)?!!z.capture:!!z;let Xe=Ie(d);if(Xe||(d[_e]=Xe=new V(d)),b=Xe.add(g,b,T,xe,$),b.proxy)return b;if(T=we(),b.proxy=T,T.src=d,T.listener=b,d.addEventListener)M||(z=xe),z===void 0&&(z=!1),d.addEventListener(g.toString(),T,z);else if(d.attachEvent)d.attachEvent(pe(g.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function we(){function d(b){return g.call(d.src,d.listener,b)}const g=ae;return d}function Te(d,g,b,T,z){if(Array.isArray(g))for(var $=0;$<g.length;$++)Te(d,g[$],b,T,z);else T=p(T)?!!T.capture:!!T,b=Se(b),d&&d[Le]?(d=d.i,$=String(g).toString(),$ in d.g&&(g=d.g[$],b=me(g,b,T,z),b>-1&&(be(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete d.g[$],d.h--)))):d&&(d=Ie(d))&&(g=d.g[g.toString()],d=-1,g&&(d=me(g,b,T,z)),(b=d>-1?g[d]:null)&&Y(b))}function Y(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Le])se(g.i,d);else{var b=d.type,T=d.proxy;g.removeEventListener?g.removeEventListener(b,T,d.capture):g.detachEvent?g.detachEvent(pe(b),T):g.addListener&&g.removeListener&&g.removeListener(T),(b=Ie(g))?(se(b,d),b.h==0&&(b.src=null,g[_e]=null)):be(d)}}}function pe(d){return d in Be?Be[d]:Be[d]="on"+d}function ae(d,g){if(d.da)d=!0;else{g=new de(g,this);const b=d.listener,T=d.ha||d.src;d.fa&&Y(d),d=b.call(T,g)}return d}function Ie(d){return d=d[_e],d instanceof V?d:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(d){return typeof d=="function"?d:(d[Qe]||(d[Qe]=function(g){return d.handleEvent(g)}),d[Qe])}function F(){k.call(this),this.i=new V(this),this.M=this,this.G=null}S(F,k),F.prototype[Le]=!0,F.prototype.removeEventListener=function(d,g,b,T){Te(this,d,g,b,T)};function he(d,g){var b,T=d.G;if(T)for(b=[];T;T=T.G)b.push(T);if(d=d.M,T=g.type||g,typeof g=="string")g=new A(g,d);else if(g instanceof A)g.target=g.target||d;else{var z=g;g=new A(T,d),ne(g,z)}z=!0;let $,xe;if(b)for(xe=b.length-1;xe>=0;xe--)$=g.g=b[xe],z=je($,T,!0,g)&&z;if($=g.g=d,z=je($,T,!0,g)&&z,z=je($,T,!1,g)&&z,b)for(xe=0;xe<b.length;xe++)$=g.g=b[xe],z=je($,T,!1,g)&&z}F.prototype.N=function(){if(F.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const b=d.g[g];for(let T=0;T<b.length;T++)be(b[T]);delete d.g[g],d.h--}}this.G=null},F.prototype.J=function(d,g,b,T){return this.i.add(String(d),g,!1,b,T)},F.prototype.K=function(d,g,b,T){return this.i.add(String(d),g,!0,b,T)};function je(d,g,b,T){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let $=0;$<g.length;++$){const xe=g[$];if(xe&&!xe.da&&xe.capture==b){const Xe=xe.listener,Lt=xe.ha||xe.src;xe.fa&&se(d.i,xe),z=Xe.call(Lt,T)!==!1&&z}}return z&&!T.defaultPrevented}function Fe(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(d,g||0)}function ve(d){d.g=Fe(()=>{d.g=null,d.i&&(d.i=!1,ve(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Ne extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(d){k.call(this),this.h=d,this.g={}}S(ot,k);var Me=[];function Ct(d){ze(d.g,function(g,b){this.g.hasOwnProperty(b)&&Y(g)},d),d.g={}}ot.prototype.N=function(){ot.Z.N.call(this),Ct(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ht=f.JSON.stringify,Rt=f.JSON.parse,vn=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function In(){}function ps(){}var rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xt(){A.call(this,"d")}S(xt,A);function bn(){A.call(this,"c")}S(bn,A);var Mt={},Nc=null;function ja(){return Nc=Nc||new F}Mt.Ia="serverreachability";function Ac(d){A.call(this,Mt.Ia,d)}S(Ac,A);function ks(d){const g=ja();he(g,new Ac(g))}Mt.STAT_EVENT="statevent";function Br(d,g){A.call(this,Mt.STAT_EVENT,d),this.stat=g}S(Br,A);function Ft(d){const g=ja();he(g,new Br(g,d))}Mt.Ja="timingevent";function Ds(d,g){A.call(this,Mt.Ja,d),this.size=g}S(Ds,A);function Ms(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},g)}function ys(){this.g=!0}ys.prototype.ua=function(){this.g=!1};function rh(d,g,b,T,z,$){d.info(function(){if(d.g)if($){var xe="",Xe=$.split("&");for(let ht=0;ht<Xe.length;ht++){var Lt=Xe[ht].split("=");if(Lt.length>1){const It=Lt[0];Lt=Lt[1];const ss=It.split("_");xe=ss.length>=2&&ss[1]=="type"?xe+(It+"="+Lt+"&"):xe+(It+"=redacted&")}}}else xe=null;else xe=$;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+g+`
`+b+`
`+xe})}function jc(d,g,b,T,z,$,xe){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+g+`
`+b+`
`+$+" "+xe})}function Os(d,g,b,T){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+ah(d,b)+(T?" "+T:"")})}function qr(d,g){d.info(function(){return"TIMEOUT: "+g})}ys.prototype.info=function(){};function ah(d,g){if(!d.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(d=0;d<$.length;d++)if(Array.isArray($[d])){var b=$[d];if(!(b.length<2)){var T=b[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let xe=1;xe<T.length;xe++)T[xe]=""}}}}return Ht($)}catch{return g}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ql;function Fr(){}S(Fr,In),Fr.prototype.g=function(){return new XMLHttpRequest},ql=new Fr;function ci(d){return encodeURIComponent(String(d))}function Cc(d){var g=1;d=d.split(":");const b=[];for(;g>0&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function xs(d,g,b,T){this.j=d,this.i=g,this.l=b,this.S=T||1,this.V=new ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vs}function vs(){this.i=null,this.g="",this.h=!1}var Gt={},an={};function Vs(d,g,b){d.M=1,d.A=Gr(Kt(g)),d.u=b,d.R=!0,Ca(d,null)}function Ca(d,g){d.F=Date.now(),Ls(d),d.B=Kt(d.A);var b=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),Da(b.i,"t",T),d.C=0,b=d.j.L,d.h=new vs,d.g=Fc(d.j,b?g:null,!d.u),d.P>0&&(d.O=new Ne(x(d.Y,d,d.g),d.P)),g=d.V,b=d.g,T=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Me[0]=z.toString()),z=Me);for(let $=0;$<z.length;$++){const xe=Pe(b,z[$],T||g.handleEvent,!1,g.h||g);if(!xe)break;g.g[xe.key]=xe}g=d.J?E(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),ks(),rh(d.i,d.v,d.B,d.l,d.S,d.u)}xs.prototype.ba=function(d){d=d.target;const g=this.O;g&&ws(d)==3?g.j():this.Y(d)},xs.prototype.Y=function(d){try{if(d==this.g)e:{const Xe=ws(this.g),Lt=this.g.ya(),ht=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Xe!=4||Lt==7||(Lt==8||ht<=0?ks(3):ks(2)),Ps(this);var g=this.g.ca();this.X=g;var b=lh(this);if(this.o=g==200,jc(this.i,this.v,this.B,this.l,this.S,Xe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var $=T;break t}}$=null}if(d=$)Os(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Us(this,d);else{this.o=!1,this.m=3,Ft(12),qn(this),es(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<b.length;)if(It=Ic(this,b),It==an){Xe==4&&(this.m=4,Ft(14),d=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(It==Gt){this.m=4,Ft(15),Os(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Os(this.i,this.l,It,null),Us(this,It);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||b.length!=0||this.h.h||(this.m=1,Ft(16),d=!1),this.o=this.o&&d,!d)Os(this.i,this.l,b,"[Invalid Chunked Response]"),qn(this),es(this);else if(b.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),so(xe),xe.P=!0,Ft(11))}}else Os(this.i,this.l,b,null),Us(this,b);Xe==4&&qn(this),this.o&&!this.K&&(Xe==4?zc(this.j,this):(this.o=!1,Ls(this)))}else di(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),qn(this),es(this)}}}catch{}finally{}};function lh(d){if(!Rc(d))return d.g.la();const g=dn(d.g);if(g==="")return"";let b="";const T=g.length,z=ws(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return qn(d),es(d),"";d.h.i=new f.TextDecoder}for(let $=0;$<T;$++)d.h.h=!0,b+=d.h.i.decode(g[$],{stream:!(z&&$==T-1)});return g.length=0,d.h.g+=b,d.C=0,d.h.g}function Rc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ic(d,g){var b=d.C,T=g.indexOf(`
`,b);return T==-1?an:(b=Number(g.substring(b,T)),isNaN(b)?Gt:(T+=1,T+b>g.length?an:(g=g.slice(T,T+b),d.C=T+b,g)))}xs.prototype.cancel=function(){this.K=!0,qn(this)};function Ls(d){d.T=Date.now()+d.H,Ra(d,d.H)}function Ra(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ms(x(d.aa,d),g)}function Ps(d){d.D&&(f.clearTimeout(d.D),d.D=null)}xs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(qr(this.i,this.B),this.M!=2&&(ks(),Ft(17)),qn(this),this.m=2,es(this)):Ra(this,this.T-d)};function es(d){d.j.I==0||d.K||zc(d.j,d)}function qn(d){Ps(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Ct(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Us(d,g){try{var b=d.j;if(b.I!=0&&(b.g==d||Bs(b.h,d))){if(!d.L&&Bs(b.h,d)&&b.I==3){try{var T=b.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Pa(b),Ki(b);else break e;Zr(b),Ft(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ms(x(b.Va,b),6e3));zs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ks(b,11)}else if((d.L||b.g==d)&&Pa(b),!I(g))for(z=b.Ba.g.parse(g),g=0;g<z.length;g++){let ht=z[g];const It=ht[0];if(!(It<=b.K))if(b.K=It,ht=ht[1],b.I==2)if(ht[0]=="c"){b.M=ht[1],b.ba=ht[2];const ss=ht[3];ss!=null&&(b.ka=ss,b.j.info("VER="+b.ka));const $s=ht[4];$s!=null&&(b.za=$s,b.j.info("SVER="+b.za));const Es=ht[5];Es!=null&&typeof Es=="number"&&Es>0&&(T=1.5*Es,b.O=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const Ts=d.g;if(Ts){const Jr=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var $=T.h;$.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Gl($,$.h),$.h=null))}if(T.G){const Ua=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Ua&&(T.wa=Ua,gt(T.J,T.G,Ua))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),T=b;var xe=d;if(T.na=Hc(T,T.L?T.ba:null,T.W),xe.L){Yl(T.h,xe);var Xe=xe,Lt=T.O;Lt&&(Xe.H=Lt),Xe.D&&(Ps(Xe),Ls(Xe)),T.g=xe}else Pc(T);b.i.length>0&&Ys(b)}else ht[0]!="stop"&&ht[0]!="close"||Ks(b,7);else b.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Ks(b,7):to(b):ht[0]!="noop"&&b.l&&b.l.qa(ht),b.A=0)}}ks(4)}catch{}}var Yt=class{constructor(d,g){this.g=d,this.map=g}};function Hl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function zs(d){return d.h?1:d.g?d.g.size:0}function Bs(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Gl(d,g){d.g?d.g.add(g):d.h=g}function Yl(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Hl.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Kl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.G);return g}return H(d.i)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ia(d,g){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const T=d[b].indexOf("=");let z,$=null;T>=0?(z=d[b].substring(0,T),$=d[b].substring(T+1)):z=d[b],g(z,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Hn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Hn?(this.l=d.l,ln(this,d.j),this.o=d.o,this.g=d.g,zi(this,d.u),this.h=d.h,$l(this,Vc(d.i)),this.m=d.m):d&&(g=String(d).match(kc))?(this.l=!1,ln(this,g[1]||"",!0),this.o=qs(g[2]||""),this.g=qs(g[3]||"",!0),zi(this,g[4]),this.h=qs(g[5]||"",!0),$l(this,g[6]||"",!0),this.m=qs(g[7]||"")):(this.l=!1,this.i=new qi(null,this.l))}Hn.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Yr(g,ka,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Yr(g,ka,!0),"@"),d.push(ci(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Yr(b,b.charAt(0)=="/"?Ql:Dc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Yr(b,Mc)),d.join("")},Hn.prototype.resolve=function(d){const g=Kt(this);let b=!!d.j;b?ln(g,d.j):b=!!d.o,b?g.o=d.o:b=!!d.g,b?g.g=d.g:b=d.u!=null;var T=d.h;if(b)zi(g,d.u);else if(b=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=g.h.lastIndexOf("/");z!=-1&&(T=g.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const $=[];for(let xe=0;xe<z.length;){const Xe=z[xe++];Xe=="."?T&&xe==z.length&&$.push(""):Xe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&xe==z.length&&$.push("")):($.push(Xe),T=!0)}T=$.join("/")}else T=z}return b?g.h=T:b=d.i.toString()!=="",b?$l(g,Vc(d.i)):b=!!d.m,b&&(g.m=d.m),g};function Kt(d){return new Hn(d)}function ln(d,g,b){d.j=b?qs(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function zi(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function $l(d,g,b){g instanceof qi?(d.i=g,Ma(d.i,d.l)):(b||(g=Yr(g,Bi)),d.i=new qi(g,d.l))}function gt(d,g,b){d.i.set(g,b)}function Gr(d){return gt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qs(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yr(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,kn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ka=/[#\/\?@]/g,Dc=/[#\?:]/g,Ql=/[#\?]/g,Bi=/[#\?@]/g,Mc=/#/g;function qi(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Dn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ia(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=qi.prototype,i.add=function(d,g){Dn(this),this.i=null,d=Hi(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Oc(d,g){Dn(d),g=Hi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Xl(d,g){return Dn(d),g=Hi(d,g),d.g.has(g)}i.forEach=function(d,g){Dn(this),this.g.forEach(function(b,T){b.forEach(function(z){d.call(g,z,T,this)},this)},this)};function Wl(d,g){Dn(d);let b=[];if(typeof g=="string")Xl(d,g)&&(b=b.concat(d.g.get(Hi(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)b=b.concat(d[g]);return b}i.set=function(d,g){return Dn(this),this.i=null,d=Hi(this,d),Xl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},i.get=function(d,g){return d?(d=Wl(this,d),d.length>0?String(d[0]):g):g};function Da(d,g,b){Oc(d,g),b.length>0&&(d.i=null,d.g.set(Hi(d,g),H(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var b=g[T];const z=ci(b);b=Wl(this,b);for(let $=0;$<b.length;$++){let xe=z;b[$]!==""&&(xe+="="+ci(b[$])),d.push(xe)}}return this.i=d.join("&")};function Vc(d){const g=new qi;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Hi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Ma(d,g){g&&!d.j&&(Dn(d),d.i=null,d.g.forEach(function(b,T){const z=T.toLowerCase();T!=z&&(Oc(this,T),Da(this,z,b))},d)),d.j=g}function bs(d,g){const b=new ys;if(f.Image){const T=new Image;T.onload=_(ts,b,"TestLoadImage: loaded",!0,g,T),T.onerror=_(ts,b,"TestLoadImage: error",!1,g,T),T.onabort=_(ts,b,"TestLoadImage: abort",!1,g,T),T.ontimeout=_(ts,b,"TestLoadImage: timeout",!1,g,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else g(!1)}function Zl(d,g){const b=new ys,T=new AbortController,z=setTimeout(()=>{T.abort(),ts(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:T.signal}).then($=>{clearTimeout(z),$.ok?ts(b,"TestPingServer: ok",!0,g):ts(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),ts(b,"TestPingServer: error",!1,g)})}function ts(d,g,b,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(b)}catch{}}function Fi(){this.g=new vn}function Hs(d){this.i=d.Sb||null,this.h=d.ab||!1}S(Hs,In),Hs.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(d,g){F.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Kr,F),i=Kr.prototype,i.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,_s(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Gi(this):_s(this),this.readyState==3&&Oa(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Gi(this))},i.Na=function(d){this.g&&(this.response=d,Gi(this))},i.ga=function(){this.g&&Gi(this)};function Gi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,_s(d)}i.setRequestHeader=function(d,g){this.A.append(d,g)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function _s(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ns(d){let g="";return ze(d,function(b,T){g+=T,g+=":",g+=b,g+=`\r
`}),g}function $r(d,g,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=ns(b),typeof d=="string"?b!=null&&ci(b):gt(d,g,b))}function vt(d){F.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(vt,F);var Fs=/^https?$/i,Jl=["POST","PUT"];i=vt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,g,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ql.g(),this.g.onreadystatechange=j(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){Qr(this,$);return}if(d=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)b.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())b.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),z=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(Jl,g,void 0)>=0)||T||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,xe]of b)this.g.setRequestHeader($,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch($){Qr(this,$)}};function Qr(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,eo(d),ui(d)}function eo(d){d.A||(d.A=!0,he(d,"complete"),he(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,he(this,"complete"),he(this,"abort"),ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},i.Xa=function(){Xr(this)};function Xr(d){if(d.h&&typeof u<"u"){if(d.v&&ws(d)==4)setTimeout(d.Ca.bind(d),0);else if(he(d,"readystatechange"),ws(d)==4){d.h=!1;try{const $=d.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var T;if(T=$===0){let xe=String(d.D).match(kc)[1]||null;!xe&&f.self&&f.self.location&&(xe=f.self.location.protocol.slice(0,-1)),T=!Fs.test(xe?xe.toLowerCase():"")}b=T}if(b)he(d,"complete"),he(d,"success");else{d.o=6;try{var z=ws(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",eo(d)}}finally{ui(d)}}}}function ui(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,g||he(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ws(d){return d.g?d.g.readyState:0}i.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Rt(g)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function di(d){const g={};d=(d.g&&ws(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(I(d[T]))continue;var b=Cc(d[T]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=g[z]||[];g[z]=$,$.push(b)}Ze(g,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function Yi(d){this.za=0,this.i=[],this.j=new ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gs("baseRetryDelayMs",5e3,d),this.Za=Gs("retryDelaySeedMs",1e4,d),this.Ta=Gs("forwardChannelMaxRetries",2,d),this.va=Gs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Hl(d&&d.concurrentRequestLimit),this.Ba=new Fi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Yi.prototype,i.ka=8,i.I=1,i.connect=function(d,g,b,T){Ft(0),this.W=d,this.H=g||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.J=Hc(this,null,this.W),Ys(this)};function to(d){if(Va(d),d.I==3){var g=d.V++,b=Kt(d.J);if(gt(b,"SID",d.M),gt(b,"RID",g),gt(b,"TYPE","terminate"),Wr(d,b),g=new xs(d,d.j,g),g.M=2,g.A=Gr(Kt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Fc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ls(g)}qc(d)}function Ki(d){d.g&&(so(d),d.g.cancel(),d.g=null)}function Va(d){Ki(d),d.v&&(f.clearTimeout(d.v),d.v=null),Pa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ys(d){if(!Fl(d.h)&&!d.m){d.m=!0;var g=d.Ea;Ee||N(),ge||(Ee(),ge=!0),R.add(g,d),d.D=0}}function La(d,g){return zs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ms(x(d.Ea,d,g),Bc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new xs(this,this.j,d);let $=this.o;if(this.U&&($?($=E($),ne($,this.U)):$=this.U),this.u!==null||this.R||(z.J=$,$=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Lc(this,z,g),b=Kt(this.J),gt(b,"RID",d),gt(b,"CVER",22),this.G&&gt(b,"X-HTTP-Session-Id",this.G),Wr(this,b),$&&(this.R?g="headers="+ci(ns($))+"&"+g:this.u&&$r(b,this.u,$)),Gl(this.h,z),this.Ra&&gt(b,"TYPE","init"),this.S?(gt(b,"$req",g),gt(b,"SID","null"),z.U=!0,Vs(z,b,null)):Vs(z,b,g),this.I=2}}else this.I==3&&(d?no(this,d):this.i.length==0||Fl(this.h)||no(this))};function no(d,g){var b;g?b=g.l:b=d.V++;const T=Kt(d.J);gt(T,"SID",d.M),gt(T,"RID",b),gt(T,"AID",d.K),Wr(d,T),d.u&&d.o&&$r(T,d.u,d.o),b=new xs(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Lc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Gl(d.h,b),Vs(b,T,g)}function Wr(d,g){d.H&&ze(d.H,function(b,T){gt(g,T,b)}),d.l&&ze({},function(b,T){gt(g,T,b)})}function Lc(d,g,b){b=Math.min(d.i.length,b);const T=d.l?x(d.l.Ka,d.l,d):null;e:{var z=d.i;let Xe=-1;for(;;){const Lt=["count="+b];Xe==-1?b>0?(Xe=z[0].g,Lt.push("ofs="+Xe)):Xe=0:Lt.push("ofs="+Xe);let ht=!0;for(let It=0;It<b;It++){var $=z[It].g;const ss=z[It].map;if($-=Xe,$<0)Xe=Math.max(0,z[It].g-100),ht=!1;else try{$="req"+$+"_"||"";try{var xe=ss instanceof Map?ss:Object.entries(ss);for(const[$s,Es]of xe){let Ts=Es;p(Es)&&(Ts=Ht(Es)),Lt.push($+$s+"="+encodeURIComponent(Ts))}}catch($s){throw Lt.push($+"type="+encodeURIComponent("_badmap")),$s}}catch{T&&T(ss)}}if(ht){xe=Lt.join("&");break e}}xe=void 0}return d=d.i.splice(0,b),g.G=d,xe}function Pc(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;Ee||N(),ge||(Ee(),ge=!0),R.add(g,d),d.A=0}}function Zr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ms(x(d.Da,d),Bc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ms(x(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Ki(this),Uc(this))};function so(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Uc(d){d.g=new xs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Kt(d.na);gt(g,"RID","rpc"),gt(g,"SID",d.M),gt(g,"AID",d.K),gt(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&gt(g,"TO",d.ia),gt(g,"TYPE","xmlhttp"),Wr(d,g),d.u&&d.o&&$r(g,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Gr(Kt(g)),b.u=null,b.R=!0,Ca(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Ki(this),Zr(this),Ft(19))};function Pa(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function zc(d,g){var b=null;if(d.g==g){Pa(d),so(d),d.g=null;var T=2}else if(Bs(d.h,g))b=g.G,Yl(d.h,g),T=1;else return;if(d.I!=0){if(g.o)if(T==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var z=d.D;T=ja(),he(T,new Ds(T,b)),Ys(d)}else Pc(d);else if(z=g.m,z==3||z==0&&g.X>0||!(T==1&&La(d,g)||T==2&&Zr(d)))switch(b&&b.length>0&&(g=d.h,g.i=g.i.concat(b)),z){case 1:Ks(d,5);break;case 4:Ks(d,10);break;case 3:Ks(d,6);break;default:Ks(d,2)}}}function Bc(d,g){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*g}function Ks(d,g){if(d.j.info("Error code "+g),g==2){var b=x(d.bb,d),T=d.Ua;const z=!T;T=new Hn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ln(T,"https"),Gr(T),z?bs(T.toString(),b):Zl(T.toString(),b)}else Ft(2);d.I=0,d.l&&d.l.pa(g),qc(d),Va(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function qc(d){if(d.I=0,d.ja=[],d.l){const g=Kl(d.h);(g.length!=0||d.i.length!=0)&&(Z(d.ja,g),Z(d.ja,d.i),d.h.i.length=0,H(d.i),d.i.length=0),d.l.oa()}}function Hc(d,g,b){var T=b instanceof Hn?Kt(b):new Hn(b);if(T.g!="")g&&(T.g=g+"."+T.g),zi(T,T.u);else{var z=f.location;T=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const $=new Hn(null);T&&ln($,T),g&&($.g=g),z&&zi($,z),b&&($.h=b),T=$}return b=d.G,g=d.wa,b&&g&&gt(T,b,g),gt(T,"VER",d.ka),Wr(d,T),T}function Fc(d,g,b){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new vt(new Hs({ab:b})):new vt(d.ma),g.Fa(d.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}i=Gc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function $i(){}$i.prototype.g=function(d,g){return new Nn(d,g)};function Nn(d,g){F.call(this),this.g=new Yi(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!I(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new hi(this)}S(Nn,F),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){to(this.g)},Nn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=Ht(d),d=b);g.i.push(new Yt(g.Ya++,d)),g.I==3&&Ys(g)},Nn.prototype.N=function(){this.g.l=null,delete this.j,to(this.g),delete this.g,Nn.Z.N.call(this)};function Yc(d){xt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}S(Yc,xt);function Kc(){bn.call(this),this.status=1}S(Kc,bn);function hi(d){this.g=d}S(hi,Gc),hi.prototype.ra=function(){he(this.g,"a")},hi.prototype.qa=function(d){he(this.g,new Yc(d))},hi.prototype.pa=function(d){he(this.g,new Kc)},hi.prototype.oa=function(){he(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,i_=function(){return new $i},s_=function(){return ja()},n_=Mt,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,cd=Hr,Bl.COMPLETE="complete",t_=Bl,ps.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",F.prototype.listen=F.prototype.J,Go=ps,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,e_=vt}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const Jx="@firebase/firestore",ev="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Jm("@firebase/firestore");function pl(){return Ta.logLevel}function Ce(i,...e){if(Ta.logLevel<=it.DEBUG){const s=e.map(ug);Ta.debug(`Firestore (${Vl}): ${i}`,...s)}}function Mi(i,...e){if(Ta.logLevel<=it.ERROR){const s=e.map(ug);Ta.error(`Firestore (${Vl}): ${i}`,...s)}}function Al(i,...e){if(Ta.logLevel<=it.WARN){const s=e.map(ug);Ta.warn(`Firestore (${Vl}): ${i}`,...s)}}function ug(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,r_(i,r,s)}function r_(i,e,s){let r=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Mi(r),new Error(r)}function mt(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||r_(e,o,r)}function $e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Li{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(En.UNAUTHENTICATED)))}shutdown(){}}class SN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class NN{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){mt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,s(y)):Promise.resolve();let u=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new jr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new jr)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new a_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class AN{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jN{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new AN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){mt(this.o===void 0,3512);const r=u=>{u.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(mt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new tv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=RN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<s&&(r+=e.charAt(o[u]%62))}return r}}function rt(i,e){return i<e?-1:i>e?1:0}function Mm(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),u=e.charAt(r);if(o!==u)return gm(o)===gm(u)?rt(o,u):gm(o)?1:-1}return rt(i.length,e.length)}const IN=55296,kN=57343;function gm(i){const e=i.charCodeAt(0);return e>=IN&&e<=kN}function jl(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class ei{constructor(e,s,r){s===void 0?s=0:s>e.length&&He(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&He(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const u=ei.compareSegments(e.get(o),s.get(o));if(u!==0)return u}return rt(e.length,s.length)}static compareSegments(e,s){const r=ei.isNumericId(e),o=ei.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?ei.extractNumericId(e).compare(ei.extractNumericId(s)):Mm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class Tt extends ei{construct(e,s,r){return new Tt(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new Tt(s)}static emptyPath(){return new Tt([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ei{construct(e,s,r){return new yn(e,s,r)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new yn([nv])}static fromServerFormat(e){const s=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ae(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ae(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(u(),o++)}if(u(),f)throw new Ae(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(s)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Tt.fromString(e))}static fromName(e){return new Ve(Tt.fromString(e).popFirst(5))}static empty(){return new Ve(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Tt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(i,e,s){if(!s)throw new Ae(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function MN(i,e,s,r){if(e===!0&&r===!0)throw new Ae(oe.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function sv(i){if(!Ve.isDocumentKey(i))throw new Ae(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function iv(i){if(Ve.isDocumentKey(i))throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function o_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ud(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He(12329,{type:typeof i})}function Zn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ae(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Ud(i);throw new Ae(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(i,e){const s={typeString:i};return e&&(s.value=e),s}function yc(i,e){if(!o_(i))throw new Ae(oe.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){s=`Expected '${r}' field to equal '${u.value}'`;break}}if(s)throw new Ae(oe.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,av=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*av);return new At(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<rv)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:en("string",At._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new At(0,0))}static max(){return new Ge(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;function ON(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(r===1e9?new At(s+1,0):new At(s,r));return new Rr(o,Ve.empty(),e)}function VN(i){return new Rr(i.readTime,i.key,ic)}class Rr{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Rr(Ge.min(),Ve.empty(),ic)}static max(){return new Rr(Ge.max(),Ve.empty(),ic)}}function LN(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=Ve.comparator(i.documentKey,e.documentKey),s!==0?s:rt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==PN)throw i;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ue(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ue?s:ue.resolve(s)}catch(s){return ue.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ue.reject(s)}static resolve(e){return new ue(((s,r)=>{s(e)}))}static reject(e){return new ue(((s,r)=>{r(e)}))}static waitFor(e){return new ue(((s,r)=>{let o=0,u=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++u,f&&u===o&&s()}),(y=>r(y)))})),f=!0,u===o&&s()}))}static or(e){let s=ue.resolve(!1);for(const r of e)s=s.next((o=>o?ue.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,u)=>{r.push(s.call(this,o,u))})),this.waitFor(r)}static mapArray(e,s){return new ue(((r,o)=>{const u=e.length,f=new Array(u);let p=0;for(let y=0;y<u;y++){const x=y;s(e[x]).next((_=>{f[x]=_,++p,p===u&&r(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new ue(((r,o)=>{const u=()=>{e()===!0?s().next((()=>{u()}),o):r()};u()}))}}function zN(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Pl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function Bd(i){return i==null}function Td(i){return i===0&&1/i==-1/0}function BN(i){return typeof i=="number"&&Number.isInteger(i)&&!Td(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function qN(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=lv(e)),e=HN(i.get(s),e);return lv(e)}function HN(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":s+="";break;case c_:s+="";break;default:s+=u}}return s}function lv(i){return i+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function Pr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function u_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,s){this.comparator=e,this.root=s||pn.EMPTY}insert(e,s){return new Dt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=s?r(e.key,s):1,s&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,s,r,o,u){this.key=e,this.value=s,this.color=r??pn.RED,this.left=o??pn.EMPTY,this.right=u??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,u){return new pn(e??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,s,r),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return pn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,s,r,o,u){return this}insert(e,s,r){return new pn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new sn(this.comparator);return s.data=e,s}}class cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Wn([])}unionWith(e){let s=new sn(yn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Wn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new d_("Invalid base64 string: "+u):u}})(e);return new xn(s)}static fromUint8Array(e){const s=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new xn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const FN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(i){if(mt(!!i,39018),typeof i=="string"){let e=0;const s=FN.exec(i);if(mt(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(i.seconds),nanos:zt(i.nanos)}}function zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function kr(i){return typeof i=="string"?xn.fromBase64String(i):xn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="server_timestamp",f_="__type__",m_="__previous_value__",g_="__local_write_time__";function fg(i){return(i?.mapValue?.fields||{})[f_]?.stringValue===h_}function qd(i){const e=i.mapValue.fields[m_];return fg(e)?qd(e):e}function rc(i){const e=Ir(i.mapValue.fields[g_].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,s,r,o,u,f,p,y,x,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=x,this.isUsingEmulator=_}}const Sd="(default)";class ac{constructor(e,s){this.projectId=e,this.database=s||Sd}static empty(){return new ac("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof ac&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",YN="__max__",ed={mapValue:{}},y_="__vector__",Nd="value";function Dr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fg(i)?4:$N(i)?9007199254740991:KN(i)?10:11:He(28295,{value:i})}function li(i,e){if(i===e)return!0;const s=Dr(i);if(s!==Dr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rc(i).isEqual(rc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ir(o.timestampValue),p=Ir(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return kr(o.bytesValue).isEqual(kr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return zt(o.geoPointValue.latitude)===zt(u.geoPointValue.latitude)&&zt(o.geoPointValue.longitude)===zt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return zt(o.integerValue)===zt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=zt(o.doubleValue),p=zt(u.doubleValue);return f===p?Td(f)===Td(p):isNaN(f)&&isNaN(p)}return!1})(i,e);case 9:return jl(i.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if(ov(f)!==ov(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!li(f[y],p[y])))return!1;return!0})(i,e);default:return He(52216,{left:i})}}function lc(i,e){return(i.values||[]).find((s=>li(s,e)))!==void 0}function Cl(i,e){if(i===e)return 0;const s=Dr(i),r=Dr(e);if(s!==r)return rt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return rt(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=zt(u.integerValue||u.doubleValue),y=zt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(i,e);case 3:return uv(i.timestampValue,e.timestampValue);case 4:return uv(rc(i),rc(e));case 5:return Mm(i.stringValue,e.stringValue);case 6:return(function(u,f){const p=kr(u),y=kr(f);return p.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),y=f.split("/");for(let x=0;x<p.length&&x<y.length;x++){const _=rt(p[x],y[x]);if(_!==0)return _}return rt(p.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=rt(zt(u.latitude),zt(f.latitude));return p!==0?p:rt(zt(u.longitude),zt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return dv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},y=f.fields||{},x=p[Nd]?.arrayValue,_=y[Nd]?.arrayValue,S=rt(x?.values?.length||0,_?.values?.length||0);return S!==0?S:dv(x,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ed.mapValue&&f===ed.mapValue)return 0;if(u===ed.mapValue)return 1;if(f===ed.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),x=f.fields||{},_=Object.keys(x);y.sort(),_.sort();for(let S=0;S<y.length&&S<_.length;++S){const j=Mm(y[S],_[S]);if(j!==0)return j;const H=Cl(p[y[S]],x[_[S]]);if(H!==0)return H}return rt(y.length,_.length)})(i.mapValue,e.mapValue);default:throw He(23264,{he:s})}}function uv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return rt(i,e);const s=Ir(i),r=Ir(e),o=rt(s.seconds,r.seconds);return o!==0?o:rt(s.nanos,r.nanos)}function dv(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const u=Cl(s[o],r[o]);if(u)return u}return rt(s.length,r.length)}function Rl(i){return Om(i)}function Om(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Ir(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return kr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Ve.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const u of s.values||[])o?o=!1:r+=",",r+=Om(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Om(s.fields[f])}`;return o+"}"})(i.mapValue):He(61005,{value:i})}function ud(i){switch(Dr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qd(i);return e?16+ud(e):16;case 5:return 2*i.stringValue.length;case 6:return kr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ud(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Pr(r.fields,((u,f)=>{o+=u.length+ud(f)})),o})(i.mapValue);default:throw He(13486,{value:i})}}function hv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Vm(i){return!!i&&"integerValue"in i}function mg(i){return!!i&&"arrayValue"in i}function fv(i){return!!i&&"nullValue"in i}function mv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function dd(i){return!!i&&"mapValue"in i}function KN(i){return(i?.mapValue?.fields||{})[p_]?.stringValue===y_}function Wo(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Pr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Wo(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Wo(i.arrayValue.values[s]);return e}return{...i}}function $N(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===YN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!dd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(s)}setAll(e){let s=yn.emptyPath(),r={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const y=this.getFieldsMap(s);this.applyChanges(y,r,o),r={},o=[],s=p.popLast()}f?r[p.lastSegment()]=Wo(f):o.push(p.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,r,o)}delete(e){const s=this.field(e.popLast());dd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];dd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){Pr(s,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Bn(Wo(this.value))}}function x_(i){const e=[];return Pr(i.fields,((s,r)=>{const o=new yn([s]);if(dd(r)){const u=x_(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,s,r,o,u,f,p){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Tn(e,0,Ge.min(),Ge.min(),Ge.min(),Bn.empty(),0)}static newFoundDocument(e,s,r,o){return new Tn(e,1,s,Ge.min(),r,o,0)}static newNoDocument(e,s){return new Tn(e,2,s,Ge.min(),Ge.min(),Bn.empty(),0)}static newUnknownDocument(e,s){return new Tn(e,3,s,Ge.min(),Ge.min(),Bn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,s){this.position=e,this.inclusive=s}}function gv(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?r=Ve.comparator(Ve.fromName(f.referenceValue),s.key):r=Cl(f,s.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function pv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!li(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,s="asc"){this.field=e,this.dir=s}}function QN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{}class Jt extends v_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new WN(e,s,r):s==="array-contains"?new eA(e,r):s==="in"?new tA(e,r):s==="not-in"?new nA(e,r):s==="array-contains-any"?new sA(e,r):new Jt(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new ZN(e,r):new JN(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Cl(s,this.value)):s!==null&&Dr(this.value)===Dr(s)&&this.matchesComparison(Cl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends v_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Is(e,s)}matches(e){return b_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b_(i){return i.op==="and"}function __(i){return XN(i)&&b_(i)}function XN(i){for(const e of i.filters)if(e instanceof Is)return!1;return!0}function Lm(i){if(i instanceof Jt)return i.field.canonicalString()+i.op.toString()+Rl(i.value);if(__(i))return i.filters.map((e=>Lm(e))).join(",");{const e=i.filters.map((s=>Lm(s))).join(",");return`${i.op}(${e})`}}function w_(i,e){return i instanceof Jt?(function(r,o){return o instanceof Jt&&r.op===o.op&&r.field.isEqual(o.field)&&li(r.value,o.value)})(i,e):i instanceof Is?(function(r,o){return o instanceof Is&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,p)=>u&&w_(f,o.filters[p])),!0):!1})(i,e):void He(19439)}function E_(i){return i instanceof Jt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Rl(s.value)}`})(i):i instanceof Is?(function(s){return s.op.toString()+" {"+s.getFilters().map(E_).join(" ,")+"}"})(i):"Filter"}class WN extends Jt{constructor(e,s,r){super(e,s,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const s=Ve.comparator(e.key,this.key);return this.matchesComparison(s)}}class ZN extends Jt{constructor(e,s){super(e,"in",s),this.keys=T_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class JN extends Jt{constructor(e,s){super(e,"not-in",s),this.keys=T_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function T_(i,e){return(e.arrayValue?.values||[]).map((s=>Ve.fromName(s.referenceValue)))}class eA extends Jt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return mg(s)&&lc(s.arrayValue,this.value)}}class tA extends Jt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&lc(this.value.arrayValue,s)}}class nA extends Jt{constructor(e,s){super(e,"not-in",s)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!lc(this.value.arrayValue,s)}}class sA extends Jt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!mg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>lc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,s=null,r=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function yv(i,e=null,s=[],r=[],o=null,u=null,f=null){return new iA(i,e,s,r,o,u,f)}function gg(i){const e=$e(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Lm(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Bd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>Rl(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>Rl(r))).join(",")),e.Te=s}return e.Te}function pg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!QN(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!w_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!pv(i.startAt,e.startAt)&&pv(i.endAt,e.endAt)}function Pm(i){return Ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,s=null,r=[],o=[],u=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rA(i,e,s,r,o,u,f,p){return new Ul(i,e,s,r,o,u,f,p)}function yg(i){return new Ul(i)}function xv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function S_(i){return i.collectionGroup!==null}function Zo(i){const e=$e(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),s.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new sn(yn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new oc(u,r))})),s.has(yn.keyField().canonicalString())||e.Ie.push(new oc(yn.keyField(),r))}return e.Ie}function si(i){const e=$e(i);return e.Ee||(e.Ee=aA(e,Zo(i))),e.Ee}function aA(i,e){if(i.limitType==="F")return yv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new oc(o.field,u)}));const s=i.endAt?new Ad(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ad(i.startAt.position,i.startAt.inclusive):null;return yv(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function Um(i,e){const s=i.filters.concat([e]);return new Ul(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function zm(i,e,s){return new Ul(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function Hd(i,e){return pg(si(i),si(e))&&i.limitType===e.limitType}function N_(i){return`${gg(si(i))}|lt:${i.limitType}`}function yl(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>E_(o))).join(", ")}]`),Bd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>Rl(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>Rl(o))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function Fd(i,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ve.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,o){for(const u of Zo(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,p,y){const x=gv(f,p,y);return f.inclusive?x<=0:x<0})(r.startAt,Zo(r),o)||r.endAt&&!(function(f,p,y){const x=gv(f,p,y);return f.inclusive?x>=0:x>0})(r.endAt,Zo(r),o))})(i,e)}function lA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function A_(i){return(e,s)=>{let r=!1;for(const o of Zo(i)){const u=oA(o,e,s);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function oA(i,e,s){const r=i.field.isKeyField()?Ve.comparator(e.key,s.key):(function(u,f,p){const y=f.data.field(u),x=p.data.field(u);return y!==null&&x!==null?Cl(y,x):He(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pr(this.inner,((s,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new Dt(Ve.comparator);function Oi(){return cA}const j_=new Dt(Ve.comparator);function Yo(...i){let e=j_;for(const s of i)e=e.insert(s.key,s);return e}function C_(i){let e=j_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function ya(){return Jo()}function R_(){return Jo()}function Jo(){return new Na((i=>i.toString()),((i,e)=>i.isEqual(e)))}const uA=new Dt(Ve.comparator),dA=new sn(Ve.comparator);function at(...i){let e=dA;for(const s of i)e=e.add(s);return e}const hA=new sn(rt);function fA(){return hA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function I_(i){return{integerValue:""+i}}function mA(i,e){return BN(e)?I_(e):xg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function gA(i,e,s){return i instanceof jd?(function(o,u){const f={fields:{[f_]:{stringValue:h_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&fg(u)&&(u=qd(u)),u&&(f.fields[m_]=u),{mapValue:f}})(s,e):i instanceof cc?D_(i,e):i instanceof uc?M_(i,e):(function(o,u){const f=k_(o,u),p=vv(f)+vv(o.Ae);return Vm(f)&&Vm(o.Ae)?I_(p):xg(o.serializer,p)})(i,e)}function pA(i,e,s){return i instanceof cc?D_(i,e):i instanceof uc?M_(i,e):s}function k_(i,e){return i instanceof Cd?(function(r){return Vm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class jd extends Gd{}class cc extends Gd{constructor(e){super(),this.elements=e}}function D_(i,e){const s=O_(e);for(const r of i.elements)s.some((o=>li(o,r)))||s.push(r);return{arrayValue:{values:s}}}class uc extends Gd{constructor(e){super(),this.elements=e}}function M_(i,e){let s=O_(e);for(const r of i.elements)s=s.filter((o=>!li(o,r)));return{arrayValue:{values:s}}}class Cd extends Gd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function vv(i){return zt(i.integerValue||i.doubleValue)}function O_(i){return mg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function yA(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof cc&&o instanceof cc||r instanceof uc&&o instanceof uc?jl(r.elements,o.elements,li):r instanceof Cd&&o instanceof Cd?li(r.Ae,o.Ae):r instanceof jd&&o instanceof jd})(i.transform,e.transform)}class xA{constructor(e,s){this.version=e,this.transformResults=s}}class Rn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Yd{}function V_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Kd(i.key,Rn.none()):new xc(i.key,i.data,Rn.none());{const s=i.data,r=Bn.empty();let o=new sn(yn.comparator);for(let u of e.fields)if(!o.has(u)){let f=s.field(u);f===null&&u.length>1&&(u=u.popLast(),f=s.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Ur(i.key,r,new Wn(o.toArray()),Rn.none())}}function vA(i,e,s){i instanceof xc?(function(o,u,f){const p=o.value.clone(),y=_v(o.fieldTransforms,u,f.transformResults);p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,s):i instanceof Ur?(function(o,u,f){if(!hd(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=_v(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(L_(o)),y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,s):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function ec(i,e,s,r){return i instanceof xc?(function(u,f,p,y){if(!hd(u.precondition,f))return p;const x=u.value.clone(),_=wv(u.fieldTransforms,y,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(i,e,s,r):i instanceof Ur?(function(u,f,p,y){if(!hd(u.precondition,f))return p;const x=wv(u.fieldTransforms,y,f),_=f.data;return _.setAll(L_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(i,e,s,r):(function(u,f,p){return hd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,e,s)}function bA(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),u=k_(r.transform,o||null);u!=null&&(s===null&&(s=Bn.empty()),s.set(r.field,u))}return s||null}function bv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jl(r,o,((u,f)=>yA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class xc extends Yd{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ur extends Yd{constructor(e,s,r,o,u=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function L_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function _v(i,e,s){const r=new Map;mt(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const u=i[o],f=u.transform,p=e.data.field(u.field);r.set(u.field,pA(f,p,s[o]))}return r}function wv(i,e,s){const r=new Map;for(const o of i){const u=o.transform,f=s.data.field(o.field);r.set(o.field,gA(u,f,e))}return r}class Kd extends Yd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends Yd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&vA(u,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=ec(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=ec(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=R_();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=s.has(o.key)?null:p;const y=V_(f,p);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ge.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),at())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,((s,r)=>bv(s,r)))&&jl(this.baseMutations,e.baseMutations,((s,r)=>bv(s,r)))}}class vg{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return uA})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new vg(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,ct;function SA(i){switch(i){case oe.OK:return He(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return He(15467,{code:i})}}function P_(i){if(i===void 0)return Mi("GRPC error has no .code"),oe.UNKNOWN;switch(i){case Zt.OK:return oe.OK;case Zt.CANCELLED:return oe.CANCELLED;case Zt.UNKNOWN:return oe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return oe.INTERNAL;case Zt.UNAVAILABLE:return oe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return oe.NOT_FOUND;case Zt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Zt.ABORTED:return oe.ABORTED;case Zt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Zt.DATA_LOSS:return oe.DATA_LOSS;default:return He(39323,{code:i})}}(ct=Zt||(Zt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Ar([4294967295,4294967295],0);function Ev(i){const e=NA().encode(i),s=new Jb;return s.update(e),new Uint8Array(s.digest())}function Tv(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ar([s,r],0),new Ar([o,u],0)]}class bg{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Ko(`Invalid padding: ${s}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Ar.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(Ar.fromNumber(r)));return o.compare(AA)===1&&(o=new Ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Ev(e),[r,o]=Tv(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new bg(u,o,s);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=Ev(e),[r,o]=Tv(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,s,r,o,u){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new $d(Ge.min(),o,new Dt(rt),Oi(),at())}}class vc{constructor(e,s,r,o,u){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new vc(r,s,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class U_{constructor(e,s){this.targetId=e,this.Ce=s}}class z_{constructor(e,s,r=xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Sv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),s=at(),r=at();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:He(38017,{changeType:u})}})),new vc(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=td(),this.He=td(),this.Ye=new Dt(rt)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const u=o.target;if(Pm(u))if(r===0){const f=new Ve(u.path);this.et(s,f,Tn.newNoDocument(f,Ge.min()))}else mt(r===1,20013,{expectedCount:r});else{const f=this._t(s);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(s);const x=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,x)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=s;let f,p;try{f=kr(r).toUint8Array()}catch(y){if(y instanceof d_)return Al("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new bg(f,o,u)}catch(y){return Al(y instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(s,u,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Pm(p.target)){const y=new Ve(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Tn.newNoDocument(y,e))}u.Be&&(s.set(f,u.ke()),u.qe())}}));let r=at();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((y=>{const x=this.ot(y);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new $d(e,s,this.Ye,this.je,r);return this.je=Oi(),this.Je=td(),this.He=td(),this.Ye=new Dt(rt),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Sv,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new sn(rt),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new sn(rt),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Ce("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function td(){return new Dt(Ve.comparator)}function Nv(){return new Dt(Ve.comparator)}const CA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IA={and:"AND",or:"OR"};class kA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Bm(i,e){return i.useProto3Json||Bd(e)?e:{value:e}}function Rd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function DA(i,e){return Rd(i,e.toTimestamp())}function ii(i){return mt(!!i,49232),Ge.fromTimestamp((function(s){const r=Ir(s);return new At(r.seconds,r.nanos)})(i))}function _g(i,e){return qm(i,e).canonicalString()}function qm(i,e){const s=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function q_(i){const e=Tt.fromString(i);return mt(K_(e),10190,{key:e.toString()}),e}function Hm(i,e){return _g(i.databaseId,e.path)}function pm(i,e){const s=q_(e);if(s.get(1)!==i.databaseId.projectId)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Ve(F_(s))}function H_(i,e){return _g(i.databaseId,e)}function MA(i){const e=q_(i);return e.length===4?Tt.emptyPath():F_(e)}function Fm(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function F_(i){return mt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Av(i,e,s){return{name:Hm(i,e),fields:s.value.mapValue.fields}}function OA(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:He(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(mt(_===void 0||typeof _=="string",58123),xn.fromBase64String(_||"")):(mt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),xn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(x){const _=x.code===void 0?oe.UNKNOWN:P_(x.code);return new Ae(_,x.message||"")})(f);s=new z_(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=pm(i,r.document.name),u=ii(r.document.updateTime),f=r.document.createTime?ii(r.document.createTime):Ge.min(),p=new Bn({mapValue:{fields:r.document.fields}}),y=Tn.newFoundDocument(o,u,f,p),x=r.targetIds||[],_=r.removedTargetIds||[];s=new fd(x,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=pm(i,r.document),u=r.readTime?ii(r.readTime):Ge.min(),f=Tn.newNoDocument(o,u),p=r.removedTargetIds||[];s=new fd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=pm(i,r.document),u=r.removedTargetIds||[];s=new fd([],u,o,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new TA(o,u),p=r.targetId;s=new U_(p,f)}}return s}function VA(i,e){let s;if(e instanceof xc)s={update:Av(i,e.key,e.value)};else if(e instanceof Kd)s={delete:Hm(i,e.key)};else if(e instanceof Ur)s={update:Av(i,e.key,e.data),updateMask:GA(e.fieldMask)};else{if(!(e instanceof _A))return He(16599,{Vt:e.type});s={verify:Hm(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof jd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof cc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof uc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Cd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw He(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:DA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)})(i,e.precondition)),s}function LA(i,e){return i&&i.length>0?(mt(e!==void 0,14353),i.map((s=>(function(o,u){let f=o.updateTime?ii(o.updateTime):ii(u);return f.isEqual(Ge.min())&&(f=ii(u)),new xA(f,o.transformResults||[])})(s,e)))):[]}function PA(i,e){return{documents:[H_(i,e.path)]}}function UA(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=H_(i,o);const u=(function(x){if(x.length!==0)return Y_(Is.create(x,"and"))})(e.filters);u&&(s.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(j){return{field:xl(j.field),direction:qA(j.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=Bm(i,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:s,parent:o}}function zA(i){let e=MA(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){mt(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];s.where&&(u=(function(S){const j=G_(S);return j instanceof Is&&__(j)?j.getFilters():[j]})(s.where));let f=[];s.orderBy&&(f=(function(S){return S.map((j=>(function(Z){return new oc(vl(Z.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(j)))})(s.orderBy));let p=null;s.limit&&(p=(function(S){let j;return j=typeof S=="object"?S.value:S,Bd(j)?null:j})(s.limit));let y=null;s.startAt&&(y=(function(S){const j=!!S.before,H=S.values||[];return new Ad(H,j)})(s.startAt));let x=null;return s.endAt&&(x=(function(S){const j=!S.before,H=S.values||[];return new Ad(H,j)})(s.endAt)),rA(e,o,f,u,p,"F",y,x)}function BA(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function G_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=vl(s.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=vl(s.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(s.unaryFilter.field);return Jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=vl(s.unaryFilter.field);return Jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(i):i.fieldFilter!==void 0?(function(s){return Jt.create(vl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return Is.create(s.compositeFilter.filters.map((r=>G_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(s.compositeFilter.op))})(i):He(30097,{filter:i})}function qA(i){return CA[i]}function HA(i){return RA[i]}function FA(i){return IA[i]}function xl(i){return{fieldPath:i.canonicalString()}}function vl(i){return yn.fromServerFormat(i.fieldPath)}function Y_(i){return i instanceof Jt?(function(s){if(s.op==="=="){if(mv(s.value))return{unaryFilter:{field:xl(s.field),op:"IS_NAN"}};if(fv(s.value))return{unaryFilter:{field:xl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(mv(s.value))return{unaryFilter:{field:xl(s.field),op:"IS_NOT_NAN"}};if(fv(s.value))return{unaryFilter:{field:xl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(s.field),op:HA(s.op),value:s.value}}})(i):i instanceof Is?(function(s){const r=s.getFilters().map((o=>Y_(o)));return r.length===1?r[0]:{compositeFilter:{op:FA(s.op),filters:r}}})(i):He(54877,{filter:i})}function GA(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function K_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,s,r,o,u=Ge.min(),f=Ge.min(),p=xn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.yt=e}}function KA(i){const e=zA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Cn=new QA}addToCollectionParentIndex(e,s){return this.Cn.add(s),ue.resolve()}getCollectionParents(e,s){return ue.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ue.resolve()}deleteFieldIndex(e,s){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,s){return ue.resolve()}getDocumentsMatchingTarget(e,s){return ue.resolve(null)}getIndexType(e,s){return ue.resolve(0)}getFieldIndexes(e,s){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,s){return ue.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,s){return ue.resolve(Rr.min())}updateCollectionGroup(e,s,r){return ue.resolve()}updateIndexEntries(e,s){return ue.resolve()}}class QA{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new sn(Tt.comparator),u=!o.has(r);return this.index[s]=o.add(r),u}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new sn(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$_=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn($_,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Il(0)}static cr(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",XA=1048576;function Rv([i,e],[s,r]){const o=rt(i,s);return o===0?rt(e,r):o}class WA{constructor(e){this.Ir=e,this.buffer=new sn(Rv),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Rv(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class ZA{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ce(Cv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Pl(s)?Ce(Cv,"Ignoring IndexedDB error during garbage collection: ",s):await Ll(s)}await this.Vr(3e5)}))}}class JA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return ue.resolve(zd.ce);const r=new WA(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(jv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,u,f,p,y,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,s)))).next((S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(x=Date.now(),pl()<=it.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${S} documents in `+(x-y)+`ms
Total Duration: ${x-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function ej(i,e){return new JA(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.changes=new Na((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ue.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&ec(r.mutation,o,Wn.empty(),At.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,at()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=at()){const o=ya();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((u=>{let f=Yo();return u.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const r=ya();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,at())))}populateOverlays(e,s,r){const o=[];return r.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,r,o){let u=Oi();const f=Jo(),p=(function(){return Jo()})();return s.forEach(((y,x)=>{const _=r.get(x.key);o.has(x.key)&&(_===void 0||_.mutation instanceof Ur)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),ec(_.mutation,x,_.mutation.getFieldMask(),At.now())):f.set(x.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((x,_)=>f.set(x,_))),s.forEach(((x,_)=>p.set(x,new nj(_,f.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,s){const r=Jo();let o=new Dt(((f,p)=>f-p)),u=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((y=>{const x=s.get(y);if(x===null)return;let _=r.get(y)||Wn.empty();_=p.applyToLocalView(x,_),r.set(y,_);const S=(o.get(p.batchId)||at()).add(y);o=o.insert(p.batchId,S)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),x=y.key,_=y.value,S=R_();_.forEach((j=>{if(!u.has(j)){const H=V_(s.get(j),r.get(j));H!==null&&S.set(j,H),u=u.add(j)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,S))}return ue.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(f){return Ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):S_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-u.size):ue.resolve(ya());let p=ic,y=u;return f.next((x=>ue.forEach(x,((_,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((j=>{y=y.insert(_,j)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,y,x,at()))).next((_=>({batchId:p,changes:C_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ve(s)).next((r=>{let o=Yo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const u=s.collectionGroup;let f=Yo();return this.indexManager.getCollectionParents(e,u).next((p=>ue.forEach(p,(y=>{const x=(function(S,j){return new Ul(j,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(s,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((_=>{_.forEach(((S,j)=>{f=f.insert(S,j)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,u,o)))).next((f=>{u.forEach(((y,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,Tn.newInvalidDocument(_)))}));let p=Yo();return f.forEach(((y,x)=>{const _=u.get(y);_!==void 0&&ec(_.mutation,x,Wn.empty(),At.now()),Fd(s,x)&&(p=p.insert(y,x))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ue.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:ii(o.createTime)}})(s)),ue.resolve()}getNamedQuery(e,s){return ue.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:KA(o.bundledQuery),readTime:ii(o.readTime)}})(s)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.overlays=new Dt(Ve.comparator),this.qr=new Map}getOverlay(e,s){return ue.resolve(this.overlays.get(s))}getOverlays(e,s){const r=ya();return ue.forEach(s,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,u)=>{this.St(e,s,u)})),ue.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,s,r){const o=ya(),u=s.length+1,f=new Ve(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,x=y.getKey();if(!s.isPrefixOf(x.path))break;x.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let u=new Dt(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===s&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=ya(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const p=ya(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((x,_)=>p.set(x,_))),!(p.size()>=o)););return ue.resolve(p)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new EA(s,r));let u=this.qr.get(s);u===void 0&&(u=at(),this.qr.set(s,u)),this.qr.set(s,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Qr=new sn(cn.$r),this.Ur=new sn(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new cn(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new cn(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new Ve(new Tt([])),r=new cn(s,e),o=new cn(s,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ve(new Tt([])),r=new cn(s,e),o=new cn(s,e+1);let u=at();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const s=new cn(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ve.comparator(e.key,s.key)||rt(e.Yr,s.Yr)}static Kr(e,s){return rt(e.Yr,s.Yr)||Ve.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new sn(cn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new wA(u,s,r,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new cn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,s){return ue.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new cn(s,0),o=new cn(s,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const p=this.Xr(f.Yr);u.push(p)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new sn(rt);return s.forEach((o=>{const u=new cn(o,0),f=new cn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let u=r;Ve.isDocumentKey(u)||(u=u.child(""));const f=new cn(new Ve(u),0);let p=new sn(rt);return this.Zr.forEachWhile((y=>{const x=y.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(p=p.add(y.Yr)),!0)}),f),ue.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){mt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(s.mutations,(o=>{const u=new cn(o.key,s.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new cn(s,0),o=this.Zr.firstAfterOrEqual(r);return ue.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.ri=e,this.docs=(function(){return new Dt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ue.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(s))}getEntries(e,s){let r=Oi();return s.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),ue.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let u=Oi();const f=s.path,p=new Ve(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:x,value:{document:_}}=y.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||LN(VN(_),r)<=0||(o.has(_.key)||Fd(s,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,s,r,o){He(9500)}ii(e,s){return ue.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new cj(this)}getSize(e){return ue.resolve(this.size)}}class cj extends tj{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ue.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.persistence=e,this.si=new Na((s=>gg(s)),pg),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=Il.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),ue.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Il(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ue.resolve()}updateTargetData(e,s){return this.Pr(s),ue.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,s,r){let o=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return ue.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),ue.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ue.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return ue.resolve(r)}containsKey(e,s){return ue.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,s){this.ui={},this.overlays={},this.ci=new zd(0),this.li=!1,this.li=!0,this.hi=new aj,this.referenceDelegate=e(this),this.Pi=new uj(this),this.indexManager=new $A,this.remoteDocumentCache=(function(o){return new oj(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new YA(s),this.Ii=new ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new rj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new lj(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){Ce("MemoryPersistence","Starting transaction:",e);const o=new dj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,s){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class dj extends UN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new wg,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ue.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const o=Ve.fromPath(r);return this.gi(e,o).next((u=>{u||s.removeEntry(o,Ge.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ue.or([()=>ue.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Id{constructor(e,s){this.persistence=e,this.pi=new Na((r=>qN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=ej(this,s)}static mi(e,s){return new Id(e,s)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return ue.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?ue.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(r++,u.removeEntry(f,Ge.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=ud(e.data.value)),s}br(e,s,r){return ue.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ue.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=at(),o=at();for(const u of s.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Tg(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z2()?8:zN(Sn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const u={result:null};return this.ys(e,s).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,s,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new hj;return this.Ss(e,s,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>u.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(pl()<=it.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",yl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(pl()<=it.DEBUG&&Ce("QueryEngine","Query:",yl(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(pl()<=it.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",yl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(s))):ue.resolve())}ys(e,s){if(xv(s))return ue.resolve(null);let r=si(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=zm(s,null,"F"),r=si(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=at(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const x=this.Ds(s,p);return this.Cs(s,x,f,y.readTime)?this.ys(e,zm(s,null,"F")):this.vs(e,x,s,y)}))))})))))}ws(e,s,r,o){return xv(s)||o.isEqual(Ge.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(s,u);return this.Cs(s,f,r,o)?ue.resolve(null):(pl()<=it.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yl(s)),this.vs(e,f,s,ON(o,ic)).next((p=>p)))}))}Ds(e,s){let r=new sn(A_(e));return s.forEach(((o,u)=>{Fd(e,u)&&(r=r.add(u))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const u=e.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,s,r){return pl()<=it.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",yl(s)),this.ps.getDocumentsMatchingQuery(e,s,Rr.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(s.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="LocalStore",mj=3e8;class gj{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Dt(rt),this.xs=new Na((u=>gg(u)),pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function pj(i,e,s,r){return new gj(i,e,s,r)}async function X_(i,e){const s=$e(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let y=at();for(const x of o){f.push(x.batchId);for(const _ of x.mutations)y=y.add(_.key)}for(const x of u){p.push(x.batchId);for(const _ of x.mutations)y=y.add(_.key)}return s.localDocuments.getDocuments(r,y).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:p})))}))}))}function yj(i,e){const s=$e(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,x,_){const S=x.batch,j=S.keys();let H=ue.resolve();return j.forEach((Z=>{H=H.next((()=>_.getEntry(y,Z))).next((X=>{const P=x.docVersions.get(Z);mt(P!==null,48541),X.version.compareTo(P)<0&&(S.applyToRemoteDocument(X,x),X.isValidDocument()&&(X.setReadTime(x.commitVersion),_.addEntry(X)))}))})),H.next((()=>p.mutationQueue.removeMutationBatch(y,S)))})(s,r,e,u).next((()=>u.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=at();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(y=y.add(p.batch.mutations[x].key));return y})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function W_(i){const e=$e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function xj(i,e){const s=$e(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,S)=>{const j=o.get(S);if(!j)return;p.push(s.Pi.removeMatchingKeys(u,_.removedDocuments,S).next((()=>s.Pi.addMatchingKeys(u,_.addedDocuments,S))));let H=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?H=H.withResumeToken(xn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):_.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(_.resumeToken,r)),o=o.insert(S,H),(function(X,P,ee){return X.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=mj?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(j,H,_)&&p.push(s.Pi.updateTargetData(u,H))}));let y=Oi(),x=at();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push(vj(u,f,e.documentUpdates).next((_=>{y=_.ks,x=_.qs}))),!r.isEqual(Ge.min())){const _=s.Pi.getLastRemoteSnapshotVersion(u).next((S=>s.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(_)}return ue.waitFor(p).next((()=>f.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,y,x))).next((()=>y))})).then((u=>(s.Ms=o,u)))}function vj(i,e,s){let r=at(),o=at();return s.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Oi();return s.forEach(((p,y)=>{const x=u.get(p);y.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Ge.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!x.isValidDocument()||y.version.compareTo(x.version)>0||y.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):Ce(Sg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function bj(i,e){const s=$e(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function _j(i,e){const s=$e(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((u=>u?(o=u,ue.resolve(o)):s.Pi.allocateTargetId(r).next((f=>(o=new Er(e,f,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Gm(i,e,s){const r=$e(i),o=r.Ms.get(e),u=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Pl(f))throw f;Ce(Sg,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Iv(i,e,s){const r=$e(i);let o=Ge.min(),u=at();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,x,_){const S=$e(y),j=S.xs.get(_);return j!==void 0?ue.resolve(S.Ms.get(j)):S.Pi.getTargetData(x,_)})(r,f,si(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,s?o:Ge.min(),s?u:at()))).next((p=>(wj(r,lA(e),p),{documents:p,Qs:u})))))}function wj(i,e,s){let r=i.Os.get(e)||Ge.min();s.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class kv{constructor(){this.activeTargetIds=fA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ej{constructor(){this.Mo=new kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kv,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="ConnectivityMonitor";class Mv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ce(Dv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ce(Dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Ym(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",Sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Sd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,u){const f=Ym(),p=this.zo(e,s.toUriEncodedString());Ce(ym,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:x}=new URL(p),_=Dl(x);return this.Jo(e,p,y,r,_).then((S=>(Ce(ym,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw Al(ym,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(e,s,r,o,u,f){return this.Go(e,s,r,o,u)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,s){const r=Sj[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class jj extends Nj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,u){const f=Ym();return new Promise(((p,y)=>{const x=new e_;x.setWithCredentials(!0),x.listenOnce(t_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case cd.NO_ERROR:const S=x.getResponseJson();Ce(wn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case cd.TIMEOUT:Ce(wn,`RPC '${e}' ${f} timed out`),y(new Ae(oe.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const j=x.getStatus();if(Ce(wn,`RPC '${e}' ${f} failed with status:`,j,"response text:",x.getResponseText()),j>0){let H=x.getResponseJson();Array.isArray(H)&&(H=H[0]);const Z=H?.error;if(Z&&Z.status&&Z.message){const X=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(te)>=0?te:oe.UNKNOWN})(Z.status);y(new Ae(X,Z.message))}else y(new Ae(oe.UNKNOWN,"Server responded with status "+x.getStatus()))}else y(new Ae(oe.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ce(wn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Ce(wn,`RPC '${e}' ${f} sending request:`,o),x.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=Ym(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=i_(),p=s_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(y.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,s,r),y.encodeInitMessageHeaders=!0;const _=u.join("");Ce(wn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const S=f.createWebChannel(_,y);this.I_(S);let j=!1,H=!1;const Z=new Aj({Yo:P=>{H?Ce(wn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(j||(Ce(wn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),j=!0),Ce(wn,`RPC '${e}' stream ${o} sending:`,P),S.send(P))},Zo:()=>S.close()}),X=(P,ee,te)=>{P.listen(ee,(ye=>{try{te(ye)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return X(S,Go.EventType.OPEN,(()=>{H||(Ce(wn,`RPC '${e}' stream ${o} transport opened.`),Z.o_())})),X(S,Go.EventType.CLOSE,(()=>{H||(H=!0,Ce(wn,`RPC '${e}' stream ${o} transport closed`),Z.a_(),this.E_(S))})),X(S,Go.EventType.ERROR,(P=>{H||(H=!0,Al(wn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),Z.a_(new Ae(oe.UNAVAILABLE,"The operation could not be completed")))})),X(S,Go.EventType.MESSAGE,(P=>{if(!H){const ee=P.data[0];mt(!!ee,16349);const te=ee,ye=te?.error||te[0]?.error;if(ye){Ce(wn,`RPC '${e}' stream ${o} received error:`,ye);const fe=ye.status;let Ee=(function(N){const C=Zt[N];if(C!==void 0)return P_(C)})(fe),ge=ye.message;Ee===void 0&&(Ee=oe.INTERNAL,ge="Unknown error status: "+fe+" with message "+ye.message),H=!0,Z.a_(new Ae(Ee,ge)),S.close()}else Ce(wn,`RPC '${e}' stream ${o} received:`,ee),Z.u_(ee)}})),X(p,n_.STAT_EVENT,(P=>{P.stat===Dm.PROXY?Ce(wn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Dm.NOPROXY&&Ce(wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(i){return new kA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,s,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&Ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class J_{constructor(e,s,r,o,u,f,p,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===oe.RESOURCE_EXHAUSTED?(Mi(s.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new Ae(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Ce(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cj extends J_{constructor(e,s,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=OA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ge.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ge.min():f.readTime?ii(f.readTime):Ge.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=Fm(this.serializer),s.addTarget=(function(u,f){let p;const y=f.target;if(p=Pm(y)?{documents:PA(u,y)}:{query:UA(u,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=B_(u,f.resumeToken);const x=Bm(u,f.expectedCount);x!==null&&(p.expectedCount=x)}else if(f.snapshotVersion.compareTo(Ge.min())>0){p.readTime=Rd(u,f.snapshotVersion.toTimestamp());const x=Bm(u,f.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=BA(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=Fm(this.serializer),s.removeTarget=e,this.q_(s)}}class Rj extends J_{constructor(e,s,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=LA(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=Fm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>VA(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{}class kj extends Ij{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,qm(s,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(oe.UNKNOWN,u.toString())}))}Ho(e,s,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,qm(s,r),o,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ae(oe.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Dj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(s),this.aa=!1):Ce("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class Mj{constructor(e,s,r,o,u){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Aa(this)&&(Ce(Sa,"Restarting streams for network reachability change."),await(async function(y){const x=$e(y);x.Ea.add(4),await bc(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Xd(x)})(this))}))})),this.Ra=new Dj(r,o)}}async function Xd(i){if(Aa(i))for(const e of i.da)await e(!0)}async function bc(i){for(const e of i.da)await e(!1)}function e1(i,e){const s=$e(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Cg(s)?jg(s):zl(s).O_()&&Ag(s,e))}function Ng(i,e){const s=$e(i),r=zl(s);s.Ia.delete(e),r.O_()&&t1(s,e),s.Ia.size===0&&(r.O_()?r.L_():Aa(s)&&s.Ra.set("Unknown"))}function Ag(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}zl(i).Y_(e)}function t1(i,e){i.Va.Ue(e),zl(i).Z_(e)}function jg(i){i.Va=new jA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),zl(i).start(),i.Ra.ua()}function Cg(i){return Aa(i)&&!zl(i).x_()&&i.Ia.size>0}function Aa(i){return $e(i).Ea.size===0}function n1(i){i.Va=void 0}async function Oj(i){i.Ra.set("Online")}async function Vj(i){i.Ia.forEach(((e,s)=>{Ag(i,e)}))}async function Lj(i,e){n1(i),Cg(i)?(i.Ra.ha(e),jg(i)):i.Ra.set("Unknown")}async function Pj(i,e,s){if(i.Ra.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){Ce(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kd(i,r)}else if(e instanceof fd?i.Va.Ze(e):e instanceof U_?i.Va.st(e):i.Va.tt(e),!s.isEqual(Ge.min()))try{const r=await W_(i.localStore);s.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((y,x)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,x)=>{const _=u.Ia.get(y);if(!_)return;u.Ia.set(y,_.withResumeToken(xn.EMPTY_BYTE_STRING,_.snapshotVersion)),t1(u,y);const S=new Er(_.target,y,x,_.sequenceNumber);Ag(u,S)})),u.remoteSyncer.applyRemoteEvent(p)})(i,s)}catch(r){Ce(Sa,"Failed to raise snapshot:",r),await kd(i,r)}}async function kd(i,e,s){if(!Pl(e))throw e;i.Ea.add(1),await bc(i),i.Ra.set("Offline"),s||(s=()=>W_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ce(Sa,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Xd(i)}))}function s1(i,e){return e().catch((s=>kd(i,s,e)))}async function Wd(i){const e=$e(i),s=Mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;Uj(e);)try{const o=await bj(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,zj(e,o)}catch(o){await kd(e,o)}i1(e)&&r1(e)}function Uj(i){return Aa(i)&&i.Ta.length<10}function zj(i,e){i.Ta.push(e);const s=Mr(i);s.O_()&&s.X_&&s.ea(e.mutations)}function i1(i){return Aa(i)&&!Mr(i).x_()&&i.Ta.length>0}function r1(i){Mr(i).start()}async function Bj(i){Mr(i).ra()}async function qj(i){const e=Mr(i);for(const s of i.Ta)e.ea(s.mutations)}async function Hj(i,e,s){const r=i.Ta.shift(),o=vg.from(r,e,s);await s1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Wd(i)}async function Fj(i,e){e&&Mr(i).X_&&await(async function(r,o){if((function(f){return SA(f)&&f!==oe.ABORTED})(o.code)){const u=r.Ta.shift();Mr(r).B_(),await s1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Wd(r)}})(i,e),i1(i)&&r1(i)}async function Vv(i,e){const s=$e(i);s.asyncQueue.verifyOperationInProgress(),Ce(Sa,"RemoteStore received new credentials");const r=Aa(s);s.Ea.add(3),await bc(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Xd(s)}async function Gj(i,e){const s=$e(i);e?(s.Ea.delete(2),await Xd(s)):e||(s.Ea.add(2),await bc(s),s.Ra.set("Unknown"))}function zl(i){return i.ma||(i.ma=(function(s,r,o){const u=$e(s);return u.sa(),new Cj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Oj.bind(null,i),t_:Vj.bind(null,i),r_:Lj.bind(null,i),H_:Pj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Cg(i)?jg(i):i.Ra.set("Unknown")):(await i.ma.stop(),n1(i))}))),i.ma}function Mr(i){return i.fa||(i.fa=(function(s,r,o){const u=$e(s);return u.sa(),new Rj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Bj.bind(null,i),r_:Fj.bind(null,i),ta:qj.bind(null,i),na:Hj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Wd(i)):(await i.fa.stop(),i.Ta.length>0&&(Ce(Sa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,s,r,o,u){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,u){const f=Date.now()+r,p=new Rg(e,s,f,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(i,e){if(Mi("AsyncQueue",`${e}: ${i}`),Pl(i))return new Ae(oe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Ve.comparator(s.key,r.key):(s,r)=>Ve.comparator(s.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new Tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ga=new Dt(Ve.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class kl{constructor(e,s,r,o,u,f,p,y,x){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=x}static fromInitialDocuments(e,s,r,o,u){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new kl(e,s,Tl.emptySet(s),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Kj{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=$e(s),u=o.queries;o.queries=Pv(),u.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new Ae(oe.ABORTED,"Firestore shutting down"))}}function Pv(){return new Na((i=>N_(i)),Hd)}async function a1(i,e){const s=$e(i);let r=3;const o=e.query;let u=s.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new Yj,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Ig(f,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,u),u.Sa.push(e),e.va(s.onlineState),u.wa&&e.Fa(u.wa)&&kg(s)}async function l1(i,e){const s=$e(i),r=e.query;let o=3;const u=s.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function $j(i,e){const s=$e(i);let r=!1;for(const o of e){const u=o.query,f=s.queries.get(u);if(f){for(const p of f.Sa)p.Fa(o)&&(r=!0);f.wa=o}}r&&kg(s)}function Qj(i,e,s){const r=$e(i),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(s);r.queries.delete(e)}function kg(i){i.Ca.forEach((e=>{e.next()}))}var Km,Uv;(Uv=Km||(Km={})).Ma="default",Uv.Cache="cache";class o1{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Xj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=A_(e),this.tu=new Tl(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new Lv,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,S)=>{const j=o.get(_),H=Fd(this.query,S)?S:null,Z=!!j&&this.mutatedKeys.has(j.key),X=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let P=!1;j&&H?j.data.isEqual(H.data)?Z!==X&&(r.track({type:3,doc:H}),P=!0):this.su(j,H)||(r.track({type:2,doc:H}),P=!0,(y&&this.eu(H,y)>0||x&&this.eu(H,x)<0)&&(p=!0)):!j&&H?(r.track({type:0,doc:H}),P=!0):j&&!H&&(r.track({type:1,doc:j}),P=!0,(y||x)&&(p=!0)),P&&(H?(f=f.add(H),u=X?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,S)=>(function(H,Z){const X=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:P})}};return X(H)-X(Z)})(_.type,S.type)||this.eu(_.doc,S.doc))),this.ou(r),o=o??!1;const p=s&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,x=y!==this.Za;return this.Za=y,f.length!==0||x?{snapshot:new kl(this.query,e.tu,u,f,e.mutatedKeys,y===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new u1(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new c1(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=at();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return kl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class Wj{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class Zj{constructor(e){this.key=e,this.hu=!1}}class Jj{constructor(e,s,r,o,u,f){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Na((p=>N_(p)),Hd),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(Ve.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=Il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eC(i,e,s=!0){const r=p1(i);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await d1(r,e,s,!0),o}async function tC(i,e){const s=p1(i);await d1(s,e,!0,!1)}async function d1(i,e,s,r){const o=await _j(i.localStore,si(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,s);let p;return r&&(p=await nC(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&s&&e1(i.remoteStore,o),p}async function nC(i,e,s,r,o){i.pu=(S,j,H)=>(async function(X,P,ee,te){let ye=P.view.ru(ee);ye.Cs&&(ye=await Iv(X.localStore,P.query,!1).then((({documents:R})=>P.view.ru(R,ye))));const fe=te&&te.targetChanges.get(P.targetId),Ee=te&&te.targetMismatches.get(P.targetId)!=null,ge=P.view.applyChanges(ye,X.isPrimaryClient,fe,Ee);return Bv(X,P.targetId,ge.au),ge.snapshot})(i,S,j,H);const u=await Iv(i.localStore,e,!0),f=new Xj(e,u.Qs),p=f.ru(u.documents),y=vc.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),x=f.applyChanges(p,i.isPrimaryClient,y);Bv(i,s,x.au);const _=new Wj(e,s,f);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),x.snapshot}async function sC(i,e,s){const r=$e(i),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Hd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Gm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Ng(r.remoteStore,o.targetId),$m(r,o.targetId)})).catch(Ll)):($m(r,o.targetId),await Gm(r.localStore,o.targetId,!0))}async function iC(i,e){const s=$e(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Ng(s.remoteStore,r.targetId))}async function rC(i,e,s){const r=hC(i);try{const o=await(function(f,p){const y=$e(f),x=At.now(),_=p.reduce(((H,Z)=>H.add(Z.key)),at());let S,j;return y.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let Z=Oi(),X=at();return y.Ns.getEntries(H,_).next((P=>{Z=P,Z.forEach(((ee,te)=>{te.isValidDocument()||(X=X.add(ee))}))})).next((()=>y.localDocuments.getOverlayedDocuments(H,Z))).next((P=>{S=P;const ee=[];for(const te of p){const ye=bA(te,S.get(te.key).overlayedDocument);ye!=null&&ee.push(new Ur(te.key,ye,x_(ye.value.mapValue),Rn.exists(!0)))}return y.mutationQueue.addMutationBatch(H,x,ee,p)})).next((P=>{j=P;const ee=P.applyToLocalDocumentSet(S,X);return y.documentOverlayCache.saveOverlays(H,P.batchId,ee)}))})).then((()=>({batchId:j.batchId,changes:C_(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,p,y){let x=f.Vu[f.currentUser.toKey()];x||(x=new Dt(rt)),x=x.insert(p,y),f.Vu[f.currentUser.toKey()]=x})(r,o.batchId,s),await _c(r,o.changes),await Wd(r.remoteStore)}catch(o){const u=Ig(o,"Failed to persist write");s.reject(u)}}async function h1(i,e){const s=$e(i);try{const r=await xj(s.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=s.Au.get(u);f&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?mt(f.hu,14607):o.removedDocuments.size>0&&(mt(f.hu,42227),f.hu=!1))})),await _c(s,r,e)}catch(r){await Ll(r)}}function zv(i,e,s){const r=$e(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const y=$e(f);y.onlineState=p;let x=!1;y.queries.forEach(((_,S)=>{for(const j of S.Sa)j.va(p)&&(x=!0)})),x&&kg(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aC(i,e,s){const r=$e(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new Dt(Ve.comparator);f=f.insert(u,Tn.newNoDocument(u,Ge.min()));const p=at().add(u),y=new $d(Ge.min(),new Map,new Dt(rt),f,p);await h1(r,y),r.du=r.du.remove(u),r.Au.delete(e),Mg(r)}else await Gm(r.localStore,e,!1).then((()=>$m(r,e,s))).catch(Ll)}async function lC(i,e){const s=$e(i),r=e.batch.batchId;try{const o=await yj(s.localStore,e);m1(s,r,null),f1(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await _c(s,o)}catch(o){await Ll(o)}}async function oC(i,e,s){const r=$e(i);try{const o=await(function(f,p){const y=$e(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return y.mutationQueue.lookupMutationBatch(x,p).next((S=>(mt(S!==null,37113),_=S.keys(),y.mutationQueue.removeMutationBatch(x,S)))).next((()=>y.mutationQueue.performConsistencyCheck(x))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(x,_,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>y.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);m1(r,e,s),f1(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await _c(r,o)}catch(o){await Ll(o)}}function f1(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function m1(i,e,s){const r=$e(i);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(s?u.reject(s):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function $m(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||g1(i,r)}))}function g1(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(Ng(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),Mg(i))}function Bv(i,e,s){for(const r of s)r instanceof c1?(i.Ru.addReference(r.key,e),cC(i,r)):r instanceof u1?(Ce(Dg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||g1(i,r.key)):He(19791,{wu:r})}function cC(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(Ce(Dg,"New document in limbo: "+s),i.Eu.add(r),Mg(i))}function Mg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new Ve(Tt.fromString(e)),r=i.fu.next();i.Au.set(r,new Zj(s)),i.du=i.du.insert(s,r),e1(i.remoteStore,new Er(si(yg(s.path)),r,"TargetPurposeLimboResolution",zd.ce))}}async function _c(i,e,s){const r=$e(i),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,s).then((x=>{if((x||s)&&r.isPrimaryClient){const _=x?!x.fromCache:s?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(x){o.push(x);const _=Tg.As(y.targetId,x);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(y,x){const _=$e(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ue.forEach(x,(j=>ue.forEach(j.Es,(H=>_.persistence.referenceDelegate.addReference(S,j.targetId,H))).next((()=>ue.forEach(j.ds,(H=>_.persistence.referenceDelegate.removeReference(S,j.targetId,H)))))))))}catch(S){if(!Pl(S))throw S;Ce(Sg,"Failed to update sequence numbers: "+S)}for(const S of x){const j=S.targetId;if(!S.fromCache){const H=_.Ms.get(j),Z=H.snapshotVersion,X=H.withLastLimboFreeSnapshotVersion(Z);_.Ms=_.Ms.insert(j,X)}}})(r.localStore,u))}async function uC(i,e){const s=$e(i);if(!s.currentUser.isEqual(e)){Ce(Dg,"User change. New user:",e.toKey());const r=await X_(s.localStore,e);s.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new Ae(oe.CANCELLED,f))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(s,r.Ls)}}function dC(i,e){const s=$e(i),r=s.Au.get(e);if(r&&r.hu)return at().add(r.key);{let o=at();const u=s.Iu.get(e);if(!u)return o;for(const f of u){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function p1(i){const e=$e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.Pu.H_=$j.bind(null,e.eventManager),e.Pu.yu=Qj.bind(null,e.eventManager),e}function hC(i){const e=$e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oC.bind(null,e),e}class Dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return pj(this.persistence,new fj,e.initialUser,this.serializer)}Cu(e){return new Q_(Eg.mi,this.serializer)}Du(e){return new Ej}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dd.provider={build:()=>new Dd};class fC extends Dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){mt(this.persistence.referenceDelegate instanceof Id,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZA(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Q_((r=>Id.mi(r,s)),this.serializer)}}class Qm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uC.bind(null,this.syncEngine),await Gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kj})()}createDatastore(e){const s=Qd(e.databaseInfo.databaseId),r=(function(u){return new jj(u)})(e.databaseInfo);return(function(u,f,p,y){return new kj(u,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,u,f,p){return new Mj(r,o,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>zv(this.syncEngine,s,0)),(function(){return Mv.v()?new Mv:new Tj})())}createSyncEngine(e,s){return(function(o,u,f,p,y,x,_){const S=new Jj(o,u,f,p,y,x);return _&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=$e(s);Ce(Sa,"RemoteStore shutting down."),r.Ea.add(5),await bc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class mC{constructor(e,s,r,o,u){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Ce(Or,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Ce(Or,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Ig(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vm(i,e){i.asyncQueue.verifyOperationInProgress(),Ce(Or,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await X_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function qv(i,e){i.asyncQueue.verifyOperationInProgress();const s=await gC(i);Ce(Or,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Vv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Vv(e.remoteStore,o))),i._onlineComponents=e}async function gC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ce(Or,"Using user provided OfflineComponentProvider");try{await vm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Al("Error using user provided cache. Falling back to memory cache: "+s),await vm(i,new Dd)}}else Ce(Or,"Using default OfflineComponentProvider"),await vm(i,new fC(void 0));return i._offlineComponents}async function x1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ce(Or,"Using user provided OnlineComponentProvider"),await qv(i,i._uninitializedComponentsProvider._online)):(Ce(Or,"Using default OnlineComponentProvider"),await qv(i,new Qm))),i._onlineComponents}function pC(i){return x1(i).then((e=>e.syncEngine))}async function Xm(i){const e=await x1(i),s=e.eventManager;return s.onListen=eC.bind(null,e.syncEngine),s.onUnlisten=sC.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=tC.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=iC.bind(null,e.syncEngine),s}function yC(i,e,s={}){const r=new jr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,x){const _=new y1({next:j=>{_.Nu(),f.enqueueAndForget((()=>l1(u,S))),j.fromCache&&y.source==="server"?x.reject(new Ae(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(j)},error:j=>x.reject(j)}),S=new o1(p,_,{includeMetadataChanges:!0,qa:!0});return a1(u,S)})(await Xm(i),i.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firestore.googleapis.com",Fv=!0;class Gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b1,this.ssl=Fv}else this.host=e.host,this.ssl=e.ssl??Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XA)throw new Ae(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new TN;switch(r.type){case"firstParty":return new jN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Hv.get(s);r&&(Ce("ComponentProvider","Removing Datastore"),Hv.delete(s),r.terminate())})(this),Promise.resolve()}}function xC(i,e,s,r={}){i=Zn(i,Zd);const o=Dl(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${s}`;o&&(db(`https://${p}`),hb("Firestore",!0)),u.host!==b1&&u.host!==p&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:o,emulatorOptions:r};if(!ba(y,f)&&(i._setSettings(y),r.mockUserToken)){let x,_;if(typeof r.mockUserToken=="string")x=r.mockUserToken,_=En.MOCK_USER;else{x=I2(r.mockUserToken,i._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new Ae(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new En(S)}i._authCredentials=new SN(new a_(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Bt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(yc(s,Bt._jsonSchema))return new Bt(e,r||null,new Ve(Tt.fromString(s.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:en("string",Bt._jsonSchemaVersion),referencePath:en("string")};class Cr extends zr{constructor(e,s,r){super(e,s,yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Ve(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function jt(i,e,...s){if(i=qt(i),l_("collection","path",e),i instanceof Zd){const r=Tt.fromString(e,...s);return iv(r),new Cr(i,null,r)}{if(!(i instanceof Bt||i instanceof Cr))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...s));return iv(r),new Cr(i.firestore,null,r)}}function tn(i,e,...s){if(i=qt(i),arguments.length===1&&(e=dg.newId()),l_("doc","path",e),i instanceof Zd){const r=Tt.fromString(e,...s);return sv(r),new Bt(i,null,new Ve(r))}{if(!(i instanceof Bt||i instanceof Cr))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...s));return sv(r),new Bt(i.firestore,i instanceof Cr?i.converter:null,new Ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";class Kv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z_(this,"async_queue_retry"),this._c=()=>{const r=xm();r&&Ce(Yv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=xm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=xm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pl(e))throw e;Ce(Yv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",$v(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Rg.createAndSchedule(this,e,s,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&He(47125,{Pc:$v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function $v(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Vi extends Zd{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Kv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function vC(i,e){const s=typeof i=="object"?i:pb(),r=typeof i=="string"?i:Sd,o=tg(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=C2("firestore");u&&xC(o,...u)}return o}function Jd(i){if(i._terminated)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||bC(i),i._firestoreClient}function bC(i){const e=i._freezeSettings(),s=(function(o,u,f,p){return new GN(o,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,v1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new mC(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(xn.fromBase64String(e))}catch(s){throw new Ae(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new fs(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,fs._jsonSchema))return fs.fromBase64String(e.bytes)}}fs._jsonSchemaVersion="firestore/bytes/1.0",fs._jsonSchema={type:en("string",fs._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Ae(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Ae(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Ae(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(yc(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:en("string",ri._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new ai(e.vectorValues);throw new Ae(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ai._jsonSchemaVersion="firestore/vectorValue/1.0",ai._jsonSchema={type:en("string",ai._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^__.*__$/;class wC{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,s,this.fieldTransforms):new xc(e,this.data,s,this.fieldTransforms)}}class _1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Ur(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function w1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:i})}}class Vg{constructor(e,s,r,o,u,f){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w1(this.Ac)&&_C.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EC{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Qd(e)}Cc(e,s,r,o=!1){return new Vg({Ac:e,methodName:s,Dc:r,path:yn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(i){const e=i._freezeSettings(),s=Qd(i._databaseId);return new EC(i._databaseId,!!e.ignoreUndefinedProperties,s)}function Lg(i,e,s,r,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,s,o);Pg("Data must be an object, but it was:",f,r);const p=S1(r,f);let y,x;if(u.merge)y=new Wn(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const S of u.mergeFields){const j=Wm(e,S,s);if(!f.contains(j))throw new Ae(oe.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);A1(_,j)||_.push(j)}y=new Wn(_),x=f.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,x=f.fieldTransforms;return new wC(new Bn(p),y,x)}class eh extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function E1(i,e,s,r){const o=i.Cc(1,e,s);Pg("Data must be an object, but it was:",o,r);const u=[],f=Bn.empty();Pr(r,((y,x)=>{const _=Ug(e,y,s);x=qt(x);const S=o.yc(_);if(x instanceof eh)u.push(_);else{const j=Tc(x,S);j!=null&&(u.push(_),f.set(_,j))}}));const p=new Wn(u);return new _1(f,p,o.fieldTransforms)}function T1(i,e,s,r,o,u){const f=i.Cc(1,e,s),p=[Wm(e,r,s)],y=[o];if(u.length%2!=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(Wm(e,u[j])),y.push(u[j+1]);const x=[],_=Bn.empty();for(let j=p.length-1;j>=0;--j)if(!A1(x,p[j])){const H=p[j];let Z=y[j];Z=qt(Z);const X=f.yc(H);if(Z instanceof eh)x.push(H);else{const P=Tc(Z,X);P!=null&&(x.push(H),_.set(H,P))}}const S=new Wn(x);return new _1(_,S,f.fieldTransforms)}function TC(i,e,s,r=!1){return Tc(s,i.Cc(r?4:3,e))}function Tc(i,e){if(N1(i=qt(i)))return Pg("Unsupported field value:",e,i),S1(i,e);if(i instanceof Og)return(function(r,o){if(!w1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const p of r){let y=Tc(p,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,o){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=At.fromDate(r);return{timestampValue:Rd(o.serializer,u)}}if(r instanceof At){const u=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(o.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fs)return{bytesValue:B_(o.serializer,r._byteString)};if(r instanceof Bt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:_g(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ai)return(function(f,p){return{mapValue:{fields:{[p_]:{stringValue:y_},[Nd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw p.Sc("VectorValues must only contain numeric values.");return xg(p.serializer,x)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Ud(r)}`)})(i,e)}function S1(i,e){const s={};return u_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(i,((r,o)=>{const u=Tc(o,e.mc(r));u!=null&&(s[r]=u)})),{mapValue:{fields:s}}}function N1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof At||i instanceof ri||i instanceof fs||i instanceof Bt||i instanceof Og||i instanceof ai)}function Pg(i,e,s){if(!N1(s)||!o_(s)){const r=Ud(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Wm(i,e,s){if((e=qt(e))instanceof wc)return e._internalPath;if(typeof e=="string")return Ug(i,e);throw Md("Field path arguments must be of type string or ",i,!1,void 0,s)}const SC=new RegExp("[~\\*/\\[\\]]");function Ug(i,e,s){if(e.search(SC)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new wc(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Md(i,e,s,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Ae(oe.INVALID_ARGUMENT,p+i+y)}function A1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,r,o,u){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(th("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class NC extends j1{data(){return super.data()}}function th(i,e){return typeof e=="string"?Ug(i,e):e instanceof wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ae(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class R1 extends zg{}function Jn(i,e,...s){let r=[];e instanceof zg&&r.push(e),r=r.concat(s),(function(u){const f=u.filter((y=>y instanceof Bg)).length,p=u.filter((y=>y instanceof nh)).length;if(f>1||f>0&&p>0)throw new Ae(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class nh extends R1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new nh(e,s,r)}_apply(e){const s=this._parse(e);return I1(e._query,s),new zr(e.firestore,e.converter,Um(e._query,s))}_parse(e){const s=Ec(e.firestore);return(function(u,f,p,y,x,_,S){let j;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Wv(S,_);const Z=[];for(const X of S)Z.push(Xv(y,u,X));j={arrayValue:{values:Z}}}else j=Xv(y,u,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Wv(S,_),j=TC(p,f,S,_==="in"||_==="not-in");return Jt.create(x,_,j)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function AC(i,e,s){const r=e,o=th("where",i);return nh._create(o,r,s)}class Bg extends zg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Bg(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Is.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,u){let f=o;const p=u.getFlattenedFilters();for(const y of p)I1(f,y),f=Um(f,y)})(e._query,s),new zr(e.firestore,e.converter,Um(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends R1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new qg(e,s)}_apply(e){const s=(function(o,u,f){if(o.startAt!==null)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oc(u,f)})(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Ul(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function gs(i,e="asc"){const s=e,r=th("orderBy",i);return qg._create(r,s)}function Xv(i,e,s){if(typeof(s=qt(s))=="string"){if(s==="")throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&s.indexOf("/")!==-1)throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(Tt.fromString(s));if(!Ve.isDocumentKey(r))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hv(i,new Ve(r))}if(s instanceof Bt)return hv(i,s._key);throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(s)}.`)}function Wv(i,e){if(!Array.isArray(i)||i.length===0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(i,e){const s=(function(o,u){for(const f of o)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Ae(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class jC{convertValue(e,s="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Pr(e,((o,u)=>{r[o]=this.convertValue(u,s)})),r}convertVectorValue(e){const s=e.fields?.[Nd].arrayValue?.values?.map((r=>zt(r.doubleValue)));return new ai(s)}convertGeoPoint(e){return new ri(zt(e.latitude),zt(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=qd(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const s=Ir(e);return new At(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Tt.fromString(e);mt(K_(r),9688,{name:e});const o=new ac(r.get(1),r.get(3)),u=new Ve(r.popFirst(5));return o.isEqual(s)||Mi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(i,e,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(e,s):i.toFirestore(e):e,r}class $o{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends j1{constructor(e,s,r,o,u,f){super(e,s,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=xa._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:en("string",xa._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class md extends xa{data(e={}){return super.data(e)}}class va{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new $o(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new md(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Ae(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const y=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $o(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $o(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,_=-1;return p.type!==0&&(x=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:CC(p.type),doc:y,oldIndex:x,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:i})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:en("string",va._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class Fg extends jC{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,s)}}function RC(i){i=Zn(i,zr);const e=Zn(i.firestore,Vi),s=Jd(e),r=new Fg(e);return C1(i._query),yC(s,i._query).then((o=>new va(e,r,i,o)))}function IC(i,e,s){i=Zn(i,Bt);const r=Zn(i.firestore,Vi),o=Hg(i.converter,e,s);return Sc(r,[Lg(Ec(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,Rn.none())])}function oi(i,e,s,...r){i=Zn(i,Bt);const o=Zn(i.firestore,Vi),u=Ec(o);let f;return f=typeof(e=qt(e))=="string"||e instanceof wc?T1(u,"updateDoc",i._key,e,s,r):E1(u,"updateDoc",i._key,e),Sc(o,[f.toMutation(i._key,Rn.exists(!0))])}function Vr(i){return Sc(Zn(i.firestore,Vi),[new Kd(i._key,Rn.none())])}function Ii(i,e){const s=Zn(i.firestore,Vi),r=tn(i),o=Hg(i.converter,e);return Sc(s,[Lg(Ec(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then((()=>r))}function Cn(i,...e){i=qt(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Qv(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Qv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,p;if(i instanceof Bt)f=Zn(i.firestore,Vi),p=yg(i._key.path),u={next:y=>{e[r]&&e[r](kC(f,i,y))},error:e[r+1],complete:e[r+2]};else{const y=Zn(i,zr);f=Zn(y.firestore,Vi),p=y._query;const x=new Fg(f);u={next:_=>{e[r]&&e[r](new va(f,x,y,_))},error:e[r+1],complete:e[r+2]},C1(i._query)}return(function(x,_,S,j){const H=new y1(j),Z=new o1(_,H,S);return x.asyncQueue.enqueueAndForget((async()=>a1(await Xm(x),Z))),()=>{H.Nu(),x.asyncQueue.enqueueAndForget((async()=>l1(await Xm(x),Z)))}})(Jd(f),p,o,u)}function Sc(i,e){return(function(r,o){const u=new jr;return r.asyncQueue.enqueueAndForget((async()=>rC(await pC(r),o,u))),u.promise})(Jd(i),e)}function kC(i,e,s){const r=s.docs.get(e._key),o=new Fg(i);return new xa(i,o,e._key,r,new $o(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Ec(e)}set(e,s,r){this._verifyNotCommitted();const o=bm(e,this._firestore),u=Hg(o.converter,s,r),f=Lg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,Rn.none())),this}update(e,s,r,...o){this._verifyNotCommitted();const u=bm(e,this._firestore);let f;return f=typeof(s=qt(s))=="string"||s instanceof wc?T1(this._dataReader,"WriteBatch.update",u._key,s,r,o):E1(this._dataReader,"WriteBatch.update",u._key,s),this._mutations.push(f.toMutation(u._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=bm(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(s._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(i,e){if((i=qt(i)).firestore!==e)throw new Ae(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i){return Jd(i=Zn(i,Vi)),new DC(i,(e=>Sc(i,e)))}(function(e,s=!0){(function(o){Vl=o})(Ml),Nl(new _a("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new Vi(new NN(r.getProvider("auth-internal")),new CN(f,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ae(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(x.options.projectId,_)})(f,o),f);return u={useFetchStreams:s,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Nr(Jx,ev,e),Nr(Jx,ev,"esm2020")})();const OC={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},k1=gb(OC),ms=bN(k1),Ye=vC(k1),_m={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function VC(){const[i,e]=J.useState(!0),[s,r]=J.useState(""),[o,u]=J.useState(""),[f,p]=J.useState(""),[y,x]=J.useState(""),[_,S]=J.useState(!1),j=async X=>{X.preventDefault(),p(""),x(""),S(!0);try{if(i)await rS(ms,s,o);else{const ee=(await iS(ms,s,o)).user;await IC(tn(Ye,"users",ee.uid),{email:ee.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(P){p(Z(P.code))}finally{S(!1)}},H=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await sS(ms,s),x("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(X){p(Z(X.code))}},Z=X=>{switch(X){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+X}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),y&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:y}),c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:X=>r(X.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:X=>u(X.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:H,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(_m.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const xr={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},LC=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(p=>p.value))||100,u=i.map((p,y)=>{const x=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),S=isNaN(x)?r:x,j=isNaN(_)?e-r:_;return`${S},${j}`}).join(" "),f=`${u} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:u,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((p,y)=>{const x=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),S=isNaN(x)?r:x,j=isNaN(_)?e-r:_;return c.jsx("circle",{cx:S,cy:j,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},y)})]})},sd=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(xr.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function Zv({onNavigate:i=()=>{}}){const[e,s]=J.useState(null),[r,o]=J.useState(!0),[u,f]=J.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,y]=J.useState([]),[x,_]=J.useState([]),[S,j]=J.useState([]),[H,Z]=J.useState([]);return J.useEffect(()=>{const X=ms.onAuthStateChanged(fe=>{s(fe),o(!1)}),P=Cn(Jn(jt(Ye,"siparisler"),gs("createdAt","desc")),fe=>{const Ee=fe.docs.map(N=>N.data());_(Ee.slice(0,5));const ge={};Ee.forEach(N=>{const C=N.date?N.date.slice(0,7):"N/A";ge[C]=(ge[C]||0)+1});const R=Object.entries(ge).map(([N,C])=>({label:N,value:C})).sort((N,C)=>N.label.localeCompare(C.label));Z(R),f(N=>({...N,activeOrders:Ee.length}))}),ee=Cn(jt(Ye,"teklifler"),fe=>{f(Ee=>({...Ee,pendingProposals:fe.size}))}),te=Cn(jt(Ye,"employees"),fe=>{const Ee=fe.docs.map(N=>N.data());f(N=>({...N,totalWorkers:Ee.length}));const ge=new Date().toISOString().split("T")[0],R=Ee.filter(N=>{const C=N.attendance?.[ge];return C&&["paid_leave","unpaid_leave","off"].includes(C.type)});y(R)}),ye=Cn(jt(Ye,"inventory_movements"),fe=>{const Ee=fe.docs.map(N=>N.data()),ge={};Ee.forEach(N=>{const C=Number(N.quantity)||0,k=N.action==="add"?C:-C;ge[N.productName]||(ge[N.productName]=0),ge[N.productName]+=k});const R=Object.entries(ge).filter(([N,C])=>C<100).map(([N,C])=>({name:N,qty:C}));j(R.slice(0,5)),f(N=>({...N,inventoryCount:Object.keys(ge).length}))});return()=>{X(),P(),ee(),te(),ye()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(xr.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(sd,{title:"Aktif Sipariler",value:u.activeOrders,subtext:"Geen aya gre art",icon:xr.Cart,color:"bg-indigo-600"}),c.jsx(sd,{title:"Bekleyen Teklifler",value:u.pendingProposals,subtext:"Onay bekleyen",icon:xr.Document,color:"bg-purple-600"}),c.jsx(sd,{title:"Toplam Stok Kalemi",value:u.inventoryCount,subtext:"Kritik seviye kontrol",icon:xr.Box,color:"bg-emerald-600"}),c.jsx(sd,{title:"Toplam Personel",value:u.totalWorkers,subtext:"Aktif alan",icon:xr.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(LC,{data:H})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((X,P)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",X.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",X.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:X.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},P)),x.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(xr.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((X,P)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:X.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:X.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:X.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},P)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(xr.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:S.length>0?S.map((X,P)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:X.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[X.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},P)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Re={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},un=ib.forwardRef(({className:i="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),PC=ib.forwardRef(({className:i="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),jn=({children:i,variant:e="primary",className:s="",...r})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...r,children:i})},D1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Sl=({options:i,selected:e,onChange:s,placeholder:r="Seiniz...",isMulti:o=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[p,y]=J.useState(!1),[x,_]=J.useState(""),S=J.useRef(null);J.useEffect(()=>{const P=ee=>{S.current&&!S.current.contains(ee.target)&&y(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const j=P=>{if(o){const ee=e.includes(P)?e.filter(te=>te!==P):[...e,P];s(ee)}else s(P),y(!1),_("")},H=P=>{_(P.target.value),f&&s(P.target.value)},Z=o?e.length>0?`(${e.length})`:"":e||r,X=i.filter(P=>P.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:S,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(un,{placeholder:r,value:e,onChange:H,onFocus:()=>y(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>y(!p),children:c.jsx(Re.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>y(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Re.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${r} ${Z}`:Z})]}),c.jsx(Re.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:P=>_(P.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[X.map(P=>{const ee=o?e.includes(P):e===P;return c.jsxs("div",{onClick:()=>f?s(P):j(P),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ee?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ee?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ee&&c.jsx(Re.Check,{})}),c.jsx("span",{className:"truncate",children:P})]}),u&&c.jsx("button",{type:"button",onClick:te=>{te.stopPropagation(),u(P)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Re.Trash,{})})]},P)}),X.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Gg=({isOpen:i,onClose:e,title:s,children:r,maxWidth:o="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,sh=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),ih=({startDate:i,endDate:e,onStartChange:s,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>r(o.target.value)})]}),Un=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",UC=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",zC=i=>{if(!i)return 0;const e=i.toString().replace(/\D/g,"");return parseFloat(e)/100},Jv=i=>i?new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i)+" ":"";function BC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState([]),[y,x]=J.useState(!1),[_,S]=J.useState({start:"",end:""}),[j,H]=J.useState({}),[Z,X]=J.useState(!1),[P,ee]=J.useState(!1),[te,ye]=J.useState(!1),[fe,Ee]=J.useState({}),ge=F=>{Ee(he=>({...he,[F]:!he[F]}))},[R,N]=J.useState(null),[C,k]=J.useState(null),[A,M]=J.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[I,de]=J.useState({name:"",company:"",phone:"",email:""}),[Le,K]=J.useState(null),[le,be]=J.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]});if(J.useEffect(()=>{const F=ms.onAuthStateChanged(Ne=>{e(Ne),r(!1)}),he=Jn(jt(Ye,"customers"),gs("createdAt","desc")),je=Cn(he,Ne=>{u(Ne.docs.map(ot=>({id:ot.id,...ot.data()})))}),Fe=Jn(jt(Ye,"sales"),gs("createdAt","desc")),ve=Cn(Fe,Ne=>{p(Ne.docs.map(ot=>({id:ot.id,...ot.data()})))});return()=>{F(),je(),ve()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Re.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const ze=F=>{const he=parseFloat(F.qty)||0,je=parseFloat(F.unitPrice)||0,Fe=parseFloat(F.vatRate)||0,ve=he*je,Ne=ve*(Fe/100);return ve+Ne},Ze=F=>{if(!F)return{subtotal:0,totalVAT:0,grandTotal:0};const he=F.reduce((Fe,ve)=>Fe+(parseFloat(ve.qty)||0)*(parseFloat(ve.unitPrice)||0),0),je=F.reduce((Fe,ve)=>Fe+ze(ve),0);return{subtotal:he,totalVAT:je-he,grandTotal:je}},E=F=>F?F.reduce((he,je)=>he+ze(je),0):0,L=F=>{const he=f.filter(ve=>ve.customerId===F);let je=0,Fe=0;return he.forEach(ve=>{if(ve.type==="payment"){const Ne=parseFloat(ve.amount)||0;ve.direction==="out"?je+=Ne:Fe+=Ne}else{const Ne=E(ve.items);ve.transactionType==="purchase"?Fe+=Ne:je+=Ne}}),je-Fe},ne=F=>{let he=f.filter(ve=>ve.customerId===F);he.sort((ve,Ne)=>new Date(ve.date)-new Date(Ne.date));let je=0;const Fe=[];return he.forEach(ve=>{if(ve.type==="payment"){const Ne=parseFloat(ve.amount)||0,ot=ve.direction==="out",Me=ot?Ne:0,Ct=ot?0:Ne;je=je+Me-Ct,Fe.push({docNo:ve.docNo||"-",date:ve.date,action:ot?"DEME YAPILDI":"DEME ALINDI",type:ve.paymentMethod||"-",note:ve.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:Me,alacak:Ct,balance:je})}else{const Ne=ve.transactionType==="purchase",ot=Ne?"ALI":"SATI";ve.items?.forEach(Me=>{const Ct=ze(Me),Ht=Ne?0:Ct,Rt=Ne?Ct:0;je=je+Ht-Rt,Fe.push({docNo:ve.docNo,date:ve.date,action:ot,type:"-",note:ve.note||"",ek:Me.ek||"",desc:Me.name,qty:Me.qty,unitPrice:Me.unitPrice,borc:Ht,alacak:Rt,balance:je})})}}),Fe},V=async F=>{F.preventDefault();try{await Ii(jt(Ye,"customers"),{...I,createdAt:new Date().toISOString()}),de({name:"",company:"",phone:"",email:""}),ee(!1)}catch(he){alert("Hata: "+he.message)}},se=async F=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Vr(tn(Ye,"customers",F))},me=F=>{N(F),K(null);const he="TH-"+Date.now().toString().slice(-6);be({docNo:he,amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),ye(!0)},_e=(F,he)=>{N(he),K(F),be({docNo:F.docNo||"",amount:F.amount,formattedAmount:Jv(F.amount),type:F.paymentMethod,direction:F.direction||"in",note:F.note,date:F.date}),ye(!0)},Be=F=>{const he=F.target.value,je=zC(he);be({...le,amount:je,formattedAmount:Jv(je)})},Pe=async F=>{if(F.preventDefault(),!!R)try{const he={customerId:R.id,type:"payment",docNo:le.docNo,amount:le.amount,paymentMethod:le.type,direction:le.direction,note:le.note,date:le.date,createdAt:Le?Le.createdAt:new Date().toISOString()};Le?await oi(tn(Ye,"sales",Le.id),he):await Ii(jt(Ye,"sales"),he),ye(!1)}catch(he){alert("Hata: "+he.message)}},W=F=>{N(F),k(null);const he="DOC-"+Date.now().toString().slice(-6);M({docNo:he,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),X(!0)},we=(F,he)=>{N(he),k(F);const je=(F.items||[]).map(Fe=>({...Fe,ek:Fe.ek||""}));M({docNo:F.docNo,transactionType:F.transactionType||"sale",date:F.date,description:F.description,status:F.status,items:je}),X(!0)},Te=async F=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Vr(tn(Ye,"sales",F))}catch(he){alert("Hata: "+he.message)}},Y=async F=>{F.preventDefault();try{const he={customerId:R.id,...A,type:"sale",createdAt:C?C.createdAt:new Date().toISOString()};C?await oi(tn(Ye,"sales",C.id),he):await Ii(jt(Ye,"sales"),he),X(!1)}catch(he){alert("Hata: "+he.message)}},pe=(F,he,je)=>{const Fe=[...A.items];Fe[F][he]=je,M({...A,items:Fe})},ae=()=>M({...A,items:[...A.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Ie=F=>M({...A,items:A.items.filter((he,je)=>je!==F)}),Qe=F=>{const he=ne(F.id);let je="data:text/csv;charset=utf-8,\uFEFF";je+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,he.forEach(Ne=>{const ot=Ct=>Un(Ct).replace(" ",""),Me=[`"${Ne.date}"`,`"${Ne.docNo}"`,`"${Ne.action}"`,`"${Ne.type}"`,`"${Ne.note}"`,`"${Ne.ek}"`,`"${Ne.desc}"`,`"${Ne.qty}"`,`"${Ne.unitPrice!=="-"?ot(Ne.unitPrice):"-"}"`,`"${ot(Ne.borc)}"`,`"${ot(Ne.alacak)}"`,`"${ot(Ne.balance)}"`].join(",");je+=Me+`
`});const Fe=encodeURI(je),ve=document.createElement("a");ve.setAttribute("href",Fe),ve.setAttribute("download",`${F.name}_Ekstre.csv`),document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)},Se=(F,he=null)=>{const Fe=ne(F.id).filter(Me=>he?Me.docNo===he:!(_.start&&Me.date<_.start||_.end&&Me.date>_.end)),ve=window.open("","","height=800,width=1000");if(!ve)return;const Ne=Me=>{if(!Me)return"-";const Ct=new Date(Me);return`${String(Ct.getDate()).padStart(2,"0")}/${String(Ct.getMonth()+1).padStart(2,"0")}/${String(Ct.getFullYear()).slice(2)}`},ot=`
      <html><head><title>Ekstre - ${F.name}</title>
      <style>
        @page { size: A4; margin: 5mm; }
        body { font-family: 'Helvetica', sans-serif; padding: 20px; color: #333; font-size: 10px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #444; padding-bottom: 15px; margin-bottom: 20px; }
        .company-info h1 { font-size: 18px; font-weight: bold; color: #000; margin: 0 0 5px 0; }
        .company-info p { margin: 0; font-size: 9px; color: #555; line-height: 1.3; }
        .report-info { text-align: right; }
        .report-info h2 { font-size: 16px; margin: 0 0 5px 0; color: #4f46e5; }
        .report-info p { margin: 0; font-size: 9px; color: #666; }
        
        table { width: 100%; border-collapse: collapse; font-size: 9px; }
        th { background: #f3f4f6; border: 1px solid #ccc; padding: 6px; text-align: left; font-weight: bold; text-transform: uppercase; }
        td { border: 1px solid #ccc; padding: 5px; vertical-align: top; }
        .right { text-align: right; }
        .bold { font-weight: bold; }
        .payment-row { background-color: #f0fdf4; } 
        .sale-row { background-color: #fff; }
      </style>
      </head><body>
        
        <div class="header">
          <div class="company-info">
            <h1>ERCELEBILER AHSAP</h1>
            <p>YAVUZ SELM MAHALLES, YUSUF GUNAY CADDES NO:14</p>
            <p>TOSYA/KASTAMONU</p>
            <p>GSM: 0 (533) 375 9293 - 0 (534) 406 5959</p>
          </div>
          <div class="report-info">
            <h2>${he?"LEM DETAYI":"HESAP EKSTRES"}</h2>
            <p>Sayn: <strong>${F.name}</strong></p>
            <p>${he?`Belge No: #${he}`:(_.start?`${Ne(_.start)}  `:"")+(_.end?Ne(_.end):"Tm")}</p>
          </div>
        </div>
        <table style="table-layout: fixed; width: 100%;">
          <colgroup>
            <col style="width: 50px;"> <!-- Tarih -->
            <col style="width: 40px;"> <!-- Belge -->
            <col style="width: 55px;"> <!-- lem -->
            <col style="width: 35px;"> <!-- Tip -->
            <col style="width: auto;"> <!-- AIKLAMA (Kalan her yer buraya) -->
            <col style="width: 30px;"> <!-- Mik. -->
            <col style="width: 50px;"> <!-- B.Fiyat -->
            <col style="width: 85px;"> <!-- deme -->
            <col style="width: 85px;"> <!-- Tutar -->
            <col style="width: 95px;"> <!-- Bakiye -->
          </colgroup>
          <thead>
            <tr>
              <th>Tarih</th>
              <th>Belge</th>
              <th>lem</th>
              <th>Tip</th>
              <th>Aklama</th>
              <th class="right">Mik.</th>
              <th class="right">B.Fiyat</th>
              <th class="right">deme (A)</th>
              <th class="right">Tutar (B)</th>
              <th class="right">Bakiye</th>
            </tr>
          </thead>
          <tbody>
            ${Fe.map((Me,Ct)=>{let Ht=Me.action;Me.action==="DEME YAPILDI"&&(Ht="DEME"),Me.action==="DEME ALINDI"&&(Ht="TAHSLAT");let Rt="";Me.action.includes("DEME")||Me.action.includes("TAHSLAT")?Rt=Me.note:Rt=Me.desc+(Me.ek&&Me.ek!=="-"?` (${Me.ek})`:"")+(Me.note?` - ${Me.note}`:"");const vn=Fe[Ct-1],In=vn&&vn.docNo===Me.docNo&&vn.action===Me.action,ps=In?"":Ne(Me.date),rn=In?"":Me.docNo,xt=In?"":Ht,bn=In?"":Me.type;return`
              <tr class="${Me.action.includes("TAHSLAT")||Me.action.includes("DEME")?"payment-row":"sale-row"}">
                <td style="white-space:nowrap;">${ps}</td>
                <td>${rn}</td>
                <td>${xt}</td>
                <td>${bn}</td>
                <td style="white-space: normal; overflow-wrap: break-word;">${Rt}</td>
                <td class="right">${Me.qty!=="-"?Me.qty:""}</td>
                <td class="right">${Me.unitPrice!=="-"?Un(Me.unitPrice).replace(" ",""):""}</td>
                <td class="right">${Me.borc>0?Un(Me.borc):"-"}</td>
                <td class="right">${Me.alacak>0?Un(Me.alacak):"-"}</td>
                <td class="right bold" style="color:${Me.balance>0?"#dc2626":"#059669"}">${Un(Math.abs(Me.balance))} ${Me.balance>0?"(B)":"(A)"}</td>
              </tr>
            `}).join("")}
          </tbody>
        </table>

        <div style="margin-top: 30px; font-size: 10px; text-align: right;">
           <strong>Genel Bakiye: </strong> 
           <span style="font-size: 14px; font-weight: bold; color:${Fe.length>0&&Fe[Fe.length-1].balance>0?"#dc2626":"#059669"}">
             ${Fe.length>0?Un(Math.abs(Fe[Fe.length-1].balance)):"0,00 "}
             ${Fe.length>0&&Fe[Fe.length-1].balance>0?"(Bor)":"(Alacak)"}
           </span>
        </div>

      </body></html>
    `;ve.document.write(ot),setTimeout(()=>{ve.document.close(),ve.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(ih,{startDate:_.start,endDate:_.end,onStartChange:F=>S({..._,start:F}),onEndChange:F=>S({..._,end:F})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(D1,{checked:y,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Re.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(F=>{const he=f.filter(ve=>{const Ne=ve.customerId===F.id;let ot=!0;return _.start&&ve.date<_.start&&(ot=!1),_.end&&ve.date>_.end&&(ot=!1),Ne&&ot}).sort((ve,Ne)=>new Date(Ne.date)-new Date(ve.date)),je=L(F.id),Fe=fe[F.id];return c.jsxs(sh,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>ge(F.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Re.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:F.name}),c.jsx("p",{className:"text-xs text-gray-500",children:F.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Fe?c.jsx(Re.ChevronDown,{className:"transform rotate-180"}):c.jsx(Re.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${je>0?"text-red-500":"text-emerald-600"}`,children:Un(Math.abs(je))}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:je>0?"(Borlu)":"(Alacakl/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(jn,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>me(F),children:[c.jsx(Re.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(jn,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>W(F),children:[c.jsx(Re.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>Se(F),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Re.Printer,{})}),c.jsx("button",{onClick:()=>Qe(F),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Re.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>se(F.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Re.Trash,{})})]})]})]})]}),Fe&&(he.length>0?c.jsx("div",{className:"bg-white/40 max-h-[600px] overflow-y-auto custom-scrollbar",children:he.map(ve=>{const Ne=ve.type==="payment",ot=ve.transactionType==="purchase",Me=ve.direction==="out",Ct=Ne?ve.amount:E(ve.items),Ht=j[ve.id];let Rt="",vn="",In="bg-indigo-400",ps=`SATI #${ve.docNo}`,rn="+";return Ne?Me?(ps="DEME YAPILDI",Rt="bg-red-50/30",vn="text-red-500",In="bg-red-400",rn="+"):(ps="DEME ALINDI",Rt="bg-emerald-50/30",vn="text-emerald-600",In="bg-emerald-400",rn="-"):ot?(Rt="bg-amber-50/30",vn="text-amber-600",In="bg-amber-400",ps=`ALI #${ve.docNo}`,rn="-"):vn="text-red-500",c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${Rt}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${In}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:ps}),Ne&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:ve.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:UC(ve.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ne?ve.note||"-":`${ve.items?.length||0} Kalem rn`}),!Ne&&c.jsxs("button",{onClick:()=>H(xt=>({...xt,[ve.id]:!xt[ve.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[Ht?c.jsx(Re.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(Re.ChevronDown,{className:"w-3 h-3"}),"erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${vn}`,children:[rn,Un(Ct)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Se(F,ve.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(Re.Printer,{})}),Ne?c.jsx("button",{onClick:()=>_e(ve,F),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Re.Edit,{})}):c.jsx("button",{onClick:()=>we(ve,F),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Re.Edit,{})}),c.jsx("button",{onClick:()=>Te(ve.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Re.Trash,{})})]})]})]}),Ht&&!Ne&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:ve.items?.map((xt,bn)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:xt.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:xt.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:xt.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:Un(xt.unitPrice)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:Un(ze(xt))})]},bn))})]})})})]},ve.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic bg-white/20",children:"Hareket bulunamad."}))]},F.id)})}),P&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:V,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:I.name,onChange:F=>de({...I,name:F.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:I.company,onChange:F=>de({...I,company:F.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:I.phone,onChange:F=>de({...I,phone:F.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:I.email,onChange:F=>de({...I,email:F.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ee(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),te&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:Le?"deme Dzenle":"Tahsilat / deme"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:R?.name}),c.jsxs("form",{onSubmit:Pe,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>be({...le,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${le.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri)"}),c.jsx("button",{type:"button",onClick:()=>be({...le,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${le.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(F=>c.jsx("button",{type:"button",onClick:()=>be({...le,type:F}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${le.type===F?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:F},F))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${le.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00 ",value:le.formattedAmount,onChange:Be})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx("input",{placeholder:"Belge/Makbuz No",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:le.docNo,onChange:F=>be({...le,docNo:F.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:le.date,onChange:F=>be({...le,date:F.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Not / Aklama (Opsiyonel)",value:le.note,onChange:F=>be({...le,note:F.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>ye(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:`px-8 py-2.5 text-white rounded-xl shadow-lg font-bold text-sm ${le.direction==="in"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:"Kaydet"})]})]})]})}),Z&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:Y,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:C?"lemi Dzenle":"Yeni lem"}),"                                ",c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>M({...A,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${A.transactionType==="sale"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP"}),c.jsx("button",{type:"button",onClick:()=>M({...A,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${A.transactionType==="purchase"?"bg-white text-amber-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP"})]})]}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(un,{value:A.docNo,onChange:F=>M({...A,docNo:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(un,{type:"date",required:!0,value:A.date,onChange:F=>M({...A,date:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(un,{value:A.description,onChange:F=>M({...A,description:F.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:A.items.map((F,he)=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:F.ek,onChange:je=>pe(he,"ek",je.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:F.name,onChange:je=>pe(he,"name",je.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:F.qty,onChange:je=>pe(he,"qty",je.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:F.unitPrice,onChange:je=>pe(he,"unitPrice",je.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:F.vatRate,onChange:je=>pe(he,"vatRate",je.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3",children:Un(ze(F))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Ie(he),className:"text-gray-400 hover:text-red-500",children:c.jsx(Re.Trash,{})})})]},he))})]}),c.jsx("button",{type:"button",onClick:ae,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Un(Ze(A.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:Un(Ze(A.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:Un(Ze(A.items).grandTotal)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const eb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function qC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState([]),[y,x]=J.useState({start:"",end:""}),[_,S]=J.useState(!1),[j,H]=J.useState(!1),[Z,X]=J.useState(!1),[P,ee]=J.useState({}),[te,ye]=J.useState({}),fe=J.useRef(null),[Ee,ge]=J.useState(null),[R,N]=J.useState(null),[C,k]=J.useState({en:6,boy:4}),[A,M]=J.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=J.useMemo(()=>f.map(Y=>Y.name).sort(),[f]);J.useEffect(()=>{const Y=ms.onAuthStateChanged(Se=>{e(Se),r(!1)}),pe=Jn(jt(Ye,"customers"),gs("name","asc")),ae=Cn(pe,Se=>{p(Se.docs.map(F=>({id:F.id,...F.data()})))}),Ie=Jn(jt(Ye,"siparisler"),gs("createdAt","desc")),Qe=Cn(Ie,Se=>{u(Se.docs.map(F=>({id:F.id,...F.data()})))});return()=>{Y(),ae(),Qe()}},[]);const de=J.useMemo(()=>{const Y=[...f],pe=new Set(f.map(ae=>ae.id));return o.forEach(ae=>{ae.customerId&&!pe.has(ae.customerId)&&(Y.find(Ie=>Ie.id===ae.customerId)||Y.push({id:ae.customerId,name:ae.customerId,company:"Kaytsz (Manuel)"}))}),Y.sort((ae,Ie)=>ae.name.localeCompare(Ie.name))},[o,f]);if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const Le=i?.email==="furkan@avci.jp",K=Y=>{if(!Y)return;const pe=new FileReader;pe.onload=ae=>{const Ie=new Image;Ie.onload=()=>{const Qe=document.createElement("canvas"),Se=800,F=800;let he=Ie.width,je=Ie.height;he>je?he>Se&&(je*=Se/he,he=Se):je>F&&(he*=F/je,je=F),Qe.width=he,Qe.height=je,Qe.getContext("2d").drawImage(Ie,0,0,he,je);const ve=Qe.toDataURL("image/jpeg",.8);M(Ne=>({...Ne,image:ve}))},Ie.src=ae.target.result},pe.readAsDataURL(Y)},le=Y=>{Y.preventDefault(),X(!0)},be=()=>X(!1),ze=Y=>{Y.preventDefault(),X(!1),Y.dataTransfer.files&&Y.dataTransfer.files[0]&&K(Y.dataTransfer.files[0])},Ze=Y=>{Y.clipboardData.files&&Y.clipboardData.files[0]&&K(Y.clipboardData.files[0])},E=()=>{ge(null);const Y="SP-"+Date.now().toString().slice(-6);M({siparisNo:Y,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),S(!0)},L=Y=>{ge(Y);const pe=f.find(Ie=>Ie.id===Y.customerId),ae=pe?pe.name:Y.customerId;M({siparisNo:Y.siparisNo,customerId:ae,date:Y.date,note:Y.note||"",image:Y.image,items:Y.items||[]}),S(!0)},ne=async Y=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Vr(tn(Ye,"siparisler",Y))}catch(pe){alert(pe.message)}},V=async Y=>{if(Y.preventDefault(),!A.customerId){alert("Ltfen mteri giriniz.");return}try{const pe=f.find(Qe=>Qe.name===A.customerId),ae=pe?pe.id:A.customerId,Ie={...A,customerId:ae,createdAt:Ee?Ee.createdAt:new Date().toISOString()};Ee?await oi(tn(Ye,"siparisler",Ee.id),Ie):await Ii(jt(Ye,"siparisler"),{...Ie,productionStatus:{}}),S(!1)}catch(pe){alert(pe.message)}},se=(Y,pe,ae)=>{const Ie=[...A.items],Qe=Ie[Y];if(Qe[pe]=ae,pe==="en1"){const Se=parseFloat(ae);isNaN(Se)?ae===""&&(Qe.en2=""):Qe.en2=Se-C.en}if(pe==="boy1"){const Se=parseFloat(ae);isNaN(Se)?ae===""&&(Qe.boy2=""):Qe.boy2=Se-C.boy}M({...A,items:Ie})},me=()=>{M({...A,items:[...A.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},_e=()=>{if(A.items.length===0)return;const pe={...A.items[A.items.length-1]};M({...A,items:[...A.items,pe]})},Be=Y=>{const pe=A.items.filter((ae,Ie)=>Ie!==Y);M({...A,items:pe})},Pe=(Y,pe)=>{const ae=parseFloat(pe)||0,Ie={...C,[Y]:ae};k(Ie);const Qe=A.items.map(Se=>({...Se,en2:Se.en1?parseFloat(Se.en1)-Ie.en:Se.en2,boy2:Se.boy1?parseFloat(Se.boy1)-Ie.boy:Se.boy2}));M({...A,items:Qe})},W=Y=>{N(Y),H(!0)},we=async(Y,pe)=>{if(!R)return;const ae=R.productionStatus||{},Ie=ae[Y]||{},Qe={...ae,[Y]:{...Ie,[pe]:!Ie[pe]}};N({...R,productionStatus:Qe}),await oi(tn(Ye,"siparisler",R.id),{productionStatus:Qe})},Te=Y=>{const pe=f.find(Se=>Se.id===Y.customerId),ae=pe?pe.name:Y.customerId||"simsiz";f.find(Se=>Se.id===Y.customerId);const Ie=window.open("","","height=800,width=1000");if(!Ie){alert("Pop-up engelleyiciyi kapatn.");return}const Qe=`
      <html><head><title>Sipari - ${Y.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 18px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${ae}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${Y.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${tb(Y.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${Y.items.map(Se=>`
              <tr>
                <td class="group-kasa">${Se.en1||"-"}</td>
                <td class="group-kasa">${Se.boy1||"-"}</td>
                <td class="group-kasa">${Se.genislik||"-"}</td>
                <td>${Se.takim||""}</td>
                <td class="col-desc">${Se.aciklama||""}</td>
                <td class="group-net"><strong>${Se.en2||""}</strong></td>
                <td class="group-net"><strong>${Se.boy2||""}</strong></td>
                <td>${Se.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${Y.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${Y.note}
          </div>
        `:""}

        ${Y.image?`
          <div class="door-image-container">
            <img src="${Y.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ie.document.write(Qe),Ie.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Ze,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(ih,{startDate:y.start,endDate:y.end,onStartChange:Y=>x({...y,start:Y}),onEndChange:Y=>x({...y,end:Y})}),Le&&c.jsxs("button",{onClick:E,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Re.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:de.map(Y=>{const pe=o.filter(ae=>{const Ie=ae.customerId===Y.id;let Qe=!0;return y.start&&(Qe=Qe&&ae.date>=y.start),y.end&&(Qe=Qe&&ae.date<=y.end),Ie&&Qe});return pe.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Re.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:Y.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[pe.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:pe.map(ae=>{const Ie=P[ae.id],Qe=te[ae.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:ae.image?c.jsx("img",{src:ae.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",ae.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:tb(ae.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ae.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ee(Se=>({...Se,[ae.id]:!Se[ae.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ie?c.jsx(Re.ChevronUp,{}):c.jsx(Re.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>ye(Se=>({...Se,[ae.id]:!Se[ae.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Qe?c.jsx(Re.ChevronUp,{}):c.jsx(Re.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>W(ae),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Re.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Te(ae),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Re.Printer,{})}),Le&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>L(ae),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Re.Edit,{})}),c.jsx("button",{onClick:()=>ne(ae.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Re.Trash,{})})]})]})]}),Ie&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:ae.items?.map((Se,F)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Se.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Se.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Se.en1||"-"," x ",Se.boy1||"-"," x ",Se.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Se.en2," x ",Se.boy2]}),c.jsx("td",{className:"py-2",children:Se.sekil||"-"})]},F))})]})}),Qe&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(eb).map(([Se,F])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:F.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:F.steps.map(he=>{const je=ae.productionStatus?.[Se]?.[he.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:je?"text-purple-700 font-medium":"text-gray-400",children:he.label}),je?c.jsx(Re.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Re.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},he.id)})})]},Se))})})]},ae.id)})})]},Y.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:V,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Ee?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:A.siparisNo,onChange:Y=>M({...A,siparisNo:Y.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Sl,{options:I,selected:A.customerId,onChange:Y=>M({...A,customerId:Y}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:A.date,onChange:Y=>M({...A,date:Y.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${Z?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:le,onDragLeave:be,onDrop:ze,children:[c.jsx("input",{ref:fe,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Y=>K(Y.target.files[0])}),A.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:A.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Re.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:Z?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:A.note,onChange:Y=>M({...A,note:Y.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:C.en,onChange:Y=>Pe("en",Y.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:C.boy,onChange:Y=>Pe("boy",Y.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:A.items.map((Y,pe)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Y.en1,onChange:ae=>se(pe,"en1",ae.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Y.boy1,onChange:ae=>se(pe,"boy1",ae.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:Y.genislik,onChange:ae=>se(pe,"genislik",ae.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:Y.takim,onChange:ae=>se(pe,"takim",ae.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:Y.aciklama,onChange:ae=>se(pe,"aciklama",ae.target.value),onInput:ae=>{ae.target.style.height="auto",ae.target.style.height=ae.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${pe}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:Y.sekil,onChange:ae=>se(pe,"sekil",ae.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${pe}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Y.en2,onChange:ae=>se(pe,"en2",ae.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Y.boy2,onChange:ae=>se(pe,"boy2",ae.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Be(pe),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},pe))})]}),c.jsxs("button",{type:"button",onClick:_e,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Re.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:me,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Ee?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),j&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(eb).map(([Y,pe])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:pe.title}),c.jsx("div",{className:"space-y-2",children:pe.steps.map(ae=>{const Ie=R.productionStatus?.[Y]?.[ae.id];return c.jsxs("button",{onClick:()=>we(Y,ae.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ie?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:ae.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ie?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ie&&c.jsx(Re.Check,{})})]},ae.id)})})]},Y))})]})})]})}const HC=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",FC=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),nb=({item:i,isAdd:e,onEdit:s,onDelete:r})=>c.jsxs(sh,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:HC(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Re.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Re.Trash,{})})]})]})]});function GC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState({start:"",end:""}),[y,x]=J.useState(!1),[_,S]=J.useState([]),[j,H]=J.useState(!0),[Z,X]=J.useState(!0),[P,ee]=J.useState(null),[te,ye]=J.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),fe=J.useMemo(()=>[...new Set(o.map(de=>de.productName))].sort(),[o]),Ee=J.useMemo(()=>{const de=o.map(K=>K.unit).filter(Boolean),Le=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Le,...de])].sort()},[o]);J.useEffect(()=>{const de=ms.onAuthStateChanged(le=>{e(le),r(!1)}),Le=Jn(jt(Ye,"inventory_movements"),gs("date","desc")),K=Cn(Le,le=>{u(le.docs.map(be=>({id:be.id,...be.data()})))});return()=>{de(),K()}},[]);const ge=J.useMemo(()=>o.filter(de=>{let Le=!0;if(f.start&&(Le=Le&&de.date>=f.start),f.end&&(Le=Le&&de.date<=f.end),de.productType==="raw"&&!j||(de.productType==="manufactured"||de.productType==="uretilmis")&&!Z)return!1;let K=!0;return _.length>0&&(K=_.includes(de.productName)),Le&&K}),[o,f,j,Z,_]),R=ge.filter(de=>de.action==="add"),N=ge.filter(de=>de.action==="remove"),C=async de=>{de.preventDefault();try{const Le={...te,quantity:Number(te.quantity),createdAt:new Date().toISOString()};P?await oi(tn(Ye,"inventory_movements",P),Le):await Ii(jt(Ye,"inventory_movements"),Le),I()}catch(Le){alert("Hata: "+Le.message)}},k=async de=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Vr(tn(Ye,"inventory_movements",de))},A=async de=>{if(window.confirm(`"${de}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Le=Jn(jt(Ye,"inventory_movements"),AC("productName","==",de)),K=await RC(Le),le=MC(Ye);K.forEach(be=>{le.delete(be.ref)}),await le.commit(),_.includes(de)&&S(be=>be.filter(ze=>ze!==de)),te.productName===de&&ye(be=>({...be,productName:""}))}catch(Le){alert("Silme hatas: "+Le.message)}},M=de=>{ee(de.id),ye({productType:de.productType,productName:de.productName,action:de.action,quantity:de.quantity,unit:de.unit,date:de.date}),x(!0)},I=()=>{x(!1),ee(null),ye({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(ih,{startDate:f.start,endDate:f.end,onStartChange:de=>p({...f,start:de}),onEndChange:de=>p({...f,end:de})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(FC,{showRaw:j,setShowRaw:H,showManufactured:Z,setShowManufactured:X}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Sl,{options:fe,selected:_,onChange:S,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Re.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(de=>c.jsx(nb,{item:de,isAdd:!0,onEdit:M,onDelete:k},de.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[N.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[N.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),N.map(de=>c.jsx(nb,{item:de,isAdd:!1,onEdit:M,onDelete:k},de.id))]})]})]}),c.jsx(Gg,{isOpen:y,onClose:I,title:P?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${te.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:te.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(D1,{checked:te.productType==="manufactured",onChange:de=>ye({...te,productType:de?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Sl,{options:fe,selected:te.productName,onChange:de=>ye({...te,productName:de}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:A})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>ye({...te,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${te.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>ye({...te,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${te.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(un,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:te.quantity,onChange:de=>ye({...te,quantity:de.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Sl,{options:Ee,selected:te.unit,onChange:de=>ye({...te,unit:de}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(un,{type:"date",required:!0,value:te.date,onChange:de=>ye({...te,date:de.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(jn,{type:"submit",variant:"primary",children:P?"Gncelle":"Kaydet"}),c.jsx(jn,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const YC=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),KC=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,r=800,o=40,u=r-o*2,f=s-o*2,p=i.flatMap(_=>e.map(S=>_[S]||0)),y=Math.max(...p,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const S=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:S,x2:r-o,y2:S,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:S+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(y/4*_)})]},_)}),e.map((_,S)=>{const j=x[S%x.length],H=i.map((Z,X)=>{const P=o+X*(u/(i.length-1||1)),ee=Z[_]||0,te=s-o-ee/y*f,ye=isNaN(P)?o:P,fe=isNaN(te)?s-o:te;return`${ye},${fe}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:j,strokeWidth:"3",points:H,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((Z,X)=>{const P=o+X*(u/(i.length-1||1)),ee=Z[_]||0,te=s-o-ee/y*f,ye=isNaN(P)?o:P,fe=isNaN(te)?s-o:te;return c.jsx("circle",{cx:ye,cy:fe,r:"4",fill:"white",stroke:j,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${Z.month} - ${_}: ${ee}`})},X)})]},_)}),i.map((_,S)=>{const j=o+S*(u/(i.length-1||1));return c.jsx("text",{x:j,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},S)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,S)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[S%x.length]}}),_]},_))})]})},$C=({name:i,qty:e,unit:s,type:r,change:o,changePercent:u})=>{const f=r==="raw",p=e<0,y=u>10;let x="text-gray-400",_="bg-gray-100",S=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",S=c.jsx(Re.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",S=c.jsx(Re.TrendingDown,{}));let j=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",H=f?"text-pink-900":"text-purple-900",Z=f?"text-pink-700/70":"text-purple-700/70";p?(j="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",H="text-red-700",Z="text-red-500"):y&&(j="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",H="text-emerald-800",Z="text-emerald-600");const X=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${j}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:X}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${H}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${Z} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:S}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function QC(){const[i,e]=J.useState([]),[s,r]=J.useState(!0),[o,u]=J.useState(!0),[f,p]=J.useState(!0),[y,x]=J.useState([]),[_,S]=J.useState("year");J.useEffect(()=>{const P=Jn(jt(Ye,"inventory_movements"),gs("date","asc")),ee=Cn(P,te=>{const ye=te.docs.map(fe=>fe.data());e(ye),r(!1)});return()=>ee()},[]);const j=J.useMemo(()=>{const P={},ee=new Date;return ee.setDate(ee.getDate()-30),i.forEach(te=>{const ye=Number(te.quantity)||0,fe=te.action==="add"?ye:-ye,Ee=new Date(te.date);P[te.productName]||(P[te.productName]={name:te.productName,qty:0,unit:te.unit,type:te.productType||"raw",change30Days:0}),P[te.productName].qty+=fe,P[te.productName].type=te.productType||P[te.productName].type,Ee>=ee&&(P[te.productName].change30Days+=fe)}),Object.values(P).map(te=>{const ye=te.qty-te.change30Days;let fe=0;return ye!==0?fe=te.change30Days/Math.abs(ye)*100:te.change30Days!==0&&(fe=100),{...te,changePercent:fe}})},[i]),H=J.useMemo(()=>j.filter(P=>!(P.type==="raw"&&!o||(P.type==="manufactured"||P.type==="uretilmis")&&!f||y.length>0&&!y.includes(P.name))),[j,o,f,y]),Z=J.useMemo(()=>j.map(P=>P.name).sort(),[j]),X=J.useMemo(()=>{const P=H.sort((fe,Ee)=>Math.abs(Ee.qty)-Math.abs(fe.qty)).slice(0,5).map(fe=>fe.name);if(P.length===0)return{data:[],keys:[]};const ee={},te={};return P.forEach(fe=>te[fe]=0),i.forEach(fe=>{if(!P.includes(fe.productName))return;const Ee=fe.date?fe.date.slice(0,7):"N/A";if(Ee==="N/A")return;if(_==="year"){const N=new Date().getFullYear();if(new Date(fe.date).getFullYear()!==N)return}const ge=Number(fe.quantity)||0,R=fe.action==="add"?ge:-ge;te[fe.productName]||(te[fe.productName]=0),te[fe.productName]+=R,ee[Ee]={...te,month:Ee}}),{data:Object.values(ee).sort((fe,Ee)=>fe.month.localeCompare(Ee.month)),keys:P}},[i,H,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(YC,{showRaw:o,setShowRaw:u,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Sl,{options:Z,selected:y,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:H.length>0?H.map((P,ee)=>c.jsx($C,{name:P.name,qty:P.qty,unit:P.unit,type:P.type,change:P.change30Days,changePercent:P.changePercent},ee)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Re.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),X.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Re.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:P=>S(P.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(KC,{data:X.data,keys:X.keys})]})]})]})}const wm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Js=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",id=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function XC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState([]),[y,x]=J.useState({start:"",end:""}),[_,S]=J.useState(!1),[j,H]=J.useState(!1),Z=J.useRef(null),[X,P]=J.useState(null),[ee,te]=J.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:wm,images:[],items:[]}),ye=J.useMemo(()=>f.map(E=>E.name).sort(),[f]);if(J.useEffect(()=>{const E=ms.onAuthStateChanged(me=>{e(me),r(!1)}),L=Jn(jt(Ye,"teklifler"),gs("createdAt","desc")),ne=Cn(L,me=>{u(me.docs.map(_e=>({id:_e.id,..._e.data()})))}),V=Jn(jt(Ye,"customers"),gs("name","asc")),se=Cn(V,me=>{p(me.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{E(),ne(),se()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Re.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const fe=(E,L,ne)=>{const V=E*L,se=V*(ne/100);return V+se},Ee=E=>{if(!E)return{subtotal:0,totalVAT:0,grandTotal:0};const L=E.reduce((V,se)=>V+Number(se.quantity)*Number(se.price),0),ne=E.reduce((V,se)=>V+Number(se.quantity)*Number(se.price)*(Number(se.vat)/100),0);return{subtotal:L,totalVAT:ne,grandTotal:L+ne}},ge=E=>{const L=Array.from(E.target.files||E.dataTransfer.files);L.length&&L.forEach(ne=>{if(!ne.type.startsWith("image/"))return;const V=new FileReader;V.onload=se=>{const me=new Image;me.onload=()=>{const _e=document.createElement("canvas"),Be=1e3;let Pe=me.width,W=me.height;Pe>W?Pe>Be&&(W*=Be/Pe,Pe=Be):W>Be&&(Pe*=Be/W,W=Be),_e.width=Pe,_e.height=W,_e.getContext("2d").drawImage(me,0,0,Pe,W);const Te=_e.toDataURL("image/jpeg",.7);te(Y=>({...Y,images:[...Y.images,Te]}))},me.src=se.target.result},V.readAsDataURL(ne)})},R=E=>{te(L=>({...L,images:L.images.filter((ne,V)=>V!==E)}))},N=(E,L)=>{const ne=[...ee.images];L===-1&&E>0?[ne[E],ne[E-1]]=[ne[E-1],ne[E]]:L===1&&E<ne.length-1&&([ne[E],ne[E+1]]=[ne[E+1],ne[E]]),te({...ee,images:ne})},C=E=>{E.preventDefault(),H(!0)},k=()=>H(!1),A=E=>{E.preventDefault(),H(!1),ge(E)},M=E=>{E.clipboardData.files&&E.clipboardData.files.length>0&&(E.preventDefault(),ge({target:{files:E.clipboardData.files}}))},I=()=>{P(null);const E="TK-"+Date.now().toString().slice(-6),L=new Date;L.setDate(L.getDate()+7),te({teklifNo:E,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:L.toISOString().split("T")[0],note:wm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),S(!0)},de=E=>{P(E.id),te({teklifNo:E.teklifNo,teklifName:E.teklifName||"",customerName:E.customerName,date:E.date,validityDate:E.validityDate||"",note:E.note||wm,images:E.images||[],items:E.items||[]}),S(!0)},Le=async E=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Vr(tn(Ye,"teklifler",E))}catch(L){alert(L.message)}},K=async E=>{if(E.preventDefault(),!ee.customerName){alert("Ltfen mteri ad giriniz.");return}try{const L={...ee,createdAt:new Date().toISOString()};X?await oi(tn(Ye,"teklifler",X),L):await Ii(jt(Ye,"teklifler"),L),S(!1)}catch(L){alert(L.message)}},le=(E,L,ne)=>{const V=[...ee.items],se=V[E];se[L]=ne;const me=parseFloat(L==="quantity"?ne:se.quantity),_e=parseFloat(L==="price"?ne:se.price),Be=parseFloat(L==="vat"?ne:se.vat);!isNaN(me)&&!isNaN(_e)&&!isNaN(Be)&&(se.total=fe(me,_e,Be)),te({...ee,items:V})},be=()=>{te({...ee,items:[...ee.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},ze=E=>{te({...ee,items:ee.items.filter((L,ne)=>ne!==E)})},Ze=E=>{const L=window.open("","","height=800,width=1000");if(!L){alert("Pop-up engelleyiciyi kapatn.");return}const ne=Ee(E.items||[]),V=E.images||[],se=`
      <html><head><title>Teklif - ${E.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${E.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${id(E.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${id(E.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${E.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${E.items.map(me=>`
                <tr>
                  <td>${me.description}</td>
                  <td class="text-center">${me.quantity}</td>
                  <td class="text-right">${Js(me.price)}</td>
                  <td class="text-center">%${me.vat}</td>
                  <td class="text-right"><strong>${Js(me.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Js(ne.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Js(ne.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Js(ne.grandTotal)}</span></div>
            </div>
          </div>

          ${E.note?`<div class="notes-section"><strong>NOT:</strong><br/>${E.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${V.map(me=>`<img src="${me}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;L.document.write(se),L.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?M:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(ih,{startDate:y.start,endDate:y.end,onStartChange:E=>x({...y,start:E}),onEndChange:E=>x({...y,end:E})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Re.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(E=>{let L=!0;return y.start&&E.date<y.start&&(L=!1),y.end&&E.date>y.end&&(L=!1),L}).map(E=>{const L=Ee(E.items);return c.jsxs(sh,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Re.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:E.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",E.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:E.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",id(E.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",id(E.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Js(L.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(jn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Ze(E),children:c.jsx(Re.Printer,{})}),c.jsx(jn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>de(E),children:c.jsx(Re.Edit,{})}),c.jsx(jn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Le(E.id),children:c.jsx(Re.Trash,{})})]})]})]},E.id)})]}),c.jsx(Gg,{isOpen:_,onClose:()=>S(!1),title:X?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:K,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(un,{value:ee.teklifNo,onChange:E=>te({...ee,teklifNo:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(un,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:ee.teklifName,onChange:E=>te({...ee,teklifName:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Sl,{options:ye,selected:ee.customerName,onChange:E=>te({...ee,customerName:E}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(un,{type:"date",required:!0,value:ee.date,onChange:E=>te({...ee,date:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(un,{type:"date",required:!0,value:ee.validityDate,onChange:E=>te({...ee,validityDate:E.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(PC,{rows:"4",value:ee.note,onChange:E=>te({...ee,note:E.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${j?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:C,onDragLeave:k,onDrop:A,children:[c.jsx("input",{ref:Z,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ge}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Re.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:ee.images.map((E,L)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:E,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>R(L),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>N(L,-1),disabled:L===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>N(L,1),disabled:L===ee.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},L))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:ee.items.map((E,L)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(un,{placeholder:"rn/Hizmet aklamas",value:E.description,onChange:ne=>le(L,"description",ne.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(un,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.quantity,onChange:ne=>le(L,"quantity",ne.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(un,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.price,onChange:ne=>le(L,"price",ne.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:E.vat,onChange:ne=>le(L,"vat",ne.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Js(E.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>ze(L),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Re.Trash,{})})})]},L))})]}),c.jsx("button",{type:"button",onClick:be,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Js(Ee(ee.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Js(Ee(ee.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Js(Ee(ee.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(jn,{type:"submit",variant:"primary",children:X?"Kaydet":"Olutur"}),c.jsx(jn,{type:"button",variant:"secondary",onClick:()=>S(!1),children:"ptal"})]})]})})]})}const WC="86715dfc9d1046e7e8a0d95a",ZC=`https://v6.exchangerate-api.com/v6/${WC}/latest/USD`,Em=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[]})=>{const u=(y,x,_)=>{const S=[...i];S[y]={...S[y],[x]:_},x==="type"&&_!=="op"&&(S[y].value=""),e(S)},f=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},p=y=>{if(y===0)return;const x=[...i];x.splice(y,2),e(x)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2",children:[i.map((y,x)=>x%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-indigo-50 border-none rounded-lg text-center font-bold text-indigo-700 w-10 py-2 cursor-pointer hover:bg-indigo-100 transition-colors appearance-none text-lg",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>p(x),className:"absolute -top-3 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs hidden group-hover:flex items-center justify-center shadow-md z-20 hover:bg-red-600",title:"Sil",children:""})]},x):c.jsxs("div",{className:"flex bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg overflow-hidden shadow-sm items-center h-10",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-200 text-[10px] uppercase font-bold text-gray-500 px-2 h-full cursor-pointer focus:outline-none hover:bg-gray-100",value:y.type,onChange:_=>u(x,"type",_.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Satr"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-20 border-none text-sm px-2 h-full focus:ring-0 text-gray-900 bg-transparent [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:y.value,onChange:_=>u(x,"value",_.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-transparent cursor-pointer text-gray-900 truncate",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-indigo-50 text-indigo-700 font-bold cursor-pointer truncate",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(_=>c.jsx("option",{value:_.id,children:_.name||"simsiz"},_.id))]})]},x)),c.jsx("button",{type:"button",onClick:f,className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 hover:shadow-lg transition-all z-10",children:c.jsx(Re.Plus,{})})]})};function JC(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState([]),[y,x]=J.useState({TRY:1,USD:1,EUR:1}),[_,S]=J.useState(null),[j,H]=J.useState(!1),[Z,X]=J.useState(!1),[P,ee]=J.useState(null),[te,ye]=J.useState({}),[fe,Ee]=J.useState({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[ge,R]=J.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});J.useEffect(()=>{const W=ms.onAuthStateChanged(ae=>{e(ae),r(!1)}),we=Jn(jt(Ye,"pricing_constants"),gs("name","asc")),Te=Cn(we,ae=>{u(ae.docs.map(Ie=>({id:Ie.id,...Ie.data()})))}),Y=Jn(jt(Ye,"pricing_items"),gs("updatedAt","desc")),pe=Cn(Y,ae=>{p(ae.docs.map(Ie=>({id:Ie.id,...Ie.data()})))});return N(),()=>{W(),Te(),pe()}},[]);const N=async()=>{try{const we=await(await fetch(ZC)).json();if(we&&we.conversion_rates){const Te=we.conversion_rates.TRY,Y=we.conversion_rates.EUR,pe=Te/Y;x({TRY:1,USD:Te,EUR:pe}),S(new Date().toLocaleTimeString())}}catch(W){console.error("Rate error",W)}},C=(W,we)=>{if(!we||we==="None"||we==="TRY")return parseFloat(W)||0;const Te=y[we]||1;return parseFloat(W)*Te},k=(W,we)=>{if(we==="TRY")return W;const Te=y[we]||1;return W/Te},A=(W,we={})=>{if(W.type==="num")return parseFloat(W.value)||0;if(W.type==="const"){const Te=o.find(Y=>Y.id===W.value);return Te?C(Te.value,Te.currency):0}return W.type==="ref"&&we[W.value]||0},M=(W,we={})=>{if(!W||W.length===0)return 0;let Te=A(W[0],we);for(let Y=1;Y<W.length;Y+=2){const pe=W[Y].value,ae=A(W[Y+1],we);switch(pe){case"+":Te+=ae;break;case"-":Te-=ae;break;case"*":Te*=ae;break;case"/":Te=ae!==0?Te/ae:0;break}}return Te},I=W=>{const we={};(W.rows||[]).forEach(Y=>{we[Y.id]=M(Y.ops,we)});const Te=M(W.finalFormula?.ops,we);return k(Te,W.finalCurrency||"TRY")},de=W=>M(W,{}),Le=J.useMemo(()=>I(ge),[ge,o,y]),K=J.useMemo(()=>de(fe.ops),[fe.ops,o,y]),le=J.useMemo(()=>[...new Set(o.map(we=>we.category||"Kategorisiz"))].sort(),[o]),be=J.useMemo(()=>{const W={};return o.forEach(we=>{const Te=we.category||"Kategorisiz";W[Te]||(W[Te]=[]),W[Te].push(we)}),W},[o]),ze=async W=>{W.preventDefault();const we=de(fe.ops),Te={...fe,value:we,category:fe.category||"Kategorisiz"};P?await oi(tn(Ye,"pricing_constants",P),Te):await Ii(jt(Ye,"pricing_constants"),Te),Ee({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ee(null)},Ze=W=>{Ee({...W,ops:W.ops||[{type:"num",value:W.value}]}),ee(W.id)},E=async W=>{window.confirm("Silmek istediinize emin misiniz?")&&await Vr(tn(Ye,"pricing_constants",W))},L=W=>{ye(we=>({...we,[W]:!we[W]}))},ne=()=>{const W="row_"+Date.now();R({...ge,rows:[...ge.rows,{id:W,name:"",ops:[{type:"num",value:0}]}]})},V=W=>{const we=[...ge.rows];we.splice(W,1),R({...ge,rows:we})},se=(W,we)=>{const Te=[...ge.rows];Te[W].name=we,R({...ge,rows:Te})},me=(W,we)=>{const Te=[...ge.rows];Te[W].ops=we,R({...ge,rows:Te})},_e=async W=>{W.preventDefault();const we={...ge,updatedAt:new Date().toISOString()};P?await oi(tn(Ye,"pricing_items",P),we):await Ii(jt(Ye,"pricing_items"),we),X(!1),ee(null),R({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"})},Be=W=>{R(W),ee(W.id),X(!0)},Pe=async W=>{window.confirm("Silmek istediinize emin misiniz?")&&await Vr(tn(Ye,"pricing_items",W))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):!i||i.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Re.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve esnek hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white/80 backdrop-blur-md px-5 py-3 rounded-xl shadow-sm border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[y.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[y.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Re.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs(jn,{variant:"secondary",onClick:()=>H(!0),children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Re.Variable,{})})," Sabit Deerler"]}),c.jsxs(jn,{variant:"primary",onClick:()=>{ee(null),R({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),X(!0)},children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Re.Calculator,{})})," Fiyatlandrma"]})]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center bg-white/40 backdrop-blur-sm rounded-3xl border border-dashed border-gray-300 text-gray-400",children:"Henz fiyatlandrma oluturulmad."}),f.map(W=>{const we=I(W),Te=W.finalCurrency||"TRY",Y=Math.random()>.5?"up":"down",pe=(Math.random()*5).toFixed(1);return c.jsxs(sh,{className:"p-6 hover:scale-[1.02] transition-transform relative group",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-100/50 px-3 py-1 rounded-bl-xl text-[10px] font-bold text-gray-400",children:new Date(W.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1 pr-12 truncate",title:W.title,children:W.title}),c.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider mb-4",children:W.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-6",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[we.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-sm ml-1 font-medium text-indigo-400",children:Te})]}),c.jsxs("div",{className:`flex items-center text-xs font-bold ${Y==="up"?"text-emerald-500":"text-red-500"}`,children:[Y==="up"?c.jsx(Re.TrendingUp,{}):c.jsx(Re.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",pe]})]})]}),c.jsxs("div",{className:"flex gap-2 border-t border-gray-100 pt-4 opacity-80 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Be(W),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 rounded-lg font-bold transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>Pe(W.id),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-lg font-bold transition-colors",children:"Sil"})]})]},W.id)})]})}),j&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-0 sm:p-4 bg-gray-900/40 backdrop-blur-sm overflow-y-auto",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl w-full max-w-6xl min-h-full sm:min-h-0 sm:rounded-3xl shadow-2xl border border-white/50 flex flex-col my-0 sm:my-8 relative",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 sticky top-0 z-10 backdrop-blur-xl rounded-t-3xl",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sabit Deer Ynetimi"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maliyet hesaplamalarnda kullanlacak temel deerler"})]}),c.jsx("button",{onClick:()=>H(!1),className:"bg-gray-100 hover:bg-gray-200 p-2 rounded-full transition-colors",children:c.jsx("span",{className:"text-xl font-bold text-gray-600",children:""})})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row flex-grow overflow-hidden h-full",children:[c.jsxs("div",{className:"lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-gray-200 overflow-y-auto bg-gray-50/30",children:[c.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center",children:c.jsx(Re.Plus,{})}),P?"Sabiti Dzenle":"Yeni Sabit Ekle"]}),c.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Tanmlama"}),c.jsx(un,{required:!0,placeholder:"Sabit Ad (rn: Elektrik Kw/s)",value:fe.name,onChange:W=>Ee({...fe,name:W.target.value})}),c.jsxs("div",{className:"relative",children:[c.jsx(un,{list:"cat-options",placeholder:"Kategori (rn: Enerji, Hammadde)",value:fe.category,onChange:W=>Ee({...fe,category:W.target.value})}),c.jsx("datalist",{id:"cat-options",children:le.map((W,we)=>c.jsx("option",{value:W},we))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(un,{placeholder:"Birim (kg, saat...)",value:fe.unit,onChange:W=>Ee({...fe,unit:W.target.value})}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 text-sm",value:fe.currency,onChange:W=>Ee({...fe,currency:W.target.value}),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Deer Hesaplama"}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[c.jsx(Em,{ops:fe.ops,onChange:W=>Ee({...fe,ops:W}),constants:o}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Sonu"}),c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:K.toLocaleString("tr-TR",{maximumFractionDigits:4})})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[P&&c.jsx(jn,{type:"button",variant:"ghost",onClick:()=>{ee(null),Ee({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]})},children:"ptal"}),c.jsx(jn,{type:"submit",variant:"primary",children:P?"Gncelle":"Ekle"})]})]})]}),c.jsx("div",{className:"lg:w-2/3 p-8 overflow-y-auto bg-white/40",children:c.jsxs("div",{className:"space-y-6",children:[Object.entries(be).map(([W,we])=>{const Te=te[W]??!1;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[c.jsx("div",{onClick:()=>L(W),className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Te?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:Te?c.jsx(Re.ChevronDown,{className:"transform rotate-180"}):c.jsx(Re.ChevronDown,{})}),c.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:W}),c.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs font-bold px-2 py-0.5 rounded-md",children:we.length})]})}),Te&&c.jsx("div",{className:"p-6 bg-gray-50/50 border-t border-gray-100 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-fadeIn",children:we.map(Y=>{const pe=C(Y.value,Y.currency);return c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-1 truncate",title:Y.name,children:Y.name}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:Y.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})}),c.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[Y.currency!=="None"?Y.currency:""," ",Y.unit?`/ ${Y.unit}`:""]})]}),Y.currency!=="TRY"&&Y.currency!=="None"&&c.jsxs("div",{className:"text-[10px] text-emerald-600 font-bold bg-emerald-50 inline-block px-2 py-0.5 rounded",children:["~ ",pe.toFixed(2)," "]}),c.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 backdrop-blur p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>Ze(Y),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Re.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>E(Y.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Re.Trash,{className:"w-3 h-3"})})]})]},Y.id)})})]},W)}),o.length===0&&c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Re.Variable,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Henz sabit deer eklenmemi."})]})]})})]})]})}),c.jsx(Gg,{isOpen:Z,onClose:()=>X(!1),title:P?"Fiyatlandrmay Dzenle":"Yeni Fiyatlandrma",maxWidth:"max-w-7xl",children:c.jsxs("form",{id:"pricingForm",onSubmit:_e,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx(un,{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",value:ge.title,onChange:W=>R({...ge,title:W.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx(un,{placeholder:"adet, m3, kg...",value:ge.unitType,onChange:W=>R({...ge,unitType:W.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Maliyet Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:ne,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),ge.rows.map((W,we)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsx("div",{className:"w-full xl:w-64 shrink-0",children:c.jsx("input",{placeholder:"Adm Ad (rn: Ham Madde)",className:"w-full text-sm font-medium border-0 border-b border-gray-200 focus:ring-0 px-0 bg-transparent",value:W.name,onChange:Te=>se(we,Te.target.value)})}),c.jsx("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:c.jsx(Em,{ops:W.ops,onChange:Te=>me(we,Te),allowRefs:!0,rows:ge.rows.slice(0,we),constants:o})}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:M(W.ops,I({...ge,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>V(we),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Re.Trash,{})})]})]},W.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Re.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:ge.finalCurrency,onChange:W=>R({...ge,finalCurrency:W.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Em,{ops:ge.finalFormula.ops,onChange:W=>R({...ge,finalFormula:{...ge.finalFormula,ops:W}}),allowRefs:!0,rows:ge.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[Le.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:ge.finalCurrency})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(jn,{type:"button",variant:"secondary",onClick:()=>X(!1),children:"ptal"}),c.jsx(jn,{type:"submit",variant:"primary",children:"Kaydet"})]})]})})]})}const ga={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},gl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},sb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],e4=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Tm=2.5,js=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function t4(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState([]),[f,p]=J.useState(new Date),[y,x]=J.useState(!1),[_,S]=J.useState(!1),[j,H]=J.useState(null),[Z,X]=J.useState(new Date),[P,ee]=J.useState(!1),[te,ye]=J.useState(new Date().getFullYear()),[fe,Ee]=J.useState(!1),[ge,R]=J.useState(null),[N,C]=J.useState({type:"work",overtimeSlots:0,lateness:0}),[k,A]=J.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});J.useEffect(()=>{const V=ms.onAuthStateChanged(Be=>{e(Be),r(!1)}),se=Jn(jt(Ye,"employees"),gs("name","asc")),me=Cn(se,Be=>{u(Be.docs.map(Pe=>({id:Pe.id,...Pe.data()})))}),_e=setInterval(()=>p(new Date),6e4);return()=>{V(),me(),clearInterval(_e)}},[]);const M=V=>{const se=f.toISOString().split("T")[0],me=f.getDay(),_e=f.getHours(),Be=f.getMinutes(),Pe=_e*60+Be,W=V.attendance?.[se];if(W){if(["paid_leave","unpaid_leave"].includes(W.type))return gl.LEAVE;if(W.overtimeSlots>0)return gl.OVERTIME}const[we,Te]=V.startHour.split(":").map(Number),[Y,pe]=V.endHour.split(":").map(Number),ae=we*60+Te,Ie=Y*60+pe;return V.workDays.includes(me)?Pe>=ae&&Pe<Ie?gl.ONLINE:Pe>=Ie&&W?.overtimeSlots>0?gl.OVERTIME:gl.OFFLINE:gl.OFFLINE},I=V=>{if(!V.attendance)return{used:0,remaining:V.vacationTotal};let se=0;return Object.values(V.attendance).forEach(me=>{me.type==="paid_leave"&&se++}),{used:se,remaining:V.vacationTotal-se}},de=(V,se)=>{const me=se.getFullYear(),_e=se.getMonth(),Be=new Date(me,_e+1,0).getDate();let Pe=0,W=0,we=0,Te=0,Y=0;for(let Me=1;Me<=Be;Me++){const Ct=`${me}-${String(_e+1).padStart(2,"0")}-${String(Me).padStart(2,"0")}`,Ht=new Date(Ct).getDay(),Rt=V.attendance?.[Ct],vn=V.workDays.includes(Ht);Rt?(Rt.type==="work"&&Pe++,Rt.type==="paid_leave"&&Y++,Rt.type==="unpaid_leave"&&Te++,Rt.overtimeSlots&&(W+=parseInt(Rt.overtimeSlots)),Rt.lateness&&(we+=parseFloat(Rt.lateness))):vn&&Pe++}const pe=parseFloat(V.salaryAmount)||0,ae=V.customDailyRate&&parseFloat(V.customDailyRate)>0?parseFloat(V.customDailyRate):pe/30,Ie=parseFloat(V.customDeductionRate),Qe=!isNaN(Ie)&&Ie>0?Ie:ae,Se=ae/9,F=V.customOvertimeMultiplier?parseFloat(V.customOvertimeMultiplier):1.5,he=W*Tm,je=he*(Se*F),Fe=Te*Qe,ve=we*Se,Ne=Fe+ve,ot=pe+je-Ne+(parseFloat(V.insurance)||0)+(parseFloat(V.allowance)||0);return{workedDays:Pe,totalOvertimeSlots:W,totalOvertimeHours:he,unpaidLeaveDays:Te,paidLeaveDays:Y,overtimePay:je,totalLatenessHours:we,latenessDeduction:ve,totalDeduction:Ne,totalSalary:ot,dailyRate:ae,hourlyRate:Se,deductionRate:Qe}},Le=(V,se)=>{const me=new Date(V,se,1);let _e=0;return o.forEach(Be=>{_e+=de(Be,me).totalSalary}),_e},K=J.useMemo(()=>{let V=0,se=0;const me=new Date(Z);return me.setMonth(Z.getMonth()-1),o.forEach(_e=>{V+=de(_e,Z).totalSalary,se+=de(_e,me).totalSalary}),{thisMonthTotal:V,lastMonthTotal:se}},[o,Z]),le=()=>{S(!1),A({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},be=()=>{j&&(S(!0),A({name:j.name,role:j.role,salaryType:j.salaryType,salaryAmount:j.salaryAmount,insurance:j.insurance,allowance:j.allowance,vacationTotal:j.vacationTotal,workDays:j.workDays,startHour:j.startHour,endHour:j.endHour,customDailyRate:j.customDailyRate||"",customOvertimeMultiplier:j.customOvertimeMultiplier||"1.5",customDeductionRate:j.customDeductionRate||"",attendance:j.attendance||{}}),H(null),x(!0))},ze=async V=>{V.preventDefault();try{const se={...k,updatedAt:new Date().toISOString()};_&&j?await oi(tn(Ye,"employees",j.id),se):await Ii(jt(Ye,"employees"),{...se,createdAt:new Date().toISOString()}),x(!1)}catch(se){alert("Hata: "+se.message)}},Ze=async V=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Vr(tn(Ye,"employees",V)),H(null))},E=(V,se)=>{R(V),C({type:se?.type||"work",overtimeSlots:se?.overtimeSlots||0,lateness:se?.lateness||0}),Ee(!0)},L=async V=>{if(V.preventDefault(),!j||!ge)return;const se={...j.attendance};se[ge]={type:N.type,overtimeSlots:parseInt(N.overtimeSlots)||0,lateness:parseFloat(N.lateness)||0},await oi(tn(Ye,"employees",j.id),{attendance:se}),H({...j,attendance:se}),Ee(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(ga.Lock,{})," Yetkisiz Eriim"]});const ne=({employee:V,date:se,onDateClick:me})=>{const _e=se.getFullYear(),Be=se.getMonth(),Pe=new Date(_e,Be+1,0).getDate(),W=new Date(_e,Be,1).getDay(),we=[];for(let Te=0;Te<W;Te++)we.push(null);for(let Te=1;Te<=Pe;Te++)we.push(Te);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:sb.map((Te,Y)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:Te.slice(0,3)},Y))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.map((Te,Y)=>{if(!Te)return c.jsx("div",{},Y);const pe=`${_e}-${String(Be+1).padStart(2,"0")}-${String(Te).padStart(2,"0")}`,ae=V.attendance?.[pe],Ie=new Date(pe).getDay(),Qe=V.workDays.includes(Ie);let Se="bg-gray-50 text-gray-400 border-gray-100";return Qe&&(Se="bg-white border-emerald-200 text-gray-700 shadow-sm"),ae&&(ae.type==="paid_leave"&&(Se="bg-yellow-50 border-yellow-200 text-yellow-700"),ae.type==="unpaid_leave"&&(Se="bg-red-50 border-red-200 text-red-700"),ae.type==="work"&&(ae.overtimeSlots>0||ae.lateness>0)&&(Se="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),ae.type==="off"&&(Se="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>me(pe,ae),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${Se}`,children:[c.jsx("span",{className:"text-sm",children:Te}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[ae?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",ae.overtimeSlots,"M"]}),ae?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",ae.lateness,"s"]})]})]},Y)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ee(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",Z.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:js(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(ga.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ee(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:js(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:le,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(ga.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(V=>{const se=M(V),me=I(V);return c.jsxs("div",{onClick:()=>H(V),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${se.color} ${se.ring} ring-offset-2 ring-2`,children:se.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(ga.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:V.name}),c.jsx("p",{className:"text-sm text-gray-500",children:V.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[V.startHour," - ",V.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[me.remaining," gn kald"]})]})]})]},V.id)})}),j&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:j.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:j.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:j.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:be,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(ga.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ze(j.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(ga.Trash,{})}),c.jsx("button",{onClick:()=>H(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",Z.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const V=de(j,Z);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:js(V.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:js(Number(j.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",V.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",js(V.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",V.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",js(V.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",V.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",js(V.totalDeduction-V.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",js(Number(j.insurance)+Number(j.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Tm," Saat",c.jsx("br",{}),"Saatlik cret = ",js(V.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",js(V.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>X(new Date(Z.setMonth(Z.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Z.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>X(new Date(Z.setMonth(Z.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(ne,{employee:j,date:Z,onDateClick:E})]})]})]})}),P&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ee(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(ga.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>ye(V=>V-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:te}),c.jsx("button",{onClick:()=>ye(V=>V+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e4.map((V,se)=>{const me=Le(te,se),_e=new Date().getMonth()===se&&new Date().getFullYear()===te;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${_e?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${_e?"text-indigo-200":"text-gray-400"}`,children:V}),c.jsx("div",{className:`text-lg font-bold ${_e?"text-white":"text-gray-800"}`,children:me>0?js(me):"-"})]},V)})})]})}),y&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:ze,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:V=>A({...k,name:V.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:V=>A({...k,role:V.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:V=>A({...k,salaryType:V.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:V=>A({...k,salaryAmount:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:V=>A({...k,insurance:V.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:V=>A({...k,allowance:V.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:V=>A({...k,customDailyRate:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:V=>A({...k,customOvertimeMultiplier:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:V=>A({...k,customDeductionRate:V.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:V=>A({...k,vacationTotal:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:V=>A({...k,startHour:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:V=>A({...k,endHour:V.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:sb.map((V,se)=>c.jsx("button",{type:"button",onClick:()=>{const me=k.workDays.includes(se)?k.workDays.filter(_e=>_e!==se):[...k.workDays,se];A({...k,workDays:me})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(se)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:V.slice(0,3)},V))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),fe&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:ge}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(V=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:V.id,checked:N.type===V.id,onChange:se=>C({...N,type:se.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:V.label})]},V.id))})]}),N.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Tm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(V=>c.jsx("button",{type:"button",onClick:()=>C({...N,overtimeSlots:N.overtimeSlots===V?0:V}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${N.overtimeSlots===V?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:V},V))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:N.lateness,onChange:V=>C({...N,lateness:V.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>Ee(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function n4(){const[i,e]=J.useState(null),[s,r]=J.useState(!0),[o,u]=J.useState("dashboard"),[f,p]=J.useState(!1);J.useEffect(()=>{const j=oS(ms,H=>{e(H),r(!1)});return()=>j()},[]);const y=async()=>{try{await cS(ms)}catch(j){console.error("k yaplrken hata:",j)}},x={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:x.Home},{id:"musteriler",label:"Mteriler",icon:x.Users},{id:"urunler",label:"rnler",icon:x.Box},{id:"stok",label:"Stok Durumu",icon:x.Chart},{id:"siparis",label:"Sipari Formu",icon:x.Cart},{id:"teklif",label:"Teklif Formu",icon:x.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:x.Calculator},{id:"calisan",label:"alanlar",icon:x.Briefcase}],S=()=>{switch(o){case"dashboard":return c.jsx(Zv,{onNavigate:u});case"musteriler":return c.jsx(BC,{});case"urunler":return c.jsx(GC,{});case"stok":return c.jsx(QC,{});case"siparis":return c.jsx(qC,{});case"teklif":return c.jsx(XC,{});case"fiyatlandirma":return c.jsx(JC,{});case"calisan":return c.jsx(t4,{});default:return c.jsx(Zv,{onNavigate:u})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(x.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(j=>c.jsxs("button",{onClick:()=>{u(j.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===j.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===j.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(j.icon,{})}),j.label]},j.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(x.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(x.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:S()})})]})]}):c.jsx(VC,{})}b2.createRoot(document.getElementById("root")).render(c.jsx(J.StrictMode,{children:c.jsx(n4,{})}));
