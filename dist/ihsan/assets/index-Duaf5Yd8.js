(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function f2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var sm={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function m2(){if(px)return Go;px=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Go.Fragment=e,Go.jsx=s,Go.jsxs=s,Go}var gx;function p2(){return gx||(gx=1,sm.exports=m2()),sm.exports}var c=p2(),im={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function g2(){if(yx)return Ke;yx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function q(E){return E===null||typeof E!="object"?null:(E=A&&E[A]||E["@@iterator"],typeof E=="function"?E:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,U={};function ie(E,L,H){this.props=E,this.context=L,this.refs=U,this.updater=H||W}ie.prototype.isReactComponent={},ie.prototype.setState=function(E,L){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,L,"setState")},ie.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function ne(){}ne.prototype=ie.prototype;function ge(E,L,H){this.props=E,this.context=L,this.refs=U,this.updater=H||W}var he=ge.prototype=new ne;he.constructor=ge,J(he,ie.prototype),he.isPureReactComponent=!0;var ve=Array.isArray;function fe(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function j(E,L,H){var M=H.ref;return{$$typeof:i,type:E,key:L,ref:M!==void 0?M:null,props:H}}function k(E,L){return j(E.type,L,E.props)}function R(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function O(E){var L={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(H){return L[H]})}var I=/\/+/g;function pe(E,L){return typeof E=="object"&&E!==null&&E.key!=null?O(""+E.key):L.toString(36)}function ze(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(fe,fe):(E.status="pending",E.then(function(L){E.status==="pending"&&(E.status="fulfilled",E.value=L)},function(L){E.status==="pending"&&(E.status="rejected",E.reason=L)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function K(E,L,H,M,te){var me=typeof E;(me==="undefined"||me==="boolean")&&(E=null);var we=!1;if(E===null)we=!0;else switch(me){case"bigint":case"string":case"number":we=!0;break;case"object":switch(E.$$typeof){case i:case e:we=!0;break;case _:return we=E._init,K(we(E._payload),L,H,M,te)}}if(we)return te=te(E),we=M===""?"."+pe(E,0):M,ve(te)?(H="",we!=null&&(H=we.replace(I,"$&/")+"/"),K(te,L,H,"",function(se){return se})):te!=null&&(R(te)&&(te=k(te,H+(te.key==null||E&&E.key===te.key?"":(""+te.key).replace(I,"$&/")+"/")+we)),L.push(te)),1;we=0;var He=M===""?".":M+":";if(ve(E))for(var Ue=0;Ue<E.length;Ue++)M=E[Ue],me=He+pe(M,Ue),we+=K(M,L,H,me,te);else if(Ue=q(E),typeof Ue=="function")for(E=Ue.call(E),Ue=0;!(M=E.next()).done;)M=M.value,me=He+pe(M,Ue++),we+=K(M,L,H,me,te);else if(me==="object"){if(typeof E.then=="function")return K(ze(E),L,H,M,te);throw L=String(E),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return we}function P(E,L,H){if(E==null)return E;var M=[],te=0;return K(E,M,"","",function(me){return L.call(H,me,te++)}),M}function re(E){if(E._status===-1){var L=E._result;L=L(),L.then(function(H){(E._status===0||E._status===-1)&&(E._status=1,E._result=H)},function(H){(E._status===0||E._status===-1)&&(E._status=2,E._result=H)}),E._status===-1&&(E._status=0,E._result=L)}if(E._status===1)return E._result.default;throw E._result}var be=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Ce={map:P,forEach:function(E,L,H){P(E,function(){L.apply(this,arguments)},H)},count:function(E){var L=0;return P(E,function(){L++}),L},toArray:function(E){return P(E,function(L){return L})||[]},only:function(E){if(!R(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Ke.Activity=T,Ke.Children=Ce,Ke.Component=ie,Ke.Fragment=s,Ke.Profiler=o,Ke.PureComponent=ge,Ke.StrictMode=r,Ke.Suspense=y,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(E){return C.H.useMemoCache(E)}},Ke.cache=function(E){return function(){return E.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(E,L,H){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var M=J({},E.props),te=E.key;if(L!=null)for(me in L.key!==void 0&&(te=""+L.key),L)!S.call(L,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&L.ref===void 0||(M[me]=L[me]);var me=arguments.length-2;if(me===1)M.children=H;else if(1<me){for(var we=Array(me),He=0;He<me;He++)we[He]=arguments[He+2];M.children=we}return j(E.type,te,M)},Ke.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},Ke.createElement=function(E,L,H){var M,te={},me=null;if(L!=null)for(M in L.key!==void 0&&(me=""+L.key),L)S.call(L,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(te[M]=L[M]);var we=arguments.length-2;if(we===1)te.children=H;else if(1<we){for(var He=Array(we),Ue=0;Ue<we;Ue++)He[Ue]=arguments[Ue+2];te.children=He}if(E&&E.defaultProps)for(M in we=E.defaultProps,we)te[M]===void 0&&(te[M]=we[M]);return j(E,me,te)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(E){return{$$typeof:g,render:E}},Ke.isValidElement=R,Ke.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:re}},Ke.memo=function(E,L){return{$$typeof:x,type:E,compare:L===void 0?null:L}},Ke.startTransition=function(E){var L=C.T,H={};C.T=H;try{var M=E(),te=C.S;te!==null&&te(H,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(fe,be)}catch(me){be(me)}finally{L!==null&&H.types!==null&&(L.types=H.types),C.T=L}},Ke.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ke.use=function(E){return C.H.use(E)},Ke.useActionState=function(E,L,H){return C.H.useActionState(E,L,H)},Ke.useCallback=function(E,L){return C.H.useCallback(E,L)},Ke.useContext=function(E){return C.H.useContext(E)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(E,L){return C.H.useDeferredValue(E,L)},Ke.useEffect=function(E,L){return C.H.useEffect(E,L)},Ke.useEffectEvent=function(E){return C.H.useEffectEvent(E)},Ke.useId=function(){return C.H.useId()},Ke.useImperativeHandle=function(E,L,H){return C.H.useImperativeHandle(E,L,H)},Ke.useInsertionEffect=function(E,L){return C.H.useInsertionEffect(E,L)},Ke.useLayoutEffect=function(E,L){return C.H.useLayoutEffect(E,L)},Ke.useMemo=function(E,L){return C.H.useMemo(E,L)},Ke.useOptimistic=function(E,L){return C.H.useOptimistic(E,L)},Ke.useReducer=function(E,L,H){return C.H.useReducer(E,L,H)},Ke.useRef=function(E){return C.H.useRef(E)},Ke.useState=function(E){return C.H.useState(E)},Ke.useSyncExternalStore=function(E,L,H){return C.H.useSyncExternalStore(E,L,H)},Ke.useTransition=function(){return C.H.useTransition()},Ke.version="19.2.0",Ke}var xx;function np(){return xx||(xx=1,im.exports=g2()),im.exports}var X=np();const lb=f2(X);var rm={exports:{}},Yo={},am={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function y2(){return vx||(vx=1,(function(i){function e(K,P){var re=K.length;K.push(P);e:for(;0<re;){var be=re-1>>>1,Ce=K[be];if(0<o(Ce,P))K[be]=P,K[re]=Ce,re=be;else break e}}function s(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var P=K[0],re=K.pop();if(re!==P){K[0]=re;e:for(var be=0,Ce=K.length,E=Ce>>>1;be<E;){var L=2*(be+1)-1,H=K[L],M=L+1,te=K[M];if(0>o(H,re))M<Ce&&0>o(te,H)?(K[be]=te,K[M]=re,be=M):(K[be]=H,K[L]=re,be=L);else if(M<Ce&&0>o(te,re))K[be]=te,K[M]=re,be=M;else break e}}return P}function o(K,P){var re=K.sortIndex-P.sortIndex;return re!==0?re:K.id-P.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var y=[],x=[],_=1,T=null,A=3,q=!1,W=!1,J=!1,U=!1,ie=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function he(K){for(var P=s(x);P!==null;){if(P.callback===null)r(x);else if(P.startTime<=K)r(x),P.sortIndex=P.expirationTime,e(y,P);else break;P=s(x)}}function ve(K){if(J=!1,he(K),!W)if(s(y)!==null)W=!0,fe||(fe=!0,O());else{var P=s(x);P!==null&&ze(ve,P.startTime-K)}}var fe=!1,C=-1,S=5,j=-1;function k(){return U?!0:!(i.unstable_now()-j<S)}function R(){if(U=!1,fe){var K=i.unstable_now();j=K;var P=!0;try{e:{W=!1,J&&(J=!1,ne(C),C=-1),q=!0;var re=A;try{t:{for(he(K),T=s(y);T!==null&&!(T.expirationTime>K&&k());){var be=T.callback;if(typeof be=="function"){T.callback=null,A=T.priorityLevel;var Ce=be(T.expirationTime<=K);if(K=i.unstable_now(),typeof Ce=="function"){T.callback=Ce,he(K),P=!0;break t}T===s(y)&&r(y),he(K)}else r(y);T=s(y)}if(T!==null)P=!0;else{var E=s(x);E!==null&&ze(ve,E.startTime-K),P=!1}}break e}finally{T=null,A=re,q=!1}P=void 0}}finally{P?O():fe=!1}}}var O;if(typeof ge=="function")O=function(){ge(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,pe=I.port2;I.port1.onmessage=R,O=function(){pe.postMessage(null)}}else O=function(){ie(R,0)};function ze(K,P){C=ie(function(){K(i.unstable_now())},P)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(K){switch(A){case 1:case 2:case 3:var P=3;break;default:P=A}var re=A;A=P;try{return K()}finally{A=re}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(K,P){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=A;A=K;try{return P()}finally{A=re}},i.unstable_scheduleCallback=function(K,P,re){var be=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?be+re:be):re=be,K){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=re+Ce,K={id:_++,callback:P,priorityLevel:K,startTime:re,expirationTime:Ce,sortIndex:-1},re>be?(K.sortIndex=re,e(x,K),s(y)===null&&K===s(x)&&(J?(ne(C),C=-1):J=!0,ze(ve,re-be))):(K.sortIndex=Ce,e(y,K),W||q||(W=!0,fe||(fe=!0,O()))),K},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(K){var P=A;return function(){var re=A;A=P;try{return K.apply(this,arguments)}finally{A=re}}}})(lm)),lm}var bx;function x2(){return bx||(bx=1,am.exports=y2()),am.exports}var om={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function v2(){if(_x)return Nn;_x=1;var i=np();function e(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,x,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:x,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Nn.createPortal=function(y,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(y,x,null,_)},Nn.flushSync=function(y){var x=f.T,_=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=x,r.p=_,r.d.f()}},Nn.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(y,x))},Nn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Nn.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var _=x.as,T=g(_,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,q=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:q}):_==="script"&&r.d.X(y,{crossOrigin:T,integrity:A,fetchPriority:q,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Nn.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=g(x.as,x.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(y)},Nn.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,T=g(_,x.crossOrigin);r.d.L(y,_,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Nn.preloadModule=function(y,x){if(typeof y=="string")if(x){var _=g(x.as,x.crossOrigin);r.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(y)},Nn.requestFormReset=function(y){r.d.r(y)},Nn.unstable_batchedUpdates=function(y,x){return y(x)},Nn.useFormState=function(y,x,_){return f.H.useFormState(y,x,_)},Nn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var wx;function b2(){if(wx)return om.exports;wx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),om.exports=v2(),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function _2(){if(Ex)return Yo;Ex=1;var i=x2(),e=np(),s=b2();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function x(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return y(h),t;if(m===l)return y(h),n;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=m;break}if(w===l){v=!0,l=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,l=h;break}if(w===l){v=!0,l=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case ie:return"Profiler";case U:return"StrictMode";case ve:return"Suspense";case fe:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case ge:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case he:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return n=t.displayName||null,n!==null?n:pe(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return pe(t(n))}catch{}}return null}var ze=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},be=[],Ce=-1;function E(t){return{current:t}}function L(t){0>Ce||(t.current=be[Ce],be[Ce]=null,Ce--)}function H(t,n){Ce++,be[Ce]=t.current,t.current=n}var M=E(null),te=E(null),me=E(null),we=E(null);function He(t,n){switch(H(me,n),H(te,t),H(M,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Py(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Py(n),t=Uy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(M),H(M,t)}function Ue(){L(M),L(te),L(me)}function se(t){t.memoizedState!==null&&H(we,t);var n=M.current,a=Uy(n,t.type);n!==a&&(H(te,t),H(M,a))}function Ee(t){te.current===t&&(L(M),L(te)),we.current===t&&(L(we),Bo._currentValue=re)}var Te,$;function xe(t){if(Te===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Te=n&&n[1]||"",$=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+t+$}var le=!1;function Ie(t,n){if(!t||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var Y=ee}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(ee){Y=ee}t.call(ue.prototype)}}else{try{throw Error()}catch(ee){Y=ee}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&Y&&typeof ee.stack=="string")return[ee.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var D=v.split(`
`),G=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===G.length)for(l=D.length-1,h=G.length-1;1<=l&&0<=h&&D[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==G[h]){var ae=`
`+D[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=h);break}}}finally{le=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?xe(a):""}function Qe(t,n){switch(t.tag){case 26:case 27:case 5:return xe(t.type);case 16:return xe("Lazy");case 13:return t.child!==n&&n!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return Ie(t.type,!1);case 11:return Ie(t.type.render,!1);case 1:return Ie(t.type,!0);case 31:return xe("Activity");default:return""}}function Se(t){try{var n="",a=null;do n+=Qe(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var tt=Object.prototype.hasOwnProperty,rt=i.unstable_scheduleCallback,Pt=i.unstable_cancelCallback,Fi=i.unstable_shouldYield,Rn=i.unstable_requestPaint,qt=i.unstable_now,_s=i.unstable_getCurrentPriorityLevel,ws=i.unstable_ImmediatePriority,Es=i.unstable_UserBlockingPriority,Q=i.unstable_NormalPriority,ye=i.unstable_LowPriority,Me=i.unstable_IdlePriority,Je=i.log,qe=i.unstable_setDisableYieldValue,je=null,Pe=null;function Xe(t){if(typeof Je=="function"&&qe(t),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(je,t)}catch{}}var nt=Math.clz32?Math.clz32:at,Ts=Math.log,Gn=Math.LN2;function at(t){return t>>>=0,t===0?32:31-(Ts(t)/Gn|0)|0}var At=256,Dt=262144,jt=4194304;function dn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Wt(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=dn(l):(v&=w,v!==0?h=dn(v):a||(a=w&~t,a!==0&&(h=dn(a))))):(w=l&~m,w!==0?h=dn(w):v!==0?h=dn(v):a||(a=l&~t,a!==0&&(h=dn(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function Yn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ah(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rc(){var t=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),t}function zs(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Gr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lh(t,n,a,l,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var ae=31-nt(a),ue=1<<ae;w[ae]=0,D[ae]=-1;var Y=G[ae];if(Y!==null)for(G[ae]=null,ae=0;ae<Y.length;ae++){var ee=Y[ae];ee!==null&&(ee.lane&=-536870913)}a&=~ue}l!==0&&Yr(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~n))}function Yr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-nt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Gl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-nt(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function Yl(t,n){var a=n&-n;return a=(a&42)!==0?1:Kr(a),(a&(t.suspendedLanes|n))!==0?0:a}function Kr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function mi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ic(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:ox(t.type))}function Ns(t,n){var a=P.p;try{return P.p=t,n()}finally{P.p=a}}var Ss=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Ss,hn="__reactProps$"+Ss,Bs="__reactContainer$"+Ss,Da="__reactEvents$"+Ss,oh="__reactListeners$"+Ss,kc="__reactHandles$"+Ss,Dc="__reactResources$"+Ss,qs="__reactMarker$"+Ss;function Ma(t){delete t[Zt],delete t[hn],delete t[Da],delete t[oh],delete t[kc]}function Hs(t){var n=t[Zt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Bs]||a[Zt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Yy(t);t!==null;){if(a=t[Zt])return a;t=Yy(t)}return n}t=a,a=t.parentNode}return null}function ls(t){if(t=t[Zt]||t[Bs]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Kn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Fs(t){var n=t[Dc];return n||(n=t[Dc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Jt(t){t[qs]=!0}var Kl=new Set,$l={};function Gs(t,n){Ys(t,n),Ys(t+"Capture",n)}function Ys(t,n){for($l[t]=n,t=0;t<n.length;t++)Kl.add(n[t])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Wl={};function Mc(t){return tt.call(Wl,t)?!0:tt.call(Xl,t)?!1:Ql.test(t)?Wl[t]=!0:(Xl[t]=!0,!1)}function Oa(t,n,a){if(Mc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function $n(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function en(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Zl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function vt(t){if(!t._valueTracker){var n=Gi(t)?"checked":"value";t._valueTracker=Zl(t,n,""+t[n])}}function $r(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Gi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qr=/[\n"\\]/g;function On(t){return t.replace(Qr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Va(t,n,a,l,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+fn(n)):t.value!==""+fn(n)&&(t.value=""+fn(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?Jl(t,v,fn(n)):a!=null?Jl(t,v,fn(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+fn(w):t.removeAttribute("name")}function Oc(t,n,a,l,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){vt(t);return}a=a!=null?""+fn(a):"",n=n!=null?""+fn(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),vt(t)}function Jl(t,n,a){n==="number"&&Ks(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Vc(t,n,a){if(n!=null&&(n=""+fn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+fn(a):""}function Ki(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(ze(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=fn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),vt(t)}function Vn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eo(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Lc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function to(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&eo(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&eo(t,m,n[m])}function La(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return $i.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function As(){}var no=null;function os(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qi=null,$s=null;function Xr(t){var n=ls(t);if(n&&(t=n.stateNode)){var a=t[hn]||null;e:switch(t=n.stateNode,n.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+On(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[hn]||null;if(!h)throw Error(r(90));Va(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&$r(l)}break e;case"textarea":Vc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Yi(t,!!a.multiple,n,!1)}}}var Ua=!1;function Xi(t,n,a){if(Ua)return t(n,a);Ua=!0;try{var l=t(n);return l}finally{if(Ua=!1,(Qi!==null||$s!==null)&&(Iu(),Qi&&(n=Qi,t=$s,$s=Qi=null,Xr(n),t)))for(n=0;n<t.length;n++)Xr(t[n])}}function js(t,n){var a=t.stateNode;if(a===null)return null;var l=a[hn]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wr=!1;if(cs)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Wr=!1}var Qs=null,so=null,Zr=null;function io(){if(Zr)return Zr;var t,n=so,a=n.length,l,h="value"in Qs?Qs.value:Qs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&n[a-l]===h[m-l];l++);return Zr=h.slice(t,1<l?1-l:void 0)}function Jr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function pi(){return!0}function Cs(){return!1}function gn(t){function n(a,l,h,m,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pi:Cs,this.isPropagationStopped=Cs,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),n}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=gn(gi),Wi=T({},gi,{view:0,detail:0}),ro=gn(Wi),Zi,za,Ws,Ba=T({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ws&&(Ws&&t.type==="mousemove"?(Zi=t.screenX-Ws.screenX,za=t.screenY-Ws.screenY):za=Zi=0,Ws=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:za}}),ao=gn(Ba),ea=T({},Ba,{dataTransfer:0}),Uc=gn(ea),zc=T({},Wi,{relatedTarget:0}),ta=gn(zc),lo=T({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bc=gn(lo),qa=T({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qc=gn(qa),Hc=T({},gi,{data:0}),Zs=gn(Hc),Fc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Yc[t])?!!n[t]:!1}function Ji(){return Kc}var In=T({},Wi,{key:function(t){if(t.key){var n=Fc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(t){return t.type==="keypress"?Jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$c=gn(In),Qc=T({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yi=gn(Qc),d=T({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),p=gn(d),b=T({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=gn(b),B=T({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=gn(B),_e=T({},gi,{newState:0,oldState:0}),We=gn(_e),Gt=[9,13,27,32],gt=cs&&"CompositionEvent"in window,Ut=null;cs&&"documentMode"in document&&(Ut=document.documentMode);var us=cs&&"TextEvent"in window&&!Ut,Js=cs&&(!gt||Ut&&8<Ut&&11>=Ut),Rs=" ",Is=!1;function na(t,n){switch(t){case"keyup":return Gt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function L1(t,n){switch(t){case"compositionend":return Ha(n);case"keypress":return n.which!==32?null:(Is=!0,Rs);case"textInput":return t=n.data,t===Rs&&Is?null:t;default:return null}}function P1(t,n){if(Fa)return t==="compositionend"||!gt&&na(t,n)?(t=io(),Zr=so=Qs=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Js&&n.locale!=="ko"?null:n.data;default:return null}}var U1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!U1[t.type]:n==="textarea"}function Xp(t,n,a,l){Qi?$s?$s.push(l):$s=[l]:Qi=l,n=Pu(n,"onChange"),0<n.length&&(a=new Xs("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var oo=null,co=null;function z1(t){ky(t,0)}function Xc(t){var n=Kn(t);if($r(n))return t}function Wp(t,n){if(t==="change")return n}var Zp=!1;if(cs){var ch;if(cs){var uh="oninput"in document;if(!uh){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),uh=typeof Jp.oninput=="function"}ch=uh}else ch=!1;Zp=ch&&(!document.documentMode||9<document.documentMode)}function eg(){oo&&(oo.detachEvent("onpropertychange",tg),co=oo=null)}function tg(t){if(t.propertyName==="value"&&Xc(co)){var n=[];Xp(n,co,t,os(t)),Xi(z1,n)}}function B1(t,n,a){t==="focusin"?(eg(),oo=n,co=a,oo.attachEvent("onpropertychange",tg)):t==="focusout"&&eg()}function q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xc(co)}function H1(t,n){if(t==="click")return Xc(n)}function F1(t,n){if(t==="input"||t==="change")return Xc(n)}function G1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Qn=typeof Object.is=="function"?Object.is:G1;function uo(t,n){if(Qn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!tt.call(n,h)||!Qn(t[h],n[h]))return!1}return!0}function ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sg(t,n){var a=ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ng(a)}}function ig(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ig(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function rg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ks(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ks(t.document)}return n}function dh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Y1=cs&&"documentMode"in document&&11>=document.documentMode,Ga=null,hh=null,ho=null,fh=!1;function ag(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||Ga==null||Ga!==Ks(l)||(l=Ga,"selectionStart"in l&&dh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ho&&uo(ho,l)||(ho=l,l=Pu(hh,"onSelect"),0<l.length&&(n=new Xs("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ga)))}function sa(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ya={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},mh={},lg={};cs&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function ia(t){if(mh[t])return mh[t];if(!Ya[t])return t;var n=Ya[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in lg)return mh[t]=n[a];return t}var og=ia("animationend"),cg=ia("animationiteration"),ug=ia("animationstart"),K1=ia("transitionrun"),$1=ia("transitionstart"),Q1=ia("transitioncancel"),dg=ia("transitionend"),hg=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function ks(t,n){hg.set(t,n),Gs(n,[t])}var Wc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ds=[],Ka=0,gh=0;function Zc(){for(var t=Ka,n=gh=Ka=0;n<t;){var a=ds[n];ds[n++]=null;var l=ds[n];ds[n++]=null;var h=ds[n];ds[n++]=null;var m=ds[n];if(ds[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}m!==0&&fg(a,h,m)}}function Jc(t,n,a,l){ds[Ka++]=t,ds[Ka++]=n,ds[Ka++]=a,ds[Ka++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yh(t,n,a,l){return Jc(t,n,a,l),eu(t)}function ra(t,n){return Jc(t,null,null,n),eu(t)}function fg(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-nt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function eu(t){if(50<Mo)throw Mo=0,Af=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var $a={};function X1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,n,a,l){return new X1(t,n,a,l)}function xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xi(t,n){var a=t.alternate;return a===null?(a=Xn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function mg(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function tu(t,n,a,l,h,m){var v=0;if(l=t,typeof t=="function")xh(t)&&(v=1);else if(typeof t=="string")v=t2(t,a,M.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Xn(31,a,n,h),t.elementType=j,t.lanes=m,t;case J:return aa(a.children,h,m,n);case U:v=8,h|=24;break;case ie:return t=Xn(12,a,n,h|2),t.elementType=ie,t.lanes=m,t;case ve:return t=Xn(13,a,n,h),t.elementType=ve,t.lanes=m,t;case fe:return t=Xn(19,a,n,h),t.elementType=fe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ge:v=10;break e;case ne:v=9;break e;case he:v=11;break e;case C:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=Xn(v,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function aa(t,n,a,l){return t=Xn(7,t,l,n),t.lanes=a,t}function vh(t,n,a){return t=Xn(6,t,null,n),t.lanes=a,t}function pg(t){var n=Xn(18,null,null,0);return n.stateNode=t,n}function bh(t,n,a){return n=Xn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var gg=new WeakMap;function hs(t,n){if(typeof t=="object"&&t!==null){var a=gg.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Se(n)},gg.set(t,n),n)}return{value:t,source:n,stack:Se(n)}}var Qa=[],Xa=0,nu=null,fo=0,fs=[],ms=0,er=null,ei=1,ti="";function vi(t,n){Qa[Xa++]=fo,Qa[Xa++]=nu,nu=t,fo=n}function yg(t,n,a){fs[ms++]=ei,fs[ms++]=ti,fs[ms++]=er,er=t;var l=ei;t=ti;var h=32-nt(l)-1;l&=~(1<<h),a+=1;var m=32-nt(n)+h;if(30<m){var v=h-h%5;m=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ei=1<<32-nt(n)+h|a<<h|l,ti=m+t}else ei=1<<m|a<<h|l,ti=t}function _h(t){t.return!==null&&(vi(t,1),yg(t,1,0))}function wh(t){for(;t===nu;)nu=Qa[--Xa],Qa[Xa]=null,fo=Qa[--Xa],Qa[Xa]=null;for(;t===er;)er=fs[--ms],fs[ms]=null,ti=fs[--ms],fs[ms]=null,ei=fs[--ms],fs[ms]=null}function xg(t,n){fs[ms++]=ei,fs[ms++]=ti,fs[ms++]=er,ei=n.id,ti=n.overflow,er=t}var yn=null,Mt=null,ht=!1,tr=null,ps=!1,Eh=Error(r(519));function nr(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mo(hs(n,t)),Eh}function vg(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Zt]=t,n[hn]=l,a){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(a=0;a<Vo.length;a++)it(Vo[a],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":it("invalid",n),Oc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":it("invalid",n);break;case"textarea":it("invalid",n),Ki(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Vy(n.textContent,a)?(l.popover!=null&&(it("beforetoggle",n),it("toggle",n)),l.onScroll!=null&&it("scroll",n),l.onScrollEnd!=null&&it("scrollend",n),l.onClick!=null&&(n.onclick=As),n=!0):n=!1,n||nr(t,!0)}function bg(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:yn=yn.return}}function Wa(t){if(t!==yn)return!1;if(!ht)return bg(t),ht=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&Mt&&nr(t),bg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Mt=Gy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Mt=Gy(t)}else n===27?(n=Mt,gr(t.type)?(t=Kf,Kf=null,Mt=t):Mt=n):Mt=yn?ys(t.stateNode.nextSibling):null;return!0}function la(){Mt=yn=null,ht=!1}function Th(){var t=tr;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),tr=null),t}function mo(t){tr===null?tr=[t]:tr.push(t)}var Nh=E(null),oa=null,bi=null;function sr(t,n,a){H(Nh,n._currentValue),n._currentValue=a}function _i(t){t._currentValue=Nh.current,L(Nh)}function Sh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Ah(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Sh(m.return,a,t),l||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Sh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Za(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;Qn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===we.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Bo):t=[Bo])}h=h.return}t!==null&&Ah(n,t,a,l),n.flags|=262144}function su(t){for(t=t.firstContext;t!==null;){if(!Qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){oa=t,bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xn(t){return _g(oa,t)}function iu(t,n){return oa===null&&ca(t),_g(t,n)}function _g(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},bi===null){if(t===null)throw Error(r(308));bi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else bi=bi.next=n;return a}var W1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Z1=i.unstable_scheduleCallback,J1=i.unstable_NormalPriority,tn={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new W1,data:new Map,refCount:0}}function po(t){t.refCount--,t.refCount===0&&Z1(J1,function(){t.controller.abort()})}var go=null,Ch=0,Ja=0,el=null;function ew(t,n){if(go===null){var a=go=[];Ch=0,Ja=Df(),el={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ch++,n.then(wg,wg),n}function wg(){if(--Ch===0&&go!==null){el!==null&&(el.status="fulfilled");var t=go;go=null,Ja=0,el=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function tw(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Eg=K.S;K.S=function(t,n){ay=qt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&ew(t,n),Eg!==null&&Eg(t,n)};var ua=E(null);function Rh(){var t=ua.current;return t!==null?t:Ct.pooledCache}function ru(t,n){n===null?H(ua,ua.current):H(ua,n.pool)}function Tg(){var t=Rh();return t===null?null:{parent:tn._currentValue,pool:t}}var tl=Error(r(460)),Ih=Error(r(474)),au=Error(r(542)),lu={then:function(){}};function Ng(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sg(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(As,As),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jg(t),t;default:if(typeof n.status=="string")n.then(As,As);else{if(t=Ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jg(t),t}throw ha=n,tl}}function da(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ha=a,tl):a}}var ha=null;function Ag(){if(ha===null)throw Error(r(459));var t=ha;return ha=null,t}function jg(t){if(t===tl||t===au)throw Error(r(483))}var nl=null,yo=0;function ou(t){var n=yo;return yo+=1,nl===null&&(nl=[]),Sg(nl,t,n)}function xo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function cu(t,n){throw n.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Cg(t){function n(z,V){if(t){var F=z.deletions;F===null?(z.deletions=[V],z.flags|=16):F.push(V)}}function a(z,V){if(!t)return null;for(;V!==null;)n(z,V),V=V.sibling;return null}function l(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function h(z,V){return z=xi(z,V),z.index=0,z.sibling=null,z}function m(z,V,F){return z.index=F,t?(F=z.alternate,F!==null?(F=F.index,F<V?(z.flags|=67108866,V):F):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function v(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function w(z,V,F,oe){return V===null||V.tag!==6?(V=vh(F,z.mode,oe),V.return=z,V):(V=h(V,F),V.return=z,V)}function D(z,V,F,oe){var Oe=F.type;return Oe===J?ae(z,V,F.props.children,oe,F.key):V!==null&&(V.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===S&&da(Oe)===V.type)?(V=h(V,F.props),xo(V,F),V.return=z,V):(V=tu(F.type,F.key,F.props,null,z.mode,oe),xo(V,F),V.return=z,V)}function G(z,V,F,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=bh(F,z.mode,oe),V.return=z,V):(V=h(V,F.children||[]),V.return=z,V)}function ae(z,V,F,oe,Oe){return V===null||V.tag!==7?(V=aa(F,z.mode,oe,Oe),V.return=z,V):(V=h(V,F),V.return=z,V)}function ue(z,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=vh(""+V,z.mode,F),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case q:return F=tu(V.type,V.key,V.props,null,z.mode,F),xo(F,V),F.return=z,F;case W:return V=bh(V,z.mode,F),V.return=z,V;case S:return V=da(V),ue(z,V,F)}if(ze(V)||O(V))return V=aa(V,z.mode,F,null),V.return=z,V;if(typeof V.then=="function")return ue(z,ou(V),F);if(V.$$typeof===ge)return ue(z,iu(z,V),F);cu(z,V)}return null}function Y(z,V,F,oe){var Oe=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Oe!==null?null:w(z,V,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case q:return F.key===Oe?D(z,V,F,oe):null;case W:return F.key===Oe?G(z,V,F,oe):null;case S:return F=da(F),Y(z,V,F,oe)}if(ze(F)||O(F))return Oe!==null?null:ae(z,V,F,oe,null);if(typeof F.then=="function")return Y(z,V,ou(F),oe);if(F.$$typeof===ge)return Y(z,V,iu(z,F),oe);cu(z,F)}return null}function ee(z,V,F,oe,Oe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return z=z.get(F)||null,w(V,z,""+oe,Oe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case q:return z=z.get(oe.key===null?F:oe.key)||null,D(V,z,oe,Oe);case W:return z=z.get(oe.key===null?F:oe.key)||null,G(V,z,oe,Oe);case S:return oe=da(oe),ee(z,V,F,oe,Oe)}if(ze(oe)||O(oe))return z=z.get(F)||null,ae(V,z,oe,Oe,null);if(typeof oe.then=="function")return ee(z,V,F,ou(oe),Oe);if(oe.$$typeof===ge)return ee(z,V,F,iu(V,oe),Oe);cu(V,oe)}return null}function ke(z,V,F,oe){for(var Oe=null,mt=null,De=V,et=V=0,ot=null;De!==null&&et<F.length;et++){De.index>et?(ot=De,De=null):ot=De.sibling;var pt=Y(z,De,F[et],oe);if(pt===null){De===null&&(De=ot);break}t&&De&&pt.alternate===null&&n(z,De),V=m(pt,V,et),mt===null?Oe=pt:mt.sibling=pt,mt=pt,De=ot}if(et===F.length)return a(z,De),ht&&vi(z,et),Oe;if(De===null){for(;et<F.length;et++)De=ue(z,F[et],oe),De!==null&&(V=m(De,V,et),mt===null?Oe=De:mt.sibling=De,mt=De);return ht&&vi(z,et),Oe}for(De=l(De);et<F.length;et++)ot=ee(De,z,et,F[et],oe),ot!==null&&(t&&ot.alternate!==null&&De.delete(ot.key===null?et:ot.key),V=m(ot,V,et),mt===null?Oe=ot:mt.sibling=ot,mt=ot);return t&&De.forEach(function(_r){return n(z,_r)}),ht&&vi(z,et),Oe}function Be(z,V,F,oe){if(F==null)throw Error(r(151));for(var Oe=null,mt=null,De=V,et=V=0,ot=null,pt=F.next();De!==null&&!pt.done;et++,pt=F.next()){De.index>et?(ot=De,De=null):ot=De.sibling;var _r=Y(z,De,pt.value,oe);if(_r===null){De===null&&(De=ot);break}t&&De&&_r.alternate===null&&n(z,De),V=m(_r,V,et),mt===null?Oe=_r:mt.sibling=_r,mt=_r,De=ot}if(pt.done)return a(z,De),ht&&vi(z,et),Oe;if(De===null){for(;!pt.done;et++,pt=F.next())pt=ue(z,pt.value,oe),pt!==null&&(V=m(pt,V,et),mt===null?Oe=pt:mt.sibling=pt,mt=pt);return ht&&vi(z,et),Oe}for(De=l(De);!pt.done;et++,pt=F.next())pt=ee(De,z,et,pt.value,oe),pt!==null&&(t&&pt.alternate!==null&&De.delete(pt.key===null?et:pt.key),V=m(pt,V,et),mt===null?Oe=pt:mt.sibling=pt,mt=pt);return t&&De.forEach(function(h2){return n(z,h2)}),ht&&vi(z,et),Oe}function St(z,V,F,oe){if(typeof F=="object"&&F!==null&&F.type===J&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case q:e:{for(var Oe=F.key;V!==null;){if(V.key===Oe){if(Oe=F.type,Oe===J){if(V.tag===7){a(z,V.sibling),oe=h(V,F.props.children),oe.return=z,z=oe;break e}}else if(V.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===S&&da(Oe)===V.type){a(z,V.sibling),oe=h(V,F.props),xo(oe,F),oe.return=z,z=oe;break e}a(z,V);break}else n(z,V);V=V.sibling}F.type===J?(oe=aa(F.props.children,z.mode,oe,F.key),oe.return=z,z=oe):(oe=tu(F.type,F.key,F.props,null,z.mode,oe),xo(oe,F),oe.return=z,z=oe)}return v(z);case W:e:{for(Oe=F.key;V!==null;){if(V.key===Oe)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(z,V.sibling),oe=h(V,F.children||[]),oe.return=z,z=oe;break e}else{a(z,V);break}else n(z,V);V=V.sibling}oe=bh(F,z.mode,oe),oe.return=z,z=oe}return v(z);case S:return F=da(F),St(z,V,F,oe)}if(ze(F))return ke(z,V,F,oe);if(O(F)){if(Oe=O(F),typeof Oe!="function")throw Error(r(150));return F=Oe.call(F),Be(z,V,F,oe)}if(typeof F.then=="function")return St(z,V,ou(F),oe);if(F.$$typeof===ge)return St(z,V,iu(z,F),oe);cu(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(a(z,V.sibling),oe=h(V,F),oe.return=z,z=oe):(a(z,V),oe=vh(F,z.mode,oe),oe.return=z,z=oe),v(z)):a(z,V)}return function(z,V,F,oe){try{yo=0;var Oe=St(z,V,F,oe);return nl=null,Oe}catch(De){if(De===tl||De===au)throw De;var mt=Xn(29,De,null,z.mode);return mt.lanes=oe,mt.return=z,mt}finally{}}}var fa=Cg(!0),Rg=Cg(!1),ir=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function rr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ar(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(yt&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=eu(t),fg(t,null,a),n}return Jc(t,l,n,a),eu(t)}function vo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Gl(t,a)}}function Mh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Oh=!1;function bo(){if(Oh){var t=el;if(t!==null)throw t}}function _o(t,n,a,l){Oh=!1;var h=t.updateQueue;ir=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,G=D.next;D.next=null,v===null?m=G:v.next=G,v=D;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==v&&(w===null?ae.firstBaseUpdate=G:w.next=G,ae.lastBaseUpdate=D))}if(m!==null){var ue=h.baseState;v=0,ae=G=D=null,w=m;do{var Y=w.lane&-536870913,ee=Y!==w.lane;if(ee?(lt&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ja&&(Oh=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ke=t,Be=w;Y=n;var St=a;switch(Be.tag){case 1:if(ke=Be.payload,typeof ke=="function"){ue=ke.call(St,ue,Y);break e}ue=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Be.payload,Y=typeof ke=="function"?ke.call(St,ue,Y):ke,Y==null)break e;ue=T({},ue,Y);break e;case 2:ir=!0}}Y=w.callback,Y!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[Y]:ee.push(Y))}else ee={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(G=ae=ee,D=ue):ae=ae.next=ee,v|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;ee=w,w=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);ae===null&&(D=ue),h.baseState=D,h.firstBaseUpdate=G,h.lastBaseUpdate=ae,m===null&&(h.shared.lanes=0),dr|=v,t.lanes=v,t.memoizedState=ue}}function Ig(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function kg(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ig(a[t],n)}var sl=E(null),uu=E(0);function Dg(t,n){t=Ri,H(uu,t),H(sl,n),Ri=t|n.baseLanes}function Vh(){H(uu,Ri),H(sl,sl.current)}function Lh(){Ri=uu.current,L(sl),L(uu)}var Wn=E(null),gs=null;function lr(t){var n=t.alternate;H(Yt,Yt.current&1),H(Wn,t),gs===null&&(n===null||sl.current!==null||n.memoizedState!==null)&&(gs=t)}function Ph(t){H(Yt,Yt.current),H(Wn,t),gs===null&&(gs=t)}function Mg(t){t.tag===22?(H(Yt,Yt.current),H(Wn,t),gs===null&&(gs=t)):or()}function or(){H(Yt,Yt.current),H(Wn,Wn.current)}function Zn(t){L(Wn),gs===t&&(gs=null),L(Yt)}var Yt=E(0);function du(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Yf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wi=0,Ze=null,Tt=null,nn=null,hu=!1,il=!1,ma=!1,fu=0,wo=0,rl=null,nw=0;function Ht(){throw Error(r(321))}function Uh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Qn(t[a],n[a]))return!1;return!0}function zh(t,n,a,l,h,m){return wi=m,Ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?y0:tf,ma=!1,m=a(l,h),ma=!1,il&&(m=Vg(n,a,l,h)),Og(t),m}function Og(t){K.H=No;var n=Tt!==null&&Tt.next!==null;if(wi=0,nn=Tt=Ze=null,hu=!1,wo=0,rl=null,n)throw Error(r(300));t===null||sn||(t=t.dependencies,t!==null&&su(t)&&(sn=!0))}function Vg(t,n,a,l){Ze=t;var h=0;do{if(il&&(rl=null),wo=0,il=!1,25<=h)throw Error(r(301));if(h+=1,nn=Tt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=x0,m=n(a,l)}while(il);return m}function sw(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?Eo(n):n,t=t.useState()[0],(Tt!==null?Tt.memoizedState:null)!==t&&(Ze.flags|=1024),n}function Bh(){var t=fu!==0;return fu=0,t}function qh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Hh(t){if(hu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}hu=!1}wi=0,nn=Tt=Ze=null,il=!1,wo=fu=0,rl=null}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Ze.memoizedState=nn=t:nn=nn.next=t,nn}function Kt(){if(Tt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var n=nn===null?Ze.memoizedState:nn.next;if(n!==null)nn=n,Tt=t;else{if(t===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},nn===null?Ze.memoizedState=nn=t:nn=nn.next=t}return nn}function mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(t){var n=wo;return wo+=1,rl===null&&(rl=[]),t=Sg(rl,t,n),n=Ze,(nn===null?n.memoizedState:nn.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?y0:tf),t}function pu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Eo(t);if(t.$$typeof===ge)return xn(t)}throw Error(r(438,String(t)))}function Fh(t){var n=null,a=Ze.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=mu(),Ze.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function Ei(t,n){return typeof n=="function"?n(t):n}function gu(t){var n=Kt();return Gh(n,Tt,t)}function Gh(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=v=null,D=null,G=n,ae=!1;do{var ue=G.lane&-536870913;if(ue!==G.lane?(lt&ue)===ue:(wi&ue)===ue){var Y=G.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ue===Ja&&(ae=!0);else if((wi&Y)===Y){G=G.next,Y===Ja&&(ae=!0);continue}else ue={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=ue,v=m):D=D.next=ue,Ze.lanes|=Y,dr|=Y;ue=G.action,ma&&a(m,ue),m=G.hasEagerState?G.eagerState:a(m,ue)}else Y={lane:ue,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=Y,v=m):D=D.next=Y,Ze.lanes|=ue,dr|=ue;G=G.next}while(G!==null&&G!==n);if(D===null?v=m:D.next=w,!Qn(m,t.memoizedState)&&(sn=!0,ae&&(a=el,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yh(t){var n=Kt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Qn(m,n.memoizedState)||(sn=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Lg(t,n,a){var l=Ze,h=Kt(),m=ht;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!Qn((Tt||h).memoizedState,a);if(v&&(h.memoizedState=a,sn=!0),h=h.queue,Qh(zg.bind(null,l,h,t),[t]),h.getSnapshot!==n||v||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,al(9,{destroy:void 0},Ug.bind(null,l,h,a,n),null),Ct===null)throw Error(r(349));m||(wi&127)!==0||Pg(l,n,a)}return a}function Pg(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ze.updateQueue,n===null?(n=mu(),Ze.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Ug(t,n,a,l){n.value=a,n.getSnapshot=l,Bg(n)&&qg(t)}function zg(t,n,a){return a(function(){Bg(n)&&qg(t)})}function Bg(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Qn(t,a)}catch{return!0}}function qg(t){var n=ra(t,2);n!==null&&Bn(n,t,2)}function Kh(t){var n=kn();if(typeof t=="function"){var a=t;if(t=a(),ma){Xe(!0);try{a()}finally{Xe(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:t},n}function Hg(t,n,a,l){return t.baseState=a,Gh(t,Tt,typeof l=="function"?l:Ei)}function iw(t,n,a,l,h){if(vu(t))throw Error(r(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Fg(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Fg(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=K.T,v={};K.T=v;try{var w=a(h,l),D=K.S;D!==null&&D(v,w),Gg(t,n,w)}catch(G){$h(t,n,G)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,l),Gg(t,n,m)}catch(G){$h(t,n,G)}}function Gg(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yg(t,n,l)},function(l){return $h(t,n,l)}):Yg(t,n,a)}function Yg(t,n,a){n.status="fulfilled",n.value=a,Kg(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Fg(t,a)))}function $h(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Kg(n),n=n.next;while(n!==l)}t.action=null}function Kg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function $g(t,n){return n}function Qg(t,n){if(ht){var a=Ct.formState;if(a!==null){e:{var l=Ze;if(ht){if(Mt){t:{for(var h=Mt,m=ps;h.nodeType!==8;){if(!m){h=null;break t}if(h=ys(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Mt=ys(h.nextSibling),l=h.data==="F!";break e}}nr(l)}l=!1}l&&(n=a[0])}}return a=kn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:n},a.queue=l,a=m0.bind(null,Ze,l),l.dispatch=a,l=Kh(!1),m=ef.bind(null,Ze,!1,l.queue),l=kn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=iw.bind(null,Ze,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Xg(t){var n=Kt();return Wg(n,Tt,t)}function Wg(t,n,a){if(n=Gh(t,n,$g)[0],t=gu(Ei)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Eo(n)}catch(v){throw v===tl?au:v}else l=n;n=Kt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Ze.flags|=2048,al(9,{destroy:void 0},rw.bind(null,h,a),null)),[l,m,t]}function rw(t,n){t.action=n}function Zg(t){var n=Kt(),a=Tt;if(a!==null)return Wg(n,a,t);Kt(),n=n.memoizedState,a=Kt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function al(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Ze.updateQueue,n===null&&(n=mu(),Ze.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Jg(){return Kt().memoizedState}function yu(t,n,a,l){var h=kn();Ze.flags|=t,h.memoizedState=al(1|n,{destroy:void 0},a,l===void 0?null:l)}function xu(t,n,a,l){var h=Kt();l=l===void 0?null:l;var m=h.memoizedState.inst;Tt!==null&&l!==null&&Uh(l,Tt.memoizedState.deps)?h.memoizedState=al(n,m,a,l):(Ze.flags|=t,h.memoizedState=al(1|n,m,a,l))}function e0(t,n){yu(8390656,8,t,n)}function Qh(t,n){xu(2048,8,t,n)}function aw(t){Ze.flags|=4;var n=Ze.updateQueue;if(n===null)n=mu(),Ze.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function t0(t){var n=Kt().memoizedState;return aw({ref:n,nextImpl:t}),function(){if((yt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function n0(t,n){return xu(4,2,t,n)}function s0(t,n){return xu(4,4,t,n)}function i0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function r0(t,n,a){a=a!=null?a.concat([t]):null,xu(4,4,i0.bind(null,n,t),a)}function Xh(){}function a0(t,n){var a=Kt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Uh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function l0(t,n){var a=Kt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Uh(n,l[1]))return l[0];if(l=t(),ma){Xe(!0);try{t()}finally{Xe(!1)}}return a.memoizedState=[l,n],l}function Wh(t,n,a){return a===void 0||(wi&1073741824)!==0&&(lt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=oy(),Ze.lanes|=t,dr|=t,a)}function o0(t,n,a,l){return Qn(a,n)?a:sl.current!==null?(t=Wh(t,a,l),Qn(t,n)||(sn=!0),t):(wi&42)===0||(wi&1073741824)!==0&&(lt&261930)===0?(sn=!0,t.memoizedState=a):(t=oy(),Ze.lanes|=t,dr|=t,n)}function c0(t,n,a,l,h){var m=P.p;P.p=m!==0&&8>m?m:8;var v=K.T,w={};K.T=w,ef(t,!1,n,a);try{var D=h(),G=K.S;if(G!==null&&G(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ae=tw(D,l);To(t,n,ae,ts(t))}else To(t,n,l,ts(t))}catch(ue){To(t,n,{then:function(){},status:"rejected",reason:ue},ts())}finally{P.p=m,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function lw(){}function Zh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var h=u0(t).queue;c0(t,h,n,re,a===null?lw:function(){return d0(t),a(l)})}function u0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:re},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function d0(t){var n=u0(t);n.next===null&&(n=t.alternate.memoizedState),To(t,n.next.queue,{},ts())}function Jh(){return xn(Bo)}function h0(){return Kt().memoizedState}function f0(){return Kt().memoizedState}function ow(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=ts();t=rr(a);var l=ar(n,t,a);l!==null&&(Bn(l,n,a),vo(l,n,a)),n={cache:jh()},t.payload=n;return}n=n.return}}function cw(t,n,a){var l=ts();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vu(t)?p0(n,a):(a=yh(t,n,a,l),a!==null&&(Bn(a,t,l),g0(a,n,l)))}function m0(t,n,a){var l=ts();To(t,n,a,l)}function To(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(t))p0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Qn(w,v))return Jc(t,n,h,0),Ct===null&&Zc(),!1}catch{}finally{}if(a=yh(t,n,h,l),a!==null)return Bn(a,t,l),g0(a,n,l),!0}return!1}function ef(t,n,a,l){if(l={lane:2,revertLane:Df(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vu(t)){if(n)throw Error(r(479))}else n=yh(t,a,l,2),n!==null&&Bn(n,t,2)}function vu(t){var n=t.alternate;return t===Ze||n!==null&&n===Ze}function p0(t,n){il=hu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function g0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Gl(t,a)}}var No={readContext:xn,use:pu,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};No.useEffectEvent=Ht;var y0={readContext:xn,use:pu,useCallback:function(t,n){return kn().memoizedState=[t,n===void 0?null:n],t},useContext:xn,useEffect:e0,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,yu(4194308,4,i0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return yu(4194308,4,t,n)},useInsertionEffect:function(t,n){yu(4,2,t,n)},useMemo:function(t,n){var a=kn();n=n===void 0?null:n;var l=t();if(ma){Xe(!0);try{t()}finally{Xe(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=kn();if(a!==void 0){var h=a(n);if(ma){Xe(!0);try{a(n)}finally{Xe(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=cw.bind(null,Ze,t),[l.memoizedState,t]},useRef:function(t){var n=kn();return t={current:t},n.memoizedState=t},useState:function(t){t=Kh(t);var n=t.queue,a=m0.bind(null,Ze,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Xh,useDeferredValue:function(t,n){var a=kn();return Wh(a,t,n)},useTransition:function(){var t=Kh(!1);return t=c0.bind(null,Ze,t.queue,!0,!1),kn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Ze,h=kn();if(ht){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Ct===null)throw Error(r(349));(lt&127)!==0||Pg(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,e0(zg.bind(null,l,m,t),[t]),l.flags|=2048,al(9,{destroy:void 0},Ug.bind(null,l,m,a,n),null),a},useId:function(){var t=kn(),n=Ct.identifierPrefix;if(ht){var a=ti,l=ei;a=(l&~(1<<32-nt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=fu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=nw++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Jh,useFormState:Qg,useActionState:Qg,useOptimistic:function(t){var n=kn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ef.bind(null,Ze,!0,a),a.dispatch=n,[t,n]},useMemoCache:Fh,useCacheRefresh:function(){return kn().memoizedState=ow.bind(null,Ze)},useEffectEvent:function(t){var n=kn(),a={impl:t};return n.memoizedState=a,function(){if((yt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:xn,use:pu,useCallback:a0,useContext:xn,useEffect:Qh,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:l0,useReducer:gu,useRef:Jg,useState:function(){return gu(Ei)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=Kt();return o0(a,Tt.memoizedState,t,n)},useTransition:function(){var t=gu(Ei)[0],n=Kt().memoizedState;return[typeof t=="boolean"?t:Eo(t),n]},useSyncExternalStore:Lg,useId:h0,useHostTransitionStatus:Jh,useFormState:Xg,useActionState:Xg,useOptimistic:function(t,n){var a=Kt();return Hg(a,Tt,t,n)},useMemoCache:Fh,useCacheRefresh:f0};tf.useEffectEvent=t0;var x0={readContext:xn,use:pu,useCallback:a0,useContext:xn,useEffect:Qh,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:l0,useReducer:Yh,useRef:Jg,useState:function(){return Yh(Ei)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=Kt();return Tt===null?Wh(a,t,n):o0(a,Tt.memoizedState,t,n)},useTransition:function(){var t=Yh(Ei)[0],n=Kt().memoizedState;return[typeof t=="boolean"?t:Eo(t),n]},useSyncExternalStore:Lg,useId:h0,useHostTransitionStatus:Jh,useFormState:Zg,useActionState:Zg,useOptimistic:function(t,n){var a=Kt();return Tt!==null?Hg(a,Tt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fh,useCacheRefresh:f0};x0.useEffectEvent=t0;function nf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=ts(),h=rr(l);h.payload=n,a!=null&&(h.callback=a),n=ar(t,h,l),n!==null&&(Bn(n,t,l),vo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=ts(),h=rr(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=ar(t,h,l),n!==null&&(Bn(n,t,l),vo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=ts(),l=rr(a);l.tag=2,n!=null&&(l.callback=n),n=ar(t,l,a),n!==null&&(Bn(n,t,a),vo(n,t,a))}};function v0(t,n,a,l,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!uo(a,l)||!uo(h,m):!0}function b0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&sf.enqueueReplaceState(n,n.state,null)}function pa(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function _0(t){Wc(t)}function w0(t){console.error(t)}function E0(t){Wc(t)}function bu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function T0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,n,a){return a=rr(a),a.tag=3,a.payload={element:null},a.callback=function(){bu(t,n)},a}function N0(t){return t=rr(t),t.tag=3,t}function S0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){T0(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){T0(n,a,l),typeof h!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function uw(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Za(n,a,h,!0),a=Wn.current,a!==null){switch(a.tag){case 31:case 13:return gs===null?ku():a.alternate===null&&Ft===0&&(Ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===lu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Rf(t,l,h)),!1;case 22:return a.flags|=65536,l===lu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Rf(t,l,h)),!1}throw Error(r(435,a.tag))}return Rf(t,l,h),ku(),!1}if(ht)return n=Wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Eh&&(t=Error(r(422),{cause:l}),mo(hs(t,a)))):(l!==Eh&&(n=Error(r(423),{cause:l}),mo(hs(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=hs(l,a),h=rf(t.stateNode,l,h),Mh(t,h),Ft!==4&&(Ft=2)),!1;var m=Error(r(520),{cause:l});if(m=hs(m,a),Do===null?Do=[m]:Do.push(m),Ft!==4&&(Ft=2),n===null)return!0;l=hs(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,l,t),Mh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hr===null||!hr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=N0(h),S0(h,t,a,l),Mh(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(r(461)),sn=!1;function vn(t,n,a,l){n.child=t===null?Rg(n,null,a,l):fa(n,t.child,a,l)}function A0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return ca(n),l=zh(t,n,a,v,m,h),w=Bh(),t!==null&&!sn?(qh(t,n,h),Ti(t,n,h)):(ht&&w&&_h(n),n.flags|=1,vn(t,n,l,h),n.child)}function j0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!xh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,C0(t,n,m,l,h)):(t=tu(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!mf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:uo,a(v,l)&&t.ref===n.ref)return Ti(t,n,h)}return n.flags|=1,t=xi(m,l),t.ref=n.ref,t.return=n,n.child=t}function C0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(uo(m,l)&&t.ref===n.ref)if(sn=!1,n.pendingProps=l=m,mf(t,h))(t.flags&131072)!==0&&(sn=!0);else return n.lanes=t.lanes,Ti(t,n,h)}return lf(t,n,a,l,h)}function R0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return I0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(n,m!==null?m.cachePool:null),m!==null?Dg(n,m):Vh(),Mg(n);else return l=n.lanes=536870912,I0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ru(n,m.cachePool),Dg(n,m),or(),n.memoizedState=null):(t!==null&&ru(n,null),Vh(),or());return vn(t,n,h,a),n.child}function So(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function I0(t,n,a,l,h){var m=Rh();return m=m===null?null:{parent:tn._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&ru(n,null),Vh(),Mg(n),t!==null&&Za(t,n,l,!0),n.childLanes=h,null}function _u(t,n){return n=Eu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function k0(t,n,a){return fa(n,t.child,null,a),t=_u(n,n.pendingProps),t.flags|=2,Zn(n),n.memoizedState=null,t}function dw(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(ht){if(l.mode==="hidden")return t=_u(n,l),n.lanes=536870912,So(null,t);if(Ph(n),(t=Mt)?(t=Fy(t,ps),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:er!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},a=pg(t),a.return=n,n.child=a,yn=n,Mt=null)):t=null,t===null)throw nr(n);return n.lanes=536870912,null}return _u(n,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Ph(n),h)if(n.flags&256)n.flags&=-257,n=k0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(sn||Za(t,n,a,!1),h=(a&t.childLanes)!==0,sn||h){if(l=Ct,l!==null&&(v=Yl(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ra(t,v),Bn(l,t,v),af;ku(),n=k0(t,n,a)}else t=m.treeContext,Mt=ys(v.nextSibling),yn=n,ht=!0,tr=null,ps=!1,t!==null&&xg(n,t),n=_u(n,l),n.flags|=4096;return n}return t=xi(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function wu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function lf(t,n,a,l,h){return ca(n),a=zh(t,n,a,l,void 0,h),l=Bh(),t!==null&&!sn?(qh(t,n,h),Ti(t,n,h)):(ht&&l&&_h(n),n.flags|=1,vn(t,n,a,h),n.child)}function D0(t,n,a,l,h,m){return ca(n),n.updateQueue=null,a=Vg(n,l,a,h),Og(t),l=Bh(),t!==null&&!sn?(qh(t,n,m),Ti(t,n,m)):(ht&&l&&_h(n),n.flags|=1,vn(t,n,a,m),n.child)}function M0(t,n,a,l,h){if(ca(n),n.stateNode===null){var m=$a,v=a.contextType;typeof v=="object"&&v!==null&&(m=xn(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},kh(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?xn(v):$a,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(nf(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&sf.enqueueReplaceState(m,m.state,null),_o(n,l,m,h),bo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=pa(a,w);m.props=D;var G=m.context,ae=a.contextType;v=$a,typeof ae=="object"&&ae!==null&&(v=xn(ae));var ue=a.getDerivedStateFromProps;ae=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||G!==v)&&b0(n,m,l,v),ir=!1;var Y=n.memoizedState;m.state=Y,_o(n,l,m,h),bo(),G=n.memoizedState,w||Y!==G||ir?(typeof ue=="function"&&(nf(n,a,ue,l),G=n.memoizedState),(D=ir||v0(n,a,D,l,Y,G,v))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=G),m.props=l,m.state=G,m.context=v,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Dh(t,n),v=n.memoizedProps,ae=pa(a,v),m.props=ae,ue=n.pendingProps,Y=m.context,G=a.contextType,D=$a,typeof G=="object"&&G!==null&&(D=xn(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ue||Y!==D)&&b0(n,m,l,D),ir=!1,Y=n.memoizedState,m.state=Y,_o(n,l,m,h),bo();var ee=n.memoizedState;v!==ue||Y!==ee||ir||t!==null&&t.dependencies!==null&&su(t.dependencies)?(typeof w=="function"&&(nf(n,a,w,l),ee=n.memoizedState),(ae=ir||v0(n,a,ae,l,Y,ee,D)||t!==null&&t.dependencies!==null&&su(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ee,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ee,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ee),m.props=l,m.state=ee,m.context=D,l=ae):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,wu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=fa(n,t.child,null,h),n.child=fa(n,null,a,h)):vn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=Ti(t,n,h),t}function O0(t,n,a,l){return la(),n.flags|=256,vn(t,n,a,l),n.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:Tg()}}function uf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=es),t}function V0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Yt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(ht){if(h?lr(n):or(),(t=Mt)?(t=Fy(t,ps),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:er!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},a=pg(t),a.return=n,n.child=a,yn=n,Mt=null)):t=null,t===null)throw nr(n);return Yf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(or(),h=n.mode,w=Eu({mode:"hidden",children:w},h),l=aa(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,v,a),n.memoizedState=of,So(null,l)):(lr(n),df(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(lr(n),n.flags&=-257,n=hf(t,n,a)):n.memoizedState!==null?(or(),n.child=t.child,n.flags|=128,n=null):(or(),w=l.fallback,h=n.mode,l=Eu({mode:"visible",children:l.children},h),w=aa(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,fa(n,t.child,null,a),l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,v,a),n.memoizedState=of,n=So(null,l));else if(lr(n),Yf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(r(419)),l.stack="",l.digest=v,mo({value:l,source:null,stack:null}),n=hf(t,n,a)}else if(sn||Za(t,n,a,!1),v=(a&t.childLanes)!==0,sn||v){if(v=Ct,v!==null&&(l=Yl(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ra(t,l),Bn(v,t,l),af;Gf(w)||ku(),n=hf(t,n,a)}else Gf(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,Mt=ys(w.nextSibling),yn=n,ht=!0,tr=null,ps=!1,t!==null&&xg(n,t),n=df(n,l.children),n.flags|=4096);return n}return h?(or(),w=l.fallback,h=n.mode,D=t.child,G=D.sibling,l=xi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,G!==null?w=xi(G,w):(w=aa(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,So(null,l),l=n.child,w=t.child.memoizedState,w===null?w=cf(a):(h=w.cachePool,h!==null?(D=tn._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Tg(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=uf(t,v,a),n.memoizedState=of,So(t.child,l)):(lr(n),a=t.child,t=a.sibling,a=xi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function df(t,n){return n=Eu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Eu(t,n){return t=Xn(22,t,null,n),t.lanes=0,t}function hf(t,n,a){return fa(n,t.child,null,a),t=df(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function L0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Sh(t.return,n,a)}function ff(t,n,a,l,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function P0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var v=Yt.current,w=(v&2)!==0;if(w?(v=v&1|2,n.flags|=128):v&=1,H(Yt,v),vn(t,n,l,a),l=ht?fo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L0(t,a,n);else if(t.tag===19)L0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&du(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),ff(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&du(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(n,!0,a,null,m,l);break;case"together":ff(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ti(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),dr|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Za(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=xi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=xi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function mf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&su(t)))}function hw(t,n,a){switch(n.tag){case 3:He(n,n.stateNode.containerInfo),sr(n,tn,t.memoizedState.cache),la();break;case 27:case 5:se(n);break;case 4:He(n,n.stateNode.containerInfo);break;case 10:sr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ph(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(lr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?V0(t,n,a):(lr(n),t=Ti(t,n,a),t!==null?t.sibling:null);lr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Za(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return P0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),H(Yt,Yt.current),l)break;return null;case 22:return n.lanes=0,R0(t,n,a,n.pendingProps);case 24:sr(n,tn,t.memoizedState.cache)}return Ti(t,n,a)}function U0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)sn=!0;else{if(!mf(t,a)&&(n.flags&128)===0)return sn=!1,hw(t,n,a);sn=(t.flags&131072)!==0}else sn=!1,ht&&(n.flags&1048576)!==0&&yg(n,fo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=da(n.elementType),n.type=t,typeof t=="function")xh(t)?(l=pa(t,l),n.tag=1,n=M0(null,n,t,l,a)):(n.tag=0,n=lf(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===he){n.tag=11,n=A0(null,n,t,l,a);break e}else if(h===C){n.tag=14,n=j0(null,n,t,l,a);break e}}throw n=pe(t)||t,Error(r(306,n,""))}}return n;case 0:return lf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=pa(l,n.pendingProps),M0(t,n,l,h,a);case 3:e:{if(He(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,Dh(t,n),_o(n,l,null,a);var v=n.memoizedState;if(l=v.cache,sr(n,tn,l),l!==m.cache&&Ah(n,[tn],a,!0),bo(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=O0(t,n,l,a);break e}else if(l!==h){h=hs(Error(r(424)),n),mo(h),n=O0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Mt=ys(t.firstChild),yn=n,ht=!0,tr=null,ps=!0,a=Rg(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(la(),l===h){n=Ti(t,n,a);break e}vn(t,n,l,a)}n=n.child}return n;case 26:return wu(t,n),t===null?(a=Xy(n.type,null,n.pendingProps,null))?n.memoizedState=a:ht||(a=n.type,t=n.pendingProps,l=Uu(me.current).createElement(a),l[Zt]=n,l[hn]=t,bn(l,a,t),Jt(l),n.stateNode=l):n.memoizedState=Xy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return se(n),t===null&&ht&&(l=n.stateNode=Ky(n.type,n.pendingProps,me.current),yn=n,ps=!0,h=Mt,gr(n.type)?(Kf=h,Mt=ys(l.firstChild)):Mt=h),vn(t,n,n.pendingProps.children,a),wu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ht&&((h=l=Mt)&&(l=qw(l,n.type,n.pendingProps,ps),l!==null?(n.stateNode=l,yn=n,Mt=ys(l.firstChild),ps=!1,h=!0):h=!1),h||nr(n)),se(n),h=n.type,m=n.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,qf(h,m)?l=null:v!==null&&qf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=zh(t,n,sw,null,null,a),Bo._currentValue=h),wu(t,n),vn(t,n,l,a),n.child;case 6:return t===null&&ht&&((t=a=Mt)&&(a=Hw(a,n.pendingProps,ps),a!==null?(n.stateNode=a,yn=n,Mt=null,t=!0):t=!1),t||nr(n)),null;case 13:return V0(t,n,a);case 4:return He(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=fa(n,null,l,a):vn(t,n,l,a),n.child;case 11:return A0(t,n,n.type,n.pendingProps,a);case 7:return vn(t,n,n.pendingProps,a),n.child;case 8:return vn(t,n,n.pendingProps.children,a),n.child;case 12:return vn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,sr(n,n.type,l.value),vn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ca(n),h=xn(h),l=l(h),n.flags|=1,vn(t,n,l,a),n.child;case 14:return j0(t,n,n.type,n.pendingProps,a);case 15:return C0(t,n,n.type,n.pendingProps,a);case 19:return P0(t,n,a);case 31:return dw(t,n,a);case 22:return R0(t,n,a,n.pendingProps);case 24:return ca(n),l=xn(tn),t===null?(h=Rh(),h===null&&(h=Ct,m=jh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},kh(n),sr(n,tn,h)):((t.lanes&a)!==0&&(Dh(t,n),_o(n,null,null,a),bo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),sr(n,tn,l)):(l=m.cache,sr(n,tn,l),l!==h.cache&&Ah(n,[tn],a,!0))),vn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Ni(t){t.flags|=4}function pf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(hy())t.flags|=8192;else throw ha=lu,Ih}else t.flags&=-16777217}function z0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!tx(n))if(hy())t.flags|=8192;else throw ha=lu,Ih}function Tu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Rc():536870912,t.lanes|=n,ul|=n)}function Ao(t,n){if(!ht)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ot(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function fw(t,n,a){var l=n.pendingProps;switch(wh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(n),null;case 1:return Ot(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),_i(tn),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wa(n)?Ni(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Th())),Ot(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(Ni(n),m!==null?(Ot(n),z0(n,m)):(Ot(n),pf(n,h,null,l,a))):m?m!==t.memoizedState?(Ni(n),Ot(n),z0(n,m)):(Ot(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ni(n),Ot(n),pf(n,h,t,l,a)),null;case 27:if(Ee(n),a=me.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ot(n),null}t=M.current,Wa(n)?vg(n):(t=Ky(h,l,a),n.stateNode=t,Ni(n))}return Ot(n),null;case 5:if(Ee(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ot(n),null}if(m=M.current,Wa(n))vg(n);else{var v=Uu(me.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}m[Zt]=n,m[hn]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;e:switch(bn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ni(n)}}return Ot(n),pf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=me.current,Wa(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Zt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Vy(t.nodeValue,a)),t||nr(n,!0)}else t=Uu(t).createTextNode(l),t[Zt]=n,n.stateNode=t}return Ot(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Wa(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Zt]=n}else la(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ot(n),t=!1}else a=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Zn(n),n):(Zn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return Ot(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Wa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Zt]=n}else la(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ot(n),h=!1}else h=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Zn(n),n):(Zn(n),null)}return Zn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Tu(n,n.updateQueue),Ot(n),null);case 4:return Ue(),t===null&&Lf(n.stateNode.containerInfo),Ot(n),null;case 10:return _i(n.type),Ot(n),null;case 19:if(L(Yt),l=n.memoizedState,l===null)return Ot(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)Ao(l,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=du(t),m!==null){for(n.flags|=128,Ao(l,!1),t=m.updateQueue,n.updateQueue=t,Tu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)mg(a,t),a=a.sibling;return H(Yt,Yt.current&1|2),ht&&vi(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&qt()>Cu&&(n.flags|=128,h=!0,Ao(l,!1),n.lanes=4194304)}else{if(!h)if(t=du(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Tu(n,t),Ao(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!ht)return Ot(n),null}else 2*qt()-l.renderingStartTime>Cu&&a!==536870912&&(n.flags|=128,h=!0,Ao(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qt(),t.sibling=null,a=Yt.current,H(Yt,h?a&1|2:a&1),ht&&vi(n,l.treeForkCount),t):(Ot(n),null);case 22:case 23:return Zn(n),Lh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Ot(n),n.subtreeFlags&6&&(n.flags|=8192)):Ot(n),a=n.updateQueue,a!==null&&Tu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&L(ua),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),_i(tn),Ot(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function mw(t,n){switch(wh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return _i(tn),Ue(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ee(n),null;case 31:if(n.memoizedState!==null){if(Zn(n),n.alternate===null)throw Error(r(340));la()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Zn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));la()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return L(Yt),null;case 4:return Ue(),null;case 10:return _i(n.type),null;case 22:case 23:return Zn(n),Lh(),t!==null&&L(ua),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return _i(tn),null;case 25:return null;default:return null}}function B0(t,n){switch(wh(n),n.tag){case 3:_i(tn),Ue();break;case 26:case 27:case 5:Ee(n);break;case 4:Ue();break;case 31:n.memoizedState!==null&&Zn(n);break;case 13:Zn(n);break;case 19:L(Yt);break;case 10:_i(n.type);break;case 22:case 23:Zn(n),Lh(),t!==null&&L(ua);break;case 24:_i(tn)}}function jo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){_t(n,n.return,w)}}function cr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=n;var D=a,G=w;try{G()}catch(ae){_t(h,D,ae)}}}l=l.next}while(l!==m)}}catch(ae){_t(n,n.return,ae)}}function q0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{kg(n,a)}catch(l){_t(t,t.return,l)}}}function H0(t,n,a){a.props=pa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){_t(t,n,l)}}function Co(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){_t(t,n,h)}}function ni(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){_t(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){_t(t,n,h)}else a.current=null}function F0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){_t(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;Vw(l,t.type,a,n),l[hn]=n}catch(h){_t(t,t.return,h)}}function G0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&gr(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=As));else if(l!==4&&(l===27&&gr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(xf(t,n,a),t=t.sibling;t!==null;)xf(t,n,a),t=t.sibling}function Nu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Nu(t,n,a),t=t.sibling;t!==null;)Nu(t,n,a),t=t.sibling}function Y0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);bn(n,l,a),n[Zt]=t,n[hn]=a}catch(m){_t(t,t.return,m)}}var Si=!1,rn=!1,vf=!1,K0=typeof WeakSet=="function"?WeakSet:Set,mn=null;function pw(t,n){if(t=t.containerInfo,zf=Yu,t=rg(t),dh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,D=-1,G=0,ae=0,ue=t,Y=null;t:for(;;){for(var ee;ue!==a||h!==0&&ue.nodeType!==3||(w=v+h),ue!==m||l!==0&&ue.nodeType!==3||(D=v+l),ue.nodeType===3&&(v+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)Y=ue,ue=ee;for(;;){if(ue===t)break t;if(Y===a&&++G===h&&(w=v),Y===m&&++ae===l&&(D=v),(ee=ue.nextSibling)!==null)break;ue=Y,Y=ue.parentNode}ue=ee}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bf={focusedElem:t,selectionRange:a},Yu=!1,mn=n;mn!==null;)if(n=mn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,mn=t;else for(;mn!==null;){switch(n=mn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ke=pa(a.type,h);t=l.getSnapshotBeforeUpdate(ke,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Be){_t(a,a.return,Be)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,mn=t;break}mn=n.return}}function $0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ji(t,a),l&4&&jo(5,a);break;case 1:if(ji(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){_t(a,a.return,v)}else{var h=pa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){_t(a,a.return,v)}}l&64&&q0(a),l&512&&Co(a,a.return);break;case 3:if(ji(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{kg(t,n)}catch(v){_t(a,a.return,v)}}break;case 27:n===null&&l&4&&Y0(a);case 26:case 5:ji(t,a),n===null&&l&4&&F0(a),l&512&&Co(a,a.return);break;case 12:ji(t,a);break;case 31:ji(t,a),l&4&&W0(t,a);break;case 13:ji(t,a),l&4&&Z0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Tw.bind(null,a),Fw(t,a))));break;case 22:if(l=a.memoizedState!==null||Si,!l){n=n!==null&&n.memoizedState!==null||rn,h=Si;var m=rn;Si=l,(rn=n)&&!m?Ci(t,a,(a.subtreeFlags&8772)!==0):ji(t,a),Si=h,rn=m}break;case 30:break;default:ji(t,a)}}function Q0(t){var n=t.alternate;n!==null&&(t.alternate=null,Q0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ma(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var zt=null,Ln=!1;function Ai(t,n,a){for(a=a.child;a!==null;)X0(t,n,a),a=a.sibling}function X0(t,n,a){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(je,a)}catch{}switch(a.tag){case 26:rn||ni(a,n),Ai(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rn||ni(a,n);var l=zt,h=Ln;gr(a.type)&&(zt=a.stateNode,Ln=!1),Ai(t,n,a),Po(a.stateNode),zt=l,Ln=h;break;case 5:rn||ni(a,n);case 6:if(l=zt,h=Ln,zt=null,Ai(t,n,a),zt=l,Ln=h,zt!==null)if(Ln)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(a.stateNode)}catch(m){_t(a,n,m)}else try{zt.removeChild(a.stateNode)}catch(m){_t(a,n,m)}break;case 18:zt!==null&&(Ln?(t=zt,qy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xl(t)):qy(zt,a.stateNode));break;case 4:l=zt,h=Ln,zt=a.stateNode.containerInfo,Ln=!0,Ai(t,n,a),zt=l,Ln=h;break;case 0:case 11:case 14:case 15:cr(2,a,n),rn||cr(4,a,n),Ai(t,n,a);break;case 1:rn||(ni(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&H0(a,n,l)),Ai(t,n,a);break;case 21:Ai(t,n,a);break;case 22:rn=(l=rn)||a.memoizedState!==null,Ai(t,n,a),rn=l;break;default:Ai(t,n,a)}}function W0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(a){_t(n,n.return,a)}}}function Z0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(a){_t(n,n.return,a)}}function gw(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new K0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new K0),n;default:throw Error(r(435,t.tag))}}function Su(t,n){var a=gw(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=Nw.bind(null,t,l);l.then(h,h)}})}function Pn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,v=n,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(gr(w.type)){zt=w.stateNode,Ln=!1;break e}break;case 5:zt=w.stateNode,Ln=!1;break e;case 3:case 4:zt=w.stateNode.containerInfo,Ln=!0;break e}w=w.return}if(zt===null)throw Error(r(160));X0(m,v,h),zt=null,Ln=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)J0(n,t),n=n.sibling}var Ds=null;function J0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Pn(n,t),Un(t),l&4&&(cr(3,t,t.return),jo(3,t),cr(5,t,t.return));break;case 1:Pn(n,t),Un(t),l&512&&(rn||a===null||ni(a,a.return)),l&64&&Si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ds;if(Pn(n,t),Un(t),l&512&&(rn||a===null||ni(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[qs]||m[Zt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),bn(m,l,a),m[Zt]=t,Jt(m),l=m;break e;case"link":var v=Jy("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(l),bn(m,l,a),h.head.appendChild(m);break;case"meta":if(v=Jy("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(l),bn(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Zt]=t,Jt(m),l=m}t.stateNode=l}else ex(h,t.type,t.stateNode);else t.stateNode=Zy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?ex(h,t.type,t.stateNode):Zy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Pn(n,t),Un(t),l&512&&(rn||a===null||ni(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Pn(n,t),Un(t),l&512&&(rn||a===null||ni(a,a.return)),t.flags&32){h=t.stateNode;try{Vn(h,"")}catch(ke){_t(t,t.return,ke)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(vf=!0);break;case 6:if(Pn(n,t),Un(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ke){_t(t,t.return,ke)}}break;case 3:if(qu=null,h=Ds,Ds=zu(n.containerInfo),Pn(n,t),Ds=h,Un(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(n.containerInfo)}catch(ke){_t(t,t.return,ke)}vf&&(vf=!1,ey(t));break;case 4:l=Ds,Ds=zu(t.stateNode.containerInfo),Pn(n,t),Un(t),Ds=l;break;case 12:Pn(n,t),Un(t);break;case 31:Pn(n,t),Un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Pn(n,t),Un(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ju=qt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,G=Si,ae=rn;if(Si=G||h,rn=ae||D,Pn(n,t),rn=ae,Si=G,Un(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||Si||rn||ga(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var ue=D.memoizedProps.style,Y=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ke){_t(D,D.return,ke)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(ke){_t(D,D.return,ke)}}}else if(n.tag===18){if(a===null){D=n;try{var ee=D.stateNode;h?Hy(ee,!0):Hy(D.stateNode,!1)}catch(ke){_t(D,D.return,ke)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Su(t,a))));break;case 19:Pn(n,t),Un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Pn(n,t),Un(t)}}function Un(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(G0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=yf(t);Nu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(Vn(v,""),a.flags&=-33);var w=yf(t);Nu(t,w,v);break;case 3:case 4:var D=a.stateNode.containerInfo,G=yf(t);xf(t,G,D);break;default:throw Error(r(161))}}catch(ae){_t(t,t.return,ae)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function ey(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;ey(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ji(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)$0(t,n.alternate,n),n=n.sibling}function ga(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:cr(4,n,n.return),ga(n);break;case 1:ni(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&H0(n,n.return,a),ga(n);break;case 27:Po(n.stateNode);case 26:case 5:ni(n,n.return),ga(n);break;case 22:n.memoizedState===null&&ga(n);break;case 30:ga(n);break;default:ga(n)}t=t.sibling}}function Ci(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ci(h,m,a),jo(4,m);break;case 1:if(Ci(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){_t(l,l.return,G)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Ig(D[h],w)}catch(G){_t(l,l.return,G)}}a&&v&64&&q0(m),Co(m,m.return);break;case 27:Y0(m);case 26:case 5:Ci(h,m,a),a&&l===null&&v&4&&F0(m),Co(m,m.return);break;case 12:Ci(h,m,a);break;case 31:Ci(h,m,a),a&&v&4&&W0(h,m);break;case 13:Ci(h,m,a),a&&v&4&&Z0(h,m);break;case 22:m.memoizedState===null&&Ci(h,m,a),Co(m,m.return);break;case 30:break;default:Ci(h,m,a)}n=n.sibling}}function bf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&po(a))}function _f(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&po(t))}function Ms(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ty(t,n,a,l),n=n.sibling}function ty(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Ms(t,n,a,l),h&2048&&jo(9,n);break;case 1:Ms(t,n,a,l);break;case 3:Ms(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&po(t)));break;case 12:if(h&2048){Ms(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){_t(n,n.return,D)}}else Ms(t,n,a,l);break;case 31:Ms(t,n,a,l);break;case 13:Ms(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?Ms(t,n,a,l):Ro(t,n):m._visibility&2?Ms(t,n,a,l):(m._visibility|=2,ll(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&bf(v,n);break;case 24:Ms(t,n,a,l),h&2048&&_f(n.alternate,n);break;default:Ms(t,n,a,l)}}function ll(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,v=n,w=a,D=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:ll(m,v,w,D,h),jo(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&2?ll(m,v,w,D,h):Ro(m,v):(ae._visibility|=2,ll(m,v,w,D,h)),h&&G&2048&&bf(v.alternate,v);break;case 24:ll(m,v,w,D,h),h&&G&2048&&_f(v.alternate,v);break;default:ll(m,v,w,D,h)}n=n.sibling}}function Ro(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:Ro(a,l),h&2048&&bf(l.alternate,l);break;case 24:Ro(a,l),h&2048&&_f(l.alternate,l);break;default:Ro(a,l)}n=n.sibling}}var Io=8192;function ol(t,n,a){if(t.subtreeFlags&Io)for(t=t.child;t!==null;)ny(t,n,a),t=t.sibling}function ny(t,n,a){switch(t.tag){case 26:ol(t,n,a),t.flags&Io&&t.memoizedState!==null&&n2(a,Ds,t.memoizedState,t.memoizedProps);break;case 5:ol(t,n,a);break;case 3:case 4:var l=Ds;Ds=zu(t.stateNode.containerInfo),ol(t,n,a),Ds=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Io,Io=16777216,ol(t,n,a),Io=l):ol(t,n,a));break;default:ol(t,n,a)}}function sy(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ko(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];mn=l,ry(l,t)}sy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)iy(t),t=t.sibling}function iy(t){switch(t.tag){case 0:case 11:case 15:ko(t),t.flags&2048&&cr(9,t,t.return);break;case 3:ko(t);break;case 12:ko(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Au(t)):ko(t);break;default:ko(t)}}function Au(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];mn=l,ry(l,t)}sy(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:cr(8,n,n.return),Au(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Au(n));break;default:Au(n)}t=t.sibling}}function ry(t,n){for(;mn!==null;){var a=mn;switch(a.tag){case 0:case 11:case 15:cr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:po(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,mn=l;else e:for(a=t;mn!==null;){l=mn;var h=l.sibling,m=l.return;if(Q0(l),l===a){mn=null;break e}if(h!==null){h.return=m,mn=h;break e}mn=m}}}var yw={getCacheForType:function(t){var n=xn(tn),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return xn(tn).controller.signal}},xw=typeof WeakMap=="function"?WeakMap:Map,yt=0,Ct=null,st=null,lt=0,bt=0,Jn=null,ur=!1,cl=!1,wf=!1,Ri=0,Ft=0,dr=0,ya=0,Ef=0,es=0,ul=0,Do=null,zn=null,Tf=!1,ju=0,ay=0,Cu=1/0,Ru=null,hr=null,cn=0,fr=null,dl=null,Ii=0,Nf=0,Sf=null,ly=null,Mo=0,Af=null;function ts(){return(yt&2)!==0&&lt!==0?lt&-lt:K.T!==null?Df():Ic()}function oy(){if(es===0)if((lt&536870912)===0||ht){var t=Dt;Dt<<=1,(Dt&3932160)===0&&(Dt=262144),es=t}else es=536870912;return t=Wn.current,t!==null&&(t.flags|=32),es}function Bn(t,n,a){(t===Ct&&(bt===2||bt===9)||t.cancelPendingCommit!==null)&&(hl(t,0),mr(t,lt,es,!1)),Gr(t,a),((yt&2)===0||t!==Ct)&&(t===Ct&&((yt&2)===0&&(ya|=a),Ft===4&&mr(t,lt,es,!1)),si(t))}function cy(t,n,a){if((yt&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Yn(t,n),h=l?_w(t,n):Cf(t,n,!0),m=l;do{if(h===0){cl&&!l&&mr(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!vw(a)){h=Cf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var w=t;h=Do;var D=w.current.memoizedState.isDehydrated;if(D&&(hl(w,v).flags|=256),v=Cf(w,v,!1),v!==2){if(wf&&!D){w.errorRecoveryDisabledLanes|=m,ya|=m,h=4;break e}m=zn,zn=h,m!==null&&(zn===null?zn=m:zn.push.apply(zn,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){hl(t,0),mr(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:mr(l,n,es,!ur);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=ju+300-qt(),10<h)){if(mr(l,n,es,!ur),Wt(l,0,!0)!==0)break e;Ii=n,l.timeoutHandle=zy(uy.bind(null,l,a,zn,Ru,Tf,n,es,ya,ul,ur,m,"Throttled",-0,0),h);break e}uy(l,a,zn,Ru,Tf,n,es,ya,ul,ur,m,null,-0,0)}}break}while(!0);si(t)}function uy(t,n,a,l,h,m,v,w,D,G,ae,ue,Y,ee){if(t.timeoutHandle=-1,ue=n.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:As},ny(n,m,ue);var ke=(m&62914560)===m?ju-qt():(m&4194048)===m?ay-qt():0;if(ke=s2(ue,ke),ke!==null){Ii=m,t.cancelPendingCommit=ke(xy.bind(null,t,n,m,a,l,h,v,w,D,ae,ue,null,Y,ee)),mr(t,m,v,!G);return}}xy(t,n,m,a,l,h,v,w,D)}function vw(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Qn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function mr(t,n,a,l){n&=~Ef,n&=~ya,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-nt(h),v=1<<m;l[m]=-1,h&=~v}a!==0&&Yr(t,a,n)}function Iu(){return(yt&6)===0?(Oo(0),!1):!0}function jf(){if(st!==null){if(bt===0)var t=st.return;else t=st,bi=oa=null,Hh(t),nl=null,yo=0,t=st;for(;t!==null;)B0(t.alternate,t),t=t.return;st=null}}function hl(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Uw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ii=0,jf(),Ct=t,st=a=xi(t.current,null),lt=n,bt=0,Jn=null,ur=!1,cl=Yn(t,n),wf=!1,ul=es=Ef=ya=dr=Ft=0,zn=Do=null,Tf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-nt(l),m=1<<h;n|=t[h],l&=~m}return Ri=n,Zc(),a}function dy(t,n){Ze=null,K.H=No,n===tl||n===au?(n=Ag(),bt=3):n===Ih?(n=Ag(),bt=4):bt=n===af?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Jn=n,st===null&&(Ft=1,bu(t,hs(n,t.current)))}function hy(){var t=Wn.current;return t===null?!0:(lt&4194048)===lt?gs===null:(lt&62914560)===lt||(lt&536870912)!==0?t===gs:!1}function fy(){var t=K.H;return K.H=No,t===null?No:t}function my(){var t=K.A;return K.A=yw,t}function ku(){Ft=4,ur||(lt&4194048)!==lt&&Wn.current!==null||(cl=!0),(dr&134217727)===0&&(ya&134217727)===0||Ct===null||mr(Ct,lt,es,!1)}function Cf(t,n,a){var l=yt;yt|=2;var h=fy(),m=my();(Ct!==t||lt!==n)&&(Ru=null,hl(t,n)),n=!1;var v=Ft;e:do try{if(bt!==0&&st!==null){var w=st,D=Jn;switch(bt){case 8:jf(),v=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(n=!0);var G=bt;if(bt=0,Jn=null,fl(t,w,D,G),a&&cl){v=0;break e}break;default:G=bt,bt=0,Jn=null,fl(t,w,D,G)}}bw(),v=Ft;break}catch(ae){dy(t,ae)}while(!0);return n&&t.shellSuspendCounter++,bi=oa=null,yt=l,K.H=h,K.A=m,st===null&&(Ct=null,lt=0,Zc()),v}function bw(){for(;st!==null;)py(st)}function _w(t,n){var a=yt;yt|=2;var l=fy(),h=my();Ct!==t||lt!==n?(Ru=null,Cu=qt()+500,hl(t,n)):cl=Yn(t,n);e:do try{if(bt!==0&&st!==null){n=st;var m=Jn;t:switch(bt){case 1:bt=0,Jn=null,fl(t,n,m,1);break;case 2:case 9:if(Ng(m)){bt=0,Jn=null,gy(n);break}n=function(){bt!==2&&bt!==9||Ct!==t||(bt=7),si(t)},m.then(n,n);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Ng(m)?(bt=0,Jn=null,gy(n)):(bt=0,Jn=null,fl(t,n,m,7));break;case 5:var v=null;switch(st.tag){case 26:v=st.memoizedState;case 5:case 27:var w=st;if(v?tx(v):w.stateNode.complete){bt=0,Jn=null;var D=w.sibling;if(D!==null)st=D;else{var G=w.return;G!==null?(st=G,Du(G)):st=null}break t}}bt=0,Jn=null,fl(t,n,m,5);break;case 6:bt=0,Jn=null,fl(t,n,m,6);break;case 8:jf(),Ft=6;break e;default:throw Error(r(462))}}ww();break}catch(ae){dy(t,ae)}while(!0);return bi=oa=null,K.H=l,K.A=h,yt=a,st!==null?0:(Ct=null,lt=0,Zc(),Ft)}function ww(){for(;st!==null&&!Fi();)py(st)}function py(t){var n=U0(t.alternate,t,Ri);t.memoizedProps=t.pendingProps,n===null?Du(t):st=n}function gy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=D0(a,n,n.pendingProps,n.type,void 0,lt);break;case 11:n=D0(a,n,n.pendingProps,n.type.render,n.ref,lt);break;case 5:Hh(n);default:B0(a,n),n=st=mg(n,Ri),n=U0(a,n,Ri)}t.memoizedProps=t.pendingProps,n===null?Du(t):st=n}function fl(t,n,a,l){bi=oa=null,Hh(n),nl=null,yo=0;var h=n.return;try{if(uw(t,h,n,a,lt)){Ft=1,bu(t,hs(a,t.current)),st=null;return}}catch(m){if(h!==null)throw st=h,m;Ft=1,bu(t,hs(a,t.current)),st=null;return}n.flags&32768?(ht||l===1?t=!0:cl||(lt&536870912)!==0?t=!1:(ur=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),yy(n,t)):Du(n)}function Du(t){var n=t;do{if((n.flags&32768)!==0){yy(n,ur);return}t=n.return;var a=fw(n.alternate,n,Ri);if(a!==null){st=a;return}if(n=n.sibling,n!==null){st=n;return}st=n=t}while(n!==null);Ft===0&&(Ft=5)}function yy(t,n){do{var a=mw(t.alternate,t);if(a!==null){a.flags&=32767,st=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){st=t;return}st=t=a}while(t!==null);Ft=6,st=null}function xy(t,n,a,l,h,m,v,w,D){t.cancelPendingCommit=null;do Mu();while(cn!==0);if((yt&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=gh,lh(t,a,m,v,w,D),t===Ct&&(st=Ct=null,lt=0),dl=n,fr=t,Ii=a,Nf=m,Sf=h,ly=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Sw(Q,function(){return Ey(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=P.p,P.p=2,v=yt,yt|=4;try{pw(t,n,a)}finally{yt=v,P.p=h,K.T=l}}cn=1,vy(),by(),_y()}}function vy(){if(cn===1){cn=0;var t=fr,n=dl,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=P.p;P.p=2;var h=yt;yt|=4;try{J0(n,t);var m=Bf,v=rg(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&ig(w.ownerDocument.documentElement,w)){if(D!==null&&dh(w)){var G=D.start,ae=D.end;if(ae===void 0&&(ae=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(ae,w.value.length);else{var ue=w.ownerDocument||document,Y=ue&&ue.defaultView||window;if(Y.getSelection){var ee=Y.getSelection(),ke=w.textContent.length,Be=Math.min(D.start,ke),St=D.end===void 0?Be:Math.min(D.end,ke);!ee.extend&&Be>St&&(v=St,St=Be,Be=v);var z=sg(w,Be),V=sg(w,St);if(z&&V&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==V.node||ee.focusOffset!==V.offset)){var F=ue.createRange();F.setStart(z.node,z.offset),ee.removeAllRanges(),Be>St?(ee.addRange(F),ee.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),ee.addRange(F))}}}}for(ue=[],ee=w;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ue.length;w++){var oe=ue[w];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Yu=!!zf,Bf=zf=null}finally{yt=h,P.p=l,K.T=a}}t.current=n,cn=2}}function by(){if(cn===2){cn=0;var t=fr,n=dl,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=P.p;P.p=2;var h=yt;yt|=4;try{$0(t,n.alternate,n)}finally{yt=h,P.p=l,K.T=a}}cn=3}}function _y(){if(cn===4||cn===3){cn=0,Rn();var t=fr,n=dl,a=Ii,l=ly;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?cn=5:(cn=0,dl=fr=null,wy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(hr=null),mi(a),n=n.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(je,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=P.p,P.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];m(w.value,{componentStack:w.stack})}}finally{K.T=n,P.p=h}}(Ii&3)!==0&&Mu(),si(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Af?Mo++:(Mo=0,Af=t):Mo=0,Oo(0)}}function wy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,po(n)))}function Mu(){return vy(),by(),_y(),Ey()}function Ey(){if(cn!==5)return!1;var t=fr,n=Nf;Nf=0;var a=mi(Ii),l=K.T,h=P.p;try{P.p=32>a?32:a,K.T=null,a=Sf,Sf=null;var m=fr,v=Ii;if(cn=0,dl=fr=null,Ii=0,(yt&6)!==0)throw Error(r(331));var w=yt;if(yt|=4,iy(m.current),ty(m,m.current,v,a),yt=w,Oo(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(je,m)}catch{}return!0}finally{P.p=h,K.T=l,wy(t,n)}}function Ty(t,n,a){n=hs(a,n),n=rf(t.stateNode,n,2),t=ar(t,n,2),t!==null&&(Gr(t,2),si(t))}function _t(t,n,a){if(t.tag===3)Ty(t,t,a);else for(;n!==null;){if(n.tag===3){Ty(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(hr===null||!hr.has(l))){t=hs(a,t),a=N0(2),l=ar(n,a,2),l!==null&&(S0(a,l,n,t),Gr(l,2),si(l));break}}n=n.return}}function Rf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new xw;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(wf=!0,h.add(a),t=Ew.bind(null,t,n,a),n.then(t,t))}function Ew(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ct===t&&(lt&a)===a&&(Ft===4||Ft===3&&(lt&62914560)===lt&&300>qt()-ju?(yt&2)===0&&hl(t,0):Ef|=a,ul===lt&&(ul=0)),si(t)}function Ny(t,n){n===0&&(n=Rc()),t=ra(t,n),t!==null&&(Gr(t,n),si(t))}function Tw(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Ny(t,a)}function Nw(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Ny(t,a)}function Sw(t,n){return rt(t,n)}var Ou=null,ml=null,If=!1,Vu=!1,kf=!1,pr=0;function si(t){t!==ml&&t.next===null&&(ml===null?Ou=ml=t:ml=ml.next=t),Vu=!0,If||(If=!0,jw())}function Oo(t,n){if(!kf&&Vu){kf=!0;do for(var a=!1,l=Ou;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var v=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-nt(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Cy(l,m))}else m=lt,m=Wt(l,l===Ct?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Yn(l,m)||(a=!0,Cy(l,m));l=l.next}while(a);kf=!1}}function Aw(){Sy()}function Sy(){Vu=If=!1;var t=0;pr!==0&&Pw()&&(t=pr);for(var n=qt(),a=null,l=Ou;l!==null;){var h=l.next,m=Ay(l,n);m===0?(l.next=null,a===null?Ou=h:a.next=h,h===null&&(ml=a)):(a=l,(t!==0||(m&3)!==0)&&(Vu=!0)),l=h}cn!==0&&cn!==5||Oo(t),pr!==0&&(pr=0)}function Ay(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-nt(m),w=1<<v,D=h[v];D===-1?((w&a)===0||(w&l)!==0)&&(h[v]=ah(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=Ct,a=lt,a=Wt(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(bt===2||bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Pt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Pt(l),mi(a)){case 2:case 8:a=Es;break;case 32:a=Q;break;case 268435456:a=Me;break;default:a=Q}return l=jy.bind(null,t),a=rt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Pt(l),t.callbackPriority=2,t.callbackNode=null,2}function jy(t,n){if(cn!==0&&cn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Mu()&&t.callbackNode!==a)return null;var l=lt;return l=Wt(t,t===Ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(cy(t,l,n),Ay(t,qt()),t.callbackNode!=null&&t.callbackNode===a?jy.bind(null,t):null)}function Cy(t,n){if(Mu())return null;cy(t,n,!0)}function jw(){zw(function(){(yt&6)!==0?rt(ws,Aw):Sy()})}function Df(){if(pr===0){var t=Ja;t===0&&(t=At,At<<=1,(At&261888)===0&&(At=256)),pr=t}return pr}function Ry(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function Iy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Cw(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ry((h[hn]||null).action),v=l.submitter;v&&(n=(n=v[hn]||null)?Ry(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var w=new Xs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(pr!==0){var D=v?Iy(h,v):new FormData(h);Zh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=v?Iy(h,v):new FormData(h),Zh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Mf=0;Mf<ph.length;Mf++){var Of=ph[Mf],Rw=Of.toLowerCase(),Iw=Of[0].toUpperCase()+Of.slice(1);ks(Rw,"on"+Iw)}ks(og,"onAnimationEnd"),ks(cg,"onAnimationIteration"),ks(ug,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(K1,"onTransitionRun"),ks($1,"onTransitionStart"),ks(Q1,"onTransitionCancel"),ks(dg,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function ky(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var w=l[v],D=w.instance,G=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=G;try{m(h)}catch(ae){Wc(ae)}h.currentTarget=null,m=D}else for(v=0;v<l.length;v++){if(w=l[v],D=w.instance,G=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=G;try{m(h)}catch(ae){Wc(ae)}h.currentTarget=null,m=D}}}}function it(t,n){var a=n[Da];a===void 0&&(a=n[Da]=new Set);var l=t+"__bubble";a.has(l)||(Dy(n,t,2,!1),a.add(l))}function Vf(t,n,a){var l=0;n&&(l|=4),Dy(a,t,l,n)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Lf(t){if(!t[Lu]){t[Lu]=!0,Kl.forEach(function(a){a!=="selectionchange"&&(kw.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Lu]||(n[Lu]=!0,Vf("selectionchange",!1,n))}}function Dy(t,n,a,l){switch(ox(n)){case 2:var h=a2;break;case 8:h=l2;break;default:h=Zf}a=h.bind(null,n,a,t),h=void 0,!Wr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Pf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Hs(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=m=v;continue e}w=w.parentNode}}l=l.return}Xi(function(){var G=m,ae=os(a),ue=[];e:{var Y=hg.get(t);if(Y!==void 0){var ee=Xs,ke=t;switch(t){case"keypress":if(Jr(a)===0)break e;case"keydown":case"keyup":ee=$c;break;case"focusin":ke="focus",ee=ta;break;case"focusout":ke="blur",ee=ta;break;case"beforeblur":case"afterblur":ee=ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=p;break;case og:case cg:case ug:ee=Bc;break;case dg:ee=N;break;case"scroll":case"scrollend":ee=ro;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=yi;break;case"toggle":case"beforetoggle":ee=We}var Be=(n&4)!==0,St=!Be&&(t==="scroll"||t==="scrollend"),z=Be?Y!==null?Y+"Capture":null:Y;Be=[];for(var V=G,F;V!==null;){var oe=V;if(F=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||F===null||z===null||(oe=js(V,z),oe!=null&&Be.push(Lo(V,oe,F))),St)break;V=V.return}0<Be.length&&(Y=new ee(Y,ke,null,a,ae),ue.push({event:Y,listeners:Be}))}}if((n&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",Y&&a!==no&&(ke=a.relatedTarget||a.fromElement)&&(Hs(ke)||ke[Bs]))break e;if((ee||Y)&&(Y=ae.window===ae?ae:(Y=ae.ownerDocument)?Y.defaultView||Y.parentWindow:window,ee?(ke=a.relatedTarget||a.toElement,ee=G,ke=ke?Hs(ke):null,ke!==null&&(St=u(ke),Be=ke.tag,ke!==St||Be!==5&&Be!==27&&Be!==6)&&(ke=null)):(ee=null,ke=G),ee!==ke)){if(Be=ao,oe="onMouseLeave",z="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Be=yi,oe="onPointerLeave",z="onPointerEnter",V="pointer"),St=ee==null?Y:Kn(ee),F=ke==null?Y:Kn(ke),Y=new Be(oe,V+"leave",ee,a,ae),Y.target=St,Y.relatedTarget=F,oe=null,Hs(ae)===G&&(Be=new Be(z,V+"enter",ke,a,ae),Be.target=F,Be.relatedTarget=St,oe=Be),St=oe,ee&&ke)t:{for(Be=Dw,z=ee,V=ke,F=0,oe=z;oe;oe=Be(oe))F++;oe=0;for(var Oe=V;Oe;Oe=Be(Oe))oe++;for(;0<F-oe;)z=Be(z),F--;for(;0<oe-F;)V=Be(V),oe--;for(;F--;){if(z===V||V!==null&&z===V.alternate){Be=z;break t}z=Be(z),V=Be(V)}Be=null}else Be=null;ee!==null&&My(ue,Y,ee,Be,!1),ke!==null&&St!==null&&My(ue,St,ke,Be,!0)}}e:{if(Y=G?Kn(G):window,ee=Y.nodeName&&Y.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Y.type==="file")var mt=Wp;else if(Qp(Y))if(Zp)mt=F1;else{mt=q1;var De=B1}else ee=Y.nodeName,!ee||ee.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&La(G.elementType)&&(mt=Wp):mt=H1;if(mt&&(mt=mt(t,G))){Xp(ue,mt,a,ae);break e}De&&De(t,Y,G),t==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Jl(Y,"number",Y.value)}switch(De=G?Kn(G):window,t){case"focusin":(Qp(De)||De.contentEditable==="true")&&(Ga=De,hh=G,ho=null);break;case"focusout":ho=hh=Ga=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,ag(ue,a,ae);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":ag(ue,a,ae)}var et;if(gt)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Fa?na(t,a)&&(ot="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ot="onCompositionStart");ot&&(Js&&a.locale!=="ko"&&(Fa||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Fa&&(et=io()):(Qs=ae,so="value"in Qs?Qs.value:Qs.textContent,Fa=!0)),De=Pu(G,ot),0<De.length&&(ot=new Zs(ot,t,null,a,ae),ue.push({event:ot,listeners:De}),et?ot.data=et:(et=Ha(a),et!==null&&(ot.data=et)))),(et=us?L1(t,a):P1(t,a))&&(ot=Pu(G,"onBeforeInput"),0<ot.length&&(De=new Zs("onBeforeInput","beforeinput",null,a,ae),ue.push({event:De,listeners:ot}),De.data=et)),Cw(ue,t,G,a,ae)}ky(ue,n)})}function Lo(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Pu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=js(t,a),h!=null&&l.unshift(Lo(t,h,m)),h=js(t,n),h!=null&&l.push(Lo(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Dw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function My(t,n,a,l,h){for(var m=n._reactName,v=[];a!==null&&a!==l;){var w=a,D=w.alternate,G=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||G===null||(D=G,h?(G=js(a,m),G!=null&&v.unshift(Lo(a,G,D))):h||(G=js(a,m),G!=null&&v.push(Lo(a,G,D)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var Mw=/\r\n?/g,Ow=/\u0000|\uFFFD/g;function Oy(t){return(typeof t=="string"?t:""+t).replace(Mw,`
`).replace(Ow,"")}function Vy(t,n){return n=Oy(n),Oy(t)===n}function Nt(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Vn(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,a,l);break;case"style":to(t,l,m);break;case"data":if(n!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Nt(t,n,"name",h.name,h,null),Nt(t,n,"formEncType",h.formEncType,h,null),Nt(t,n,"formMethod",h.formMethod,h,null),Nt(t,n,"formTarget",h.formTarget,h,null)):(Nt(t,n,"encType",h.encType,h,null),Nt(t,n,"method",h.method,h,null),Nt(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=As);break;case"onScroll":l!=null&&it("scroll",t);break;case"onScrollEnd":l!=null&&it("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":it("beforetoggle",t),it("toggle",t),Oa(t,"popover",l);break;case"xlinkActuate":en(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Oa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Pc.get(a)||a,Oa(t,a,l))}}function Uf(t,n,a,l,h,m){switch(a){case"style":to(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&it("scroll",t);break;case"onScrollEnd":l!=null&&it("scrollend",t);break;case"onClick":l!=null&&(t.onclick=As);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$l.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[hn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Oa(t,a,l)}}}function bn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",t),it("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Nt(t,n,m,v,a,null)}}h&&Nt(t,n,"srcSet",a.srcSet,a,null),l&&Nt(t,n,"src",a.src,a,null);return;case"input":it("invalid",t);var w=m=v=h=null,D=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":h=ae;break;case"type":v=ae;break;case"checked":D=ae;break;case"defaultChecked":G=ae;break;case"value":m=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,n));break;default:Nt(t,n,l,ae,a,null)}}Oc(t,m,w,D,G,v,h,!1);return;case"select":it("invalid",t),l=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:Nt(t,n,h,w,a,null)}n=m,a=v,t.multiple=!!l,n!=null?Yi(t,!!l,n,!1):a!=null&&Yi(t,!!l,a,!0);return;case"textarea":it("invalid",t),m=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Nt(t,n,v,w,a,null)}Ki(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Nt(t,n,D,l,a,null)}return;case"dialog":it("beforetoggle",t),it("toggle",t),it("cancel",t),it("close",t);break;case"iframe":case"object":it("load",t);break;case"video":case"audio":for(l=0;l<Vo.length;l++)it(Vo[l],t);break;case"image":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"embed":case"source":case"link":it("error",t),it("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Nt(t,n,G,l,a,null)}return;default:if(La(n)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&Uf(t,n,ae,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Nt(t,n,w,l,a,null))}function Vw(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,D=null,G=null,ae=null;for(ee in a){var ue=a[ee];if(a.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":D=ue;default:l.hasOwnProperty(ee)||Nt(t,n,ee,null,l,ue)}}for(var Y in l){var ee=l[Y];if(ue=a[Y],l.hasOwnProperty(Y)&&(ee!=null||ue!=null))switch(Y){case"type":m=ee;break;case"name":h=ee;break;case"checked":G=ee;break;case"defaultChecked":ae=ee;break;case"value":v=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,n));break;default:ee!==ue&&Nt(t,n,Y,ee,l,ue)}}Va(t,v,w,D,G,ae,m,h);return;case"select":ee=v=w=Y=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":ee=D;default:l.hasOwnProperty(m)||Nt(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":Y=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==D&&Nt(t,n,h,m,l,D)}n=w,a=v,l=ee,Y!=null?Yi(t,!!a,Y,!1):!!l!=!!a&&(n!=null?Yi(t,!!a,n,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":ee=Y=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Nt(t,n,w,null,l,h)}for(v in l)if(h=l[v],m=a[v],l.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":Y=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&Nt(t,n,v,h,l,m)}Vc(t,Y,ee);return;case"option":for(var ke in a)if(Y=a[ke],a.hasOwnProperty(ke)&&Y!=null&&!l.hasOwnProperty(ke))switch(ke){case"selected":t.selected=!1;break;default:Nt(t,n,ke,null,l,Y)}for(D in l)if(Y=l[D],ee=a[D],l.hasOwnProperty(D)&&Y!==ee&&(Y!=null||ee!=null))switch(D){case"selected":t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Nt(t,n,D,Y,l,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in a)Y=a[Be],a.hasOwnProperty(Be)&&Y!=null&&!l.hasOwnProperty(Be)&&Nt(t,n,Be,null,l,Y);for(G in l)if(Y=l[G],ee=a[G],l.hasOwnProperty(G)&&Y!==ee&&(Y!=null||ee!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:Nt(t,n,G,Y,l,ee)}return;default:if(La(n)){for(var St in a)Y=a[St],a.hasOwnProperty(St)&&Y!==void 0&&!l.hasOwnProperty(St)&&Uf(t,n,St,void 0,l,Y);for(ae in l)Y=l[ae],ee=a[ae],!l.hasOwnProperty(ae)||Y===ee||Y===void 0&&ee===void 0||Uf(t,n,ae,Y,l,ee);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!l.hasOwnProperty(z)&&Nt(t,n,z,null,l,Y);for(ue in l)Y=l[ue],ee=a[ue],!l.hasOwnProperty(ue)||Y===ee||Y==null&&ee==null||Nt(t,n,ue,Y,l,ee)}function Ly(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&Ly(v)){for(v=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],G=D.startTime;if(G>w)break;var ae=D.transferSize,ue=D.initiatorType;ae&&Ly(ue)&&(D=D.responseEnd,v+=ae*(D<w?1:(w-G)/(D-G)))}if(--l,n+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zf=null,Bf=null;function Uu(t){return t.nodeType===9?t:t.ownerDocument}function Py(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function qf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Hf=null;function Pw(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,zw=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(Bw)}:zy;function Bw(t){setTimeout(function(){throw t})}function gr(t){return t==="head"}function qy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),xl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Po(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Po(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[qs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Po(t.ownerDocument.body);a=h}while(a);xl(n)}function Hy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ff(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),Ma(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function qw(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[qs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ys(t.nextSibling),t===null)break}return null}function Hw(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ys(t.nextSibling),t===null))return null;return t}function Fy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ys(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Fw(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ys(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Kf=null;function Gy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return ys(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Yy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Ky(t,n,a){switch(n=Uu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Po(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ma(t)}var xs=new Map,$y=new Set;function zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ki=P.d;P.d={f:Gw,r:Yw,D:Kw,C:$w,L:Qw,m:Xw,X:Zw,S:Ww,M:Jw};function Gw(){var t=ki.f(),n=Iu();return t||n}function Yw(t){var n=ls(t);n!==null&&n.tag===5&&n.type==="form"?d0(n):ki.r(t)}var pl=typeof document>"u"?null:document;function Qy(t,n,a){var l=pl;if(l&&typeof n=="string"&&n){var h=On(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),$y.has(h)||($y.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),bn(n,"link",t),Jt(n),l.head.appendChild(n)))}}function Kw(t){ki.D(t),Qy("dns-prefetch",t,null)}function $w(t,n){ki.C(t,n),Qy("preconnect",t,n)}function Qw(t,n,a){ki.L(t,n,a);var l=pl;if(l&&t&&n){var h='link[rel="preload"][as="'+On(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+On(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+On(a.imageSizes)+'"]')):h+='[href="'+On(t)+'"]';var m=h;switch(n){case"style":m=gl(t);break;case"script":m=yl(t)}xs.has(m)||(t=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),xs.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Uo(m))||n==="script"&&l.querySelector(zo(m))||(n=l.createElement("link"),bn(n,"link",t),Jt(n),l.head.appendChild(n)))}}function Xw(t,n){ki.m(t,n);var a=pl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!xs.has(m)&&(t=T({rel:"modulepreload",href:t},n),xs.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zo(m)))return}l=a.createElement("link"),bn(l,"link",t),Jt(l),a.head.appendChild(l)}}}function Ww(t,n,a){ki.S(t,n,a);var l=pl;if(l&&t){var h=Fs(l).hoistableStyles,m=gl(t);n=n||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Uo(m)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},a),(a=xs.get(m))&&$f(t,a);var D=v=l.createElement("link");Jt(D),bn(D,"link",t),D._p=new Promise(function(G,ae){D.onload=G,D.onerror=ae}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Bu(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function Zw(t,n){ki.X(t,n);var a=pl;if(a&&t){var l=Fs(a).hoistableScripts,h=yl(t),m=l.get(h);m||(m=a.querySelector(zo(h)),m||(t=T({src:t,async:!0},n),(n=xs.get(h))&&Qf(t,n),m=a.createElement("script"),Jt(m),bn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Jw(t,n){ki.M(t,n);var a=pl;if(a&&t){var l=Fs(a).hoistableScripts,h=yl(t),m=l.get(h);m||(m=a.querySelector(zo(h)),m||(t=T({src:t,async:!0,type:"module"},n),(n=xs.get(h))&&Qf(t,n),m=a.createElement("script"),Jt(m),bn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Xy(t,n,a,l){var h=(h=me.current)?zu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=gl(a.href),a=Fs(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=gl(a.href);var m=Fs(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Uo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),xs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xs.set(t,a),m||e2(h,t,a,v.state))),n&&l===null)throw Error(r(528,""));return v}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=yl(a),a=Fs(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function gl(t){return'href="'+On(t)+'"'}function Uo(t){return'link[rel="stylesheet"]['+t+"]"}function Wy(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function e2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),bn(n,"link",a),Jt(n),t.head.appendChild(n))}function yl(t){return'[src="'+On(t)+'"]'}function zo(t){return"script[async]"+t}function Zy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+On(a.href)+'"]');if(l)return n.instance=l,Jt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Jt(l),bn(l,"style",h),Bu(l,a.precedence,t),n.instance=l;case"stylesheet":h=gl(a.href);var m=t.querySelector(Uo(h));if(m)return n.state.loading|=4,n.instance=m,Jt(m),m;l=Wy(a),(h=xs.get(h))&&$f(l,h),m=(t.ownerDocument||t).createElement("link"),Jt(m);var v=m;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),bn(m,"link",l),n.state.loading|=4,Bu(m,a.precedence,t),n.instance=m;case"script":return m=yl(a.src),(h=t.querySelector(zo(m)))?(n.instance=h,Jt(h),h):(l=a,(h=xs.get(m))&&(l=T({},a),Qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Jt(h),bn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Bu(l,a.precedence,t));return n.instance}function Bu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function $f(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var qu=null;function Jy(t,n,a){if(qu===null){var l=new Map,h=qu=new Map;h.set(a,l)}else h=qu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[qs]||m[Zt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=t+v;var w=l.get(v);w?w.push(m):l.set(v,[m])}}return l}function ex(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function t2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function tx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function n2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=gl(l.href),m=n.querySelector(Uo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Hu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Jt(m);return}m=n.ownerDocument||n,l=Wy(l),(h=xs.get(h))&&$f(l,h),m=m.createElement("link"),Jt(m);var v=m;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),bn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Hu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Xf=0;function s2(t,n){return t.stylesheets&&t.count===0&&Gu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Xf===0&&(Xf=62500*Lw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Xf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Hu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fu=null;function Gu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fu=new Map,n.forEach(i2,t),Fu=null,Hu.call(t))}function i2(t,n){if(!(n.state.loading&4)){var a=Fu.get(t);if(a)var l=a.get(null);else{a=new Map,Fu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,h),a.set(v,h),this.count++,l=Hu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Bo={$$typeof:ge,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function r2(t,n,a,l,h,m,v,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function nx(t,n,a,l,h,m,v,w,D,G,ae,ue){return t=new r2(t,n,a,v,D,G,ae,ue,w),n=1,m===!0&&(n|=24),m=Xn(3,null,null,n),t.current=m,m.stateNode=t,n=jh(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},kh(m),t}function sx(t){return t?(t=$a,t):$a}function ix(t,n,a,l,h,m){h=sx(h),l.context===null?l.context=h:l.pendingContext=h,l=rr(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ar(t,l,n),a!==null&&(Bn(a,t,n),vo(a,t,n))}function rx(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Wf(t,n){rx(t,n),(t=t.alternate)&&rx(t,n)}function ax(t){if(t.tag===13||t.tag===31){var n=ra(t,67108864);n!==null&&Bn(n,t,67108864),Wf(t,67108864)}}function lx(t){if(t.tag===13||t.tag===31){var n=ts();n=Kr(n);var a=ra(t,n);a!==null&&Bn(a,t,n),Wf(t,n)}}var Yu=!0;function a2(t,n,a,l){var h=K.T;K.T=null;var m=P.p;try{P.p=2,Zf(t,n,a,l)}finally{P.p=m,K.T=h}}function l2(t,n,a,l){var h=K.T;K.T=null;var m=P.p;try{P.p=8,Zf(t,n,a,l)}finally{P.p=m,K.T=h}}function Zf(t,n,a,l){if(Yu){var h=Jf(l);if(h===null)Pf(t,n,l,Ku,a),cx(t,l);else if(c2(h,t,n,a,l))l.stopPropagation();else if(cx(t,l),n&4&&-1<o2.indexOf(t)){for(;h!==null;){var m=ls(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=dn(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-nt(v);w.entanglements[1]|=D,v&=~D}si(m),(yt&6)===0&&(Cu=qt()+500,Oo(0))}}break;case 31:case 13:w=ra(m,2),w!==null&&Bn(w,m,2),Iu(),Wf(m,2)}if(m=Jf(l),m===null&&Pf(t,n,l,Ku,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Pf(t,n,l,null,a)}}function Jf(t){return t=os(t),em(t)}var Ku=null;function em(t){if(Ku=null,t=Hs(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=g(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ku=t,null}function ox(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_s()){case ws:return 2;case Es:return 8;case Q:case ye:return 32;case Me:return 268435456;default:return 32}default:return 32}}var tm=!1,yr=null,xr=null,vr=null,qo=new Map,Ho=new Map,br=[],o2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cx(t,n){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":qo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(n.pointerId)}}function Fo(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=ls(n),n!==null&&ax(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function c2(t,n,a,l,h){switch(n){case"focusin":return yr=Fo(yr,t,n,a,l,h),!0;case"dragenter":return xr=Fo(xr,t,n,a,l,h),!0;case"mouseover":return vr=Fo(vr,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return qo.set(m,Fo(qo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Ho.set(m,Fo(Ho.get(m)||null,t,n,a,l,h)),!0}return!1}function ux(t){var n=Hs(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,Ns(t.priority,function(){lx(a)});return}}else if(n===31){if(n=g(a),n!==null){t.blockedOn=n,Ns(t.priority,function(){lx(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $u(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);no=l,a.target.dispatchEvent(l),no=null}else return n=ls(a),n!==null&&ax(n),t.blockedOn=a,!1;n.shift()}return!0}function dx(t,n,a){$u(t)&&a.delete(n)}function u2(){tm=!1,yr!==null&&$u(yr)&&(yr=null),xr!==null&&$u(xr)&&(xr=null),vr!==null&&$u(vr)&&(vr=null),qo.forEach(dx),Ho.forEach(dx)}function Qu(t,n){t.blockedOn===n&&(t.blockedOn=null,tm||(tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,u2)))}var Xu=null;function hx(t){Xu!==t&&(Xu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Xu===t&&(Xu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var m=ls(a);m!==null&&(t.splice(n,3),n-=3,Zh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function xl(t){function n(D){return Qu(D,t)}yr!==null&&Qu(yr,t),xr!==null&&Qu(xr,t),vr!==null&&Qu(vr,t),qo.forEach(n),Ho.forEach(n);for(var a=0;a<br.length;a++){var l=br[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<br.length&&(a=br[0],a.blockedOn===null);)ux(a),a.blockedOn===null&&br.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],v=h[hn]||null;if(typeof m=="function")v||hx(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[hn]||null)w=v.formAction;else if(em(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),hx(a)}}}function fx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}Wu.prototype.render=nm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=ts();ix(a,l,t,n,null,null)},Wu.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ix(t.current,2,null,t,null,null),Iu(),n[Bs]=null}};function Wu(t){this._internalRoot=t}Wu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ic();t={blockedOn:null,target:t,priority:n};for(var a=0;a<br.length&&n!==0&&n<br[a].priority;a++);br.splice(a,0,t),a===0&&ux(t)}};var mx=e.version;if(mx!=="19.2.0")throw Error(r(527,mx,"19.2.0"));P.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var d2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{je=Zu.inject(d2),Pe=Zu}catch{}}return Yo.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",h=_0,m=w0,v=E0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=nx(t,1,!1,null,null,a,l,null,h,m,v,fx),t[Bs]=n.current,Lf(t),new nm(n)},Yo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=_0,v=w0,w=E0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=nx(t,1,!0,n,a??null,l,h,D,m,v,w,fx),n.context=sx(null),a=n.current,l=ts(),l=Kr(l),h=rr(l),h.callback=null,ar(a,h,l),a=l,n.current.lanes=a,Gr(n,a),si(n),t[Bs]=n.current,Lf(t),new Wu(n)},Yo.version="19.2.0",Yo}var Tx;function w2(){if(Tx)return rm.exports;Tx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rm.exports=_2(),rm.exports}var E2=w2();const T2=()=>{};var Nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},N2=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[s++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[s++],f=i[s++],g=i[s++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=i[s++],f=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},cb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,g=f?i[o+1]:0,y=o+2<i.length,x=y?i[o+2]:0,_=u>>2,T=(u&3)<<4|g>>4;let A=(g&15)<<2|x>>6,q=x&63;y||(q=64,f||(A=64)),r.push(s[_],s[T],s[A],s[q])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ob(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):N2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=s[i.charAt(o++)],g=o<i.length?s[i.charAt(o)]:0;++o;const x=o<i.length?s[i.charAt(o)]:64;++o;const T=o<i.length?s[i.charAt(o)]:64;if(++o,u==null||g==null||x==null||T==null)throw new S2;const A=u<<2|g>>4;if(r.push(A),x!==64){const q=g<<4&240|x>>2;if(r.push(q),T!==64){const W=x<<6&192|T;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class S2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A2=function(i){const e=ob(i);return cb.encodeByteArray(e,!0)},yd=function(i){return A2(i).replace(/\./g,"")},ub=function(i){try{return cb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=()=>j2().__FIREBASE_DEFAULTS__,R2=()=>{if(typeof process>"u"||typeof Nx>"u")return;const i=Nx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},I2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ub(i[1]);return e&&JSON.parse(e)},Ld=()=>{try{return T2()||C2()||R2()||I2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},db=i=>Ld()?.emulatorHosts?.[i],k2=i=>{const e=db(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},hb=()=>Ld()?.config,fb=i=>Ld()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[yd(JSON.stringify(s)),yd(JSON.stringify(f)),""].join(".")}const Jo={};function O2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?i.emulator.push(e):i.prod.push(e);return i}function V2(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let Sx=!1;function pb(i,e){if(typeof window>"u"||typeof document>"u"||!Ll(window.location.host)||Jo[i]===e||Jo[i]||Sx)return;Jo[i]=e;function s(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=O2().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,q){A.setAttribute("width","24"),A.setAttribute("id",q),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Sx=!0,f()},A}function _(A,q){A.setAttribute("id",q),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=V2(r),q=s("text"),W=document.getElementById(q)||document.createElement("span"),J=s("learnmore"),U=document.getElementById(J)||document.createElement("a"),ie=s("preprendIcon"),ne=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ge=A.element;g(ge),_(U,J);const he=x();y(ne,ie),ge.append(ne,W,U,he),document.body.appendChild(ge)}u?(W.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function P2(){const i=Ld()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function B2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q2(){const i=Cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function H2(){return!P2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F2(){try{return typeof indexedDB=="object"}catch{return!1}}function G2(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="FirebaseError";class Bi extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=Y2,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?K2(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Bi(o,g,r)}}function K2(i,e){return i.replace($2,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const $2=/\{\$([^}]+)}/g;function Q2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ta(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const u=i[o],f=e[o];if(Ax(u)&&Ax(f)){if(!Ta(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Ax(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ko(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function $o(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function X2(i,e){const s=new W2(i,e);return s.subscribe.bind(s)}class W2{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z2(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(i){return i&&i._delegate?i._delegate:i}class Na{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new D2;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tE(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eE(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eE(i){return i===va?void 0:i}function tE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new J2(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ct||(ct={}));const sE={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},iE=ct.INFO,rE={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},aE=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=rE[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sp{constructor(e){this.name=e,this._logLevel=iE,this._logHandler=aE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const lE=(i,e)=>e.some(s=>i instanceof s);let jx,Cx;function oE(){return jx||(jx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cE(){return Cx||(Cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gb=new WeakMap,Am=new WeakMap,yb=new WeakMap,um=new WeakMap,ip=new WeakMap;function uE(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{s(Cr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&gb.set(s,i)}).catch(()=>{}),ip.set(e,i),e}function dE(i){if(Am.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{s(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Am.set(i,e)}let jm={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return Am.get(i);if(e==="objectStoreNames")return i.objectStoreNames||yb.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Cr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function hE(i){jm=i(jm)}function fE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(dm(this),e,...s);return yb.set(r,e.sort?e.sort():[e]),Cr(r)}:cE().includes(i)?function(...e){return i.apply(dm(this),e),Cr(gb.get(this))}:function(...e){return Cr(i.apply(dm(this),e))}}function mE(i){return typeof i=="function"?fE(i):(i instanceof IDBTransaction&&dE(i),lE(i,oE())?new Proxy(i,jm):i)}function Cr(i){if(i instanceof IDBRequest)return uE(i);if(um.has(i))return um.get(i);const e=mE(i);return e!==i&&(um.set(i,e),ip.set(e,i)),e}const dm=i=>ip.get(i);function pE(i,e,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),g=Cr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Cr(f.result),y.oldVersion,y.newVersion,Cr(f.transaction),y)}),s&&f.addEventListener("blocked",y=>s(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),g}const gE=["get","getKey","getAll","getAllKeys","count"],yE=["put","add","delete","clear"],hm=new Map;function Rx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=yE.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||gE.includes(s)))return;const u=async function(f,...g){const y=this.transaction(f,o?"readwrite":"readonly");let x=y.store;return r&&(x=x.index(g.shift())),(await Promise.all([x[s](...g),o&&y.done]))[0]};return hm.set(e,u),u}hE(i=>({...i,get:(e,s,r)=>Rx(e,s)||i.get(e,s,r),has:(e,s)=>!!Rx(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(vE(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function vE(i){return i.getComponent()?.type==="VERSION"}const Cm="@firebase/app",Ix="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new sp("@firebase/app"),bE="@firebase/app-compat",_E="@firebase/analytics-compat",wE="@firebase/analytics",EE="@firebase/app-check-compat",TE="@firebase/app-check",NE="@firebase/auth",SE="@firebase/auth-compat",AE="@firebase/database",jE="@firebase/data-connect",CE="@firebase/database-compat",RE="@firebase/functions",IE="@firebase/functions-compat",kE="@firebase/installations",DE="@firebase/installations-compat",ME="@firebase/messaging",OE="@firebase/messaging-compat",VE="@firebase/performance",LE="@firebase/performance-compat",PE="@firebase/remote-config",UE="@firebase/remote-config-compat",zE="@firebase/storage",BE="@firebase/storage-compat",qE="@firebase/firestore",HE="@firebase/ai",FE="@firebase/firestore-compat",GE="firebase",YE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="[DEFAULT]",KE={[Cm]:"fire-core",[bE]:"fire-core-compat",[wE]:"fire-analytics",[_E]:"fire-analytics-compat",[TE]:"fire-app-check",[EE]:"fire-app-check-compat",[NE]:"fire-auth",[SE]:"fire-auth-compat",[AE]:"fire-rtdb",[jE]:"fire-data-connect",[CE]:"fire-rtdb-compat",[RE]:"fire-fn",[IE]:"fire-fn-compat",[kE]:"fire-iid",[DE]:"fire-iid-compat",[ME]:"fire-fcm",[OE]:"fire-fcm-compat",[VE]:"fire-perf",[LE]:"fire-perf-compat",[PE]:"fire-rc",[UE]:"fire-rc-compat",[zE]:"fire-gcs",[BE]:"fire-gcs-compat",[qE]:"fire-fst",[FE]:"fire-fst-compat",[HE]:"fire-vertex","fire-js":"fire-js",[GE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,$E=new Map,Im=new Map;function kx(i,e){try{i.container.addComponent(e)}catch(s){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function Cl(i){const e=i.name;if(Im.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,i);for(const s of xd.values())kx(s,i);for(const s of $E.values())kx(s,i);return!0}function rp(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function vs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new pc("app","Firebase",QE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=YE;function xb(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:Rm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Rr.create("bad-app-name",{appName:String(o)});if(s||(s=hb()),!s)throw Rr.create("no-options");const u=xd.get(o);if(u){if(Ta(s,u.options)&&Ta(r,u.config))return u;throw Rr.create("duplicate-app",{appName:o})}const f=new nE(o);for(const y of Im.values())f.addComponent(y);const g=new XE(s,r,f);return xd.set(o,g),g}function vb(i=Rm){const e=xd.get(i);if(!e&&i===Rm&&hb())return xb();if(!e)throw Rr.create("no-app",{appName:i});return e}function Ir(i,e,s){let r=KE[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(f.join(" "));return}Cl(new Na(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebase-heartbeat-database",ZE=1,rc="firebase-heartbeat-store";let fm=null;function bb(){return fm||(fm=pE(WE,ZE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(rc)}catch(s){console.warn(s)}}}}).catch(i=>{throw Rr.create("idb-open",{originalErrorMessage:i.message})})),fm}async function JE(i){try{const s=(await bb()).transaction(rc),r=await s.objectStore(rc).get(_b(i));return await s.done,r}catch(e){if(e instanceof Bi)Vi.warn(e.message);else{const s=Rr.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(s.message)}}}async function Dx(i,e){try{const r=(await bb()).transaction(rc,"readwrite");await r.objectStore(rc).put(e,_b(i)),await r.done}catch(s){if(s instanceof Bi)Vi.warn(s.message);else{const r=Rr.create("idb-set",{originalErrorMessage:s?.message});Vi.warn(r.message)}}}function _b(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=1024,tT=30;class nT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new iT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>tT){const o=rT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mx(),{heartbeatsToSend:s,unsentEntries:r}=sT(this._heartbeatsCache.heartbeats),o=yd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vi.warn(e),""}}}function Mx(){return new Date().toISOString().substring(0,10)}function sT(i,e=eT){const s=[];let r=i.slice();for(const o of i){const u=s.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Ox(s)>e){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Ox(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class iT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F2()?G2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await JE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ox(i){return yd(JSON.stringify({version:2,heartbeats:i})).length}function rT(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(i){Cl(new Na("platform-logger",e=>new xE(e),"PRIVATE")),Cl(new Na("heartbeat",e=>new nT(e),"PRIVATE")),Ir(Cm,Ix,i),Ir(Cm,Ix,"esm2020"),Ir("fire-js","")}aT("");function wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lT=wb,Eb=new pc("auth","Firebase",wb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new sp("@firebase/auth");function oT(i,...e){vd.logLevel<=ct.WARN&&vd.warn(`Auth (${Pl}): ${i}`,...e)}function ld(i,...e){vd.logLevel<=ct.ERROR&&vd.error(`Auth (${Pl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(i,...e){throw ap(i,...e)}function ai(i,...e){return ap(i,...e)}function Tb(i,e,s){const r={...lT(),[e]:s};return new pc("auth","Firebase",r).create(e,{appName:i.name})}function Oi(i){return Tb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ap(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return Eb.create(i,...e)}function Fe(i,e,...s){if(!i)throw ap(e,...s)}function Di(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ld(e),new Error(e)}function Li(i,e){i||Di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return typeof self<"u"&&self.location?.href||""}function cT(){return Vx()==="http:"||Vx()==="https:"}function Vx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cT()||z2()||"connection"in navigator)?navigator.onLine:!0}function dT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Li(s>e,"Short delay should be less than long delay!"),this.isMobile=L2()||B2()}get(){return uT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(i,e){Li(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mT=new yc(3e4,6e4);function qi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Hi(i,e,s,r,o={}){return Sb(i,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=gc({key:i.config.apiKey,...f}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:y,...u};return U2()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Ll(i.emulatorConfig.host)&&(x.credentials="include"),Nb.fetch()(await Ab(i,i.config.apiHost,s,g),x)})}async function Sb(i,e,s){i._canInitEmulator=!1;const r={...hT,...e};try{const o=new gT(i),u=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Ju(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,x]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Ju(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw Ju(i,"user-disabled",f);const _=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Tb(i,_,x);Ps(i,_)}}catch(o){if(o instanceof Bi)throw o;Ps(i,"network-request-failed",{message:String(o)})}}async function xc(i,e,s,r,o={}){const u=await Hi(i,e,s,r,o);return"mfaPendingCredential"in u&&Ps(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ab(i,e,s,r){const o=`${e}${s}?${r}`,u=i,f=u.config.emulator?lp(i.config,o):`${i.config.apiScheme}://${o}`;return fT.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function pT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),mT.get())})}}function Ju(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=ai(i,e,r);return o.customData._tokenResponse=s,o}function Lx(i){return i!==void 0&&i.enterprise!==void 0}class yT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return pT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xT(i,e){return Hi(i,"GET","/v2/recaptchaConfig",qi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(i,e){return Hi(i,"POST","/v1/accounts:delete",e)}async function bd(i,e){return Hi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bT(i,e=!1){const s=Xt(i),r=await s.getIdToken(e),o=op(r);Fe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:ec(mm(o.auth_time)),issuedAtTime:ec(mm(o.iat)),expirationTime:ec(mm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function mm(i){return Number(i)*1e3}function op(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const o=ub(s);return o?JSON.parse(o):(ld("Failed to decode base64 JWT payload"),null)}catch(o){return ld("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Px(i){const e=op(i);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Bi&&_T(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function _T({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(i){const e=i.auth,s=await i.getIdToken(),r=await ac(i,bd(e,{idToken:s}));Fe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?jb(o.providerUserInfo):[],f=TT(i.providerData,u),g=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!f?.length,x=g?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(i,_)}async function ET(i){const e=Xt(i);await _d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TT(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function jb(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(i,e){const s=await Sb(i,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Ab(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:r};return i.emulatorConfig&&Ll(i.emulatorConfig.host)&&(y.credentials="include"),Nb.fetch()(f,y)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function ST(i,e){return Hi(i,"POST","/v2/accounts:revokeToken",qi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const s=Px(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:u}=await NT(e,s);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:u}=s,f=new Nl;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Fe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Fe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(i,e){Fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Vs{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new wT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Fe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return bT(this,e)}reload(){return ET(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await _d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vs(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await ac(this,vT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,u=s.phoneNumber??void 0,f=s.photoURL??void 0,g=s.tenantId??void 0,y=s._redirectEventId??void 0,x=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:q,providerData:W,stsTokenManager:J}=s;Fe(T&&J,e,"internal-error");const U=Nl.fromJSON(this.name,J);Fe(typeof T=="string",e,"internal-error"),wr(r,e.name),wr(o,e.name),Fe(typeof A=="boolean",e,"internal-error"),Fe(typeof q=="boolean",e,"internal-error"),wr(u,e.name),wr(f,e.name),wr(g,e.name),wr(y,e.name),wr(x,e.name),wr(_,e.name);const ie=new Vs({uid:T,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:q,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:U,createdAt:x,lastLoginAt:_});return W&&Array.isArray(W)&&(ie.providerData=W.map(ne=>({...ne}))),y&&(ie._redirectEventId=y),ie}static async _fromIdTokenResponse(e,s,r=!1){const o=new Nl;o.updateFromServerResponse(s);const u=new Vs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await _d(u),u}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];Fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?jb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,g=new Nl;g.updateFromIdToken(r);const y=new Vs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,x),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map;function Mi(i){Li(i instanceof Function,"Expected a class definition");let e=Ux.get(i);return e?(Li(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ux.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Cb.type="NONE";const zx=Cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i,e,s){return`firebase:${i}:${e}:${s}`}class Sl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=od(this.userKey,o.apiKey,u),this.fullPersistenceKey=od("persistence",o.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await bd(this.auth,{idToken:e}).catch(()=>{});return s?Vs._fromGetAccountInfoResponse(this.auth,s,e):null}return Vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new Sl(Mi(zx),e,r);const o=(await Promise.all(s.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||Mi(zx);const f=od(r,e.config.apiKey,e.name);let g=null;for(const x of s)try{const _=await x._get(f);if(_){let T;if(typeof _=="string"){const A=await bd(e,{idToken:_}).catch(()=>{});if(!A)break;T=await Vs._fromGetAccountInfoResponse(e,A,_)}else T=Vs._fromJSON(e,_);x!==u&&(g=T),u=x;break}}catch{}const y=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Sl(u,e,r):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(s.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new Sl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ob(e))return"Blackberry";if(Vb(e))return"Webos";if(Ib(e))return"Safari";if((e.includes("chrome/")||kb(e))&&!e.includes("edge/"))return"Chrome";if(Mb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function Rb(i=Cn()){return/firefox\//i.test(i)}function Ib(i=Cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kb(i=Cn()){return/crios\//i.test(i)}function Db(i=Cn()){return/iemobile/i.test(i)}function Mb(i=Cn()){return/android/i.test(i)}function Ob(i=Cn()){return/blackberry/i.test(i)}function Vb(i=Cn()){return/webos/i.test(i)}function cp(i=Cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function AT(i=Cn()){return cp(i)&&!!window.navigator?.standalone}function jT(){return q2()&&document.documentMode===10}function Lb(i=Cn()){return cp(i)||Mb(i)||Vb(i)||Ob(i)||/windows phone/i.test(i)||Db(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(i,e=[]){let s;switch(i){case"Browser":s=Bx(Cn());break;case"Worker":s=`${Bx(Cn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(i,e={}){return Hi(i,"GET","/v2/passwordPolicy",qi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6;class kT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??IT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qx(this),this.idTokenSubscription=new qx(this),this.beforeStateQueue=new CT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Mi(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await bd(this,{idToken:e}),r=await Vs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&g?.user&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await _d(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vs(this.app))return Promise.reject(Oi(this));const s=e?Xt(e):null;return s&&Fe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vs(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vs(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RT(this),s=new kT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await ST(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Mi(e)||this._popupRedirectResolver;Fe(s,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Mi(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof s=="function"){const y=e.addObserver(s,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(s);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(vs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&oT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Br(i){return Xt(i)}class qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=X2(s=>this.observer=s)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MT(i){Pd=i}function Ub(i){return Pd.loadJS(i)}function OT(){return Pd.recaptchaEnterpriseScript}function VT(){return Pd.gapiScript}function LT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class PT{constructor(){this.enterprise=new UT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class UT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const zT="recaptcha-enterprise",zb="NO_RECAPTCHA";class BT{constructor(e){this.type=zT,this.auth=Br(e)}async verify(e="verify",s=!1){async function r(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{xT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const x=new yT(y);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(y=>{g(y)})})}function o(u,f,g){const y=window.grecaptcha;Lx(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(zb)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PT().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(g=>{if(!s&&Lx(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=OT();y.length!==0&&(y+=g),Ub(y).then(()=>{o(g,u,f)}).catch(x=>{f(x)})}}).catch(g=>{f(g)})})}}async function Hx(i,e,s,r=!1,o=!1){const u=new BT(i);let f;if(o)f=zb;else try{f=await u.verify(s)}catch{f=await u.verify(s,!0)}const g={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,x=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function wd(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Hx(i,e,s,s==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Hx(i,e,s,s==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(i,e){const s=rp(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),u=s.getOptions();if(Ta(u,e??{}))return o;Ps(o,"already-initialized")}return s.initialize({options:e})}function HT(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(Mi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function FT(i,e,s){const r=Br(i);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Bb(e),{host:f,port:g}=GT(e),y=g===null?"":`:${g}`,x={url:`${u}//${f}${y}/`},_=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(Ta(x,r.config.emulator)&&Ta(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Ll(f)?(mb(`${u}//${f}${y}`),pb("Auth",!0)):YT()}function Bb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function GT(i){const e=Bb(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Fx(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Fx(f)}}}function Fx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function YT(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Di("not implemented")}_getIdTokenResponse(e){return Di("not implemented")}_linkToIdToken(e,s){return Di("not implemented")}_getReauthenticationResolver(e){return Di("not implemented")}}async function KT(i,e){return Hi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(i,e){return xc(i,"POST","/v1/accounts:signInWithPassword",qi(i,e))}async function QT(i,e){return Hi(i,"POST","/v1/accounts:sendOobCode",qi(i,e))}async function XT(i,e){return QT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(i,e){return xc(i,"POST","/v1/accounts:signInWithEmailLink",qi(i,e))}async function ZT(i,e){return xc(i,"POST","/v1/accounts:signInWithEmailLink",qi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends up{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new lc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new lc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,s,"signInWithPassword",$T);case"emailLink":return WT(e,{email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,r,"signUpPassword",KT);case"emailLink":return ZT(e,{idToken:s,email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(i,e){return xc(i,"POST","/v1/accounts:signInWithIdp",qi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="http://localhost";class Sa extends up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Ps("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=s;if(!r||!o)return null;const f=new Sa(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return Al(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,Al(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Al(e,s)}buildRequest(){const e={requestUri:JT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=gc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tN(i){const e=Ko($o(i)).link,s=e?Ko($o(e)).deep_link_id:null,r=Ko($o(i)).deep_link_id;return(r?Ko($o(r)).link:null)||r||s||e||i}class dp{constructor(e){const s=Ko($o(e)),r=s.apiKey??null,o=s.oobCode??null,u=eN(s.mode??null);Fe(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=tN(e);try{return new dp(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,s){return lc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=dp.parseLink(s);return Fe(r,"argument-error"),lc._fromEmailAndCode(e,r.code,r.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends qb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends vc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Sa._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Nr.credential(s,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends vc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends vc{constructor(){super("twitter.com")}static credential(e,s){return Sa._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Ar.credential(s,r)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(i,e){return xc(i,"POST","/v1/accounts:signUp",qi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const u=await Vs._fromIdTokenResponse(e,r,o),f=Gx(r);return new Aa({user:u,providerId:f,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=Gx(r);return new Aa({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function Gx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends Bi{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new Ed(e,s,r,o)}}function Hb(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(i,u,e,r):u})}async function sN(i,e,s=!1){const r=await ac(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return Aa._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(i,e,s=!1){const{auth:r}=i;if(vs(r.app))return Promise.reject(Oi(r));const o="reauthenticate";try{const u=await ac(i,Hb(r,o,e,i),s);Fe(u.idToken,r,"internal-error");const f=op(u.idToken);Fe(f,r,"internal-error");const{sub:g}=f;return Fe(i.uid===g,r,"user-mismatch"),Aa._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ps(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(i,e,s=!1){if(vs(i.app))return Promise.reject(Oi(i));const r="signIn",o=await Hb(i,r,e),u=await Aa._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(u.user),u}async function rN(i,e){return Fb(Br(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(i){const e=Br(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aN(i,e,s){const r=Br(i);await wd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",XT)}async function lN(i,e,s){if(vs(i.app))return Promise.reject(Oi(i));const r=Br(i),f=await wd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nN).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Gb(i),y}),g=await Aa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function oN(i,e,s){return vs(i.app)?Promise.reject(Oi(i)):rN(Xt(i),Ul.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gb(i),r})}function cN(i,e,s,r){return Xt(i).onIdTokenChanged(e,s,r)}function uN(i,e,s){return Xt(i).beforeAuthStateChanged(e,s)}function dN(i,e,s,r){return Xt(i).onAuthStateChanged(e,s,r)}function hN(i){return Xt(i).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1e3,mN=10;class Kb extends Yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!s&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);jT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mN):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kb.type="LOCAL";const pN=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}$b.type="SESSION";const Qb=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new Ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:u}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async x=>x(s.origin,u)),y=await gN(g);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const x=hp("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(A.data.response);break;default:clearTimeout(_),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function xN(i){li().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function vN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bN(){return navigator?.serviceWorker?.controller||null}function _N(){return Xb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firebaseLocalStorageDb",wN=1,Nd="firebaseLocalStorage",Zb="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function zd(i,e){return i.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function EN(){const i=indexedDB.deleteDatabase(Wb);return new bc(i).toPromise()}function Mm(){const i=indexedDB.open(Wb,wN);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Nd,{keyPath:Zb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await EN(),e(await Mm()))})})}async function Yx(i,e,s){const r=zd(i,!0).put({[Zb]:e,value:s});return new bc(r).toPromise()}async function TN(i,e){const s=zd(i,!1).get(e),r=await new bc(s).toPromise();return r===void 0?null:r.value}function Kx(i,e){const s=zd(i,!0).delete(e);return new bc(s).toPromise()}const NN=800,SN=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>SN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ud._getInstance(_N()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vN(),!this.activeServiceWorker)return;this.sender=new yN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await Yx(e,Td,"1"),await Kx(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yx(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>TN(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Kx(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=zd(o,!1).getAll();return new bc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const AN=Jb;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(i,e){return e?Mi(e):(Fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Al(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function CN(i){return Fb(i.auth,new fp(i),i.bypassAuthState)}function RN(i){const{auth:e,user:s}=i;return Fe(s,e,"internal-error"),iN(s,new fp(i),i.bypassAuthState)}async function IN(i){const{auth:e,user:s}=i;return Fe(s,e,"internal-error"),sN(s,new fp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,s,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:s,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CN;case"linkViaPopup":case"linkViaRedirect":return IN;case"reauthViaPopup":case"reauthViaRedirect":return RN;default:Ps(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new yc(2e3,1e4);class Tl extends e_{constructor(e,s,r,o,u){super(e,s,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kN.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="pendingRedirect",cd=new Map;class MN extends e_{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=cd.get(this.auth._key());if(!e){try{const r=await ON(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}cd.set(this.auth._key(),e)}return this.bypassAuthState||cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ON(i,e){const s=PN(e),r=LN(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function VN(i,e){cd.set(i._key(),e)}function LN(i){return Mi(i._redirectPersistence)}function PN(i){return od(DN,i.config.apiKey,i.name)}async function UN(i,e,s=!1){if(vs(i.app))return Promise.reject(Oi(i));const r=Br(i),o=jN(r,e),f=await new MN(r,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=600*1e3;class BN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qN(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!t_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError(ai(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zN&&this.cachedEventUids.clear(),this.cachedEventUids.has($x(e))}saveEventToCache(e){this.cachedEventUids.add($x(e)),this.lastProcessedEventTime=Date.now()}}function $x(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function t_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(i,e={}){return Hi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GN=/^https?/;async function YN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await HN(i);for(const s of e)try{if(KN(s))return}catch{}Ps(i,"unauthorized-domain")}function KN(i){const e=km(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===r}if(!GN.test(s))return!1;if(FN.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new yc(3e4,6e4);function Qx(){const i=li().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function QN(i){return new Promise((e,s)=>{function r(){Qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qx(),s(ai(i,"network-request-failed"))},timeout:$N.get()})}if(li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(li().gapi?.load)r();else{const o=LT("iframefcb");return li()[o]=()=>{gapi.load?r():s(ai(i,"network-request-failed"))},Ub(`${VT()}?onload=${o}`).catch(u=>s(u))}}).catch(e=>{throw ud=null,e})}let ud=null;function XN(i){return ud=ud||QN(i),ud}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new yc(5e3,15e3),ZN="__/auth/iframe",JN="emulator/auth/iframe",eS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nS(i){const e=i.config;Fe(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?lp(e,JN):`https://${i.config.authDomain}/${ZN}`,r={apiKey:e.apiKey,appName:i.name,v:Pl},o=tS.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${s}?${gc(r).slice(1)}`}async function sS(i){const e=await XN(i),s=li().gapi;return Fe(s,i,"internal-error"),e.open({where:document.body,url:nS(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eS,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ai(i,"network-request-failed"),g=li().setTimeout(()=>{u(f)},WN.get());function y(){li().clearTimeout(g),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rS=500,aS=600,lS="_blank",oS="http://localhost";class Xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cS(i,e,s,r=rS,o=aS){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y={...iS,width:r.toString(),height:o.toString(),top:u,left:f},x=Cn().toLowerCase();s&&(g=kb(x)?lS:s),Rb(x)&&(e=e||oS,y.scrollbars="yes");const _=Object.entries(y).reduce((A,[q,W])=>`${A}${q}=${W},`,"");if(AT(x)&&g!=="_self")return uS(e||"",g),new Xx(null);const T=window.open(e||"",g,_);Fe(T,i,"popup-blocked");try{T.focus()}catch{}return new Xx(T)}function uS(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="__/auth/handler",hS="emulator/auth/handler",fS=encodeURIComponent("fac");async function Wx(i,e,s,r,o,u){Fe(i.config.authDomain,i,"auth-domain-config-required"),Fe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Pl,eventId:o};if(e instanceof qb){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",Q2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))f[_]=T}if(e instanceof vc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const g=f;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const y=await i._getAppCheckToken(),x=y?`#${fS}=${encodeURIComponent(y)}`:"";return`${mS(i)}?${gc(g).slice(1)}${x}`}function mS({config:i}){return i.emulator?lp(i,hS):`https://${i.authDomain}/${dS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class pS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qb,this._completeRedirectFn=UN,this._overrideRedirectResult=VN}async _openPopup(e,s,r,o){Li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Wx(e,s,r,km(),o);return cS(e,u,hp())}async _openRedirect(e,s,r,o){await this._originValidation(e);const u=await Wx(e,s,r,km(),o);return xN(u),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:u}=this.eventManagers[s];return o?Promise.resolve(o):(Li(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await sS(e),r=new BN(e);return s.register("authEvent",o=>(Fe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(pm,{type:pm},o=>{const u=o?.[0]?.[pm];u!==void 0&&s(!!u),Ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=YN(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Lb()||Ib()||cp()}}const gS=pS;var Zx="@firebase/auth",Jx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vS(i){Cl(new Na("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;Fe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pb(i)},x=new DT(r,o,u,y);return HT(x,s),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Cl(new Na("auth-internal",e=>{const s=Br(e.getProvider("auth").getImmediate());return(r=>new yS(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(Zx,Jx,xS(i)),Ir(Zx,Jx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=300,_S=fb("authIdTokenMaxAge")||bS;let ev=null;const wS=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>_S)return;const o=s?.token;ev!==o&&(ev=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ES(i=vb()){const e=rp(i,"auth");if(e.isInitialized())return e.getImmediate();const s=qT(i,{popupRedirectResolver:gS,persistence:[AN,pN,Qb]}),r=fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=wS(u.toString());uN(s,f,()=>f(s.currentUser)),cN(s,g=>f(g))}}const o=db("auth");return o&&FT(s,`http://${o}`),s}function TS(){return document.getElementsByTagName("head")?.[0]??document}MT({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const u=ai("internal-error");u.customData=o,s(u)},r.type="text/javascript",r.charset="UTF-8",TS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vS("Browser");var NS="firebase",SS="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(NS,SS,"app");var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,n_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function j(){}j.prototype=S.prototype,C.F=S.prototype,C.prototype=new j,C.prototype.constructor=C,C.D=function(k,R,O){for(var I=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)I[pe-2]=arguments[pe];return S.prototype[R].apply(k,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,j){j||(j=0);const k=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)k[R]=S.charCodeAt(j++)|S.charCodeAt(j++)<<8|S.charCodeAt(j++)<<16|S.charCodeAt(j++)<<24;else for(R=0;R<16;++R)k[R]=S[j++]|S[j++]<<8|S[j++]<<16|S[j++]<<24;S=C.g[0],j=C.g[1],R=C.g[2];let O=C.g[3],I;I=S+(O^j&(R^O))+k[0]+3614090360&4294967295,S=j+(I<<7&4294967295|I>>>25),I=O+(R^S&(j^R))+k[1]+3905402710&4294967295,O=S+(I<<12&4294967295|I>>>20),I=R+(j^O&(S^j))+k[2]+606105819&4294967295,R=O+(I<<17&4294967295|I>>>15),I=j+(S^R&(O^S))+k[3]+3250441966&4294967295,j=R+(I<<22&4294967295|I>>>10),I=S+(O^j&(R^O))+k[4]+4118548399&4294967295,S=j+(I<<7&4294967295|I>>>25),I=O+(R^S&(j^R))+k[5]+1200080426&4294967295,O=S+(I<<12&4294967295|I>>>20),I=R+(j^O&(S^j))+k[6]+2821735955&4294967295,R=O+(I<<17&4294967295|I>>>15),I=j+(S^R&(O^S))+k[7]+4249261313&4294967295,j=R+(I<<22&4294967295|I>>>10),I=S+(O^j&(R^O))+k[8]+1770035416&4294967295,S=j+(I<<7&4294967295|I>>>25),I=O+(R^S&(j^R))+k[9]+2336552879&4294967295,O=S+(I<<12&4294967295|I>>>20),I=R+(j^O&(S^j))+k[10]+4294925233&4294967295,R=O+(I<<17&4294967295|I>>>15),I=j+(S^R&(O^S))+k[11]+2304563134&4294967295,j=R+(I<<22&4294967295|I>>>10),I=S+(O^j&(R^O))+k[12]+1804603682&4294967295,S=j+(I<<7&4294967295|I>>>25),I=O+(R^S&(j^R))+k[13]+4254626195&4294967295,O=S+(I<<12&4294967295|I>>>20),I=R+(j^O&(S^j))+k[14]+2792965006&4294967295,R=O+(I<<17&4294967295|I>>>15),I=j+(S^R&(O^S))+k[15]+1236535329&4294967295,j=R+(I<<22&4294967295|I>>>10),I=S+(R^O&(j^R))+k[1]+4129170786&4294967295,S=j+(I<<5&4294967295|I>>>27),I=O+(j^R&(S^j))+k[6]+3225465664&4294967295,O=S+(I<<9&4294967295|I>>>23),I=R+(S^j&(O^S))+k[11]+643717713&4294967295,R=O+(I<<14&4294967295|I>>>18),I=j+(O^S&(R^O))+k[0]+3921069994&4294967295,j=R+(I<<20&4294967295|I>>>12),I=S+(R^O&(j^R))+k[5]+3593408605&4294967295,S=j+(I<<5&4294967295|I>>>27),I=O+(j^R&(S^j))+k[10]+38016083&4294967295,O=S+(I<<9&4294967295|I>>>23),I=R+(S^j&(O^S))+k[15]+3634488961&4294967295,R=O+(I<<14&4294967295|I>>>18),I=j+(O^S&(R^O))+k[4]+3889429448&4294967295,j=R+(I<<20&4294967295|I>>>12),I=S+(R^O&(j^R))+k[9]+568446438&4294967295,S=j+(I<<5&4294967295|I>>>27),I=O+(j^R&(S^j))+k[14]+3275163606&4294967295,O=S+(I<<9&4294967295|I>>>23),I=R+(S^j&(O^S))+k[3]+4107603335&4294967295,R=O+(I<<14&4294967295|I>>>18),I=j+(O^S&(R^O))+k[8]+1163531501&4294967295,j=R+(I<<20&4294967295|I>>>12),I=S+(R^O&(j^R))+k[13]+2850285829&4294967295,S=j+(I<<5&4294967295|I>>>27),I=O+(j^R&(S^j))+k[2]+4243563512&4294967295,O=S+(I<<9&4294967295|I>>>23),I=R+(S^j&(O^S))+k[7]+1735328473&4294967295,R=O+(I<<14&4294967295|I>>>18),I=j+(O^S&(R^O))+k[12]+2368359562&4294967295,j=R+(I<<20&4294967295|I>>>12),I=S+(j^R^O)+k[5]+4294588738&4294967295,S=j+(I<<4&4294967295|I>>>28),I=O+(S^j^R)+k[8]+2272392833&4294967295,O=S+(I<<11&4294967295|I>>>21),I=R+(O^S^j)+k[11]+1839030562&4294967295,R=O+(I<<16&4294967295|I>>>16),I=j+(R^O^S)+k[14]+4259657740&4294967295,j=R+(I<<23&4294967295|I>>>9),I=S+(j^R^O)+k[1]+2763975236&4294967295,S=j+(I<<4&4294967295|I>>>28),I=O+(S^j^R)+k[4]+1272893353&4294967295,O=S+(I<<11&4294967295|I>>>21),I=R+(O^S^j)+k[7]+4139469664&4294967295,R=O+(I<<16&4294967295|I>>>16),I=j+(R^O^S)+k[10]+3200236656&4294967295,j=R+(I<<23&4294967295|I>>>9),I=S+(j^R^O)+k[13]+681279174&4294967295,S=j+(I<<4&4294967295|I>>>28),I=O+(S^j^R)+k[0]+3936430074&4294967295,O=S+(I<<11&4294967295|I>>>21),I=R+(O^S^j)+k[3]+3572445317&4294967295,R=O+(I<<16&4294967295|I>>>16),I=j+(R^O^S)+k[6]+76029189&4294967295,j=R+(I<<23&4294967295|I>>>9),I=S+(j^R^O)+k[9]+3654602809&4294967295,S=j+(I<<4&4294967295|I>>>28),I=O+(S^j^R)+k[12]+3873151461&4294967295,O=S+(I<<11&4294967295|I>>>21),I=R+(O^S^j)+k[15]+530742520&4294967295,R=O+(I<<16&4294967295|I>>>16),I=j+(R^O^S)+k[2]+3299628645&4294967295,j=R+(I<<23&4294967295|I>>>9),I=S+(R^(j|~O))+k[0]+4096336452&4294967295,S=j+(I<<6&4294967295|I>>>26),I=O+(j^(S|~R))+k[7]+1126891415&4294967295,O=S+(I<<10&4294967295|I>>>22),I=R+(S^(O|~j))+k[14]+2878612391&4294967295,R=O+(I<<15&4294967295|I>>>17),I=j+(O^(R|~S))+k[5]+4237533241&4294967295,j=R+(I<<21&4294967295|I>>>11),I=S+(R^(j|~O))+k[12]+1700485571&4294967295,S=j+(I<<6&4294967295|I>>>26),I=O+(j^(S|~R))+k[3]+2399980690&4294967295,O=S+(I<<10&4294967295|I>>>22),I=R+(S^(O|~j))+k[10]+4293915773&4294967295,R=O+(I<<15&4294967295|I>>>17),I=j+(O^(R|~S))+k[1]+2240044497&4294967295,j=R+(I<<21&4294967295|I>>>11),I=S+(R^(j|~O))+k[8]+1873313359&4294967295,S=j+(I<<6&4294967295|I>>>26),I=O+(j^(S|~R))+k[15]+4264355552&4294967295,O=S+(I<<10&4294967295|I>>>22),I=R+(S^(O|~j))+k[6]+2734768916&4294967295,R=O+(I<<15&4294967295|I>>>17),I=j+(O^(R|~S))+k[13]+1309151649&4294967295,j=R+(I<<21&4294967295|I>>>11),I=S+(R^(j|~O))+k[4]+4149444226&4294967295,S=j+(I<<6&4294967295|I>>>26),I=O+(j^(S|~R))+k[11]+3174756917&4294967295,O=S+(I<<10&4294967295|I>>>22),I=R+(S^(O|~j))+k[2]+718787259&4294967295,R=O+(I<<15&4294967295|I>>>17),I=j+(O^(R|~S))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+O&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const j=S-this.blockSize,k=this.C;let R=this.h,O=0;for(;O<S;){if(R==0)for(;O<=j;)o(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<S;)if(k[R++]=C.charCodeAt(O++),R==this.blockSize){o(this,k),R=0;break}}else for(;O<S;)if(k[R++]=C[O++],R==this.blockSize){o(this,k),R=0;break}}this.h=R,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var j=C.length-8;j<C.length;++j)C[j]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)C[S++]=this.g[j]>>>k&255;return C};function u(C,S){var j=g;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=S(C)}function f(C,S){this.h=S;const j=[];let k=!0;for(let R=C.length-1;R>=0;R--){const O=C[R]|0;k&&O==S||(j[R]=O,k=!1)}this.g=j}var g={};function y(C){return-128<=C&&C<128?u(C,function(S){return new f([S|0],S<0?-1:0)}):new f([C|0],C<0?-1:0)}function x(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return U(x(-C));const S=[];let j=1;for(let k=0;C>=j;k++)S[k]=C/j|0,j*=4294967296;return new f(S,0)}function _(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return U(_(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=x(Math.pow(S,8));let k=T;for(let O=0;O<C.length;O+=8){var R=Math.min(8,C.length-O);const I=parseInt(C.substring(O,O+R),S);R<8?(R=x(Math.pow(S,R)),k=k.j(R).add(x(I))):(k=k.j(j),k=k.add(x(I)))}return k}var T=y(0),A=y(1),q=y(16777216);i=f.prototype,i.m=function(){if(J(this))return-U(this).m();let C=0,S=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);C+=(k>=0?k:4294967296+k)*S,S*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(W(this))return"0";if(J(this))return"-"+U(this).toString(C);const S=x(Math.pow(C,6));var j=this;let k="";for(;;){const R=he(j,S).g;j=ie(j,R.j(S));let O=((j.g.length>0?j.g[0]:j.h)>>>0).toString(C);if(j=R,W(j))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function W(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function J(C){return C.h==-1}i.l=function(C){return C=ie(this,C),J(C)?-1:W(C)?0:1};function U(C){const S=C.g.length,j=[];for(let k=0;k<S;k++)j[k]=~C.g[k];return new f(j,~C.h).add(A)}i.abs=function(){return J(this)?U(this):this},i.add=function(C){const S=Math.max(this.g.length,C.g.length),j=[];let k=0;for(let R=0;R<=S;R++){let O=k+(this.i(R)&65535)+(C.i(R)&65535),I=(O>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);k=I>>>16,O&=65535,I&=65535,j[R]=I<<16|O}return new f(j,j[j.length-1]&-2147483648?-1:0)};function ie(C,S){return C.add(U(S))}i.j=function(C){if(W(this)||W(C))return T;if(J(this))return J(C)?U(this).j(U(C)):U(U(this).j(C));if(J(C))return U(this.j(U(C)));if(this.l(q)<0&&C.l(q)<0)return x(this.m()*C.m());const S=this.g.length+C.g.length,j=[];for(var k=0;k<2*S;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let R=0;R<C.g.length;R++){const O=this.i(k)>>>16,I=this.i(k)&65535,pe=C.i(R)>>>16,ze=C.i(R)&65535;j[2*k+2*R]+=I*ze,ne(j,2*k+2*R),j[2*k+2*R+1]+=O*ze,ne(j,2*k+2*R+1),j[2*k+2*R+1]+=I*pe,ne(j,2*k+2*R+1),j[2*k+2*R+2]+=O*pe,ne(j,2*k+2*R+2)}for(C=0;C<S;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=S;C<2*S;C++)j[C]=0;return new f(j,0)};function ne(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function ge(C,S){this.g=C,this.h=S}function he(C,S){if(W(S))throw Error("division by zero");if(W(C))return new ge(T,T);if(J(C))return S=he(U(C),S),new ge(U(S.g),U(S.h));if(J(S))return S=he(C,U(S)),new ge(U(S.g),S.h);if(C.g.length>30){if(J(C)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=S;k.l(C)<=0;)j=ve(j),k=ve(k);var R=fe(j,1),O=fe(k,1);for(k=fe(k,2),j=fe(j,2);!W(k);){var I=O.add(k);I.l(C)<=0&&(R=R.add(j),O=I),k=fe(k,1),j=fe(j,1)}return S=ie(C,R.j(S)),new ge(R,S)}for(R=T;C.l(S)>=0;){for(j=Math.max(1,Math.floor(C.m()/S.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=x(j),I=O.j(S);J(I)||I.l(C)>0;)j-=k,O=x(j),I=O.j(S);W(O)&&(O=A),R=R.add(O),C=ie(C,I)}return new ge(R,C)}i.B=function(C){return he(this,C).h},i.and=function(C){const S=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<S;k++)j[k]=this.i(k)&C.i(k);return new f(j,this.h&C.h)},i.or=function(C){const S=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<S;k++)j[k]=this.i(k)|C.i(k);return new f(j,this.h|C.h)},i.xor=function(C){const S=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<S;k++)j[k]=this.i(k)^C.i(k);return new f(j,this.h^C.h)};function ve(C){const S=C.g.length+1,j=[];for(let k=0;k<S;k++)j[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(j,C.h)}function fe(C,S){const j=S>>5;S%=32;const k=C.g.length-j,R=[];for(let O=0;O<k;O++)R[O]=S>0?C.i(O+j)>>>S|C.i(O+j+1)<<32-S:C.i(O+j);return new f(R,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,n_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,kr=f}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s_,Qo,i_,dd,Om,r_,a_,l_;(function(){var i,e=Object.defineProperty;function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ed=="object"&&ed];for(var p=0;p<d.length;++p){var b=d[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(d,p){if(p)e:{var b=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var B=d[N];if(!(B in b))break e;b=b[B]}d=d[d.length-1],N=b[d],p=p(N),p!=N&&p!=null&&e(b,d,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(p){var b=[],N;for(N in p)Object.prototype.hasOwnProperty.call(p,N)&&b.push([N,p[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function y(d,p,b){return d.call.apply(d.bind,arguments)}function x(d,p,b){return x=y,x.apply(null,arguments)}function _(d,p){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function T(d,p){function b(){}b.prototype=p.prototype,d.Z=p.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(N,B,Z){for(var _e=Array(arguments.length-2),We=2;We<arguments.length;We++)_e[We-2]=arguments[We];return p.prototype[B].apply(N,_e)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function q(d){const p=d.length;if(p>0){const b=Array(p);for(let N=0;N<p;N++)b[N]=d[N];return b}return[]}function W(d,p){for(let N=1;N<arguments.length;N++){const B=arguments[N];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=d.length||0;const Z=B.length||0;d.length=b+Z;for(let _e=0;_e<Z;_e++)d[b+_e]=B[_e]}else d.push(B)}}class J{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function U(d){f.setTimeout(()=>{throw d},0)}function ie(){var d=C;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,b){const N=ge.get();N.set(p,b),this.h?this.h.next=N:this.g=N,this.h=N}}var ge=new J(()=>new he,d=>d.reset());class he{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,fe=!1,C=new ne,S=()=>{const d=Promise.resolve(void 0);ve=()=>{d.then(j)}};function j(){for(var d;d=ie();){try{d.h.call(d.g)}catch(b){U(b)}var p=ge;p.j(d),p.h<100&&(p.h++,d.next=p.g,p.g=d)}fe=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,p),f.removeEventListener("test",b,p)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function pe(d,p){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,p)}T(pe,R),pe.prototype.init=function(d,p){const b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget,p||(b=="mouseover"?p=d.fromElement:b=="mouseout"&&(p=d.toElement)),this.relatedTarget=p,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),K=0;function P(d,p,b,N,B){this.listener=d,this.proxy=null,this.src=p,this.type=b,this.capture=!!N,this.ha=B,this.key=++K,this.da=this.fa=!1}function re(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function be(d,p,b){for(const N in d)p.call(b,d[N],N,d)}function Ce(d,p){for(const b in d)p.call(void 0,d[b],b,d)}function E(d){const p={};for(const b in d)p[b]=d[b];return p}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(d,p){let b,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(b in N)d[b]=N[b];for(let Z=0;Z<L.length;Z++)b=L[Z],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function M(d){this.src=d,this.g={},this.h=0}M.prototype.add=function(d,p,b,N,B){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const _e=me(d,p,N,B);return _e>-1?(p=d[_e],b||(p.fa=!1)):(p=new P(p,this.src,Z,!!N,B),p.fa=b,d.push(p)),p};function te(d,p){const b=p.type;if(b in d.g){var N=d.g[b],B=Array.prototype.indexOf.call(N,p,void 0),Z;(Z=B>=0)&&Array.prototype.splice.call(N,B,1),Z&&(re(p),d.g[b].length==0&&(delete d.g[b],d.h--))}}function me(d,p,b,N){for(let B=0;B<d.length;++B){const Z=d[B];if(!Z.da&&Z.listener==p&&Z.capture==!!b&&Z.ha==N)return B}return-1}var we="closure_lm_"+(Math.random()*1e6|0),He={};function Ue(d,p,b,N,B){if(Array.isArray(p)){for(let Z=0;Z<p.length;Z++)Ue(d,p[Z],b,N,B);return null}return b=Se(b),d&&d[ze]?d.J(p,b,g(N)?!!N.capture:!1,B):se(d,p,b,!1,N,B)}function se(d,p,b,N,B,Z){if(!p)throw Error("Invalid event type");const _e=g(B)?!!B.capture:!!B;let We=Ie(d);if(We||(d[we]=We=new M(d)),b=We.add(p,b,N,_e,Z),b.proxy)return b;if(N=Ee(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)O||(B=_e),B===void 0&&(B=!1),d.addEventListener(p.toString(),N,B);else if(d.attachEvent)d.attachEvent(xe(p.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ee(){function d(b){return p.call(d.src,d.listener,b)}const p=le;return d}function Te(d,p,b,N,B){if(Array.isArray(p))for(var Z=0;Z<p.length;Z++)Te(d,p[Z],b,N,B);else N=g(N)?!!N.capture:!!N,b=Se(b),d&&d[ze]?(d=d.i,Z=String(p).toString(),Z in d.g&&(p=d.g[Z],b=me(p,b,N,B),b>-1&&(re(p[b]),Array.prototype.splice.call(p,b,1),p.length==0&&(delete d.g[Z],d.h--)))):d&&(d=Ie(d))&&(p=d.g[p.toString()],d=-1,p&&(d=me(p,b,N,B)),(b=d>-1?p[d]:null)&&$(b))}function $(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[ze])te(p.i,d);else{var b=d.type,N=d.proxy;p.removeEventListener?p.removeEventListener(b,N,d.capture):p.detachEvent?p.detachEvent(xe(b),N):p.addListener&&p.removeListener&&p.removeListener(N),(b=Ie(p))?(te(b,d),b.h==0&&(b.src=null,p[we]=null)):re(d)}}}function xe(d){return d in He?He[d]:He[d]="on"+d}function le(d,p){if(d.da)d=!0;else{p=new pe(p,this);const b=d.listener,N=d.ha||d.src;d.fa&&$(d),d=b.call(N,p)}return d}function Ie(d){return d=d[we],d instanceof M?d:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(d){return typeof d=="function"?d:(d[Qe]||(d[Qe]=function(p){return d.handleEvent(p)}),d[Qe])}function tt(){k.call(this),this.i=new M(this),this.M=this,this.G=null}T(tt,k),tt.prototype[ze]=!0,tt.prototype.removeEventListener=function(d,p,b,N){Te(this,d,p,b,N)};function rt(d,p){var b,N=d.G;if(N)for(b=[];N;N=N.G)b.push(N);if(d=d.M,N=p.type||p,typeof p=="string")p=new R(p,d);else if(p instanceof R)p.target=p.target||d;else{var B=p;p=new R(N,d),H(p,B)}B=!0;let Z,_e;if(b)for(_e=b.length-1;_e>=0;_e--)Z=p.g=b[_e],B=Pt(Z,N,!0,p)&&B;if(Z=p.g=d,B=Pt(Z,N,!0,p)&&B,B=Pt(Z,N,!1,p)&&B,b)for(_e=0;_e<b.length;_e++)Z=p.g=b[_e],B=Pt(Z,N,!1,p)&&B}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var d=this.i;for(const p in d.g){const b=d.g[p];for(let N=0;N<b.length;N++)re(b[N]);delete d.g[p],d.h--}}this.G=null},tt.prototype.J=function(d,p,b,N){return this.i.add(String(d),p,!1,b,N)},tt.prototype.K=function(d,p,b,N){return this.i.add(String(d),p,!0,b,N)};function Pt(d,p,b,N){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();let B=!0;for(let Z=0;Z<p.length;++Z){const _e=p[Z];if(_e&&!_e.da&&_e.capture==b){const We=_e.listener,Gt=_e.ha||_e.src;_e.fa&&te(d.i,_e),B=We.call(Gt,N)!==!1&&B}}return B&&!N.defaultPrevented}function Fi(d,p){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(d,p||0)}function Rn(d){d.g=Fi(()=>{d.g=null,d.i&&(d.i=!1,Rn(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class qt extends k{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Rn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(d){k.call(this),this.h=d,this.g={}}T(_s,k);var ws=[];function Es(d){be(d.g,function(p,b){this.g.hasOwnProperty(b)&&$(p)},d),d.g={}}_s.prototype.N=function(){_s.Z.N.call(this),Es(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Q=f.JSON.stringify,ye=f.JSON.parse,Me=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Je(){}function qe(){}var je={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pe(){R.call(this,"d")}T(Pe,R);function Xe(){R.call(this,"c")}T(Xe,R);var nt={},Ts=null;function Gn(){return Ts=Ts||new tt}nt.Ia="serverreachability";function at(d){R.call(this,nt.Ia,d)}T(at,R);function At(d){const p=Gn();rt(p,new at(p))}nt.STAT_EVENT="statevent";function Dt(d,p){R.call(this,nt.STAT_EVENT,d),this.stat=p}T(Dt,R);function jt(d){const p=Gn();rt(p,new Dt(p,d))}nt.Ja="timingevent";function dn(d,p){R.call(this,nt.Ja,d),this.size=p}T(dn,R);function Wt(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},p)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function ah(d,p,b,N,B,Z){d.info(function(){if(d.g)if(Z){var _e="",We=Z.split("&");for(let gt=0;gt<We.length;gt++){var Gt=We[gt].split("=");if(Gt.length>1){const Ut=Gt[0];Gt=Gt[1];const us=Ut.split("_");_e=us.length>=2&&us[1]=="type"?_e+(Ut+"="+Gt+"&"):_e+(Ut+"=redacted&")}}}else _e=null;else _e=Z;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+p+`
`+b+`
`+_e})}function Rc(d,p,b,N,B,Z,_e){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+p+`
`+b+`
`+Z+" "+_e})}function zs(d,p,b,N){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+lh(d,b)+(N?" "+N:"")})}function Gr(d,p){d.info(function(){return"TIMEOUT: "+p})}Yn.prototype.info=function(){};function lh(d,p){if(!d.g)return p;if(!p)return null;try{const Z=JSON.parse(p);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var b=Z[d];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let _e=1;_e<N.length;_e++)N[_e]=""}}}}return Q(Z)}catch{return p}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yl;function Kr(){}T(Kr,Je),Kr.prototype.g=function(){return new XMLHttpRequest},Yl=new Kr;function mi(d){return encodeURIComponent(String(d))}function Ic(d){var p=1;d=d.split(":");const b=[];for(;p>0&&d.length;)b.push(d.shift()),p--;return d.length&&b.push(d.join(":")),b}function Ns(d,p,b,N){this.j=d,this.i=p,this.l=b,this.S=N||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}var Zt={},hn={};function Bs(d,p,b){d.M=1,d.A=$r(en(p)),d.u=b,d.R=!0,Da(d,null)}function Da(d,p){d.F=Date.now(),qs(d),d.B=en(d.A);var b=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),La(b.i,"t",N),d.C=0,b=d.j.L,d.h=new Ss,d.g=Yc(d.j,b?p:null,!d.u),d.P>0&&(d.O=new qt(x(d.Y,d,d.g),d.P)),p=d.V,b=d.g,N=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(ws[0]=B.toString()),B=ws);for(let Z=0;Z<B.length;Z++){const _e=Ue(b,B[Z],N||p.handleEvent,!1,p.h||p);if(!_e)break;p.g[_e.key]=_e}p=d.J?E(d.J):{},d.u?(d.v||(d.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,p)):(d.v="GET",d.g.ea(d.B,d.v,null,p)),At(),ah(d.i,d.v,d.B,d.l,d.S,d.u)}Ns.prototype.ba=function(d){d=d.target;const p=this.O;p&&Cs(d)==3?p.j():this.Y(d)},Ns.prototype.Y=function(d){try{if(d==this.g)e:{const We=Cs(this.g),Gt=this.g.ya(),gt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||We!=4||Gt==7||(Gt==8||gt<=0?At(3):At(2)),Hs(this);var p=this.g.ca();this.X=p;var b=oh(this);if(this.o=p==200,Rc(this.i,this.v,this.B,this.l,this.S,We,p),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var Z=N;break t}}Z=null}if(d=Z)zs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,d);else{this.o=!1,this.m=3,jt(12),Kn(this),ls(this);break e}}if(this.R){d=!0;let Ut;for(;!this.K&&this.C<b.length;)if(Ut=Dc(this,b),Ut==hn){We==4&&(this.m=4,jt(14),d=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Zt){this.m=4,jt(15),zs(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else zs(this.i,this.l,Ut,null),Fs(this,Ut);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||b.length!=0||this.h.h||(this.m=1,jt(16),d=!1),this.o=this.o&&d,!d)zs(this.i,this.l,b,"[Invalid Chunked Response]"),Kn(this),ls(this);else if(b.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),lo(_e),_e.P=!0,jt(11))}}else zs(this.i,this.l,b,null),Fs(this,b);We==4&&Kn(this),this.o&&!this.K&&(We==4?qc(this.j,this):(this.o=!1,qs(this)))}else gi(this.g),p==400&&b.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),Kn(this),ls(this)}}}catch{}finally{}};function oh(d){if(!kc(d))return d.g.la();const p=gn(d.g);if(p==="")return"";let b="";const N=p.length,B=Cs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Kn(d),ls(d),"";d.h.i=new f.TextDecoder}for(let Z=0;Z<N;Z++)d.h.h=!0,b+=d.h.i.decode(p[Z],{stream:!(B&&Z==N-1)});return p.length=0,d.h.g+=b,d.C=0,d.h.g}function kc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Dc(d,p){var b=d.C,N=p.indexOf(`
`,b);return N==-1?hn:(b=Number(p.substring(b,N)),isNaN(b)?Zt:(N+=1,N+b>p.length?hn:(p=p.slice(N,N+b),d.C=N+b,p)))}Ns.prototype.cancel=function(){this.K=!0,Kn(this)};function qs(d){d.T=Date.now()+d.H,Ma(d,d.H)}function Ma(d,p){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Wt(x(d.aa,d),p)}function Hs(d){d.D&&(f.clearTimeout(d.D),d.D=null)}Ns.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Gr(this.i,this.B),this.M!=2&&(At(),jt(17)),Kn(this),this.m=2,ls(this)):Ma(this,this.T-d)};function ls(d){d.j.I==0||d.K||qc(d.j,d)}function Kn(d){Hs(d);var p=d.O;p&&typeof p.dispose=="function"&&p.dispose(),d.O=null,Es(d.V),d.g&&(p=d.g,d.g=null,p.abort(),p.dispose())}function Fs(d,p){try{var b=d.j;if(b.I!=0&&(b.g==d||Ys(b.h,d))){if(!d.L&&Ys(b.h,d)&&b.I==3){try{var N=b.Ba.g.parse(p)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)qa(b),Zi(b);else break e;ta(b),jt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Wt(x(b.Va,b),6e3));Gs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Zs(b,11)}else if((d.L||b.g==d)&&qa(b),!I(p))for(B=b.Ba.g.parse(p),p=0;p<B.length;p++){let gt=B[p];const Ut=gt[0];if(!(Ut<=b.K))if(b.K=Ut,gt=gt[1],b.I==2)if(gt[0]=="c"){b.M=gt[1],b.ba=gt[2];const us=gt[3];us!=null&&(b.ka=us,b.j.info("VER="+b.ka));const Js=gt[4];Js!=null&&(b.za=Js,b.j.info("SVER="+b.za));const Rs=gt[5];Rs!=null&&typeof Rs=="number"&&Rs>0&&(N=1.5*Rs,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const Is=d.g;if(Is){const na=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Z=N.h;Z.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ql(Z,Z.h),Z.h=null))}if(N.G){const Ha=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(N.wa=Ha,vt(N.J,N.G,Ha))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var _e=d;if(N.na=Gc(N,N.L?N.ba:null,N.W),_e.L){Xl(N.h,_e);var We=_e,Gt=N.O;Gt&&(We.H=Gt),We.D&&(Hs(We),qs(We)),N.g=_e}else zc(N);b.i.length>0&&Ws(b)}else gt[0]!="stop"&&gt[0]!="close"||Zs(b,7);else b.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Zs(b,7):ro(b):gt[0]!="noop"&&b.l&&b.l.qa(gt),b.A=0)}}At(4)}catch{}}var Jt=class{constructor(d,p){this.g=d,this.map=p}};function Kl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gs(d){return d.h?1:d.g?d.g.size:0}function Ys(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function Ql(d,p){d.g?d.g.add(p):d.h=p}function Xl(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}Kl.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Wl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const b of d.g.values())p=p.concat(b.G);return p}return q(d.i)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(d,p){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const N=d[b].indexOf("=");let B,Z=null;N>=0?(B=d[b].substring(0,N),Z=d[b].substring(N+1)):B=d[b],p(B,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function $n(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;d instanceof $n?(this.l=d.l,fn(this,d.j),this.o=d.o,this.g=d.g,Gi(this,d.u),this.h=d.h,Zl(this,Pc(d.i)),this.m=d.m):d&&(p=String(d).match(Mc))?(this.l=!1,fn(this,p[1]||"",!0),this.o=Ks(p[2]||""),this.g=Ks(p[3]||"",!0),Gi(this,p[4]),this.h=Ks(p[5]||"",!0),Zl(this,p[6]||"",!0),this.m=Ks(p[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}$n.prototype.toString=function(){const d=[];var p=this.j;p&&d.push(Qr(p,Va,!0),":");var b=this.g;return(b||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Qr(p,Va,!0),"@"),d.push(mi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qr(b,b.charAt(0)=="/"?Jl:Oc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qr(b,Vc)),d.join("")},$n.prototype.resolve=function(d){const p=en(this);let b=!!d.j;b?fn(p,d.j):b=!!d.o,b?p.o=d.o:b=!!d.g,b?p.g=d.g:b=d.u!=null;var N=d.h;if(b)Gi(p,d.u);else if(b=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=p.h.lastIndexOf("/");B!=-1&&(N=p.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const Z=[];for(let _e=0;_e<B.length;){const We=B[_e++];We=="."?N&&_e==B.length&&Z.push(""):We==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&_e==B.length&&Z.push("")):(Z.push(We),N=!0)}N=Z.join("/")}else N=B}return b?p.h=N:b=d.i.toString()!=="",b?Zl(p,Pc(d.i)):b=!!d.m,b&&(p.m=d.m),p};function en(d){return new $n(d)}function fn(d,p,b){d.j=b?Ks(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Gi(d,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);d.u=p}else d.u=null}function Zl(d,p,b){p instanceof Ki?(d.i=p,Pa(d.i,d.l)):(b||(p=Qr(p,Yi)),d.i=new Ki(p,d.l))}function vt(d,p,b){d.i.set(p,b)}function $r(d){return vt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ks(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qr(d,p,b){return typeof d=="string"?(d=encodeURI(d).replace(p,On),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function On(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Va=/[#\/\?@]/g,Oc=/[#\?:]/g,Jl=/[#\?]/g,Yi=/[#\?@]/g,Vc=/#/g;function Ki(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function Vn(d){d.g||(d.g=new Map,d.h=0,d.i&&Oa(d.i,function(p,b){d.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}i=Ki.prototype,i.add=function(d,p){Vn(this),this.i=null,d=$i(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(p),this.h+=1,this};function Lc(d,p){Vn(d),p=$i(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function eo(d,p){return Vn(d),p=$i(d,p),d.g.has(p)}i.forEach=function(d,p){Vn(this),this.g.forEach(function(b,N){b.forEach(function(B){d.call(p,B,N,this)},this)},this)};function to(d,p){Vn(d);let b=[];if(typeof p=="string")eo(d,p)&&(b=b.concat(d.g.get($i(d,p))));else for(d=Array.from(d.g.values()),p=0;p<d.length;p++)b=b.concat(d[p]);return b}i.set=function(d,p){return Vn(this),this.i=null,d=$i(this,d),eo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},i.get=function(d,p){return d?(d=to(this,d),d.length>0?String(d[0]):p):p};function La(d,p,b){Lc(d,p),b.length>0&&(d.i=null,d.g.set($i(d,p),q(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(let N=0;N<p.length;N++){var b=p[N];const B=mi(b);b=to(this,b);for(let Z=0;Z<b.length;Z++){let _e=B;b[Z]!==""&&(_e+="="+mi(b[Z])),d.push(_e)}}return this.i=d.join("&")};function Pc(d){const p=new Ki;return p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),p}function $i(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function Pa(d,p){p&&!d.j&&(Vn(d),d.i=null,d.g.forEach(function(b,N){const B=N.toLowerCase();N!=B&&(Lc(this,N),La(this,B,b))},d)),d.j=p}function As(d,p){const b=new Yn;if(f.Image){const N=new Image;N.onload=_(os,b,"TestLoadImage: loaded",!0,p,N),N.onerror=_(os,b,"TestLoadImage: error",!1,p,N),N.onabort=_(os,b,"TestLoadImage: abort",!1,p,N),N.ontimeout=_(os,b,"TestLoadImage: timeout",!1,p,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else p(!1)}function no(d,p){const b=new Yn,N=new AbortController,B=setTimeout(()=>{N.abort(),os(b,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:N.signal}).then(Z=>{clearTimeout(B),Z.ok?os(b,"TestPingServer: ok",!0,p):os(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),os(b,"TestPingServer: error",!1,p)})}function os(d,p,b,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(b)}catch{}}function Qi(){this.g=new Me}function $s(d){this.i=d.Sb||null,this.h=d.ab||!1}T($s,Je),$s.prototype.g=function(){return new Xr(this.i,this.h)};function Xr(d,p){tt.call(this),this.H=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Xr,tt),i=Xr.prototype,i.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=p,this.readyState=1,js(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(p.body=d),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Xi(this):js(this),this.readyState==3&&Ua(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Xi(this))},i.Na=function(d){this.g&&(this.response=d,Xi(this))},i.ga=function(){this.g&&Xi(this)};function Xi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,js(d)}i.setRequestHeader=function(d,p){this.A.append(d,p)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=p.next();return d.join(`\r
`)};function js(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function cs(d){let p="";return be(d,function(b,N){p+=N,p+=":",p+=b,p+=`\r
`}),p}function Wr(d,p,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=cs(b),typeof d=="string"?b!=null&&mi(b):vt(d,p,b))}function Et(d){tt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Et,tt);var Qs=/^https?$/i,so=["POST","PUT"];i=Et.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,p,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yl.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(Z){Zr(this,Z);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)b.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())b.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),B=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(so,p,void 0)>=0)||N||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,_e]of b)this.g.setRequestHeader(Z,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){Zr(this,Z)}};function Zr(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.o=5,io(d),pi(d)}function io(d){d.A||(d.A=!0,rt(d,"complete"),rt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,rt(this,"complete"),rt(this,"abort"),pi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),Et.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},i.Xa=function(){Jr(this)};function Jr(d){if(d.h&&typeof u<"u"){if(d.v&&Cs(d)==4)setTimeout(d.Ca.bind(d),0);else if(rt(d,"readystatechange"),Cs(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var N;if(N=Z===0){let _e=String(d.D).match(Mc)[1]||null;!_e&&f.self&&f.self.location&&(_e=f.self.location.protocol.slice(0,-1)),N=!Qs.test(_e?_e.toLowerCase():"")}b=N}if(b)rt(d,"complete"),rt(d,"success");else{d.o=6;try{var B=Cs(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",io(d)}}finally{pi(d)}}}}function pi(d,p){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,p||rt(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Cs(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Cs(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),ye(p)}};function gn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function gi(d){const p={};d=(d.g&&Cs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(I(d[N]))continue;var b=Ic(d[N]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=p[B]||[];p[B]=Z,Z.push(b)}Ce(p,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(d,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||p}function Wi(d){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xs("baseRetryDelayMs",5e3,d),this.Za=Xs("retryDelaySeedMs",1e4,d),this.Ta=Xs("forwardChannelMaxRetries",2,d),this.va=Xs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Kl(d&&d.concurrentRequestLimit),this.Ba=new Qi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Wi.prototype,i.ka=8,i.I=1,i.connect=function(d,p,b,N){jt(0),this.W=d,this.H=p||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Gc(this,null,this.W),Ws(this)};function ro(d){if(za(d),d.I==3){var p=d.V++,b=en(d.J);if(vt(b,"SID",d.M),vt(b,"RID",p),vt(b,"TYPE","terminate"),ea(d,b),p=new Ns(d,d.j,p),p.M=2,p.A=$r(en(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=p.A,b=!0),b||(p.g=Yc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),qs(p)}Fc(d)}function Zi(d){d.g&&(lo(d),d.g.cancel(),d.g=null)}function za(d){Zi(d),d.v&&(f.clearTimeout(d.v),d.v=null),qa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ws(d){if(!$l(d.h)&&!d.m){d.m=!0;var p=d.Ea;ve||S(),fe||(ve(),fe=!0),C.add(p,d),d.D=0}}function Ba(d,p){return Gs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=p.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Wt(x(d.Ea,d,p),Hc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Ns(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=E(Z),H(Z,this.U)):Z=this.U),this.u!==null||this.R||(B.J=Z,Z=null),this.S)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(p+=N,p>4096){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Uc(this,B,p),b=en(this.J),vt(b,"RID",d),vt(b,"CVER",22),this.G&&vt(b,"X-HTTP-Session-Id",this.G),ea(this,b),Z&&(this.R?p="headers="+mi(cs(Z))+"&"+p:this.u&&Wr(b,this.u,Z)),Ql(this.h,B),this.Ra&&vt(b,"TYPE","init"),this.S?(vt(b,"$req",p),vt(b,"SID","null"),B.U=!0,Bs(B,b,null)):Bs(B,b,p),this.I=2}}else this.I==3&&(d?ao(this,d):this.i.length==0||$l(this.h)||ao(this))};function ao(d,p){var b;p?b=p.l:b=d.V++;const N=en(d.J);vt(N,"SID",d.M),vt(N,"RID",b),vt(N,"AID",d.K),ea(d,N),d.u&&d.o&&Wr(N,d.u,d.o),b=new Ns(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),p&&(d.i=p.G.concat(d.i)),p=Uc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ql(d.h,b),Bs(b,N,p)}function ea(d,p){d.H&&be(d.H,function(b,N){vt(p,N,b)}),d.l&&be({},function(b,N){vt(p,N,b)})}function Uc(d,p,b){b=Math.min(d.i.length,b);const N=d.l?x(d.l.Ka,d.l,d):null;e:{var B=d.i;let We=-1;for(;;){const Gt=["count="+b];We==-1?b>0?(We=B[0].g,Gt.push("ofs="+We)):We=0:Gt.push("ofs="+We);let gt=!0;for(let Ut=0;Ut<b;Ut++){var Z=B[Ut].g;const us=B[Ut].map;if(Z-=We,Z<0)We=Math.max(0,B[Ut].g-100),gt=!1;else try{Z="req"+Z+"_"||"";try{var _e=us instanceof Map?us:Object.entries(us);for(const[Js,Rs]of _e){let Is=Rs;g(Rs)&&(Is=Q(Rs)),Gt.push(Z+Js+"="+encodeURIComponent(Is))}}catch(Js){throw Gt.push(Z+"type="+encodeURIComponent("_badmap")),Js}}catch{N&&N(us)}}if(gt){_e=Gt.join("&");break e}}_e=void 0}return d=d.i.splice(0,b),p.G=d,_e}function zc(d){if(!d.g&&!d.v){d.Y=1;var p=d.Da;ve||S(),fe||(ve(),fe=!0),C.add(p,d),d.A=0}}function ta(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Wt(x(d.Da,d),Hc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Wt(x(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Zi(this),Bc(this))};function lo(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Bc(d){d.g=new Ns(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var p=en(d.na);vt(p,"RID","rpc"),vt(p,"SID",d.M),vt(p,"AID",d.K),vt(p,"CI",d.F?"0":"1"),!d.F&&d.ia&&vt(p,"TO",d.ia),vt(p,"TYPE","xmlhttp"),ea(d,p),d.u&&d.o&&Wr(p,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=$r(en(p)),b.u=null,b.R=!0,Da(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Zi(this),ta(this),jt(19))};function qa(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function qc(d,p){var b=null;if(d.g==p){qa(d),lo(d),d.g=null;var N=2}else if(Ys(d.h,p))b=p.G,Xl(d.h,p),N=1;else return;if(d.I!=0){if(p.o)if(N==1){b=p.u?p.u.length:0,p=Date.now()-p.F;var B=d.D;N=Gn(),rt(N,new dn(N,b)),Ws(d)}else zc(d);else if(B=p.m,B==3||B==0&&p.X>0||!(N==1&&Ba(d,p)||N==2&&ta(d)))switch(b&&b.length>0&&(p=d.h,p.i=p.i.concat(b)),B){case 1:Zs(d,5);break;case 4:Zs(d,10);break;case 3:Zs(d,6);break;default:Zs(d,2)}}}function Hc(d,p){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*p}function Zs(d,p){if(d.j.info("Error code "+p),p==2){var b=x(d.bb,d),N=d.Ua;const B=!N;N=new $n(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||fn(N,"https"),$r(N),B?As(N.toString(),b):no(N.toString(),b)}else jt(2);d.I=0,d.l&&d.l.pa(p),Fc(d),za(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Fc(d){if(d.I=0,d.ja=[],d.l){const p=Wl(d.h);(p.length!=0||d.i.length!=0)&&(W(d.ja,p),W(d.ja,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.oa()}}function Gc(d,p,b){var N=b instanceof $n?en(b):new $n(b);if(N.g!="")p&&(N.g=p+"."+N.g),Gi(N,N.u);else{var B=f.location;N=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;const Z=new $n(null);N&&fn(Z,N),p&&(Z.g=p),B&&Gi(Z,B),b&&(Z.h=b),N=Z}return b=d.G,p=d.wa,b&&p&&vt(N,b,p),vt(N,"VER",d.ka),ea(d,N),N}function Yc(d,p,b){if(p&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Aa&&!d.ma?new Et(new $s({ab:b})):new Et(d.ma),p.Fa(d.L),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kc(){}i=Kc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ji(){}Ji.prototype.g=function(d,p){return new In(d,p)};function In(d,p){tt.call(this),this.g=new Wi(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(d?d["X-WebChannel-Client-Profile"]=p.sa:d={"X-WebChannel-Client-Profile":p.sa}),this.g.U=d,(d=p&&p.Qb)&&!I(d)&&(this.g.u=d),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.G=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new yi(this)}T(In,tt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ro(this.g)},In.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=Q(d),d=b);p.i.push(new Jt(p.Ya++,d)),p.I==3&&Ws(p)},In.prototype.N=function(){this.g.l=null,delete this.j,ro(this.g),delete this.g,In.Z.N.call(this)};function $c(d){Pe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const b in p){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}T($c,Pe);function Qc(){Xe.call(this),this.status=1}T(Qc,Xe);function yi(d){this.g=d}T(yi,Kc),yi.prototype.ra=function(){rt(this.g,"a")},yi.prototype.qa=function(d){rt(this.g,new $c(d))},yi.prototype.pa=function(d){rt(this.g,new Qc)},yi.prototype.oa=function(){rt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,l_=function(){return new Ji},a_=function(){return Gn()},r_=nt,Om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,dd=Yr,Gl.COMPLETE="complete",i_=Gl,qe.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",tt.prototype.listen=tt.prototype.J,Qo=qe,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,s_=Et}).apply(typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{});const nv="@firebase/firestore",sv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new sp("@firebase/firestore");function bl(){return ja.logLevel}function Re(i,...e){if(ja.logLevel<=ct.DEBUG){const s=e.map(mp);ja.debug(`Firestore (${zl}): ${i}`,...s)}}function Pi(i,...e){if(ja.logLevel<=ct.ERROR){const s=e.map(mp);ja.error(`Firestore (${zl}): ${i}`,...s)}}function Rl(i,...e){if(ja.logLevel<=ct.WARN){const s=e.map(mp);ja.warn(`Firestore (${zl}): ${i}`,...s)}}function mp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,o_(i,r,s)}function o_(i,e,s){let r=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Pi(r),new Error(r)}function xt(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||o_(e,o,r)}function $e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Bi{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(An.UNAUTHENTICATED)))}shutdown(){}}class jS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class CS{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){xt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,s(y)):Promise.resolve();let u=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Dr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Dr)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new c_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class RS{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IS{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new RS(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kS{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){xt(this.o===void 0,3512);const r=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(xt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new iv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=DS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<s&&(r+=e.charAt(o[u]%62))}return r}}function ut(i,e){return i<e?-1:i>e?1:0}function Vm(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),u=e.charAt(r);if(o!==u)return gm(o)===gm(u)?ut(o,u):gm(o)?1:-1}return ut(i.length,e.length)}const MS=55296,OS=57343;function gm(i){const e=i.charCodeAt(0);return e>=MS&&e<=OS}function Il(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__name__";class ri{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ge(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ge(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const u=ri.compareSegments(e.get(o),s.get(o));if(u!==0)return u}return ut(e.length,s.length)}static compareSegments(e,s){const r=ri.isNumericId(e),o=ri.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?ri.extractNumericId(e).compare(ri.extractNumericId(s)):Vm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class kt extends ri{construct(e,s,r){return new kt(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new kt(s)}static emptyPath(){return new kt([])}}const VS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends ri{construct(e,s,r){return new wn(e,s,r)}static isValidIdentifier(e){return VS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rv}static keyField(){return new wn([rv])}static fromServerFormat(e){const s=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(s)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(kt.fromString(e))}static fromName(e){return new Ve(kt.fromString(e).popFirst(5))}static empty(){return new Ve(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return kt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(i,e,s){if(!s)throw new Ae(ce.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function LS(i,e,s,r){if(e===!0&&r===!0)throw new Ae(ce.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function av(i){if(!Ve.isDocumentKey(i))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lv(i){if(Ve.isDocumentKey(i))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function d_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Bd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ge(12329,{type:typeof i})}function is(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Bd(i);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(i,e){const s={typeString:i};return e&&(s.value=e),s}function _c(i,e){if(!d_(i))throw new Ae(ce.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){s=`Expected '${r}' field to equal '${u.value}'`;break}}if(s)throw new Ae(ce.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=-62135596800,cv=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*cv);return new Vt(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<ov)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cv}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:on("string",Vt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Vt(0,0))}static max(){return new Ye(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=-1;function PS(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ye.fromTimestamp(r===1e9?new Vt(s+1,0):new Vt(s,r));return new Or(o,Ve.empty(),e)}function US(i){return new Or(i.readTime,i.key,oc)}class Or{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Or(Ye.min(),Ve.empty(),oc)}static max(){return new Or(Ye.max(),Ve.empty(),oc)}}function zS(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=Ve.comparator(i.documentKey,e.documentKey),s!==0?s:ut(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(i){if(i.code!==ce.FAILED_PRECONDITION||i.message!==BS)throw i;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new de(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof de?s:de.resolve(s)}catch(s){return de.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):de.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):de.reject(s)}static resolve(e){return new de(((s,r)=>{s(e)}))}static reject(e){return new de(((s,r)=>{r(e)}))}static waitFor(e){return new de(((s,r)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&s()}),(y=>r(y)))})),f=!0,u===o&&s()}))}static or(e){let s=de.resolve(!1);for(const r of e)s=s.next((o=>o?de.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,u)=>{r.push(s.call(this,o,u))})),this.waitFor(r)}static mapArray(e,s){return new de(((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const x=y;s(e[x]).next((_=>{f[x]=_,++g,g===u&&r(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new de(((r,o)=>{const u=()=>{e()===!0?s().next((()=>{u()}),o):r()};u()}))}}function HS(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function ql(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=-1;function Hd(i){return i==null}function Sd(i){return i===0&&1/i==-1/0}function FS(i){return typeof i=="number"&&Number.isInteger(i)&&!Sd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="";function GS(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=uv(e)),e=YS(i.get(s),e);return uv(e)}function YS(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":s+="";break;case h_:s+="";break;default:s+=u}}return s}function uv(i){return i+h_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function qr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function f_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,s){this.comparator=e,this.root=s||_n.EMPTY}insert(e,s){return new Bt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=s?r(e.key,s):1,s&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,s,r,o,u){this.key=e,this.value=s,this.color=r??_n.RED,this.left=o??_n.EMPTY,this.right=u??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,u){return new _n(e??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,s,r),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,s,r,o,u){return this}insert(e,s,r){return new _n(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new un(this.comparator);return s.data=e,s}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new ss([])}unionWith(e){let s=new un(wn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new ss(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new m_("Invalid base64 string: "+u):u}})(e);return new Tn(s)}static fromUint8Array(e){const s=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Tn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const KS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(i){if(xt(!!i,39018),typeof i=="string"){let e=0;const s=KS.exec(i);if(xt(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(i.seconds),nanos:$t(i.nanos)}}function $t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Lr(i){return typeof i=="string"?Tn.fromBase64String(i):Tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="server_timestamp",g_="__type__",y_="__previous_value__",x_="__local_write_time__";function yp(i){return(i?.mapValue?.fields||{})[g_]?.stringValue===p_}function Fd(i){const e=i.mapValue.fields[y_];return yp(e)?Fd(e):e}function cc(i){const e=Vr(i.mapValue.fields[x_].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,s,r,o,u,f,g,y,x,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=x,this.isUsingEmulator=_}}const Ad="(default)";class uc{constructor(e,s){this.projectId=e,this.database=s||Ad}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__type__",QS="__max__",nd={mapValue:{}},b_="__vector__",jd="value";function Pr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yp(i)?4:WS(i)?9007199254740991:XS(i)?10:11:Ge(28295,{value:i})}function hi(i,e){if(i===e)return!0;const s=Pr(i);if(s!==Pr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return cc(i).isEqual(cc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Vr(o.timestampValue),g=Vr(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Lr(o.bytesValue).isEqual(Lr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return $t(o.geoPointValue.latitude)===$t(u.geoPointValue.latitude)&&$t(o.geoPointValue.longitude)===$t(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return $t(o.integerValue)===$t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=$t(o.doubleValue),g=$t(u.doubleValue);return f===g?Sd(f)===Sd(g):isNaN(f)&&isNaN(g)}return!1})(i,e);case 9:return Il(i.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(dv(f)!==dv(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!hi(f[y],g[y])))return!1;return!0})(i,e);default:return Ge(52216,{left:i})}}function dc(i,e){return(i.values||[]).find((s=>hi(s,e)))!==void 0}function kl(i,e){if(i===e)return 0;const s=Pr(i),r=Pr(e);if(s!==r)return ut(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ut(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=$t(u.integerValue||u.doubleValue),y=$t(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(i,e);case 3:return fv(i.timestampValue,e.timestampValue);case 4:return fv(cc(i),cc(e));case 5:return Vm(i.stringValue,e.stringValue);case 6:return(function(u,f){const g=Lr(u),y=Lr(f);return g.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),y=f.split("/");for(let x=0;x<g.length&&x<y.length;x++){const _=ut(g[x],y[x]);if(_!==0)return _}return ut(g.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=ut($t(u.latitude),$t(f.latitude));return g!==0?g:ut($t(u.longitude),$t(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return mv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const g=u.fields||{},y=f.fields||{},x=g[jd]?.arrayValue,_=y[jd]?.arrayValue,T=ut(x?.values?.length||0,_?.values?.length||0);return T!==0?T:mv(x,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===nd.mapValue&&f===nd.mapValue)return 0;if(u===nd.mapValue)return 1;if(f===nd.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),x=f.fields||{},_=Object.keys(x);y.sort(),_.sort();for(let T=0;T<y.length&&T<_.length;++T){const A=Vm(y[T],_[T]);if(A!==0)return A;const q=kl(g[y[T]],x[_[T]]);if(q!==0)return q}return ut(y.length,_.length)})(i.mapValue,e.mapValue);default:throw Ge(23264,{he:s})}}function fv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ut(i,e);const s=Vr(i),r=Vr(e),o=ut(s.seconds,r.seconds);return o!==0?o:ut(s.nanos,r.nanos)}function mv(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const u=kl(s[o],r[o]);if(u)return u}return ut(s.length,r.length)}function Dl(i){return Lm(i)}function Lm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Vr(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return Lr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Ve.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const u of s.values||[])o?o=!1:r+=",",r+=Lm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Lm(s.fields[f])}`;return o+"}"})(i.mapValue):Ge(61005,{value:i})}function hd(i){switch(Pr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(i);return e?16+hd(e):16;case 5:return 2*i.stringValue.length;case 6:return Lr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+hd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return qr(r.fields,((u,f)=>{o+=u.length+hd(f)})),o})(i.mapValue);default:throw Ge(13486,{value:i})}}function pv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Pm(i){return!!i&&"integerValue"in i}function xp(i){return!!i&&"arrayValue"in i}function gv(i){return!!i&&"nullValue"in i}function yv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fd(i){return!!i&&"mapValue"in i}function XS(i){return(i?.mapValue?.fields||{})[v_]?.stringValue===b_}function tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return qr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=tc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=tc(i.arrayValue.values[s]);return e}return{...i}}function WS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===QS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!fd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(s)}setAll(e){let s=wn.emptyPath(),r={},o=[];e.forEach(((f,g)=>{if(!s.isImmediateParentOf(g)){const y=this.getFieldsMap(s);this.applyChanges(y,r,o),r={},o=[],s=g.popLast()}f?r[g.lastSegment()]=tc(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,r,o)}delete(e){const s=this.field(e.popLast());fd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];fd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){qr(s,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Hn(tc(this.value))}}function __(i){const e=[];return qr(i.fields,((s,r)=>{const o=new wn([s]);if(fd(r)){const u=__(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,s,r,o,u,f,g){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new jn(e,0,Ye.min(),Ye.min(),Ye.min(),Hn.empty(),0)}static newFoundDocument(e,s,r,o){return new jn(e,1,s,Ye.min(),r,o,0)}static newNoDocument(e,s){return new jn(e,2,s,Ye.min(),Ye.min(),Hn.empty(),0)}static newUnknownDocument(e,s){return new jn(e,3,s,Ye.min(),Ye.min(),Hn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,s){this.position=e,this.inclusive=s}}function xv(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?r=Ve.comparator(Ve.fromName(f.referenceValue),s.key):r=kl(f,s.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function vv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!hi(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,s="asc"){this.field=e,this.dir=s}}function ZS(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class ln extends w_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new eA(e,s,r):s==="array-contains"?new sA(e,r):s==="in"?new iA(e,r):s==="not-in"?new rA(e,r):s==="array-contains-any"?new aA(e,r):new ln(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new tA(e,r):new nA(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(kl(s,this.value)):s!==null&&Pr(this.value)===Pr(s)&&this.matchesComparison(kl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Us extends w_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Us(e,s)}matches(e){return E_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function E_(i){return i.op==="and"}function T_(i){return JS(i)&&E_(i)}function JS(i){for(const e of i.filters)if(e instanceof Us)return!1;return!0}function Um(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+Dl(i.value);if(T_(i))return i.filters.map((e=>Um(e))).join(",");{const e=i.filters.map((s=>Um(s))).join(",");return`${i.op}(${e})`}}function N_(i,e){return i instanceof ln?(function(r,o){return o instanceof ln&&r.op===o.op&&r.field.isEqual(o.field)&&hi(r.value,o.value)})(i,e):i instanceof Us?(function(r,o){return o instanceof Us&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,g)=>u&&N_(f,o.filters[g])),!0):!1})(i,e):void Ge(19439)}function S_(i){return i instanceof ln?(function(s){return`${s.field.canonicalString()} ${s.op} ${Dl(s.value)}`})(i):i instanceof Us?(function(s){return s.op.toString()+" {"+s.getFilters().map(S_).join(" ,")+"}"})(i):"Filter"}class eA extends ln{constructor(e,s,r){super(e,s,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const s=Ve.comparator(e.key,this.key);return this.matchesComparison(s)}}class tA extends ln{constructor(e,s){super(e,"in",s),this.keys=A_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class nA extends ln{constructor(e,s){super(e,"not-in",s),this.keys=A_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function A_(i,e){return(e.arrayValue?.values||[]).map((s=>Ve.fromName(s.referenceValue)))}class sA extends ln{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return xp(s)&&dc(s.arrayValue,this.value)}}class iA extends ln{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&dc(this.value.arrayValue,s)}}class rA extends ln{constructor(e,s){super(e,"not-in",s)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!dc(this.value.arrayValue,s)}}class aA extends ln{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!xp(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>dc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,s=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function bv(i,e=null,s=[],r=[],o=null,u=null,f=null){return new lA(i,e,s,r,o,u,f)}function vp(i){const e=$e(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Um(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Hd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>Dl(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>Dl(r))).join(",")),e.Te=s}return e.Te}function bp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!ZS(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!N_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!vv(i.startAt,e.startAt)&&vv(i.endAt,e.endAt)}function zm(i){return Ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,s=null,r=[],o=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oA(i,e,s,r,o,u,f,g){return new Hl(i,e,s,r,o,u,f,g)}function _p(i){return new Hl(i)}function _v(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function j_(i){return i.collectionGroup!==null}function nc(i){const e=$e(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),s.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new un(wn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((x=>{x.isInequality()&&(g=g.add(x.field))}))})),g})(e).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new hc(u,r))})),s.has(wn.keyField().canonicalString())||e.Ie.push(new hc(wn.keyField(),r))}return e.Ie}function oi(i){const e=$e(i);return e.Ee||(e.Ee=cA(e,nc(i))),e.Ee}function cA(i,e){if(i.limitType==="F")return bv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new hc(o.field,u)}));const s=i.endAt?new Cd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Cd(i.startAt.position,i.startAt.inclusive):null;return bv(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function Bm(i,e){const s=i.filters.concat([e]);return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function qm(i,e,s){return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function Gd(i,e){return bp(oi(i),oi(e))&&i.limitType===e.limitType}function C_(i){return`${vp(oi(i))}|lt:${i.limitType}`}function _l(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>S_(o))).join(", ")}]`),Hd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>Dl(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>Dl(o))).join(",")),`Target(${r})`})(oi(i))}; limitType=${i.limitType})`}function Yd(i,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ve.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,o){for(const u of nc(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,g,y){const x=xv(f,g,y);return f.inclusive?x<=0:x<0})(r.startAt,nc(r),o)||r.endAt&&!(function(f,g,y){const x=xv(f,g,y);return f.inclusive?x>=0:x>0})(r.endAt,nc(r),o))})(i,e)}function uA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function R_(i){return(e,s)=>{let r=!1;for(const o of nc(i)){const u=dA(o,e,s);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function dA(i,e,s){const r=i.field.isKeyField()?Ve.comparator(e.key,s.key):(function(u,f,g){const y=f.data.field(u),x=g.data.field(u);return y!==null&&x!==null?kl(y,x):Ge(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,((s,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Bt(Ve.comparator);function Ui(){return hA}const I_=new Bt(Ve.comparator);function Xo(...i){let e=I_;for(const s of i)e=e.insert(s.key,s);return e}function k_(i){let e=I_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function ba(){return sc()}function D_(){return sc()}function sc(){return new Ia((i=>i.toString()),((i,e)=>i.isEqual(e)))}const fA=new Bt(Ve.comparator),mA=new un(Ve.comparator);function dt(...i){let e=mA;for(const s of i)e=e.add(s);return e}const pA=new un(ut);function gA(){return pA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function M_(i){return{integerValue:""+i}}function yA(i,e){return FS(e)?M_(e):wp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function xA(i,e,s){return i instanceof Rd?(function(o,u){const f={fields:{[g_]:{stringValue:p_},[x_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&yp(u)&&(u=Fd(u)),u&&(f.fields[y_]=u),{mapValue:f}})(s,e):i instanceof fc?V_(i,e):i instanceof mc?L_(i,e):(function(o,u){const f=O_(o,u),g=wv(f)+wv(o.Ae);return Pm(f)&&Pm(o.Ae)?M_(g):wp(o.serializer,g)})(i,e)}function vA(i,e,s){return i instanceof fc?V_(i,e):i instanceof mc?L_(i,e):s}function O_(i,e){return i instanceof Id?(function(r){return Pm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Rd extends Kd{}class fc extends Kd{constructor(e){super(),this.elements=e}}function V_(i,e){const s=P_(e);for(const r of i.elements)s.some((o=>hi(o,r)))||s.push(r);return{arrayValue:{values:s}}}class mc extends Kd{constructor(e){super(),this.elements=e}}function L_(i,e){let s=P_(e);for(const r of i.elements)s=s.filter((o=>!hi(o,r)));return{arrayValue:{values:s}}}class Id extends Kd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function wv(i){return $t(i.integerValue||i.doubleValue)}function P_(i){return xp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function bA(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof fc&&o instanceof fc||r instanceof mc&&o instanceof mc?Il(r.elements,o.elements,hi):r instanceof Id&&o instanceof Id?hi(r.Ae,o.Ae):r instanceof Rd&&o instanceof Rd})(i.transform,e.transform)}class _A{constructor(e,s){this.version=e,this.transformResults=s}}class Dn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class $d{}function U_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Qd(i.key,Dn.none()):new wc(i.key,i.data,Dn.none());{const s=i.data,r=Hn.empty();let o=new un(wn.comparator);for(let u of e.fields)if(!o.has(u)){let f=s.field(u);f===null&&u.length>1&&(u=u.popLast(),f=s.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Hr(i.key,r,new ss(o.toArray()),Dn.none())}}function wA(i,e,s){i instanceof wc?(function(o,u,f){const g=o.value.clone(),y=Tv(o.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,s):i instanceof Hr?(function(o,u,f){if(!md(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Tv(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(z_(o)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,s):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function ic(i,e,s,r){return i instanceof wc?(function(u,f,g,y){if(!md(u.precondition,f))return g;const x=u.value.clone(),_=Nv(u.fieldTransforms,y,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(i,e,s,r):i instanceof Hr?(function(u,f,g,y){if(!md(u.precondition,f))return g;const x=Nv(u.fieldTransforms,y,f),_=f.data;return _.setAll(z_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,s,r):(function(u,f,g){return md(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(i,e,s)}function EA(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),u=O_(r.transform,o||null);u!=null&&(s===null&&(s=Hn.empty()),s.set(r.field,u))}return s||null}function Ev(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Il(r,o,((u,f)=>bA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class wc extends $d{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Hr extends $d{constructor(e,s,r,o,u=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function z_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function Tv(i,e,s){const r=new Map;xt(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const u=i[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,vA(f,g,s[o]))}return r}function Nv(i,e,s){const r=new Map;for(const o of i){const u=o.transform,f=s.data.field(o.field);r.set(o.field,xA(u,f,e))}return r}class Qd extends $d{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TA extends $d{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&wA(u,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=ic(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=ic(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=D_();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=s.has(o.key)?null:g;const y=U_(f,g);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),dt())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((s,r)=>Ev(s,r)))&&Il(this.baseMutations,e.baseMutations,((s,r)=>Ev(s,r)))}}class Ep{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){xt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return fA})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Ep(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,ft;function jA(i){switch(i){case ce.OK:return Ge(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ge(15467,{code:i})}}function B_(i){if(i===void 0)return Pi("GRPC error has no .code"),ce.UNKNOWN;switch(i){case an.OK:return ce.OK;case an.CANCELLED:return ce.CANCELLED;case an.UNKNOWN:return ce.UNKNOWN;case an.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case an.INTERNAL:return ce.INTERNAL;case an.UNAVAILABLE:return ce.UNAVAILABLE;case an.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case an.NOT_FOUND:return ce.NOT_FOUND;case an.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case an.ABORTED:return ce.ABORTED;case an.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case an.DATA_LOSS:return ce.DATA_LOSS;default:return Ge(39323,{code:i})}}(ft=an||(an={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new kr([4294967295,4294967295],0);function Sv(i){const e=CA().encode(i),s=new n_;return s.update(e),new Uint8Array(s.digest())}function Av(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new kr([s,r],0),new kr([o,u],0)]}class Tp{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Wo(`Invalid padding: ${s}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=kr.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(kr.fromNumber(r)));return o.compare(RA)===1&&(o=new kr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Sv(e),[r,o]=Av(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Tp(u,o,s);return r.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const s=Sv(e),[r,o]=Av(s);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,s,r,o,u){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Xd(Ye.min(),o,new Bt(ut),Ui(),dt())}}class Ec{constructor(e,s,r,o,u){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Ec(r,s,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class q_{constructor(e,s){this.targetId=e,this.Ce=s}}class H_{constructor(e,s,r=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class jv{constructor(){this.ve=0,this.Fe=Cv(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),s=dt(),r=dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:Ge(38017,{changeType:u})}})),new Ec(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=Cv()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=sd(),this.He=sd(),this.Ye=new Bt(ut)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const u=o.target;if(zm(u))if(r===0){const f=new Ve(u.path);this.et(s,f,jn.newNoDocument(f,Ye.min()))}else xt(r===1,20013,{expectedCount:r});else{const f=this._t(s);if(f!==r){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(s);const x=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,x)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=s;let f,g;try{f=Lr(r).toUint8Array()}catch(y){if(y instanceof m_)return Rl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Tp(f,o,u)}catch(y){return Rl(y instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(s,u,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&zm(g.target)){const y=new Ve(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,jn.newNoDocument(y,e))}u.Be&&(s.set(f,u.ke()),u.qe())}}));let r=dt();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((y=>{const x=this.ot(y);return!x||x.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Xd(e,s,this.Ye,this.je,r);return this.je=Ui(),this.Je=sd(),this.He=sd(),this.Ye=new Bt(ut),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new jv,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new un(ut),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new un(ut),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Re("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function sd(){return new Bt(Ve.comparator)}function Cv(){return new Bt(Ve.comparator)}const kA={asc:"ASCENDING",desc:"DESCENDING"},DA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MA={and:"AND",or:"OR"};class OA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Hm(i,e){return i.useProto3Json||Hd(e)?e:{value:e}}function kd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function VA(i,e){return kd(i,e.toTimestamp())}function ci(i){return xt(!!i,49232),Ye.fromTimestamp((function(s){const r=Vr(s);return new Vt(r.seconds,r.nanos)})(i))}function Np(i,e){return Fm(i,e).canonicalString()}function Fm(i,e){const s=(function(o){return new kt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function G_(i){const e=kt.fromString(i);return xt(X_(e),10190,{key:e.toString()}),e}function Gm(i,e){return Np(i.databaseId,e.path)}function ym(i,e){const s=G_(e);if(s.get(1)!==i.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Ve(K_(s))}function Y_(i,e){return Np(i.databaseId,e)}function LA(i){const e=G_(i);return e.length===4?kt.emptyPath():K_(e)}function Ym(i){return new kt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function K_(i){return xt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Rv(i,e,s){return{name:Gm(i,e),fields:s.value.mapValue.fields}}function PA(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ge(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(xt(_===void 0||typeof _=="string",58123),Tn.fromBase64String(_||"")):(xt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Tn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(x){const _=x.code===void 0?ce.UNKNOWN:B_(x.code);return new Ae(_,x.message||"")})(f);s=new H_(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ym(i,r.document.name),u=ci(r.document.updateTime),f=r.document.createTime?ci(r.document.createTime):Ye.min(),g=new Hn({mapValue:{fields:r.document.fields}}),y=jn.newFoundDocument(o,u,f,g),x=r.targetIds||[],_=r.removedTargetIds||[];s=new pd(x,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ym(i,r.document),u=r.readTime?ci(r.readTime):Ye.min(),f=jn.newNoDocument(o,u),g=r.removedTargetIds||[];s=new pd([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ym(i,r.document),u=r.removedTargetIds||[];s=new pd([],u,o,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new AA(o,u),g=r.targetId;s=new q_(g,f)}}return s}function UA(i,e){let s;if(e instanceof wc)s={update:Rv(i,e.key,e.value)};else if(e instanceof Qd)s={delete:Gm(i,e.key)};else if(e instanceof Hr)s={update:Rv(i,e.key,e.data),updateMask:$A(e.fieldMask)};else{if(!(e instanceof TA))return Ge(16599,{Vt:e.type});s={verify:Gm(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof Rd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof fc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof mc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Id)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Ge(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:VA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)})(i,e.precondition)),s}function zA(i,e){return i&&i.length>0?(xt(e!==void 0,14353),i.map((s=>(function(o,u){let f=o.updateTime?ci(o.updateTime):ci(u);return f.isEqual(Ye.min())&&(f=ci(u)),new _A(f,o.transformResults||[])})(s,e)))):[]}function BA(i,e){return{documents:[Y_(i,e.path)]}}function qA(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=Y_(i,o);const u=(function(x){if(x.length!==0)return Q_(Us.create(x,"and"))})(e.filters);u&&(s.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(A){return{field:wl(A.field),direction:GA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const g=Hm(i,e.limit);return g!==null&&(s.structuredQuery.limit=g),e.startAt&&(s.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:s,parent:o}}function HA(i){let e=LA(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){xt(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];s.where&&(u=(function(T){const A=$_(T);return A instanceof Us&&T_(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(T){return T.map((A=>(function(W){return new hc(El(W.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(A)))})(s.orderBy));let g=null;s.limit&&(g=(function(T){let A;return A=typeof T=="object"?T.value:T,Hd(A)?null:A})(s.limit));let y=null;s.startAt&&(y=(function(T){const A=!!T.before,q=T.values||[];return new Cd(q,A)})(s.startAt));let x=null;return s.endAt&&(x=(function(T){const A=!T.before,q=T.values||[];return new Cd(q,A)})(s.endAt)),oA(e,o,f,u,g,"F",y,x)}function FA(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function $_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=El(s.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=El(s.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(s.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=El(s.unaryFilter.field);return ln.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(i):i.fieldFilter!==void 0?(function(s){return ln.create(El(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return Us.create(s.compositeFilter.filters.map((r=>$_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(s.compositeFilter.op))})(i):Ge(30097,{filter:i})}function GA(i){return kA[i]}function YA(i){return DA[i]}function KA(i){return MA[i]}function wl(i){return{fieldPath:i.canonicalString()}}function El(i){return wn.fromServerFormat(i.fieldPath)}function Q_(i){return i instanceof ln?(function(s){if(s.op==="=="){if(yv(s.value))return{unaryFilter:{field:wl(s.field),op:"IS_NAN"}};if(gv(s.value))return{unaryFilter:{field:wl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(yv(s.value))return{unaryFilter:{field:wl(s.field),op:"IS_NOT_NAN"}};if(gv(s.value))return{unaryFilter:{field:wl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(s.field),op:YA(s.op),value:s.value}}})(i):i instanceof Us?(function(s){const r=s.getFilters().map((o=>Q_(o)));return r.length===1?r[0]:{compositeFilter:{op:KA(s.op),filters:r}}})(i):Ge(54877,{filter:i})}function $A(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function X_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,s,r,o,u=Ye.min(),f=Ye.min(),g=Tn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.yt=e}}function XA(i){const e=HA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.Cn=new ZA}addToCollectionParentIndex(e,s){return this.Cn.add(s),de.resolve()}getCollectionParents(e,s){return de.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return de.resolve()}deleteFieldIndex(e,s){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,s){return de.resolve()}getDocumentsMatchingTarget(e,s){return de.resolve(null)}getIndexType(e,s){return de.resolve(0)}getFieldIndexes(e,s){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,s){return de.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,s){return de.resolve(Or.min())}updateCollectionGroup(e,s,r){return de.resolve()}updateIndexEntries(e,s){return de.resolve()}}class ZA{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new un(kt.comparator),u=!o.has(r);return this.index[s]=o.add(r),u}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W_=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(W_,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ml(0)}static cr(){return new Ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="LruGarbageCollector",JA=1048576;function Dv([i,e],[s,r]){const o=ut(i,s);return o===0?ut(e,r):o}class ej{constructor(e){this.Ir=e,this.buffer=new un(Dv),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Dv(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class tj{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){ql(s)?Re(kv,"Ignoring IndexedDB error during garbage collection: ",s):await Bl(s)}await this.Vr(3e5)}))}}class nj{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return de.resolve(qd.ce);const r=new ej(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Iv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iv):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,u,f,g,y,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,g=Date.now(),this.removeTargets(e,r,s)))).next((T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(x=Date.now(),bl()<=ct.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${T} documents in `+(x-y)+`ms
Total Duration: ${x-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function sj(i,e){return new nj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.changes=new Ia((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?de.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&ic(r.mutation,o,ss.empty(),Vt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,dt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=dt()){const o=ba();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((u=>{let f=Xo();return u.forEach(((g,y)=>{f=f.insert(g,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const r=ba();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,dt())))}populateOverlays(e,s,r){const o=[];return r.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{s.set(f,g)}))}))}computeViews(e,s,r,o){let u=Ui();const f=sc(),g=(function(){return sc()})();return s.forEach(((y,x)=>{const _=r.get(x.key);o.has(x.key)&&(_===void 0||_.mutation instanceof Hr)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),ic(_.mutation,x,_.mutation.getFieldMask(),Vt.now())):f.set(x.key,ss.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((x,_)=>f.set(x,_))),s.forEach(((x,_)=>g.set(x,new rj(_,f.get(x)??null)))),g)))}recalculateAndSaveOverlays(e,s){const r=sc();let o=new Bt(((f,g)=>f-g)),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const g of f)g.keys().forEach((y=>{const x=s.get(y);if(x===null)return;let _=r.get(y)||ss.empty();_=g.applyToLocalView(x,_),r.set(y,_);const T=(o.get(g.batchId)||dt()).add(y);o=o.insert(g.batchId,T)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),x=y.key,_=y.value,T=D_();_.forEach((A=>{if(!u.has(A)){const q=U_(s.get(A),r.get(A));q!==null&&T.set(A,q),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,T))}return de.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(f){return Ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):j_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-u.size):de.resolve(ba());let g=oc,y=u;return f.next((x=>de.forEach(x,((_,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{y=y.insert(_,A)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,y,x,dt()))).next((_=>({batchId:g,changes:k_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ve(s)).next((r=>{let o=Xo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const u=s.collectionGroup;let f=Xo();return this.indexManager.getCollectionParents(e,u).next((g=>de.forEach(g,(y=>{const x=(function(T,A){return new Hl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((_=>{_.forEach(((T,A)=>{f=f.insert(T,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,u,o)))).next((f=>{u.forEach(((y,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,jn.newInvalidDocument(_)))}));let g=Xo();return f.forEach(((y,x)=>{const _=u.get(y);_!==void 0&&ic(_.mutation,x,ss.empty(),Vt.now()),Yd(s,x)&&(g=g.insert(y,x))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return de.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}})(s)),de.resolve()}getNamedQuery(e,s){return de.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:XA(o.bundledQuery),readTime:ci(o.readTime)}})(s)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.overlays=new Bt(Ve.comparator),this.qr=new Map}getOverlay(e,s){return de.resolve(this.overlays.get(s))}getOverlays(e,s){const r=ba();return de.forEach(s,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,u)=>{this.St(e,s,u)})),de.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,s,r){const o=ba(),u=s.length+1,f=new Ve(s.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,x=y.getKey();if(!s.isPrefixOf(x.path))break;x.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return de.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let u=new Bt(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===s&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=ba(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const g=ba(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((x,_)=>g.set(x,_))),!(g.size()>=o)););return de.resolve(g)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new SA(s,r));let u=this.qr.get(s);u===void 0&&(u=dt(),this.qr.set(s,u)),this.qr.set(s,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Qr=new un(pn.$r),this.Ur=new un(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new pn(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new pn(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new Ve(new kt([])),r=new pn(s,e),o=new pn(s,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ve(new kt([])),r=new pn(s,e),o=new pn(s,e+1);let u=dt();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const s=new pn(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ve.comparator(e.key,s.key)||ut(e.Yr,s.Yr)}static Kr(e,s){return ut(e.Yr,s.Yr)||Ve.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new un(pn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new NA(u,s,r,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new pn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,s){return de.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),u=o<0?0:o;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?gp:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new pn(s,0),o=new pn(s,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new un(ut);return s.forEach((o=>{const u=new pn(o,0),f=new pn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{r=r.add(g.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let u=r;Ve.isDocumentKey(u)||(u=u.child(""));const f=new pn(new Ve(u),0);let g=new un(ut);return this.Zr.forEachWhile((y=>{const x=y.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(g=g.add(y.Yr)),!0)}),f),de.resolve(this.ti(g))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){xt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(s.mutations,(o=>{const u=new pn(o.key,s.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new pn(s,0),o=this.Zr.firstAfterOrEqual(r);return de.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.ri=e,this.docs=(function(){return new Bt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return de.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(s))}getEntries(e,s){let r=Ui();return s.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():jn.newInvalidDocument(o))})),de.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let u=Ui();const f=s.path,g=new Ve(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:x,value:{document:_}}=y.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||zS(US(_),r)<=0||(o.has(_.key)||Yd(s,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,s,r,o){Ge(9500)}ii(e,s){return de.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new hj(this)}getSize(e){return de.resolve(this.size)}}class hj extends ij{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),de.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.persistence=e,this.si=new Ia((s=>vp(s)),bp),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Sp,this.targetCount=0,this.ai=Ml.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),de.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Ml(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,de.resolve()}updateTargetData(e,s){return this.Pr(s),de.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,s,r){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=s&&r.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),de.waitFor(u).next((()=>o))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return de.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),de.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),de.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return de.resolve(r)}containsKey(e,s){return de.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,s){this.ui={},this.overlays={},this.ci=new qd(0),this.li=!1,this.li=!0,this.hi=new cj,this.referenceDelegate=e(this),this.Pi=new fj(this),this.indexManager=new WA,this.remoteDocumentCache=(function(o){return new dj(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QA(s),this.Ii=new lj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new oj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new uj(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){Re("MemoryPersistence","Starting transaction:",e);const o=new mj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,s){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class mj extends qS{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ri=new Sp,this.Vi=null}static mi(e){return new Ap(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),de.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),de.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const o=Ve.fromPath(r);return this.gi(e,o).next((u=>{u||s.removeEntry(o,Ye.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return de.or([()=>de.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Dd{constructor(e,s){this.persistence=e,this.pi=new Ia((r=>GS(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=sj(this,s)}static mi(e,s){return new Dd(e,s)}Ei(){}di(e){return de.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return de.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?de.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((g=>{g||(r++,u.removeEntry(f,Ye.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=hd(e.data.value)),s}br(e,s,r){return de.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return de.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=dt(),o=dt();for(const u of s.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jp(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return H2()?8:HS(Cn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const u={result:null};return this.ys(e,s).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,s,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new pj;return this.Ss(e,s,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,s,f,g.size)}))})).next((()=>u.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(bl()<=ct.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",_l(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(bl()<=ct.DEBUG&&Re("QueryEngine","Query:",_l(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(bl()<=ct.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",_l(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(s))):de.resolve())}ys(e,s){if(_v(s))return de.resolve(null);let r=oi(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=qm(s,null,"F"),r=oi(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=dt(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,r).next((y=>{const x=this.Ds(s,g);return this.Cs(s,x,f,y.readTime)?this.ys(e,qm(s,null,"F")):this.vs(e,x,s,y)}))))})))))}ws(e,s,r,o){return _v(s)||o.isEqual(Ye.min())?de.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(s,u);return this.Cs(s,f,r,o)?de.resolve(null):(bl()<=ct.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_l(s)),this.vs(e,f,s,PS(o,oc)).next((g=>g)))}))}Ds(e,s){let r=new un(R_(e));return s.forEach(((o,u)=>{Yd(e,u)&&(r=r.add(u))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const u=e.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,s,r){return bl()<=ct.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",_l(s)),this.ps.getDocumentsMatchingQuery(e,s,Or.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(s.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="LocalStore",yj=3e8;class xj{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Bt(ut),this.xs=new Ia((u=>vp(u)),bp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function vj(i,e,s,r){return new xj(i,e,s,r)}async function J_(i,e){const s=$e(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let y=dt();for(const x of o){f.push(x.batchId);for(const _ of x.mutations)y=y.add(_.key)}for(const x of u){g.push(x.batchId);for(const _ of x.mutations)y=y.add(_.key)}return s.localDocuments.getDocuments(r,y).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:g})))}))}))}function bj(i,e){const s=$e(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,x,_){const T=x.batch,A=T.keys();let q=de.resolve();return A.forEach((W=>{q=q.next((()=>_.getEntry(y,W))).next((J=>{const U=x.docVersions.get(W);xt(U!==null,48541),J.version.compareTo(U)<0&&(T.applyToRemoteDocument(J,x),J.isValidDocument()&&(J.setReadTime(x.commitVersion),_.addEntry(J)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(y,T)))})(s,r,e,u).next((()=>u.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let y=dt();for(let x=0;x<g.mutationResults.length;++x)g.mutationResults[x].transformResults.length>0&&(y=y.add(g.batch.mutations[x].key));return y})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function e1(i){const e=$e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function _j(i,e){const s=$e(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const g=[];e.targetChanges.forEach(((_,T)=>{const A=o.get(T);if(!A)return;g.push(s.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>s.Pi.addMatchingKeys(u,_.addedDocuments,T))));let q=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?q=q.withResumeToken(Tn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,r)),o=o.insert(T,q),(function(J,U,ie){return J.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=yj?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(A,q,_)&&g.push(s.Pi.updateTargetData(u,q))}));let y=Ui(),x=dt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(s.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(wj(u,f,e.documentUpdates).next((_=>{y=_.ks,x=_.qs}))),!r.isEqual(Ye.min())){const _=s.Pi.getLastRemoteSnapshotVersion(u).next((T=>s.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(_)}return de.waitFor(g).next((()=>f.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,y,x))).next((()=>y))})).then((u=>(s.Ms=o,u)))}function wj(i,e,s){let r=dt(),o=dt();return s.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Ui();return s.forEach(((g,y)=>{const x=u.get(g);y.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Ye.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!x.isValidDocument()||y.version.compareTo(x.version)>0||y.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):Re(Cp,"Ignoring outdated watch update for ",g,". Current version:",x.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function Ej(i,e){const s=$e(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=gp),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Tj(i,e){const s=$e(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((u=>u?(o=u,de.resolve(o)):s.Pi.allocateTargetId(r).next((f=>(o=new jr(e,f,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Km(i,e,s){const r=$e(i),o=r.Ms.get(e),u=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ql(f))throw f;Re(Cp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Mv(i,e,s){const r=$e(i);let o=Ye.min(),u=dt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,x,_){const T=$e(y),A=T.xs.get(_);return A!==void 0?de.resolve(T.Ms.get(A)):T.Pi.getTargetData(x,_)})(r,f,oi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,s?o:Ye.min(),s?u:dt()))).next((g=>(Nj(r,uA(e),g),{documents:g,Qs:u})))))}function Nj(i,e,s){let r=i.Os.get(e)||Ye.min();s.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class Ov{constructor(){this.activeTargetIds=gA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sj{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Lv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(Vv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(Vv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;function $m(){return id===null?id=(function(){return 268435456+Math.round(2147483648*Math.random())})():id++,"0x"+id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,u){const f=$m(),g=this.zo(e,s.toUriEncodedString());Re(xm,`Sending RPC '${e}' ${f}:`,g,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:x}=new URL(g),_=Ll(x);return this.Jo(e,g,y,r,_).then((T=>(Re(xm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw Rl(xm,`RPC '${e}' ${f} failed with error: `,T,"url: ",g,"request:",r),T}))}Ho(e,s,r,o,u,f){return this.Go(e,s,r,o,u)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,s){const r=jj[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class Ij extends Cj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,u){const f=$m();return new Promise(((g,y)=>{const x=new s_;x.setWithCredentials(!0),x.listenOnce(i_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case dd.NO_ERROR:const T=x.getResponseJson();Re(Sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),g(T);break;case dd.TIMEOUT:Re(Sn,`RPC '${e}' ${f} timed out`),y(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:const A=x.getStatus();if(Re(Sn,`RPC '${e}' ${f} failed with status:`,A,"response text:",x.getResponseText()),A>0){let q=x.getResponseJson();Array.isArray(q)&&(q=q[0]);const W=q?.error;if(W&&W.status&&W.message){const J=(function(ie){const ne=ie.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ne)>=0?ne:ce.UNKNOWN})(W.status);y(new Ae(J,W.message))}else y(new Ae(ce.UNKNOWN,"Server responded with status "+x.getStatus()))}else y(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Re(Sn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Re(Sn,`RPC '${e}' ${f} sending request:`,o),x.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=$m(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=l_(),g=a_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(y.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,s,r),y.encodeInitMessageHeaders=!0;const _=u.join("");Re(Sn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const T=f.createWebChannel(_,y);this.I_(T);let A=!1,q=!1;const W=new Rj({Yo:U=>{q?Re(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(Re(Sn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),Re(Sn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),J=(U,ie,ne)=>{U.listen(ie,(ge=>{try{ne(ge)}catch(he){setTimeout((()=>{throw he}),0)}}))};return J(T,Qo.EventType.OPEN,(()=>{q||(Re(Sn,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),J(T,Qo.EventType.CLOSE,(()=>{q||(q=!0,Re(Sn,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(T))})),J(T,Qo.EventType.ERROR,(U=>{q||(q=!0,Rl(Sn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),W.a_(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))})),J(T,Qo.EventType.MESSAGE,(U=>{if(!q){const ie=U.data[0];xt(!!ie,16349);const ne=ie,ge=ne?.error||ne[0]?.error;if(ge){Re(Sn,`RPC '${e}' stream ${o} received error:`,ge);const he=ge.status;let ve=(function(S){const j=an[S];if(j!==void 0)return B_(j)})(he),fe=ge.message;ve===void 0&&(ve=ce.INTERNAL,fe="Unknown error status: "+he+" with message "+ge.message),q=!0,W.a_(new Ae(ve,fe)),T.close()}else Re(Sn,`RPC '${e}' stream ${o} received:`,ie),W.u_(ie)}})),J(g,r_.STAT_EVENT,(U=>{U.stat===Om.PROXY?Re(Sn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Om.NOPROXY&&Re(Sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(i){return new OA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,s,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class n1{constructor(e,s,r,o,u,f,g,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t1(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ce.RESOURCE_EXHAUSTED?(Pi(s.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(Pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Re(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kj extends n1{constructor(e,s,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=PA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ye.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ye.min():f.readTime?ci(f.readTime):Ye.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=Ym(this.serializer),s.addTarget=(function(u,f){let g;const y=f.target;if(g=zm(y)?{documents:BA(u,y)}:{query:qA(u,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=F_(u,f.resumeToken);const x=Hm(u,f.expectedCount);x!==null&&(g.expectedCount=x)}else if(f.snapshotVersion.compareTo(Ye.min())>0){g.readTime=kd(u,f.snapshotVersion.toTimestamp());const x=Hm(u,f.expectedCount);x!==null&&(g.expectedCount=x)}return g})(this.serializer,e);const r=FA(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=Ym(this.serializer),s.removeTarget=e,this.q_(s)}}class Dj extends n1{constructor(e,s,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=zA(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=Ym(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>UA(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{}class Oj extends Mj{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Fm(s,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ce.UNKNOWN,u.toString())}))}Ho(e,s,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Fm(s,r),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ae(ce.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Vj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pi(s),this.aa=!1):Re("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class Lj{constructor(e,s,r,o,u){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ka(this)&&(Re(Ca,"Restarting streams for network reachability change."),await(async function(y){const x=$e(y);x.Ea.add(4),await Tc(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Zd(x)})(this))}))})),this.Ra=new Vj(r,o)}}async function Zd(i){if(ka(i))for(const e of i.da)await e(!0)}async function Tc(i){for(const e of i.da)await e(!1)}function s1(i,e){const s=$e(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Dp(s)?kp(s):Fl(s).O_()&&Ip(s,e))}function Rp(i,e){const s=$e(i),r=Fl(s);s.Ia.delete(e),r.O_()&&i1(s,e),s.Ia.size===0&&(r.O_()?r.L_():ka(s)&&s.Ra.set("Unknown"))}function Ip(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Fl(i).Y_(e)}function i1(i,e){i.Va.Ue(e),Fl(i).Z_(e)}function kp(i){i.Va=new IA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Fl(i).start(),i.Ra.ua()}function Dp(i){return ka(i)&&!Fl(i).x_()&&i.Ia.size>0}function ka(i){return $e(i).Ea.size===0}function r1(i){i.Va=void 0}async function Pj(i){i.Ra.set("Online")}async function Uj(i){i.Ia.forEach(((e,s)=>{Ip(i,e)}))}async function zj(i,e){r1(i),Dp(i)?(i.Ra.ha(e),kp(i)):i.Ra.set("Unknown")}async function Bj(i,e,s){if(i.Ra.set("Online"),e instanceof H_&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(r){Re(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Md(i,r)}else if(e instanceof pd?i.Va.Ze(e):e instanceof q_?i.Va.st(e):i.Va.tt(e),!s.isEqual(Ye.min()))try{const r=await e1(i.localStore);s.compareTo(r)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((y,x)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(y.resumeToken,f))}})),g.targetMismatches.forEach(((y,x)=>{const _=u.Ia.get(y);if(!_)return;u.Ia.set(y,_.withResumeToken(Tn.EMPTY_BYTE_STRING,_.snapshotVersion)),i1(u,y);const T=new jr(_.target,y,x,_.sequenceNumber);Ip(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(i,s)}catch(r){Re(Ca,"Failed to raise snapshot:",r),await Md(i,r)}}async function Md(i,e,s){if(!ql(e))throw e;i.Ea.add(1),await Tc(i),i.Ra.set("Offline"),s||(s=()=>e1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Re(Ca,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Zd(i)}))}function a1(i,e){return e().catch((s=>Md(i,s,e)))}async function Jd(i){const e=$e(i),s=Ur(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gp;for(;qj(e);)try{const o=await Ej(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,Hj(e,o)}catch(o){await Md(e,o)}l1(e)&&o1(e)}function qj(i){return ka(i)&&i.Ta.length<10}function Hj(i,e){i.Ta.push(e);const s=Ur(i);s.O_()&&s.X_&&s.ea(e.mutations)}function l1(i){return ka(i)&&!Ur(i).x_()&&i.Ta.length>0}function o1(i){Ur(i).start()}async function Fj(i){Ur(i).ra()}async function Gj(i){const e=Ur(i);for(const s of i.Ta)e.ea(s.mutations)}async function Yj(i,e,s){const r=i.Ta.shift(),o=Ep.from(r,e,s);await a1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Jd(i)}async function Kj(i,e){e&&Ur(i).X_&&await(async function(r,o){if((function(f){return jA(f)&&f!==ce.ABORTED})(o.code)){const u=r.Ta.shift();Ur(r).B_(),await a1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Jd(r)}})(i,e),l1(i)&&o1(i)}async function Uv(i,e){const s=$e(i);s.asyncQueue.verifyOperationInProgress(),Re(Ca,"RemoteStore received new credentials");const r=ka(s);s.Ea.add(3),await Tc(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Zd(s)}async function $j(i,e){const s=$e(i);e?(s.Ea.delete(2),await Zd(s)):e||(s.Ea.add(2),await Tc(s),s.Ra.set("Unknown"))}function Fl(i){return i.ma||(i.ma=(function(s,r,o){const u=$e(s);return u.sa(),new kj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Pj.bind(null,i),t_:Uj.bind(null,i),r_:zj.bind(null,i),H_:Bj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Dp(i)?kp(i):i.Ra.set("Unknown")):(await i.ma.stop(),r1(i))}))),i.ma}function Ur(i){return i.fa||(i.fa=(function(s,r,o){const u=$e(s);return u.sa(),new Dj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Fj.bind(null,i),r_:Kj.bind(null,i),ta:Gj.bind(null,i),na:Yj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Jd(i)):(await i.fa.stop(),i.Ta.length>0&&(Re(Ca,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,s,r,o,u){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,u){const f=Date.now()+r,g=new Mp(e,s,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(i,e){if(Pi("AsyncQueue",`${e}: ${i}`),ql(i))return new Ae(ce.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Ve.comparator(s.key,r.key):(s,r)=>Ve.comparator(s.key,r.key),this.keyedMap=Xo(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.ga=new Bt(Ve.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class Ol{constructor(e,s,r,o,u,f,g,y,x){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=x}static fromInitialDocuments(e,s,r,o,u){const f=[];return s.forEach((g=>{f.push({type:0,doc:g})})),new Ol(e,s,jl.emptySet(s),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Xj{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=$e(s),u=o.queries;o.queries=Bv(),u.forEach(((f,g)=>{for(const y of g.Sa)y.onError(r)}))})(this,new Ae(ce.ABORTED,"Firestore shutting down"))}}function Bv(){return new Ia((i=>C_(i)),Gd)}async function c1(i,e){const s=$e(i);let r=3;const o=e.query;let u=s.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new Qj,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const g=Op(f,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(g)}s.queries.set(o,u),u.Sa.push(e),e.va(s.onlineState),u.wa&&e.Fa(u.wa)&&Vp(s)}async function u1(i,e){const s=$e(i),r=e.query;let o=3;const u=s.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function Wj(i,e){const s=$e(i);let r=!1;for(const o of e){const u=o.query,f=s.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(r=!0);f.wa=o}}r&&Vp(s)}function Zj(i,e,s){const r=$e(i),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(s);r.queries.delete(e)}function Vp(i){i.Ca.forEach((e=>{e.next()}))}var Qm,qv;(qv=Qm||(Qm={})).Ma="default",qv.Cache="cache";class d1{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.key=e}}class f1{constructor(e){this.key=e}}class Jj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=R_(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new zv,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,f=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const A=o.get(_),q=Yd(this.query,T)?T:null,W=!!A&&this.mutatedKeys.has(A.key),J=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let U=!1;A&&q?A.data.isEqual(q.data)?W!==J&&(r.track({type:3,doc:q}),U=!0):this.su(A,q)||(r.track({type:2,doc:q}),U=!0,(y&&this.eu(q,y)>0||x&&this.eu(q,x)<0)&&(g=!0)):!A&&q?(r.track({type:0,doc:q}),U=!0):A&&!q&&(r.track({type:1,doc:A}),U=!0,(y||x)&&(g=!0)),U&&(q?(f=f.add(q),u=J?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:g,mutatedKeys:u}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,T)=>(function(q,W){const J=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:U})}};return J(q)-J(W)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(r),o=o??!1;const g=s&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,x=y!==this.Za;return this.Za=y,f.length!==0||x?{snapshot:new Ol(this.query,e.tu,u,f,e.mutatedKeys,y===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new f1(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new h1(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=dt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lp="SyncEngine";class e4{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class t4{constructor(e){this.key=e,this.hu=!1}}class n4{constructor(e,s,r,o,u,f){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ia((g=>C_(g)),Gd),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Ve.comparator),this.Au=new Map,this.Ru=new Sp,this.Vu={},this.mu=new Map,this.fu=Ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s4(i,e,s=!0){const r=v1(i);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await m1(r,e,s,!0),o}async function i4(i,e){const s=v1(i);await m1(s,e,!0,!1)}async function m1(i,e,s,r){const o=await Tj(i.localStore,oi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,s);let g;return r&&(g=await r4(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&s&&s1(i.remoteStore,o),g}async function r4(i,e,s,r,o){i.pu=(T,A,q)=>(async function(J,U,ie,ne){let ge=U.view.ru(ie);ge.Cs&&(ge=await Mv(J.localStore,U.query,!1).then((({documents:C})=>U.view.ru(C,ge))));const he=ne&&ne.targetChanges.get(U.targetId),ve=ne&&ne.targetMismatches.get(U.targetId)!=null,fe=U.view.applyChanges(ge,J.isPrimaryClient,he,ve);return Fv(J,U.targetId,fe.au),fe.snapshot})(i,T,A,q);const u=await Mv(i.localStore,e,!0),f=new Jj(e,u.Qs),g=f.ru(u.documents),y=Ec.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),x=f.applyChanges(g,i.isPrimaryClient,y);Fv(i,s,x.au);const _=new e4(e,s,f);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),x.snapshot}async function a4(i,e,s){const r=$e(i),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Gd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Km(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Rp(r.remoteStore,o.targetId),Xm(r,o.targetId)})).catch(Bl)):(Xm(r,o.targetId),await Km(r.localStore,o.targetId,!0))}async function l4(i,e){const s=$e(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Rp(s.remoteStore,r.targetId))}async function o4(i,e,s){const r=p4(i);try{const o=await(function(f,g){const y=$e(f),x=Vt.now(),_=g.reduce(((q,W)=>q.add(W.key)),dt());let T,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let W=Ui(),J=dt();return y.Ns.getEntries(q,_).next((U=>{W=U,W.forEach(((ie,ne)=>{ne.isValidDocument()||(J=J.add(ie))}))})).next((()=>y.localDocuments.getOverlayedDocuments(q,W))).next((U=>{T=U;const ie=[];for(const ne of g){const ge=EA(ne,T.get(ne.key).overlayedDocument);ge!=null&&ie.push(new Hr(ne.key,ge,__(ge.value.mapValue),Dn.exists(!0)))}return y.mutationQueue.addMutationBatch(q,x,ie,g)})).next((U=>{A=U;const ie=U.applyToLocalDocumentSet(T,J);return y.documentOverlayCache.saveOverlays(q,U.batchId,ie)}))})).then((()=>({batchId:A.batchId,changes:k_(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,g,y){let x=f.Vu[f.currentUser.toKey()];x||(x=new Bt(ut)),x=x.insert(g,y),f.Vu[f.currentUser.toKey()]=x})(r,o.batchId,s),await Nc(r,o.changes),await Jd(r.remoteStore)}catch(o){const u=Op(o,"Failed to persist write");s.reject(u)}}async function p1(i,e){const s=$e(i);try{const r=await _j(s.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=s.Au.get(u);f&&(xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?xt(f.hu,14607):o.removedDocuments.size>0&&(xt(f.hu,42227),f.hu=!1))})),await Nc(s,r,e)}catch(r){await Bl(r)}}function Hv(i,e,s){const r=$e(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const y=$e(f);y.onlineState=g;let x=!1;y.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(g)&&(x=!0)})),x&&Vp(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c4(i,e,s){const r=$e(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new Bt(Ve.comparator);f=f.insert(u,jn.newNoDocument(u,Ye.min()));const g=dt().add(u),y=new Xd(Ye.min(),new Map,new Bt(ut),f,g);await p1(r,y),r.du=r.du.remove(u),r.Au.delete(e),Pp(r)}else await Km(r.localStore,e,!1).then((()=>Xm(r,e,s))).catch(Bl)}async function u4(i,e){const s=$e(i),r=e.batch.batchId;try{const o=await bj(s.localStore,e);y1(s,r,null),g1(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(s,o)}catch(o){await Bl(o)}}async function d4(i,e,s){const r=$e(i);try{const o=await(function(f,g){const y=$e(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return y.mutationQueue.lookupMutationBatch(x,g).next((T=>(xt(T!==null,37113),_=T.keys(),y.mutationQueue.removeMutationBatch(x,T)))).next((()=>y.mutationQueue.performConsistencyCheck(x))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(x,_,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>y.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);y1(r,e,s),g1(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await Nc(r,o)}catch(o){await Bl(o)}}function g1(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function y1(i,e,s){const r=$e(i);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(s?u.reject(s):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Xm(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||x1(i,r)}))}function x1(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(Rp(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),Pp(i))}function Fv(i,e,s){for(const r of s)r instanceof h1?(i.Ru.addReference(r.key,e),h4(i,r)):r instanceof f1?(Re(Lp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||x1(i,r.key)):Ge(19791,{wu:r})}function h4(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(Re(Lp,"New document in limbo: "+s),i.Eu.add(r),Pp(i))}function Pp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new Ve(kt.fromString(e)),r=i.fu.next();i.Au.set(r,new t4(s)),i.du=i.du.insert(s,r),s1(i.remoteStore,new jr(oi(_p(s.path)),r,"TargetPurposeLimboResolution",qd.ce))}}async function Nc(i,e,s){const r=$e(i),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,y)=>{f.push(r.pu(y,e,s).then((x=>{if((x||s)&&r.isPrimaryClient){const _=x?!x.fromCache:s?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(x){o.push(x);const _=jp.As(y.targetId,x);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(y,x){const _=$e(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>de.forEach(x,(A=>de.forEach(A.Es,(q=>_.persistence.referenceDelegate.addReference(T,A.targetId,q))).next((()=>de.forEach(A.ds,(q=>_.persistence.referenceDelegate.removeReference(T,A.targetId,q)))))))))}catch(T){if(!ql(T))throw T;Re(Cp,"Failed to update sequence numbers: "+T)}for(const T of x){const A=T.targetId;if(!T.fromCache){const q=_.Ms.get(A),W=q.snapshotVersion,J=q.withLastLimboFreeSnapshotVersion(W);_.Ms=_.Ms.insert(A,J)}}})(r.localStore,u))}async function f4(i,e){const s=$e(i);if(!s.currentUser.isEqual(e)){Re(Lp,"User change. New user:",e.toKey());const r=await J_(s.localStore,e);s.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new Ae(ce.CANCELLED,f))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(s,r.Ls)}}function m4(i,e){const s=$e(i),r=s.Au.get(e);if(r&&r.hu)return dt().add(r.key);{let o=dt();const u=s.Iu.get(e);if(!u)return o;for(const f of u){const g=s.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function v1(i){const e=$e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=p1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c4.bind(null,e),e.Pu.H_=Wj.bind(null,e.eventManager),e.Pu.yu=Zj.bind(null,e.eventManager),e}function p4(i){const e=$e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d4.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return vj(this.persistence,new gj,e.initialUser,this.serializer)}Cu(e){return new Z_(Ap.mi,this.serializer)}Du(e){return new Sj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class g4 extends Od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){xt(this.persistence.referenceDelegate instanceof Dd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tj(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new Z_((r=>Dd.mi(r,s)),this.serializer)}}class Wm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,this.syncEngine),await $j(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xj})()}createDatastore(e){const s=Wd(e.databaseInfo.databaseId),r=(function(u){return new Ij(u)})(e.databaseInfo);return(function(u,f,g,y){return new Oj(u,f,g,y)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,u,f,g){return new Lj(r,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(s=>Hv(this.syncEngine,s,0)),(function(){return Lv.v()?new Lv:new Aj})())}createSyncEngine(e,s){return(function(o,u,f,g,y,x,_){const T=new n4(o,u,f,g,y,x);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=$e(s);Re(Ca,"RemoteStore shutting down."),r.Ea.add(5),await Tc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class y4{constructor(e,s,r,o,u){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=An.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Re(zr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Re(zr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Op(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bm(i,e){i.asyncQueue.verifyOperationInProgress(),Re(zr,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await J_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Gv(i,e){i.asyncQueue.verifyOperationInProgress();const s=await x4(i);Re(zr,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Uv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Uv(e.remoteStore,o))),i._onlineComponents=e}async function x4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re(zr,"Using user provided OfflineComponentProvider");try{await bm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Rl("Error using user provided cache. Falling back to memory cache: "+s),await bm(i,new Od)}}else Re(zr,"Using default OfflineComponentProvider"),await bm(i,new g4(void 0));return i._offlineComponents}async function _1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re(zr,"Using user provided OnlineComponentProvider"),await Gv(i,i._uninitializedComponentsProvider._online)):(Re(zr,"Using default OnlineComponentProvider"),await Gv(i,new Wm))),i._onlineComponents}function v4(i){return _1(i).then((e=>e.syncEngine))}async function Zm(i){const e=await _1(i),s=e.eventManager;return s.onListen=s4.bind(null,e.syncEngine),s.onUnlisten=a4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=i4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=l4.bind(null,e.syncEngine),s}function b4(i,e,s={}){const r=new Dr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,x){const _=new b1({next:A=>{_.Nu(),f.enqueueAndForget((()=>u1(u,T))),A.fromCache&&y.source==="server"?x.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),T=new d1(g,_,{includeMetadataChanges:!0,qa:!0});return c1(u,T)})(await Zm(i),i.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="firestore.googleapis.com",Kv=!0;class $v{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E1,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JA)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AS;switch(r.type){case"firstParty":return new IS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Yv.get(s);r&&(Re("ComponentProvider","Removing Datastore"),Yv.delete(s),r.terminate())})(this),Promise.resolve()}}function _4(i,e,s,r={}){i=is(i,eh);const o=Ll(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${s}`;o&&(mb(`https://${g}`),pb("Firestore",!0)),u.host!==E1&&u.host!==g&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:r};if(!Ta(y,f)&&(i._setSettings(y),r.mockUserToken)){let x,_;if(typeof r.mockUserToken=="string")x=r.mockUserToken,_=An.MOCK_USER;else{x=M2(r.mockUserToken,i._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new An(T)}i._authCredentials=new jS(new c_(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class Qt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(_c(s,Qt._jsonSchema))return new Qt(e,r||null,new Ve(kt.fromString(s.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:on("string",Qt._jsonSchemaVersion),referencePath:on("string")};class Mr extends Fr{constructor(e,s,r){super(e,s,_p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ve(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function wt(i,e,...s){if(i=Xt(i),u_("collection","path",e),i instanceof eh){const r=kt.fromString(e,...s);return lv(r),new Mr(i,null,r)}{if(!(i instanceof Qt||i instanceof Mr))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(kt.fromString(e,...s));return lv(r),new Mr(i.firestore,null,r)}}function Lt(i,e,...s){if(i=Xt(i),arguments.length===1&&(e=pp.newId()),u_("doc","path",e),i instanceof eh){const r=kt.fromString(e,...s);return av(r),new Qt(i,null,new Ve(r))}{if(!(i instanceof Qt||i instanceof Mr))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(kt.fromString(e,...s));return av(r),new Qt(i.firestore,i instanceof Mr?i.converter:null,new Ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="AsyncQueue";class Xv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t1(this,"async_queue_retry"),this._c=()=>{const r=vm();r&&Re(Qv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=vm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=vm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;Re(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",Wv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Mp.createAndSchedule(this,e,s,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ge(47125,{Pc:Wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Wv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class zi extends eh{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Xv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xv(e),this._firestoreClient=void 0,await e}}}function w4(i,e){const s=typeof i=="object"?i:vb(),r=typeof i=="string"?i:Ad,o=rp(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=k2("firestore");u&&_4(o,...u)}return o}function th(i){if(i._terminated)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||E4(i),i._firestoreClient}function E4(i){const e=i._freezeSettings(),s=(function(o,u,f,g){return new $S(o,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,w1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new y4(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(Tn.fromBase64String(e))}catch(s){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new bs(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,bs._jsonSchema))return bs.fromBase64String(e.bytes)}}bs._jsonSchemaVersion="firestore/bytes/1.0",bs._jsonSchema={type:on("string",bs._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(_c(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:on("string",ui._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new di(e.vectorValues);throw new Ae(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:on("string",di._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=/^__.*__$/;class N4{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,s,this.fieldTransforms):new wc(e,this.data,s,this.fieldTransforms)}}class T1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Hr(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function N1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:i})}}class zp{constructor(e,s,r,o,u,f){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N1(this.Ac)&&T4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class S4{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Wd(e)}Cc(e,s,r,o=!1){return new zp({Ac:e,methodName:s,Dc:r,path:wn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ac(i){const e=i._freezeSettings(),s=Wd(i._databaseId);return new S4(i._databaseId,!!e.ignoreUndefinedProperties,s)}function Bp(i,e,s,r,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,s,o);qp("Data must be an object, but it was:",f,r);const g=j1(r,f);let y,x;if(u.merge)y=new ss(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const A=Jm(e,T,s);if(!f.contains(A))throw new Ae(ce.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);R1(_,A)||_.push(A)}y=new ss(_),x=f.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,x=f.fieldTransforms;return new N4(new Hn(g),y,x)}class nh extends Up{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function S1(i,e,s,r){const o=i.Cc(1,e,s);qp("Data must be an object, but it was:",o,r);const u=[],f=Hn.empty();qr(r,((y,x)=>{const _=Hp(e,y,s);x=Xt(x);const T=o.yc(_);if(x instanceof nh)u.push(_);else{const A=jc(x,T);A!=null&&(u.push(_),f.set(_,A))}}));const g=new ss(u);return new T1(f,g,o.fieldTransforms)}function A1(i,e,s,r,o,u){const f=i.Cc(1,e,s),g=[Jm(e,r,s)],y=[o];if(u.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)g.push(Jm(e,u[A])),y.push(u[A+1]);const x=[],_=Hn.empty();for(let A=g.length-1;A>=0;--A)if(!R1(x,g[A])){const q=g[A];let W=y[A];W=Xt(W);const J=f.yc(q);if(W instanceof nh)x.push(q);else{const U=jc(W,J);U!=null&&(x.push(q),_.set(q,U))}}const T=new ss(x);return new T1(_,T,f.fieldTransforms)}function A4(i,e,s,r=!1){return jc(s,i.Cc(r?4:3,e))}function jc(i,e){if(C1(i=Xt(i)))return qp("Unsupported field value:",e,i),j1(i,e);if(i instanceof Up)return(function(r,o){if(!N1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const g of r){let y=jc(g,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,o){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Vt.fromDate(r);return{timestampValue:kd(o.serializer,u)}}if(r instanceof Vt){const u=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(o.serializer,u)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bs)return{bytesValue:F_(o.serializer,r._byteString)};if(r instanceof Qt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Np(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof di)return(function(f,g){return{mapValue:{fields:{[v_]:{stringValue:b_},[jd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw g.Sc("VectorValues must only contain numeric values.");return wp(g.serializer,x)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Bd(r)}`)})(i,e)}function j1(i,e){const s={};return f_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(i,((r,o)=>{const u=jc(o,e.mc(r));u!=null&&(s[r]=u)})),{mapValue:{fields:s}}}function C1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Vt||i instanceof ui||i instanceof bs||i instanceof Qt||i instanceof Up||i instanceof di)}function qp(i,e,s){if(!C1(s)||!d_(s)){const r=Bd(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Jm(i,e,s){if((e=Xt(e))instanceof Sc)return e._internalPath;if(typeof e=="string")return Hp(i,e);throw Vd("Field path arguments must be of type string or ",i,!1,void 0,s)}const j4=new RegExp("[~\\*/\\[\\]]");function Hp(i,e,s){if(e.search(j4)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new Sc(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Vd(i,e,s,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;s&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Ae(ce.INVALID_ARGUMENT,g+i+y)}function R1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,s,r,o,u){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(sh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class C4 extends I1{data(){return super.data()}}function sh(i,e){return typeof e=="string"?Hp(i,e):e instanceof Sc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fp{}class D1 extends Fp{}function Mn(i,e,...s){let r=[];e instanceof Fp&&r.push(e),r=r.concat(s),(function(u){const f=u.filter((y=>y instanceof Gp)).length,g=u.filter((y=>y instanceof ih)).length;if(f>1||f>0&&g>0)throw new Ae(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class ih extends D1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new ih(e,s,r)}_apply(e){const s=this._parse(e);return M1(e._query,s),new Fr(e.firestore,e.converter,Bm(e._query,s))}_parse(e){const s=Ac(e.firestore);return(function(u,f,g,y,x,_,T){let A;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){eb(T,_);const W=[];for(const J of T)W.push(Jv(y,u,J));A={arrayValue:{values:W}}}else A=Jv(y,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||eb(T,_),A=A4(g,f,T,_==="in"||_==="not-in");return ln.create(x,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function R4(i,e,s){const r=e,o=sh("where",i);return ih._create(o,r,s)}class Gp extends Fp{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Gp(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Us.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const y of g)M1(f,y),f=Bm(f,y)})(e._query,s),new Fr(e.firestore,e.converter,Bm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends D1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Yp(e,s)}_apply(e){const s=(function(o,u,f){if(o.startAt!==null)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hc(u,f)})(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Hl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function Fn(i,e="asc"){const s=e,r=sh("orderBy",i);return Yp._create(r,s)}function Jv(i,e,s){if(typeof(s=Xt(s))=="string"){if(s==="")throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j_(e)&&s.indexOf("/")!==-1)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(kt.fromString(s));if(!Ve.isDocumentKey(r))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pv(i,new Ve(r))}if(s instanceof Qt)return pv(i,s._key);throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(s)}.`)}function eb(i,e){if(!Array.isArray(i)||i.length===0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M1(i,e){const s=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Ae(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class I4{convertValue(e,s="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return qr(e,((o,u)=>{r[o]=this.convertValue(u,s)})),r}convertVectorValue(e){const s=e.fields?.[jd].arrayValue?.values?.map((r=>$t(r.doubleValue)));return new di(s)}convertGeoPoint(e){return new ui($t(e.latitude),$t(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Fd(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const s=Vr(e);return new Vt(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=kt.fromString(e);xt(X_(r),9688,{name:e});const o=new uc(r.get(1),r.get(3)),u=new Ve(r.popFirst(5));return o.isEqual(s)||Pi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(i,e,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(e,s):i.toFirestore(e):e,r}class Zo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends I1{constructor(e,s,r,o,u,f){super(e,s,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=_a._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}_a._jsonSchemaVersion="firestore/documentSnapshot/1.0",_a._jsonSchema={type:on("string",_a._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class gd extends _a{data(e={}){return super.data(e)}}class wa{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Zo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new gd(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const y=new gd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Zo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new gd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Zo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,_=-1;return g.type!==0&&(x=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),_=f.indexOf(g.doc.key)),{type:k4(g.type),doc:y,oldIndex:x,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function k4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:i})}}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:on("string",wa._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class $p extends I4{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,s)}}function D4(i){i=is(i,Fr);const e=is(i.firestore,zi),s=th(e),r=new $p(e);return k1(i._query),b4(s,i._query).then((o=>new wa(e,r,i,o)))}function M4(i,e,s){i=is(i,Qt);const r=is(i.firestore,zi),o=Kp(i.converter,e,s);return Cc(r,[Bp(Ac(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,Dn.none())])}function rs(i,e,s,...r){i=is(i,Qt);const o=is(i.firestore,zi),u=Ac(o);let f;return f=typeof(e=Xt(e))=="string"||e instanceof Sc?A1(u,"updateDoc",i._key,e,s,r):S1(u,"updateDoc",i._key,e),Cc(o,[f.toMutation(i._key,Dn.exists(!0))])}function fi(i){return Cc(is(i.firestore,zi),[new Qd(i._key,Dn.none())])}function Ls(i,e){const s=is(i.firestore,zi),r=Lt(i),o=Kp(i.converter,e);return Cc(s,[Bp(Ac(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then((()=>r))}function En(i,...e){i=Xt(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zv(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Zv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,g;if(i instanceof Qt)f=is(i.firestore,zi),g=_p(i._key.path),u={next:y=>{e[r]&&e[r](O4(f,i,y))},error:e[r+1],complete:e[r+2]};else{const y=is(i,Fr);f=is(y.firestore,zi),g=y._query;const x=new $p(f);u={next:_=>{e[r]&&e[r](new wa(f,x,y,_))},error:e[r+1],complete:e[r+2]},k1(i._query)}return(function(x,_,T,A){const q=new b1(A),W=new d1(_,q,T);return x.asyncQueue.enqueueAndForget((async()=>c1(await Zm(x),W))),()=>{q.Nu(),x.asyncQueue.enqueueAndForget((async()=>u1(await Zm(x),W)))}})(th(f),g,o,u)}function Cc(i,e){return(function(r,o){const u=new Dr;return r.asyncQueue.enqueueAndForget((async()=>o4(await v4(r),o,u))),u.promise})(th(i),e)}function O4(i,e,s){const r=s.docs.get(e._key),o=new $p(i);return new _a(i,o,e._key,r,new Zo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,s,r){this._verifyNotCommitted();const o=_m(e,this._firestore),u=Kp(o.converter,s,r),f=Bp(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,Dn.none())),this}update(e,s,r,...o){this._verifyNotCommitted();const u=_m(e,this._firestore);let f;return f=typeof(s=Xt(s))=="string"||s instanceof Sc?A1(this._dataReader,"WriteBatch.update",u._key,s,r,o):S1(this._dataReader,"WriteBatch.update",u._key,s),this._mutations.push(f.toMutation(u._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=_m(e,this._firestore);return this._mutations=this._mutations.concat(new Qd(s._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(i,e){if((i=Xt(i)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(i){return th(i=is(i,zi)),new V4(i,(e=>Cc(i,e)))}(function(e,s=!0){(function(o){zl=o})(Pl),Cl(new Na("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new zi(new CS(r.getProvider("auth-internal")),new kS(f,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(x.options.projectId,_)})(f,o),f);return u={useFetchStreams:s,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ir(nv,sv,e),Ir(nv,sv,"esm2020")})();const P4={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},O1=xb(P4),as=ES(O1),Le=w4(O1),wm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function U4(){const[i,e]=X.useState(!0),[s,r]=X.useState(""),[o,u]=X.useState(""),[f,g]=X.useState(""),[y,x]=X.useState(""),[_,T]=X.useState(!1),A=async J=>{J.preventDefault(),g(""),x(""),T(!0);try{if(i)await oN(as,s,o);else{const ie=(await lN(as,s,o)).user;await M4(Lt(Le,"users",ie.uid),{email:ie.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(U){g(W(U.code))}finally{T(!1)}},q=async()=>{if(!s){g("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await aN(as,s),x("ifre sfrlama balants e-posta adresinize gnderildi."),g("")}catch(J){g(W(J.code))}},W=J=>{switch(J){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+J}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),y&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:y}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:J=>r(J.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:J=>u(J.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:q,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(wm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const Er={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},z4=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(g=>g.value))||100,u=i.map((g,y)=>{const x=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-g.value/o*(e-r*2),T=isNaN(x)?r:x,A=isNaN(_)?e-r:_;return`${T},${A}`}).join(" "),f=`${u} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:u,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((g,y)=>{const x=i.length>1?y/(i.length-1)*(s-r*2)+r:s/2,_=e-r-g.value/o*(e-r*2),T=isNaN(x)?r:x,A=isNaN(_)?e-r:_;return c.jsx("circle",{cx:T,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},y)})]})},rd=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(Er.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function tb({onNavigate:i=()=>{}}){const[e,s]=X.useState(null),[r,o]=X.useState(!0),[u,f]=X.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[g,y]=X.useState([]),[x,_]=X.useState([]),[T,A]=X.useState([]),[q,W]=X.useState([]);return X.useEffect(()=>{const J=as.onAuthStateChanged(he=>{s(he),o(!1)}),U=En(Mn(wt(Le,"siparisler"),Fn("createdAt","desc")),he=>{const ve=he.docs.map(S=>S.data());_(ve.slice(0,5));const fe={};ve.forEach(S=>{const j=S.date?S.date.slice(0,7):"N/A";fe[j]=(fe[j]||0)+1});const C=Object.entries(fe).map(([S,j])=>({label:S,value:j})).sort((S,j)=>S.label.localeCompare(j.label));W(C),f(S=>({...S,activeOrders:ve.length}))}),ie=En(wt(Le,"teklifler"),he=>{f(ve=>({...ve,pendingProposals:he.size}))}),ne=En(wt(Le,"employees"),he=>{const ve=he.docs.map(S=>S.data());f(S=>({...S,totalWorkers:ve.length}));const fe=new Date().toISOString().split("T")[0],C=ve.filter(S=>{const j=S.attendance?.[fe];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});y(C)}),ge=En(wt(Le,"inventory_movements"),he=>{const ve=he.docs.map(S=>S.data()),fe={};ve.forEach(S=>{const j=Number(S.quantity)||0,k=S.action==="add"?j:-j;fe[S.productName]||(fe[S.productName]=0),fe[S.productName]+=k});const C=Object.entries(fe).filter(([S,j])=>j<100).map(([S,j])=>({name:S,qty:j}));A(C.slice(0,5)),f(S=>({...S,inventoryCount:Object.keys(fe).length}))});return()=>{J(),U(),ie(),ne(),ge()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Er.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(rd,{title:"Aktif Sipariler",value:u.activeOrders,subtext:"Geen aya gre art",icon:Er.Cart,color:"bg-indigo-600"}),c.jsx(rd,{title:"Bekleyen Teklifler",value:u.pendingProposals,subtext:"Onay bekleyen",icon:Er.Document,color:"bg-purple-600"}),c.jsx(rd,{title:"Toplam Stok Kalemi",value:u.inventoryCount,subtext:"Kritik seviye kontrol",icon:Er.Box,color:"bg-emerald-600"}),c.jsx(rd,{title:"Toplam Personel",value:u.totalWorkers,subtext:"Aktif alan",icon:Er.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(z4,{data:q})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((J,U)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",J.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",J.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:J.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},U)),x.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(Er.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:g.length>0?g.map((J,U)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:J.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:J.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:J.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},U)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(Er.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:T.length>0?T.map((J,U)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:J.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[J.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},U)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ne={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Rt=lb.forwardRef(({className:i="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),B4=lb.forwardRef(({className:i="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),It=({children:i,variant:e="primary",className:s="",...r})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...r,children:i})},V1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Ea=({options:i,selected:e,onChange:s,placeholder:r="Seiniz...",isMulti:o=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[g,y]=X.useState(!1),[x,_]=X.useState(""),T=X.useRef(null);X.useEffect(()=>{const U=ie=>{T.current&&!T.current.contains(ie.target)&&y(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const A=U=>{if(o){const ie=e.includes(U)?e.filter(ne=>ne!==U):[...e,U];s(ie)}else s(U),y(!1),_("")},q=U=>{_(U.target.value),f&&s(U.target.value)},W=o?e.length>0?`(${e.length})`:"":e||r,J=i.filter(U=>U.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:T,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Rt,{placeholder:r,value:e,onChange:q,onFocus:()=>y(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>y(!g),children:c.jsx(Ne.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>y(!g),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Ne.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${r} ${W}`:W})]}),c.jsx(Ne.ChevronDown,{})]}),g&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:U=>_(U.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[J.map(U=>{const ie=o?e.includes(U):e===U;return c.jsxs("div",{onClick:()=>f?s(U):A(U),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ie?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ie?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ie&&c.jsx(Ne.Check,{})}),c.jsx("span",{className:"truncate",children:U})]}),u&&c.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),u(U)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Ne.Trash,{})})]},U)}),J.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Ra=({isOpen:i,onClose:e,title:s,children:r,maxWidth:o="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,Vl=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),rh=({startDate:i,endDate:e,onStartChange:s,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>r(o.target.value)})]}),ep=i=>i==="USD"?"$":i==="EUR"?"":"",ns=(i,e="TRY")=>{const s=ep(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" "+s},Em=i=>i===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),q4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function H4(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState([]),[y,x]=X.useState(!1),[_,T]=X.useState({start:"",end:""}),[A,q]=X.useState({}),[W,J]=X.useState({}),[U,ie]=X.useState(!1),[ne,ge]=X.useState(!1),[he,ve]=X.useState(!1),[fe,C]=X.useState(null),[S,j]=X.useState(null),[k,R]=X.useState(null),[O,I]=X.useState(null),pe=Q=>{I(Q)},ze=Q=>{Q.preventDefault()},K=Q=>{if(O===null)return;const ye=[...P.items],Me=ye[O];ye.splice(O,1),ye.splice(Q,0,Me),re({...P,items:ye}),I(null)},[P,re]=X.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[be,Ce]=X.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[E,L]=X.useState(null),[H,M]=X.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]});if(X.useEffect(()=>{const Q=as.onAuthStateChanged(je=>{e(je),r(!1)}),ye=Mn(wt(Le,"customers"),Fn("createdAt","desc")),Me=En(ye,je=>{u(je.docs.map(Pe=>({id:Pe.id,...Pe.data()})))}),Je=Mn(wt(Le,"sales"),Fn("createdAt","desc")),qe=En(Je,je=>{g(je.docs.map(Pe=>({id:Pe.id,...Pe.data()})))});return()=>{Q(),Me(),qe()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ne.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const te=Q=>{const ye=parseFloat(Q.qty)||0,Me=parseFloat(Q.unitPrice)||0,Je=parseFloat(Q.vatRate)||0,qe=ye*Me,je=qe*(Je/100);return qe+je},me=Q=>{if(!Q)return{subtotal:0,totalVAT:0,grandTotal:0};const ye=Q.reduce((Je,qe)=>Je+(parseFloat(qe.qty)||0)*(parseFloat(qe.unitPrice)||0),0),Me=Q.reduce((Je,qe)=>Je+te(qe),0);return{subtotal:ye,totalVAT:Me-ye,grandTotal:Me}},we=Q=>Q?Q.reduce((ye,Me)=>ye+te(Me),0):0,He=Q=>{const ye=f.filter(Je=>Je.customerId===Q);let Me=0;return ye.forEach(Je=>{if(Je.type==="payment"){const qe=parseFloat(Je.amount)||0;Je.direction==="in"?Me-=qe:Me+=qe}else{const qe=we(Je.items);Je.transactionType==="purchase"?Me-=qe:Me+=qe}}),Me},Ue=Q=>{q(ye=>({...ye,[Q]:!ye[Q]}))},se=Q=>{let ye=f.filter(qe=>qe.customerId===Q);ye.sort((qe,je)=>new Date(qe.date)-new Date(je.date));let Me=0;const Je=[];return ye.forEach(qe=>{if(qe.type==="payment"){const je=parseFloat(qe.amount)||0,Pe=qe.direction==="out";Pe?Me+=je:Me-=je,Je.push({docNo:qe.docNo||"-",date:qe.date,action:Pe?"DEME YAPILDI":"DEME ALINDI",type:qe.paymentMethod||"-",note:qe.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:Pe?je:0,alacak:Pe?0:je,balance:Me})}else{const je=qe.transactionType==="purchase",Pe=je?"ALI":"SATI";qe.items?.forEach(Xe=>{const nt=te(Xe);je?Me-=nt:Me+=nt,Je.push({docNo:qe.docNo,date:qe.date,action:Pe,type:"-",note:qe.note||"",ek:Xe.ek||"",desc:Xe.name,qty:Xe.qty,unitPrice:Xe.unitPrice,borc:je?0:nt,alacak:je?nt:0,balance:Me})})}}),Je},Ee=()=>{R(null),Ce({name:"",company:"",phone:"",email:"",currency:"TRY"}),ge(!0)},Te=Q=>{R(Q),Ce({name:Q.name,company:Q.company,phone:Q.phone,email:Q.email,currency:Q.currency||"TRY"}),ge(!0)},$=async Q=>{Q.preventDefault();try{const ye={...be,updatedAt:new Date().toISOString()};k?await rs(Lt(Le,"customers",k.id),ye):await Ls(wt(Le,"customers"),{...ye,createdAt:new Date().toISOString()}),ge(!1)}catch(ye){alert("Hata: "+ye.message)}},xe=async Q=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await fi(Lt(Le,"customers",Q))},le=Q=>{C(Q),L(null);const ye="TH-"+Date.now().toString().slice(-6);M({docNo:ye,amount:0,formattedAmount:Em(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),ve(!0)},Ie=(Q,ye)=>{C(ye),L(Q),M({docNo:Q.docNo||"",amount:Q.amount,formattedAmount:Em(Q.amount),type:Q.paymentMethod,direction:Q.direction||"in",note:Q.note,date:Q.date}),ve(!0)},Qe=Q=>{let ye=Q.target.value.replace(/\D/g,"");ye===""&&(ye="0");const Me=parseInt(ye,10)/100;M({...H,amount:Me,formattedAmount:Em(Me)})},Se=async Q=>{if(Q.preventDefault(),!!fe)try{const ye={customerId:fe.id,type:"payment",docNo:H.docNo,amount:H.amount,paymentMethod:H.type,direction:H.direction,note:H.note,date:H.date,createdAt:E?E.createdAt:new Date().toISOString()};E?await rs(Lt(Le,"sales",E.id),ye):await Ls(wt(Le,"sales"),ye),ve(!1)}catch(ye){alert("Hata: "+ye.message)}},tt=Q=>{C(Q),j(null);const ye="DOC-"+Date.now().toString().slice(-6);re({docNo:ye,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),ie(!0)},rt=(Q,ye)=>{C(ye),j(Q);const Me=(Q.items||[]).map(Je=>({...Je,ek:Je.ek||""}));re({docNo:Q.docNo,transactionType:Q.transactionType||"sale",date:Q.date,description:Q.description,status:Q.status,items:Me}),ie(!0)},Pt=async Q=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await fi(Lt(Le,"sales",Q))}catch(ye){alert("Hata: "+ye.message)}},Fi=async Q=>{Q.preventDefault();try{const ye={customerId:fe.id,...P,type:"sale",createdAt:S?S.createdAt:new Date().toISOString()};S?await rs(Lt(Le,"sales",S.id),ye):await Ls(wt(Le,"sales"),ye),ie(!1)}catch(ye){alert("Hata: "+ye.message)}},Rn=(Q,ye,Me)=>{const Je=[...P.items];Je[Q][ye]=Me,re({...P,items:Je})},qt=()=>re({...P,items:[...P.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20,total:0}]}),_s=Q=>re({...P,items:P.items.filter((ye,Me)=>Me!==Q)}),ws=Q=>{const ye=se(Q.id),Me=Q.currency||"TRY",Je=ep(Me);let qe="data:text/csv;charset=utf-8,\uFEFF";qe+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,ye.forEach(Xe=>{const nt=at=>ns(Math.abs(at),Me).replace(Je,"").trim(),Ts=(Xe.balance<0?"-":"")+nt(Xe.balance),Gn=[`"${Xe.date}"`,`"${Xe.docNo}"`,`"${Xe.action}"`,`"${Xe.type}"`,`"${Xe.note}"`,`"${Xe.ek}"`,`"${Xe.desc}"`,`"${Xe.qty}"`,`"${Xe.unitPrice!=="-"?nt(parseFloat(Xe.unitPrice)):"-"}"`,`"${nt(Xe.borc)}"`,`"${nt(Xe.alacak)}"`,`"${Ts}"`].join(",");qe+=Gn+`
`});const je=encodeURI(qe),Pe=document.createElement("a");Pe.setAttribute("href",je),Pe.setAttribute("download",`${Q.name}_Ekstre.csv`),document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe)},Es=(Q,ye=null)=>{const Je=se(Q.id).filter(at=>ye?at.docNo===ye:!(_.start&&at.date<_.start||_.end&&at.date>_.end)),qe=[];let je=null;Je.forEach(at=>{(!je||je.docNo!==at.docNo||je.action!==at.action)&&(je&&qe.push(je),je={docNo:at.docNo,date:at.date,action:at.action,type:at.type,items:[]}),je.items.push(at)}),je&&qe.push(je);const Pe=window.open("","","height=800,width=1000");if(!Pe)return;const Xe=at=>{if(!at)return"-";const At=new Date(at);return`${String(At.getDate()).padStart(2,"0")}/${String(At.getMonth()+1).padStart(2,"0")}/${String(At.getFullYear()).slice(2)}`},nt=Je.length>0?Je[Je.length-1].balance:0,Ts=ye?Je.reduce((at,At)=>at+(At.borc||0)+(At.alacak||0),0):0,Gn=`
      <html><head><title>Ekstre - ${Q.name}</title>
      <style>
        @page { size: A4; margin: 10mm; }
        body { font-family: 'Helvetica', sans-serif; padding: 10px; color: #000; font-size: 10px; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
        .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
        .company-info p { margin: 0; font-size: 9pt; color: #333; }
        .report-info { text-align: right; }
        .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
        
        /* Transaction Group Styling */
        .transaction-block { margin-bottom: 20px; page-break-inside: avoid; }
        
        .transaction-header {
            background-color: #e5e7eb;
            border: 1px solid #999;
            border-bottom: none;
            padding: 8px;
            font-size: 11pt;
            font-weight: bold;
            display: flex;
            gap: 30px;
        }

        /* Table Styling */
        table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
        
        /* THEAD tekrar iin */
        thead { display: table-header-group; }
        tr { page-break-inside: avoid; }
        
        th { 
            background-color: #f3f4f6; 
            border-bottom: 1px solid #999; 
            padding: 5px; 
            text-align: left; 
            font-weight: bold; 
            font-size: 9pt;
        }
        
        td { 
            border-bottom: 1px solid #ccc; 
            padding: 5px; 
            vertical-align: top; 
            font-size: 9pt;
        }

        .right { text-align: right; }
        .bold { font-weight: bold; }
        .col-desc { white-space: normal; overflow-wrap: break-word; }
        
        /* Footer Balance */
        .balance-container {
           margin-top: 20px; 
           text-align: right; 
           font-size: 12pt;
           border-top: 2px solid #000;
           padding-top: 10px;
        }
      </style>
      </head><body>
        
        <div class="header">
          <div class="company-info">
            <h1>ERCELEBILER AHSAP</h1>
            <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
            <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
          </div>
          <div class="report-info">
            <h2>${ye?"LEM DETAYI":"HESAP EKSTRES"}</h2>
            <p>Sayn: <strong>${Q.name}</strong></p>
            <p>${_.start?Xe(_.start):""} - ${_.end?Xe(_.end):"Tm"}</p>
          </div>
        </div>

        <!-- GRUPLANMI VERLER YAZDIR -->
        ${qe.map(at=>{const At=at.action.includes("DEME")||at.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII (TARIH | BELGE | ISLEM) -->
                <div class="transaction-header">
                    <span style="width: 100px;">${Xe(at.date)}</span>
                    <span style="width: 120px;">#${at.docNo}</span>
                    <span>${at.action} ${At?`(${at.type})`:""}</span>
                </div>

                <!-- 2. ERK TABLOSU -->
                <table>
                    <colgroup>
                        <col style="width: 15%;"> <!-- Tip / Ek -->
                        <col style="width: auto;"> <!-- Aklama (En Geni) -->
                        <col style="width: 10%;"> <!-- Miktar -->
                        <col style="width: 15%;"> <!-- B.Fiyat -->
                        <col style="width: 15%;"> <!-- Tutar (B) -->
                    </colgroup>
                    <thead>
                        <tr>
                            <th>TP / EK</th>
                            <th>AIKLAMA</th>
                            <th class="right">MK.</th>
                            <th class="right">B.FYAT</th>
                            <th class="right">TUTAR</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${at.items.map(Dt=>{const jt=Dt.borc>0?Dt.borc:Dt.alacak,dn=At&&Dt.note||Dt.desc;return`
                            <tr>
                                <td>${At?"-":Dt.ek||"-"}</td>
                                <td class="col-desc">${dn}</td>
                                <td class="right">${Dt.qty!=="-"?Dt.qty:"-"}</td>
                                <td class="right">${Dt.unitPrice!=="-"?ns(Dt.unitPrice).replace(" ",""):"-"}</td>
                                <td class="right bold">${ns(jt)}</td>
                            </tr>
                            `}).join("")}
                    </tbody>
                </table>
            </div>
            `}).join("")}

        <div class="balance-container">
           <strong>${ye?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
           <span style="font-weight: bold; margin-left: 10px; color:${(ye?Ts:nt)>0?"#dc2626":"#059669"}">
             ${ye?ns(Ts):(nt<0?"-":"")+ns(Math.abs(nt))+(nt>0?" (Bor)":" (Alacak)")}
           </span>
        </div>

      </body></html>
    `;Pe.document.write(Gn),setTimeout(()=>{Pe.document.close(),Pe.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:Q=>T({..._,start:Q}),onEndChange:Q=>T({..._,end:Q})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(V1,{checked:y,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:Ee,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ne.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(Q=>{const ye=f.filter(je=>{const Pe=je.customerId===Q.id;let Xe=!0;return _.start&&je.date<_.start&&(Xe=!1),_.end&&je.date>_.end&&(Xe=!1),Pe&&Xe}).sort((je,Pe)=>new Date(Pe.date)-new Date(je.date)),Me=He(Q.id),Je=A[Q.id],qe=Q.currency||"TRY";return c.jsxs(Vl,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Ue(Q.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ne.User,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:Q.name}),c.jsx("button",{onClick:je=>{je.stopPropagation(),Te(Q)},className:"text-gray-400 hover:text-indigo-500 transition-colors",children:c.jsx(Ne.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:Q.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Je?c.jsx(Ne.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ne.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${Me>0?"text-emerald-600":"text-red-500"}`,children:ns(Me,qe)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:Me>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(It,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>le(Q),children:[c.jsx(Ne.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(It,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>tt(Q),children:[c.jsx(Ne.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>Es(Q),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ne.Printer,{})}),c.jsx("button",{onClick:()=>ws(Q),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ne.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>xe(Q.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ne.Trash,{})})]})]})]})]}),Je&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:ye.map(je=>{const Pe=je.type==="payment",Xe=je.transactionType==="purchase",nt=je.direction==="out",Ts=Pe?je.amount:we(je.items),Gn=W[je.id];let at="",At="",Dt="bg-indigo-400",jt=`SATI #${je.docNo}`,dn="+";return Pe?nt?(jt="DEME YAPILDI",at="bg-emerald-50/30",At="text-emerald-600",Dt="bg-emerald-400",dn="+"):(jt="DEME ALINDI",at="bg-red-50/30",At="text-red-500",Dt="bg-red-400",dn="-"):Xe?(at="bg-red-50/30",At="text-red-500",Dt="bg-red-400",jt=`ALI #${je.docNo}`,dn="-"):(At="text-emerald-600",Dt="bg-emerald-400",dn="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${at}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Dt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:jt}),Pe&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:je.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:q4(je.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Pe?je.note||"-":`${je.items?.length||0} Kalem rn`}),!Pe&&c.jsxs("button",{onClick:()=>J(Wt=>({...Wt,[je.id]:!Wt[je.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[Gn?c.jsx(Ne.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(Ne.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${At}`,children:[dn,ns(Ts,qe)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Es(Q,je.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(Ne.Printer,{})}),Pe?c.jsx("button",{onClick:()=>Ie(je,Q),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ne.Edit,{})}):c.jsx("button",{onClick:()=>rt(je,Q),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ne.Edit,{})}),c.jsx("button",{onClick:()=>Pt(je.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ne.Trash,{})})]})]})]}),Gn&&!Pe&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:je.items?.map((Wt,Yn)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:Wt.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:Wt.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:Wt.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:ns(Wt.unitPrice,qe)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:ns(te(Wt),qe)})]},Yn))})]})})})]},je.id)})})]},Q.id)})}),ne&&c.jsx(Ra,{isOpen:ne,onClose:()=>ge(!1),title:k?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsx(Rt,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:be.name,onChange:Q=>Ce({...be,name:Q.target.value})}),c.jsx(Rt,{placeholder:"Firma (Opsiyonel)",value:be.company,onChange:Q=>Ce({...be,company:Q.target.value})}),c.jsx(Rt,{placeholder:"Telefon",value:be.phone,onChange:Q=>Ce({...be,phone:Q.target.value})}),c.jsx(Rt,{placeholder:"E-Posta",value:be.email,onChange:Q=>Ce({...be,email:Q.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(Q=>c.jsx("button",{type:"button",onClick:()=>Ce({...be,currency:Q}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${be.currency===Q?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Q},Q))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(It,{variant:"secondary",type:"button",onClick:()=>ge(!1),children:"ptal"}),c.jsx(It,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),he&&c.jsxs(Ra,{isOpen:he,onClose:()=>ve(!1),title:E?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:fe?.name}),c.jsxs("form",{onSubmit:Se,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>M({...H,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${H.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>M({...H,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${H.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","KrediK","ek"].map(Q=>c.jsx("button",{type:"button",onClick:()=>M({...H,type:Q}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${H.type===Q?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:Q},Q))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${H.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:H.formattedAmount,onChange:Qe}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:ep(fe?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(Rt,{placeholder:"Belge No",value:H.docNo,onChange:Q=>M({...H,docNo:Q.target.value})}),c.jsx(Rt,{type:"date",required:!0,value:H.date,onChange:Q=>M({...H,date:Q.target.value})})]}),c.jsx(Rt,{placeholder:"Not (Opsiyonel)",value:H.note,onChange:Q=>M({...H,note:Q.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(It,{variant:"secondary",type:"button",onClick:()=>ve(!1),children:"ptal"}),c.jsx(It,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),U&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:Fi,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:S?"lemi Dzenle":"Yeni lem"}),"                                ",c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>re({...P,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${P.transactionType==="sale"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP"}),c.jsx("button",{type:"button",onClick:()=>re({...P,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${P.transactionType==="purchase"?"bg-white text-amber-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP"})]})]}),c.jsx("button",{type:"button",onClick:()=>ie(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Rt,{value:P.docNo,onChange:Q=>re({...P,docNo:Q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Rt,{type:"date",required:!0,value:P.date,onChange:Q=>re({...P,date:Q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Rt,{value:P.description,onChange:Q=>re({...P,description:Q.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}})," ",c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{})," ",c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:P.items.map((Q,ye)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>pe(ye),onDragOver:ze,onDrop:()=>K(ye),style:{opacity:O===ye?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:Q.ek,onChange:Me=>Rn(ye,"ek",Me.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:Q.name,onChange:Me=>Rn(ye,"name",Me.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:Q.qty,onChange:Me=>Rn(ye,"qty",Me.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:Q.unitPrice,onChange:Me=>Rn(ye,"unitPrice",Me.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:Q.vatRate,onChange:Me=>Rn(ye,"vatRate",Me.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:ns(te(Q))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>_s(ye),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ne.Trash,{})})})]},ye))})]}),c.jsx("button",{type:"button",onClick:qt,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:ns(me(P.items).subtotal,fe?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:ns(me(P.items).totalVAT,fe?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:ns(me(P.items).grandTotal,fe?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>ie(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const nb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},sb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function F4(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState([]),[y,x]=X.useState({start:"",end:""}),[_,T]=X.useState(!1),[A,q]=X.useState(!1),[W,J]=X.useState(!1),[U,ie]=X.useState({}),[ne,ge]=X.useState({}),he=X.useRef(null),[ve,fe]=X.useState(null),[C,S]=X.useState(null),[j,k]=X.useState({en:6,boy:4}),[R,O]=X.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=X.useMemo(()=>f.map($=>$.name).sort(),[f]);X.useEffect(()=>{const $=as.onAuthStateChanged(Se=>{e(Se),r(!1)}),xe=Mn(wt(Le,"customers"),Fn("name","asc")),le=En(xe,Se=>{g(Se.docs.map(tt=>({id:tt.id,...tt.data()})))}),Ie=Mn(wt(Le,"siparisler"),Fn("createdAt","desc")),Qe=En(Ie,Se=>{u(Se.docs.map(tt=>({id:tt.id,...tt.data()})))});return()=>{$(),le(),Qe()}},[]);const pe=X.useMemo(()=>{const $=[...f],xe=new Set(f.map(le=>le.id));return o.forEach(le=>{le.customerId&&!xe.has(le.customerId)&&($.find(Ie=>Ie.id===le.customerId)||$.push({id:le.customerId,name:le.customerId,company:"Kaytsz (Manuel)"}))}),$.sort((le,Ie)=>le.name.localeCompare(Ie.name))},[o,f]);if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const ze=i?.email==="furkan@avci.jp",K=$=>{if(!$)return;const xe=new FileReader;xe.onload=le=>{const Ie=new Image;Ie.onload=()=>{const Qe=document.createElement("canvas"),Se=800,tt=800;let rt=Ie.width,Pt=Ie.height;rt>Pt?rt>Se&&(Pt*=Se/rt,rt=Se):Pt>tt&&(rt*=tt/Pt,Pt=tt),Qe.width=rt,Qe.height=Pt,Qe.getContext("2d").drawImage(Ie,0,0,rt,Pt);const Rn=Qe.toDataURL("image/jpeg",.8);O(qt=>({...qt,image:Rn}))},Ie.src=le.target.result},xe.readAsDataURL($)},P=$=>{$.preventDefault(),J(!0)},re=()=>J(!1),be=$=>{$.preventDefault(),J(!1),$.dataTransfer.files&&$.dataTransfer.files[0]&&K($.dataTransfer.files[0])},Ce=$=>{$.clipboardData.files&&$.clipboardData.files[0]&&K($.clipboardData.files[0])},E=()=>{fe(null);const $="SP-"+Date.now().toString().slice(-6);O({siparisNo:$,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),T(!0)},L=$=>{fe($);const xe=f.find(Ie=>Ie.id===$.customerId),le=xe?xe.name:$.customerId;O({siparisNo:$.siparisNo,customerId:le,date:$.date,note:$.note||"",image:$.image,items:$.items||[]}),T(!0)},H=async $=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await fi(Lt(Le,"siparisler",$))}catch(xe){alert(xe.message)}},M=async $=>{if($.preventDefault(),!R.customerId){alert("Ltfen mteri giriniz.");return}try{const xe=f.find(Qe=>Qe.name===R.customerId),le=xe?xe.id:R.customerId,Ie={...R,customerId:le,createdAt:ve?ve.createdAt:new Date().toISOString()};ve?await rs(Lt(Le,"siparisler",ve.id),Ie):await Ls(wt(Le,"siparisler"),{...Ie,productionStatus:{}}),T(!1)}catch(xe){alert(xe.message)}},te=($,xe,le)=>{const Ie=[...R.items],Qe=Ie[$];if(Qe[xe]=le,xe==="en1"){const Se=parseFloat(le);isNaN(Se)?le===""&&(Qe.en2=""):Qe.en2=Se-j.en}if(xe==="boy1"){const Se=parseFloat(le);isNaN(Se)?le===""&&(Qe.boy2=""):Qe.boy2=Se-j.boy}O({...R,items:Ie})},me=()=>{O({...R,items:[...R.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},we=()=>{if(R.items.length===0)return;const xe={...R.items[R.items.length-1]};O({...R,items:[...R.items,xe]})},He=$=>{const xe=R.items.filter((le,Ie)=>Ie!==$);O({...R,items:xe})},Ue=($,xe)=>{const le=parseFloat(xe)||0,Ie={...j,[$]:le};k(Ie);const Qe=R.items.map(Se=>({...Se,en2:Se.en1?parseFloat(Se.en1)-Ie.en:Se.en2,boy2:Se.boy1?parseFloat(Se.boy1)-Ie.boy:Se.boy2}));O({...R,items:Qe})},se=$=>{S($),q(!0)},Ee=async($,xe)=>{if(!C)return;const le=C.productionStatus||{},Ie=le[$]||{},Qe={...le,[$]:{...Ie,[xe]:!Ie[xe]}};S({...C,productionStatus:Qe}),await rs(Lt(Le,"siparisler",C.id),{productionStatus:Qe})},Te=$=>{const xe=f.find(Se=>Se.id===$.customerId),le=xe?xe.name:$.customerId||"simsiz";f.find(Se=>Se.id===$.customerId);const Ie=window.open("","","height=800,width=1000");if(!Ie){alert("Pop-up engelleyiciyi kapatn.");return}const Qe=`
      <html><head><title>Sipari - ${$.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 16px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: normal; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 10px; font-size: 16px; word-wrap: break-word; border: 5px solid #eee; padding: 1px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${le}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${$.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${sb($.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${$.items.map(Se=>`
              <tr>
                <td class="group-kasa">${Se.en1||"-"}</td>
                <td class="group-kasa">${Se.boy1||"-"}</td>
                <td class="group-kasa">${Se.genislik||"-"}</td>
                <td>${Se.takim||""}</td>
                <td class="col-desc">${Se.aciklama||""}</td>
                <td class="group-net"><strong>${Se.en2||""}</strong></td>
                <td class="group-net"><strong>${Se.boy2||""}</strong></td>
                <td>${Se.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${$.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${$.note}
          </div>
        `:""}

        ${$.image?`
          <div class="door-image-container">
            <img src="${$.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ie.document.write(Qe),Ie.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Ce,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:y.start,endDate:y.end,onStartChange:$=>x({...y,start:$}),onEndChange:$=>x({...y,end:$})}),ze&&c.jsxs("button",{onClick:E,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ne.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:pe.map($=>{const xe=o.filter(le=>{const Ie=le.customerId===$.id;let Qe=!0;return y.start&&(Qe=Qe&&le.date>=y.start),y.end&&(Qe=Qe&&le.date<=y.end),Ie&&Qe});return xe.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Ne.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:$.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[xe.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:xe.map(le=>{const Ie=U[le.id],Qe=ne[le.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:le.image?c.jsx("img",{src:le.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",le.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:sb(le.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ie(Se=>({...Se,[le.id]:!Se[le.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ie?c.jsx(Ne.ChevronUp,{}):c.jsx(Ne.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>ge(Se=>({...Se,[le.id]:!Se[le.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Qe?c.jsx(Ne.ChevronUp,{}):c.jsx(Ne.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>se(le),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Ne.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Te(le),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ne.Printer,{})}),ze&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>L(le),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ne.Edit,{})}),c.jsx("button",{onClick:()=>H(le.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ne.Trash,{})})]})]})]}),Ie&&c.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:[le.note&&c.jsxs("div",{className:"mb-4 p-3 bg-white border border-gray-200 rounded-lg text-xs text-gray-600 shadow-sm",children:[c.jsx("span",{className:"font-bold text-indigo-600 block mb-1 uppercase tracking-wider",children:"Sipari Notu"}),c.jsx("p",{className:"whitespace-pre-wrap",children:le.note})]}),c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:le.items?.map((Se,tt)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Se.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Se.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Se.en1||"-"," x ",Se.boy1||"-"," x ",Se.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Se.en2," x ",Se.boy2]}),c.jsx("td",{className:"py-2",children:Se.sekil||"-"})]},tt))})]})]}),Qe&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(nb).map(([Se,tt])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:tt.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:tt.steps.map(rt=>{const Pt=le.productionStatus?.[Se]?.[rt.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:Pt?"text-purple-700 font-medium":"text-gray-400",children:rt.label}),Pt?c.jsx(Ne.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Ne.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},rt.id)})})]},Se))})})]},le.id)})})]},$.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:M,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ve?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:R.siparisNo,onChange:$=>O({...R,siparisNo:$.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Ea,{options:I,selected:R.customerId,onChange:$=>O({...R,customerId:$}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:$=>O({...R,date:$.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${W?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:P,onDragLeave:re,onDrop:be,children:[c.jsx("input",{ref:he,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:$=>K($.target.files[0])}),R.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:R.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ne.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:W?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:R.note,onChange:$=>O({...R,note:$.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:$=>Ue("en",$.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:$=>Ue("boy",$.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map(($,xe)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:$.en1,onChange:le=>te(xe,"en1",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:$.boy1,onChange:le=>te(xe,"boy1",le.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:$.genislik,onChange:le=>te(xe,"genislik",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:$.takim,onChange:le=>te(xe,"takim",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:$.aciklama,onChange:le=>te(xe,"aciklama",le.target.value),onInput:le=>{le.target.style.height="auto",le.target.style.height=le.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${xe}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:$.sekil,onChange:le=>te(xe,"sekil",le.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${xe}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:$.en2,onChange:le=>te(xe,"en2",le.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:$.boy2,onChange:le=>te(xe,"boy2",le.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>He(xe),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},xe))})]}),c.jsxs("button",{type:"button",onClick:we,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Ne.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:me,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:ve?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&C&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",C.siparisNo]})]}),c.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(nb).map(([$,xe])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:xe.title}),c.jsx("div",{className:"space-y-2",children:xe.steps.map(le=>{const Ie=C.productionStatus?.[$]?.[le.id];return c.jsxs("button",{onClick:()=>Ee($,le.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ie?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:le.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ie?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ie&&c.jsx(Ne.Check,{})})]},le.id)})})]},$))})]})})]})}const G4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",Y4=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),ib=({item:i,isAdd:e,onEdit:s,onDelete:r})=>c.jsxs(Vl,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:G4(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ne.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ne.Trash,{})})]})]})]});function K4(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState({start:"",end:""}),[y,x]=X.useState(!1),[_,T]=X.useState([]),[A,q]=X.useState(!0),[W,J]=X.useState(!0),[U,ie]=X.useState(null),[ne,ge]=X.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),he=X.useMemo(()=>[...new Set(o.map(pe=>pe.productName))].sort(),[o]),ve=X.useMemo(()=>{const pe=o.map(K=>K.unit).filter(Boolean),ze=["adet","kg","m2","m3","mt","paket"];return[...new Set([...ze,...pe])].sort()},[o]);X.useEffect(()=>{const pe=as.onAuthStateChanged(P=>{e(P),r(!1)}),ze=Mn(wt(Le,"inventory_movements"),Fn("date","desc")),K=En(ze,P=>{u(P.docs.map(re=>({id:re.id,...re.data()})))});return()=>{pe(),K()}},[]);const fe=X.useMemo(()=>o.filter(pe=>{let ze=!0;if(f.start&&(ze=ze&&pe.date>=f.start),f.end&&(ze=ze&&pe.date<=f.end),pe.productType==="raw"&&!A||(pe.productType==="manufactured"||pe.productType==="uretilmis")&&!W)return!1;let K=!0;return _.length>0&&(K=_.includes(pe.productName)),ze&&K}),[o,f,A,W,_]),C=fe.filter(pe=>pe.action==="add"),S=fe.filter(pe=>pe.action==="remove"),j=async pe=>{pe.preventDefault();try{const ze={...ne,quantity:Number(ne.quantity),createdAt:new Date().toISOString()};U?await rs(Lt(Le,"inventory_movements",U),ze):await Ls(wt(Le,"inventory_movements"),ze),I()}catch(ze){alert("Hata: "+ze.message)}},k=async pe=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await fi(Lt(Le,"inventory_movements",pe))},R=async pe=>{if(window.confirm(`"${pe}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const ze=Mn(wt(Le,"inventory_movements"),R4("productName","==",pe)),K=await D4(ze),P=L4(Le);K.forEach(re=>{P.delete(re.ref)}),await P.commit(),_.includes(pe)&&T(re=>re.filter(be=>be!==pe)),ne.productName===pe&&ge(re=>({...re,productName:""}))}catch(ze){alert("Silme hatas: "+ze.message)}},O=pe=>{ie(pe.id),ge({productType:pe.productType,productName:pe.productName,action:pe.action,quantity:pe.quantity,unit:pe.unit,date:pe.date}),x(!0)},I=()=>{x(!1),ie(null),ge({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:pe=>g({...f,start:pe}),onEndChange:pe=>g({...f,end:pe})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(Y4,{showRaw:A,setShowRaw:q,showManufactured:W,setShowManufactured:J}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Ea,{options:he,selected:_,onChange:T,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Ne.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[C.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[C.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),C.map(pe=>c.jsx(ib,{item:pe,isAdd:!0,onEdit:O,onDelete:k},pe.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[S.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[S.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),S.map(pe=>c.jsx(ib,{item:pe,isAdd:!1,onEdit:O,onDelete:k},pe.id))]})]})]}),c.jsx(Ra,{isOpen:y,onClose:I,title:U?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${ne.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:ne.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(V1,{checked:ne.productType==="manufactured",onChange:pe=>ge({...ne,productType:pe?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Ea,{options:he,selected:ne.productName,onChange:pe=>ge({...ne,productName:pe}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>ge({...ne,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>ge({...ne,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Rt,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:ne.quantity,onChange:pe=>ge({...ne,quantity:pe.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Ea,{options:ve,selected:ne.unit,onChange:pe=>ge({...ne,unit:pe}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Rt,{type:"date",required:!0,value:ne.date,onChange:pe=>ge({...ne,date:pe.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(It,{type:"submit",variant:"primary",children:U?"Gncelle":"Kaydet"}),c.jsx(It,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const $4=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Q4=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,r=800,o=40,u=r-o*2,f=s-o*2,g=i.flatMap(_=>e.map(T=>_[T]||0)),y=Math.max(...g,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const T=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:T,x2:r-o,y2:T,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:T+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(y/4*_)})]},_)}),e.map((_,T)=>{const A=x[T%x.length],q=i.map((W,J)=>{const U=o+J*(u/(i.length-1||1)),ie=W[_]||0,ne=s-o-ie/y*f,ge=isNaN(U)?o:U,he=isNaN(ne)?s-o:ne;return`${ge},${he}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((W,J)=>{const U=o+J*(u/(i.length-1||1)),ie=W[_]||0,ne=s-o-ie/y*f,ge=isNaN(U)?o:U,he=isNaN(ne)?s-o:ne;return c.jsx("circle",{cx:ge,cy:he,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${W.month} - ${_}: ${ie}`})},J)})]},_)}),i.map((_,T)=>{const A=o+T*(u/(i.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},T)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,T)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[T%x.length]}}),_]},_))})]})},X4=({name:i,qty:e,unit:s,type:r,change:o,changePercent:u})=>{const f=r==="raw",g=e<0,y=u>10;let x="text-gray-400",_="bg-gray-100",T=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",T=c.jsx(Ne.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",T=c.jsx(Ne.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",q=f?"text-pink-900":"text-purple-900",W=f?"text-pink-700/70":"text-purple-700/70";g?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",q="text-red-700",W="text-red-500"):y&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",q="text-emerald-800",W="text-emerald-600");const J=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:J}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${q}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${W} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:T}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function W4(){const[i,e]=X.useState([]),[s,r]=X.useState(!0),[o,u]=X.useState(!0),[f,g]=X.useState(!0),[y,x]=X.useState([]),[_,T]=X.useState("year");X.useEffect(()=>{const U=Mn(wt(Le,"inventory_movements"),Fn("date","asc")),ie=En(U,ne=>{const ge=ne.docs.map(he=>he.data());e(ge),r(!1)});return()=>ie()},[]);const A=X.useMemo(()=>{const U={},ie=new Date;return ie.setDate(ie.getDate()-30),i.forEach(ne=>{const ge=Number(ne.quantity)||0,he=ne.action==="add"?ge:-ge,ve=new Date(ne.date);U[ne.productName]||(U[ne.productName]={name:ne.productName,qty:0,unit:ne.unit,type:ne.productType||"raw",change30Days:0}),U[ne.productName].qty+=he,U[ne.productName].type=ne.productType||U[ne.productName].type,ve>=ie&&(U[ne.productName].change30Days+=he)}),Object.values(U).map(ne=>{const ge=ne.qty-ne.change30Days;let he=0;return ge!==0?he=ne.change30Days/Math.abs(ge)*100:ne.change30Days!==0&&(he=100),{...ne,changePercent:he}})},[i]),q=X.useMemo(()=>A.filter(U=>!(U.type==="raw"&&!o||(U.type==="manufactured"||U.type==="uretilmis")&&!f||y.length>0&&!y.includes(U.name))),[A,o,f,y]),W=X.useMemo(()=>A.map(U=>U.name).sort(),[A]),J=X.useMemo(()=>{const U=q.sort((he,ve)=>Math.abs(ve.qty)-Math.abs(he.qty)).slice(0,5).map(he=>he.name);if(U.length===0)return{data:[],keys:[]};const ie={},ne={};return U.forEach(he=>ne[he]=0),i.forEach(he=>{if(!U.includes(he.productName))return;const ve=he.date?he.date.slice(0,7):"N/A";if(ve==="N/A")return;if(_==="year"){const S=new Date().getFullYear();if(new Date(he.date).getFullYear()!==S)return}const fe=Number(he.quantity)||0,C=he.action==="add"?fe:-fe;ne[he.productName]||(ne[he.productName]=0),ne[he.productName]+=C,ie[ve]={...ne,month:ve}}),{data:Object.values(ie).sort((he,ve)=>he.month.localeCompare(ve.month)),keys:U}},[i,q,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx($4,{showRaw:o,setShowRaw:u,showManufactured:f,setShowManufactured:g}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Ea,{options:W,selected:y,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:q.length>0?q.map((U,ie)=>c.jsx(X4,{name:U.name,qty:U.qty,unit:U.unit,type:U.type,change:U.change30Days,changePercent:U.changePercent},ie)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Ne.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),J.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Ne.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:U=>T(U.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(Q4,{data:J.data,keys:J.keys})]})]})]})}const Tm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,ii=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",ad=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function Z4(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState([]),[y,x]=X.useState({start:"",end:""}),[_,T]=X.useState(!1),[A,q]=X.useState(!1),W=X.useRef(null),[J,U]=X.useState(null),[ie,ne]=X.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:Tm,images:[],items:[]}),ge=X.useMemo(()=>f.map(E=>E.name).sort(),[f]);if(X.useEffect(()=>{const E=as.onAuthStateChanged(me=>{e(me),r(!1)}),L=Mn(wt(Le,"teklifler"),Fn("createdAt","desc")),H=En(L,me=>{u(me.docs.map(we=>({id:we.id,...we.data()})))}),M=Mn(wt(Le,"customers"),Fn("name","asc")),te=En(M,me=>{g(me.docs.map(we=>({id:we.id,...we.data()})))});return()=>{E(),H(),te()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ne.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const he=(E,L,H)=>{const M=E*L,te=M*(H/100);return M+te},ve=E=>{if(!E)return{subtotal:0,totalVAT:0,grandTotal:0};const L=E.reduce((M,te)=>M+Number(te.quantity)*Number(te.price),0),H=E.reduce((M,te)=>M+Number(te.quantity)*Number(te.price)*(Number(te.vat)/100),0);return{subtotal:L,totalVAT:H,grandTotal:L+H}},fe=E=>{const L=Array.from(E.target.files||E.dataTransfer.files);L.length&&L.forEach(H=>{if(!H.type.startsWith("image/"))return;const M=new FileReader;M.onload=te=>{const me=new Image;me.onload=()=>{const we=document.createElement("canvas"),He=1e3;let Ue=me.width,se=me.height;Ue>se?Ue>He&&(se*=He/Ue,Ue=He):se>He&&(Ue*=He/se,se=He),we.width=Ue,we.height=se,we.getContext("2d").drawImage(me,0,0,Ue,se);const Te=we.toDataURL("image/jpeg",.7);ne($=>({...$,images:[...$.images,Te]}))},me.src=te.target.result},M.readAsDataURL(H)})},C=E=>{ne(L=>({...L,images:L.images.filter((H,M)=>M!==E)}))},S=(E,L)=>{const H=[...ie.images];L===-1&&E>0?[H[E],H[E-1]]=[H[E-1],H[E]]:L===1&&E<H.length-1&&([H[E],H[E+1]]=[H[E+1],H[E]]),ne({...ie,images:H})},j=E=>{E.preventDefault(),q(!0)},k=()=>q(!1),R=E=>{E.preventDefault(),q(!1),fe(E)},O=E=>{E.clipboardData.files&&E.clipboardData.files.length>0&&(E.preventDefault(),fe({target:{files:E.clipboardData.files}}))},I=()=>{U(null);const E="TK-"+Date.now().toString().slice(-6),L=new Date;L.setDate(L.getDate()+7),ne({teklifNo:E,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:L.toISOString().split("T")[0],note:Tm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),T(!0)},pe=E=>{U(E.id),ne({teklifNo:E.teklifNo,teklifName:E.teklifName||"",customerName:E.customerName,date:E.date,validityDate:E.validityDate||"",note:E.note||Tm,images:E.images||[],items:E.items||[]}),T(!0)},ze=async E=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await fi(Lt(Le,"teklifler",E))}catch(L){alert(L.message)}},K=async E=>{if(E.preventDefault(),!ie.customerName){alert("Ltfen mteri ad giriniz.");return}try{const L={...ie,createdAt:new Date().toISOString()};J?await rs(Lt(Le,"teklifler",J),L):await Ls(wt(Le,"teklifler"),L),T(!1)}catch(L){alert(L.message)}},P=(E,L,H)=>{const M=[...ie.items],te=M[E];te[L]=H;const me=parseFloat(L==="quantity"?H:te.quantity),we=parseFloat(L==="price"?H:te.price),He=parseFloat(L==="vat"?H:te.vat);!isNaN(me)&&!isNaN(we)&&!isNaN(He)&&(te.total=he(me,we,He)),ne({...ie,items:M})},re=()=>{ne({...ie,items:[...ie.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},be=E=>{ne({...ie,items:ie.items.filter((L,H)=>H!==E)})},Ce=E=>{const L=window.open("","","height=800,width=1000");if(!L){alert("Pop-up engelleyiciyi kapatn.");return}const H=ve(E.items||[]),M=E.images||[],te=`
      <html><head><title>Teklif - ${E.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${E.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${ad(E.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${ad(E.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${E.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${E.items.map(me=>`
                <tr>
                  <td>${me.description}</td>
                  <td class="text-center">${me.quantity}</td>
                  <td class="text-right">${ii(me.price)}</td>
                  <td class="text-center">%${me.vat}</td>
                  <td class="text-right"><strong>${ii(me.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${ii(H.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${ii(H.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${ii(H.grandTotal)}</span></div>
            </div>
          </div>

          ${E.note?`<div class="notes-section"><strong>NOT:</strong><br/>${E.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${M.map(me=>`<img src="${me}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;L.document.write(te),L.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?O:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:y.start,endDate:y.end,onStartChange:E=>x({...y,start:E}),onEndChange:E=>x({...y,end:E})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ne.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(E=>{let L=!0;return y.start&&E.date<y.start&&(L=!1),y.end&&E.date>y.end&&(L=!1),L}).map(E=>{const L=ve(E.items);return c.jsxs(Vl,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Ne.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:E.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",E.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:E.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",ad(E.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",ad(E.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:ii(L.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(It,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Ce(E),children:c.jsx(Ne.Printer,{})}),c.jsx(It,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>pe(E),children:c.jsx(Ne.Edit,{})}),c.jsx(It,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>ze(E.id),children:c.jsx(Ne.Trash,{})})]})]})]},E.id)})]}),c.jsx(Ra,{isOpen:_,onClose:()=>T(!1),title:J?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:K,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(Rt,{value:ie.teklifNo,onChange:E=>ne({...ie,teklifNo:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(Rt,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:ie.teklifName,onChange:E=>ne({...ie,teklifName:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Ea,{options:ge,selected:ie.customerName,onChange:E=>ne({...ie,customerName:E}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(Rt,{type:"date",required:!0,value:ie.date,onChange:E=>ne({...ie,date:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(Rt,{type:"date",required:!0,value:ie.validityDate,onChange:E=>ne({...ie,validityDate:E.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(B4,{rows:"4",value:ie.note,onChange:E=>ne({...ie,note:E.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:R,children:[c.jsx("input",{ref:W,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:fe}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ne.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:ie.images.map((E,L)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:E,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>C(L),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>S(L,-1),disabled:L===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>S(L,1),disabled:L===ie.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},L))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:ie.items.map((E,L)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(Rt,{placeholder:"rn/Hizmet aklamas",value:E.description,onChange:H=>P(L,"description",H.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(Rt,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.quantity,onChange:H=>P(L,"quantity",H.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(Rt,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.price,onChange:H=>P(L,"price",H.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:E.vat,onChange:H=>P(L,"vat",H.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:ii(E.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>be(L),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Ne.Trash,{})})})]},L))})]}),c.jsx("button",{type:"button",onClick:re,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:ii(ve(ie.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:ii(ve(ie.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:ii(ve(ie.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(It,{type:"submit",variant:"primary",children:J?"Kaydet":"Olutur"}),c.jsx(It,{type:"button",variant:"secondary",onClick:()=>T(!1),children:"ptal"})]})]})})]})}const J4="86715dfc9d1046e7e8a0d95a",eC=`https://v6.exchangerate-api.com/v6/${J4}/latest/USD`,Nm=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[]})=>{const u=(y,x,_)=>{const T=[...i];T[y]={...T[y],[x]:_},x==="type"&&_!=="op"&&(T[y].value=""),e(T)},f=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},g=y=>{if(y===0)return;const x=[...i];x.splice(y,2),e(x)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2",children:[i.map((y,x)=>x%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-indigo-50 border-none rounded-lg text-center font-bold text-indigo-700 w-10 py-2 cursor-pointer hover:bg-indigo-100 transition-colors appearance-none text-lg",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>g(x),className:"absolute -top-3 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs hidden group-hover:flex items-center justify-center shadow-md z-20 hover:bg-red-600",title:"Sil",children:""})]},x):c.jsxs("div",{className:"flex bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg overflow-hidden shadow-sm items-center h-10",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-200 text-[10px] uppercase font-bold text-gray-500 px-2 h-full cursor-pointer focus:outline-none hover:bg-gray-100",value:y.type,onChange:_=>u(x,"type",_.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Satr"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-20 border-none text-sm px-2 h-full focus:ring-0 text-gray-900 bg-transparent [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:y.value,onChange:_=>u(x,"value",_.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-transparent cursor-pointer text-gray-900 truncate",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-indigo-50 text-indigo-700 font-bold cursor-pointer truncate",value:y.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(_=>c.jsx("option",{value:_.id,children:_.name||"simsiz"},_.id))]})]},x)),c.jsx("button",{type:"button",onClick:f,className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 hover:shadow-lg transition-all z-10",children:c.jsx(Ne.Plus,{})})]})};function tC(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState([]),[y,x]=X.useState({TRY:1,USD:1,EUR:1}),[_,T]=X.useState(null),[A,q]=X.useState(!1),[W,J]=X.useState(!1),[U,ie]=X.useState(null),[ne,ge]=X.useState({}),[he,ve]=X.useState({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[fe,C]=X.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});X.useEffect(()=>{const se=as.onAuthStateChanged(le=>{e(le),r(!1)}),Ee=Mn(wt(Le,"pricing_constants"),Fn("name","asc")),Te=En(Ee,le=>{u(le.docs.map(Ie=>({id:Ie.id,...Ie.data()})))}),$=Mn(wt(Le,"pricing_items"),Fn("updatedAt","desc")),xe=En($,le=>{g(le.docs.map(Ie=>({id:Ie.id,...Ie.data()})))});return S(),()=>{se(),Te(),xe()}},[]);const S=async()=>{try{const Ee=await(await fetch(eC)).json();if(Ee&&Ee.conversion_rates){const Te=Ee.conversion_rates.TRY,$=Ee.conversion_rates.EUR,xe=Te/$;x({TRY:1,USD:Te,EUR:xe}),T(new Date().toLocaleTimeString())}}catch(se){console.error("Rate error",se)}},j=(se,Ee)=>{if(!Ee||Ee==="None"||Ee==="TRY")return parseFloat(se)||0;const Te=y[Ee]||1;return parseFloat(se)*Te},k=(se,Ee)=>{if(Ee==="TRY")return se;const Te=y[Ee]||1;return se/Te},R=(se,Ee={})=>{if(se.type==="num")return parseFloat(se.value)||0;if(se.type==="const"){const Te=o.find($=>$.id===se.value);return Te?j(Te.value,Te.currency):0}return se.type==="ref"&&Ee[se.value]||0},O=(se,Ee={})=>{if(!se||se.length===0)return 0;let Te=R(se[0],Ee);for(let $=1;$<se.length;$+=2){const xe=se[$].value,le=R(se[$+1],Ee);switch(xe){case"+":Te+=le;break;case"-":Te-=le;break;case"*":Te*=le;break;case"/":Te=le!==0?Te/le:0;break}}return Te},I=se=>{const Ee={};(se.rows||[]).forEach($=>{Ee[$.id]=O($.ops,Ee)});const Te=O(se.finalFormula?.ops,Ee);return k(Te,se.finalCurrency||"TRY")},pe=se=>O(se,{}),ze=X.useMemo(()=>I(fe),[fe,o,y]),K=X.useMemo(()=>pe(he.ops),[he.ops,o,y]),P=X.useMemo(()=>[...new Set(o.map(Ee=>Ee.category||"Kategorisiz"))].sort(),[o]),re=X.useMemo(()=>{const se={};return o.forEach(Ee=>{const Te=Ee.category||"Kategorisiz";se[Te]||(se[Te]=[]),se[Te].push(Ee)}),se},[o]),be=async se=>{se.preventDefault();const Ee=pe(he.ops),Te={...he,value:Ee,category:he.category||"Kategorisiz"};U?await rs(Lt(Le,"pricing_constants",U),Te):await Ls(wt(Le,"pricing_constants"),Te),ve({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ie(null)},Ce=se=>{ve({...se,ops:se.ops||[{type:"num",value:se.value}]}),ie(se.id)},E=async se=>{window.confirm("Silmek istediinize emin misiniz?")&&await fi(Lt(Le,"pricing_constants",se))},L=se=>{ge(Ee=>({...Ee,[se]:!Ee[se]}))},H=()=>{const se="row_"+Date.now();C({...fe,rows:[...fe.rows,{id:se,name:"",ops:[{type:"num",value:0}]}]})},M=se=>{const Ee=[...fe.rows];Ee.splice(se,1),C({...fe,rows:Ee})},te=(se,Ee)=>{const Te=[...fe.rows];Te[se].name=Ee,C({...fe,rows:Te})},me=(se,Ee)=>{const Te=[...fe.rows];Te[se].ops=Ee,C({...fe,rows:Te})},we=async se=>{se.preventDefault();const Ee={...fe,updatedAt:new Date().toISOString()};U?await rs(Lt(Le,"pricing_items",U),Ee):await Ls(wt(Le,"pricing_items"),Ee),J(!1),ie(null),C({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"})},He=se=>{C(se),ie(se.id),J(!0)},Ue=async se=>{window.confirm("Silmek istediinize emin misiniz?")&&await fi(Lt(Le,"pricing_items",se))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):!i||i.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Ne.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve esnek hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white/80 backdrop-blur-md px-5 py-3 rounded-xl shadow-sm border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[y.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[y.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Ne.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs(It,{variant:"secondary",onClick:()=>q(!0),children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Ne.Variable,{})})," Sabit Deerler"]}),c.jsxs(It,{variant:"primary",onClick:()=>{ie(null),C({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),J(!0)},children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Ne.Calculator,{})})," Fiyatlandrma"]})]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center bg-white/40 backdrop-blur-sm rounded-3xl border border-dashed border-gray-300 text-gray-400",children:"Henz fiyatlandrma oluturulmad."}),f.map(se=>{const Ee=I(se),Te=se.finalCurrency||"TRY",$=Math.random()>.5?"up":"down",xe=(Math.random()*5).toFixed(1);return c.jsxs(Vl,{className:"p-6 hover:scale-[1.02] transition-transform relative group",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-100/50 px-3 py-1 rounded-bl-xl text-[10px] font-bold text-gray-400",children:new Date(se.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1 pr-12 truncate",title:se.title,children:se.title}),c.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider mb-4",children:se.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-6",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[Ee.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-sm ml-1 font-medium text-indigo-400",children:Te})]}),c.jsxs("div",{className:`flex items-center text-xs font-bold ${$==="up"?"text-emerald-500":"text-red-500"}`,children:[$==="up"?c.jsx(Ne.TrendingUp,{}):c.jsx(Ne.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",xe]})]})]}),c.jsxs("div",{className:"flex gap-2 border-t border-gray-100 pt-4 opacity-80 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>He(se),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 rounded-lg font-bold transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>Ue(se.id),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-lg font-bold transition-colors",children:"Sil"})]})]},se.id)})]})}),A&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-0 sm:p-4 bg-gray-900/40 backdrop-blur-sm overflow-y-auto",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl w-full max-w-6xl min-h-full sm:min-h-0 sm:rounded-3xl shadow-2xl border border-white/50 flex flex-col my-0 sm:my-8 relative",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 sticky top-0 z-10 backdrop-blur-xl rounded-t-3xl",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sabit Deer Ynetimi"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maliyet hesaplamalarnda kullanlacak temel deerler"})]}),c.jsx("button",{onClick:()=>q(!1),className:"bg-gray-100 hover:bg-gray-200 p-2 rounded-full transition-colors",children:c.jsx("span",{className:"text-xl font-bold text-gray-600",children:""})})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row flex-grow overflow-hidden h-full",children:[c.jsxs("div",{className:"lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-gray-200 overflow-y-auto bg-gray-50/30",children:[c.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center",children:c.jsx(Ne.Plus,{})}),U?"Sabiti Dzenle":"Yeni Sabit Ekle"]}),c.jsxs("form",{onSubmit:be,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Tanmlama"}),c.jsx(Rt,{required:!0,placeholder:"Sabit Ad (rn: Elektrik Kw/s)",value:he.name,onChange:se=>ve({...he,name:se.target.value})}),c.jsxs("div",{className:"relative",children:[c.jsx(Rt,{list:"cat-options",placeholder:"Kategori (rn: Enerji, Hammadde)",value:he.category,onChange:se=>ve({...he,category:se.target.value})}),c.jsx("datalist",{id:"cat-options",children:P.map((se,Ee)=>c.jsx("option",{value:se},Ee))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Rt,{placeholder:"Birim (kg, saat...)",value:he.unit,onChange:se=>ve({...he,unit:se.target.value})}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 text-sm",value:he.currency,onChange:se=>ve({...he,currency:se.target.value}),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Deer Hesaplama"}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[c.jsx(Nm,{ops:he.ops,onChange:se=>ve({...he,ops:se}),constants:o}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Sonu"}),c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:K.toLocaleString("tr-TR",{maximumFractionDigits:4})})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[U&&c.jsx(It,{type:"button",variant:"ghost",onClick:()=>{ie(null),ve({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]})},children:"ptal"}),c.jsx(It,{type:"submit",variant:"primary",children:U?"Gncelle":"Ekle"})]})]})]}),c.jsx("div",{className:"lg:w-2/3 p-8 overflow-y-auto bg-white/40",children:c.jsxs("div",{className:"space-y-6",children:[Object.entries(re).map(([se,Ee])=>{const Te=ne[se]??!1;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[c.jsx("div",{onClick:()=>L(se),className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Te?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:Te?c.jsx(Ne.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ne.ChevronDown,{})}),c.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:se}),c.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs font-bold px-2 py-0.5 rounded-md",children:Ee.length})]})}),Te&&c.jsx("div",{className:"p-6 bg-gray-50/50 border-t border-gray-100 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-fadeIn",children:Ee.map($=>{const xe=j($.value,$.currency);return c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-1 truncate",title:$.name,children:$.name}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:$.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})}),c.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[$.currency!=="None"?$.currency:""," ",$.unit?`/ ${$.unit}`:""]})]}),$.currency!=="TRY"&&$.currency!=="None"&&c.jsxs("div",{className:"text-[10px] text-emerald-600 font-bold bg-emerald-50 inline-block px-2 py-0.5 rounded",children:["~ ",xe.toFixed(2)," "]}),c.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 backdrop-blur p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>Ce($),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Ne.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>E($.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Ne.Trash,{className:"w-3 h-3"})})]})]},$.id)})})]},se)}),o.length===0&&c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Ne.Variable,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Henz sabit deer eklenmemi."})]})]})})]})]})}),c.jsx(Ra,{isOpen:W,onClose:()=>J(!1),title:U?"Fiyatlandrmay Dzenle":"Yeni Fiyatlandrma",maxWidth:"max-w-7xl",children:c.jsxs("form",{id:"pricingForm",onSubmit:we,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx(Rt,{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",value:fe.title,onChange:se=>C({...fe,title:se.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx(Rt,{placeholder:"adet, m3, kg...",value:fe.unitType,onChange:se=>C({...fe,unitType:se.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Maliyet Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:H,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),fe.rows.map((se,Ee)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsx("div",{className:"w-full xl:w-64 shrink-0",children:c.jsx("input",{placeholder:"Adm Ad (rn: Ham Madde)",className:"w-full text-sm font-medium border-0 border-b border-gray-200 focus:ring-0 px-0 bg-transparent",value:se.name,onChange:Te=>te(Ee,Te.target.value)})}),c.jsx("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:c.jsx(Nm,{ops:se.ops,onChange:Te=>me(Ee,Te),allowRefs:!0,rows:fe.rows.slice(0,Ee),constants:o})}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:O(se.ops,I({...fe,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>M(Ee),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Ne.Trash,{})})]})]},se.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Ne.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:fe.finalCurrency,onChange:se=>C({...fe,finalCurrency:se.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Nm,{ops:fe.finalFormula.ops,onChange:se=>C({...fe,finalFormula:{...fe.finalFormula,ops:se}}),allowRefs:!0,rows:fe.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[ze.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:fe.finalCurrency})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(It,{type:"button",variant:"secondary",onClick:()=>J(!1),children:"ptal"}),c.jsx(It,{type:"submit",variant:"primary",children:"Kaydet"})]})]})})]})}const xa={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},vl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},rb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],nC=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Sm=2.5,Os=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function sC(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState(new Date),[y,x]=X.useState(!1),[_,T]=X.useState(!1),[A,q]=X.useState(null),[W,J]=X.useState(new Date),[U,ie]=X.useState(!1),[ne,ge]=X.useState(new Date().getFullYear()),[he,ve]=X.useState(!1),[fe,C]=X.useState(null),[S,j]=X.useState({type:"work",overtimeSlots:0,lateness:0}),[k,R]=X.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});X.useEffect(()=>{const M=as.onAuthStateChanged(He=>{e(He),r(!1)}),te=Mn(wt(Le,"employees"),Fn("name","asc")),me=En(te,He=>{u(He.docs.map(Ue=>({id:Ue.id,...Ue.data()})))}),we=setInterval(()=>g(new Date),6e4);return()=>{M(),me(),clearInterval(we)}},[]);const O=M=>{const te=f.toISOString().split("T")[0],me=f.getDay(),we=f.getHours(),He=f.getMinutes(),Ue=we*60+He,se=M.attendance?.[te];if(se){if(["paid_leave","unpaid_leave"].includes(se.type))return vl.LEAVE;if(se.overtimeSlots>0)return vl.OVERTIME}const[Ee,Te]=M.startHour.split(":").map(Number),[$,xe]=M.endHour.split(":").map(Number),le=Ee*60+Te,Ie=$*60+xe;return M.workDays.includes(me)?Ue>=le&&Ue<Ie?vl.ONLINE:Ue>=Ie&&se?.overtimeSlots>0?vl.OVERTIME:vl.OFFLINE:vl.OFFLINE},I=M=>{if(!M.attendance)return{used:0,remaining:M.vacationTotal};let te=0;return Object.values(M.attendance).forEach(me=>{me.type==="paid_leave"&&te++}),{used:te,remaining:M.vacationTotal-te}},pe=(M,te)=>{const me=te.getFullYear(),we=te.getMonth(),He=new Date(me,we+1,0).getDate();let Ue=0,se=0,Ee=0,Te=0,$=0;for(let ws=1;ws<=He;ws++){const Es=`${me}-${String(we+1).padStart(2,"0")}-${String(ws).padStart(2,"0")}`,Q=new Date(Es).getDay(),ye=M.attendance?.[Es],Me=M.workDays.includes(Q);ye?(ye.type==="work"&&Ue++,ye.type==="paid_leave"&&$++,ye.type==="unpaid_leave"&&Te++,ye.overtimeSlots&&(se+=parseInt(ye.overtimeSlots)),ye.lateness&&(Ee+=parseFloat(ye.lateness))):Me&&Ue++}const xe=parseFloat(M.salaryAmount)||0,le=M.customDailyRate&&parseFloat(M.customDailyRate)>0?parseFloat(M.customDailyRate):xe/30,Ie=parseFloat(M.customDeductionRate),Qe=!isNaN(Ie)&&Ie>0?Ie:le,Se=le/9,tt=M.customOvertimeMultiplier?parseFloat(M.customOvertimeMultiplier):1.5,rt=se*Sm,Pt=rt*(Se*tt),Fi=Te*Qe,Rn=Ee*Se,qt=Fi+Rn,_s=xe+Pt-qt+(parseFloat(M.insurance)||0)+(parseFloat(M.allowance)||0);return{workedDays:Ue,totalOvertimeSlots:se,totalOvertimeHours:rt,unpaidLeaveDays:Te,paidLeaveDays:$,overtimePay:Pt,totalLatenessHours:Ee,latenessDeduction:Rn,totalDeduction:qt,totalSalary:_s,dailyRate:le,hourlyRate:Se,deductionRate:Qe}},ze=(M,te)=>{const me=new Date(M,te,1);let we=0;return o.forEach(He=>{we+=pe(He,me).totalSalary}),we},K=X.useMemo(()=>{let M=0,te=0;const me=new Date(W);return me.setMonth(W.getMonth()-1),o.forEach(we=>{M+=pe(we,W).totalSalary,te+=pe(we,me).totalSalary}),{thisMonthTotal:M,lastMonthTotal:te}},[o,W]),P=()=>{T(!1),R({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},re=()=>{A&&(T(!0),R({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),q(null),x(!0))},be=async M=>{M.preventDefault();try{const te={...k,updatedAt:new Date().toISOString()};_&&A?await rs(Lt(Le,"employees",A.id),te):await Ls(wt(Le,"employees"),{...te,createdAt:new Date().toISOString()}),x(!1)}catch(te){alert("Hata: "+te.message)}},Ce=async M=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await fi(Lt(Le,"employees",M)),q(null))},E=(M,te)=>{C(M),j({type:te?.type||"work",overtimeSlots:te?.overtimeSlots||0,lateness:te?.lateness||0}),ve(!0)},L=async M=>{if(M.preventDefault(),!A||!fe)return;const te={...A.attendance};te[fe]={type:S.type,overtimeSlots:parseInt(S.overtimeSlots)||0,lateness:parseFloat(S.lateness)||0},await rs(Lt(Le,"employees",A.id),{attendance:te}),q({...A,attendance:te}),ve(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(xa.Lock,{})," Yetkisiz Eriim"]});const H=({employee:M,date:te,onDateClick:me})=>{const we=te.getFullYear(),He=te.getMonth(),Ue=new Date(we,He+1,0).getDate(),se=new Date(we,He,1).getDay(),Ee=[];for(let Te=0;Te<se;Te++)Ee.push(null);for(let Te=1;Te<=Ue;Te++)Ee.push(Te);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:rb.map((Te,$)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:Te.slice(0,3)},$))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:Ee.map((Te,$)=>{if(!Te)return c.jsx("div",{},$);const xe=`${we}-${String(He+1).padStart(2,"0")}-${String(Te).padStart(2,"0")}`,le=M.attendance?.[xe],Ie=new Date(xe).getDay(),Qe=M.workDays.includes(Ie);let Se="bg-gray-50 text-gray-400 border-gray-100";return Qe&&(Se="bg-white border-emerald-200 text-gray-700 shadow-sm"),le&&(le.type==="paid_leave"&&(Se="bg-yellow-50 border-yellow-200 text-yellow-700"),le.type==="unpaid_leave"&&(Se="bg-red-50 border-red-200 text-red-700"),le.type==="work"&&(le.overtimeSlots>0||le.lateness>0)&&(Se="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),le.type==="off"&&(Se="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>me(xe,le),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${Se}`,children:[c.jsx("span",{className:"text-sm",children:Te}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[le?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",le.overtimeSlots,"M"]}),le?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",le.lateness,"s"]})]})]},$)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ie(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",W.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:Os(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(xa.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ie(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:Os(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:P,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(xa.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(M=>{const te=O(M),me=I(M);return c.jsxs("div",{onClick:()=>q(M),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${te.color} ${te.ring} ring-offset-2 ring-2`,children:te.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(xa.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:M.name}),c.jsx("p",{className:"text-sm text-gray-500",children:M.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[M.startHour," - ",M.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[me.remaining," gn kald"]})]})]})]},M.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:re,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(xa.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ce(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(xa.Trash,{})}),c.jsx("button",{onClick:()=>q(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",W.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const M=pe(A,W);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:Os(M.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:Os(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",M.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",Os(M.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",M.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",Os(M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",M.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",Os(M.totalDeduction-M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",Os(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Sm," Saat",c.jsx("br",{}),"Saatlik cret = ",Os(M.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",Os(M.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>J(new Date(W.setMonth(W.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:W.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>J(new Date(W.setMonth(W.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(H,{employee:A,date:W,onDateClick:E})]})]})]})}),U&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ie(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(xa.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>ge(M=>M-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:ne}),c.jsx("button",{onClick:()=>ge(M=>M+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:nC.map((M,te)=>{const me=ze(ne,te),we=new Date().getMonth()===te&&new Date().getFullYear()===ne;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${we?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${we?"text-indigo-200":"text-gray-400"}`,children:M}),c.jsx("div",{className:`text-lg font-bold ${we?"text-white":"text-gray-800"}`,children:me>0?Os(me):"-"})]},M)})})]})}),y&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:be,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:M=>R({...k,name:M.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:M=>R({...k,role:M.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:M=>R({...k,salaryType:M.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:M=>R({...k,salaryAmount:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:M=>R({...k,insurance:M.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:M=>R({...k,allowance:M.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:M=>R({...k,customDailyRate:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:M=>R({...k,customOvertimeMultiplier:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:M=>R({...k,customDeductionRate:M.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:M=>R({...k,vacationTotal:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:M=>R({...k,startHour:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:M=>R({...k,endHour:M.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:rb.map((M,te)=>c.jsx("button",{type:"button",onClick:()=>{const me=k.workDays.includes(te)?k.workDays.filter(we=>we!==te):[...k.workDays,te];R({...k,workDays:me})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(te)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:M.slice(0,3)},M))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),he&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:fe}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(M=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:M.id,checked:S.type===M.id,onChange:te=>j({...S,type:te.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:M.label})]},M.id))})]}),S.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Sm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(M=>c.jsx("button",{type:"button",onClick:()=>j({...S,overtimeSlots:S.overtimeSlots===M?0:M}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${S.overtimeSlots===M?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:S.lateness,onChange:M=>j({...S,lateness:M.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ve(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}const tp={leftImage:null,topImage:null,kod:"",size:"",color:""},ab=Array(14).fill(null).map(()=>({...tp}));function iC(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState([]),[f,g]=X.useState([]),[y,x]=X.useState(!1),[_,T]=X.useState(!1),[A,q]=X.useState("batches"),[W,J]=X.useState({title:"",labels:ab}),[U,ie]=X.useState({name:"",...tp}),[ne,ge]=X.useState(null),he=X.useRef({});if(X.useEffect(()=>{const P=as.onAuthStateChanged(L=>{e(L),r(!1)}),re=Mn(wt(Le,"label_batches"),Fn("createdAt","desc")),be=En(re,L=>{u(L.docs.map(H=>({id:H.id,...H.data()})))}),Ce=Mn(wt(Le,"label_templates"),Fn("name","asc")),E=En(Ce,L=>{g(L.docs.map(H=>({id:H.id,...H.data()})))});return()=>{P(),be(),E()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const ve=(P,re)=>{if(!P)return;const be=new FileReader;be.onload=Ce=>{const E=new Image;E.onload=()=>{const L=document.createElement("canvas"),H=400;let M=E.width,te=E.height;M>te?M>H&&(te*=H/M,M=H):te>H&&(M*=H/te,te=H),L.width=M,L.height=te,L.getContext("2d").drawImage(E,0,0,M,te),re(L.toDataURL("image/jpeg",.6))},E.src=Ce.target.result},be.readAsDataURL(P)},fe=(P=null)=>{P?(ge(P.id),J({title:P.title,labels:P.labels})):(ge(null),J({title:"",labels:ab.map(re=>({...re}))})),x(!0)},C=(P,re,be)=>{const Ce=[...W.labels];Ce[P]={...Ce[P],[re]:be},J({...W,labels:Ce})},S=()=>{if(window.confirm("lk etiketteki veriler dier tm etiketlere kopyalanacak. Onaylyor musunuz?")){const P=W.labels[0],re=W.labels.map(()=>({...P}));J({...W,labels:re})}},j=(P,re)=>{const be=f.find(Ce=>Ce.id===re);if(be){const Ce=[...W.labels];Ce[P]={leftImage:be.leftImage,topImage:be.topImage,kod:be.kod,size:be.size,color:be.color},J({...W,labels:Ce})}},k=async P=>{P.preventDefault();try{const re={...W,createdAt:new Date().toISOString()};ne?await rs(Lt(Le,"label_batches",ne),re):await Ls(wt(Le,"label_batches"),re),x(!1)}catch(re){alert("Hata: "+re.message)}},R=async P=>{window.confirm("Bu etiket sayfasn silmek istiyor musunuz?")&&await fi(Lt(Le,"label_batches",P))},O=(P=null)=>{P?(ge(P.id),ie(P)):(ge(null),ie({name:"",...tp})),T(!0)},I=async P=>{P.preventDefault();try{ne?await rs(Lt(Le,"label_templates",ne),U):await Ls(wt(Le,"label_templates"),U),T(!1)}catch(re){alert("Hata: "+re.message)}},pe=async P=>{window.confirm("Bu ablonu silmek istiyor musunuz?")&&await fi(Lt(Le,"label_templates",P))},ze=P=>{const re=window.open("","","height=800,width=1000");if(!re)return;const be=`
      <html><head><title>Etiketler - ${P.title}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        
        body { 
          font-family: 'Arial', sans-serif; 
          color: #000;
          box-sizing: border-box;
          padding-top: 10mm;
          padding-bottom: 10mm;
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: repeat(7, 1fr);
          height: 100%;
        }

        .label-container {
          border: 1px dashed #ccc;
          box-sizing: border-box;
          padding: 2px;
          display: flex;
          overflow: hidden;
          height: 100%;
          page-break-inside: avoid; 
        }

        .left-section {
          width: 25%;
          height: 100%;
          border-right: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-right: 2px;
        }
        /* PDF Fix: Use CONTAIN to show full image without cropping */
        .left-img {
          width: 100%;
          height: 100%;
          object-fit: contain; 
        }

        .right-section {
          width: 75%;
          display: flex;
          flex-direction: column;
          padding-left: 5px;
        }

        .top-section {
          height: 33%;
          border-bottom: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          margin-bottom: 2px;
        }
        .logo-img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        .info-section {
          height: 66%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          font-size: 11pt;
          font-weight: bold;
          line-height: 1.4;
        }

        .info-row { display: flex; align-items: baseline; }
        .label-key { width: 60px; font-weight: bold; }
        .label-val { font-weight: normal; }

        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        ${P.labels.map(Ce=>`
          <div class="label-container">
            <div class="left-section">
              ${Ce.leftImage?`<img src="${Ce.leftImage}" class="left-img" />`:""}
            </div>
            <div class="right-section">
              <div class="top-section">
                ${Ce.topImage?`<img src="${Ce.topImage}" class="logo-img" />`:""}
              </div>
              <div class="info-section">
                <div class="info-row"><span class="label-key">KOD:</span> <span class="label-val">${Ce.kod||""}</span></div>
                <div class="info-row"><span class="label-key">SIZE:</span> <span class="label-val">${Ce.size||""}</span></div>
                <div class="info-row"><span class="label-key">COLOR:</span> <span class="label-val">${Ce.color||""}</span></div>
              </div>
            </div>
          </div>
        `).join("")}
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;re.document.write(be),re.document.close()},K=(P,re,be,Ce=!1)=>c.jsxs("div",{className:`grid grid-cols-4 gap-0 bg-white border border-gray-300 rounded-xl shadow-sm relative group hover:z-20 transition-all ${Ce?"":"h-36"}`,children:[c.jsx("div",{className:"col-span-1 border-r border-gray-300 bg-gray-50 relative h-full rounded-l-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>he.current[`left-${re}`]?.click(),children:[P.leftImage?c.jsx("img",{src:P.leftImage,className:"w-full h-full object-contain",alt:"Sol"}):c.jsx("span",{className:"text-2xl text-gray-300 font-light",children:"+"}),c.jsx("input",{type:"file",className:"hidden",ref:E=>he.current[`left-${re}`]=E,onChange:E=>ve(E.target.files[0],L=>be(re,"leftImage",L))}),P.leftImage&&c.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),be(re,"leftImage",null)},className:"absolute top-1 right-1 bg-white/80 rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""})]})}),c.jsxs("div",{className:"col-span-3 flex flex-col h-full relative",children:[c.jsx("div",{className:"h-1/3 border-b border-gray-200 relative group bg-white rounded-tr-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>he.current[`top-${re}`]?.click(),children:[P.topImage?c.jsx("img",{src:P.topImage,className:"w-full h-full object-contain",alt:"Logo"}):c.jsx("span",{className:"text-[9px] text-gray-400 font-bold tracking-widest",children:"LOGO"}),c.jsx("input",{type:"file",className:"hidden",ref:E=>he.current[`top-${re}`]=E,onChange:E=>ve(E.target.files[0],L=>be(re,"topImage",L))}),P.topImage&&c.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),be(re,"topImage",null)},className:"absolute top-1 right-1 bg-white/80 text-red-500 w-4 h-4 text-[10px] flex items-center justify-center rounded hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:""})]})}),c.jsxs("div",{className:"h-2/3 flex flex-col justify-center p-2 gap-1.5 bg-white rounded-br-xl",children:[c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"KOD"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:P.kod,onChange:E=>be(re,"kod",E.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"SIZE"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:P.size,onChange:E=>be(re,"size",E.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"CLR"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:P.color,onChange:E=>be(re,"color",E.target.value)})]})]})]}),!Ce&&c.jsx("div",{className:"absolute top-1 left-1 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-24 scale-75 origin-bottom shadow-md bg-white rounded",children:c.jsx(Ea,{options:f.map(E=>E.name),placeholder:"ablon",onChange:E=>{const L=f.find(H=>H.name===E);L&&j(re,L.id)},selected:""})})})]});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Etiket Basm"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A4 etiket tasarm ve yazdrma"})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>q("batches"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="batches"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Etiket Sayfalar"}),c.jsx("button",{onClick:()=>q("templates"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="templates"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"ablonlar"})]}),c.jsxs("button",{onClick:()=>A==="batches"?fe():O(),className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ne.Plus,{})," ",c.jsx("span",{className:"ml-2",children:A==="batches"?"Etiket Sayfas Olutur":"ablon Ekle"})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10",children:A==="batches"?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.map(P=>c.jsx(Vl,{className:"p-0 hover:shadow-xl transition-all group overflow-hidden",children:c.jsxs("div",{className:"flex h-40",children:[c.jsx("div",{className:"w-32 bg-gray-100 border-r border-gray-200 p-2 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full bg-white border border-gray-300 shadow-sm grid grid-cols-2 grid-rows-7 gap-[1px] p-[2px]",children:P.labels.map((re,be)=>c.jsxs("div",{className:"bg-gray-50 border border-gray-100 relative overflow-hidden",children:[re.leftImage&&c.jsx("img",{src:re.leftImage,className:"absolute left-0 top-0 h-full w-1/3 object-cover opacity-50"}),re.topImage&&c.jsx("img",{src:re.topImage,className:"absolute right-0 top-0 h-1/2 w-2/3 object-contain opacity-50"})]},be))})}),c.jsxs("div",{className:"flex-grow p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:P.title}),c.jsx("p",{className:"text-xs text-gray-500 font-medium bg-gray-100 inline-block px-2 py-0.5 rounded",children:new Date(P.createdAt).toLocaleDateString("tr-TR")})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(It,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>ze(P),children:[c.jsx(Ne.Printer,{})," Yazdr"]}),c.jsx(It,{variant:"secondary",className:"px-3 py-1.5 text-xs text-blue-600",onClick:()=>fe(P),children:c.jsx(Ne.Edit,{})}),c.jsx(It,{variant:"secondary",className:"px-3 py-1.5 text-xs text-red-600",onClick:()=>R(P.id),children:c.jsx(Ne.Trash,{})})]})]})]})},P.id)),o.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"Kaytl etiket sayfas yok."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.map(P=>c.jsxs(Vl,{className:"p-4 hover:shadow-xl transition-all group relative",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3 truncate border-b border-gray-100 pb-2",children:P.name}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white text-[9px] h-32 flex gap-2",children:[c.jsx("div",{className:"w-1/3 h-full bg-gray-50 flex items-center justify-center text-gray-300 overflow-hidden rounded relative",children:P.leftImage?c.jsx("img",{src:P.leftImage,className:"absolute inset-0 w-full h-full object-cover"}):"IMG"}),c.jsxs("div",{className:"w-2/3 flex flex-col h-full",children:[c.jsx("div",{className:"h-1/3 bg-gray-50 mb-2 flex items-center justify-center overflow-hidden border border-gray-100 relative rounded",children:P.topImage?c.jsx("img",{src:P.topImage,className:"absolute inset-0 w-full h-full object-cover"}):"LOGO"}),c.jsxs("div",{className:"space-y-1 mt-auto",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"KOD:"}),c.jsx("span",{className:"truncate w-16 text-right",children:P.kod})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"SIZE:"}),c.jsx("span",{className:"truncate w-16 text-right",children:P.size})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"CLR:"}),c.jsx("span",{className:"truncate w-16 text-right",children:P.color})]})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>O(P),className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Ne.Edit,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>pe(P.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Ne.Trash,{className:"w-4 h-4"})})]})]},P.id)),f.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"ablon bulunamad."})]})}),c.jsx(Ra,{isOpen:y,onClose:()=>x(!1),title:ne?"Etiket Sayfasn Dzenle":"Yeni Etiket Sayfas",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sayfa Bal"}),c.jsx(Rt,{required:!0,placeholder:"rn: 2025 Kap Siparileri",value:W.title,onChange:P=>J({...W,title:P.target.value})})]}),c.jsx("button",{type:"button",onClick:S,className:"px-5 py-3 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold hover:bg-purple-200 transition-colors shadow-sm",children:"lkini Hepsine Uygula"})]}),c.jsx("div",{className:"bg-gray-100 p-4 rounded-2xl border border-gray-200 h-[60vh] overflow-y-auto custom-scrollbar",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.labels.map((P,re)=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md z-30 pointer-events-none",children:re+1}),K(P,re,C)]},re))})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(It,{variant:"secondary",type:"button",onClick:()=>x(!1),children:"ptal"}),c.jsx(It,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsx(Ra,{isOpen:_,onClose:()=>T(!1),title:ne?"ablonu Dzenle":"Yeni ablon",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ablon Ad"}),c.jsx(Rt,{required:!0,placeholder:"rn: Beyaz Panel Kap",value:U.name,onChange:P=>ie({...U,name:P.target.value})})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:K(U,-1,(P,re,be)=>ie({...U,[re]:be}),!0)}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(It,{variant:"secondary",type:"button",onClick:()=>T(!1),children:"ptal"}),c.jsx(It,{variant:"primary",type:"submit",children:"Kaydet"})]})]})})]})}function rC(){const[i,e]=X.useState(null),[s,r]=X.useState(!0),[o,u]=X.useState("dashboard"),[f,g]=X.useState(!1);X.useEffect(()=>{const A=dN(as,q=>{e(q),r(!1)});return()=>A()},[]);const y=async()=>{try{await hN(as)}catch(A){console.error("k yaplrken hata:",A)}},x={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Tag:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},_=[{id:"dashboard",label:"Dashboard",icon:x.Home},{id:"musteriler",label:"Mteriler",icon:x.Users},{id:"urunler",label:"rnler",icon:x.Box},{id:"stok",label:"Stok Durumu",icon:x.Chart},{id:"siparis",label:"Sipari Formu",icon:x.Cart},{id:"teklif",label:"Teklif Formu",icon:x.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:x.Calculator},{id:"calisan",label:"alanlar",icon:x.Briefcase},{id:"etiket",label:"Etiket Basm",icon:x.Tag}],T=()=>{switch(o){case"dashboard":return c.jsx(tb,{onNavigate:u});case"musteriler":return c.jsx(H4,{});case"urunler":return c.jsx(K4,{});case"stok":return c.jsx(W4,{});case"siparis":return c.jsx(F4,{});case"teklif":return c.jsx(Z4,{});case"fiyatlandirma":return c.jsx(tC,{});case"calisan":return c.jsx(sC,{});case"etiket":return c.jsx(iC,{});default:return c.jsx(tb,{onNavigate:u})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>g(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>g(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(x.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{u(A.id),g(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(x.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>g(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(x.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:T()})})]})]}):c.jsx(U4,{})}E2.createRoot(document.getElementById("root")).render(c.jsx(X.StrictMode,{children:c.jsx(rC,{})}));
