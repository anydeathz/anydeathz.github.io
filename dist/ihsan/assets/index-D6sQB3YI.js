(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function E2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var am={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function T2(){if(bx)return Go;bx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:r,type:i,key:f,ref:l!==void 0?l:null,props:u}}return Go.Fragment=e,Go.jsx=n,Go.jsxs=n,Go}var _x;function S2(){return _x||(_x=1,am.exports=T2()),am.exports}var c=S2(),lm={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx;function N2(){if(wx)return Be;wx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function z(T){return T===null||typeof T!="object"?null:(T=A&&T[A]||T["@@iterator"],typeof T=="function"?T:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,V={};function se(T,C,U){this.props=T,this.context=C,this.refs=V,this.updater=U||G}se.prototype.isReactComponent={},se.prototype.setState=function(T,C){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,C,"setState")},se.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function W(){}W.prototype=se.prototype;function me(T,C,U){this.props=T,this.context=C,this.refs=V,this.updater=U||G}var ge=me.prototype=new W;ge.constructor=me,Q(ge,se.prototype),ge.isPureReactComponent=!0;var ve=Array.isArray;function ye(){}var I={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function j(T,C,U){var k=U.ref;return{$$typeof:r,type:T,key:C,ref:k!==void 0?k:null,props:U}}function M(T,C){return j(T.type,C,T.props)}function R(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function L(T){var C={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(U){return C[U]})}var D=/\/+/g;function ae(T,C){return typeof T=="object"&&T!==null&&T.key!=null?L(""+T.key):C.toString(36)}function Ne(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ye,ye):(T.status="pending",T.then(function(C){T.status==="pending"&&(T.status="fulfilled",T.value=C)},function(C){T.status==="pending"&&(T.status="rejected",T.reason=C)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Y(T,C,U,k,H){var ie=typeof T;(ie==="undefined"||ie==="boolean")&&(T=null);var fe=!1;if(T===null)fe=!0;else switch(ie){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(T.$$typeof){case r:case e:fe=!0;break;case _:return fe=T._init,Y(fe(T._payload),C,U,k,H)}}if(fe)return H=H(T),fe=k===""?"."+ae(T,0):k,ve(H)?(U="",fe!=null&&(U=fe.replace(D,"$&/")+"/"),Y(H,C,U,"",function(rt){return rt})):H!=null&&(R(H)&&(H=M(H,U+(H.key==null||T&&T.key===H.key?"":(""+H.key).replace(D,"$&/")+"/")+fe)),C.push(H)),1;fe=0;var Ce=k===""?".":k+":";if(ve(T))for(var ke=0;ke<T.length;ke++)k=T[ke],ie=Ce+ae(k,ke),fe+=Y(k,C,U,ie,H);else if(ke=z(T),typeof ke=="function")for(T=ke.call(T),ke=0;!(k=T.next()).done;)k=k.value,ie=Ce+ae(k,ke++),fe+=Y(k,C,U,ie,H);else if(ie==="object"){if(typeof T.then=="function")return Y(Ne(T),C,U,k,H);throw C=String(T),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return fe}function q(T,C,U){if(T==null)return T;var k=[],H=0;return Y(T,k,"","",function(ie){return C.call(U,ie,H++)}),k}function te(T){if(T._status===-1){var C=T._result;C=C(),C.then(function(U){(T._status===0||T._status===-1)&&(T._status=1,T._result=U)},function(U){(T._status===0||T._status===-1)&&(T._status=2,T._result=U)}),T._status===-1&&(T._status=0,T._result=C)}if(T._status===1)return T._result.default;throw T._result}var xe=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Te={map:q,forEach:function(T,C,U){q(T,function(){C.apply(this,arguments)},U)},count:function(T){var C=0;return q(T,function(){C++}),C},toArray:function(T){return q(T,function(C){return C})||[]},only:function(T){if(!R(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Be.Activity=E,Be.Children=Te,Be.Component=se,Be.Fragment=n,Be.Profiler=l,Be.PureComponent=me,Be.StrictMode=i,Be.Suspense=p,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Be.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},Be.cache=function(T){return function(){return T.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(T,C,U){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var k=Q({},T.props),H=T.key;if(C!=null)for(ie in C.key!==void 0&&(H=""+C.key),C)!S.call(C,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&C.ref===void 0||(k[ie]=C[ie]);var ie=arguments.length-2;if(ie===1)k.children=U;else if(1<ie){for(var fe=Array(ie),Ce=0;Ce<ie;Ce++)fe[Ce]=arguments[Ce+2];k.children=fe}return j(T.type,H,k)},Be.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},Be.createElement=function(T,C,U){var k,H={},ie=null;if(C!=null)for(k in C.key!==void 0&&(ie=""+C.key),C)S.call(C,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(H[k]=C[k]);var fe=arguments.length-2;if(fe===1)H.children=U;else if(1<fe){for(var Ce=Array(fe),ke=0;ke<fe;ke++)Ce[ke]=arguments[ke+2];H.children=Ce}if(T&&T.defaultProps)for(k in fe=T.defaultProps,fe)H[k]===void 0&&(H[k]=fe[k]);return j(T,ie,H)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(T){return{$$typeof:y,render:T}},Be.isValidElement=R,Be.lazy=function(T){return{$$typeof:_,_payload:{_status:-1,_result:T},_init:te}},Be.memo=function(T,C){return{$$typeof:x,type:T,compare:C===void 0?null:C}},Be.startTransition=function(T){var C=I.T,U={};I.T=U;try{var k=T(),H=I.S;H!==null&&H(U,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(ye,xe)}catch(ie){xe(ie)}finally{C!==null&&U.types!==null&&(C.types=U.types),I.T=C}},Be.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Be.use=function(T){return I.H.use(T)},Be.useActionState=function(T,C,U){return I.H.useActionState(T,C,U)},Be.useCallback=function(T,C){return I.H.useCallback(T,C)},Be.useContext=function(T){return I.H.useContext(T)},Be.useDebugValue=function(){},Be.useDeferredValue=function(T,C){return I.H.useDeferredValue(T,C)},Be.useEffect=function(T,C){return I.H.useEffect(T,C)},Be.useEffectEvent=function(T){return I.H.useEffectEvent(T)},Be.useId=function(){return I.H.useId()},Be.useImperativeHandle=function(T,C,U){return I.H.useImperativeHandle(T,C,U)},Be.useInsertionEffect=function(T,C){return I.H.useInsertionEffect(T,C)},Be.useLayoutEffect=function(T,C){return I.H.useLayoutEffect(T,C)},Be.useMemo=function(T,C){return I.H.useMemo(T,C)},Be.useOptimistic=function(T,C){return I.H.useOptimistic(T,C)},Be.useReducer=function(T,C,U){return I.H.useReducer(T,C,U)},Be.useRef=function(T){return I.H.useRef(T)},Be.useState=function(T){return I.H.useState(T)},Be.useSyncExternalStore=function(T,C,U){return I.H.useSyncExternalStore(T,C,U)},Be.useTransition=function(){return I.H.useTransition()},Be.version="19.2.0",Be}var Ex;function lg(){return Ex||(Ex=1,lm.exports=N2()),lm.exports}var Z=lg();const mb=E2(Z);var om={exports:{}},Yo={},cm={exports:{}},um={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function A2(){return Tx||(Tx=1,(function(r){function e(Y,q){var te=Y.length;Y.push(q);e:for(;0<te;){var xe=te-1>>>1,Te=Y[xe];if(0<l(Te,q))Y[xe]=q,Y[te]=Te,te=xe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var q=Y[0],te=Y.pop();if(te!==q){Y[0]=te;e:for(var xe=0,Te=Y.length,T=Te>>>1;xe<T;){var C=2*(xe+1)-1,U=Y[C],k=C+1,H=Y[k];if(0>l(U,te))k<Te&&0>l(H,U)?(Y[xe]=H,Y[k]=te,xe=k):(Y[xe]=U,Y[C]=te,xe=C);else if(k<Te&&0>l(H,te))Y[xe]=H,Y[k]=te,xe=k;else break e}}return q}function l(Y,q){var te=Y.sortIndex-q.sortIndex;return te!==0?te:Y.id-q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,y=f.now();r.unstable_now=function(){return f.now()-y}}var p=[],x=[],_=1,E=null,A=3,z=!1,G=!1,Q=!1,V=!1,se=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ge(Y){for(var q=n(x);q!==null;){if(q.callback===null)i(x);else if(q.startTime<=Y)i(x),q.sortIndex=q.expirationTime,e(p,q);else break;q=n(x)}}function ve(Y){if(Q=!1,ge(Y),!G)if(n(p)!==null)G=!0,ye||(ye=!0,L());else{var q=n(x);q!==null&&Ne(ve,q.startTime-Y)}}var ye=!1,I=-1,S=5,j=-1;function M(){return V?!0:!(r.unstable_now()-j<S)}function R(){if(V=!1,ye){var Y=r.unstable_now();j=Y;var q=!0;try{e:{G=!1,Q&&(Q=!1,W(I),I=-1),z=!0;var te=A;try{t:{for(ge(Y),E=n(p);E!==null&&!(E.expirationTime>Y&&M());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,A=E.priorityLevel;var Te=xe(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof Te=="function"){E.callback=Te,ge(Y),q=!0;break t}E===n(p)&&i(p),ge(Y)}else i(p);E=n(p)}if(E!==null)q=!0;else{var T=n(x);T!==null&&Ne(ve,T.startTime-Y),q=!1}}break e}finally{E=null,A=te,z=!1}q=void 0}}finally{q?L():ye=!1}}}var L;if(typeof me=="function")L=function(){me(R)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ae=D.port2;D.port1.onmessage=R,L=function(){ae.postMessage(null)}}else L=function(){se(R,0)};function Ne(Y,q){I=se(function(){Y(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var q=3;break;default:q=A}var te=A;A=q;try{return Y()}finally{A=te}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(Y,q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=A;A=Y;try{return q()}finally{A=te}},r.unstable_scheduleCallback=function(Y,q,te){var xe=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,Y){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=te+Te,Y={id:_++,callback:q,priorityLevel:Y,startTime:te,expirationTime:Te,sortIndex:-1},te>xe?(Y.sortIndex=te,e(x,Y),n(p)===null&&Y===n(x)&&(Q?(W(I),I=-1):Q=!0,Ne(ve,te-xe))):(Y.sortIndex=Te,e(p,Y),G||z||(G=!0,ye||(ye=!0,L()))),Y},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Y){var q=A;return function(){var te=A;A=q;try{return Y.apply(this,arguments)}finally{A=te}}}})(um)),um}var Sx;function j2(){return Sx||(Sx=1,cm.exports=A2()),cm.exports}var dm={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function C2(){if(Nx)return bn;Nx=1;var r=lg();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,x,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:p,containerInfo:x,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(p,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(p,x,null,_)},bn.flushSync=function(p){var x=f.T,_=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=x,i.p=_,i.d.f()}},bn.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(p,x))},bn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},bn.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var _=x.as,E=y(_,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,z=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?i.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:z}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:z,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},bn.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=y(x.as,x.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(p)},bn.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,E=y(_,x.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},bn.preloadModule=function(p,x){if(typeof p=="string")if(x){var _=y(x.as,x.crossOrigin);i.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(p)},bn.requestFormReset=function(p){i.d.r(p)},bn.unstable_batchedUpdates=function(p,x){return p(x)},bn.useFormState=function(p,x,_){return f.H.useFormState(p,x,_)},bn.useFormStatus=function(){return f.H.useHostTransitionStatus()},bn.version="19.2.0",bn}var Ax;function R2(){if(Ax)return dm.exports;Ax=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=C2(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function I2(){if(jx)return Yo;jx=1;var r=j2(),e=lg(),n=R2();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(i(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,o=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===o)return p(h),s;m=m.sibling}throw Error(i(188))}if(a.return!==o.return)a=h,o=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,o=m;break}if(w===o){v=!0,o=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,o=h;break}if(w===o){v=!0,o=m,a=h;break}w=w.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case se:return"Profiler";case V:return"StrictMode";case ve:return"Suspense";case ye:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case me:return t.displayName||"Context";case W:return(t._context.displayName||"Context")+".Consumer";case ge:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:ae(t.type)||"Memo";case S:s=t._payload,t=t._init;try{return ae(t(s))}catch{}}return null}var Ne=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},xe=[],Te=-1;function T(t){return{current:t}}function C(t){0>Te||(t.current=xe[Te],xe[Te]=null,Te--)}function U(t,s){Te++,xe[Te]=t.current,t.current=s}var k=T(null),H=T(null),ie=T(null),fe=T(null);function Ce(t,s){switch(U(ie,s),U(H,t),U(k,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Hy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Hy(s),t=Fy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}C(k),U(k,t)}function ke(){C(k),C(H),C(ie)}function rt(t){t.memoizedState!==null&&U(fe,t);var s=k.current,a=Fy(s,t.type);s!==a&&(U(H,t),U(k,a))}function It(t){H.current===t&&(C(k),C(H)),fe.current===t&&(C(fe),Bo._currentValue=te)}var ot,oe;function _e(t){if(ot===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ot=s&&s[1]||"",oe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+t+oe}var he=!1;function Re(t,s){if(!t||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var X=ee}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(ee){X=ee}t.call(ue.prototype)}}else{try{throw Error()}catch(ee){X=ee}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var O=v.split(`
`),$=w.split(`
`);for(h=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(o===O.length||h===$.length)for(o=O.length-1,h=$.length-1;1<=o&&0<=h&&O[o]!==$[h];)h--;for(;1<=o&&0<=h;o--,h--)if(O[o]!==$[h]){if(o!==1||h!==1)do if(o--,h--,0>h||O[o]!==$[h]){var re=`
`+O[o].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=o&&0<=h);break}}}finally{he=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?_e(a):""}function He(t,s){switch(t.tag){case 26:case 27:case 5:return _e(t.type);case 16:return _e("Lazy");case 13:return t.child!==s&&s!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Re(t.type,!1);case 11:return Re(t.type.render,!1);case 1:return Re(t.type,!0);case 31:return _e("Activity");default:return""}}function be(t){try{var s="",a=null;do s+=He(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ke=Object.prototype.hasOwnProperty,Xe=r.unstable_scheduleCallback,ne=r.unstable_cancelCallback,Ie=r.unstable_shouldYield,We=r.unstable_requestPaint,ct=r.unstable_now,xn=r.unstable_getCurrentPriorityLevel,ze=r.unstable_ImmediatePriority,Et=r.unstable_UserBlockingPriority,vn=r.unstable_NormalPriority,Rn=r.unstable_LowPriority,zr=r.unstable_IdlePriority,Hi=r.log,or=r.unstable_setDisableYieldValue,on=null,kt=null;function cn(t){if(typeof Hi=="function"&&or(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(on,t)}catch{}}var bt=Math.clz32?Math.clz32:Ic,Bn=Math.log,Br=Math.LN2;function Ic(t){return t>>>=0,t===0?32:31-(Bn(t)/Br|0)|0}var Is=256,Fi=262144,Ft=4194304;function ks(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ds(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~m,o!==0?h=ks(o):(v&=w,v!==0?h=ks(v):a||(a=w&~t,a!==0&&(h=ks(a))))):(w=o&~m,w!==0?h=ks(w):v!==0?h=ks(v):a||(a=o&~t,a!==0&&(h=ks(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function ps(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ch(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(){var t=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),t}function Ms(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Gi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function uh(t,s,a,o,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,O=t.expirationTimes,$=t.hiddenUpdates;for(a=v&~a;0<a;){var re=31-bt(a),ue=1<<re;w[re]=0,O[re]=-1;var X=$[re];if(X!==null)for($[re]=null,re=0;re<X.length;re++){var ee=X[re];ee!==null&&(ee.lane&=-536870913)}a&=~ue}o!==0&&Yi(t,o,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Yi(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-bt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Gl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-bt(a),h=1<<o;h&s|t[o]&s&&(t[o]|=s),a&=~h}}function Yl(t,s){var a=s&-s;return a=(a&42)!==0?1:Ki(a),(a&(t.suspendedLanes|s))!==0?0:a}function Ki(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function cr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Dc(){var t=q.p;return t!==0?t:(t=window.event,t===void 0?32:fx(t.type))}function ys(t,s){var a=q.p;try{return q.p=t,s()}finally{q.p=a}}var xs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+xs,sn="__reactProps$"+xs,Os="__reactContainer$"+xs,Da="__reactEvents$"+xs,dh="__reactListeners$"+xs,Mc="__reactHandles$"+xs,Oc="__reactResources$"+xs,Vs="__reactMarker$"+xs;function Ma(t){delete t[Gt],delete t[sn],delete t[Da],delete t[dh],delete t[Mc]}function Ls(t){var s=t[Gt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Os]||a[Gt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Wy(t);t!==null;){if(a=t[Gt])return a;t=Wy(t)}return s}t=a,a=t.parentNode}return null}function ts(t){if(t=t[Gt]||t[Os]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function qn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Ps(t){var s=t[Oc];return s||(s=t[Oc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Yt(t){t[Vs]=!0}var Kl=new Set,$l={};function Us(t,s){zs(t,s),zs(t+"Capture",s)}function zs(t,s){for($l[t]=s,t=0;t<s.length;t++)Kl.add(s[t])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Wl={};function Vc(t){return Ke.call(Wl,t)?!0:Ke.call(Xl,t)?!1:Ql.test(t)?Wl[t]=!0:(Xl[t]=!0,!1)}function Oa(t,s,a){if(Vc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Hn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Kt(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Zl(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ft(t){if(!t._valueTracker){var s=qr(t)?"checked":"value";t._valueTracker=Zl(t,s,""+t[s])}}function $i(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=qr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function Bs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qi=/[\n"\\]/g;function In(t){return t.replace(Qi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Va(t,s,a,o,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+rn(s)):t.value!==""+rn(s)&&(t.value=""+rn(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Jl(t,v,rn(s)):a!=null?Jl(t,v,rn(a)):o!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+rn(w):t.removeAttribute("name")}function Lc(t,s,a,o,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ft(t);return}a=a!=null?""+rn(a):"",s=s!=null?""+rn(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ft(t)}function Jl(t,s,a){s==="number"&&Bs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Hr(t,s,a,o){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+rn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Pc(t,s,a){if(s!=null&&(s=""+rn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+rn(a):""}function Fr(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(i(92));if(Ne(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=rn(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),ft(t)}function kn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eo(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Uc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function to(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&a[h]!==o&&eo(t,h,o)}else for(var m in s)s.hasOwnProperty(m)&&eo(t,m,s[m])}function La(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return Gr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vs(){}var no=null;function ns(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yr=null,qs=null;function Xi(t){var s=ts(t);if(s&&(t=s.stateNode)){var a=t[sn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+In(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var h=o[sn]||null;if(!h)throw Error(i(90));Va(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&$i(o)}break e;case"textarea":Pc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Hr(t,!!a.multiple,s,!1)}}}var Ua=!1;function Kr(t,s,a){if(Ua)return t(s,a);Ua=!0;try{var o=t(s);return o}finally{if(Ua=!1,(Yr!==null||qs!==null)&&(Du(),Yr&&(s=Yr,t=qs,qs=Yr=null,Xi(s),t)))for(s=0;s<t.length;s++)Xi(t[s])}}function bs(t,s){var a=t.stateNode;if(a===null)return null;var o=a[sn]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=!1;if(ss)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{Wi=!1}var Hs=null,so=null,Zi=null;function ro(){if(Zi)return Zi;var t,s=so,a=s.length,o,h="value"in Hs?Hs.value:Hs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===h[m-o];o++);return Zi=h.slice(t,1<o?1-o:void 0)}function Ji(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ur(){return!0}function _s(){return!1}function un(t){function s(a,o,h,m,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ur:_s,this.isPropagationStopped=_s,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),s}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fs=un(dr),$r=E({},dr,{view:0,detail:0}),io=un($r),Qr,za,Gs,Ba=E({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gs&&(Gs&&t.type==="mousemove"?(Qr=t.screenX-Gs.screenX,za=t.screenY-Gs.screenY):za=Qr=0,Gs=t),Qr)},movementY:function(t){return"movementY"in t?t.movementY:za}}),ao=un(Ba),ea=E({},Ba,{dataTransfer:0}),Bc=un(ea),qc=E({},$r,{relatedTarget:0}),ta=un(qc),lo=E({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=un(lo),qa=E({},dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fc=un(qa),Gc=E({},dr,{data:0}),Ys=un(Gc),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=$c[t])?!!s[t]:!1}function Xr(){return Qc}var An=E({},$r,{key:function(t){if(t.key){var s=Yc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ji(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(t){return t.type==="keypress"?Ji(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ji(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xc=un(An),Wc=E({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hr=un(Wc),d=E({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),g=un(d),b=E({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=un(b),F=E({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=un(F),pe=E({},dr,{newState:0,oldState:0}),Fe=un(pe),Pt=[9,13,27,32],ut=ss&&"CompositionEvent"in window,Ct=null;ss&&"documentMode"in document&&(Ct=document.documentMode);var rs=ss&&"TextEvent"in window&&!Ct,Ks=ss&&(!ut||Ct&&8<Ct&&11>=Ct),ws=" ",Es=!1;function na(t,s){switch(t){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function K1(t,s){switch(t){case"compositionend":return Ha(s);case"keypress":return s.which!==32?null:(Es=!0,ws);case"textInput":return t=s.data,t===ws&&Es?null:t;default:return null}}function $1(t,s){if(Fa)return t==="compositionend"||!ut&&na(t,s)?(t=ro(),Zi=so=Hs=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var Q1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ep(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Q1[t.type]:s==="textarea"}function tp(t,s,a,o){Yr?qs?qs.push(o):qs=[o]:Yr=o,s=zu(s,"onChange"),0<s.length&&(a=new Fs("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var oo=null,co=null;function X1(t){Ly(t,0)}function Zc(t){var s=qn(t);if($i(s))return t}function np(t,s){if(t==="change")return s}var sp=!1;if(ss){var hh;if(ss){var fh="oninput"in document;if(!fh){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),fh=typeof rp.oninput=="function"}hh=fh}else hh=!1;sp=hh&&(!document.documentMode||9<document.documentMode)}function ip(){oo&&(oo.detachEvent("onpropertychange",ap),co=oo=null)}function ap(t){if(t.propertyName==="value"&&Zc(co)){var s=[];tp(s,co,t,ns(t)),Kr(X1,s)}}function W1(t,s,a){t==="focusin"?(ip(),oo=s,co=a,oo.attachEvent("onpropertychange",ap)):t==="focusout"&&ip()}function Z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(co)}function J1(t,s){if(t==="click")return Zc(s)}function ew(t,s){if(t==="input"||t==="change")return Zc(s)}function tw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Fn=typeof Object.is=="function"?Object.is:tw;function uo(t,s){if(Fn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Ke.call(s,h)||!Fn(t[h],s[h]))return!1}return!0}function lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function op(t,s){var a=lp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lp(a)}}function cp(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?cp(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function up(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Bs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Bs(t.document)}return s}function mh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var nw=ss&&"documentMode"in document&&11>=document.documentMode,Ga=null,gh=null,ho=null,ph=!1;function dp(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ph||Ga==null||Ga!==Bs(o)||(o=Ga,"selectionStart"in o&&mh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ho&&uo(ho,o)||(ho=o,o=zu(gh,"onSelect"),0<o.length&&(s=new Fs("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ga)))}function sa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ya={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},yh={},hp={};ss&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function ra(t){if(yh[t])return yh[t];if(!Ya[t])return t;var s=Ya[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in hp)return yh[t]=s[a];return t}var fp=ra("animationend"),mp=ra("animationiteration"),gp=ra("animationstart"),sw=ra("transitionrun"),rw=ra("transitionstart"),iw=ra("transitioncancel"),pp=ra("transitionend"),yp=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function Ts(t,s){yp.set(t,s),Us(s,[t])}var Jc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],Ka=0,vh=0;function eu(){for(var t=Ka,s=vh=Ka=0;s<t;){var a=is[s];is[s++]=null;var o=is[s];is[s++]=null;var h=is[s];is[s++]=null;var m=is[s];if(is[s++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}m!==0&&xp(a,h,m)}}function tu(t,s,a,o){is[Ka++]=t,is[Ka++]=s,is[Ka++]=a,is[Ka++]=o,vh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function bh(t,s,a,o){return tu(t,s,a,o),nu(t)}function ia(t,s){return tu(t,null,null,s),nu(t)}function xp(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-bt(a),t=m.hiddenUpdates,o=t[h],o===null?t[h]=[s]:o.push(s),s.lane=a|536870912),m):null}function nu(t){if(50<Mo)throw Mo=0,Rf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var $a={};function aw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,s,a,o){return new aw(t,s,a,o)}function _h(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fr(t,s){var a=t.alternate;return a===null?(a=Gn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function vp(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function su(t,s,a,o,h,m){var v=0;if(o=t,typeof t=="function")_h(t)&&(v=1);else if(typeof t=="string")v=d2(t,a,k.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Gn(31,a,s,h),t.elementType=j,t.lanes=m,t;case Q:return aa(a.children,h,m,s);case V:v=8,h|=24;break;case se:return t=Gn(12,a,s,h|2),t.elementType=se,t.lanes=m,t;case ve:return t=Gn(13,a,s,h),t.elementType=ve,t.lanes=m,t;case ye:return t=Gn(19,a,s,h),t.elementType=ye,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:v=10;break e;case W:v=9;break e;case ge:v=11;break e;case I:v=14;break e;case S:v=16,o=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=Gn(v,a,s,h),s.elementType=t,s.type=o,s.lanes=m,s}function aa(t,s,a,o){return t=Gn(7,t,o,s),t.lanes=a,t}function wh(t,s,a){return t=Gn(6,t,null,s),t.lanes=a,t}function bp(t){var s=Gn(18,null,null,0);return s.stateNode=t,s}function Eh(t,s,a){return s=Gn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var _p=new WeakMap;function as(t,s){if(typeof t=="object"&&t!==null){var a=_p.get(t);return a!==void 0?a:(s={value:t,source:s,stack:be(s)},_p.set(t,s),s)}return{value:t,source:s,stack:be(s)}}var Qa=[],Xa=0,ru=null,fo=0,ls=[],os=0,Wr=null,$s=1,Qs="";function mr(t,s){Qa[Xa++]=fo,Qa[Xa++]=ru,ru=t,fo=s}function wp(t,s,a){ls[os++]=$s,ls[os++]=Qs,ls[os++]=Wr,Wr=t;var o=$s;t=Qs;var h=32-bt(o)-1;o&=~(1<<h),a+=1;var m=32-bt(s)+h;if(30<m){var v=h-h%5;m=(o&(1<<v)-1).toString(32),o>>=v,h-=v,$s=1<<32-bt(s)+h|a<<h|o,Qs=m+t}else $s=1<<m|a<<h|o,Qs=t}function Th(t){t.return!==null&&(mr(t,1),wp(t,1,0))}function Sh(t){for(;t===ru;)ru=Qa[--Xa],Qa[Xa]=null,fo=Qa[--Xa],Qa[Xa]=null;for(;t===Wr;)Wr=ls[--os],ls[os]=null,Qs=ls[--os],ls[os]=null,$s=ls[--os],ls[os]=null}function Ep(t,s){ls[os++]=$s,ls[os++]=Qs,ls[os++]=Wr,$s=s.id,Qs=s.overflow,Wr=t}var dn=null,St=null,st=!1,Zr=null,cs=!1,Nh=Error(i(519));function Jr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mo(as(s,t)),Nh}function Tp(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Gt]=t,s[sn]=o,a){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(a=0;a<Vo.length;a++)Qe(Vo[a],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),Lc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),Fr(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||By(s.textContent,a)?(o.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),o.onScroll!=null&&Qe("scroll",s),o.onScrollEnd!=null&&Qe("scrollend",s),o.onClick!=null&&(s.onclick=vs),s=!0):s=!1,s||Jr(t,!0)}function Sp(t){for(dn=t.return;dn;)switch(dn.tag){case 5:case 31:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:dn=dn.return}}function Wa(t){if(t!==dn)return!1;if(!st)return Sp(t),st=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Gf(t.type,t.memoizedProps)),a=!a),a&&St&&Jr(t),Sp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));St=Xy(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));St=Xy(t)}else s===27?(s=St,fi(t.type)?(t=Xf,Xf=null,St=t):St=s):St=dn?ds(t.stateNode.nextSibling):null;return!0}function la(){St=dn=null,st=!1}function Ah(){var t=Zr;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),Zr=null),t}function mo(t){Zr===null?Zr=[t]:Zr.push(t)}var jh=T(null),oa=null,gr=null;function ei(t,s,a){U(jh,s._currentValue),s._currentValue=a}function pr(t){t._currentValue=jh.current,C(jh)}function Ch(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Rh(t,s,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var O=0;O<s.length;O++)if(w.context===s[O]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Ch(m.return,a,t),o||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(i(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Ch(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Za(t,s,a,o){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var w=h.type;Fn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===fe.current){if(v=h.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Bo):t=[Bo])}h=h.return}t!==null&&Rh(s,t,a,o),s.flags|=262144}function iu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){oa=t,gr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hn(t){return Np(oa,t)}function au(t,s){return oa===null&&ca(t),Np(t,s)}function Np(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},gr===null){if(t===null)throw Error(i(308));gr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else gr=gr.next=s;return a}var lw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},ow=r.unstable_scheduleCallback,cw=r.unstable_NormalPriority,$t={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ih(){return{controller:new lw,data:new Map,refCount:0}}function go(t){t.refCount--,t.refCount===0&&ow(cw,function(){t.controller.abort()})}var po=null,kh=0,Ja=0,el=null;function uw(t,s){if(po===null){var a=po=[];kh=0,Ja=Vf(),el={status:"pending",value:void 0,then:function(o){a.push(o)}}}return kh++,s.then(Ap,Ap),s}function Ap(){if(--kh===0&&po!==null){el!==null&&(el.status="fulfilled");var t=po;po=null,Ja=0,el=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function dw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var jp=Y.S;Y.S=function(t,s){dy=ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&uw(t,s),jp!==null&&jp(t,s)};var ua=T(null);function Dh(){var t=ua.current;return t!==null?t:_t.pooledCache}function lu(t,s){s===null?U(ua,ua.current):U(ua,s.pool)}function Cp(){var t=Dh();return t===null?null:{parent:$t._currentValue,pool:t}}var tl=Error(i(460)),Mh=Error(i(474)),ou=Error(i(542)),cu={then:function(){}};function Rp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ip(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(vs,vs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dp(t),t;default:if(typeof s.status=="string")s.then(vs,vs);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dp(t),t}throw ha=s,tl}}function da(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ha=a,tl):a}}var ha=null;function kp(){if(ha===null)throw Error(i(459));var t=ha;return ha=null,t}function Dp(t){if(t===tl||t===ou)throw Error(i(483))}var nl=null,yo=0;function uu(t){var s=yo;return yo+=1,nl===null&&(nl=[]),Ip(nl,t,s)}function xo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function du(t,s){throw s.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Mp(t){function s(B,P){if(t){var K=B.deletions;K===null?(B.deletions=[P],B.flags|=16):K.push(P)}}function a(B,P){if(!t)return null;for(;P!==null;)s(B,P),P=P.sibling;return null}function o(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function h(B,P){return B=fr(B,P),B.index=0,B.sibling=null,B}function m(B,P,K){return B.index=K,t?(K=B.alternate,K!==null?(K=K.index,K<P?(B.flags|=67108866,P):K):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,P,K,le){return P===null||P.tag!==6?(P=wh(K,B.mode,le),P.return=B,P):(P=h(P,K),P.return=B,P)}function O(B,P,K,le){var De=K.type;return De===Q?re(B,P,K.props.children,le,K.key):P!==null&&(P.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===S&&da(De)===P.type)?(P=h(P,K.props),xo(P,K),P.return=B,P):(P=su(K.type,K.key,K.props,null,B.mode,le),xo(P,K),P.return=B,P)}function $(B,P,K,le){return P===null||P.tag!==4||P.stateNode.containerInfo!==K.containerInfo||P.stateNode.implementation!==K.implementation?(P=Eh(K,B.mode,le),P.return=B,P):(P=h(P,K.children||[]),P.return=B,P)}function re(B,P,K,le,De){return P===null||P.tag!==7?(P=aa(K,B.mode,le,De),P.return=B,P):(P=h(P,K),P.return=B,P)}function ue(B,P,K){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=wh(""+P,B.mode,K),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case z:return K=su(P.type,P.key,P.props,null,B.mode,K),xo(K,P),K.return=B,K;case G:return P=Eh(P,B.mode,K),P.return=B,P;case S:return P=da(P),ue(B,P,K)}if(Ne(P)||L(P))return P=aa(P,B.mode,K,null),P.return=B,P;if(typeof P.then=="function")return ue(B,uu(P),K);if(P.$$typeof===me)return ue(B,au(B,P),K);du(B,P)}return null}function X(B,P,K,le){var De=P!==null?P.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return De!==null?null:w(B,P,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case z:return K.key===De?O(B,P,K,le):null;case G:return K.key===De?$(B,P,K,le):null;case S:return K=da(K),X(B,P,K,le)}if(Ne(K)||L(K))return De!==null?null:re(B,P,K,le,null);if(typeof K.then=="function")return X(B,P,uu(K),le);if(K.$$typeof===me)return X(B,P,au(B,K),le);du(B,K)}return null}function ee(B,P,K,le,De){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return B=B.get(K)||null,w(P,B,""+le,De);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case z:return B=B.get(le.key===null?K:le.key)||null,O(P,B,le,De);case G:return B=B.get(le.key===null?K:le.key)||null,$(P,B,le,De);case S:return le=da(le),ee(B,P,K,le,De)}if(Ne(le)||L(le))return B=B.get(K)||null,re(P,B,le,De,null);if(typeof le.then=="function")return ee(B,P,K,uu(le),De);if(le.$$typeof===me)return ee(B,P,K,au(P,le),De);du(P,le)}return null}function Se(B,P,K,le){for(var De=null,at=null,je=P,Ye=P=0,Je=null;je!==null&&Ye<K.length;Ye++){je.index>Ye?(Je=je,je=null):Je=je.sibling;var lt=X(B,je,K[Ye],le);if(lt===null){je===null&&(je=Je);break}t&&je&&lt.alternate===null&&s(B,je),P=m(lt,P,Ye),at===null?De=lt:at.sibling=lt,at=lt,je=Je}if(Ye===K.length)return a(B,je),st&&mr(B,Ye),De;if(je===null){for(;Ye<K.length;Ye++)je=ue(B,K[Ye],le),je!==null&&(P=m(je,P,Ye),at===null?De=je:at.sibling=je,at=je);return st&&mr(B,Ye),De}for(je=o(je);Ye<K.length;Ye++)Je=ee(je,B,Ye,K[Ye],le),Je!==null&&(t&&Je.alternate!==null&&je.delete(Je.key===null?Ye:Je.key),P=m(Je,P,Ye),at===null?De=Je:at.sibling=Je,at=Je);return t&&je.forEach(function(xi){return s(B,xi)}),st&&mr(B,Ye),De}function Oe(B,P,K,le){if(K==null)throw Error(i(151));for(var De=null,at=null,je=P,Ye=P=0,Je=null,lt=K.next();je!==null&&!lt.done;Ye++,lt=K.next()){je.index>Ye?(Je=je,je=null):Je=je.sibling;var xi=X(B,je,lt.value,le);if(xi===null){je===null&&(je=Je);break}t&&je&&xi.alternate===null&&s(B,je),P=m(xi,P,Ye),at===null?De=xi:at.sibling=xi,at=xi,je=Je}if(lt.done)return a(B,je),st&&mr(B,Ye),De;if(je===null){for(;!lt.done;Ye++,lt=K.next())lt=ue(B,lt.value,le),lt!==null&&(P=m(lt,P,Ye),at===null?De=lt:at.sibling=lt,at=lt);return st&&mr(B,Ye),De}for(je=o(je);!lt.done;Ye++,lt=K.next())lt=ee(je,B,Ye,lt.value,le),lt!==null&&(t&&lt.alternate!==null&&je.delete(lt.key===null?Ye:lt.key),P=m(lt,P,Ye),at===null?De=lt:at.sibling=lt,at=lt);return t&&je.forEach(function(w2){return s(B,w2)}),st&&mr(B,Ye),De}function vt(B,P,K,le){if(typeof K=="object"&&K!==null&&K.type===Q&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case z:e:{for(var De=K.key;P!==null;){if(P.key===De){if(De=K.type,De===Q){if(P.tag===7){a(B,P.sibling),le=h(P,K.props.children),le.return=B,B=le;break e}}else if(P.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===S&&da(De)===P.type){a(B,P.sibling),le=h(P,K.props),xo(le,K),le.return=B,B=le;break e}a(B,P);break}else s(B,P);P=P.sibling}K.type===Q?(le=aa(K.props.children,B.mode,le,K.key),le.return=B,B=le):(le=su(K.type,K.key,K.props,null,B.mode,le),xo(le,K),le.return=B,B=le)}return v(B);case G:e:{for(De=K.key;P!==null;){if(P.key===De)if(P.tag===4&&P.stateNode.containerInfo===K.containerInfo&&P.stateNode.implementation===K.implementation){a(B,P.sibling),le=h(P,K.children||[]),le.return=B,B=le;break e}else{a(B,P);break}else s(B,P);P=P.sibling}le=Eh(K,B.mode,le),le.return=B,B=le}return v(B);case S:return K=da(K),vt(B,P,K,le)}if(Ne(K))return Se(B,P,K,le);if(L(K)){if(De=L(K),typeof De!="function")throw Error(i(150));return K=De.call(K),Oe(B,P,K,le)}if(typeof K.then=="function")return vt(B,P,uu(K),le);if(K.$$typeof===me)return vt(B,P,au(B,K),le);du(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,P!==null&&P.tag===6?(a(B,P.sibling),le=h(P,K),le.return=B,B=le):(a(B,P),le=wh(K,B.mode,le),le.return=B,B=le),v(B)):a(B,P)}return function(B,P,K,le){try{yo=0;var De=vt(B,P,K,le);return nl=null,De}catch(je){if(je===tl||je===ou)throw je;var at=Gn(29,je,null,B.mode);return at.lanes=le,at.return=B,at}finally{}}}var fa=Mp(!0),Op=Mp(!1),ti=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function si(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(dt&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=nu(t),xp(t,null,a),s}return tu(t,o,s,a),nu(t)}function vo(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Gl(t,a)}}function Lh(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Ph=!1;function bo(){if(Ph){var t=el;if(t!==null)throw t}}function _o(t,s,a,o){Ph=!1;var h=t.updateQueue;ti=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var O=w,$=O.next;O.next=null,v===null?m=$:v.next=$,v=O;var re=t.alternate;re!==null&&(re=re.updateQueue,w=re.lastBaseUpdate,w!==v&&(w===null?re.firstBaseUpdate=$:w.next=$,re.lastBaseUpdate=O))}if(m!==null){var ue=h.baseState;v=0,re=$=O=null,w=m;do{var X=w.lane&-536870913,ee=X!==w.lane;if(ee?(Ze&X)===X:(o&X)===X){X!==0&&X===Ja&&(Ph=!0),re!==null&&(re=re.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,Oe=w;X=s;var vt=a;switch(Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){ue=Se.call(vt,ue,X);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Oe.payload,X=typeof Se=="function"?Se.call(vt,ue,X):Se,X==null)break e;ue=E({},ue,X);break e;case 2:ti=!0}}X=w.callback,X!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:w.tag,payload:w.payload,callback:w.callback,next:null},re===null?($=re=ee,O=ue):re=re.next=ee,v|=X;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;ee=w,w=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);re===null&&(O=ue),h.baseState=O,h.firstBaseUpdate=$,h.lastBaseUpdate=re,m===null&&(h.shared.lanes=0),oi|=v,t.lanes=v,t.memoizedState=ue}}function Vp(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Lp(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Vp(a[t],s)}var sl=T(null),hu=T(0);function Pp(t,s){t=Sr,U(hu,t),U(sl,s),Sr=t|s.baseLanes}function Uh(){U(hu,Sr),U(sl,sl.current)}function zh(){Sr=hu.current,C(sl),C(hu)}var Yn=T(null),us=null;function ri(t){var s=t.alternate;U(Ut,Ut.current&1),U(Yn,t),us===null&&(s===null||sl.current!==null||s.memoizedState!==null)&&(us=t)}function Bh(t){U(Ut,Ut.current),U(Yn,t),us===null&&(us=t)}function Up(t){t.tag===22?(U(Ut,Ut.current),U(Yn,t),us===null&&(us=t)):ii()}function ii(){U(Ut,Ut.current),U(Yn,Yn.current)}function Kn(t){C(Yn),us===t&&(us=null),C(Ut)}var Ut=T(0);function fu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$f(a)||Qf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yr=0,Ge=null,yt=null,Qt=null,mu=!1,rl=!1,ma=!1,gu=0,wo=0,il=null,hw=0;function Vt(){throw Error(i(321))}function qh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Fn(t[a],s[a]))return!1;return!0}function Hh(t,s,a,o,h,m){return yr=m,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=t===null||t.memoizedState===null?w0:rf,ma=!1,m=a(o,h),ma=!1,rl&&(m=Bp(s,a,o,h)),zp(t),m}function zp(t){Y.H=So;var s=yt!==null&&yt.next!==null;if(yr=0,Qt=yt=Ge=null,mu=!1,wo=0,il=null,s)throw Error(i(300));t===null||Xt||(t=t.dependencies,t!==null&&iu(t)&&(Xt=!0))}function Bp(t,s,a,o){Ge=t;var h=0;do{if(rl&&(il=null),wo=0,rl=!1,25<=h)throw Error(i(301));if(h+=1,Qt=yt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=E0,m=s(a,o)}while(rl);return m}function fw(){var t=Y.H,s=t.useState()[0];return s=typeof s.then=="function"?Eo(s):s,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function Fh(){var t=gu!==0;return gu=0,t}function Gh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Yh(t){if(mu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}mu=!1}yr=0,Qt=yt=Ge=null,rl=!1,wo=gu=0,il=null}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ge.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function zt(){if(yt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var s=Qt===null?Ge.memoizedState:Qt.next;if(s!==null)Qt=s,yt=t;else{if(t===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Qt===null?Ge.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(t){var s=wo;return wo+=1,il===null&&(il=[]),t=Ip(il,t,s),s=Ge,(Qt===null?s.memoizedState:Qt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?w0:rf),t}function yu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Eo(t);if(t.$$typeof===me)return hn(t)}throw Error(i(438,String(t)))}function Kh(t){var s=null,a=Ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ge.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=pu(),Ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=M;return s.index++,a}function xr(t,s){return typeof s=="function"?s(t):s}function xu(t){var s=zt();return $h(s,yt,t)}function $h(t,s,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var h=t.baseQueue,m=o.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,o.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=v=null,O=null,$=s,re=!1;do{var ue=$.lane&-536870913;if(ue!==$.lane?(Ze&ue)===ue:(yr&ue)===ue){var X=$.revertLane;if(X===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ue===Ja&&(re=!0);else if((yr&X)===X){$=$.next,X===Ja&&(re=!0);continue}else ue={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(w=O=ue,v=m):O=O.next=ue,Ge.lanes|=X,oi|=X;ue=$.action,ma&&a(m,ue),m=$.hasEagerState?$.eagerState:a(m,ue)}else X={lane:ue,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(w=O=X,v=m):O=O.next=X,Ge.lanes|=ue,oi|=ue;$=$.next}while($!==null&&$!==s);if(O===null?v=m:O.next=w,!Fn(m,t.memoizedState)&&(Xt=!0,re&&(a=el,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=O,o.lastRenderedState=m}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Qh(t){var s=zt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Fn(m,s.memoizedState)||(Xt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function qp(t,s,a){var o=Ge,h=zt(),m=st;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var v=!Fn((yt||h).memoizedState,a);if(v&&(h.memoizedState=a,Xt=!0),h=h.queue,Zh(Gp.bind(null,o,h,t),[t]),h.getSnapshot!==s||v||Qt!==null&&Qt.memoizedState.tag&1){if(o.flags|=2048,al(9,{destroy:void 0},Fp.bind(null,o,h,a,s),null),_t===null)throw Error(i(349));m||(yr&127)!==0||Hp(o,s,a)}return a}function Hp(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ge.updateQueue,s===null?(s=pu(),Ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Fp(t,s,a,o){s.value=a,s.getSnapshot=o,Yp(s)&&Kp(t)}function Gp(t,s,a){return a(function(){Yp(s)&&Kp(t)})}function Yp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Fn(t,a)}catch{return!0}}function Kp(t){var s=ia(t,2);s!==null&&Ln(s,t,2)}function Xh(t){var s=jn();if(typeof t=="function"){var a=t;if(t=a(),ma){cn(!0);try{a()}finally{cn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:t},s}function $p(t,s,a,o){return t.baseState=a,$h(t,yt,typeof o=="function"?o:xr)}function mw(t,s,a,o,h){if(_u(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Y.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,Qp(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Qp(t,s){var a=s.action,o=s.payload,h=t.state;if(s.isTransition){var m=Y.T,v={};Y.T=v;try{var w=a(h,o),O=Y.S;O!==null&&O(v,w),Xp(t,s,w)}catch($){Wh(t,s,$)}finally{m!==null&&v.types!==null&&(m.types=v.types),Y.T=m}}else try{m=a(h,o),Xp(t,s,m)}catch($){Wh(t,s,$)}}function Xp(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Wp(t,s,o)},function(o){return Wh(t,s,o)}):Wp(t,s,a)}function Wp(t,s,a){s.status="fulfilled",s.value=a,Zp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Qp(t,a)))}function Wh(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,Zp(s),s=s.next;while(s!==o)}t.action=null}function Zp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Jp(t,s){return s}function e0(t,s){if(st){var a=_t.formState;if(a!==null){e:{var o=Ge;if(st){if(St){t:{for(var h=St,m=cs;h.nodeType!==8;){if(!m){h=null;break t}if(h=ds(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){St=ds(h.nextSibling),o=h.data==="F!";break e}}Jr(o)}o=!1}o&&(s=a[0])}}return a=jn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:s},a.queue=o,a=v0.bind(null,Ge,o),o.dispatch=a,o=Xh(!1),m=sf.bind(null,Ge,!1,o.queue),o=jn(),h={state:s,dispatch:null,action:t,pending:null},o.queue=h,a=mw.bind(null,Ge,h,m,a),h.dispatch=a,o.memoizedState=t,[s,a,!1]}function t0(t){var s=zt();return n0(s,yt,t)}function n0(t,s,a){if(s=$h(t,s,Jp)[0],t=xu(xr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Eo(s)}catch(v){throw v===tl?ou:v}else o=s;s=zt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Ge.flags|=2048,al(9,{destroy:void 0},gw.bind(null,h,a),null)),[o,m,t]}function gw(t,s){t.action=s}function s0(t){var s=zt(),a=yt;if(a!==null)return n0(s,a,t);zt(),s=s.memoizedState,a=zt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function al(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=pu(),Ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function r0(){return zt().memoizedState}function vu(t,s,a,o){var h=jn();Ge.flags|=t,h.memoizedState=al(1|s,{destroy:void 0},a,o===void 0?null:o)}function bu(t,s,a,o){var h=zt();o=o===void 0?null:o;var m=h.memoizedState.inst;yt!==null&&o!==null&&qh(o,yt.memoizedState.deps)?h.memoizedState=al(s,m,a,o):(Ge.flags|=t,h.memoizedState=al(1|s,m,a,o))}function i0(t,s){vu(8390656,8,t,s)}function Zh(t,s){bu(2048,8,t,s)}function pw(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=pu(),Ge.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function a0(t){var s=zt().memoizedState;return pw({ref:s,nextImpl:t}),function(){if((dt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function l0(t,s){return bu(4,2,t,s)}function o0(t,s){return bu(4,4,t,s)}function c0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function u0(t,s,a){a=a!=null?a.concat([t]):null,bu(4,4,c0.bind(null,s,t),a)}function Jh(){}function d0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&qh(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function h0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&qh(s,o[1]))return o[0];if(o=t(),ma){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,s],o}function ef(t,s,a){return a===void 0||(yr&1073741824)!==0&&(Ze&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=fy(),Ge.lanes|=t,oi|=t,a)}function f0(t,s,a,o){return Fn(a,s)?a:sl.current!==null?(t=ef(t,a,o),Fn(t,s)||(Xt=!0),t):(yr&42)===0||(yr&1073741824)!==0&&(Ze&261930)===0?(Xt=!0,t.memoizedState=a):(t=fy(),Ge.lanes|=t,oi|=t,s)}function m0(t,s,a,o,h){var m=q.p;q.p=m!==0&&8>m?m:8;var v=Y.T,w={};Y.T=w,sf(t,!1,s,a);try{var O=h(),$=Y.S;if($!==null&&$(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=dw(O,o);To(t,s,re,Xn(t))}else To(t,s,o,Xn(t))}catch(ue){To(t,s,{then:function(){},status:"rejected",reason:ue},Xn())}finally{q.p=m,v!==null&&w.types!==null&&(v.types=w.types),Y.T=v}}function yw(){}function tf(t,s,a,o){if(t.tag!==5)throw Error(i(476));var h=g0(t).queue;m0(t,h,s,te,a===null?yw:function(){return p0(t),a(o)})}function g0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:te},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function p0(t){var s=g0(t);s.next===null&&(s=t.alternate.memoizedState),To(t,s.next.queue,{},Xn())}function nf(){return hn(Bo)}function y0(){return zt().memoizedState}function x0(){return zt().memoizedState}function xw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Xn();t=ni(a);var o=si(s,t,a);o!==null&&(Ln(o,s,a),vo(o,s,a)),s={cache:Ih()},t.payload=s;return}s=s.return}}function vw(t,s,a){var o=Xn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},_u(t)?b0(s,a):(a=bh(t,s,a,o),a!==null&&(Ln(a,t,o),_0(a,s,o)))}function v0(t,s,a){var o=Xn();To(t,s,a,o)}function To(t,s,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(_u(t))b0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Fn(w,v))return tu(t,s,h,0),_t===null&&eu(),!1}catch{}finally{}if(a=bh(t,s,h,o),a!==null)return Ln(a,t,o),_0(a,s,o),!0}return!1}function sf(t,s,a,o){if(o={lane:2,revertLane:Vf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_u(t)){if(s)throw Error(i(479))}else s=bh(t,a,o,2),s!==null&&Ln(s,t,2)}function _u(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function b0(t,s){rl=mu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function _0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Gl(t,a)}}var So={readContext:hn,use:yu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};So.useEffectEvent=Vt;var w0={readContext:hn,use:yu,useCallback:function(t,s){return jn().memoizedState=[t,s===void 0?null:s],t},useContext:hn,useEffect:i0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,vu(4194308,4,c0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return vu(4194308,4,t,s)},useInsertionEffect:function(t,s){vu(4,2,t,s)},useMemo:function(t,s){var a=jn();s=s===void 0?null:s;var o=t();if(ma){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=jn();if(a!==void 0){var h=a(s);if(ma){cn(!0);try{a(s)}finally{cn(!1)}}}else h=s;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=vw.bind(null,Ge,t),[o.memoizedState,t]},useRef:function(t){var s=jn();return t={current:t},s.memoizedState=t},useState:function(t){t=Xh(t);var s=t.queue,a=v0.bind(null,Ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Jh,useDeferredValue:function(t,s){var a=jn();return ef(a,t,s)},useTransition:function(){var t=Xh(!1);return t=m0.bind(null,Ge,t.queue,!0,!1),jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ge,h=jn();if(st){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),_t===null)throw Error(i(349));(Ze&127)!==0||Hp(o,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,i0(Gp.bind(null,o,m,t),[t]),o.flags|=2048,al(9,{destroy:void 0},Fp.bind(null,o,m,a,s),null),a},useId:function(){var t=jn(),s=_t.identifierPrefix;if(st){var a=Qs,o=$s;a=(o&~(1<<32-bt(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=gu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=hw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:nf,useFormState:e0,useActionState:e0,useOptimistic:function(t){var s=jn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=sf.bind(null,Ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:Kh,useCacheRefresh:function(){return jn().memoizedState=xw.bind(null,Ge)},useEffectEvent:function(t){var s=jn(),a={impl:t};return s.memoizedState=a,function(){if((dt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},rf={readContext:hn,use:yu,useCallback:d0,useContext:hn,useEffect:Zh,useImperativeHandle:u0,useInsertionEffect:l0,useLayoutEffect:o0,useMemo:h0,useReducer:xu,useRef:r0,useState:function(){return xu(xr)},useDebugValue:Jh,useDeferredValue:function(t,s){var a=zt();return f0(a,yt.memoizedState,t,s)},useTransition:function(){var t=xu(xr)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:Eo(t),s]},useSyncExternalStore:qp,useId:y0,useHostTransitionStatus:nf,useFormState:t0,useActionState:t0,useOptimistic:function(t,s){var a=zt();return $p(a,yt,t,s)},useMemoCache:Kh,useCacheRefresh:x0};rf.useEffectEvent=a0;var E0={readContext:hn,use:yu,useCallback:d0,useContext:hn,useEffect:Zh,useImperativeHandle:u0,useInsertionEffect:l0,useLayoutEffect:o0,useMemo:h0,useReducer:Qh,useRef:r0,useState:function(){return Qh(xr)},useDebugValue:Jh,useDeferredValue:function(t,s){var a=zt();return yt===null?ef(a,t,s):f0(a,yt.memoizedState,t,s)},useTransition:function(){var t=Qh(xr)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:Eo(t),s]},useSyncExternalStore:qp,useId:y0,useHostTransitionStatus:nf,useFormState:s0,useActionState:s0,useOptimistic:function(t,s){var a=zt();return yt!==null?$p(a,yt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Kh,useCacheRefresh:x0};E0.useEffectEvent=a0;function af(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var lf={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Xn(),h=ni(o);h.payload=s,a!=null&&(h.callback=a),s=si(t,h,o),s!==null&&(Ln(s,t,o),vo(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Xn(),h=ni(o);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=si(t,h,o),s!==null&&(Ln(s,t,o),vo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Xn(),o=ni(a);o.tag=2,s!=null&&(o.callback=s),s=si(t,o,a),s!==null&&(Ln(s,t,a),vo(s,t,a))}};function T0(t,s,a,o,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!uo(a,o)||!uo(h,m):!0}function S0(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&lf.enqueueReplaceState(s,s.state,null)}function ga(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function N0(t){Jc(t)}function A0(t){console.error(t)}function j0(t){Jc(t)}function wu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function C0(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function of(t,s,a){return a=ni(a),a.tag=3,a.payload={element:null},a.callback=function(){wu(t,s)},a}function R0(t){return t=ni(t),t.tag=3,t}function I0(t,s,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;t.payload=function(){return h(m)},t.callback=function(){C0(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){C0(s,a,o),typeof h!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function bw(t,s,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Za(s,a,h,!0),a=Yn.current,a!==null){switch(a.tag){case 31:case 13:return us===null?Mu():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===cu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Df(t,o,h)),!1;case 22:return a.flags|=65536,o===cu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Df(t,o,h)),!1}throw Error(i(435,a.tag))}return Df(t,o,h),Mu(),!1}if(st)return s=Yn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==Nh&&(t=Error(i(422),{cause:o}),mo(as(t,a)))):(o!==Nh&&(s=Error(i(423),{cause:o}),mo(as(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=as(o,a),h=of(t.stateNode,o,h),Lh(t,h),Lt!==4&&(Lt=2)),!1;var m=Error(i(520),{cause:o});if(m=as(m,a),Do===null?Do=[m]:Do.push(m),Lt!==4&&(Lt=2),s===null)return!0;o=as(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=of(a.stateNode,o,t),Lh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ci===null||!ci.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=R0(h),I0(h,t,a,o),Lh(a,h),!1}a=a.return}while(a!==null);return!1}var cf=Error(i(461)),Xt=!1;function fn(t,s,a,o){s.child=t===null?Op(s,null,a,o):fa(s,t.child,a,o)}function k0(t,s,a,o,h){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var w in o)w!=="ref"&&(v[w]=o[w])}else v=o;return ca(s),o=Hh(t,s,a,v,m,h),w=Fh(),t!==null&&!Xt?(Gh(t,s,h),vr(t,s,h)):(st&&w&&Th(s),s.flags|=1,fn(t,s,o,h),s.child)}function D0(t,s,a,o,h){if(t===null){var m=a.type;return typeof m=="function"&&!_h(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,M0(t,s,m,o,h)):(t=su(a.type,null,o,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!yf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:uo,a(v,o)&&t.ref===s.ref)return vr(t,s,h)}return s.flags|=1,t=fr(m,o),t.ref=s.ref,t.return=s,s.child=t}function M0(t,s,a,o,h){if(t!==null){var m=t.memoizedProps;if(uo(m,o)&&t.ref===s.ref)if(Xt=!1,s.pendingProps=o=m,yf(t,h))(t.flags&131072)!==0&&(Xt=!0);else return s.lanes=t.lanes,vr(t,s,h)}return uf(t,s,a,o,h)}function O0(t,s,a,o){var h=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~m}else o=0,s.child=null;return V0(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(s,m!==null?m.cachePool:null),m!==null?Pp(s,m):Uh(),Up(s);else return o=s.lanes=536870912,V0(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(lu(s,m.cachePool),Pp(s,m),ii(),s.memoizedState=null):(t!==null&&lu(s,null),Uh(),ii());return fn(t,s,h,a),s.child}function No(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function V0(t,s,a,o,h){var m=Dh();return m=m===null?null:{parent:$t._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&lu(s,null),Uh(),Up(s),t!==null&&Za(t,s,o,!0),s.childLanes=h,null}function Eu(t,s){return s=Su({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function L0(t,s,a){return fa(s,t.child,null,a),t=Eu(s,s.pendingProps),t.flags|=2,Kn(s),s.memoizedState=null,t}function _w(t,s,a){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(st){if(o.mode==="hidden")return t=Eu(s,o),s.lanes=536870912,No(null,t);if(Bh(s),(t=St)?(t=Qy(t,cs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wr!==null?{id:$s,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=bp(t),a.return=s,s.child=a,dn=s,St=null)):t=null,t===null)throw Jr(s);return s.lanes=536870912,null}return Eu(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Bh(s),h)if(s.flags&256)s.flags&=-257,s=L0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Xt||Za(t,s,a,!1),h=(a&t.childLanes)!==0,Xt||h){if(o=_t,o!==null&&(v=Yl(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ia(t,v),Ln(o,t,v),cf;Mu(),s=L0(t,s,a)}else t=m.treeContext,St=ds(v.nextSibling),dn=s,st=!0,Zr=null,cs=!1,t!==null&&Ep(s,t),s=Eu(s,o),s.flags|=4096;return s}return t=fr(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Tu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function uf(t,s,a,o,h){return ca(s),a=Hh(t,s,a,o,void 0,h),o=Fh(),t!==null&&!Xt?(Gh(t,s,h),vr(t,s,h)):(st&&o&&Th(s),s.flags|=1,fn(t,s,a,h),s.child)}function P0(t,s,a,o,h,m){return ca(s),s.updateQueue=null,a=Bp(s,o,a,h),zp(t),o=Fh(),t!==null&&!Xt?(Gh(t,s,m),vr(t,s,m)):(st&&o&&Th(s),s.flags|=1,fn(t,s,a,m),s.child)}function U0(t,s,a,o,h){if(ca(s),s.stateNode===null){var m=$a,v=a.contextType;typeof v=="object"&&v!==null&&(m=hn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=lf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Oh(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?hn(v):$a,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(af(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&lf.enqueueReplaceState(m,m.state,null),_o(s,o,m,h),bo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,O=ga(a,w);m.props=O;var $=m.context,re=a.contextType;v=$a,typeof re=="object"&&re!==null&&(v=hn(re));var ue=a.getDerivedStateFromProps;re=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||$!==v)&&S0(s,m,o,v),ti=!1;var X=s.memoizedState;m.state=X,_o(s,o,m,h),bo(),$=s.memoizedState,w||X!==$||ti?(typeof ue=="function"&&(af(s,a,ue,o),$=s.memoizedState),(O=ti||T0(s,a,O,o,X,$,v))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=$),m.props=o,m.state=$,m.context=v,o=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Vh(t,s),v=s.memoizedProps,re=ga(a,v),m.props=re,ue=s.pendingProps,X=m.context,$=a.contextType,O=$a,typeof $=="object"&&$!==null&&(O=hn($)),w=a.getDerivedStateFromProps,($=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ue||X!==O)&&S0(s,m,o,O),ti=!1,X=s.memoizedState,m.state=X,_o(s,o,m,h),bo();var ee=s.memoizedState;v!==ue||X!==ee||ti||t!==null&&t.dependencies!==null&&iu(t.dependencies)?(typeof w=="function"&&(af(s,a,w,o),ee=s.memoizedState),(re=ti||T0(s,a,re,o,X,ee,O)||t!==null&&t.dependencies!==null&&iu(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ee,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ee,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=ee),m.props=o,m.state=ee,m.context=O,o=re):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Tu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=fa(s,t.child,null,h),s.child=fa(s,null,a,h)):fn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=vr(t,s,h),t}function z0(t,s,a,o){return la(),s.flags|=256,fn(t,s,a,o),s.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(t){return{baseLanes:t,cachePool:Cp()}}function ff(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Qn),t}function B0(t,s,a){var o=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(st){if(h?ri(s):ii(),(t=St)?(t=Qy(t,cs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wr!==null?{id:$s,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=bp(t),a.return=s,s.child=a,dn=s,St=null)):t=null,t===null)throw Jr(s);return Qf(t)?s.lanes=32:s.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(ii(),h=s.mode,w=Su({mode:"hidden",children:w},h),o=aa(o,h,a,null),w.return=s,o.return=s,w.sibling=o,s.child=w,o=s.child,o.memoizedState=hf(a),o.childLanes=ff(t,v,a),s.memoizedState=df,No(null,o)):(ri(s),mf(s,w))}var O=t.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(m)s.flags&256?(ri(s),s.flags&=-257,s=gf(t,s,a)):s.memoizedState!==null?(ii(),s.child=t.child,s.flags|=128,s=null):(ii(),w=o.fallback,h=s.mode,o=Su({mode:"visible",children:o.children},h),w=aa(w,h,a,null),w.flags|=2,o.return=s,w.return=s,o.sibling=w,s.child=o,fa(s,t.child,null,a),o=s.child,o.memoizedState=hf(a),o.childLanes=ff(t,v,a),s.memoizedState=df,s=No(null,o));else if(ri(s),Qf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var $=v.dgst;v=$,o=Error(i(419)),o.stack="",o.digest=v,mo({value:o,source:null,stack:null}),s=gf(t,s,a)}else if(Xt||Za(t,s,a,!1),v=(a&t.childLanes)!==0,Xt||v){if(v=_t,v!==null&&(o=Yl(v,a),o!==0&&o!==O.retryLane))throw O.retryLane=o,ia(t,o),Ln(v,t,o),cf;$f(w)||Mu(),s=gf(t,s,a)}else $f(w)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,St=ds(w.nextSibling),dn=s,st=!0,Zr=null,cs=!1,t!==null&&Ep(s,t),s=mf(s,o.children),s.flags|=4096);return s}return h?(ii(),w=o.fallback,h=s.mode,O=t.child,$=O.sibling,o=fr(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,$!==null?w=fr($,w):(w=aa(w,h,a,null),w.flags|=2),w.return=s,o.return=s,o.sibling=w,s.child=o,No(null,o),o=s.child,w=t.child.memoizedState,w===null?w=hf(a):(h=w.cachePool,h!==null?(O=$t._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=Cp(),w={baseLanes:w.baseLanes|a,cachePool:h}),o.memoizedState=w,o.childLanes=ff(t,v,a),s.memoizedState=df,No(t.child,o)):(ri(s),a=t.child,t=a.sibling,a=fr(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function mf(t,s){return s=Su({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Su(t,s){return t=Gn(22,t,null,s),t.lanes=0,t}function gf(t,s,a){return fa(s,t.child,null,a),t=mf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function q0(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Ch(t.return,s,a)}function pf(t,s,a,o,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function H0(t,s,a){var o=s.pendingProps,h=o.revealOrder,m=o.tail;o=o.children;var v=Ut.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,U(Ut,v),fn(t,s,o,a),o=st?fo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q0(t,a,s);else if(t.tag===19)q0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&fu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),pf(s,!1,h,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&fu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}pf(s,!0,a,null,m,o);break;case"together":pf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function vr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),oi|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Za(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=fr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=fr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function yf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&iu(t)))}function ww(t,s,a){switch(s.tag){case 3:Ce(s,s.stateNode.containerInfo),ei(s,$t,t.memoizedState.cache),la();break;case 27:case 5:rt(s);break;case 4:Ce(s,s.stateNode.containerInfo);break;case 10:ei(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bh(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ri(s),s.flags|=128,null):(a&s.child.childLanes)!==0?B0(t,s,a):(ri(s),t=vr(t,s,a),t!==null?t.sibling:null);ri(s);break;case 19:var h=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Za(t,s,a,!1),o=(a&s.childLanes)!==0),h){if(o)return H0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),U(Ut,Ut.current),o)break;return null;case 22:return s.lanes=0,O0(t,s,a,s.pendingProps);case 24:ei(s,$t,t.memoizedState.cache)}return vr(t,s,a)}function F0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Xt=!0;else{if(!yf(t,a)&&(s.flags&128)===0)return Xt=!1,ww(t,s,a);Xt=(t.flags&131072)!==0}else Xt=!1,st&&(s.flags&1048576)!==0&&wp(s,fo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=da(s.elementType),s.type=t,typeof t=="function")_h(t)?(o=ga(t,o),s.tag=1,s=U0(null,s,t,o,a)):(s.tag=0,s=uf(null,s,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ge){s.tag=11,s=k0(null,s,t,o,a);break e}else if(h===I){s.tag=14,s=D0(null,s,t,o,a);break e}}throw s=ae(t)||t,Error(i(306,s,""))}}return s;case 0:return uf(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,h=ga(o,s.pendingProps),U0(t,s,o,h,a);case 3:e:{if(Ce(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var m=s.memoizedState;h=m.element,Vh(t,s),_o(s,o,null,a);var v=s.memoizedState;if(o=v.cache,ei(s,$t,o),o!==m.cache&&Rh(s,[$t],a,!0),bo(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=z0(t,s,o,a);break e}else if(o!==h){h=as(Error(i(424)),s),mo(h),s=z0(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(St=ds(t.firstChild),dn=s,st=!0,Zr=null,cs=!0,a=Op(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(la(),o===h){s=vr(t,s,a);break e}fn(t,s,o,a)}s=s.child}return s;case 26:return Tu(t,s),t===null?(a=tx(s.type,null,s.pendingProps,null))?s.memoizedState=a:st||(a=s.type,t=s.pendingProps,o=Bu(ie.current).createElement(a),o[Gt]=s,o[sn]=t,mn(o,a,t),Yt(o),s.stateNode=o):s.memoizedState=tx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return rt(s),t===null&&st&&(o=s.stateNode=Zy(s.type,s.pendingProps,ie.current),dn=s,cs=!0,h=St,fi(s.type)?(Xf=h,St=ds(o.firstChild)):St=h),fn(t,s,s.pendingProps.children,a),Tu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&st&&((h=o=St)&&(o=Zw(o,s.type,s.pendingProps,cs),o!==null?(s.stateNode=o,dn=s,St=ds(o.firstChild),cs=!1,h=!0):h=!1),h||Jr(s)),rt(s),h=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Gf(h,m)?o=null:v!==null&&Gf(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Hh(t,s,fw,null,null,a),Bo._currentValue=h),Tu(t,s),fn(t,s,o,a),s.child;case 6:return t===null&&st&&((t=a=St)&&(a=Jw(a,s.pendingProps,cs),a!==null?(s.stateNode=a,dn=s,St=null,t=!0):t=!1),t||Jr(s)),null;case 13:return B0(t,s,a);case 4:return Ce(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=fa(s,null,o,a):fn(t,s,o,a),s.child;case 11:return k0(t,s,s.type,s.pendingProps,a);case 7:return fn(t,s,s.pendingProps,a),s.child;case 8:return fn(t,s,s.pendingProps.children,a),s.child;case 12:return fn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,ei(s,s.type,o.value),fn(t,s,o.children,a),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,ca(s),h=hn(h),o=o(h),s.flags|=1,fn(t,s,o,a),s.child;case 14:return D0(t,s,s.type,s.pendingProps,a);case 15:return M0(t,s,s.type,s.pendingProps,a);case 19:return H0(t,s,a);case 31:return _w(t,s,a);case 22:return O0(t,s,a,s.pendingProps);case 24:return ca(s),o=hn($t),t===null?(h=Dh(),h===null&&(h=_t,m=Ih(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:o,cache:h},Oh(s),ei(s,$t,h)):((t.lanes&a)!==0&&(Vh(t,s),_o(s,null,null,a),bo()),h=t.memoizedState,m=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ei(s,$t,o)):(o=m.cache,ei(s,$t,o),o!==h.cache&&Rh(s,[$t],a,!0))),fn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function br(t){t.flags|=4}function xf(t,s,a,o,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(yy())t.flags|=8192;else throw ha=cu,Mh}else t.flags&=-16777217}function G0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ax(s))if(yy())t.flags|=8192;else throw ha=cu,Mh}function Nu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?kc():536870912,t.lanes|=s,ul|=s)}function Ao(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Nt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function Ew(t,s,a){var o=s.pendingProps;switch(Sh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),pr($t),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wa(s)?br(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ah())),Nt(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(br(s),m!==null?(Nt(s),G0(s,m)):(Nt(s),xf(s,h,null,o,a))):m?m!==t.memoizedState?(br(s),Nt(s),G0(s,m)):(Nt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&br(s),Nt(s),xf(s,h,t,o,a)),null;case 27:if(It(s),a=ie.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&br(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}t=k.current,Wa(s)?Tp(s):(t=Zy(h,o,a),s.stateNode=t,br(s))}return Nt(s),null;case 5:if(It(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&br(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}if(m=k.current,Wa(s))Tp(s);else{var v=Bu(ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}m[Gt]=s,m[sn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(mn(m,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&br(s)}}return Nt(s),xf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&br(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=ie.current,Wa(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,h=dn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Gt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||By(t.nodeValue,a)),t||Jr(s,!0)}else t=Bu(t).createTextNode(o),t[Gt]=s,s.stateNode=t}return Nt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Wa(s),a!==null){if(t===null){if(!o)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Gt]=s}else la(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),t=!1}else a=Ah(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Kn(s),s):(Kn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Nt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Wa(s),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Gt]=s}else la(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),h=!1}else h=Ah(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Kn(s),s):(Kn(s),null)}return Kn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Nu(s,s.updateQueue),Nt(s),null);case 4:return ke(),t===null&&zf(s.stateNode.containerInfo),Nt(s),null;case 10:return pr(s.type),Nt(s),null;case 19:if(C(Ut),o=s.memoizedState,o===null)return Nt(s),null;if(h=(s.flags&128)!==0,m=o.rendering,m===null)if(h)Ao(o,!1);else{if(Lt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=fu(t),m!==null){for(s.flags|=128,Ao(o,!1),t=m.updateQueue,s.updateQueue=t,Nu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)vp(a,t),a=a.sibling;return U(Ut,Ut.current&1|2),st&&mr(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&ct()>Iu&&(s.flags|=128,h=!0,Ao(o,!1),s.lanes=4194304)}else{if(!h)if(t=fu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Nu(s,t),Ao(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!st)return Nt(s),null}else 2*ct()-o.renderingStartTime>Iu&&a!==536870912&&(s.flags|=128,h=!0,Ao(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ct(),t.sibling=null,a=Ut.current,U(Ut,h?a&1|2:a&1),st&&mr(s,o.treeForkCount),t):(Nt(s),null);case 22:case 23:return Kn(s),zh(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),a=s.updateQueue,a!==null&&Nu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&C(ua),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),pr($t),Nt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Tw(t,s){switch(Sh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return pr($t),ke(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return It(s),null;case 31:if(s.memoizedState!==null){if(Kn(s),s.alternate===null)throw Error(i(340));la()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Kn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));la()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return C(Ut),null;case 4:return ke(),null;case 10:return pr(s.type),null;case 22:case 23:return Kn(s),zh(),t!==null&&C(ua),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return pr($t),null;case 25:return null;default:return null}}function Y0(t,s){switch(Sh(s),s.tag){case 3:pr($t),ke();break;case 26:case 27:case 5:It(s);break;case 4:ke();break;case 31:s.memoizedState!==null&&Kn(s);break;case 13:Kn(s);break;case 19:C(Ut);break;case 10:pr(s.type);break;case 22:case 23:Kn(s),zh(),t!==null&&C(ua);break;case 24:pr($t)}}function jo(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==h)}}catch(w){gt(s,s.return,w)}}function ai(t,s,a){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&t)===t){var v=o.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=s;var O=a,$=w;try{$()}catch(re){gt(h,O,re)}}}o=o.next}while(o!==m)}}catch(re){gt(s,s.return,re)}}function K0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Lp(s,a)}catch(o){gt(t,t.return,o)}}}function $0(t,s,a){a.props=ga(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){gt(t,s,o)}}function Co(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){gt(t,s,h)}}function Xs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){gt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){gt(t,s,h)}else a.current=null}function Q0(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){gt(t,t.return,h)}}function vf(t,s,a){try{var o=t.stateNode;Yw(o,t.type,a,s),o[sn]=s}catch(h){gt(t,t.return,h)}}function X0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fi(t.type)||t.tag===4}function bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vs));else if(o!==4&&(o===27&&fi(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(_f(t,s,a),t=t.sibling;t!==null;)_f(t,s,a),t=t.sibling}function Au(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&fi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Au(t,s,a),t=t.sibling;t!==null;)Au(t,s,a),t=t.sibling}function W0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);mn(s,o,a),s[Gt]=t,s[sn]=a}catch(m){gt(t,t.return,m)}}var _r=!1,Wt=!1,wf=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,an=null;function Sw(t,s){if(t=t.containerInfo,Hf=$u,t=up(t),mh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,O=-1,$=0,re=0,ue=t,X=null;t:for(;;){for(var ee;ue!==a||h!==0&&ue.nodeType!==3||(w=v+h),ue!==m||o!==0&&ue.nodeType!==3||(O=v+o),ue.nodeType===3&&(v+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)X=ue,ue=ee;for(;;){if(ue===t)break t;if(X===a&&++$===h&&(w=v),X===m&&++re===o&&(O=v),(ee=ue.nextSibling)!==null)break;ue=X,X=ue.parentNode}ue=ee}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ff={focusedElem:t,selectionRange:a},$u=!1,an=s;an!==null;)if(s=an,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,an=t;else for(;an!==null;){switch(s=an,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var Se=ga(a.type,h);t=o.getSnapshotBeforeUpdate(Se,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Oe){gt(a,a.return,Oe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Kf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,an=t;break}an=s.return}}function J0(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(t,a),o&4&&jo(5,a);break;case 1:if(Er(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){gt(a,a.return,v)}else{var h=ga(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){gt(a,a.return,v)}}o&64&&K0(a),o&512&&Co(a,a.return);break;case 3:if(Er(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Lp(t,s)}catch(v){gt(a,a.return,v)}}break;case 27:s===null&&o&4&&W0(a);case 26:case 5:Er(t,a),s===null&&o&4&&Q0(a),o&512&&Co(a,a.return);break;case 12:Er(t,a);break;case 31:Er(t,a),o&4&&ny(t,a);break;case 13:Er(t,a),o&4&&sy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Mw.bind(null,a),e2(t,a))));break;case 22:if(o=a.memoizedState!==null||_r,!o){s=s!==null&&s.memoizedState!==null||Wt,h=_r;var m=Wt;_r=o,(Wt=s)&&!m?Tr(t,a,(a.subtreeFlags&8772)!==0):Er(t,a),_r=h,Wt=m}break;case 30:break;default:Er(t,a)}}function ey(t){var s=t.alternate;s!==null&&(t.alternate=null,ey(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ma(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,Dn=!1;function wr(t,s,a){for(a=a.child;a!==null;)ty(t,s,a),a=a.sibling}function ty(t,s,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(on,a)}catch{}switch(a.tag){case 26:Wt||Xs(a,s),wr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Wt||Xs(a,s);var o=Rt,h=Dn;fi(a.type)&&(Rt=a.stateNode,Dn=!1),wr(t,s,a),Po(a.stateNode),Rt=o,Dn=h;break;case 5:Wt||Xs(a,s);case 6:if(o=Rt,h=Dn,Rt=null,wr(t,s,a),Rt=o,Dn=h,Rt!==null)if(Dn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(m){gt(a,s,m)}else try{Rt.removeChild(a.stateNode)}catch(m){gt(a,s,m)}break;case 18:Rt!==null&&(Dn?(t=Rt,Ky(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xl(t)):Ky(Rt,a.stateNode));break;case 4:o=Rt,h=Dn,Rt=a.stateNode.containerInfo,Dn=!0,wr(t,s,a),Rt=o,Dn=h;break;case 0:case 11:case 14:case 15:ai(2,a,s),Wt||ai(4,a,s),wr(t,s,a);break;case 1:Wt||(Xs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&$0(a,s,o)),wr(t,s,a);break;case 21:wr(t,s,a);break;case 22:Wt=(o=Wt)||a.memoizedState!==null,wr(t,s,a),Wt=o;break;default:wr(t,s,a)}}function ny(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(a){gt(s,s.return,a)}}}function sy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(a){gt(s,s.return,a)}}function Nw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Z0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Z0),s;default:throw Error(i(435,t.tag))}}function ju(t,s){var a=Nw(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var h=Ow.bind(null,t,o);o.then(h,h)}})}function Mn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],m=t,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(fi(w.type)){Rt=w.stateNode,Dn=!1;break e}break;case 5:Rt=w.stateNode,Dn=!1;break e;case 3:case 4:Rt=w.stateNode.containerInfo,Dn=!0;break e}w=w.return}if(Rt===null)throw Error(i(160));ty(m,v,h),Rt=null,Dn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ry(s,t),s=s.sibling}var Ss=null;function ry(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(s,t),On(t),o&4&&(ai(3,t,t.return),jo(3,t),ai(5,t,t.return));break;case 1:Mn(s,t),On(t),o&512&&(Wt||a===null||Xs(a,a.return)),o&64&&_r&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ss;if(Mn(s,t),On(t),o&512&&(Wt||a===null||Xs(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Vs]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(o),h.head.insertBefore(m,h.querySelector("head > title"))),mn(m,o,a),m[Gt]=t,Yt(m),o=m;break e;case"link":var v=rx("link","href",h).get(o+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(o),mn(m,o,a),h.head.appendChild(m);break;case"meta":if(v=rx("meta","content",h).get(o+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(o),mn(m,o,a),h.head.appendChild(m);break;default:throw Error(i(468,o))}m[Gt]=t,Yt(m),o=m}t.stateNode=o}else ix(h,t.type,t.stateNode);else t.stateNode=sx(h,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?ix(h,t.type,t.stateNode):sx(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&vf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Mn(s,t),On(t),o&512&&(Wt||a===null||Xs(a,a.return)),a!==null&&o&4&&vf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Mn(s,t),On(t),o&512&&(Wt||a===null||Xs(a,a.return)),t.flags&32){h=t.stateNode;try{kn(h,"")}catch(Se){gt(t,t.return,Se)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,vf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(wf=!0);break;case 6:if(Mn(s,t),On(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Se){gt(t,t.return,Se)}}break;case 3:if(Fu=null,h=Ss,Ss=qu(s.containerInfo),Mn(s,t),Ss=h,On(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch(Se){gt(t,t.return,Se)}wf&&(wf=!1,iy(t));break;case 4:o=Ss,Ss=qu(t.stateNode.containerInfo),Mn(s,t),On(t),Ss=o;break;case 12:Mn(s,t),On(t);break;case 31:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ju(t,o)));break;case 13:Mn(s,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ru=ct()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ju(t,o)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,$=_r,re=Wt;if(_r=$||h,Wt=re||O,Mn(s,t),Wt=re,_r=$,On(t),o&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||O||_r||Wt||pa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(m=O.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=O.stateNode;var ue=O.memoizedProps.style,X=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;w.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){gt(O,O.return,Se)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(Se){gt(O,O.return,Se)}}}else if(s.tag===18){if(a===null){O=s;try{var ee=O.stateNode;h?$y(ee,!0):$y(O.stateNode,!1)}catch(Se){gt(O,O.return,Se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ju(t,a))));break;case 19:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ju(t,o)));break;case 30:break;case 21:break;default:Mn(s,t),On(t)}}function On(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(X0(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=bf(t);Au(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(kn(v,""),a.flags&=-33);var w=bf(t);Au(t,w,v);break;case 3:case 4:var O=a.stateNode.containerInfo,$=bf(t);_f(t,$,O);break;default:throw Error(i(161))}}catch(re){gt(t,t.return,re)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function iy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;iy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Er(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)J0(t,s.alternate,s),s=s.sibling}function pa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ai(4,s,s.return),pa(s);break;case 1:Xs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&$0(s,s.return,a),pa(s);break;case 27:Po(s.stateNode);case 26:case 5:Xs(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}t=t.sibling}}function Tr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Tr(h,m,a),jo(4,m);break;case 1:if(Tr(h,m,a),o=m,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){gt(o,o.return,$)}if(o=m,h=o.updateQueue,h!==null){var w=o.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Vp(O[h],w)}catch($){gt(o,o.return,$)}}a&&v&64&&K0(m),Co(m,m.return);break;case 27:W0(m);case 26:case 5:Tr(h,m,a),a&&o===null&&v&4&&Q0(m),Co(m,m.return);break;case 12:Tr(h,m,a);break;case 31:Tr(h,m,a),a&&v&4&&ny(h,m);break;case 13:Tr(h,m,a),a&&v&4&&sy(h,m);break;case 22:m.memoizedState===null&&Tr(h,m,a),Co(m,m.return);break;case 30:break;default:Tr(h,m,a)}s=s.sibling}}function Ef(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&go(a))}function Tf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t))}function Ns(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ay(t,s,a,o),s=s.sibling}function ay(t,s,a,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ns(t,s,a,o),h&2048&&jo(9,s);break;case 1:Ns(t,s,a,o);break;case 3:Ns(t,s,a,o),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t)));break;case 12:if(h&2048){Ns(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){gt(s,s.return,O)}}else Ns(t,s,a,o);break;case 31:Ns(t,s,a,o);break;case 13:Ns(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?Ns(t,s,a,o):Ro(t,s):m._visibility&2?Ns(t,s,a,o):(m._visibility|=2,ll(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Ef(v,s);break;case 24:Ns(t,s,a,o),h&2048&&Tf(s.alternate,s);break;default:Ns(t,s,a,o)}}function ll(t,s,a,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,w=a,O=o,$=v.flags;switch(v.tag){case 0:case 11:case 15:ll(m,v,w,O,h),jo(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?ll(m,v,w,O,h):Ro(m,v):(re._visibility|=2,ll(m,v,w,O,h)),h&&$&2048&&Ef(v.alternate,v);break;case 24:ll(m,v,w,O,h),h&&$&2048&&Tf(v.alternate,v);break;default:ll(m,v,w,O,h)}s=s.sibling}}function Ro(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,h=o.flags;switch(o.tag){case 22:Ro(a,o),h&2048&&Ef(o.alternate,o);break;case 24:Ro(a,o),h&2048&&Tf(o.alternate,o);break;default:Ro(a,o)}s=s.sibling}}var Io=8192;function ol(t,s,a){if(t.subtreeFlags&Io)for(t=t.child;t!==null;)ly(t,s,a),t=t.sibling}function ly(t,s,a){switch(t.tag){case 26:ol(t,s,a),t.flags&Io&&t.memoizedState!==null&&h2(a,Ss,t.memoizedState,t.memoizedProps);break;case 5:ol(t,s,a);break;case 3:case 4:var o=Ss;Ss=qu(t.stateNode.containerInfo),ol(t,s,a),Ss=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Io,Io=16777216,ol(t,s,a),Io=o):ol(t,s,a));break;default:ol(t,s,a)}}function oy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function ko(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];an=o,uy(o,t)}oy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cy(t),t=t.sibling}function cy(t){switch(t.tag){case 0:case 11:case 15:ko(t),t.flags&2048&&ai(9,t,t.return);break;case 3:ko(t);break;case 12:ko(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Cu(t)):ko(t);break;default:ko(t)}}function Cu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];an=o,uy(o,t)}oy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ai(8,s,s.return),Cu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Cu(s));break;default:Cu(s)}t=t.sibling}}function uy(t,s){for(;an!==null;){var a=an;switch(a.tag){case 0:case 11:case 15:ai(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:go(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,an=o;else e:for(a=t;an!==null;){o=an;var h=o.sibling,m=o.return;if(ey(o),o===a){an=null;break e}if(h!==null){h.return=m,an=h;break e}an=m}}}var Aw={getCacheForType:function(t){var s=hn($t),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return hn($t).controller.signal}},jw=typeof WeakMap=="function"?WeakMap:Map,dt=0,_t=null,$e=null,Ze=0,mt=0,$n=null,li=!1,cl=!1,Sf=!1,Sr=0,Lt=0,oi=0,ya=0,Nf=0,Qn=0,ul=0,Do=null,Vn=null,Af=!1,Ru=0,dy=0,Iu=1/0,ku=null,ci=null,tn=0,ui=null,dl=null,Nr=0,jf=0,Cf=null,hy=null,Mo=0,Rf=null;function Xn(){return(dt&2)!==0&&Ze!==0?Ze&-Ze:Y.T!==null?Vf():Dc()}function fy(){if(Qn===0)if((Ze&536870912)===0||st){var t=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),Qn=t}else Qn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Qn}function Ln(t,s,a){(t===_t&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(hl(t,0),di(t,Ze,Qn,!1)),Gi(t,a),((dt&2)===0||t!==_t)&&(t===_t&&((dt&2)===0&&(ya|=a),Lt===4&&di(t,Ze,Qn,!1)),Ws(t))}function my(t,s,a){if((dt&6)!==0)throw Error(i(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ps(t,s),h=o?Iw(t,s):kf(t,s,!0),m=o;do{if(h===0){cl&&!o&&di(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!Cw(a)){h=kf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=t;h=Do;var O=w.current.memoizedState.isDehydrated;if(O&&(hl(w,v).flags|=256),v=kf(w,v,!1),v!==2){if(Sf&&!O){w.errorRecoveryDisabledLanes|=m,ya|=m,h=4;break e}m=Vn,Vn=h,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){hl(t,0),di(t,s,0,!0);break}e:{switch(o=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:di(o,s,Qn,!li);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Ru+300-ct(),10<h)){if(di(o,s,Qn,!li),Ds(o,0,!0)!==0)break e;Nr=s,o.timeoutHandle=Gy(gy.bind(null,o,a,Vn,ku,Af,s,Qn,ya,ul,li,m,"Throttled",-0,0),h);break e}gy(o,a,Vn,ku,Af,s,Qn,ya,ul,li,m,null,-0,0)}}break}while(!0);Ws(t)}function gy(t,s,a,o,h,m,v,w,O,$,re,ue,X,ee){if(t.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vs},ly(s,m,ue);var Se=(m&62914560)===m?Ru-ct():(m&4194048)===m?dy-ct():0;if(Se=f2(ue,Se),Se!==null){Nr=m,t.cancelPendingCommit=Se(Ey.bind(null,t,s,m,a,o,h,v,w,O,re,ue,null,X,ee)),di(t,m,v,!$);return}}Ey(t,s,m,a,o,h,v,w,O)}function Cw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],m=h.getSnapshot;h=h.value;try{if(!Fn(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(t,s,a,o){s&=~Nf,s&=~ya,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var h=s;0<h;){var m=31-bt(h),v=1<<m;o[m]=-1,h&=~v}a!==0&&Yi(t,a,s)}function Du(){return(dt&6)===0?(Oo(0),!1):!0}function If(){if($e!==null){if(mt===0)var t=$e.return;else t=$e,gr=oa=null,Yh(t),nl=null,yo=0,t=$e;for(;t!==null;)Y0(t.alternate,t),t=t.return;$e=null}}function hl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Qw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Nr=0,If(),_t=t,$e=a=fr(t.current,null),Ze=s,mt=0,$n=null,li=!1,cl=ps(t,s),Sf=!1,ul=Qn=Nf=ya=oi=Lt=0,Vn=Do=null,Af=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var h=31-bt(o),m=1<<h;s|=t[h],o&=~m}return Sr=s,eu(),a}function py(t,s){Ge=null,Y.H=So,s===tl||s===ou?(s=kp(),mt=3):s===Mh?(s=kp(),mt=4):mt=s===cf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,$e===null&&(Lt=1,wu(t,as(s,t.current)))}function yy(){var t=Yn.current;return t===null?!0:(Ze&4194048)===Ze?us===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?t===us:!1}function xy(){var t=Y.H;return Y.H=So,t===null?So:t}function vy(){var t=Y.A;return Y.A=Aw,t}function Mu(){Lt=4,li||(Ze&4194048)!==Ze&&Yn.current!==null||(cl=!0),(oi&134217727)===0&&(ya&134217727)===0||_t===null||di(_t,Ze,Qn,!1)}function kf(t,s,a){var o=dt;dt|=2;var h=xy(),m=vy();(_t!==t||Ze!==s)&&(ku=null,hl(t,s)),s=!1;var v=Lt;e:do try{if(mt!==0&&$e!==null){var w=$e,O=$n;switch(mt){case 8:If(),v=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(s=!0);var $=mt;if(mt=0,$n=null,fl(t,w,O,$),a&&cl){v=0;break e}break;default:$=mt,mt=0,$n=null,fl(t,w,O,$)}}Rw(),v=Lt;break}catch(re){py(t,re)}while(!0);return s&&t.shellSuspendCounter++,gr=oa=null,dt=o,Y.H=h,Y.A=m,$e===null&&(_t=null,Ze=0,eu()),v}function Rw(){for(;$e!==null;)by($e)}function Iw(t,s){var a=dt;dt|=2;var o=xy(),h=vy();_t!==t||Ze!==s?(ku=null,Iu=ct()+500,hl(t,s)):cl=ps(t,s);e:do try{if(mt!==0&&$e!==null){s=$e;var m=$n;t:switch(mt){case 1:mt=0,$n=null,fl(t,s,m,1);break;case 2:case 9:if(Rp(m)){mt=0,$n=null,_y(s);break}s=function(){mt!==2&&mt!==9||_t!==t||(mt=7),Ws(t)},m.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Rp(m)?(mt=0,$n=null,_y(s)):(mt=0,$n=null,fl(t,s,m,7));break;case 5:var v=null;switch($e.tag){case 26:v=$e.memoizedState;case 5:case 27:var w=$e;if(v?ax(v):w.stateNode.complete){mt=0,$n=null;var O=w.sibling;if(O!==null)$e=O;else{var $=w.return;$!==null?($e=$,Ou($)):$e=null}break t}}mt=0,$n=null,fl(t,s,m,5);break;case 6:mt=0,$n=null,fl(t,s,m,6);break;case 8:If(),Lt=6;break e;default:throw Error(i(462))}}kw();break}catch(re){py(t,re)}while(!0);return gr=oa=null,Y.H=o,Y.A=h,dt=a,$e!==null?0:(_t=null,Ze=0,eu(),Lt)}function kw(){for(;$e!==null&&!Ie();)by($e)}function by(t){var s=F0(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,s===null?Ou(t):$e=s}function _y(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=P0(a,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=P0(a,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:Yh(s);default:Y0(a,s),s=$e=vp(s,Sr),s=F0(a,s,Sr)}t.memoizedProps=t.pendingProps,s===null?Ou(t):$e=s}function fl(t,s,a,o){gr=oa=null,Yh(s),nl=null,yo=0;var h=s.return;try{if(bw(t,h,s,a,Ze)){Lt=1,wu(t,as(a,t.current)),$e=null;return}}catch(m){if(h!==null)throw $e=h,m;Lt=1,wu(t,as(a,t.current)),$e=null;return}s.flags&32768?(st||o===1?t=!0:cl||(Ze&536870912)!==0?t=!1:(li=t=!0,(o===2||o===9||o===3||o===6)&&(o=Yn.current,o!==null&&o.tag===13&&(o.flags|=16384))),wy(s,t)):Ou(s)}function Ou(t){var s=t;do{if((s.flags&32768)!==0){wy(s,li);return}t=s.return;var a=Ew(s.alternate,s,Sr);if(a!==null){$e=a;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=t}while(s!==null);Lt===0&&(Lt=5)}function wy(t,s){do{var a=Tw(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);Lt=6,$e=null}function Ey(t,s,a,o,h,m,v,w,O){t.cancelPendingCommit=null;do Vu();while(tn!==0);if((dt&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=vh,uh(t,a,m,v,w,O),t===_t&&($e=_t=null,Ze=0),dl=s,ui=t,Nr=a,jf=m,Cf=h,hy=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vw(vn,function(){return jy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,h=q.p,q.p=2,v=dt,dt|=4;try{Sw(t,s,a)}finally{dt=v,q.p=h,Y.T=o}}tn=1,Ty(),Sy(),Ny()}}function Ty(){if(tn===1){tn=0;var t=ui,s=dl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var o=q.p;q.p=2;var h=dt;dt|=4;try{ry(s,t);var m=Ff,v=up(t.containerInfo),w=m.focusedElem,O=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&cp(w.ownerDocument.documentElement,w)){if(O!==null&&mh(w)){var $=O.start,re=O.end;if(re===void 0&&(re=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(re,w.value.length);else{var ue=w.ownerDocument||document,X=ue&&ue.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Se=w.textContent.length,Oe=Math.min(O.start,Se),vt=O.end===void 0?Oe:Math.min(O.end,Se);!ee.extend&&Oe>vt&&(v=vt,vt=Oe,Oe=v);var B=op(w,Oe),P=op(w,vt);if(B&&P&&(ee.rangeCount!==1||ee.anchorNode!==B.node||ee.anchorOffset!==B.offset||ee.focusNode!==P.node||ee.focusOffset!==P.offset)){var K=ue.createRange();K.setStart(B.node,B.offset),ee.removeAllRanges(),Oe>vt?(ee.addRange(K),ee.extend(P.node,P.offset)):(K.setEnd(P.node,P.offset),ee.addRange(K))}}}}for(ue=[],ee=w;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ue.length;w++){var le=ue[w];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}$u=!!Hf,Ff=Hf=null}finally{dt=h,q.p=o,Y.T=a}}t.current=s,tn=2}}function Sy(){if(tn===2){tn=0;var t=ui,s=dl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var o=q.p;q.p=2;var h=dt;dt|=4;try{J0(t,s.alternate,s)}finally{dt=h,q.p=o,Y.T=a}}tn=3}}function Ny(){if(tn===4||tn===3){tn=0,We();var t=ui,s=dl,a=Nr,o=hy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,dl=ui=null,Ay(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ci=null),cr(a),s=s.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(on,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=Y.T,h=q.p,q.p=2,Y.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var w=o[v];m(w.value,{componentStack:w.stack})}}finally{Y.T=s,q.p=h}}(Nr&3)!==0&&Vu(),Ws(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Rf?Mo++:(Mo=0,Rf=t):Mo=0,Oo(0)}}function Ay(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,go(s)))}function Vu(){return Ty(),Sy(),Ny(),jy()}function jy(){if(tn!==5)return!1;var t=ui,s=jf;jf=0;var a=cr(Nr),o=Y.T,h=q.p;try{q.p=32>a?32:a,Y.T=null,a=Cf,Cf=null;var m=ui,v=Nr;if(tn=0,dl=ui=null,Nr=0,(dt&6)!==0)throw Error(i(331));var w=dt;if(dt|=4,cy(m.current),ay(m,m.current,v,a),dt=w,Oo(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(on,m)}catch{}return!0}finally{q.p=h,Y.T=o,Ay(t,s)}}function Cy(t,s,a){s=as(a,s),s=of(t.stateNode,s,2),t=si(t,s,2),t!==null&&(Gi(t,2),Ws(t))}function gt(t,s,a){if(t.tag===3)Cy(t,t,a);else for(;s!==null;){if(s.tag===3){Cy(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ci===null||!ci.has(o))){t=as(a,t),a=R0(2),o=si(s,a,2),o!==null&&(I0(a,o,s,t),Gi(o,2),Ws(o));break}}s=s.return}}function Df(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new jw;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(a)||(Sf=!0,h.add(a),t=Dw.bind(null,t,s,a),s.then(t,t))}function Dw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,_t===t&&(Ze&a)===a&&(Lt===4||Lt===3&&(Ze&62914560)===Ze&&300>ct()-Ru?(dt&2)===0&&hl(t,0):Nf|=a,ul===Ze&&(ul=0)),Ws(t)}function Ry(t,s){s===0&&(s=kc()),t=ia(t,s),t!==null&&(Gi(t,s),Ws(t))}function Mw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ry(t,a)}function Ow(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),Ry(t,a)}function Vw(t,s){return Xe(t,s)}var Lu=null,ml=null,Mf=!1,Pu=!1,Of=!1,hi=0;function Ws(t){t!==ml&&t.next===null&&(ml===null?Lu=ml=t:ml=ml.next=t),Pu=!0,Mf||(Mf=!0,Pw())}function Oo(t,s){if(!Of&&Pu){Of=!0;do for(var a=!1,o=Lu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var m=0;else{var v=o.suspendedLanes,w=o.pingedLanes;m=(1<<31-bt(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,My(o,m))}else m=Ze,m=Ds(o,o===_t?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ps(o,m)||(a=!0,My(o,m));o=o.next}while(a);Of=!1}}function Lw(){Iy()}function Iy(){Pu=Mf=!1;var t=0;hi!==0&&$w()&&(t=hi);for(var s=ct(),a=null,o=Lu;o!==null;){var h=o.next,m=ky(o,s);m===0?(o.next=null,a===null?Lu=h:a.next=h,h===null&&(ml=a)):(a=o,(t!==0||(m&3)!==0)&&(Pu=!0)),o=h}tn!==0&&tn!==5||Oo(t),hi!==0&&(hi=0)}function ky(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-bt(m),w=1<<v,O=h[v];O===-1?((w&a)===0||(w&o)!==0)&&(h[v]=ch(w,s)):O<=s&&(t.expiredLanes|=w),m&=~w}if(s=_t,a=Ze,a=Ds(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ne(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ps(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&ne(o),cr(a)){case 2:case 8:a=Et;break;case 32:a=vn;break;case 268435456:a=zr;break;default:a=vn}return o=Dy.bind(null,t),a=Xe(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&ne(o),t.callbackPriority=2,t.callbackNode=null,2}function Dy(t,s){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Vu()&&t.callbackNode!==a)return null;var o=Ze;return o=Ds(t,t===_t?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(my(t,o,s),ky(t,ct()),t.callbackNode!=null&&t.callbackNode===a?Dy.bind(null,t):null)}function My(t,s){if(Vu())return null;my(t,s,!0)}function Pw(){Xw(function(){(dt&6)!==0?Xe(ze,Lw):Iy()})}function Vf(){if(hi===0){var t=Ja;t===0&&(t=Is,Is<<=1,(Is&261888)===0&&(Is=256)),hi=t}return hi}function Oy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function Vy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Uw(t,s,a,o,h){if(s==="submit"&&a&&a.stateNode===h){var m=Oy((h[sn]||null).action),v=o.submitter;v&&(s=(s=v[sn]||null)?Oy(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Fs("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hi!==0){var O=v?Vy(h,v):new FormData(h);tf(a,{pending:!0,data:O,method:h.method,action:m},null,O)}}else typeof m=="function"&&(w.preventDefault(),O=v?Vy(h,v):new FormData(h),tf(a,{pending:!0,data:O,method:h.method,action:m},m,O))},currentTarget:h}]})}}for(var Lf=0;Lf<xh.length;Lf++){var Pf=xh[Lf],zw=Pf.toLowerCase(),Bw=Pf[0].toUpperCase()+Pf.slice(1);Ts(zw,"on"+Bw)}Ts(fp,"onAnimationEnd"),Ts(mp,"onAnimationIteration"),Ts(gp,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(sw,"onTransitionRun"),Ts(rw,"onTransitionStart"),Ts(iw,"onTransitionCancel"),Ts(pp,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Us("onBeforeInput",["compositionend","keypress","textInput","paste"]),Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Ly(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var w=o[v],O=w.instance,$=w.currentTarget;if(w=w.listener,O!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=$;try{m(h)}catch(re){Jc(re)}h.currentTarget=null,m=O}else for(v=0;v<o.length;v++){if(w=o[v],O=w.instance,$=w.currentTarget,w=w.listener,O!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=$;try{m(h)}catch(re){Jc(re)}h.currentTarget=null,m=O}}}}function Qe(t,s){var a=s[Da];a===void 0&&(a=s[Da]=new Set);var o=t+"__bubble";a.has(o)||(Py(s,t,2,!1),a.add(o))}function Uf(t,s,a){var o=0;s&&(o|=4),Py(a,t,o,s)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function zf(t){if(!t[Uu]){t[Uu]=!0,Kl.forEach(function(a){a!=="selectionchange"&&(qw.has(a)||Uf(a,!1,t),Uf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Uu]||(s[Uu]=!0,Uf("selectionchange",!1,s))}}function Py(t,s,a,o){switch(fx(s)){case 2:var h=p2;break;case 8:h=y2;break;default:h=tm}a=h.bind(null,s,a,t),h=void 0,!Wi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Bf(t,s,a,o,h){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var w=o.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=o.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Ls(w),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){o=m=v;continue e}w=w.parentNode}}o=o.return}Kr(function(){var $=m,re=ns(a),ue=[];e:{var X=yp.get(t);if(X!==void 0){var ee=Fs,Se=t;switch(t){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":ee=Xc;break;case"focusin":Se="focus",ee=ta;break;case"focusout":Se="blur",ee=ta;break;case"beforeblur":case"afterblur":ee=ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=g;break;case fp:case mp:case gp:ee=Hc;break;case pp:ee=N;break;case"scroll":case"scrollend":ee=io;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=hr;break;case"toggle":case"beforetoggle":ee=Fe}var Oe=(s&4)!==0,vt=!Oe&&(t==="scroll"||t==="scrollend"),B=Oe?X!==null?X+"Capture":null:X;Oe=[];for(var P=$,K;P!==null;){var le=P;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||B===null||(le=bs(P,B),le!=null&&Oe.push(Lo(P,le,K))),vt)break;P=P.return}0<Oe.length&&(X=new ee(X,Se,null,a,re),ue.push({event:X,listeners:Oe}))}}if((s&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",X&&a!==no&&(Se=a.relatedTarget||a.fromElement)&&(Ls(Se)||Se[Os]))break e;if((ee||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Se=a.relatedTarget||a.toElement,ee=$,Se=Se?Ls(Se):null,Se!==null&&(vt=u(Se),Oe=Se.tag,Se!==vt||Oe!==5&&Oe!==27&&Oe!==6)&&(Se=null)):(ee=null,Se=$),ee!==Se)){if(Oe=ao,le="onMouseLeave",B="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=hr,le="onPointerLeave",B="onPointerEnter",P="pointer"),vt=ee==null?X:qn(ee),K=Se==null?X:qn(Se),X=new Oe(le,P+"leave",ee,a,re),X.target=vt,X.relatedTarget=K,le=null,Ls(re)===$&&(Oe=new Oe(B,P+"enter",Se,a,re),Oe.target=K,Oe.relatedTarget=vt,le=Oe),vt=le,ee&&Se)t:{for(Oe=Hw,B=ee,P=Se,K=0,le=B;le;le=Oe(le))K++;le=0;for(var De=P;De;De=Oe(De))le++;for(;0<K-le;)B=Oe(B),K--;for(;0<le-K;)P=Oe(P),le--;for(;K--;){if(B===P||P!==null&&B===P.alternate){Oe=B;break t}B=Oe(B),P=Oe(P)}Oe=null}else Oe=null;ee!==null&&Uy(ue,X,ee,Oe,!1),Se!==null&&vt!==null&&Uy(ue,vt,Se,Oe,!0)}}e:{if(X=$?qn($):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var at=np;else if(ep(X))if(sp)at=ew;else{at=Z1;var je=W1}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&La($.elementType)&&(at=np):at=J1;if(at&&(at=at(t,$))){tp(ue,at,a,re);break e}je&&je(t,X,$),t==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&Jl(X,"number",X.value)}switch(je=$?qn($):window,t){case"focusin":(ep(je)||je.contentEditable==="true")&&(Ga=je,gh=$,ho=null);break;case"focusout":ho=gh=Ga=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,dp(ue,a,re);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":dp(ue,a,re)}var Ye;if(ut)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Fa?na(t,a)&&(Je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Ks&&a.locale!=="ko"&&(Fa||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Fa&&(Ye=ro()):(Hs=re,so="value"in Hs?Hs.value:Hs.textContent,Fa=!0)),je=zu($,Je),0<je.length&&(Je=new Ys(Je,t,null,a,re),ue.push({event:Je,listeners:je}),Ye?Je.data=Ye:(Ye=Ha(a),Ye!==null&&(Je.data=Ye)))),(Ye=rs?K1(t,a):$1(t,a))&&(Je=zu($,"onBeforeInput"),0<Je.length&&(je=new Ys("onBeforeInput","beforeinput",null,a,re),ue.push({event:je,listeners:Je}),je.data=Ye)),Uw(ue,t,$,a,re)}Ly(ue,s)})}function Lo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function zu(t,s){for(var a=s+"Capture",o=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=bs(t,a),h!=null&&o.unshift(Lo(t,h,m)),h=bs(t,s),h!=null&&o.push(Lo(t,h,m))),t.tag===3)return o;t=t.return}return[]}function Hw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Uy(t,s,a,o,h){for(var m=s._reactName,v=[];a!==null&&a!==o;){var w=a,O=w.alternate,$=w.stateNode;if(w=w.tag,O!==null&&O===o)break;w!==5&&w!==26&&w!==27||$===null||(O=$,h?($=bs(a,m),$!=null&&v.unshift(Lo(a,$,O))):h||($=bs(a,m),$!=null&&v.push(Lo(a,$,O)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Fw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(Fw,`
`).replace(Gw,"")}function By(t,s){return s=zy(s),zy(t)===s}function xt(t,s,a,o,h,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||kn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&kn(t,""+o);break;case"className":Hn(t,"class",o);break;case"tabIndex":Hn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,a,o);break;case"style":to(t,o,m);break;case"data":if(s!=="object"){Hn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Pa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&xt(t,s,"name",h.name,h,null),xt(t,s,"formEncType",h.formEncType,h,null),xt(t,s,"formMethod",h.formMethod,h,null),xt(t,s,"formTarget",h.formTarget,h,null)):(xt(t,s,"encType",h.encType,h,null),xt(t,s,"method",h.method,h,null),xt(t,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Pa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=vs);break;case"onScroll":o!=null&&Qe("scroll",t);break;case"onScrollEnd":o!=null&&Qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Qe("beforetoggle",t),Qe("toggle",t),Oa(t,"popover",o);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Oa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=zc.get(a)||a,Oa(t,a,o))}}function qf(t,s,a,o,h,m){switch(a){case"style":to(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?kn(t,o):(typeof o=="number"||typeof o=="bigint")&&kn(t,""+o);break;case"onScroll":o!=null&&Qe("scroll",t);break;case"onScrollEnd":o!=null&&Qe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$l.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[sn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Oa(t,a,o)}}}function mn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",t),Qe("load",t);var o=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,m,v,a,null)}}h&&xt(t,s,"srcSet",a.srcSet,a,null),o&&xt(t,s,"src",a.src,a,null);return;case"input":Qe("invalid",t);var w=m=v=h=null,O=null,$=null;for(o in a)if(a.hasOwnProperty(o)){var re=a[o];if(re!=null)switch(o){case"name":h=re;break;case"type":v=re;break;case"checked":O=re;break;case"defaultChecked":$=re;break;case"value":m=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:xt(t,s,o,re,a,null)}}Lc(t,m,w,O,$,v,h,!1);return;case"select":Qe("invalid",t),o=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":o=w;default:xt(t,s,h,w,a,null)}s=m,a=v,t.multiple=!!o,s!=null?Hr(t,!!o,s,!1):a!=null&&Hr(t,!!o,a,!0);return;case"textarea":Qe("invalid",t),m=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":o=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:xt(t,s,v,w,a,null)}Fr(t,o,h,m);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(o=a[O],o!=null))switch(O){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:xt(t,s,O,o,a,null)}return;case"dialog":Qe("beforetoggle",t),Qe("toggle",t),Qe("cancel",t),Qe("close",t);break;case"iframe":case"object":Qe("load",t);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Qe(Vo[o],t);break;case"image":Qe("error",t),Qe("load",t);break;case"details":Qe("toggle",t);break;case"embed":case"source":case"link":Qe("error",t),Qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(o=a[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,$,o,a,null)}return;default:if(La(s)){for(re in a)a.hasOwnProperty(re)&&(o=a[re],o!==void 0&&qf(t,s,re,o,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(o=a[w],o!=null&&xt(t,s,w,o,a,null))}function Yw(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,O=null,$=null,re=null;for(ee in a){var ue=a[ee];if(a.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=ue;default:o.hasOwnProperty(ee)||xt(t,s,ee,null,o,ue)}}for(var X in o){var ee=o[X];if(ue=a[X],o.hasOwnProperty(X)&&(ee!=null||ue!=null))switch(X){case"type":m=ee;break;case"name":h=ee;break;case"checked":$=ee;break;case"defaultChecked":re=ee;break;case"value":v=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:ee!==ue&&xt(t,s,X,ee,o,ue)}}Va(t,v,w,O,$,re,m,h);return;case"select":ee=v=w=X=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":ee=O;default:o.hasOwnProperty(m)||xt(t,s,m,null,o,O)}for(h in o)if(m=o[h],O=a[h],o.hasOwnProperty(h)&&(m!=null||O!=null))switch(h){case"value":X=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==O&&xt(t,s,h,m,o,O)}s=w,a=v,o=ee,X!=null?Hr(t,!!a,X,!1):!!o!=!!a&&(s!=null?Hr(t,!!a,s,!0):Hr(t,!!a,a?[]:"",!1));return;case"textarea":ee=X=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:xt(t,s,w,null,o,h)}for(v in o)if(h=o[v],m=a[v],o.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":X=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&xt(t,s,v,h,o,m)}Pc(t,X,ee);return;case"option":for(var Se in a)if(X=a[Se],a.hasOwnProperty(Se)&&X!=null&&!o.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:xt(t,s,Se,null,o,X)}for(O in o)if(X=o[O],ee=a[O],o.hasOwnProperty(O)&&X!==ee&&(X!=null||ee!=null))switch(O){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:xt(t,s,O,X,o,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)X=a[Oe],a.hasOwnProperty(Oe)&&X!=null&&!o.hasOwnProperty(Oe)&&xt(t,s,Oe,null,o,X);for($ in o)if(X=o[$],ee=a[$],o.hasOwnProperty($)&&X!==ee&&(X!=null||ee!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:xt(t,s,$,X,o,ee)}return;default:if(La(s)){for(var vt in a)X=a[vt],a.hasOwnProperty(vt)&&X!==void 0&&!o.hasOwnProperty(vt)&&qf(t,s,vt,void 0,o,X);for(re in o)X=o[re],ee=a[re],!o.hasOwnProperty(re)||X===ee||X===void 0&&ee===void 0||qf(t,s,re,X,o,ee);return}}for(var B in a)X=a[B],a.hasOwnProperty(B)&&X!=null&&!o.hasOwnProperty(B)&&xt(t,s,B,null,o,X);for(ue in o)X=o[ue],ee=a[ue],!o.hasOwnProperty(ue)||X===ee||X==null&&ee==null||xt(t,s,ue,X,o,ee)}function qy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&qy(v)){for(v=0,w=h.responseEnd,o+=1;o<a.length;o++){var O=a[o],$=O.startTime;if($>w)break;var re=O.transferSize,ue=O.initiatorType;re&&qy(ue)&&(O=O.responseEnd,v+=re*(O<w?1:(w-$)/(O-$)))}if(--o,s+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Hf=null,Ff=null;function Bu(t){return t.nodeType===9?t:t.ownerDocument}function Hy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Gf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yf=null;function $w(){var t=window.event;return t&&t.type==="popstate"?t===Yf?!1:(Yf=t,!0):(Yf=null,!1)}var Gy=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,Xw=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(t){return Yy.resolve(null).then(t).catch(Ww)}:Gy;function Ww(t){setTimeout(function(){throw t})}function fi(t){return t==="head"}function Ky(t,s){var a=s,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),xl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Po(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Po(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Vs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Po(t.ownerDocument.body);a=h}while(a);xl(s)}function $y(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Kf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kf(a),Ma(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Zw(t,s,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Vs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ds(t.nextSibling),t===null)break}return null}function Jw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ds(t.nextSibling),t===null))return null;return t}function Qy(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ds(t.nextSibling),t===null))return null;return t}function $f(t){return t.data==="$?"||t.data==="$~"}function Qf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function e2(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ds(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Xf=null;function Xy(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return ds(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Wy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Zy(t,s,a){switch(s=Bu(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Po(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ma(t)}var hs=new Map,Jy=new Set;function qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ar=q.d;q.d={f:t2,r:n2,D:s2,C:r2,L:i2,m:a2,X:o2,S:l2,M:c2};function t2(){var t=Ar.f(),s=Du();return t||s}function n2(t){var s=ts(t);s!==null&&s.tag===5&&s.type==="form"?p0(s):Ar.r(t)}var gl=typeof document>"u"?null:document;function ex(t,s,a){var o=gl;if(o&&typeof s=="string"&&s){var h=In(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Jy.has(h)||(Jy.add(h),t={rel:t,crossOrigin:a,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),mn(s,"link",t),Yt(s),o.head.appendChild(s)))}}function s2(t){Ar.D(t),ex("dns-prefetch",t,null)}function r2(t,s){Ar.C(t,s),ex("preconnect",t,s)}function i2(t,s,a){Ar.L(t,s,a);var o=gl;if(o&&t&&s){var h='link[rel="preload"][as="'+In(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+In(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+In(a.imageSizes)+'"]')):h+='[href="'+In(t)+'"]';var m=h;switch(s){case"style":m=pl(t);break;case"script":m=yl(t)}hs.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),hs.set(m,t),o.querySelector(h)!==null||s==="style"&&o.querySelector(Uo(m))||s==="script"&&o.querySelector(zo(m))||(s=o.createElement("link"),mn(s,"link",t),Yt(s),o.head.appendChild(s)))}}function a2(t,s){Ar.m(t,s);var a=gl;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+In(o)+'"][href="'+In(t)+'"]',m=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!hs.has(m)&&(t=E({rel:"modulepreload",href:t},s),hs.set(m,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zo(m)))return}o=a.createElement("link"),mn(o,"link",t),Yt(o),a.head.appendChild(o)}}}function l2(t,s,a){Ar.S(t,s,a);var o=gl;if(o&&t){var h=Ps(o).hoistableStyles,m=pl(t);s=s||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=o.querySelector(Uo(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=hs.get(m))&&Wf(t,a);var O=v=o.createElement("link");Yt(O),mn(O,"link",t),O._p=new Promise(function($,re){O.onload=$,O.onerror=re}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Hu(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function o2(t,s){Ar.X(t,s);var a=gl;if(a&&t){var o=Ps(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(zo(h)),m||(t=E({src:t,async:!0},s),(s=hs.get(h))&&Zf(t,s),m=a.createElement("script"),Yt(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function c2(t,s){Ar.M(t,s);var a=gl;if(a&&t){var o=Ps(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(zo(h)),m||(t=E({src:t,async:!0,type:"module"},s),(s=hs.get(h))&&Zf(t,s),m=a.createElement("script"),Yt(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function tx(t,s,a,o){var h=(h=ie.current)?qu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=pl(a.href),a=Ps(h).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=pl(a.href);var m=Ps(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Uo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),hs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hs.set(t,a),m||u2(h,t,a,v.state))),s&&o===null)throw Error(i(528,""));return v}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=yl(a),a=Ps(h).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function pl(t){return'href="'+In(t)+'"'}function Uo(t){return'link[rel="stylesheet"]['+t+"]"}function nx(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function u2(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),mn(s,"link",a),Yt(s),t.head.appendChild(s))}function yl(t){return'[src="'+In(t)+'"]'}function zo(t){return"script[async]"+t}function sx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+In(a.href)+'"]');if(o)return s.instance=o,Yt(o),o;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Yt(o),mn(o,"style",h),Hu(o,a.precedence,t),s.instance=o;case"stylesheet":h=pl(a.href);var m=t.querySelector(Uo(h));if(m)return s.state.loading|=4,s.instance=m,Yt(m),m;o=nx(a),(h=hs.get(h))&&Wf(o,h),m=(t.ownerDocument||t).createElement("link"),Yt(m);var v=m;return v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),mn(m,"link",o),s.state.loading|=4,Hu(m,a.precedence,t),s.instance=m;case"script":return m=yl(a.src),(h=t.querySelector(zo(m)))?(s.instance=h,Yt(h),h):(o=a,(h=hs.get(m))&&(o=E({},a),Zf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Yt(h),mn(h,"link",o),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Hu(o,a.precedence,t));return s.instance}function Hu(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,m=h,v=0;v<o.length;v++){var w=o[v];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Wf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Zf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Fu=null;function rx(t,s,a){if(Fu===null){var o=new Map,h=Fu=new Map;h.set(a,o)}else h=Fu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Vs]||m[Gt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var w=o.get(v);w?w.push(m):o.set(v,[m])}}return o}function ix(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function d2(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ax(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function h2(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=pl(o.href),m=s.querySelector(Uo(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Gu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Yt(m);return}m=s.ownerDocument||s,o=nx(o),(h=hs.get(h))&&Wf(o,h),m=m.createElement("link"),Yt(m);var v=m;v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),mn(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Gu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Jf=0;function f2(t,s){return t.stylesheets&&t.count===0&&Ku(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Jf===0&&(Jf=62500*Kw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Jf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ku(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yu=null;function Ku(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yu=new Map,s.forEach(m2,t),Yu=null,Gu.call(t))}function m2(t,s){if(!(s.state.loading&4)){var a=Yu.get(t);if(a)var o=a.get(null);else{a=new Map,Yu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,h),a.set(v,h),this.count++,o=Gu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Bo={$$typeof:me,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function g2(t,s,a,o,h,m,v,w,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.hiddenUpdates=Ms(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function lx(t,s,a,o,h,m,v,w,O,$,re,ue){return t=new g2(t,s,a,v,O,$,re,ue,w),s=1,m===!0&&(s|=24),m=Gn(3,null,null,s),t.current=m,m.stateNode=t,s=Ih(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Oh(m),t}function ox(t){return t?(t=$a,t):$a}function cx(t,s,a,o,h,m){h=ox(h),o.context===null?o.context=h:o.pendingContext=h,o=ni(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=si(t,o,s),a!==null&&(Ln(a,t,s),vo(a,t,s))}function ux(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function em(t,s){ux(t,s),(t=t.alternate)&&ux(t,s)}function dx(t){if(t.tag===13||t.tag===31){var s=ia(t,67108864);s!==null&&Ln(s,t,67108864),em(t,67108864)}}function hx(t){if(t.tag===13||t.tag===31){var s=Xn();s=Ki(s);var a=ia(t,s);a!==null&&Ln(a,t,s),em(t,s)}}var $u=!0;function p2(t,s,a,o){var h=Y.T;Y.T=null;var m=q.p;try{q.p=2,tm(t,s,a,o)}finally{q.p=m,Y.T=h}}function y2(t,s,a,o){var h=Y.T;Y.T=null;var m=q.p;try{q.p=8,tm(t,s,a,o)}finally{q.p=m,Y.T=h}}function tm(t,s,a,o){if($u){var h=nm(o);if(h===null)Bf(t,s,o,Qu,a),mx(t,o);else if(v2(h,t,s,a,o))o.stopPropagation();else if(mx(t,o),s&4&&-1<x2.indexOf(t)){for(;h!==null;){var m=ts(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=ks(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var O=1<<31-bt(v);w.entanglements[1]|=O,v&=~O}Ws(m),(dt&6)===0&&(Iu=ct()+500,Oo(0))}}break;case 31:case 13:w=ia(m,2),w!==null&&Ln(w,m,2),Du(),em(m,2)}if(m=nm(o),m===null&&Bf(t,s,o,Qu,a),m===h)break;h=m}h!==null&&o.stopPropagation()}else Bf(t,s,o,null,a)}}function nm(t){return t=ns(t),sm(t)}var Qu=null;function sm(t){if(Qu=null,t=Ls(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=y(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Qu=t,null}function fx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xn()){case ze:return 2;case Et:return 8;case vn:case Rn:return 32;case zr:return 268435456;default:return 32}default:return 32}}var rm=!1,mi=null,gi=null,pi=null,qo=new Map,Ho=new Map,yi=[],x2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mx(t,s){switch(t){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":qo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(s.pointerId)}}function Fo(t,s,a,o,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ts(s),s!==null&&dx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function v2(t,s,a,o,h){switch(s){case"focusin":return mi=Fo(mi,t,s,a,o,h),!0;case"dragenter":return gi=Fo(gi,t,s,a,o,h),!0;case"mouseover":return pi=Fo(pi,t,s,a,o,h),!0;case"pointerover":var m=h.pointerId;return qo.set(m,Fo(qo.get(m)||null,t,s,a,o,h)),!0;case"gotpointercapture":return m=h.pointerId,Ho.set(m,Fo(Ho.get(m)||null,t,s,a,o,h)),!0}return!1}function gx(t){var s=Ls(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,ys(t.priority,function(){hx(a)});return}}else if(s===31){if(s=y(a),s!==null){t.blockedOn=s,ys(t.priority,function(){hx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=nm(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);no=o,a.target.dispatchEvent(o),no=null}else return s=ts(a),s!==null&&dx(s),t.blockedOn=a,!1;s.shift()}return!0}function px(t,s,a){Xu(t)&&a.delete(s)}function b2(){rm=!1,mi!==null&&Xu(mi)&&(mi=null),gi!==null&&Xu(gi)&&(gi=null),pi!==null&&Xu(pi)&&(pi=null),qo.forEach(px),Ho.forEach(px)}function Wu(t,s){t.blockedOn===s&&(t.blockedOn=null,rm||(rm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,b2)))}var Zu=null;function yx(t){Zu!==t&&(Zu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],h=t[s+2];if(typeof o!="function"){if(sm(o||a)===null)continue;break}var m=ts(a);m!==null&&(t.splice(s,3),s-=3,tf(m,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function xl(t){function s(O){return Wu(O,t)}mi!==null&&Wu(mi,t),gi!==null&&Wu(gi,t),pi!==null&&Wu(pi,t),qo.forEach(s),Ho.forEach(s);for(var a=0;a<yi.length;a++){var o=yi[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<yi.length&&(a=yi[0],a.blockedOn===null);)gx(a),a.blockedOn===null&&yi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],v=h[sn]||null;if(typeof m=="function")v||yx(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[sn]||null)w=v.formAction;else if(sm(h)!==null)continue}else w=v.action;typeof w=="function"?a[o+1]=w:(a.splice(o,3),o-=3),yx(a)}}}function xx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function im(t){this._internalRoot=t}Ju.prototype.render=im.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,o=Xn();cx(a,o,t,s,null,null)},Ju.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;cx(t.current,2,null,t,null,null),Du(),s[Os]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var s=Dc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<yi.length&&s!==0&&s<yi[a].priority;a++);yi.splice(a,0,t),a===0&&gx(t)}};var vx=e.version;if(vx!=="19.2.0")throw Error(i(527,vx,"19.2.0"));q.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var _2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{on=ed.inject(_2),kt=ed}catch{}}return Yo.createRoot=function(t,s){if(!l(t))throw Error(i(299));var a=!1,o="",h=N0,m=A0,v=j0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=lx(t,1,!1,null,null,a,o,null,h,m,v,xx),t[Os]=s.current,zf(t),new im(s)},Yo.hydrateRoot=function(t,s,a){if(!l(t))throw Error(i(299));var o=!1,h="",m=N0,v=A0,w=j0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=lx(t,1,!0,s,a??null,o,h,O,m,v,w,xx),s.context=ox(null),a=s.current,o=Xn(),o=Ki(o),h=ni(o),h.callback=null,si(a,h,o),a=o,s.current.lanes=a,Gi(s,a),Ws(s),t[Os]=s.current,zf(t),new Ju(s)},Yo.version="19.2.0",Yo}var Cx;function k2(){if(Cx)return om.exports;Cx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),om.exports=I2(),om.exports}var D2=k2();const M2=()=>{};var Rx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},O2=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const l=r[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],f=r[n++],y=r[n++],p=((l&7)<<18|(u&63)<<12|(f&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<r.length;l+=3){const u=r[l],f=l+1<r.length,y=f?r[l+1]:0,p=l+2<r.length,x=p?r[l+2]:0,_=u>>2,E=(u&3)<<4|y>>4;let A=(y&15)<<2|x>>6,z=x&63;p||(z=64,f||(A=64)),i.push(n[_],n[E],n[A],n[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(gb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):O2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],y=l<r.length?n[r.charAt(l)]:0;++l;const x=l<r.length?n[r.charAt(l)]:64;++l;const E=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||y==null||x==null||E==null)throw new V2;const A=u<<2|y>>4;if(i.push(A),x!==64){const z=y<<4&240|x>>2;if(i.push(z),E!==64){const G=x<<6&192|E;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class V2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L2=function(r){const e=gb(r);return pb.encodeByteArray(e,!0)},vd=function(r){return L2(r).replace(/\./g,"")},yb=function(r){try{return pb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=()=>P2().__FIREBASE_DEFAULTS__,z2=()=>{if(typeof process>"u"||typeof Rx>"u")return;const r=Rx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},B2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&yb(r[1]);return e&&JSON.parse(e)},Ud=()=>{try{return M2()||U2()||z2()||B2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xb=r=>Ud()?.emulatorHosts?.[r],q2=r=>{const e=xb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},vb=()=>Ud()?.config,bb=r=>Ud()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _b(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[vd(JSON.stringify(n)),vd(JSON.stringify(f)),""].join(".")}const Jo={};function G2(){const r={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?r.emulator.push(e):r.prod.push(e);return r}function Y2(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ix=!1;function wb(r,e){if(typeof window>"u"||typeof document>"u"||!Ll(window.location.host)||Jo[r]===e||Jo[r]||Ix)return;Jo[r]=e;function n(A){return`__firebase__banner__${A}`}const i="__firebase__banner",u=G2().prod.length>0;function f(){const A=document.getElementById(i);A&&A.remove()}function y(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,z){A.setAttribute("width","24"),A.setAttribute("id",z),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ix=!0,f()},A}function _(A,z){A.setAttribute("id",z),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Y2(i),z=n("text"),G=document.getElementById(z)||document.createElement("span"),Q=n("learnmore"),V=document.getElementById(Q)||document.createElement("a"),se=n("preprendIcon"),W=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const me=A.element;y(me),_(V,Q);const ge=x();p(W,se),me.append(W,G,V,ge),document.body.appendChild(me)}u?(G.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function $2(){const r=Ud()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function W2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z2(){const r=Nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function J2(){return!$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eE(){try{return typeof indexedDB=="object"}catch{return!1}}function tE(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="FirebaseError";class Lr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=nE,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?sE(u,i):"Error",y=`${this.serviceName}: ${f} (${l}).`;return new Lr(l,y,i)}}function sE(r,e){return r.replace(rE,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const rE=/\{\$([^}]+)}/g;function iE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Sa(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=r[l],f=e[l];if(kx(u)&&kx(f)){if(!Sa(u,f))return!1}else if(u!==f)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function kx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ko(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function $o(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function aE(r,e){const n=new lE(r,e);return n.subscribe.bind(n)}class lE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");oE(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=hm),l.error===void 0&&(l.error=hm),l.complete===void 0&&(l.complete=hm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oE(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r){return r&&r._delegate?r._delegate:r}class Na{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new H2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dE(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);i===y&&f.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uE(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uE(r){return r===ba?void 0:r}function dE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const fE={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},mE=et.INFO,gE={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},pE=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=gE[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=mE,this._logHandler=pE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const yE=(r,e)=>e.some(n=>r instanceof n);let Dx,Mx;function xE(){return Dx||(Dx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vE(){return Mx||(Mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Eb=new WeakMap,km=new WeakMap,Tb=new WeakMap,fm=new WeakMap,cg=new WeakMap;function bE(r){const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Ni(r.result)),l()},f=()=>{i(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Eb.set(n,r)}).catch(()=>{}),cg.set(e,r),e}function _E(r){if(km.has(r))return;const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});km.set(r,e)}let Dm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return km.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Tb.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wE(r){Dm=r(Dm)}function EE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(mm(this),e,...n);return Tb.set(i,e.sort?e.sort():[e]),Ni(i)}:vE().includes(r)?function(...e){return r.apply(mm(this),e),Ni(Eb.get(this))}:function(...e){return Ni(r.apply(mm(this),e))}}function TE(r){return typeof r=="function"?EE(r):(r instanceof IDBTransaction&&_E(r),yE(r,xE())?new Proxy(r,Dm):r)}function Ni(r){if(r instanceof IDBRequest)return bE(r);if(fm.has(r))return fm.get(r);const e=TE(r);return e!==r&&(fm.set(r,e),cg.set(e,r)),e}const mm=r=>cg.get(r);function SE(r,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const f=indexedDB.open(r,e),y=Ni(f);return i&&f.addEventListener("upgradeneeded",p=>{i(Ni(f.result),p.oldVersion,p.newVersion,Ni(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),y.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),y}const NE=["get","getKey","getAll","getAllKeys","count"],AE=["put","add","delete","clear"],gm=new Map;function Ox(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=AE.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||NE.includes(n)))return;const u=async function(f,...y){const p=this.transaction(f,l?"readwrite":"readonly");let x=p.store;return i&&(x=x.index(y.shift())),(await Promise.all([x[n](...y),l&&p.done]))[0]};return gm.set(e,u),u}wE(r=>({...r,get:(e,n,i)=>Ox(e,n)||r.get(e,n,i),has:(e,n)=>!!Ox(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CE(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function CE(r){return r.getComponent()?.type==="VERSION"}const Mm="@firebase/app",Vx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new og("@firebase/app"),RE="@firebase/app-compat",IE="@firebase/analytics-compat",kE="@firebase/analytics",DE="@firebase/app-check-compat",ME="@firebase/app-check",OE="@firebase/auth",VE="@firebase/auth-compat",LE="@firebase/database",PE="@firebase/data-connect",UE="@firebase/database-compat",zE="@firebase/functions",BE="@firebase/functions-compat",qE="@firebase/installations",HE="@firebase/installations-compat",FE="@firebase/messaging",GE="@firebase/messaging-compat",YE="@firebase/performance",KE="@firebase/performance-compat",$E="@firebase/remote-config",QE="@firebase/remote-config-compat",XE="@firebase/storage",WE="@firebase/storage-compat",ZE="@firebase/firestore",JE="@firebase/ai",eT="@firebase/firestore-compat",tT="firebase",nT="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",sT={[Mm]:"fire-core",[RE]:"fire-core-compat",[kE]:"fire-analytics",[IE]:"fire-analytics-compat",[ME]:"fire-app-check",[DE]:"fire-app-check-compat",[OE]:"fire-auth",[VE]:"fire-auth-compat",[LE]:"fire-rtdb",[PE]:"fire-data-connect",[UE]:"fire-rtdb-compat",[zE]:"fire-fn",[BE]:"fire-fn-compat",[qE]:"fire-iid",[HE]:"fire-iid-compat",[FE]:"fire-fcm",[GE]:"fire-fcm-compat",[YE]:"fire-perf",[KE]:"fire-perf-compat",[$E]:"fire-rc",[QE]:"fire-rc-compat",[XE]:"fire-gcs",[WE]:"fire-gcs-compat",[ZE]:"fire-fst",[eT]:"fire-fst-compat",[JE]:"fire-vertex","fire-js":"fire-js",[tT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,rT=new Map,Vm=new Map;function Lx(r,e){try{r.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Cl(r){const e=r.name;if(Vm.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,r);for(const n of bd.values())Lx(n,r);for(const n of rT.values())Lx(n,r);return!0}function ug(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function fs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new pc("app","Firebase",iT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=nT;function Sb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:Om,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ai.create("bad-app-name",{appName:String(l)});if(n||(n=vb()),!n)throw Ai.create("no-options");const u=bd.get(l);if(u){if(Sa(n,u.options)&&Sa(i,u.config))return u;throw Ai.create("duplicate-app",{appName:l})}const f=new hE(l);for(const p of Vm.values())f.addComponent(p);const y=new aT(n,i,f);return bd.set(l,y),y}function Nb(r=Om){const e=bd.get(r);if(!e&&r===Om&&vb())return Sb();if(!e)throw Ai.create("no-app",{appName:r});return e}function ji(r,e,n){let i=sT[r]??r;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${i}" with version "${e}":`];l&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(f.join(" "));return}Cl(new Na(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebase-heartbeat-database",oT=1,ic="firebase-heartbeat-store";let pm=null;function Ab(){return pm||(pm=SE(lT,oT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ai.create("idb-open",{originalErrorMessage:r.message})})),pm}async function cT(r){try{const n=(await Ab()).transaction(ic),i=await n.objectStore(ic).get(jb(r));return await n.done,i}catch(e){if(e instanceof Lr)Ir.warn(e.message);else{const n=Ai.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function Px(r,e){try{const i=(await Ab()).transaction(ic,"readwrite");await i.objectStore(ic).put(e,jb(r)),await i.done}catch(n){if(n instanceof Lr)Ir.warn(n.message);else{const i=Ai.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(i.message)}}}function jb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1024,dT=30;class hT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mT(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ux();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>dT){const l=gT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ux(),{heartbeatsToSend:n,unsentEntries:i}=fT(this._heartbeatsCache.heartbeats),l=vd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ir.warn(e),""}}}function Ux(){return new Date().toISOString().substring(0,10)}function fT(r,e=uT){const n=[];let i=r.slice();for(const l of r){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),zx(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),zx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eE()?tE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zx(r){return vd(JSON.stringify({version:2,heartbeats:r})).length}function gT(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(r){Cl(new Na("platform-logger",e=>new jE(e),"PRIVATE")),Cl(new Na("heartbeat",e=>new hT(e),"PRIVATE")),ji(Mm,Vx,r),ji(Mm,Vx,"esm2020"),ji("fire-js","")}pT("");function Cb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yT=Cb,Rb=new pc("auth","Firebase",Cb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new og("@firebase/auth");function xT(r,...e){_d.logLevel<=et.WARN&&_d.warn(`Auth (${Pl}): ${r}`,...e)}function cd(r,...e){_d.logLevel<=et.ERROR&&_d.error(`Auth (${Pl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(r,...e){throw dg(r,...e)}function er(r,...e){return dg(r,...e)}function Ib(r,e,n){const i={...yT(),[e]:n};return new pc("auth","Firebase",i).create(e,{appName:r.name})}function Rr(r){return Ib(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Rb.create(r,...e)}function Le(r,e,...n){if(!r)throw dg(e,...n)}function jr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw cd(e),new Error(e)}function kr(r,e){r||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof self<"u"&&self.location?.href||""}function vT(){return Bx()==="http:"||Bx()==="https:"}function Bx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vT()||X2()||"connection"in navigator)?navigator.onLine:!0}function _T(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,kr(n>e,"Short delay should be less than long delay!"),this.isMobile=K2()||W2()}get(){return bT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r,e){kr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TT=new xc(3e4,6e4);function Pr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ur(r,e,n,i,l={}){return Db(r,l,async()=>{let u={},f={};i&&(e==="GET"?f=i:u={body:JSON.stringify(i)});const y=yc({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:p,...u};return Q2()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&Ll(r.emulatorConfig.host)&&(x.credentials="include"),kb.fetch()(await Mb(r,r.config.apiHost,n,y),x)})}async function Db(r,e,n){r._canInitEmulator=!1;const i={...wT,...e};try{const l=new NT(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw td(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const y=u.ok?f.errorMessage:f.error.message,[p,x]=y.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw td(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw td(r,"user-disabled",f);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Ib(r,_,x);Cs(r,_)}}catch(l){if(l instanceof Lr)throw l;Cs(r,"network-request-failed",{message:String(l)})}}async function vc(r,e,n,i,l={}){const u=await Ur(r,e,n,i,l);return"mfaPendingCredential"in u&&Cs(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function Mb(r,e,n,i){const l=`${e}${n}?${i}`,u=r,f=u.config.emulator?hg(r.config,l):`${r.config.apiScheme}://${l}`;return ET.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function ST(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(er(this.auth,"network-request-failed")),TT.get())})}}function td(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=er(r,e,i);return l.customData._tokenResponse=n,l}function qx(r){return r!==void 0&&r.enterprise!==void 0}class AT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ST(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jT(r,e){return Ur(r,"GET","/v2/recaptchaConfig",Pr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(r,e){return Ur(r,"POST","/v1/accounts:delete",e)}async function wd(r,e){return Ur(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RT(r,e=!1){const n=Ht(r),i=await n.getIdToken(e),l=fg(i);Le(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:i,authTime:ec(ym(l.auth_time)),issuedAtTime:ec(ym(l.iat)),expirationTime:ec(ym(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ym(r){return Number(r)*1e3}function fg(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const l=yb(n);return l?JSON.parse(l):(cd("Failed to decode base64 JWT payload"),null)}catch(l){return cd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Hx(r){const e=fg(r);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Lr&&IT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function IT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(r){const e=r.auth,n=await r.getIdToken(),i=await ac(r,wd(e,{idToken:n}));Le(i?.users.length,e,"internal-error");const l=i.users[0];r._notifyReloadListener(l);const u=l.providerUserInfo?.length?Ob(l.providerUserInfo):[],f=MT(r.providerData,u),y=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!f?.length,x=y?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,_)}async function DT(r){const e=Ht(r);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MT(r,e){return[...r.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Ob(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(r,e){const n=await Db(r,{},async()=>{const i=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,f=await Mb(r,l,"/v1/token",`key=${u}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:y,body:i};return r.emulatorConfig&&Ll(r.emulatorConfig.host)&&(p.credentials="include"),kb.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VT(r,e){return Ur(r,"POST","/v2/accounts:revokeToken",Pr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=Hx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await OT(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,f=new Sl;return i&&(Le(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),l&&(Le(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(Le(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(r,e){Le(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new kT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RT(this,e)}reload(){return DT(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await ac(this,CT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,y=n.tenantId??void 0,p=n._redirectEventId??void 0,x=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:z,providerData:G,stsTokenManager:Q}=n;Le(E&&Q,e,"internal-error");const V=Sl.fromJSON(this.name,Q);Le(typeof E=="string",e,"internal-error"),vi(i,e.name),vi(l,e.name),Le(typeof A=="boolean",e,"internal-error"),Le(typeof z=="boolean",e,"internal-error"),vi(u,e.name),vi(f,e.name),vi(y,e.name),vi(p,e.name),vi(x,e.name),vi(_,e.name);const se=new js({uid:E,auth:e,email:l,emailVerified:A,displayName:i,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:y,stsTokenManager:V,createdAt:x,lastLoginAt:_});return G&&Array.isArray(G)&&(se.providerData=G.map(W=>({...W}))),p&&(se._redirectEventId=p),se}static async _fromIdTokenResponse(e,n,i=!1){const l=new Sl;l.updateFromServerResponse(n);const u=new js({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Ed(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Le(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Ob(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,y=new Sl;y.updateFromIdToken(i);const p=new js({uid:l.localId,auth:e,stsTokenManager:y,isAnonymous:f}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(p,x),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;function Cr(r){kr(r instanceof Function,"Expected a class definition");let e=Fx.get(r);return e?(kr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Fx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vb.type="NONE";const Gx=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(r,e,n){return`firebase:${r}:${e}:${n}`}class Nl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=ud(this.userKey,l.apiKey,u),this.fullPersistenceKey=ud("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wd(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Nl(Cr(Gx),e,i);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Cr(Gx);const f=ud(i,e.config.apiKey,e.name);let y=null;for(const x of n)try{const _=await x._get(f);if(_){let E;if(typeof _=="string"){const A=await wd(e,{idToken:_}).catch(()=>{});if(!A)break;E=await js._fromGetAccountInfoResponse(e,A,_)}else E=js._fromJSON(e,_);x!==u&&(y=E),u=x;break}}catch{}const p=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Nl(u,e,i):(u=p[0],y&&await u._set(f,y.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new Nl(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qb(e))return"Blackberry";if(Hb(e))return"Webos";if(Pb(e))return"Safari";if((e.includes("chrome/")||Ub(e))&&!e.includes("edge/"))return"Chrome";if(Bb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function Lb(r=Nn()){return/firefox\//i.test(r)}function Pb(r=Nn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ub(r=Nn()){return/crios\//i.test(r)}function zb(r=Nn()){return/iemobile/i.test(r)}function Bb(r=Nn()){return/android/i.test(r)}function qb(r=Nn()){return/blackberry/i.test(r)}function Hb(r=Nn()){return/webos/i.test(r)}function mg(r=Nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LT(r=Nn()){return mg(r)&&!!window.navigator?.standalone}function PT(){return Z2()&&document.documentMode===10}function Fb(r=Nn()){return mg(r)||Bb(r)||Hb(r)||qb(r)||/windows phone/i.test(r)||zb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r,e=[]){let n;switch(r){case"Browser":n=Yx(Nn());break;case"Worker":n=`${Yx(Nn())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((f,y)=>{try{const p=e(u);f(p)}catch(p){y(p)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(r,e={}){return Ur(r,"GET","/v2/passwordPolicy",Pr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=6;class qT{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kx(this),this.idTokenSubscription=new Kx(this),this.beforeStateQueue=new UT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wd(this,{idToken:e}),i=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=i?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===f)&&y?.user&&(i=y.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_T()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(Rr(this));const n=e?Ht(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zT(this),n=new qT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await VT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(y,this,"internal-error"),y.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,l);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ui(r){return Ht(r)}class Kx{constructor(e){this.auth=e,this.observer=null,this.addObserver=aE(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FT(r){zd=r}function Yb(r){return zd.loadJS(r)}function GT(){return zd.recaptchaEnterpriseScript}function YT(){return zd.gapiScript}function KT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class $T{constructor(){this.enterprise=new QT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XT="recaptcha-enterprise",Kb="NO_RECAPTCHA";class WT{constructor(e){this.type=XT,this.auth=Ui(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,y)=>{jT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const x=new AT(p);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(p=>{y(p)})})}function l(u,f,y){const p=window.grecaptcha;qx(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(Kb)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $T().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{i(this.auth).then(y=>{if(!n&&qx(window.grecaptcha))l(y,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=GT();p.length!==0&&(p+=y),Yb(p).then(()=>{l(y,u,f)}).catch(x=>{f(x)})}}).catch(y=>{f(y)})})}}async function $x(r,e,n,i=!1,l=!1){const u=new WT(r);let f;if(l)f=Kb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const y={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const p=y.phoneEnrollmentInfo.phoneNumber,x=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const p=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return i?Object.assign(y,{captchaResp:f}):Object.assign(y,{captchaResponse:f}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Td(r,e,n,i,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await $x(r,e,n,n==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await $x(r,e,n,n==="getOobCode");return i(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r,e){const n=ug(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Sa(u,e??{}))return l;Cs(l,"already-initialized")}return n.initialize({options:e})}function JT(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Cr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function eS(r,e,n){const i=Ui(r);Le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=$b(e),{host:f,port:y}=tS(e),p=y===null?"":`:${y}`,x={url:`${u}//${f}${p}/`},_=Object.freeze({host:f,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Le(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Le(Sa(x,i.config.emulator)&&Sa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ll(f)?(_b(`${u}//${f}${p}`),wb("Auth",!0)):nS()}function $b(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function tS(r){const e=$b(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:Qx(i.substr(u.length+1))}}else{const[u,f]=i.split(":");return{host:u,port:Qx(f)}}}function Qx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function nS(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,n){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function sS(r,e){return Ur(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(r,e){return vc(r,"POST","/v1/accounts:signInWithPassword",Pr(r,e))}async function iS(r,e){return Ur(r,"POST","/v1/accounts:sendOobCode",Pr(r,e))}async function aS(r,e){return iS(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(r,e){return vc(r,"POST","/v1/accounts:signInWithEmailLink",Pr(r,e))}async function oS(r,e){return vc(r,"POST","/v1/accounts:signInWithEmailLink",Pr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends gg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new lc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new lc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,n,"signInWithPassword",rS);case"emailLink":return lS(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,i,"signUpPassword",sS);case"emailLink":return oS(e,{idToken:n,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(r,e){return vc(r,"POST","/v1/accounts:signInWithIdp",Pr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="http://localhost";class Aa extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const f=new Aa(i,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Al(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Al(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Al(e,n)}buildRequest(){const e={requestUri:cS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dS(r){const e=Ko($o(r)).link,n=e?Ko($o(e)).deep_link_id:null,i=Ko($o(r)).deep_link_id;return(i?Ko($o(i)).link:null)||i||n||e||r}class pg{constructor(e){const n=Ko($o(e)),i=n.apiKey??null,l=n.oobCode??null,u=uS(n.mode??null);Le(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dS(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,n){return lc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=pg.parseLink(n);return Le(i,"argument-error"),lc._fromEmailAndCode(e,i.code,i.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Qb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends bc{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Aa._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends bc{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends bc{constructor(){super("twitter.com")}static credential(e,n){return Aa._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(r,e){return vc(r,"POST","/v1/accounts:signUp",Pr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await js._fromIdTokenResponse(e,i,l),f=Xx(i);return new ja({user:u,providerId:f,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=Xx(i);return new ja({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function Xx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Lr{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Sd(e,n,i,l)}}function Xb(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(r,u,e,i):u})}async function fS(r,e,n=!1){const i=await ac(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return ja._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(r,e,n=!1){const{auth:i}=r;if(fs(i.app))return Promise.reject(Rr(i));const l="reauthenticate";try{const u=await ac(r,Xb(i,l,e,r),n);Le(u.idToken,i,"internal-error");const f=fg(u.idToken);Le(f,i,"internal-error");const{sub:y}=f;return Le(r.uid===y,i,"user-mismatch"),ja._forOperation(r,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Cs(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(r,e,n=!1){if(fs(r.app))return Promise.reject(Rr(r));const i="signIn",l=await Xb(r,i,e),u=await ja._fromIdTokenResponse(r,i,l);return n||await r._updateCurrentUser(u.user),u}async function gS(r,e){return Wb(Ui(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(r){const e=Ui(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pS(r,e,n){const i=Ui(r);await Td(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aS)}async function yS(r,e,n){if(fs(r.app))return Promise.reject(Rr(r));const i=Ui(r),f=await Td(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Zb(r),p}),y=await ja._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(y.user),y}function xS(r,e,n){return fs(r.app)?Promise.reject(Rr(r)):gS(Ht(r),Ul.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zb(r),i})}function vS(r,e,n,i){return Ht(r).onIdTokenChanged(e,n,i)}function bS(r,e,n){return Ht(r).beforeAuthStateChanged(e,n)}function _S(r,e,n,i){return Ht(r).onAuthStateChanged(e,n,i)}function wS(r){return Ht(r).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=1e3,TS=10;class e_ extends Jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,y,p)=>{this.notifyListeners(f,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(i);!n&&this.localCache[i]===f||this.notifyListeners(i,f)},u=this.storage.getItem(i);PT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,TS):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}e_.type="LOCAL";const SS=e_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}t_.type="SESSION";const n_=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Bd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const y=Array.from(f).map(async x=>x(n.origin,u)),p=await NS(y);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((y,p)=>{const x=yg("",20);l.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);f={messageChannel:l,onMessage(E){const A=E;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(A.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function jS(r){tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function CS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RS(){return navigator?.serviceWorker?.controller||null}function IS(){return s_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="firebaseLocalStorageDb",kS=1,Ad="firebaseLocalStorage",i_="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qd(r,e){return r.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function DS(){const r=indexedDB.deleteDatabase(r_);return new _c(r).toPromise()}function Um(){const r=indexedDB.open(r_,kS);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ad,{keyPath:i_})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ad)?e(i):(i.close(),await DS(),e(await Um()))})})}async function Wx(r,e,n){const i=qd(r,!0).put({[i_]:e,value:n});return new _c(i).toPromise()}async function MS(r,e){const n=qd(r,!1).get(e),i=await new _c(n).toPromise();return i===void 0?null:i.value}function Zx(r,e){const n=qd(r,!0).delete(e);return new _c(n).toPromise()}const OS=800,VS=3;class a_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>VS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bd._getInstance(IS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CS(),!this.activeServiceWorker)return;this.sender=new AS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await Wx(e,Nd,"1"),await Zx(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MS(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=qd(l,!1).getAll();return new _c(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a_.type="LOCAL";const LS=a_;new xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(r,e){return e?Cr(e):(Le(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Al(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function US(r){return Wb(r.auth,new xg(r),r.bypassAuthState)}function zS(r){const{auth:e,user:n}=r;return Le(n,e,"internal-error"),mS(n,new xg(r),r.bypassAuthState)}async function BS(r){const{auth:e,user:n}=r;return Le(n,e,"internal-error"),fS(n,new xg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:f,type:y}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return US;case"linkViaPopup":case"linkViaRedirect":return BS;case"reauthViaPopup":case"reauthViaRedirect":return zS;default:Cs(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new xc(2e3,1e4);class Tl extends l_{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qS.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="pendingRedirect",dd=new Map;class FS extends l_{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const i=await GS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GS(r,e){const n=$S(e),i=KS(r);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function YS(r,e){dd.set(r._key(),e)}function KS(r){return Cr(r._redirectPersistence)}function $S(r){return ud(HS,r.config.apiKey,r.name)}async function QS(r,e,n=!1){if(fs(r.app))return Promise.reject(Rr(r));const i=Ui(r),l=PS(i,e),f=await new FS(i,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=600*1e3;class WS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!o_(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(er(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jx(e))}saveEventToCache(e){this.cachedEventUids.add(Jx(e)),this.lastProcessedEventTime=Date.now()}}function Jx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function o_({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function ZS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return o_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(r,e={}){return Ur(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tN=/^https?/;async function nN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JS(r);for(const n of e)try{if(sN(n))return}catch{}Cs(r,"unauthorized-domain")}function sN(r){const e=Lm(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===i}if(!tN.test(n))return!1;if(eN.test(r))return i===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new xc(3e4,6e4);function ev(){const r=tr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function iN(r){return new Promise((e,n)=>{function i(){ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ev(),n(er(r,"network-request-failed"))},timeout:rN.get()})}if(tr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(tr().gapi?.load)i();else{const l=KT("iframefcb");return tr()[l]=()=>{gapi.load?i():n(er(r,"network-request-failed"))},Yb(`${YT()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw hd=null,e})}let hd=null;function aN(r){return hd=hd||iN(r),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new xc(5e3,15e3),oN="__/auth/iframe",cN="emulator/auth/iframe",uN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hN(r){const e=r.config;Le(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?hg(e,cN):`https://${r.config.authDomain}/${oN}`,i={apiKey:e.apiKey,appName:r.name,v:Pl},l=dN.get(r.config.apiHost);l&&(i.eid=l);const u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${yc(i).slice(1)}`}async function fN(r){const e=await aN(r),n=tr().gapi;return Le(n,r,"internal-error"),e.open({where:document.body,url:hN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uN,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const f=er(r,"network-request-failed"),y=tr().setTimeout(()=>{u(f)},lN.get());function p(){tr().clearTimeout(y),l(i)}i.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gN=500,pN=600,yN="_blank",xN="http://localhost";class tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vN(r,e,n,i=gN,l=pN){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let y="";const p={...mN,width:i.toString(),height:l.toString(),top:u,left:f},x=Nn().toLowerCase();n&&(y=Ub(x)?yN:n),Lb(x)&&(e=e||xN,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[z,G])=>`${A}${z}=${G},`,"");if(LT(x)&&y!=="_self")return bN(e||"",y),new tv(null);const E=window.open(e||"",y,_);Le(E,r,"popup-blocked");try{E.focus()}catch{}return new tv(E)}function bN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="__/auth/handler",wN="emulator/auth/handler",EN=encodeURIComponent("fac");async function nv(r,e,n,i,l,u){Le(r.config.authDomain,r,"auth-domain-config-required"),Le(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Pl,eventId:l};if(e instanceof Qb){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",iE(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof bc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const y=f;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const p=await r._getAppCheckToken(),x=p?`#${EN}=${encodeURIComponent(p)}`:"";return`${TN(r)}?${yc(y).slice(1)}${x}`}function TN({config:r}){return r.emulator?hg(r,wN):`https://${r.authDomain}/${_N}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class SN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n_,this._completeRedirectFn=QS,this._overrideRedirectResult=YS}async _openPopup(e,n,i,l){kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await nv(e,n,i,Lm(),l);return vN(e,u,yg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await nv(e,n,i,Lm(),l);return jS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(kr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await fN(e),i=new WS(e);return n.register("authEvent",l=>(Le(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},l=>{const u=l?.[0]?.[xm];u!==void 0&&n(!!u),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fb()||Pb()||mg()}}const NN=SN;var sv="@firebase/auth",rv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CN(r){Cl(new Na("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:y}=i.options;Le(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:f,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gb(r)},x=new HT(i,l,u,p);return JT(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Cl(new Na("auth-internal",e=>{const n=Ui(e.getProvider("auth").getImmediate());return(i=>new AN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(sv,rv,jN(r)),ji(sv,rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=300,IN=bb("authIdTokenMaxAge")||RN;let iv=null;const kN=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>IN)return;const l=n?.token;iv!==l&&(iv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function DN(r=Nb()){const e=ug(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ZT(r,{popupRedirectResolver:NN,persistence:[LS,SS,n_]}),i=bb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const f=kN(u.toString());bS(n,f,()=>f(n.currentUser)),vS(n,y=>f(y))}}const l=xb("auth");return l&&eS(n,`http://${l}`),n}function MN(){return document.getElementsByTagName("head")?.[0]??document}FT({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=l=>{const u=er("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",MN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CN("Browser");var ON="firebase",VN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(ON,VN,"app");var av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,c_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function j(){}j.prototype=S.prototype,I.F=S.prototype,I.prototype=new j,I.prototype.constructor=I,I.D=function(M,R,L){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return S.prototype[R].apply(M,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,S,j){j||(j=0);const M=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)M[R]=S.charCodeAt(j++)|S.charCodeAt(j++)<<8|S.charCodeAt(j++)<<16|S.charCodeAt(j++)<<24;else for(R=0;R<16;++R)M[R]=S[j++]|S[j++]<<8|S[j++]<<16|S[j++]<<24;S=I.g[0],j=I.g[1],R=I.g[2];let L=I.g[3],D;D=S+(L^j&(R^L))+M[0]+3614090360&4294967295,S=j+(D<<7&4294967295|D>>>25),D=L+(R^S&(j^R))+M[1]+3905402710&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(j^L&(S^j))+M[2]+606105819&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(S^R&(L^S))+M[3]+3250441966&4294967295,j=R+(D<<22&4294967295|D>>>10),D=S+(L^j&(R^L))+M[4]+4118548399&4294967295,S=j+(D<<7&4294967295|D>>>25),D=L+(R^S&(j^R))+M[5]+1200080426&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(j^L&(S^j))+M[6]+2821735955&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(S^R&(L^S))+M[7]+4249261313&4294967295,j=R+(D<<22&4294967295|D>>>10),D=S+(L^j&(R^L))+M[8]+1770035416&4294967295,S=j+(D<<7&4294967295|D>>>25),D=L+(R^S&(j^R))+M[9]+2336552879&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(j^L&(S^j))+M[10]+4294925233&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(S^R&(L^S))+M[11]+2304563134&4294967295,j=R+(D<<22&4294967295|D>>>10),D=S+(L^j&(R^L))+M[12]+1804603682&4294967295,S=j+(D<<7&4294967295|D>>>25),D=L+(R^S&(j^R))+M[13]+4254626195&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(j^L&(S^j))+M[14]+2792965006&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(S^R&(L^S))+M[15]+1236535329&4294967295,j=R+(D<<22&4294967295|D>>>10),D=S+(R^L&(j^R))+M[1]+4129170786&4294967295,S=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(S^j))+M[6]+3225465664&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^j&(L^S))+M[11]+643717713&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^S&(R^L))+M[0]+3921069994&4294967295,j=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(j^R))+M[5]+3593408605&4294967295,S=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(S^j))+M[10]+38016083&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^j&(L^S))+M[15]+3634488961&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^S&(R^L))+M[4]+3889429448&4294967295,j=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(j^R))+M[9]+568446438&4294967295,S=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(S^j))+M[14]+3275163606&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^j&(L^S))+M[3]+4107603335&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^S&(R^L))+M[8]+1163531501&4294967295,j=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(j^R))+M[13]+2850285829&4294967295,S=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(S^j))+M[2]+4243563512&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^j&(L^S))+M[7]+1735328473&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^S&(R^L))+M[12]+2368359562&4294967295,j=R+(D<<20&4294967295|D>>>12),D=S+(j^R^L)+M[5]+4294588738&4294967295,S=j+(D<<4&4294967295|D>>>28),D=L+(S^j^R)+M[8]+2272392833&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^j)+M[11]+1839030562&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^S)+M[14]+4259657740&4294967295,j=R+(D<<23&4294967295|D>>>9),D=S+(j^R^L)+M[1]+2763975236&4294967295,S=j+(D<<4&4294967295|D>>>28),D=L+(S^j^R)+M[4]+1272893353&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^j)+M[7]+4139469664&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^S)+M[10]+3200236656&4294967295,j=R+(D<<23&4294967295|D>>>9),D=S+(j^R^L)+M[13]+681279174&4294967295,S=j+(D<<4&4294967295|D>>>28),D=L+(S^j^R)+M[0]+3936430074&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^j)+M[3]+3572445317&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^S)+M[6]+76029189&4294967295,j=R+(D<<23&4294967295|D>>>9),D=S+(j^R^L)+M[9]+3654602809&4294967295,S=j+(D<<4&4294967295|D>>>28),D=L+(S^j^R)+M[12]+3873151461&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^j)+M[15]+530742520&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^S)+M[2]+3299628645&4294967295,j=R+(D<<23&4294967295|D>>>9),D=S+(R^(j|~L))+M[0]+4096336452&4294967295,S=j+(D<<6&4294967295|D>>>26),D=L+(j^(S|~R))+M[7]+1126891415&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~j))+M[14]+2878612391&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~S))+M[5]+4237533241&4294967295,j=R+(D<<21&4294967295|D>>>11),D=S+(R^(j|~L))+M[12]+1700485571&4294967295,S=j+(D<<6&4294967295|D>>>26),D=L+(j^(S|~R))+M[3]+2399980690&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~j))+M[10]+4293915773&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~S))+M[1]+2240044497&4294967295,j=R+(D<<21&4294967295|D>>>11),D=S+(R^(j|~L))+M[8]+1873313359&4294967295,S=j+(D<<6&4294967295|D>>>26),D=L+(j^(S|~R))+M[15]+4264355552&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~j))+M[6]+2734768916&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~S))+M[13]+1309151649&4294967295,j=R+(D<<21&4294967295|D>>>11),D=S+(R^(j|~L))+M[4]+4149444226&4294967295,S=j+(D<<6&4294967295|D>>>26),D=L+(j^(S|~R))+M[11]+3174756917&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~j))+M[2]+718787259&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~S))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+L&4294967295}i.prototype.v=function(I,S){S===void 0&&(S=I.length);const j=S-this.blockSize,M=this.C;let R=this.h,L=0;for(;L<S;){if(R==0)for(;L<=j;)l(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<S;)if(M[R++]=I.charCodeAt(L++),R==this.blockSize){l(this,M),R=0;break}}else for(;L<S;)if(M[R++]=I[L++],R==this.blockSize){l(this,M),R=0;break}}this.h=R,this.o+=S},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var j=I.length-8;j<I.length;++j)I[j]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,j=0;j<4;++j)for(let M=0;M<32;M+=8)I[S++]=this.g[j]>>>M&255;return I};function u(I,S){var j=y;return Object.prototype.hasOwnProperty.call(j,I)?j[I]:j[I]=S(I)}function f(I,S){this.h=S;const j=[];let M=!0;for(let R=I.length-1;R>=0;R--){const L=I[R]|0;M&&L==S||(j[R]=L,M=!1)}this.g=j}var y={};function p(I){return-128<=I&&I<128?u(I,function(S){return new f([S|0],S<0?-1:0)}):new f([I|0],I<0?-1:0)}function x(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return V(x(-I));const S=[];let j=1;for(let M=0;I>=j;M++)S[M]=I/j|0,j*=4294967296;return new f(S,0)}function _(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return V(_(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=x(Math.pow(S,8));let M=E;for(let L=0;L<I.length;L+=8){var R=Math.min(8,I.length-L);const D=parseInt(I.substring(L,L+R),S);R<8?(R=x(Math.pow(S,R)),M=M.j(R).add(x(D))):(M=M.j(j),M=M.add(x(D)))}return M}var E=p(0),A=p(1),z=p(16777216);r=f.prototype,r.m=function(){if(Q(this))return-V(this).m();let I=0,S=1;for(let j=0;j<this.g.length;j++){const M=this.i(j);I+=(M>=0?M:4294967296+M)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(G(this))return"0";if(Q(this))return"-"+V(this).toString(I);const S=x(Math.pow(I,6));var j=this;let M="";for(;;){const R=ge(j,S).g;j=se(j,R.j(S));let L=((j.g.length>0?j.g[0]:j.h)>>>0).toString(I);if(j=R,G(j))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function G(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function Q(I){return I.h==-1}r.l=function(I){return I=se(this,I),Q(I)?-1:G(I)?0:1};function V(I){const S=I.g.length,j=[];for(let M=0;M<S;M++)j[M]=~I.g[M];return new f(j,~I.h).add(A)}r.abs=function(){return Q(this)?V(this):this},r.add=function(I){const S=Math.max(this.g.length,I.g.length),j=[];let M=0;for(let R=0;R<=S;R++){let L=M+(this.i(R)&65535)+(I.i(R)&65535),D=(L>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);M=D>>>16,L&=65535,D&=65535,j[R]=D<<16|L}return new f(j,j[j.length-1]&-2147483648?-1:0)};function se(I,S){return I.add(V(S))}r.j=function(I){if(G(this)||G(I))return E;if(Q(this))return Q(I)?V(this).j(V(I)):V(V(this).j(I));if(Q(I))return V(this.j(V(I)));if(this.l(z)<0&&I.l(z)<0)return x(this.m()*I.m());const S=this.g.length+I.g.length,j=[];for(var M=0;M<2*S;M++)j[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<I.g.length;R++){const L=this.i(M)>>>16,D=this.i(M)&65535,ae=I.i(R)>>>16,Ne=I.i(R)&65535;j[2*M+2*R]+=D*Ne,W(j,2*M+2*R),j[2*M+2*R+1]+=L*Ne,W(j,2*M+2*R+1),j[2*M+2*R+1]+=D*ae,W(j,2*M+2*R+1),j[2*M+2*R+2]+=L*ae,W(j,2*M+2*R+2)}for(I=0;I<S;I++)j[I]=j[2*I+1]<<16|j[2*I];for(I=S;I<2*S;I++)j[I]=0;return new f(j,0)};function W(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function me(I,S){this.g=I,this.h=S}function ge(I,S){if(G(S))throw Error("division by zero");if(G(I))return new me(E,E);if(Q(I))return S=ge(V(I),S),new me(V(S.g),V(S.h));if(Q(S))return S=ge(I,V(S)),new me(V(S.g),S.h);if(I.g.length>30){if(Q(I)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var j=A,M=S;M.l(I)<=0;)j=ve(j),M=ve(M);var R=ye(j,1),L=ye(M,1);for(M=ye(M,2),j=ye(j,2);!G(M);){var D=L.add(M);D.l(I)<=0&&(R=R.add(j),L=D),M=ye(M,1),j=ye(j,1)}return S=se(I,R.j(S)),new me(R,S)}for(R=E;I.l(S)>=0;){for(j=Math.max(1,Math.floor(I.m()/S.m())),M=Math.ceil(Math.log(j)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=x(j),D=L.j(S);Q(D)||D.l(I)>0;)j-=M,L=x(j),D=L.j(S);G(L)&&(L=A),R=R.add(L),I=se(I,D)}return new me(R,I)}r.B=function(I){return ge(this,I).h},r.and=function(I){const S=Math.max(this.g.length,I.g.length),j=[];for(let M=0;M<S;M++)j[M]=this.i(M)&I.i(M);return new f(j,this.h&I.h)},r.or=function(I){const S=Math.max(this.g.length,I.g.length),j=[];for(let M=0;M<S;M++)j[M]=this.i(M)|I.i(M);return new f(j,this.h|I.h)},r.xor=function(I){const S=Math.max(this.g.length,I.g.length),j=[];for(let M=0;M<S;M++)j[M]=this.i(M)^I.i(M);return new f(j,this.h^I.h)};function ve(I){const S=I.g.length+1,j=[];for(let M=0;M<S;M++)j[M]=I.i(M)<<1|I.i(M-1)>>>31;return new f(j,I.h)}function ye(I,S){const j=S>>5;S%=32;const M=I.g.length-j,R=[];for(let L=0;L<M;L++)R[L]=S>0?I.i(L+j)>>>S|I.i(L+j+1)<<32-S:I.i(L+j);return new f(R,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,c_=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,Ci=f}).apply(typeof av<"u"?av:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u_,Qo,d_,fd,zm,h_,f_,m_;(function(){var r,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function l(d,g){if(g)e:{var b=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var F=d[N];if(!(F in b))break e;b=b[F]}d=d[d.length-1],N=b[d],g=g(N),g!=N&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function y(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,b){return d.call.apply(d.bind,arguments)}function x(d,g,b){return x=p,x.apply(null,arguments)}function _(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function E(d,g){function b(){}b.prototype=g.prototype,d.Z=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(N,F,J){for(var pe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)pe[Fe-2]=arguments[Fe];return g.prototype[F].apply(N,pe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function z(d){const g=d.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=d[N];return b}return[]}function G(d,g){for(let N=1;N<arguments.length;N++){const F=arguments[N];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=d.length||0;const J=F.length||0;d.length=b+J;for(let pe=0;pe<J;pe++)d[b+pe]=F[pe]}else d.push(F)}}class Q{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function V(d){f.setTimeout(()=>{throw d},0)}function se(){var d=I;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class W{constructor(){this.h=this.g=null}add(g,b){const N=me.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var me=new Q(()=>new ge,d=>d.reset());class ge{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,ye=!1,I=new W,S=()=>{const d=Promise.resolve(void 0);ve=()=>{d.then(j)}};function j(){for(var d;d=se();){try{d.h.call(d.g)}catch(b){V(b)}var g=me;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}ye=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function ae(d,g){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}E(ae,R),ae.prototype.init=function(d,g){const b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),Y=0;function q(d,g,b,N,F){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=F,this.key=++Y,this.da=this.fa=!1}function te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d,g,b){for(const N in d)g.call(b,d[N],N,d)}function Te(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function T(d){const g={};for(const b in d)g[b]=d[b];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(d,g){let b,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(b in N)d[b]=N[b];for(let J=0;J<C.length;J++)b=C[J],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function k(d){this.src=d,this.g={},this.h=0}k.prototype.add=function(d,g,b,N,F){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const pe=ie(d,g,N,F);return pe>-1?(g=d[pe],b||(g.fa=!1)):(g=new q(g,this.src,J,!!N,F),g.fa=b,d.push(g)),g};function H(d,g){const b=g.type;if(b in d.g){var N=d.g[b],F=Array.prototype.indexOf.call(N,g,void 0),J;(J=F>=0)&&Array.prototype.splice.call(N,F,1),J&&(te(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function ie(d,g,b,N){for(let F=0;F<d.length;++F){const J=d[F];if(!J.da&&J.listener==g&&J.capture==!!b&&J.ha==N)return F}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Ce={};function ke(d,g,b,N,F){if(Array.isArray(g)){for(let J=0;J<g.length;J++)ke(d,g[J],b,N,F);return null}return b=be(b),d&&d[Ne]?d.J(g,b,y(N)?!!N.capture:!1,F):rt(d,g,b,!1,N,F)}function rt(d,g,b,N,F,J){if(!g)throw Error("Invalid event type");const pe=y(F)?!!F.capture:!!F;let Fe=Re(d);if(Fe||(d[fe]=Fe=new k(d)),b=Fe.add(g,b,N,pe,J),b.proxy)return b;if(N=It(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)L||(F=pe),F===void 0&&(F=!1),d.addEventListener(g.toString(),N,F);else if(d.attachEvent)d.attachEvent(_e(g.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function It(){function d(b){return g.call(d.src,d.listener,b)}const g=he;return d}function ot(d,g,b,N,F){if(Array.isArray(g))for(var J=0;J<g.length;J++)ot(d,g[J],b,N,F);else N=y(N)?!!N.capture:!!N,b=be(b),d&&d[Ne]?(d=d.i,J=String(g).toString(),J in d.g&&(g=d.g[J],b=ie(g,b,N,F),b>-1&&(te(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete d.g[J],d.h--)))):d&&(d=Re(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ie(g,b,N,F)),(b=d>-1?g[d]:null)&&oe(b))}function oe(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ne])H(g.i,d);else{var b=d.type,N=d.proxy;g.removeEventListener?g.removeEventListener(b,N,d.capture):g.detachEvent?g.detachEvent(_e(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=Re(g))?(H(b,d),b.h==0&&(b.src=null,g[fe]=null)):te(d)}}}function _e(d){return d in Ce?Ce[d]:Ce[d]="on"+d}function he(d,g){if(d.da)d=!0;else{g=new ae(g,this);const b=d.listener,N=d.ha||d.src;d.fa&&oe(d),d=b.call(N,g)}return d}function Re(d){return d=d[fe],d instanceof k?d:null}var He="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(d){return typeof d=="function"?d:(d[He]||(d[He]=function(g){return d.handleEvent(g)}),d[He])}function Ke(){M.call(this),this.i=new k(this),this.M=this,this.G=null}E(Ke,M),Ke.prototype[Ne]=!0,Ke.prototype.removeEventListener=function(d,g,b,N){ot(this,d,g,b,N)};function Xe(d,g){var b,N=d.G;if(N)for(b=[];N;N=N.G)b.push(N);if(d=d.M,N=g.type||g,typeof g=="string")g=new R(g,d);else if(g instanceof R)g.target=g.target||d;else{var F=g;g=new R(N,d),U(g,F)}F=!0;let J,pe;if(b)for(pe=b.length-1;pe>=0;pe--)J=g.g=b[pe],F=ne(J,N,!0,g)&&F;if(J=g.g=d,F=ne(J,N,!0,g)&&F,F=ne(J,N,!1,g)&&F,b)for(pe=0;pe<b.length;pe++)J=g.g=b[pe],F=ne(J,N,!1,g)&&F}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const b=d.g[g];for(let N=0;N<b.length;N++)te(b[N]);delete d.g[g],d.h--}}this.G=null},Ke.prototype.J=function(d,g,b,N){return this.i.add(String(d),g,!1,b,N)},Ke.prototype.K=function(d,g,b,N){return this.i.add(String(d),g,!0,b,N)};function ne(d,g,b,N){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let J=0;J<g.length;++J){const pe=g[J];if(pe&&!pe.da&&pe.capture==b){const Fe=pe.listener,Pt=pe.ha||pe.src;pe.fa&&H(d.i,pe),F=Fe.call(Pt,N)!==!1&&F}}return F&&!N.defaultPrevented}function Ie(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(d,g||0)}function We(d){d.g=Ie(()=>{d.g=null,d.i&&(d.i=!1,We(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class ct extends M{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(d){M.call(this),this.h=d,this.g={}}E(xn,M);var ze=[];function Et(d){xe(d.g,function(g,b){this.g.hasOwnProperty(b)&&oe(g)},d),d.g={}}xn.prototype.N=function(){xn.Z.N.call(this),Et(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=f.JSON.stringify,Rn=f.JSON.parse,zr=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Hi(){}function or(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){R.call(this,"d")}E(kt,R);function cn(){R.call(this,"c")}E(cn,R);var bt={},Bn=null;function Br(){return Bn=Bn||new Ke}bt.Ia="serverreachability";function Ic(d){R.call(this,bt.Ia,d)}E(Ic,R);function Is(d){const g=Br();Xe(g,new Ic(g))}bt.STAT_EVENT="statevent";function Fi(d,g){R.call(this,bt.STAT_EVENT,d),this.stat=g}E(Fi,R);function Ft(d){const g=Br();Xe(g,new Fi(g,d))}bt.Ja="timingevent";function ks(d,g){R.call(this,bt.Ja,d),this.size=g}E(ks,R);function Ds(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},g)}function ps(){this.g=!0}ps.prototype.ua=function(){this.g=!1};function ch(d,g,b,N,F,J){d.info(function(){if(d.g)if(J){var pe="",Fe=J.split("&");for(let ut=0;ut<Fe.length;ut++){var Pt=Fe[ut].split("=");if(Pt.length>1){const Ct=Pt[0];Pt=Pt[1];const rs=Ct.split("_");pe=rs.length>=2&&rs[1]=="type"?pe+(Ct+"="+Pt+"&"):pe+(Ct+"=redacted&")}}}else pe=null;else pe=J;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+g+`
`+b+`
`+pe})}function kc(d,g,b,N,F,J,pe){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+g+`
`+b+`
`+J+" "+pe})}function Ms(d,g,b,N){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+uh(d,b)+(N?" "+N:"")})}function Gi(d,g){d.info(function(){return"TIMEOUT: "+g})}ps.prototype.info=function(){};function uh(d,g){if(!d.g)return g;if(!g)return null;try{const J=JSON.parse(g);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var b=J[d];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let pe=1;pe<N.length;pe++)N[pe]=""}}}}return vn(J)}catch{return g}}var Yi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yl;function Ki(){}E(Ki,Hi),Ki.prototype.g=function(){return new XMLHttpRequest},Yl=new Ki;function cr(d){return encodeURIComponent(String(d))}function Dc(d){var g=1;d=d.split(":");const b=[];for(;g>0&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function ys(d,g,b,N){this.j=d,this.i=g,this.l=b,this.S=N||1,this.V=new xn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xs}function xs(){this.i=null,this.g="",this.h=!1}var Gt={},sn={};function Os(d,g,b){d.M=1,d.A=$i(Kt(g)),d.u=b,d.R=!0,Da(d,null)}function Da(d,g){d.F=Date.now(),Vs(d),d.B=Kt(d.A);var b=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),La(b.i,"t",N),d.C=0,b=d.j.L,d.h=new xs,d.g=$c(d.j,b?g:null,!d.u),d.P>0&&(d.O=new ct(x(d.Y,d,d.g),d.P)),g=d.V,b=d.g,N=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(ze[0]=F.toString()),F=ze);for(let J=0;J<F.length;J++){const pe=ke(b,F[J],N||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=d.J?T(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Is(),ch(d.i,d.v,d.B,d.l,d.S,d.u)}ys.prototype.ba=function(d){d=d.target;const g=this.O;g&&_s(d)==3?g.j():this.Y(d)},ys.prototype.Y=function(d){try{if(d==this.g)e:{const Fe=_s(this.g),Pt=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Fe!=4||Pt==7||(Pt==8||ut<=0?Is(3):Is(2)),Ls(this);var g=this.g.ca();this.X=g;var b=dh(this);if(this.o=g==200,kc(this.i,this.v,this.B,this.l,this.S,Fe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var J=N;break t}}J=null}if(d=J)Ms(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ps(this,d);else{this.o=!1,this.m=3,Ft(12),qn(this),ts(this);break e}}if(this.R){d=!0;let Ct;for(;!this.K&&this.C<b.length;)if(Ct=Oc(this,b),Ct==sn){Fe==4&&(this.m=4,Ft(14),d=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Gt){this.m=4,Ft(15),Ms(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Ms(this.i,this.l,Ct,null),Ps(this,Ct);if(Mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||b.length!=0||this.h.h||(this.m=1,Ft(16),d=!1),this.o=this.o&&d,!d)Ms(this.i,this.l,b,"[Invalid Chunked Response]"),qn(this),ts(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),lo(pe),pe.P=!0,Ft(11))}}else Ms(this.i,this.l,b,null),Ps(this,b);Fe==4&&qn(this),this.o&&!this.K&&(Fe==4?Fc(this.j,this):(this.o=!1,Vs(this)))}else dr(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),qn(this),ts(this)}}}catch{}finally{}};function dh(d){if(!Mc(d))return d.g.la();const g=un(d.g);if(g==="")return"";let b="";const N=g.length,F=_s(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return qn(d),ts(d),"";d.h.i=new f.TextDecoder}for(let J=0;J<N;J++)d.h.h=!0,b+=d.h.i.decode(g[J],{stream:!(F&&J==N-1)});return g.length=0,d.h.g+=b,d.C=0,d.h.g}function Mc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Oc(d,g){var b=d.C,N=g.indexOf(`
`,b);return N==-1?sn:(b=Number(g.substring(b,N)),isNaN(b)?Gt:(N+=1,N+b>g.length?sn:(g=g.slice(N,N+b),d.C=N+b,g)))}ys.prototype.cancel=function(){this.K=!0,qn(this)};function Vs(d){d.T=Date.now()+d.H,Ma(d,d.H)}function Ma(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ds(x(d.aa,d),g)}function Ls(d){d.D&&(f.clearTimeout(d.D),d.D=null)}ys.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Gi(this.i,this.B),this.M!=2&&(Is(),Ft(17)),qn(this),this.m=2,ts(this)):Ma(this,this.T-d)};function ts(d){d.j.I==0||d.K||Fc(d.j,d)}function qn(d){Ls(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Et(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Ps(d,g){try{var b=d.j;if(b.I!=0&&(b.g==d||zs(b.h,d))){if(!d.L&&zs(b.h,d)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)qa(b),Qr(b);else break e;ta(b),Ft(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ds(x(b.Va,b),6e3));Us(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ys(b,11)}else if((d.L||b.g==d)&&qa(b),!D(g))for(F=b.Ba.g.parse(g),g=0;g<F.length;g++){let ut=F[g];const Ct=ut[0];if(!(Ct<=b.K))if(b.K=Ct,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const rs=ut[3];rs!=null&&(b.ka=rs,b.j.info("VER="+b.ka));const Ks=ut[4];Ks!=null&&(b.za=Ks,b.j.info("SVER="+b.za));const ws=ut[5];ws!=null&&typeof ws=="number"&&ws>0&&(N=1.5*ws,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const Es=d.g;if(Es){const na=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var J=N.h;J.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ql(J,J.h),J.h=null))}if(N.G){const Ha=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(N.wa=Ha,ft(N.J,N.G,Ha))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var pe=d;if(N.na=Kc(N,N.L?N.ba:null,N.W),pe.L){Xl(N.h,pe);var Fe=pe,Pt=N.O;Pt&&(Fe.H=Pt),Fe.D&&(Ls(Fe),Vs(Fe)),N.g=pe}else qc(N);b.i.length>0&&Gs(b)}else ut[0]!="stop"&&ut[0]!="close"||Ys(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Ys(b,7):io(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}Is(4)}catch{}}var Yt=class{constructor(d,g){this.g=d,this.map=g}};function Kl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Us(d){return d.h?1:d.g?d.g.size:0}function zs(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Ql(d,g){d.g?d.g.add(g):d.h=g}function Xl(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Kl.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Wl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.G);return g}return z(d.i)}var Vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(d,g){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const N=d[b].indexOf("=");let F,J=null;N>=0?(F=d[b].substring(0,N),J=d[b].substring(N+1)):F=d[b],g(F,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Hn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Hn?(this.l=d.l,rn(this,d.j),this.o=d.o,this.g=d.g,qr(this,d.u),this.h=d.h,Zl(this,zc(d.i)),this.m=d.m):d&&(g=String(d).match(Vc))?(this.l=!1,rn(this,g[1]||"",!0),this.o=Bs(g[2]||""),this.g=Bs(g[3]||"",!0),qr(this,g[4]),this.h=Bs(g[5]||"",!0),Zl(this,g[6]||"",!0),this.m=Bs(g[7]||"")):(this.l=!1,this.i=new Fr(null,this.l))}Hn.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Qi(g,Va,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Qi(g,Va,!0),"@"),d.push(cr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qi(b,b.charAt(0)=="/"?Jl:Lc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qi(b,Pc)),d.join("")},Hn.prototype.resolve=function(d){const g=Kt(this);let b=!!d.j;b?rn(g,d.j):b=!!d.o,b?g.o=d.o:b=!!d.g,b?g.g=d.g:b=d.u!=null;var N=d.h;if(b)qr(g,d.u);else if(b=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=g.h.lastIndexOf("/");F!=-1&&(N=g.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const J=[];for(let pe=0;pe<F.length;){const Fe=F[pe++];Fe=="."?N&&pe==F.length&&J.push(""):Fe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),N&&pe==F.length&&J.push("")):(J.push(Fe),N=!0)}N=J.join("/")}else N=F}return b?g.h=N:b=d.i.toString()!=="",b?Zl(g,zc(d.i)):b=!!d.m,b&&(g.m=d.m),g};function Kt(d){return new Hn(d)}function rn(d,g,b){d.j=b?Bs(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function qr(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Zl(d,g,b){g instanceof Fr?(d.i=g,Pa(d.i,d.l)):(b||(g=Qi(g,Hr)),d.i=new Fr(g,d.l))}function ft(d,g,b){d.i.set(g,b)}function $i(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Bs(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qi(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,In),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function In(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Va=/[#\/\?@]/g,Lc=/[#\?:]/g,Jl=/[#\?]/g,Hr=/[#\?@]/g,Pc=/#/g;function Fr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function kn(d){d.g||(d.g=new Map,d.h=0,d.i&&Oa(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=Fr.prototype,r.add=function(d,g){kn(this),this.i=null,d=Gr(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Uc(d,g){kn(d),g=Gr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function eo(d,g){return kn(d),g=Gr(d,g),d.g.has(g)}r.forEach=function(d,g){kn(this),this.g.forEach(function(b,N){b.forEach(function(F){d.call(g,F,N,this)},this)},this)};function to(d,g){kn(d);let b=[];if(typeof g=="string")eo(d,g)&&(b=b.concat(d.g.get(Gr(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)b=b.concat(d[g]);return b}r.set=function(d,g){return kn(this),this.i=null,d=Gr(this,d),eo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},r.get=function(d,g){return d?(d=to(this,d),d.length>0?String(d[0]):g):g};function La(d,g,b){Uc(d,g),b.length>0&&(d.i=null,d.g.set(Gr(d,g),z(b)),d.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const F=cr(b);b=to(this,b);for(let J=0;J<b.length;J++){let pe=F;b[J]!==""&&(pe+="="+cr(b[J])),d.push(pe)}}return this.i=d.join("&")};function zc(d){const g=new Fr;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Gr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Pa(d,g){g&&!d.j&&(kn(d),d.i=null,d.g.forEach(function(b,N){const F=N.toLowerCase();N!=F&&(Uc(this,N),La(this,F,b))},d)),d.j=g}function vs(d,g){const b=new ps;if(f.Image){const N=new Image;N.onload=_(ns,b,"TestLoadImage: loaded",!0,g,N),N.onerror=_(ns,b,"TestLoadImage: error",!1,g,N),N.onabort=_(ns,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=_(ns,b,"TestLoadImage: timeout",!1,g,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else g(!1)}function no(d,g){const b=new ps,N=new AbortController,F=setTimeout(()=>{N.abort(),ns(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:N.signal}).then(J=>{clearTimeout(F),J.ok?ns(b,"TestPingServer: ok",!0,g):ns(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ns(b,"TestPingServer: error",!1,g)})}function ns(d,g,b,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(b)}catch{}}function Yr(){this.g=new zr}function qs(d){this.i=d.Sb||null,this.h=d.ab||!1}E(qs,Hi),qs.prototype.g=function(){return new Xi(this.i,this.h)};function Xi(d,g){Ke.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Xi,Ke),r=Xi.prototype,r.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,bs(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Kr(this):bs(this),this.readyState==3&&Ua(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,Kr(this))},r.Na=function(d){this.g&&(this.response=d,Kr(this))},r.ga=function(){this.g&&Kr(this)};function Kr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,bs(d)}r.setRequestHeader=function(d,g){this.A.append(d,g)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function bs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ss(d){let g="";return xe(d,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Wi(d,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=ss(b),typeof d=="string"?b!=null&&cr(b):ft(d,g,b))}function pt(d){Ke.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(pt,Ke);var Hs=/^https?$/i,so=["POST","PUT"];r=pt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yl.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(J){Zi(this,J);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)b.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const J of N.keys())b.set(J,N.get(J));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(so,g,void 0)>=0)||N||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of b)this.g.setRequestHeader(J,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Zi(this,J)}};function Zi(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,ro(d),ur(d)}function ro(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Xe(this,"complete"),Xe(this,"abort"),ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),pt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ji(this):this.Xa())},r.Xa=function(){Ji(this)};function Ji(d){if(d.h&&typeof u<"u"){if(d.v&&_s(d)==4)setTimeout(d.Ca.bind(d),0);else if(Xe(d,"readystatechange"),_s(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=J===0){let pe=String(d.D).match(Vc)[1]||null;!pe&&f.self&&f.self.location&&(pe=f.self.location.protocol.slice(0,-1)),N=!Hs.test(pe?pe.toLowerCase():"")}b=N}if(b)Xe(d,"complete"),Xe(d,"success");else{d.o=6;try{var F=_s(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",ro(d)}}finally{ur(d)}}}}function ur(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,g||Xe(d,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function _s(d){return d.g?d.g.readyState:0}r.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Rn(g)}};function un(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function dr(d){const g={};d=(d.g&&_s(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(D(d[N]))continue;var b=Dc(d[N]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=g[F]||[];g[F]=J,J.push(b)}Te(g,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function $r(d){this.za=0,this.i=[],this.j=new ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fs("baseRetryDelayMs",5e3,d),this.Za=Fs("retryDelaySeedMs",1e4,d),this.Ta=Fs("forwardChannelMaxRetries",2,d),this.va=Fs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Kl(d&&d.concurrentRequestLimit),this.Ba=new Yr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=$r.prototype,r.ka=8,r.I=1,r.connect=function(d,g,b,N){Ft(0),this.W=d,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Kc(this,null,this.W),Gs(this)};function io(d){if(za(d),d.I==3){var g=d.V++,b=Kt(d.J);if(ft(b,"SID",d.M),ft(b,"RID",g),ft(b,"TYPE","terminate"),ea(d,b),g=new ys(d,d.j,g),g.M=2,g.A=$i(Kt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=$c(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Vs(g)}Yc(d)}function Qr(d){d.g&&(lo(d),d.g.cancel(),d.g=null)}function za(d){Qr(d),d.v&&(f.clearTimeout(d.v),d.v=null),qa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Gs(d){if(!$l(d.h)&&!d.m){d.m=!0;var g=d.Ea;ve||S(),ye||(ve(),ye=!0),I.add(g,d),d.D=0}}function Ba(d,g){return Us(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ds(x(d.Ea,d,g),Gc(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new ys(this,this.j,d);let J=this.o;if(this.U&&(J?(J=T(J),U(J,this.U)):J=this.U),this.u!==null||this.R||(F.J=J,J=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Bc(this,F,g),b=Kt(this.J),ft(b,"RID",d),ft(b,"CVER",22),this.G&&ft(b,"X-HTTP-Session-Id",this.G),ea(this,b),J&&(this.R?g="headers="+cr(ss(J))+"&"+g:this.u&&Wi(b,this.u,J)),Ql(this.h,F),this.Ra&&ft(b,"TYPE","init"),this.S?(ft(b,"$req",g),ft(b,"SID","null"),F.U=!0,Os(F,b,null)):Os(F,b,g),this.I=2}}else this.I==3&&(d?ao(this,d):this.i.length==0||$l(this.h)||ao(this))};function ao(d,g){var b;g?b=g.l:b=d.V++;const N=Kt(d.J);ft(N,"SID",d.M),ft(N,"RID",b),ft(N,"AID",d.K),ea(d,N),d.u&&d.o&&Wi(N,d.u,d.o),b=new ys(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Bc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ql(d.h,b),Os(b,N,g)}function ea(d,g){d.H&&xe(d.H,function(b,N){ft(g,N,b)}),d.l&&xe({},function(b,N){ft(g,N,b)})}function Bc(d,g,b){b=Math.min(d.i.length,b);const N=d.l?x(d.l.Ka,d.l,d):null;e:{var F=d.i;let Fe=-1;for(;;){const Pt=["count="+b];Fe==-1?b>0?(Fe=F[0].g,Pt.push("ofs="+Fe)):Fe=0:Pt.push("ofs="+Fe);let ut=!0;for(let Ct=0;Ct<b;Ct++){var J=F[Ct].g;const rs=F[Ct].map;if(J-=Fe,J<0)Fe=Math.max(0,F[Ct].g-100),ut=!1;else try{J="req"+J+"_"||"";try{var pe=rs instanceof Map?rs:Object.entries(rs);for(const[Ks,ws]of pe){let Es=ws;y(ws)&&(Es=vn(ws)),Pt.push(J+Ks+"="+encodeURIComponent(Es))}}catch(Ks){throw Pt.push(J+"type="+encodeURIComponent("_badmap")),Ks}}catch{N&&N(rs)}}if(ut){pe=Pt.join("&");break e}}pe=void 0}return d=d.i.splice(0,b),g.G=d,pe}function qc(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;ve||S(),ye||(ve(),ye=!0),I.add(g,d),d.A=0}}function ta(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ds(x(d.Da,d),Gc(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,Hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ds(x(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Qr(this),Hc(this))};function lo(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Hc(d){d.g=new ys(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Kt(d.na);ft(g,"RID","rpc"),ft(g,"SID",d.M),ft(g,"AID",d.K),ft(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(g,"TO",d.ia),ft(g,"TYPE","xmlhttp"),ea(d,g),d.u&&d.o&&Wi(g,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=$i(Kt(g)),b.u=null,b.R=!0,Da(b,d)}r.Va=function(){this.C!=null&&(this.C=null,Qr(this),ta(this),Ft(19))};function qa(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Fc(d,g){var b=null;if(d.g==g){qa(d),lo(d),d.g=null;var N=2}else if(zs(d.h,g))b=g.G,Xl(d.h,g),N=1;else return;if(d.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var F=d.D;N=Br(),Xe(N,new ks(N,b)),Gs(d)}else qc(d);else if(F=g.m,F==3||F==0&&g.X>0||!(N==1&&Ba(d,g)||N==2&&ta(d)))switch(b&&b.length>0&&(g=d.h,g.i=g.i.concat(b)),F){case 1:Ys(d,5);break;case 4:Ys(d,10);break;case 3:Ys(d,6);break;default:Ys(d,2)}}}function Gc(d,g){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*g}function Ys(d,g){if(d.j.info("Error code "+g),g==2){var b=x(d.bb,d),N=d.Ua;const F=!N;N=new Hn(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||rn(N,"https"),$i(N),F?vs(N.toString(),b):no(N.toString(),b)}else Ft(2);d.I=0,d.l&&d.l.pa(g),Yc(d),za(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Yc(d){if(d.I=0,d.ja=[],d.l){const g=Wl(d.h);(g.length!=0||d.i.length!=0)&&(G(d.ja,g),G(d.ja,d.i),d.h.i.length=0,z(d.i),d.i.length=0),d.l.oa()}}function Kc(d,g,b){var N=b instanceof Hn?Kt(b):new Hn(b);if(N.g!="")g&&(N.g=g+"."+N.g),qr(N,N.u);else{var F=f.location;N=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const J=new Hn(null);N&&rn(J,N),g&&(J.g=g),F&&qr(J,F),b&&(J.h=b),N=J}return b=d.G,g=d.wa,b&&g&&ft(N,b,g),ft(N,"VER",d.ka),ea(d,N),N}function $c(d,g,b){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new pt(new qs({ab:b})):new pt(d.ma),g.Fa(d.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}r=Qc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xr(){}Xr.prototype.g=function(d,g){return new An(d,g)};function An(d,g){Ke.call(this),this.g=new $r(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!D(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new hr(this)}E(An,Ke),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){io(this.g)},An.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=vn(d),d=b);g.i.push(new Yt(g.Ya++,d)),g.I==3&&Gs(g)},An.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,An.Z.N.call(this)};function Xc(d){kt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}E(Xc,kt);function Wc(){cn.call(this),this.status=1}E(Wc,cn);function hr(d){this.g=d}E(hr,Qc),hr.prototype.ra=function(){Xe(this.g,"a")},hr.prototype.qa=function(d){Xe(this.g,new Xc(d))},hr.prototype.pa=function(d){Xe(this.g,new Wc)},hr.prototype.oa=function(){Xe(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,m_=function(){return new Xr},f_=function(){return Br()},h_=bt,zm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,fd=Yi,Gl.COMPLETE="complete",d_=Gl,or.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Qo=or,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,u_=pt}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const lv="@firebase/firestore",ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new og("@firebase/firestore");function bl(){return Ca.logLevel}function Ee(r,...e){if(Ca.logLevel<=et.DEBUG){const n=e.map(vg);Ca.debug(`Firestore (${zl}): ${r}`,...n)}}function Dr(r,...e){if(Ca.logLevel<=et.ERROR){const n=e.map(vg);Ca.error(`Firestore (${zl}): ${r}`,...n)}}function Rl(r,...e){if(Ca.logLevel<=et.WARN){const n=e.map(vg);Ca.warn(`Firestore (${zl}): ${r}`,...n)}}function vg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,g_(r,i,n)}function g_(r,e,n){let i=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Dr(i),new Error(i)}function ht(r,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,r||g_(e,l,i)}function qe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wn.UNAUTHENTICATED)))}shutdown(){}}class PN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UN{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let i=this.i;const l=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let u=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ri,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},y=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>y(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ri)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new p_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class zN{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BN{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new zN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const i=u=>{u.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new cv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=HN(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function tt(r,e){return r<e?-1:r>e?1:0}function Bm(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const l=r.charAt(i),u=e.charAt(i);if(l!==u)return vm(l)===vm(u)?tt(l,u):vm(l)?1:-1}return tt(r.length,e.length)}const FN=55296,GN=57343;function vm(r){const e=r.charCodeAt(0);return e>=FN&&e<=GN}function Il(r,e,n){return r.length===e.length&&r.every(((i,l)=>n(i,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__name__";class Js{constructor(e,n,i){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Pe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=Js.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return tt(e.length,n.length)}static compareSegments(e,n){const i=Js.isNumericId(e),l=Js.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?Js.extractNumericId(e).compare(Js.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Tt extends Js{construct(e,n,i){return new Tt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Tt(n)}static emptyPath(){return new Tt([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Js{construct(e,n,i){return new pn(e,n,i)}static isValidIdentifier(e){return YN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uv}static keyField(){return new pn([uv])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,l+=2}else y==="`"?(f=!f,l++):y!=="."||f?(i+=y,l++):(u(),l++)}if(u(),f)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Tt.fromString(e))}static fromName(e){return new Me(Tt.fromString(e).popFirst(5))}static empty(){return new Me(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r,e,n){if(!n)throw new we(ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function KN(r,e,n,i){if(e===!0&&i===!0)throw new we(ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function dv(r){if(!Me.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function hv(r){if(Me.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function x_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Pe(12329,{type:typeof r})}function Zn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(r);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(r,e){const n={typeString:r};return e&&(n.value=e),n}function wc(r,e){if(!x_(r))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const f=r[i];if(l&&typeof f!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new we(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-62135596800,mv=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*mv);return new jt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fv)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mv}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:en("string",jt._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new jt(0,0))}static max(){return new Ue(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=-1;function $N(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,l=Ue.fromTimestamp(i===1e9?new jt(n+1,0):new jt(n,i));return new Di(l,Me.empty(),e)}function QN(r){return new Di(r.readTime,r.key,oc)}class Di{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Di(Ue.min(),Me.empty(),oc)}static max(){return new Di(Ue.max(),Me.empty(),oc)}}function XN(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(r.documentKey,e.documentKey),n!==0?n:tt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r){if(r.code!==ce.FAILED_PRECONDITION||r.message!==WN)throw r;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,i)=>{n(e)}))}static reject(e){return new de(((n,i)=>{i(e)}))}static waitFor(e){return new de(((n,i)=>{let l=0,u=0,f=!1;e.forEach((y=>{++l,y.next((()=>{++u,f&&u===l&&n()}),(p=>i(p)))})),f=!0,u===l&&n()}))}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next((l=>l?de.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new de(((i,l)=>{const u=e.length,f=new Array(u);let y=0;for(let p=0;p<u;p++){const x=p;n(e[x]).next((_=>{f[x]=_,++y,y===u&&i(f)}),(_=>l(_)))}}))}static doWhile(e,n){return new de(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function JN(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=-1;function Gd(r){return r==null}function jd(r){return r===0&&1/r==-1/0}function eA(r){return typeof r=="number"&&Number.isInteger(r)&&!jd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="";function tA(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=gv(e)),e=nA(r.get(n),e);return gv(e)}function nA(r,e){let n=e;const i=r.length;for(let l=0;l<i;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case v_:n+="";break;default:n+=u}}return n}function gv(r){return r+v_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function zi(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function b_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??gn.RED,this.left=l??gn.EMPTY,this.right=u??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new gn(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return gn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new nn(pn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new __("Invalid base64 string: "+u):u}})(e);return new yn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const sA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(r){if(ht(!!r,39018),typeof r=="string"){let e=0;const n=sA.exec(r);if(ht(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(r.seconds),nanos:Bt(r.nanos)}}function Bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?yn.fromBase64String(r):yn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="server_timestamp",E_="__type__",T_="__previous_value__",S_="__local_write_time__";function wg(r){return(r?.mapValue?.fields||{})[E_]?.stringValue===w_}function Yd(r){const e=r.mapValue.fields[T_];return wg(e)?Yd(e):e}function cc(r){const e=Mi(r.mapValue.fields[S_].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,i,l,u,f,y,p,x,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=_}}const Cd="(default)";class uc{constructor(e,n){this.projectId=e,this.database=n||Cd}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="__type__",iA="__max__",rd={mapValue:{}},A_="__vector__",Rd="value";function Vi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wg(r)?4:lA(r)?9007199254740991:aA(r)?10:11:Pe(28295,{value:r})}function lr(r,e){if(r===e)return!0;const n=Vi(r);if(n!==Vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return cc(r).isEqual(cc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Mi(l.timestampValue),y=Mi(u.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,u){return Oi(l.bytesValue).isEqual(Oi(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,u){return Bt(l.geoPointValue.latitude)===Bt(u.geoPointValue.latitude)&&Bt(l.geoPointValue.longitude)===Bt(u.geoPointValue.longitude)})(r,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Bt(l.integerValue)===Bt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Bt(l.doubleValue),y=Bt(u.doubleValue);return f===y?jd(f)===jd(y):isNaN(f)&&isNaN(y)}return!1})(r,e);case 9:return Il(r.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},y=u.mapValue.fields||{};if(pv(f)!==pv(y))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(y[p]===void 0||!lr(f[p],y[p])))return!1;return!0})(r,e);default:return Pe(52216,{left:r})}}function dc(r,e){return(r.values||[]).find((n=>lr(n,e)))!==void 0}function kl(r,e){if(r===e)return 0;const n=Vi(r),i=Vi(e);if(n!==i)return tt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const y=Bt(u.integerValue||u.doubleValue),p=Bt(f.integerValue||f.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1})(r,e);case 3:return xv(r.timestampValue,e.timestampValue);case 4:return xv(cc(r),cc(e));case 5:return Bm(r.stringValue,e.stringValue);case 6:return(function(u,f){const y=Oi(u),p=Oi(f);return y.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const y=u.split("/"),p=f.split("/");for(let x=0;x<y.length&&x<p.length;x++){const _=tt(y[x],p[x]);if(_!==0)return _}return tt(y.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const y=tt(Bt(u.latitude),Bt(f.latitude));return y!==0?y:tt(Bt(u.longitude),Bt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return vv(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const y=u.fields||{},p=f.fields||{},x=y[Rd]?.arrayValue,_=p[Rd]?.arrayValue,E=tt(x?.values?.length||0,_?.values?.length||0);return E!==0?E:vv(x,_)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===rd.mapValue&&f===rd.mapValue)return 0;if(u===rd.mapValue)return 1;if(f===rd.mapValue)return-1;const y=u.fields||{},p=Object.keys(y),x=f.fields||{},_=Object.keys(x);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const A=Bm(p[E],_[E]);if(A!==0)return A;const z=kl(y[p[E]],x[_[E]]);if(z!==0)return z}return tt(p.length,_.length)})(r.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function xv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return tt(r,e);const n=Mi(r),i=Mi(e),l=tt(n.seconds,i.seconds);return l!==0?l:tt(n.nanos,i.nanos)}function vv(r,e){const n=r.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=kl(n[l],i[l]);if(u)return u}return tt(n.length,i.length)}function Dl(r){return qm(r)}function qm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=Mi(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Oi(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Me.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=qm(u);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of i)u?u=!1:l+=",",l+=`${f}:${qm(n.fields[f])}`;return l+"}"})(r.mapValue):Pe(61005,{value:r})}function md(r){switch(Vi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yd(r);return e?16+md(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+md(u)),0)})(r.arrayValue);case 10:case 11:return(function(i){let l=0;return zi(i.fields,((u,f)=>{l+=u.length+md(f)})),l})(r.mapValue);default:throw Pe(13486,{value:r})}}function bv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Hm(r){return!!r&&"integerValue"in r}function Eg(r){return!!r&&"arrayValue"in r}function _v(r){return!!r&&"nullValue"in r}function wv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gd(r){return!!r&&"mapValue"in r}function aA(r){return(r?.mapValue?.fields||{})[N_]?.stringValue===A_}function tc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return zi(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=tc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(r.arrayValue.values[n]);return e}return{...r}}function lA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=pn.emptyPath(),i={},l=[];e.forEach(((f,y)=>{if(!n.isImmediateParentOf(y)){const p=this.getFieldsMap(n);this.applyChanges(p,i,l),i={},l=[],n=y.popLast()}f?i[y.lastSegment()]=tc(f):l.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){zi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Un(tc(this.value))}}function j_(r){const e=[];return zi(r.fields,((n,i)=>{const l=new pn([n]);if(gd(i)){const u=j_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,i,l,u,f,y){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=f,this.documentState=y}static newInvalidDocument(e){return new Tn(e,0,Ue.min(),Ue.min(),Ue.min(),Un.empty(),0)}static newFoundDocument(e,n,i,l){return new Tn(e,1,n,Ue.min(),i,l,0)}static newNoDocument(e,n){return new Tn(e,2,n,Ue.min(),Ue.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Ue.min(),Ue.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.position=e,this.inclusive=n}}function Ev(r,e,n){let i=0;for(let l=0;l<r.position.length;l++){const u=e[l],f=r.position[l];if(u.field.isKeyField()?i=Me.comparator(Me.fromName(f.referenceValue),n.key):i=kl(f,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!lr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function oA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{}class Jt extends C_{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new uA(e,n,i):n==="array-contains"?new fA(e,i):n==="in"?new mA(e,i):n==="not-in"?new gA(e,i):n==="array-contains-any"?new pA(e,i):new Jt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dA(e,i):new hA(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kl(n,this.value)):n!==null&&Vi(this.value)===Vi(n)&&this.matchesComparison(kl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rs extends C_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Rs(e,n)}matches(e){return R_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function R_(r){return r.op==="and"}function I_(r){return cA(r)&&R_(r)}function cA(r){for(const e of r.filters)if(e instanceof Rs)return!1;return!0}function Fm(r){if(r instanceof Jt)return r.field.canonicalString()+r.op.toString()+Dl(r.value);if(I_(r))return r.filters.map((e=>Fm(e))).join(",");{const e=r.filters.map((n=>Fm(n))).join(",");return`${r.op}(${e})`}}function k_(r,e){return r instanceof Jt?(function(i,l){return l instanceof Jt&&i.op===l.op&&i.field.isEqual(l.field)&&lr(i.value,l.value)})(r,e):r instanceof Rs?(function(i,l){return l instanceof Rs&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,f,y)=>u&&k_(f,l.filters[y])),!0):!1})(r,e):void Pe(19439)}function D_(r){return r instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Dl(n.value)}`})(r):r instanceof Rs?(function(n){return n.op.toString()+" {"+n.getFilters().map(D_).join(" ,")+"}"})(r):"Filter"}class uA extends Jt{constructor(e,n,i){super(e,n,i),this.key=Me.fromName(i.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class dA extends Jt{constructor(e,n){super(e,"in",n),this.keys=M_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class hA extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=M_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function M_(r,e){return(e.arrayValue?.values||[]).map((n=>Me.fromName(n.referenceValue)))}class fA extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eg(n)&&dc(n.arrayValue,this.value)}}class mA extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dc(this.value.arrayValue,n)}}class gA extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!dc(this.value.arrayValue,n)}}class pA extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>dc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n=null,i=[],l=[],u=null,f=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=f,this.endAt=y,this.Te=null}}function Sv(r,e=null,n=[],i=[],l=null,u=null,f=null){return new yA(r,e,n,i,l,u,f)}function Tg(r){const e=qe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Fm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Dl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Dl(i))).join(",")),e.Te=n}return e.Te}function Sg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!oA(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!k_(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Tv(r.startAt,e.startAt)&&Tv(r.endAt,e.endAt)}function Gm(r){return Me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n=null,i=[],l=[],u=null,f="F",y=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=f,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xA(r,e,n,i,l,u,f,y){return new Hl(r,e,n,i,l,u,f,y)}function Ng(r){return new Hl(r)}function Nv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function O_(r){return r.collectionGroup!==null}function nc(r){const e=qe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new nn(pn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(y=y.add(x.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new hc(u,i))})),n.has(pn.keyField().canonicalString())||e.Ie.push(new hc(pn.keyField(),i))}return e.Ie}function nr(r){const e=qe(r);return e.Ee||(e.Ee=vA(e,nc(r))),e.Ee}function vA(r,e){if(r.limitType==="F")return Sv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new hc(l.field,u)}));const n=r.endAt?new Id(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Id(r.startAt.position,r.startAt.inclusive):null;return Sv(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function Ym(r,e){const n=r.filters.concat([e]);return new Hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Km(r,e,n){return new Hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Kd(r,e){return Sg(nr(r),nr(e))&&r.limitType===e.limitType}function V_(r){return`${Tg(nr(r))}|lt:${r.limitType}`}function _l(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>D_(l))).join(", ")}]`),Gd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Dl(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Dl(l))).join(",")),`Target(${i})`})(nr(r))}; limitType=${r.limitType})`}function $d(r,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Me.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(r,e)&&(function(i,l){for(const u of nc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(r,e)&&(function(i,l){return!(i.startAt&&!(function(f,y,p){const x=Ev(f,y,p);return f.inclusive?x<=0:x<0})(i.startAt,nc(i),l)||i.endAt&&!(function(f,y,p){const x=Ev(f,y,p);return f.inclusive?x>=0:x>0})(i.endAt,nc(i),l))})(r,e)}function bA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function L_(r){return(e,n)=>{let i=!1;for(const l of nc(r)){const u=_A(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function _A(r,e,n){const i=r.field.isKeyField()?Me.comparator(e.key,n.key):(function(u,f,y){const p=f.data.field(u),x=y.data.field(u);return p!==null&&x!==null?kl(p,x):Pe(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Pe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return b_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Ot(Me.comparator);function Mr(){return wA}const P_=new Ot(Me.comparator);function Xo(...r){let e=P_;for(const n of r)e=e.insert(n.key,n);return e}function U_(r){let e=P_;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function _a(){return sc()}function z_(){return sc()}function sc(){return new Ia((r=>r.toString()),((r,e)=>r.isEqual(e)))}const EA=new Ot(Me.comparator),TA=new nn(Me.comparator);function nt(...r){let e=TA;for(const n of r)e=e.add(n);return e}const SA=new nn(tt);function NA(){return SA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function B_(r){return{integerValue:""+r}}function AA(r,e){return eA(e)?B_(e):Ag(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function jA(r,e,n){return r instanceof kd?(function(l,u){const f={fields:{[E_]:{stringValue:w_},[S_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&wg(u)&&(u=Yd(u)),u&&(f.fields[T_]=u),{mapValue:f}})(n,e):r instanceof fc?H_(r,e):r instanceof mc?F_(r,e):(function(l,u){const f=q_(l,u),y=Av(f)+Av(l.Ae);return Hm(f)&&Hm(l.Ae)?B_(y):Ag(l.serializer,y)})(r,e)}function CA(r,e,n){return r instanceof fc?H_(r,e):r instanceof mc?F_(r,e):n}function q_(r,e){return r instanceof Dd?(function(i){return Hm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class kd extends Qd{}class fc extends Qd{constructor(e){super(),this.elements=e}}function H_(r,e){const n=G_(e);for(const i of r.elements)n.some((l=>lr(l,i)))||n.push(i);return{arrayValue:{values:n}}}class mc extends Qd{constructor(e){super(),this.elements=e}}function F_(r,e){let n=G_(e);for(const i of r.elements)n=n.filter((l=>!lr(l,i)));return{arrayValue:{values:n}}}class Dd extends Qd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Av(r){return Bt(r.integerValue||r.doubleValue)}function G_(r){return Eg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function RA(r,e){return r.field.isEqual(e.field)&&(function(i,l){return i instanceof fc&&l instanceof fc||i instanceof mc&&l instanceof mc?Il(i.elements,l.elements,lr):i instanceof Dd&&l instanceof Dd?lr(i.Ae,l.Ae):i instanceof kd&&l instanceof kd})(r.transform,e.transform)}class IA{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xd{}function Y_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wd(r.key,Cn.none()):new Ec(r.key,r.data,Cn.none());{const n=r.data,i=Un.empty();let l=new nn(pn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?i.delete(u):i.set(u,f),l=l.add(u)}return new Bi(r.key,i,new Wn(l.toArray()),Cn.none())}}function kA(r,e,n){r instanceof Ec?(function(l,u,f){const y=l.value.clone(),p=Cv(l.fieldTransforms,u,f.transformResults);y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,e,n):r instanceof Bi?(function(l,u,f){if(!pd(l.precondition,u))return void u.convertToUnknownDocument(f.version);const y=Cv(l.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(K_(l)),p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function rc(r,e,n,i){return r instanceof Ec?(function(u,f,y,p){if(!pd(u.precondition,f))return y;const x=u.value.clone(),_=Rv(u.fieldTransforms,p,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(r,e,n,i):r instanceof Bi?(function(u,f,y,p){if(!pd(u.precondition,f))return y;const x=Rv(u.fieldTransforms,p,f),_=f.data;return _.setAll(K_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(r,e,n,i):(function(u,f,y){return pd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y})(r,e,n)}function DA(r,e){let n=null;for(const i of r.fieldTransforms){const l=e.data.field(i.field),u=q_(i.transform,l||null);u!=null&&(n===null&&(n=Un.empty()),n.set(i.field,u))}return n||null}function jv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Il(i,l,((u,f)=>RA(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ec extends Xd{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Bi extends Xd{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function K_(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function Cv(r,e,n){const i=new Map;ht(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const u=r[l],f=u.transform,y=e.data.field(u.field);i.set(u.field,CA(f,y,n[l]))}return i}function Rv(r,e,n){const i=new Map;for(const l of r){const u=l.transform,f=n.data.field(l.field);i.set(l.field,jA(u,f,e))}return i}class Wd extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MA extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&kA(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=rc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=rc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=z_();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let y=this.applyToLocalView(f,u.mutatedFields);y=n.has(l.key)?null:y;const p=Y_(f,y);p!==null&&i.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((n,i)=>jv(n,i)))&&Il(this.baseMutations,e.baseMutations,((n,i)=>jv(n,i)))}}class jg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){ht(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return EA})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,i[f].version);return new jg(e,n,i,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,it;function PA(r){switch(r){case ce.OK:return Pe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Pe(15467,{code:r})}}function $_(r){if(r===void 0)return Dr("GRPC error has no .code"),ce.UNKNOWN;switch(r){case Zt.OK:return ce.OK;case Zt.CANCELLED:return ce.CANCELLED;case Zt.UNKNOWN:return ce.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ce.INTERNAL;case Zt.UNAVAILABLE:return ce.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ce.NOT_FOUND;case Zt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Zt.ABORTED:return ce.ABORTED;case Zt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Zt.DATA_LOSS:return ce.DATA_LOSS;default:return Pe(39323,{code:r})}}(it=Zt||(Zt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Ci([4294967295,4294967295],0);function Iv(r){const e=UA().encode(r),n=new c_;return n.update(e),new Uint8Array(n.digest())}function kv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ci([n,i],0),new Ci([l,u],0)]}class Cg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(i<0)throw new Wo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ci.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ci.fromNumber(i)));return l.compare(zA)===1&&(l=new Ci([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Iv(e),[i,l]=kv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(i,l,u);if(!this.we(f))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Cg(u,l,n);return i.forEach((y=>f.insert(y))),f}insert(e){if(this.ge===0)return;const n=Iv(e),[i,l]=kv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(i,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Zd(Ue.min(),l,new Ot(tt),Mr(),nt())}}class Tc{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Tc(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i,l){this.be=e,this.removedTargetIds=n,this.key=i,this.De=l}}class Q_{constructor(e,n){this.targetId=e,this.Ce=n}}class X_{constructor(e,n,i=yn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Dv{constructor(){this.ve=0,this.Fe=Mv(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),n=nt(),i=nt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Pe(38017,{changeType:u})}})),new Tc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.Je=id(),this.He=id(),this.Ye=new Ot(tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Gm(u))if(i===0){const f=new Me(u.path);this.et(n,f,Tn.newNoDocument(f,Ue.min()))}else ht(i===1,20013,{expectedCount:i});else{const f=this._t(n);if(f!==i){const y=this.ut(e),p=y?this.ct(y,e,f):1;if(p!==0){this.it(n);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let f,y;try{f=Oi(i).toUint8Array()}catch(p){if(p instanceof __)return Rl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new Cg(f,l,u)}catch(p){return Rl(p instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const y=this.ot(f);if(y){if(u.current&&Gm(y.target)){const p=new Me(y.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Tn.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let i=nt();this.He.forEach(((u,f)=>{let y=!0;f.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(i=i.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new Zd(e,n,this.Ye,this.je,i);return this.je=Mr(),this.Je=id(),this.He=id(),this.Ye=new Ot(tt),l}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function id(){return new Ot(Me.comparator)}function Mv(){return new Ot(Me.comparator)}const qA={asc:"ASCENDING",desc:"DESCENDING"},HA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FA={and:"AND",or:"OR"};class GA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $m(r,e){return r.useProto3Json||Gd(e)?e:{value:e}}function Md(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function YA(r,e){return Md(r,e.toTimestamp())}function sr(r){return ht(!!r,49232),Ue.fromTimestamp((function(n){const i=Mi(n);return new jt(i.seconds,i.nanos)})(r))}function Rg(r,e){return Qm(r,e).canonicalString()}function Qm(r,e){const n=(function(l){return new Tt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Z_(r){const e=Tt.fromString(r);return ht(s1(e),10190,{key:e.toString()}),e}function Xm(r,e){return Rg(r.databaseId,e.path)}function bm(r,e){const n=Z_(e);if(n.get(1)!==r.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Me(e1(n))}function J_(r,e){return Rg(r.databaseId,e)}function KA(r){const e=Z_(r);return e.length===4?Tt.emptyPath():e1(e)}function Wm(r){return new Tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function e1(r){return ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ov(r,e,n){return{name:Xm(r,e),fields:n.value.mapValue.fields}}function $A(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Pe(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(ht(_===void 0||typeof _=="string",58123),yn.fromBase64String(_||"")):(ht(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),yn.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&(function(x){const _=x.code===void 0?ce.UNKNOWN:$_(x.code);return new we(_,x.message||"")})(f);n=new X_(i,l,u,y||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=bm(r,i.document.name),u=sr(i.document.updateTime),f=i.document.createTime?sr(i.document.createTime):Ue.min(),y=new Un({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(l,u,f,y),x=i.targetIds||[],_=i.removedTargetIds||[];n=new yd(x,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=bm(r,i.document),u=i.readTime?sr(i.readTime):Ue.min(),f=Tn.newNoDocument(l,u),y=i.removedTargetIds||[];n=new yd([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=bm(r,i.document),u=i.removedTargetIds||[];n=new yd([],u,l,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,f=new LA(l,u),y=i.targetId;n=new Q_(y,f)}}return n}function QA(r,e){let n;if(e instanceof Ec)n={update:Ov(r,e.key,e.value)};else if(e instanceof Wd)n={delete:Xm(r,e.key)};else if(e instanceof Bi)n={update:Ov(r,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof MA))return Pe(16599,{Vt:e.type});n={verify:Xm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,f){const y=f.transform;if(y instanceof kd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof fc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof mc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Dd)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Pe(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:YA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Pe(27497)})(r,e.precondition)),n}function XA(r,e){return r&&r.length>0?(ht(e!==void 0,14353),r.map((n=>(function(l,u){let f=l.updateTime?sr(l.updateTime):sr(u);return f.isEqual(Ue.min())&&(f=sr(u)),new IA(f,l.transformResults||[])})(n,e)))):[]}function WA(r,e){return{documents:[J_(r,e.path)]}}function ZA(r,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=J_(r,l);const u=(function(x){if(x.length!==0)return n1(Rs.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(A){return{field:wl(A.field),direction:tj(A.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const y=$m(r,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function JA(r){let e=KA(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){ht(i===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(E){const A=t1(E);return A instanceof Rs&&I_(A)?A.getFilters():[A]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((A=>(function(G){return new hc(El(G.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(A)))})(n.orderBy));let y=null;n.limit&&(y=(function(E){let A;return A=typeof E=="object"?E.value:E,Gd(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(E){const A=!!E.before,z=E.values||[];return new Id(z,A)})(n.startAt));let x=null;return n.endAt&&(x=(function(E){const A=!E.before,z=E.values||[];return new Id(z,A)})(n.endAt)),xA(e,l,f,u,y,"F",p,x)}function ej(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function t1(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=El(n.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=El(n.unaryFilter.field);return Jt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(n.unaryFilter.field);return Jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=El(n.unaryFilter.field);return Jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Jt.create(El(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Rs.create(n.compositeFilter.filters.map((i=>t1(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(n.compositeFilter.op))})(r):Pe(30097,{filter:r})}function tj(r){return qA[r]}function nj(r){return HA[r]}function sj(r){return FA[r]}function wl(r){return{fieldPath:r.canonicalString()}}function El(r){return pn.fromServerFormat(r.fieldPath)}function n1(r){return r instanceof Jt?(function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(_v(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(_v(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:nj(n.op),value:n.value}}})(r):r instanceof Rs?(function(n){const i=n.getFilters().map((l=>n1(l)));return i.length===1?i[0]:{compositeFilter:{op:sj(n.op),filters:i}}})(r):Pe(54877,{filter:r})}function rj(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function s1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,i,l,u=Ue.min(),f=Ue.min(),y=yn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.yt=e}}function aj(r){const e=JA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.Cn=new oj}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Di.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new nn(Tt.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new nn(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r1=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(r1,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ml(0)}static cr(){return new Ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LruGarbageCollector",cj=1048576;function Pv([r,e],[n,i]){const l=tt(r,n);return l===0?tt(e,i):l}class uj{constructor(e){this.Ir=e,this.buffer=new nn(Pv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Pv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dj{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(Lv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ql(n)?Ee(Lv,"Ignoring IndexedDB error during garbage collection: ",n):await Bl(n)}await this.Vr(3e5)}))}}class hj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Fd.ce);const i=new uj(n);return this.mr.forEachTarget(e,(l=>i.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>i.Ar(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Vv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,l,u,f,y,p,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,f=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,y=Date.now(),this.removeTargets(e,i,n)))).next((E=>(u=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(x=Date.now(),bl()<=et.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${l} in `+(y-f)+`ms
	Removed ${u} targets in `+(p-y)+`ms
	Removed ${E} documents in `+(x-p)+`ms
Total Duration: ${x-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function fj(r,e){return new hj(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.changes=new Ia((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&rc(i.mutation,l,Wn.empty(),jt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,nt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=nt()){const l=_a();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let f=Xo();return u.forEach(((y,p)=>{f=f.insert(y,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const i=_a();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,nt())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,y)=>{n.set(f,y)}))}))}computeViews(e,n,i,l){let u=Mr();const f=sc(),y=(function(){return sc()})();return n.forEach(((p,x)=>{const _=i.get(x.key);l.has(x.key)&&(_===void 0||_.mutation instanceof Bi)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),rc(_.mutation,x,_.mutation.getFieldMask(),jt.now())):f.set(x.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((x,_)=>f.set(x,_))),n.forEach(((x,_)=>y.set(x,new gj(_,f.get(x)??null)))),y)))}recalculateAndSaveOverlays(e,n){const i=sc();let l=new Ot(((f,y)=>f-y)),u=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const y of f)y.keys().forEach((p=>{const x=n.get(p);if(x===null)return;let _=i.get(p)||Wn.empty();_=y.applyToLocalView(x,_),i.set(p,_);const E=(l.get(y.batchId)||nt()).add(p);l=l.insert(y.batchId,E)}))})).next((()=>{const f=[],y=l.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),x=p.key,_=p.value,E=z_();_.forEach((A=>{if(!u.has(A)){const z=Y_(n.get(A),i.get(A));z!==null&&E.set(A,z),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,E))}return de.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return(function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):de.resolve(_a());let y=oc,p=u;return f.next((x=>de.forEach(x,((_,E)=>(y<E.largestBatchId&&(y=E.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,p,x,nt()))).next((_=>({batchId:y,changes:U_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((i=>{let l=Xo();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let f=Xo();return this.indexManager.getCollectionParents(e,u).next((y=>de.forEach(y,(p=>{const x=(function(E,A){return new Hl(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,i,l).next((_=>{_.forEach(((E,A)=>{f=f.insert(E,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((f=>{u.forEach(((p,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,Tn.newInvalidDocument(_)))}));let y=Xo();return f.forEach(((p,x)=>{const _=u.get(p);_!==void 0&&rc(_.mutation,x,Wn.empty(),jt.now()),$d(n,x)&&(y=y.insert(p,x))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return de.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:sr(l.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:aj(l.bundledQuery),readTime:sr(l.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.overlays=new Ot(Me.comparator),this.qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_a();return de.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.St(e,n,u)})),de.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.qr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const l=_a(),u=n.length+1,f=new Me(n.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const p=y.getNext().value,x=p.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&p.largestBatchId>i&&l.set(p.getKey(),p)}return de.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Ot(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let _=u.get(x.largestBatchId);_===null&&(_=_a(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const y=_a(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,_)=>y.set(x,_))),!(y.size()>=l)););return de.resolve(y)}St(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(i.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new VA(n,i));let u=this.qr.get(n);u===void 0&&(u=nt(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Qr=new nn(ln.$r),this.Ur=new nn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new ln(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new ln(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Me(new Tt([])),i=new ln(n,e),l=new ln(n,e+1),u=[];return this.Ur.forEachInRange([i,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new Tt([])),i=new ln(n,e),l=new ln(n,e+1);let u=nt();return this.Ur.forEachInRange([i,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new ln(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Me.comparator(e.key,n.key)||tt(e.Yr,n.Yr)}static Kr(e,n){return tt(e.Yr,n.Yr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(ln.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new OA(u,n,i,l);this.mutationQueue.push(f);for(const y of l)this.Zr=this.Zr.add(new ln(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,n){return de.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.ei(i),u=l<0?0:l;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?_g:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ln(n,0),l=new ln(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,l],(f=>{const y=this.Xr(f.Yr);u.push(y)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nn(tt);return n.forEach((l=>{const u=new ln(l,0),f=new ln(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(y=>{i=i.add(y.Yr)}))})),de.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;Me.isDocumentKey(u)||(u=u.child(""));const f=new ln(new Me(u),0);let y=new nn(tt);return this.Zr.forEachWhile((p=>{const x=p.key.path;return!!i.isPrefixOf(x)&&(x.length===l&&(y=y.add(p.Yr)),!0)}),f),de.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((i=>{const l=this.Xr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return de.forEach(n.mutations,(l=>{const u=new ln(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new ln(n,0),l=this.Zr.firstAfterOrEqual(i);return de.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.ri=e,this.docs=(function(){return new Ot(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let i=Mr();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Tn.newInvalidDocument(l))})),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=Mr();const f=n.path,y=new Me(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:x,value:{document:_}}=p.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||XN(QN(_),i)<=0||(l.has(_.key)||$d(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,i,l){Pe(9500)}ii(e,n){return de.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new wj(this)}getSize(e){return de.resolve(this.size)}}class wj extends mj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(i)})),de.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.persistence=e,this.si=new Ia((n=>Tg(n)),Sg),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Ig,this.targetCount=0,this.ai=Ml.ur()}forEachTarget(e,n){return this.si.forEach(((i,l)=>n(l))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),de.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ml(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Pr(n),de.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.si.forEach(((f,y)=>{y.sequenceNumber<=n&&i.get(y.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),de.waitFor(u).next((()=>l))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fd(0),this.li=!1,this.li=!0,this.hi=new vj,this.referenceDelegate=e(this),this.Pi=new Ej(this),this.indexManager=new lj,this.remoteDocumentCache=(function(l){return new _j(l)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new ij(n),this.Ii=new yj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new bj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Ee("MemoryPersistence","Starting transaction:",e);const l=new Tj(this.ci.next());return this.referenceDelegate.Ei(),i(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return de.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class Tj extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class kg{constructor(e){this.persistence=e,this.Ri=new Ig,this.Vi=null}static mi(e){return new kg(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(i=>{const l=Me.fromPath(i);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Od{constructor(e,n){this.persistence=e,this.pi=new Ia((i=>tA(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=fj(this,n)}static mi(e,n){return new Od(e,n)}Ei(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return de.forEach(this.pi,((i,l)=>this.br(e,i,l).next((u=>u?de.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((y=>{y||(i++,u.removeEntry(f,Ue.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=md(e.data.value)),n}br(e,n,i){return de.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return de.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=l}static As(e,n){let i=nt(),l=nt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Dg(e,n.fromCache,i,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return J2()?8:JN(Nn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,i).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Sj;return this.Ss(e,n,f).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,f,y.size)}))})).next((()=>u.result))}bs(e,n,i,l){return i.documentReadCount<this.fs?(bl()<=et.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(bl()<=et.DEBUG&&Ee("QueryEngine","Query:",_l(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.gs*l?(bl()<=et.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):de.resolve())}ys(e,n){if(Nv(n))return de.resolve(null);let i=nr(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Km(n,null,"F"),i=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const f=nt(...u);return this.ps.getDocuments(e,f).next((y=>this.indexManager.getMinOffset(e,i).next((p=>{const x=this.Ds(n,y);return this.Cs(n,x,f,p.readTime)?this.ys(e,Km(n,null,"F")):this.vs(e,x,n,p)}))))})))))}ws(e,n,i,l){return Nv(n)||l.isEqual(Ue.min())?de.resolve(null):this.ps.getDocuments(e,i).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,i,l)?de.resolve(null):(bl()<=et.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),_l(n)),this.vs(e,f,n,$N(l,oc)).next((y=>y)))}))}Ds(e,n){let i=new nn(L_(e));return n.forEach(((l,u)=>{$d(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,i){return bl()<=et.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ps.getDocumentsMatchingQuery(e,n,Di.min(),i)}vs(e,n,i,l){return this.ps.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",Aj=3e8;class jj{constructor(e,n,i,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Ot(tt),this.xs=new Ia((u=>Tg(u)),Sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Cj(r,e,n,i){return new jj(r,e,n,i)}async function a1(r,e){const n=qe(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const f=[],y=[];let p=nt();for(const x of l){f.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}for(const x of u){y.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:y})))}))}))}function Rj(r,e){const n=qe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,p,x,_){const E=x.batch,A=E.keys();let z=de.resolve();return A.forEach((G=>{z=z.next((()=>_.getEntry(p,G))).next((Q=>{const V=x.docVersions.get(G);ht(V!==null,48541),Q.version.compareTo(V)<0&&(E.applyToRemoteDocument(Q,x),Q.isValidDocument()&&(Q.setReadTime(x.commitVersion),_.addEntry(Q)))}))})),z.next((()=>y.mutationQueue.removeMutationBatch(p,E)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(y){let p=nt();for(let x=0;x<y.mutationResults.length;++x)y.mutationResults[x].transformResults.length>0&&(p=p.add(y.batch.mutations[x].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function l1(r){const e=qe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Ij(r,e){const n=qe(r),i=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];e.targetChanges.forEach(((_,E)=>{const A=l.get(E);if(!A)return;y.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,E))));let z=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(yn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(_.resumeToken,i)),l=l.insert(E,z),(function(Q,V,se){return Q.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=Aj?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(A,z,_)&&y.push(n.Pi.updateTargetData(u,z))}));let p=Mr(),x=nt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),y.push(kj(u,f,e.documentUpdates).next((_=>{p=_.ks,x=_.qs}))),!i.isEqual(Ue.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((E=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));y.push(_)}return de.waitFor(y).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,x))).next((()=>p))})).then((u=>(n.Ms=l,u)))}function kj(r,e,n){let i=nt(),l=nt();return n.forEach((u=>i=i.add(u))),e.getEntries(r,i).next((u=>{let f=Mr();return n.forEach(((y,p)=>{const x=u.get(y);p.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(y)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(y,p.readTime),f=f.insert(y,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),f=f.insert(y,p)):Ee(Mg,"Ignoring outdated watch update for ",y,". Current version:",x.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function Dj(r,e){const n=qe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_g),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Mj(r,e){const n=qe(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.Pi.getTargetData(i,e).next((u=>u?(l=u,de.resolve(l)):n.Pi.allocateTargetId(i).next((f=>(l=new Si(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.Ms.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Zm(r,e,n){const i=qe(r),l=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(f=>i.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ql(f))throw f;Ee(Mg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(l.target)}function Uv(r,e,n){const i=qe(r);let l=Ue.min(),u=nt();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,x,_){const E=qe(p),A=E.xs.get(_);return A!==void 0?de.resolve(E.Ms.get(A)):E.Pi.getTargetData(x,_)})(i,f,nr(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,y.targetId).next((p=>{u=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,n?l:Ue.min(),n?u:nt()))).next((y=>(Oj(i,bA(e),y),{documents:y,Qs:u})))))}function Oj(r,e,n){let i=r.Os.get(e)||Ue.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),r.Os.set(e,i)}class zv{constructor(){this.activeTargetIds=NA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vj{constructor(){this.Mo=new zv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="ConnectivityMonitor";class qv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(Bv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(Bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function Jm(){return ad===null?ad=(function(){return 268435456+Math.round(2147483648*Math.random())})():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="RestConnection",Pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${l}`,this.Wo=this.databaseId.database===Cd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Go(e,n,i,l,u){const f=Jm(),y=this.zo(e,n.toUriEncodedString());Ee(_m,`Sending RPC '${e}' ${f}:`,y,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,u);const{host:x}=new URL(y),_=Ll(x);return this.Jo(e,y,p,i,_).then((E=>(Ee(_m,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Rl(_m,`RPC '${e}' ${f} failed with error: `,E,"url: ",y,"request:",i),E}))}Ho(e,n,i,l,u,f){return this.Go(e,n,i,l,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const i=Pj[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class Bj extends Uj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,l,u){const f=Jm();return new Promise(((y,p)=>{const x=new u_;x.setWithCredentials(!0),x.listenOnce(d_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case fd.NO_ERROR:const E=x.getResponseJson();Ee(_n,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),y(E);break;case fd.TIMEOUT:Ee(_n,`RPC '${e}' ${f} timed out`),p(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const A=x.getStatus();if(Ee(_n,`RPC '${e}' ${f} failed with status:`,A,"response text:",x.getResponseText()),A>0){let z=x.getResponseJson();Array.isArray(z)&&(z=z[0]);const G=z?.error;if(G&&G.status&&G.message){const Q=(function(se){const W=se.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(W)>=0?W:ce.UNKNOWN})(G.status);p(new we(Q,G.message))}else p(new we(ce.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ee(_n,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(l);Ee(_n,`RPC '${e}' ${f} sending request:`,l),x.send(n,"POST",_,i,15)}))}T_(e,n,i){const l=Jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=m_(),y=f_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const _=u.join("");Ee(_n,`Creating RPC '${e}' stream ${l}: ${_}`,p);const E=f.createWebChannel(_,p);this.I_(E);let A=!1,z=!1;const G=new zj({Yo:V=>{z?Ee(_n,`Not sending because RPC '${e}' stream ${l} is closed:`,V):(A||(Ee(_n,`Opening RPC '${e}' stream ${l} transport.`),E.open(),A=!0),Ee(_n,`RPC '${e}' stream ${l} sending:`,V),E.send(V))},Zo:()=>E.close()}),Q=(V,se,W)=>{V.listen(se,(me=>{try{W(me)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return Q(E,Qo.EventType.OPEN,(()=>{z||(Ee(_n,`RPC '${e}' stream ${l} transport opened.`),G.o_())})),Q(E,Qo.EventType.CLOSE,(()=>{z||(z=!0,Ee(_n,`RPC '${e}' stream ${l} transport closed`),G.a_(),this.E_(E))})),Q(E,Qo.EventType.ERROR,(V=>{z||(z=!0,Rl(_n,`RPC '${e}' stream ${l} transport errored. Name:`,V.name,"Message:",V.message),G.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),Q(E,Qo.EventType.MESSAGE,(V=>{if(!z){const se=V.data[0];ht(!!se,16349);const W=se,me=W?.error||W[0]?.error;if(me){Ee(_n,`RPC '${e}' stream ${l} received error:`,me);const ge=me.status;let ve=(function(S){const j=Zt[S];if(j!==void 0)return $_(j)})(ge),ye=me.message;ve===void 0&&(ve=ce.INTERNAL,ye="Unknown error status: "+ge+" with message "+me.message),z=!0,G.a_(new we(ve,ye)),E.close()}else Ee(_n,`RPC '${e}' stream ${l} received:`,se),G.u_(se)}})),Q(y,h_.STAT_EVENT,(V=>{V.stat===zm.PROXY?Ee(_n,`RPC '${e}' stream ${l} detected buffering proxy`):V.stat===zm.NOPROXY&&Ee(_n,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(r){return new GA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&Ee("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="PersistentStream";class c1{constructor(e,n,i,l,u,f,y,p){this.Mi=e,this.S_=i,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new we(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(Hv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ee(Hv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qj extends c1{constructor(e,n,i,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$A(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Ue.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ue.min():f.readTime?sr(f.readTime):Ue.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=(function(u,f){let y;const p=f.target;if(y=Gm(p)?{documents:WA(u,p)}:{query:ZA(u,p).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=W_(u,f.resumeToken);const x=$m(u,f.expectedCount);x!==null&&(y.expectedCount=x)}else if(f.snapshotVersion.compareTo(Ue.min())>0){y.readTime=Md(u,f.snapshotVersion.toTimestamp());const x=$m(u,f.expectedCount);x!==null&&(y.expectedCount=x)}return y})(this.serializer,e);const i=ej(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class Hj extends c1{constructor(e,n,i,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XA(e.writeResults,e.commitTime),i=sr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>QA(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{}class Gj extends Fj{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Qm(n,i),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ce.UNKNOWN,u.toString())}))}Ho(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Ho(e,Qm(n,i),l,f,y,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new we(ce.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Yj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dr(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="RemoteStore";class Kj{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{ka(this)&&(Ee(Ra,"Restarting streams for network reachability change."),await(async function(p){const x=qe(p);x.Ea.add(4),await Sc(x),x.Ra.set("Unknown"),x.Ea.delete(4),await eh(x)})(this))}))})),this.Ra=new Yj(i,l)}}async function eh(r){if(ka(r))for(const e of r.da)await e(!0)}async function Sc(r){for(const e of r.da)await e(!1)}function u1(r,e){const n=qe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pg(n)?Lg(n):Fl(n).O_()&&Vg(n,e))}function Og(r,e){const n=qe(r),i=Fl(n);n.Ia.delete(e),i.O_()&&d1(n,e),n.Ia.size===0&&(i.O_()?i.L_():ka(n)&&n.Ra.set("Unknown"))}function Vg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(r).Y_(e)}function d1(r,e){r.Va.Ue(e),Fl(r).Z_(e)}function Lg(r){r.Va=new BA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fl(r).start(),r.Ra.ua()}function Pg(r){return ka(r)&&!Fl(r).x_()&&r.Ia.size>0}function ka(r){return qe(r).Ea.size===0}function h1(r){r.Va=void 0}async function $j(r){r.Ra.set("Online")}async function Qj(r){r.Ia.forEach(((e,n)=>{Vg(r,e)}))}async function Xj(r,e){h1(r),Pg(r)?(r.Ra.ha(e),Lg(r)):r.Ra.set("Unknown")}async function Wj(r,e,n){if(r.Ra.set("Online"),e instanceof X_&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const y of u.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,f),l.Ia.delete(y),l.Va.removeTarget(y))})(r,e)}catch(i){Ee(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(r,i)}else if(e instanceof yd?r.Va.Ze(e):e instanceof Q_?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ue.min()))try{const i=await l1(r.localStore);n.compareTo(i)>=0&&await(function(u,f){const y=u.Va.Tt(f);return y.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(p.resumeToken,f))}})),y.targetMismatches.forEach(((p,x)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(yn.EMPTY_BYTE_STRING,_.snapshotVersion)),d1(u,p);const E=new Si(_.target,p,x,_.sequenceNumber);Vg(u,E)})),u.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(i){Ee(Ra,"Failed to raise snapshot:",i),await Vd(r,i)}}async function Vd(r,e,n){if(!ql(e))throw e;r.Ea.add(1),await Sc(r),r.Ra.set("Offline"),n||(n=()=>l1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ee(Ra,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await eh(r)}))}function f1(r,e){return e().catch((n=>Vd(r,n,e)))}async function th(r){const e=qe(r),n=Li(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_g;for(;Zj(e);)try{const l=await Dj(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,Jj(e,l)}catch(l){await Vd(e,l)}m1(e)&&g1(e)}function Zj(r){return ka(r)&&r.Ta.length<10}function Jj(r,e){r.Ta.push(e);const n=Li(r);n.O_()&&n.X_&&n.ea(e.mutations)}function m1(r){return ka(r)&&!Li(r).x_()&&r.Ta.length>0}function g1(r){Li(r).start()}async function eC(r){Li(r).ra()}async function tC(r){const e=Li(r);for(const n of r.Ta)e.ea(n.mutations)}async function nC(r,e,n){const i=r.Ta.shift(),l=jg.from(i,e,n);await f1(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await th(r)}async function sC(r,e){e&&Li(r).X_&&await(async function(i,l){if((function(f){return PA(f)&&f!==ce.ABORTED})(l.code)){const u=i.Ta.shift();Li(i).B_(),await f1(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await th(i)}})(r,e),m1(r)&&g1(r)}async function Fv(r,e){const n=qe(r);n.asyncQueue.verifyOperationInProgress(),Ee(Ra,"RemoteStore received new credentials");const i=ka(n);n.Ea.add(3),await Sc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await eh(n)}async function rC(r,e){const n=qe(r);e?(n.Ea.delete(2),await eh(n)):e||(n.Ea.add(2),await Sc(n),n.Ra.set("Unknown"))}function Fl(r){return r.ma||(r.ma=(function(n,i,l){const u=qe(n);return u.sa(),new qj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:$j.bind(null,r),t_:Qj.bind(null,r),r_:Xj.bind(null,r),H_:Wj.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Pg(r)?Lg(r):r.Ra.set("Unknown")):(await r.ma.stop(),h1(r))}))),r.ma}function Li(r){return r.fa||(r.fa=(function(n,i,l){const u=qe(n);return u.sa(),new Hj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eC.bind(null,r),r_:sC.bind(null,r),ta:tC.bind(null,r),na:nC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await th(r)):(await r.fa.stop(),r.Ta.length>0&&(Ee(Ra,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const f=Date.now()+i,y=new Ug(e,n,f,l,u);return y.start(i),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zg(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),ql(r))return new we(ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Me.comparator(n.key,i.key):(n,i)=>Me.comparator(n.key,i.key),this.keyedMap=Xo(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.ga=new Ot(Me.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ol{constructor(e,n,i,l,u,f,y,p,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,l,u){const f=[];return n.forEach((y=>{f.push({type:0,doc:y})})),new Ol(e,n,jl.emptySet(n),f,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aC{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=qe(n),u=l.queries;l.queries=Yv(),u.forEach(((f,y)=>{for(const p of y.Sa)p.onError(i)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function Yv(){return new Ia((r=>V_(r)),Kd)}async function p1(r,e){const n=qe(r);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(i=2):(u=new iC,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const y=zg(f,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(y)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Bg(n)}async function y1(r,e){const n=qe(r),i=e.query;let l=3;const u=n.queries.get(i);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lC(r,e){const n=qe(r);let i=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const y of f.Sa)y.Fa(l)&&(i=!0);f.wa=l}}i&&Bg(n)}function oC(r,e,n){const i=qe(r),l=i.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);i.queries.delete(e)}function Bg(r){r.Ca.forEach((e=>{e.next()}))}var eg,Kv;(Kv=eg||(eg={})).Ma="default",Kv.Cache="cache";class x1{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Ol(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.key=e}}class b1{constructor(e){this.key=e}}class cC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=L_(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Gv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,y=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((_,E)=>{const A=l.get(_),z=$d(this.query,E)?E:null,G=!!A&&this.mutatedKeys.has(A.key),Q=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let V=!1;A&&z?A.data.isEqual(z.data)?G!==Q&&(i.track({type:3,doc:z}),V=!0):this.su(A,z)||(i.track({type:2,doc:z}),V=!0,(p&&this.eu(z,p)>0||x&&this.eu(z,x)<0)&&(y=!0)):!A&&z?(i.track({type:0,doc:z}),V=!0):A&&!z&&(i.track({type:1,doc:A}),V=!0,(p||x)&&(y=!0)),V&&(z?(f=f.add(z),u=Q?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(z,G){const Q=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:V})}};return Q(z)-Q(G)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),l=l??!1;const y=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,x=p!==this.Za;return this.Za=p,f.length!==0||x?{snapshot:new Ol(this.query,e.tu,u,f,e.mutatedKeys,p===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new b1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new v1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=nt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qg="SyncEngine";class uC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dC{constructor(e){this.key=e,this.hu=!1}}class hC{constructor(e,n,i,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ia((y=>V_(y)),Kd),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Me.comparator),this.Au=new Map,this.Ru=new Ig,this.Vu={},this.mu=new Map,this.fu=Ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fC(r,e,n=!0){const i=N1(r);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await _1(i,e,n,!0),l}async function mC(r,e){const n=N1(r);await _1(n,e,!0,!1)}async function _1(r,e,n,i){const l=await Mj(r.localStore,nr(e)),u=l.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let y;return i&&(y=await gC(r,e,u,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&u1(r.remoteStore,l),y}async function gC(r,e,n,i,l){r.pu=(E,A,z)=>(async function(Q,V,se,W){let me=V.view.ru(se);me.Cs&&(me=await Uv(Q.localStore,V.query,!1).then((({documents:I})=>V.view.ru(I,me))));const ge=W&&W.targetChanges.get(V.targetId),ve=W&&W.targetMismatches.get(V.targetId)!=null,ye=V.view.applyChanges(me,Q.isPrimaryClient,ge,ve);return Qv(Q,V.targetId,ye.au),ye.snapshot})(r,E,A,z);const u=await Uv(r.localStore,e,!0),f=new cC(e,u.Qs),y=f.ru(u.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",l),x=f.applyChanges(y,r.isPrimaryClient,p);Qv(r,n,x.au);const _=new uC(e,n,f);return r.Tu.set(e,_),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),x.snapshot}async function pC(r,e,n){const i=qe(r),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((f=>!Kd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Zm(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Og(i.remoteStore,l.targetId),tg(i,l.targetId)})).catch(Bl)):(tg(i,l.targetId),await Zm(i.localStore,l.targetId,!0))}async function yC(r,e){const n=qe(r),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Og(n.remoteStore,i.targetId))}async function xC(r,e,n){const i=SC(r);try{const l=await(function(f,y){const p=qe(f),x=jt.now(),_=y.reduce(((z,G)=>z.add(G.key)),nt());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let G=Mr(),Q=nt();return p.Ns.getEntries(z,_).next((V=>{G=V,G.forEach(((se,W)=>{W.isValidDocument()||(Q=Q.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(z,G))).next((V=>{E=V;const se=[];for(const W of y){const me=DA(W,E.get(W.key).overlayedDocument);me!=null&&se.push(new Bi(W.key,me,j_(me.value.mapValue),Cn.exists(!0)))}return p.mutationQueue.addMutationBatch(z,x,se,y)})).next((V=>{A=V;const se=V.applyToLocalDocumentSet(E,Q);return p.documentOverlayCache.saveOverlays(z,V.batchId,se)}))})).then((()=>({batchId:A.batchId,changes:U_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(f,y,p){let x=f.Vu[f.currentUser.toKey()];x||(x=new Ot(tt)),x=x.insert(y,p),f.Vu[f.currentUser.toKey()]=x})(i,l.batchId,n),await Nc(i,l.changes),await th(i.remoteStore)}catch(l){const u=zg(l,"Failed to persist write");n.reject(u)}}async function w1(r,e){const n=qe(r);try{const i=await Ij(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ht(f.hu,14607):l.removedDocuments.size>0&&(ht(f.hu,42227),f.hu=!1))})),await Nc(n,i,e)}catch(i){await Bl(i)}}function $v(r,e,n){const i=qe(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,f)=>{const y=f.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(f,y){const p=qe(f);p.onlineState=y;let x=!1;p.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(y)&&(x=!0)})),x&&Bg(p)})(i.eventManager,e),l.length&&i.Pu.H_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vC(r,e,n){const i=qe(r);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let f=new Ot(Me.comparator);f=f.insert(u,Tn.newNoDocument(u,Ue.min()));const y=nt().add(u),p=new Zd(Ue.min(),new Map,new Ot(tt),f,y);await w1(i,p),i.du=i.du.remove(u),i.Au.delete(e),Hg(i)}else await Zm(i.localStore,e,!1).then((()=>tg(i,e,n))).catch(Bl)}async function bC(r,e){const n=qe(r),i=e.batch.batchId;try{const l=await Rj(n.localStore,e);T1(n,i,null),E1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nc(n,l)}catch(l){await Bl(l)}}async function _C(r,e,n){const i=qe(r);try{const l=await(function(f,y){const p=qe(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return p.mutationQueue.lookupMutationBatch(x,y).next((E=>(ht(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(x,E)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,_,y))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>p.localDocuments.getDocuments(x,_)))}))})(i.localStore,e);T1(i,e,n),E1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nc(i,l)}catch(l){await Bl(l)}}function E1(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function T1(r,e,n){const i=qe(r);let l=i.Vu[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.Vu[i.currentUser.toKey()]=l}}function tg(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||S1(r,i)}))}function S1(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Og(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Hg(r))}function Qv(r,e,n){for(const i of n)i instanceof v1?(r.Ru.addReference(i.key,e),wC(r,i)):i instanceof b1?(Ee(qg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||S1(r,i.key)):Pe(19791,{wu:i})}function wC(r,e){const n=e.key,i=n.path.canonicalString();r.du.get(n)||r.Eu.has(i)||(Ee(qg,"New document in limbo: "+n),r.Eu.add(i),Hg(r))}function Hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Me(Tt.fromString(e)),i=r.fu.next();r.Au.set(i,new dC(n)),r.du=r.du.insert(n,i),u1(r.remoteStore,new Si(nr(Ng(n.path)),i,"TargetPurposeLimboResolution",Fd.ce))}}async function Nc(r,e,n){const i=qe(r),l=[],u=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((y,p)=>{f.push(i.pu(p,e,n).then((x=>{if((x||n)&&i.isPrimaryClient){const _=x?!x.fromCache:n?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(x){l.push(x);const _=Dg.As(p.targetId,x);u.push(_)}})))})),await Promise.all(f),i.Pu.H_(l),await(async function(p,x){const _=qe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(x,(A=>de.forEach(A.Es,(z=>_.persistence.referenceDelegate.addReference(E,A.targetId,z))).next((()=>de.forEach(A.ds,(z=>_.persistence.referenceDelegate.removeReference(E,A.targetId,z)))))))))}catch(E){if(!ql(E))throw E;Ee(Mg,"Failed to update sequence numbers: "+E)}for(const E of x){const A=E.targetId;if(!E.fromCache){const z=_.Ms.get(A),G=z.snapshotVersion,Q=z.withLastLimboFreeSnapshotVersion(G);_.Ms=_.Ms.insert(A,Q)}}})(i.localStore,u))}async function EC(r,e){const n=qe(r);if(!n.currentUser.isEqual(e)){Ee(qg,"User change. New user:",e.toKey());const i=await a1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((y=>{y.forEach((p=>{p.reject(new we(ce.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nc(n,i.Ls)}}function TC(r,e){const n=qe(r),i=n.Au.get(e);if(i&&i.hu)return nt().add(i.key);{let l=nt();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const y=n.Tu.get(f);l=l.unionWith(y.view.nu)}return l}}function N1(r){const e=qe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=w1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vC.bind(null,e),e.Pu.H_=lC.bind(null,e.eventManager),e.Pu.yu=oC.bind(null,e.eventManager),e}function SC(r){const e=qe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_C.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Cj(this.persistence,new Nj,e.initialUser,this.serializer)}Cu(e){return new i1(kg.mi,this.serializer)}Du(e){return new Vj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class NC extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dj(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new i1((i=>Od.mi(i,n)),this.serializer)}}class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$v(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EC.bind(null,this.syncEngine),await rC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aC})()}createDatastore(e){const n=Jd(e.databaseInfo.databaseId),i=(function(u){return new Bj(u)})(e.databaseInfo);return(function(u,f,y,p){return new Gj(u,f,y,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,f,y){return new Kj(i,l,u,f,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>$v(this.syncEngine,n,0)),(function(){return qv.v()?new qv:new Lj})())}createSyncEngine(e,n){return(function(l,u,f,y,p,x,_){const E=new hC(l,u,f,y,p,x);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=qe(n);Ee(Ra,"RemoteStore shutting down."),i.Ea.add(5),await Sc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="FirestoreClient";class AC{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=l,this.user=wn.UNAUTHENTICATED,this.clientId=bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async f=>{Ee(Pi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Ee(Pi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=zg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Em(r,e){r.asyncQueue.verifyOperationInProgress(),Ee(Pi,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async l=>{i.isEqual(l)||(await a1(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Xv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await jC(r);Ee(Pi,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>Fv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,l)=>Fv(e.remoteStore,l))),r._onlineComponents=e}async function jC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ee(Pi,"Using user provided OfflineComponentProvider");try{await Em(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await Em(r,new Ld)}}else Ee(Pi,"Using default OfflineComponentProvider"),await Em(r,new NC(void 0));return r._offlineComponents}async function j1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ee(Pi,"Using user provided OnlineComponentProvider"),await Xv(r,r._uninitializedComponentsProvider._online)):(Ee(Pi,"Using default OnlineComponentProvider"),await Xv(r,new ng))),r._onlineComponents}function CC(r){return j1(r).then((e=>e.syncEngine))}async function sg(r){const e=await j1(r),n=e.eventManager;return n.onListen=fC.bind(null,e.syncEngine),n.onUnlisten=pC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yC.bind(null,e.syncEngine),n}function RC(r,e,n={}){const i=new Ri;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,y,p,x){const _=new A1({next:A=>{_.Nu(),f.enqueueAndForget((()=>y1(u,E))),A.fromCache&&p.source==="server"?x.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),E=new x1(y,_,{includeMetadataChanges:!0,qa:!0});return p1(u,E)})(await sg(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="firestore.googleapis.com",Zv=!0;class Jv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R1,this.ssl=Zv}else this.host=e.host,this.ssl=e.ssl??Zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cj)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nh{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LN;switch(i.type){case"firstParty":return new BN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Wv.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),Wv.delete(n),i.terminate())})(this),Promise.resolve()}}function IC(r,e,n,i={}){r=Zn(r,nh);const l=Ll(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${n}`;l&&(_b(`https://${y}`),wb("Firestore",!0)),u.host!==R1&&u.host!==y&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:y,ssl:l,emulatorOptions:i};if(!Sa(p,f)&&(r._setSettings(p),i.mockUserToken)){let x,_;if(typeof i.mockUserToken=="string")x=i.mockUserToken,_=wn.MOCK_USER;else{x=F2(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wn(E)}r._authCredentials=new PN(new p_(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class qt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(wc(n,qt._jsonSchema))return new qt(e,i||null,new Me(Tt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:en("string",qt._jsonSchemaVersion),referencePath:en("string")};class Ii extends qi{constructor(e,n,i){super(e,n,Ng(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Me(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function wt(r,e,...n){if(r=Ht(r),y_("collection","path",e),r instanceof nh){const i=Tt.fromString(e,...n);return hv(i),new Ii(r,null,i)}{if(!(r instanceof qt||r instanceof Ii))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Tt.fromString(e,...n));return hv(i),new Ii(r.firestore,null,i)}}function Mt(r,e,...n){if(r=Ht(r),arguments.length===1&&(e=bg.newId()),y_("doc","path",e),r instanceof nh){const i=Tt.fromString(e,...n);return dv(i),new qt(r,null,new Me(i))}{if(!(r instanceof qt||r instanceof Ii))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Tt.fromString(e,...n));return dv(i),new qt(r.firestore,r instanceof Ii?r.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="AsyncQueue";class tb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o1(this,"async_queue_retry"),this._c=()=>{const i=wm();i&&Ee(eb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;Ee(eb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Dr("INTERNAL UNHANDLED ERROR: ",nb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ug.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Pe(47125,{Pc:nb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function nb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(r){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Or extends nh{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new tb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tb(e),this._firestoreClient=void 0,await e}}}function kC(r,e){const n=typeof r=="object"?r:Nb(),i=typeof r=="string"?r:Cd,l=ug(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=q2("firestore");u&&IC(l,...u)}return l}function sh(r){if(r._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||DC(r),r._firestoreClient}function DC(r){const e=r._freezeSettings(),n=(function(l,u,f,y){return new rA(l,u,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,C1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new AC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(yn.fromBase64String(e))}catch(n){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ms(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,ms._jsonSchema))return ms.fromBase64String(e.bytes)}}ms._jsonSchemaVersion="firestore/bytes/1.0",ms._jsonSchema={type:en("string",ms._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(wc(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:en("string",rr._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ir(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ir._jsonSchemaVersion="firestore/vectorValue/1.0",ir._jsonSchema={type:en("string",ir._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^__.*__$/;class OC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ec(e,this.data,n,this.fieldTransforms)}}class I1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function k1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:r})}}class Gg{constructor(e,n,i,l,u,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(k1(this.Ac)&&MC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VC{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Jd(e)}Cc(e,n,i,l=!1){return new Gg({Ac:e,methodName:n,Dc:i,path:pn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jc(r){const e=r._freezeSettings(),n=Jd(r._databaseId);return new VC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Yg(r,e,n,i,l,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,l);Kg("Data must be an object, but it was:",f,i);const y=O1(i,f);let p,x;if(u.merge)p=new Wn(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const E of u.mergeFields){const A=rg(e,E,n);if(!f.contains(A))throw new we(ce.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);L1(_,A)||_.push(A)}p=new Wn(_),x=f.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,x=f.fieldTransforms;return new OC(new Un(y),p,x)}class rh extends Fg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}function D1(r,e,n,i){const l=r.Cc(1,e,n);Kg("Data must be an object, but it was:",l,i);const u=[],f=Un.empty();zi(i,((p,x)=>{const _=$g(e,p,n);x=Ht(x);const E=l.yc(_);if(x instanceof rh)u.push(_);else{const A=Cc(x,E);A!=null&&(u.push(_),f.set(_,A))}}));const y=new Wn(u);return new I1(f,y,l.fieldTransforms)}function M1(r,e,n,i,l,u){const f=r.Cc(1,e,n),y=[rg(e,i,n)],p=[l];if(u.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)y.push(rg(e,u[A])),p.push(u[A+1]);const x=[],_=Un.empty();for(let A=y.length-1;A>=0;--A)if(!L1(x,y[A])){const z=y[A];let G=p[A];G=Ht(G);const Q=f.yc(z);if(G instanceof rh)x.push(z);else{const V=Cc(G,Q);V!=null&&(x.push(z),_.set(z,V))}}const E=new Wn(x);return new I1(_,E,f.fieldTransforms)}function LC(r,e,n,i=!1){return Cc(n,r.Cc(i?4:3,e))}function Cc(r,e){if(V1(r=Ht(r)))return Kg("Unsupported field value:",e,r),O1(r,e);if(r instanceof Fg)return(function(i,l){if(!k1(l.Ac))throw l.Sc(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,l){const u=[];let f=0;for(const y of i){let p=Cc(y,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(r,e)}return(function(i,l){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AA(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=jt.fromDate(i);return{timestampValue:Md(l.serializer,u)}}if(i instanceof jt){const u=new jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Md(l.serializer,u)}}if(i instanceof rr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ms)return{bytesValue:W_(l.serializer,i._byteString)};if(i instanceof qt){const u=l.databaseId,f=i.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ir)return(function(f,y){return{mapValue:{fields:{[N_]:{stringValue:A_},[Rd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw y.Sc("VectorValues must only contain numeric values.");return Ag(y.serializer,x)}))}}}}}})(i,l);throw l.Sc(`Unsupported field value: ${Hd(i)}`)})(r,e)}function O1(r,e){const n={};return b_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(r,((i,l)=>{const u=Cc(l,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function V1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof jt||r instanceof rr||r instanceof ms||r instanceof qt||r instanceof Fg||r instanceof ir)}function Kg(r,e,n){if(!V1(n)||!x_(n)){const i=Hd(n);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function rg(r,e,n){if((e=Ht(e))instanceof Ac)return e._internalPath;if(typeof e=="string")return $g(r,e);throw Pd("Field path arguments must be of type string or ",r,!1,void 0,n)}const PC=new RegExp("[~\\*/\\[\\]]");function $g(r,e,n){if(e.search(PC)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ac(...e.split("."))._internalPath}catch{throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Pd(r,e,n,i,l){const u=i&&!i.isEmpty(),f=l!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${i}`),f&&(p+=` in document ${l}`),p+=")"),new we(ce.INVALID_ARGUMENT,y+r+p)}function L1(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ih("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UC extends P1{data(){return super.data()}}function ih(r,e){return typeof e=="string"?$g(r,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qg{}class z1 extends Qg{}function zn(r,e,...n){let i=[];e instanceof Qg&&i.push(e),i=i.concat(n),(function(u){const f=u.filter((p=>p instanceof Xg)).length,y=u.filter((p=>p instanceof ah)).length;if(f>1||f>0&&y>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)r=l._apply(r);return r}class ah extends z1{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ah(e,n,i)}_apply(e){const n=this._parse(e);return B1(e._query,n),new qi(e.firestore,e.converter,Ym(e._query,n))}_parse(e){const n=jc(e.firestore);return(function(u,f,y,p,x,_,E){let A;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ib(E,_);const G=[];for(const Q of E)G.push(rb(p,u,Q));A={arrayValue:{values:G}}}else A=rb(p,u,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ib(E,_),A=LC(y,f,E,_==="in"||_==="not-in");return Jt.create(x,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zC(r,e,n){const i=e,l=ih("where",r);return ah._create(l,i,n)}class Xg extends Qg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Rs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const y=u.getFlattenedFilters();for(const p of y)B1(f,p),f=Ym(f,p)})(e._query,n),new qi(e.firestore,e.converter,Ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wg extends z1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wg(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hc(u,f)})(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Hl(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function es(r,e="asc"){const n=e,i=ih("orderBy",r);return Wg._create(i,n)}function rb(r,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O_(e)&&n.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Tt.fromString(n));if(!Me.isDocumentKey(i))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bv(r,new Me(i))}if(n instanceof qt)return bv(r,n._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function ib(r,e){if(!Array.isArray(r)||r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B1(r,e){const n=(function(l,u){for(const f of l)for(const y of f.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BC{convertValue(e,n="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return zi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Rd].arrayValue?.values?.map((i=>Bt(i.doubleValue)));return new ir(n)}convertGeoPoint(e){return new rr(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Yd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Tt.fromString(e);ht(s1(i),9688,{name:e});const l=new uc(i.get(1),i.get(3)),u=new Me(i.popFirst(5));return l.isEqual(n)||Dr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r,e,n){let i;return i=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,i}class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends P1{constructor(e,n,i,l,u,f){super(e,n,i,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ih("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:en("string",wa._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class xd extends wa{data(e={}){return super.data(e)}}class Ea{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Zo(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new xd(this._firestore,this._userDataWriter,i.key,i,new Zo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((y=>{const p=new xd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Zo(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const p=new xd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Zo(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,_=-1;return y.type!==0&&(x=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),_=f.indexOf(y.doc.key)),{type:qC(y.type),doc:p,oldIndex:x,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:r})}}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:en("string",Ea._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class Jg extends BC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function HC(r){r=Zn(r,qi);const e=Zn(r.firestore,Or),n=sh(e),i=new Jg(e);return U1(r._query),RC(n,r._query).then((l=>new Ea(e,i,r,l)))}function FC(r,e,n){r=Zn(r,qt);const i=Zn(r.firestore,Or),l=Zg(r.converter,e,n);return Rc(i,[Yg(jc(i),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Cn.none())])}function gs(r,e,n,...i){r=Zn(r,qt);const l=Zn(r.firestore,Or),u=jc(l);let f;return f=typeof(e=Ht(e))=="string"||e instanceof Ac?M1(u,"updateDoc",r._key,e,n,i):D1(u,"updateDoc",r._key,e),Rc(l,[f.toMutation(r._key,Cn.exists(!0))])}function Vr(r){return Rc(Zn(r.firestore,Or),[new Wd(r._key,Cn.none())])}function ar(r,e){const n=Zn(r.firestore,Or),i=Mt(r),l=Zg(r.converter,e);return Rc(n,[Yg(jc(r.firestore),"addDoc",i._key,l,r.converter!==null,{}).toMutation(i._key,Cn.exists(!1))]).then((()=>i))}function Sn(r,...e){r=Ht(r);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||sb(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sb(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let u,f,y;if(r instanceof qt)f=Zn(r.firestore,Or),y=Ng(r._key.path),u={next:p=>{e[i]&&e[i](GC(f,r,p))},error:e[i+1],complete:e[i+2]};else{const p=Zn(r,qi);f=Zn(p.firestore,Or),y=p._query;const x=new Jg(f);u={next:_=>{e[i]&&e[i](new Ea(f,x,p,_))},error:e[i+1],complete:e[i+2]},U1(r._query)}return(function(x,_,E,A){const z=new A1(A),G=new x1(_,z,E);return x.asyncQueue.enqueueAndForget((async()=>p1(await sg(x),G))),()=>{z.Nu(),x.asyncQueue.enqueueAndForget((async()=>y1(await sg(x),G)))}})(sh(f),y,l,u)}function Rc(r,e){return(function(i,l){const u=new Ri;return i.asyncQueue.enqueueAndForget((async()=>xC(await CC(i),l,u))),u.promise})(sh(r),e)}function GC(r,e,n){const i=n.docs.get(e._key),l=new Jg(r);return new wa(r,l,e._key,i,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jc(e)}set(e,n,i){this._verifyNotCommitted();const l=Tm(e,this._firestore),u=Zg(l.converter,n,i),f=Yg(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(f.toMutation(l._key,Cn.none())),this}update(e,n,i,...l){this._verifyNotCommitted();const u=Tm(e,this._firestore);let f;return f=typeof(n=Ht(n))=="string"||n instanceof Ac?M1(this._dataReader,"WriteBatch.update",u._key,n,i,l):D1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Tm(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(n._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tm(r,e){if((r=Ht(r)).firestore!==e)throw new we(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){return sh(r=Zn(r,Or)),new YC(r,(e=>Rc(r,e)))}(function(e,n=!0){(function(l){zl=l})(Pl),Cl(new Na("firestore",((i,{instanceIdentifier:l,options:u})=>{const f=i.getProvider("app").getImmediate(),y=new Or(new UN(i.getProvider("auth-internal")),new qN(f,i.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(x.options.projectId,_)})(f,l),f);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ji(lv,ov,e),ji(lv,ov,"esm2020")})();const $C={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},q1=Sb($C),Jn=DN(q1),Ve=kC(q1),Sm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function QC(){const[r,e]=Z.useState(!0),[n,i]=Z.useState(""),[l,u]=Z.useState(""),[f,y]=Z.useState(""),[p,x]=Z.useState(""),[_,E]=Z.useState(!1),A=async Q=>{Q.preventDefault(),y(""),x(""),E(!0);try{if(r)await xS(Jn,n,l);else{const se=(await yS(Jn,n,l)).user;await FC(Mt(Ve,"users",se.uid),{email:se.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(V){y(G(V.code))}finally{E(!1)}},z=async()=>{if(!n){y("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await pS(Jn,n),x("ifre sfrlama balants e-posta adresinize gnderildi."),y("")}catch(Q){y(G(Q.code))}},G=Q=>{switch(Q){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+Q}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),p&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:p}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Sm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:n,onChange:Q=>i(Q.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Sm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:l,onChange:Q=>u(Q.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:z,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(Sm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const bi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},XC=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,n=600,i=20,l=Math.max(...r.map(y=>y.value))||100,u=r.map((y,p)=>{const x=r.length>1?p/(r.length-1)*(n-i*2)+i:n/2,_=e-i-y.value/l*(e-i*2),E=isNaN(x)?i:x,A=isNaN(_)?e-i:_;return`${E},${A}`}).join(" "),f=`${u} ${n-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:n-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:u,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((y,p)=>{const x=r.length>1?p/(r.length-1)*(n-i*2)+i:n/2,_=e-i-y.value/l*(e-i*2),E=isNaN(x)?i:x,A=isNaN(_)?e-i:_;return c.jsx("circle",{cx:E,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},p)})]})},ld=({title:r,value:e,subtext:n,icon:i,color:l})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(bi.TrendingUp,{})," ",n]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${l}`,children:c.jsx(i,{})})]});function ab({onNavigate:r=()=>{}}){const[e,n]=Z.useState(null),[i,l]=Z.useState(!0),[u,f]=Z.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[y,p]=Z.useState([]),[x,_]=Z.useState([]),[E,A]=Z.useState([]),[z,G]=Z.useState([]);return Z.useEffect(()=>{const Q=Jn.onAuthStateChanged(ge=>{n(ge),l(!1)}),V=Sn(zn(wt(Ve,"siparisler"),es("createdAt","desc")),ge=>{const ve=ge.docs.map(S=>S.data());_(ve.slice(0,5));const ye={};ve.forEach(S=>{const j=S.date?S.date.slice(0,7):"N/A";ye[j]=(ye[j]||0)+1});const I=Object.entries(ye).map(([S,j])=>({label:S,value:j})).sort((S,j)=>S.label.localeCompare(j.label));G(I),f(S=>({...S,activeOrders:ve.length}))}),se=Sn(wt(Ve,"teklifler"),ge=>{f(ve=>({...ve,pendingProposals:ge.size}))}),W=Sn(wt(Ve,"employees"),ge=>{const ve=ge.docs.map(S=>S.data());f(S=>({...S,totalWorkers:ve.length}));const ye=new Date().toISOString().split("T")[0],I=ve.filter(S=>{const j=S.attendance?.[ye];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});p(I)}),me=Sn(wt(Ve,"inventory_movements"),ge=>{const ve=ge.docs.map(S=>S.data()),ye={};ve.forEach(S=>{const j=Number(S.quantity)||0,M=S.action==="add"?j:-j;ye[S.productName]||(ye[S.productName]=0),ye[S.productName]+=M});const I=Object.entries(ye).filter(([S,j])=>j<100).map(([S,j])=>({name:S,qty:j}));A(I.slice(0,5)),f(S=>({...S,inventoryCount:Object.keys(ye).length}))});return()=>{Q(),V(),se(),W(),me()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(bi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(ld,{title:"Aktif Sipariler",value:u.activeOrders,subtext:"Geen aya gre art",icon:bi.Cart,color:"bg-indigo-600"}),c.jsx(ld,{title:"Bekleyen Teklifler",value:u.pendingProposals,subtext:"Onay bekleyen",icon:bi.Document,color:"bg-purple-600"}),c.jsx(ld,{title:"Toplam Stok Kalemi",value:u.inventoryCount,subtext:"Kritik seviye kontrol",icon:bi.Box,color:"bg-emerald-600"}),c.jsx(ld,{title:"Toplam Personel",value:u.totalWorkers,subtext:"Aktif alan",icon:bi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(XC,{data:z})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((Q,V)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",Q.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",Q.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:Q.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},V)),x.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(bi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:y.length>0?y.map((Q,V)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:Q.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:Q.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:Q.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},V)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(bi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:E.length>0?E.map((Q,V)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Q.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[Q.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},V)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ae={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},At=mb.forwardRef(({className:r="",...e},n)=>c.jsx("input",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${r}
    `,...e})),WC=mb.forwardRef(({className:r="",...e},n)=>c.jsx("textarea",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${r}
    `,...e})),Dt=({children:r,variant:e="primary",className:n="",...i})=>{const l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${l[e]}
        ${n}
      `,...i,children:r})},H1=({checked:r,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})})}),Ta=({options:r,selected:e,onChange:n,placeholder:i="Seiniz...",isMulti:l=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[y,p]=Z.useState(!1),[x,_]=Z.useState(""),E=Z.useRef(null);Z.useEffect(()=>{const V=se=>{E.current&&!E.current.contains(se.target)&&p(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const A=V=>{if(l){const se=e.includes(V)?e.filter(W=>W!==V):[...e,V];n(se)}else n(V),p(!1),_("")},z=V=>{_(V.target.value),f&&n(V.target.value)},G=l?e.length>0?`(${e.length})`:"":e||i,Q=r.filter(V=>V.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(At,{placeholder:i,value:e,onChange:z,onFocus:()=>p(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>p(!y),children:c.jsx(Ae.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>p(!y),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${l&&e.length>0||!l&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[l&&c.jsx(Ae.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:l?`${i} ${G}`:G})]}),c.jsx(Ae.ChevronDown,{})]}),y&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:V=>_(V.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[Q.map(V=>{const se=l?e.includes(V):e===V;return c.jsxs("div",{onClick:()=>f?n(V):A(V),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${se?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[l&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${se?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:se&&c.jsx(Ae.Check,{})}),c.jsx("span",{className:"truncate",children:V})]}),u&&c.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),u(V)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Ae.Trash,{})})]},V)}),Q.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),l&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>n([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Vl=({isOpen:r,onClose:e,title:n,children:i,maxWidth:l="max-w-xl"})=>r?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${l} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:i})]})}):null,ki=({children:r,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:r}),lh=({startDate:r,endDate:e,onStartChange:n,onEndChange:i})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:r,onChange:l=>n(l.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:l=>i(l.target.value)})]}),oh=r=>r==="USD"?"$":r==="EUR"?"":"",En=(r,e="TRY")=>{const n=oh(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" "+n},Nm=r=>r===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r),ZC=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",Am=r=>{if(!r)return"-";const e=new Date(r);return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear()).slice(2)}`},gc=r=>{const e=parseFloat(r.qty)||0,n=parseFloat(r.unitPrice)||0,i=parseFloat(r.vatRate)||0,l=e*n,u=l*(i/100);return l+u},jm=r=>{if(!r)return{subtotal:0,totalVAT:0,grandTotal:0};const e=r.reduce((i,l)=>i+(parseFloat(l.qty)||0)*(parseFloat(l.unitPrice)||0),0),n=r.reduce((i,l)=>i+gc(l),0);return{subtotal:e,totalVAT:n-e,grandTotal:n}},F1=r=>r?r.reduce((e,n)=>e+gc(n),0):0,JC=(r,e)=>{const n=e.filter(l=>l.customerId===r);let i=0;return n.forEach(l=>{if(l.type==="payment"){const u=parseFloat(l.amount)||0;l.direction==="in"?i-=u:i+=u}else{const u=F1(l.items);l.transactionType==="purchase"?i-=u:i+=u}}),i},G1=(r,e)=>{let n=e.filter(u=>u.customerId===r);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let i=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,y=u.direction==="out";y?i+=f:i-=f;let p=u.paymentMethod||"-";p==="Kredi Kart"&&(p="KrediK"),l.push({docNo:u.docNo||"-",date:u.date,action:y?"DEME":"TAHSLAT",type:p,note:u.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:y?f:0,alacak:y?0:f,balance:i})}else{const f=u.transactionType==="purchase",y=f?"ALI":"SATI";u.items?.forEach(p=>{const x=gc(p);f?i-=x:i+=x,l.push({docNo:u.docNo,date:u.date,action:y,type:"-",note:u.note||"",ek:p.ek||"",desc:p.name,qty:p.qty,unitPrice:p.unitPrice,borc:f?0:x,alacak:f?x:0,balance:i})})}}),l},e4=(r,e)=>{const n=G1(r.id,e),i=r.currency||"TRY",l=oh(i);let u="data:text/csv;charset=utf-8,\uFEFF";u+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,n.forEach(p=>{const x=A=>En(Math.abs(A),i).replace(l,"").trim(),_=(p.balance<0?"-":"")+x(p.balance),E=[`"${p.date}"`,`"${p.docNo}"`,`"${p.action}"`,`"${p.type}"`,`"${p.note}"`,`"${p.ek}"`,`"${p.desc}"`,`"${p.qty}"`,`"${p.unitPrice!=="-"?x(parseFloat(p.unitPrice)):"-"}"`,`"${x(p.borc)}"`,`"${x(p.alacak)}"`,`"${_}"`].join(",");u+=E+`
`});const f=encodeURI(u),y=document.createElement("a");y.setAttribute("href",f),y.setAttribute("download",`${r.name}_Ekstre.csv`),document.body.appendChild(y),y.click(),document.body.removeChild(y)},lb=(r,e,n,i=null)=>{const l=G1(r.id,e),u=r.currency||"TRY",f=l.filter(z=>i?z.docNo===i:!(n.start&&z.date<n.start||n.end&&z.date>n.end)),y=[];let p=null;f.forEach(z=>{(!p||p.docNo!==z.docNo||p.action!==z.action)&&(p&&y.push(p),p={docNo:z.docNo,date:z.date,action:z.action,type:z.type,items:[]}),p.items.push(z)}),p&&y.push(p);const x=window.open("","","height=800,width=1000");if(!x)return;const _=f.length>0?f[f.length-1].balance:0,E=i?f.reduce((z,G)=>z+(G.borc||0)+(G.alacak||0),0):0,A=`
    <html><head><title>Ekstre - ${r.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }
        body { 
          font-family: 'Helvetica', sans-serif; 
          color: #000; 
          font-size: 10px;
          margin-top: 100px;
        }        
      /* Header */
      .header { position: absolute; top: 0; left: 0; right: 0; height: 90px; display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 5px; }
      .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
      .company-info p { margin: 0; font-size: 9pt; color: #333; }
      .report-info { text-align: right; }
      .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
      
      /* Transaction Group Styling */
      .osman {margin-top: 100px;}
      
      .transaction-block { margin-bottom: 20px; }
      
      .transaction-header {
          background-color: #e5e7eb;
          border: 1px solid #999;
          border-bottom: none;
          padding: 8px;
          font-size: 11pt;
          font-weight: bold;
          display: flex;
          gap: 30px;
          page-break-after: avoid;
      }

      /* Table Styling */
      table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
      
      /* THEAD repetition */
      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }
      
      th { 
          background-color: #f3f4f6; 
          border-bottom: 1px solid #999; 
          padding: 5px; 
          text-align: left; 
          font-weight: bold; 
          font-size: 9pt;
      }
      
      td { 
          border-bottom: 1px solid #ccc; 
          padding: 5px; 
          vertical-align: top; 
          font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }
      
      /* Footer Balance */
      .balance-container {
         margin-top: 20px; 
         text-align: right; 
         font-size: 12pt;
         border-top: 2px solid #000;
         padding-top: 10px;
         page-break-inside: avoid;
      }
    </style>
    </head><body>
      <div class="header">
        <div class="company-info">
          <h1>ERCELEBILER AHSAP</h1>
          <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
          <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
        </div>
        <div class="report-info">
          <h2>${i?"LEM DETAYI":"HESAP EKSTRES"}</h2>
          <p>Sayn: <strong>${r.name}</strong></p>
          <p>${i?`Belge: #${i}`:(n.start?`${Am(n.start)} - `:"")+(n.end?Am(n.end):"Tm")}</p>
        </div>
      </div>

      <!-- LOOP THROUGH GROUPS -->
        ${y.map(z=>{const G=z.action.includes("DEME")||z.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII -->
                <div class="transaction-header">
                    ${`TARIH : ${Am(z.date)} <span style="color:#999; margin:0 5px;">|</span> BELGE : #${z.docNo} <span style="color:#999; margin:0 5px;">|</span> LEM : ${z.action}`}
                </div>

              <!-- CONTENT TABLE -->
              <table>
                  <colgroup>
                      <col style="width: 9%;"> <!-- Tip / Ek -->
                      <col style="width: auto;"> <!-- Aklama -->
                      <col style="width: 4%;"> <!-- Miktar -->
                      <col style="width: 10%;"> <!-- B.Fiyat -->
                      ${i?"":'<col style="width: 15%;">'} <!-- deme (Hidden in single) -->
                      <col style="width: 15%;"> <!-- Tutar -->
                      ${i?"":'<col style="width: 18%;">'} <!-- Bakiye (Hidden in single) -->
                  </colgroup>
                  <thead>
                      <tr>
                          <th>TP / EK</th>
                          <th>AIKLAMA</th>
                          <th class="right">MK.</th>
                          <th class="right">B.FYAT</th>
                          ${i?"":'<th class="right">DEME (A)</th>'}
                          <th class="right">TUTAR (B)</th>
                          ${i?"":'<th class="right">BAKYE</th>'}
                      </tr>
                  </thead>
<tbody>
                        ${z.items.map(V=>{const se=V.borc>0?V.borc:V.alacak,W=G?V.note||"":V.desc+(V.note?` - ${V.note}`:"");return`
                            <tr>
                                <td>${G?V.type:V.ek||"-"}</td>
                                <td class="col-desc">${W}</td>
                              <td class="right">${V.qty!=="-"?V.qty:"-"}</td>
                              <td class="right">${V.unitPrice!=="-"?En(V.unitPrice,u).replace(oh(u),""):"-"}</td>
                              
                              ${i?"":`<td class="right" style="color:#059669">${V.alacak>0?En(V.alacak,u):"-"}</td>`}
                              
                              <td class="right" style="color:#dc2626">
                                 ${i?En(se,u):V.borc>0?En(V.borc,u):"-"}
                              </td>
                              
                              ${i?"":`
                                  <td class="right bold" style="color:${V.balance>0?"#dc2626":"#059669"}">
                                      ${En(Math.abs(V.balance),u)} ${V.balance>0?"(B)":"(A)"}
                                  </td>
                              `}
                          </tr>
                          `}).join("")}
                  </tbody>
              </table>
          </div>
          `}).join("")}

      <div class="balance-container">
         <strong>${i?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
         <span style="font-weight: bold; margin-left: 10px; color:${(i?E:_)>0?"#dc2626":"#059669"}">
           ${i?En(E,u):(_<0?"-":"")+En(Math.abs(_),u)+(_>0?" (Bor)":" (Alacak)")}
         </span>
      </div>
    </body></html>
  `;x.document.write(A),setTimeout(()=>{x.document.close(),x.print()},500)};function t4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState([]),[p,x]=Z.useState(!1),[_,E]=Z.useState({start:"",end:""}),[A,z]=Z.useState({}),[G,Q]=Z.useState({}),[V,se]=Z.useState(!1),[W,me]=Z.useState(!1),[ge,ve]=Z.useState(!1),[ye,I]=Z.useState(null),[S,j]=Z.useState(null),[M,R]=Z.useState(null),[L,D]=Z.useState(null),[ae,Ne]=Z.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[Y,q]=Z.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[te,xe]=Z.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),[Te,T]=Z.useState(null);if(Z.useEffect(()=>{const ne=Jn.onAuthStateChanged(ze=>{e(ze),i(!1)}),Ie=zn(wt(Ve,"customers"),es("createdAt","desc")),We=Sn(Ie,ze=>{u(ze.docs.map(Et=>({id:Et.id,...Et.data()})))}),ct=zn(wt(Ve,"sales"),es("createdAt","desc")),xn=Sn(ct,ze=>{y(ze.docs.map(Et=>({id:Et.id,...Et.data()})))});return()=>{ne(),We(),xn()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ae.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const C=ne=>{z(Ie=>({...Ie,[ne]:!Ie[ne]}))},U=ne=>T(ne),k=ne=>ne.preventDefault(),H=ne=>{if(Te===null)return;const Ie=[...ae.items],We=Ie[Te];Ie.splice(Te,1),Ie.splice(ne,0,We),Ne({...ae,items:Ie}),T(null)},ie=()=>{R(null),q({name:"",company:"",phone:"",email:"",currency:"TRY"}),me(!0)},fe=ne=>{R(ne),q({name:ne.name,company:ne.company,phone:ne.phone,email:ne.email,currency:ne.currency||"TRY"}),me(!0)},Ce=async ne=>{ne.preventDefault();try{const Ie={...Y,updatedAt:new Date().toISOString()};M?await gs(Mt(Ve,"customers",M.id),Ie):await ar(wt(Ve,"customers"),{...Ie,createdAt:new Date().toISOString()}),me(!1)}catch(Ie){alert("Hata: "+Ie.message)}},ke=async ne=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Vr(Mt(Ve,"customers",ne))},rt=ne=>{I(ne),D(null);const Ie="TH-"+Date.now().toString().slice(-6);xe({docNo:Ie,amount:0,formattedAmount:Nm(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),ve(!0)},It=(ne,Ie)=>{I(Ie),D(ne),xe({docNo:ne.docNo||"",amount:ne.amount,formattedAmount:Nm(ne.amount),type:ne.paymentMethod,direction:ne.direction||"in",note:ne.note,date:ne.date}),ve(!0)},ot=ne=>{const Ie=ne.target.value.replace(/\D/g,""),We=Ie===""?0:parseInt(Ie,10)/100;xe({...te,amount:We,formattedAmount:Nm(We)})},oe=async ne=>{if(ne.preventDefault(),!!ye)try{const Ie={customerId:ye.id,type:"payment",docNo:te.docNo,amount:parseFloat(te.amount),paymentMethod:te.type,direction:te.direction,note:te.note,date:te.date,createdAt:L?L.createdAt:new Date().toISOString()};L?await gs(Mt(Ve,"sales",L.id),Ie):await ar(wt(Ve,"sales"),Ie),ve(!1)}catch(Ie){alert("Hata: "+Ie.message)}},_e=ne=>{I(ne),j(null);const Ie="DOC-"+Date.now().toString().slice(-6);Ne({docNo:Ie,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),se(!0)},he=(ne,Ie)=>{I(Ie),j(ne);const We=(ne.items||[]).map(ct=>({...ct,ek:ct.ek||""}));Ne({docNo:ne.docNo,transactionType:ne.transactionType||"sale",date:ne.date,description:ne.description,status:ne.status,items:We}),se(!0)},Re=async ne=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Vr(Mt(Ve,"sales",ne))}catch(Ie){alert("Hata: "+Ie.message)}},He=async ne=>{ne.preventDefault();try{const Ie={customerId:ye.id,...ae,type:"sale",createdAt:S?S.createdAt:new Date().toISOString()};S?await gs(Mt(Ve,"sales",S.id),Ie):await ar(wt(Ve,"sales"),Ie),se(!1)}catch(Ie){alert("Hata: "+Ie.message)}},be=(ne,Ie,We)=>{const ct=[...ae.items];ct[ne][Ie]=We,Ne({...ae,items:ct})},Ke=()=>Ne({...ae,items:[...ae.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Xe=ne=>Ne({...ae,items:ae.items.filter((Ie,We)=>We!==ne)});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(lh,{startDate:_.start,endDate:_.end,onStartChange:ne=>E({..._,start:ne}),onEndChange:ne=>E({..._,end:ne})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(H1,{checked:p,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:ie,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ae.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:l.map(ne=>{const Ie=f.filter(ze=>{const Et=ze.customerId===ne.id;let vn=!0;return _.start&&ze.date<_.start&&(vn=!1),_.end&&ze.date>_.end&&(vn=!1),Et&&vn}).sort((ze,Et)=>new Date(Et.date)-new Date(ze.date)),We=JC(ne.id,f),ct=A[ne.id],xn=ne.currency||"TRY";return c.jsxs(ki,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>C(ne.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ae.User,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:ne.name}),c.jsx("button",{onClick:ze=>{ze.stopPropagation(),fe(ne)},className:"text-gray-400 hover:text-indigo-500 transition-colors",children:c.jsx(Ae.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:ne.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:ct?c.jsx(Ae.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ae.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${We>0?"text-emerald-600":"text-red-500"}`,children:En(We,xn)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:We>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Dt,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>rt(ne),children:[c.jsx(Ae.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(Dt,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>_e(ne),children:[c.jsx(Ae.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>lb(ne,f,_),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ae.Printer,{})}),c.jsx("button",{onClick:()=>e4(ne,f),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ae.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>ke(ne.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ae.Trash,{})})]})]})]})]}),ct&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:Ie.map(ze=>{const Et=ze.type==="payment",vn=ze.transactionType==="purchase",Rn=ze.direction==="out",zr=Et?ze.amount:F1(ze.items),Hi=G[ze.id];let or="",on="",kt="bg-indigo-400",cn=`SATI #${ze.docNo}`,bt="+";return Et?Rn?(cn="DEME YAPILDI",or="bg-red-50/30",on="text-red-500",kt="bg-red-400",bt="+"):(cn="DEME ALINDI",or="bg-emerald-50/30",on="text-emerald-600",kt="bg-emerald-400",bt="-"):vn?(or="bg-red-50/30",on="text-red-500",kt="bg-red-400",cn=`ALI #${ze.docNo}`,bt="-"):(on="text-emerald-600",kt="bg-emerald-400",bt="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${or}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${kt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:cn}),Et&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:ze.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:ZC(ze.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Et?ze.note||"-":`${ze.items?.length||0} Kalem rn`}),!Et&&c.jsxs("button",{onClick:()=>Q(Bn=>({...Bn,[ze.id]:!Bn[ze.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[Hi?c.jsx(Ae.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(Ae.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${on}`,children:[bt,En(zr,xn)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>lb(ne,f,_,ze.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(Ae.Printer,{})}),Et?c.jsx("button",{onClick:()=>It(ze,ne),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ae.Edit,{})}):c.jsx("button",{onClick:()=>he(ze,ne),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>Re(ze.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ae.Trash,{})})]})]})]}),Hi&&!Et&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:ze.items?.map((Bn,Br)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:Bn.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:Bn.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:Bn.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:En(Bn.unitPrice,xn)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:En(gc(Bn),xn)})]},Br))})]})})})]},ze.id)})})]},ne.id)})}),W&&c.jsx(Vl,{isOpen:W,onClose:()=>me(!1),title:M?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[c.jsx(At,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:Y.name,onChange:ne=>q({...Y,name:ne.target.value})}),c.jsx(At,{placeholder:"Firma (Opsiyonel)",value:Y.company,onChange:ne=>q({...Y,company:ne.target.value})}),c.jsx(At,{placeholder:"Telefon",value:Y.phone,onChange:ne=>q({...Y,phone:ne.target.value})}),c.jsx(At,{placeholder:"E-Posta",value:Y.email,onChange:ne=>q({...Y,email:ne.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(ne=>c.jsx("button",{type:"button",onClick:()=>q({...Y,currency:ne}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${Y.currency===ne?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:ne},ne))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(Dt,{variant:"secondary",type:"button",onClick:()=>me(!1),children:"ptal"}),c.jsx(Dt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),ge&&c.jsxs(Vl,{isOpen:ge,onClose:()=>ve(!1),title:L?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:ye?.name}),c.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>xe({...te,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${te.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>xe({...te,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${te.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(ne=>c.jsx("button",{type:"button",onClick:()=>xe({...te,type:ne}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${te.type===ne?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:ne},ne))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${te.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:te.formattedAmount,onChange:ot}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:oh(ye?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(At,{placeholder:"Belge No",value:te.docNo,onChange:ne=>xe({...te,docNo:ne.target.value})}),c.jsx(At,{type:"date",required:!0,value:te.date,onChange:ne=>xe({...te,date:ne.target.value})})]}),c.jsx(At,{placeholder:"Not (Opsiyonel)",value:te.note,onChange:ne=>xe({...te,note:ne.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(Dt,{variant:"secondary",type:"button",onClick:()=>ve(!1),children:"ptal"}),c.jsx(Dt,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),V&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:He,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:S?"lemi Dzenle":"Yeni lem"}),c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>Ne({...ae,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ae.transactionType==="sale"?"bg-emerald-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP (+)"}),c.jsx("button",{type:"button",onClick:()=>Ne({...ae,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ae.transactionType==="purchase"?"bg-red-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP (-)"})]})]}),c.jsx("button",{type:"button",onClick:()=>se(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(At,{value:ae.docNo,onChange:ne=>Ne({...ae,docNo:ne.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(At,{type:"date",required:!0,value:ae.date,onChange:ne=>Ne({...ae,date:ne.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(At,{value:ae.description,onChange:ne=>Ne({...ae,description:ne.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:ae.items.map((ne,Ie)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>U(Ie),onDragOver:k,onDrop:()=>H(Ie),style:{opacity:Te===Ie?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:ne.ek,onChange:We=>be(Ie,"ek",We.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:ne.name,onChange:We=>be(Ie,"name",We.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:ne.qty,onChange:We=>be(Ie,"qty",We.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:ne.unitPrice,onChange:We=>be(Ie,"unitPrice",We.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:ne.vatRate,onChange:We=>be(Ie,"vatRate",We.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:En(gc(ne),ye?.currency)}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Xe(Ie),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ae.Trash,{})})})]},Ie))})]}),c.jsxs("button",{type:"button",onClick:()=>{if(ae.items.length===0)return;const ne=ae.items[ae.items.length-1];Ne({...ae,items:[...ae.items,{...ne}]})},className:"w-full py-2 bg-indigo-50/50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Ke,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:En(jm(ae.items).subtotal,ye?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:En(jm(ae.items).totalVAT,ye?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:En(jm(ae.items).grandTotal,ye?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>se(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const ob={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},cb=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function n4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState([]),[p,x]=Z.useState({start:"",end:""}),[_,E]=Z.useState(!1),[A,z]=Z.useState(!1),[G,Q]=Z.useState(!1),[V,se]=Z.useState({}),[W,me]=Z.useState({}),ge=Z.useRef(null),[ve,ye]=Z.useState(null),[I,S]=Z.useState(null),[j,M]=Z.useState({en:6,boy:4}),[R,L]=Z.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),D=Z.useMemo(()=>f.map(oe=>oe.name).sort(),[f]);Z.useEffect(()=>{const oe=Jn.onAuthStateChanged(be=>{e(be),i(!1)}),_e=zn(wt(Ve,"customers"),es("name","asc")),he=Sn(_e,be=>{y(be.docs.map(Ke=>({id:Ke.id,...Ke.data()})))}),Re=zn(wt(Ve,"siparisler"),es("createdAt","desc")),He=Sn(Re,be=>{u(be.docs.map(Ke=>({id:Ke.id,...Ke.data()})))});return()=>{oe(),he(),He()}},[]);const ae=Z.useMemo(()=>{const oe=[...f],_e=new Set(f.map(he=>he.id));return l.forEach(he=>{he.customerId&&!_e.has(he.customerId)&&(oe.find(Re=>Re.id===he.customerId)||oe.push({id:he.customerId,name:he.customerId,company:"Kaytsz (Manuel)"}))}),oe.sort((he,Re)=>he.name.localeCompare(Re.name))},[l,f]);if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const Ne=r?.email==="furkan@avci.jp",Y=oe=>{if(!oe)return;const _e=new FileReader;_e.onload=he=>{const Re=new Image;Re.onload=()=>{const He=document.createElement("canvas"),be=800,Ke=800;let Xe=Re.width,ne=Re.height;Xe>ne?Xe>be&&(ne*=be/Xe,Xe=be):ne>Ke&&(Xe*=Ke/ne,ne=Ke),He.width=Xe,He.height=ne,He.getContext("2d").drawImage(Re,0,0,Xe,ne);const We=He.toDataURL("image/jpeg",.8);L(ct=>({...ct,image:We}))},Re.src=he.target.result},_e.readAsDataURL(oe)},q=oe=>{oe.preventDefault(),Q(!0)},te=()=>Q(!1),xe=oe=>{oe.preventDefault(),Q(!1),oe.dataTransfer.files&&oe.dataTransfer.files[0]&&Y(oe.dataTransfer.files[0])},Te=oe=>{oe.clipboardData.files&&oe.clipboardData.files[0]&&Y(oe.clipboardData.files[0])},T=()=>{ye(null);const oe="SP-"+Date.now().toString().slice(-6);L({siparisNo:oe,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),M({en:6,boy:4}),E(!0)},C=oe=>{ye(oe);const _e=f.find(Re=>Re.id===oe.customerId),he=_e?_e.name:oe.customerId;L({siparisNo:oe.siparisNo,customerId:he,date:oe.date,note:oe.note||"",image:oe.image,items:oe.items||[]}),E(!0)},U=async oe=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Vr(Mt(Ve,"siparisler",oe))}catch(_e){alert(_e.message)}},k=async oe=>{if(oe.preventDefault(),!R.customerId){alert("Ltfen mteri giriniz.");return}try{const _e=f.find(He=>He.name===R.customerId),he=_e?_e.id:R.customerId,Re={...R,customerId:he,createdAt:ve?ve.createdAt:new Date().toISOString()};ve?await gs(Mt(Ve,"siparisler",ve.id),Re):await ar(wt(Ve,"siparisler"),{...Re,productionStatus:{}}),E(!1)}catch(_e){alert(_e.message)}},H=(oe,_e,he)=>{const Re=[...R.items],He=Re[oe];if(He[_e]=he,_e==="en1"){const be=parseFloat(he);isNaN(be)?he===""&&(He.en2=""):He.en2=be-j.en}if(_e==="boy1"){const be=parseFloat(he);isNaN(be)?he===""&&(He.boy2=""):He.boy2=be-j.boy}L({...R,items:Re})},ie=()=>{L({...R,items:[...R.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},fe=()=>{if(R.items.length===0)return;const _e={...R.items[R.items.length-1]};L({...R,items:[...R.items,_e]})},Ce=oe=>{const _e=R.items.filter((he,Re)=>Re!==oe);L({...R,items:_e})},ke=(oe,_e)=>{const he=parseFloat(_e)||0,Re={...j,[oe]:he};M(Re);const He=R.items.map(be=>({...be,en2:be.en1?parseFloat(be.en1)-Re.en:be.en2,boy2:be.boy1?parseFloat(be.boy1)-Re.boy:be.boy2}));L({...R,items:He})},rt=oe=>{S(oe),z(!0)},It=async(oe,_e)=>{if(!I)return;const he=I.productionStatus||{},Re=he[oe]||{},He={...he,[oe]:{...Re,[_e]:!Re[_e]}};S({...I,productionStatus:He}),await gs(Mt(Ve,"siparisler",I.id),{productionStatus:He})},ot=oe=>{const _e=f.find(be=>be.id===oe.customerId),he=_e?_e.name:oe.customerId||"simsiz";f.find(be=>be.id===oe.customerId);const Re=window.open("","","height=800,width=1000");if(!Re){alert("Pop-up engelleyiciyi kapatn.");return}const He=`
      <html><head><title>Sipari - ${oe.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 16px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: normal; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 10px; font-size: 16px; word-wrap: break-word; border: 5px solid #eee; padding: 1px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${he}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${oe.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${cb(oe.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${oe.items.map(be=>`
              <tr>
                <td class="group-kasa">${be.en1||"-"}</td>
                <td class="group-kasa">${be.boy1||"-"}</td>
                <td class="group-kasa">${be.genislik||"-"}</td>
                <td>${be.takim||""}</td>
                <td class="col-desc">${be.aciklama||""}</td>
                <td class="group-net"><strong>${be.en2||""}</strong></td>
                <td class="group-net"><strong>${be.boy2||""}</strong></td>
                <td>${be.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${oe.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${oe.note}
          </div>
        `:""}

        ${oe.image?`
          <div class="door-image-container">
            <img src="${oe.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Re.document.write(He),Re.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Te,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(lh,{startDate:p.start,endDate:p.end,onStartChange:oe=>x({...p,start:oe}),onEndChange:oe=>x({...p,end:oe})}),Ne&&c.jsxs("button",{onClick:T,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ae.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:ae.map(oe=>{const _e=l.filter(he=>{const Re=he.customerId===oe.id;let He=!0;return p.start&&(He=He&&he.date>=p.start),p.end&&(He=He&&he.date<=p.end),Re&&He});return _e.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Ae.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:oe.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[_e.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:_e.map(he=>{const Re=V[he.id],He=W[he.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:he.image?c.jsx("img",{src:he.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",he.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:cb(he.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[he.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>se(be=>({...be,[he.id]:!be[he.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Re?c.jsx(Ae.ChevronUp,{}):c.jsx(Ae.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>me(be=>({...be,[he.id]:!be[he.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[He?c.jsx(Ae.ChevronUp,{}):c.jsx(Ae.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>rt(he),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Ae.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>ot(he),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Printer,{})}),Ne&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>C(he),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>U(he.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ae.Trash,{})})]})]})]}),Re&&c.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:[he.note&&c.jsxs("div",{className:"mb-4 p-3 bg-white border border-gray-200 rounded-lg text-xs text-gray-600 shadow-sm",children:[c.jsx("span",{className:"font-bold text-indigo-600 block mb-1 uppercase tracking-wider",children:"Sipari Notu"}),c.jsx("p",{className:"whitespace-pre-wrap",children:he.note})]}),c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:he.items?.map((be,Ke)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:be.aciklama||"-"}),c.jsx("td",{className:"py-2",children:be.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[be.en1||"-"," x ",be.boy1||"-"," x ",be.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[be.en2," x ",be.boy2]}),c.jsx("td",{className:"py-2",children:be.sekil||"-"})]},Ke))})]})]}),He&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(ob).map(([be,Ke])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:Ke.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:Ke.steps.map(Xe=>{const ne=he.productionStatus?.[be]?.[Xe.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:ne?"text-purple-700 font-medium":"text-gray-400",children:Xe.label}),ne?c.jsx(Ae.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Ae.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},Xe.id)})})]},be))})})]},he.id)})})]},oe.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:k,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ve?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:R.siparisNo,onChange:oe=>L({...R,siparisNo:oe.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Ta,{options:D,selected:R.customerId,onChange:oe=>L({...R,customerId:oe}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:oe=>L({...R,date:oe.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${G?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:q,onDragLeave:te,onDrop:xe,children:[c.jsx("input",{ref:ge,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:oe=>Y(oe.target.files[0])}),R.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:R.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ae.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:G?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:R.note,onChange:oe=>L({...R,note:oe.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:oe=>ke("en",oe.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:oe=>ke("boy",oe.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map((oe,_e)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:oe.en1,onChange:he=>H(_e,"en1",he.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:oe.boy1,onChange:he=>H(_e,"boy1",he.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:oe.genislik,onChange:he=>H(_e,"genislik",he.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:oe.takim,onChange:he=>H(_e,"takim",he.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:oe.aciklama,onChange:he=>H(_e,"aciklama",he.target.value),onInput:he=>{he.target.style.height="auto",he.target.style.height=he.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${_e}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:oe.sekil,onChange:he=>H(_e,"sekil",he.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${_e}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:oe.en2,onChange:he=>H(_e,"en2",he.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:oe.boy2,onChange:he=>H(_e,"boy2",he.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Ce(_e),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},_e))})]}),c.jsxs("button",{type:"button",onClick:fe,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Ae.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:ie,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:ve?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",I.siparisNo]})]}),c.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(ob).map(([oe,_e])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:_e.title}),c.jsx("div",{className:"space-y-2",children:_e.steps.map(he=>{const Re=I.productionStatus?.[oe]?.[he.id];return c.jsxs("button",{onClick:()=>It(oe,he.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Re?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:he.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Re?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Re&&c.jsx(Ae.Check,{})})]},he.id)})})]},oe))})]})})]})}const s4=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",r4=({showRaw:r,setShowRaw:e,showManufactured:n,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),ub=({item:r,isAdd:e,onEdit:n,onDelete:i})=>c.jsxs(ki,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:s4(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>n(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ae.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ae.Trash,{})})]})]})]});function i4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState({start:"",end:""}),[p,x]=Z.useState(!1),[_,E]=Z.useState([]),[A,z]=Z.useState(!0),[G,Q]=Z.useState(!0),[V,se]=Z.useState(null),[W,me]=Z.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),ge=Z.useMemo(()=>[...new Set(l.map(ae=>ae.productName))].sort(),[l]),ve=Z.useMemo(()=>{const ae=l.map(Y=>Y.unit).filter(Boolean),Ne=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Ne,...ae])].sort()},[l]);Z.useEffect(()=>{const ae=Jn.onAuthStateChanged(q=>{e(q),i(!1)}),Ne=zn(wt(Ve,"inventory_movements"),es("date","desc")),Y=Sn(Ne,q=>{u(q.docs.map(te=>({id:te.id,...te.data()})))});return()=>{ae(),Y()}},[]);const ye=Z.useMemo(()=>l.filter(ae=>{let Ne=!0;if(f.start&&(Ne=Ne&&ae.date>=f.start),f.end&&(Ne=Ne&&ae.date<=f.end),ae.productType==="raw"&&!A||(ae.productType==="manufactured"||ae.productType==="uretilmis")&&!G)return!1;let Y=!0;return _.length>0&&(Y=_.includes(ae.productName)),Ne&&Y}),[l,f,A,G,_]),I=ye.filter(ae=>ae.action==="add"),S=ye.filter(ae=>ae.action==="remove"),j=async ae=>{ae.preventDefault();try{const Ne={...W,quantity:Number(W.quantity),createdAt:new Date().toISOString()};V?await gs(Mt(Ve,"inventory_movements",V),Ne):await ar(wt(Ve,"inventory_movements"),Ne),D()}catch(Ne){alert("Hata: "+Ne.message)}},M=async ae=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Vr(Mt(Ve,"inventory_movements",ae))},R=async ae=>{if(window.confirm(`"${ae}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Ne=zn(wt(Ve,"inventory_movements"),zC("productName","==",ae)),Y=await HC(Ne),q=KC(Ve);Y.forEach(te=>{q.delete(te.ref)}),await q.commit(),_.includes(ae)&&E(te=>te.filter(xe=>xe!==ae)),W.productName===ae&&me(te=>({...te,productName:""}))}catch(Ne){alert("Silme hatas: "+Ne.message)}},L=ae=>{se(ae.id),me({productType:ae.productType,productName:ae.productName,action:ae.action,quantity:ae.quantity,unit:ae.unit,date:ae.date}),x(!0)},D=()=>{x(!1),se(null),me({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return n?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(lh,{startDate:f.start,endDate:f.end,onStartChange:ae=>y({...f,start:ae}),onEndChange:ae=>y({...f,end:ae})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(r4,{showRaw:A,setShowRaw:z,showManufactured:G,setShowManufactured:Q}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Ta,{options:ge,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Ae.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[I.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[I.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),I.map(ae=>c.jsx(ub,{item:ae,isAdd:!0,onEdit:L,onDelete:M},ae.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[S.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[S.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),S.map(ae=>c.jsx(ub,{item:ae,isAdd:!1,onEdit:L,onDelete:M},ae.id))]})]})]}),c.jsx(Vl,{isOpen:p,onClose:D,title:V?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${W.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:W.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(H1,{checked:W.productType==="manufactured",onChange:ae=>me({...W,productType:ae?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Ta,{options:ge,selected:W.productName,onChange:ae=>me({...W,productName:ae}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>me({...W,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>me({...W,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(At,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:W.quantity,onChange:ae=>me({...W,quantity:ae.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Ta,{options:ve,selected:W.unit,onChange:ae=>me({...W,unit:ae}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(At,{type:"date",required:!0,value:W.date,onChange:ae=>me({...W,date:ae.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Dt,{type:"submit",variant:"primary",children:V?"Gncelle":"Kaydet"}),c.jsx(Dt,{type:"button",variant:"secondary",onClick:D,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const a4=({showRaw:r,setShowRaw:e,showManufactured:n,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),l4=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const n=300,i=800,l=40,u=i-l*2,f=n-l*2,y=r.flatMap(_=>e.map(E=>_[E]||0)),p=Math.max(...y,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${n}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=n-l-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:l,y1:E,x2:i-l,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:l-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(p/4*_)})]},_)}),e.map((_,E)=>{const A=x[E%x.length],z=r.map((G,Q)=>{const V=l+Q*(u/(r.length-1||1)),se=G[_]||0,W=n-l-se/p*f,me=isNaN(V)?l:V,ge=isNaN(W)?n-l:W;return`${me},${ge}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:z,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),r.map((G,Q)=>{const V=l+Q*(u/(r.length-1||1)),se=G[_]||0,W=n-l-se/p*f,me=isNaN(V)?l:V,ge=isNaN(W)?n-l:W;return c.jsx("circle",{cx:me,cy:ge,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${G.month} - ${_}: ${se}`})},Q)})]},_)}),r.map((_,E)=>{const A=l+E*(u/(r.length-1||1));return c.jsx("text",{x:A,y:n-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[E%x.length]}}),_]},_))})]})},o4=({name:r,qty:e,unit:n,type:i,change:l,changePercent:u})=>{const f=i==="raw",y=e<0,p=u>10;let x="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(Ae.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",E=c.jsx(Ae.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",z=f?"text-pink-900":"text-purple-900",G=f?"text-pink-700/70":"text-purple-700/70";y?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",z="text-red-700",G="text-red-500"):p&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",z="text-emerald-800",G="text-emerald-600");const Q=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:Q}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:r,children:r})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${z}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${G} uppercase`,children:n})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[l>0?"+":"",l.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function c4(){const[r,e]=Z.useState([]),[n,i]=Z.useState(!0),[l,u]=Z.useState(!0),[f,y]=Z.useState(!0),[p,x]=Z.useState([]),[_,E]=Z.useState("year");Z.useEffect(()=>{const V=zn(wt(Ve,"inventory_movements"),es("date","asc")),se=Sn(V,W=>{const me=W.docs.map(ge=>ge.data());e(me),i(!1)});return()=>se()},[]);const A=Z.useMemo(()=>{const V={},se=new Date;return se.setDate(se.getDate()-30),r.forEach(W=>{const me=Number(W.quantity)||0,ge=W.action==="add"?me:-me,ve=new Date(W.date);V[W.productName]||(V[W.productName]={name:W.productName,qty:0,unit:W.unit,type:W.productType||"raw",change30Days:0}),V[W.productName].qty+=ge,V[W.productName].type=W.productType||V[W.productName].type,ve>=se&&(V[W.productName].change30Days+=ge)}),Object.values(V).map(W=>{const me=W.qty-W.change30Days;let ge=0;return me!==0?ge=W.change30Days/Math.abs(me)*100:W.change30Days!==0&&(ge=100),{...W,changePercent:ge}})},[r]),z=Z.useMemo(()=>A.filter(V=>!(V.type==="raw"&&!l||(V.type==="manufactured"||V.type==="uretilmis")&&!f||p.length>0&&!p.includes(V.name))),[A,l,f,p]),G=Z.useMemo(()=>A.map(V=>V.name).sort(),[A]),Q=Z.useMemo(()=>{const V=z.sort((ge,ve)=>Math.abs(ve.qty)-Math.abs(ge.qty)).slice(0,5).map(ge=>ge.name);if(V.length===0)return{data:[],keys:[]};const se={},W={};return V.forEach(ge=>W[ge]=0),r.forEach(ge=>{if(!V.includes(ge.productName))return;const ve=ge.date?ge.date.slice(0,7):"N/A";if(ve==="N/A")return;if(_==="year"){const S=new Date().getFullYear();if(new Date(ge.date).getFullYear()!==S)return}const ye=Number(ge.quantity)||0,I=ge.action==="add"?ye:-ye;W[ge.productName]||(W[ge.productName]=0),W[ge.productName]+=I,se[ve]={...W,month:ve}}),{data:Object.values(se).sort((ge,ve)=>ge.month.localeCompare(ve.month)),keys:V}},[r,z,_]);return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(a4,{showRaw:l,setShowRaw:u,showManufactured:f,setShowManufactured:y}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Ta,{options:G,selected:p,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:z.length>0?z.map((V,se)=>c.jsx(o4,{name:V.name,qty:V.qty,unit:V.unit,type:V.type,change:V.change30Days,changePercent:V.changePercent},se)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Ae.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),Q.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Ae.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:V=>E(V.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(l4,{data:Q.data,keys:Q.keys})]})]})]})}const Cm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Zs=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",od=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function u4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState([]),[p,x]=Z.useState({start:"",end:""}),[_,E]=Z.useState(!1),[A,z]=Z.useState(!1),G=Z.useRef(null),[Q,V]=Z.useState(null),[se,W]=Z.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:Cm,images:[],items:[]}),me=Z.useMemo(()=>f.map(T=>T.name).sort(),[f]);if(Z.useEffect(()=>{const T=Jn.onAuthStateChanged(ie=>{e(ie),i(!1)}),C=zn(wt(Ve,"teklifler"),es("createdAt","desc")),U=Sn(C,ie=>{u(ie.docs.map(fe=>({id:fe.id,...fe.data()})))}),k=zn(wt(Ve,"customers"),es("name","asc")),H=Sn(k,ie=>{y(ie.docs.map(fe=>({id:fe.id,...fe.data()})))});return()=>{T(),U(),H()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ae.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const ge=(T,C,U)=>{const k=T*C,H=k*(U/100);return k+H},ve=T=>{if(!T)return{subtotal:0,totalVAT:0,grandTotal:0};const C=T.reduce((k,H)=>k+Number(H.quantity)*Number(H.price),0),U=T.reduce((k,H)=>k+Number(H.quantity)*Number(H.price)*(Number(H.vat)/100),0);return{subtotal:C,totalVAT:U,grandTotal:C+U}},ye=T=>{const C=Array.from(T.target.files||T.dataTransfer.files);C.length&&C.forEach(U=>{if(!U.type.startsWith("image/"))return;const k=new FileReader;k.onload=H=>{const ie=new Image;ie.onload=()=>{const fe=document.createElement("canvas"),Ce=1e3;let ke=ie.width,rt=ie.height;ke>rt?ke>Ce&&(rt*=Ce/ke,ke=Ce):rt>Ce&&(ke*=Ce/rt,rt=Ce),fe.width=ke,fe.height=rt,fe.getContext("2d").drawImage(ie,0,0,ke,rt);const ot=fe.toDataURL("image/jpeg",.7);W(oe=>({...oe,images:[...oe.images,ot]}))},ie.src=H.target.result},k.readAsDataURL(U)})},I=T=>{W(C=>({...C,images:C.images.filter((U,k)=>k!==T)}))},S=(T,C)=>{const U=[...se.images];C===-1&&T>0?[U[T],U[T-1]]=[U[T-1],U[T]]:C===1&&T<U.length-1&&([U[T],U[T+1]]=[U[T+1],U[T]]),W({...se,images:U})},j=T=>{T.preventDefault(),z(!0)},M=()=>z(!1),R=T=>{T.preventDefault(),z(!1),ye(T)},L=T=>{T.clipboardData.files&&T.clipboardData.files.length>0&&(T.preventDefault(),ye({target:{files:T.clipboardData.files}}))},D=()=>{V(null);const T="TK-"+Date.now().toString().slice(-6),C=new Date;C.setDate(C.getDate()+7),W({teklifNo:T,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:C.toISOString().split("T")[0],note:Cm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},ae=T=>{V(T.id),W({teklifNo:T.teklifNo,teklifName:T.teklifName||"",customerName:T.customerName,date:T.date,validityDate:T.validityDate||"",note:T.note||Cm,images:T.images||[],items:T.items||[]}),E(!0)},Ne=async T=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Vr(Mt(Ve,"teklifler",T))}catch(C){alert(C.message)}},Y=async T=>{if(T.preventDefault(),!se.customerName){alert("Ltfen mteri ad giriniz.");return}try{const C={...se,createdAt:new Date().toISOString()};Q?await gs(Mt(Ve,"teklifler",Q),C):await ar(wt(Ve,"teklifler"),C),E(!1)}catch(C){alert(C.message)}},q=(T,C,U)=>{const k=[...se.items],H=k[T];H[C]=U;const ie=parseFloat(C==="quantity"?U:H.quantity),fe=parseFloat(C==="price"?U:H.price),Ce=parseFloat(C==="vat"?U:H.vat);!isNaN(ie)&&!isNaN(fe)&&!isNaN(Ce)&&(H.total=ge(ie,fe,Ce)),W({...se,items:k})},te=()=>{W({...se,items:[...se.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},xe=T=>{W({...se,items:se.items.filter((C,U)=>U!==T)})},Te=T=>{const C=window.open("","","height=800,width=1000");if(!C){alert("Pop-up engelleyiciyi kapatn.");return}const U=ve(T.items||[]),k=T.images||[],H=`
      <html><head><title>Teklif - ${T.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${T.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${od(T.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${od(T.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${T.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${T.items.map(ie=>`
                <tr>
                  <td>${ie.description}</td>
                  <td class="text-center">${ie.quantity}</td>
                  <td class="text-right">${Zs(ie.price)}</td>
                  <td class="text-center">%${ie.vat}</td>
                  <td class="text-right"><strong>${Zs(ie.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Zs(U.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Zs(U.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Zs(U.grandTotal)}</span></div>
            </div>
          </div>

          ${T.note?`<div class="notes-section"><strong>NOT:</strong><br/>${T.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${k.map(ie=>`<img src="${ie}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;C.document.write(H),C.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?L:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(lh,{startDate:p.start,endDate:p.end,onStartChange:T=>x({...p,start:T}),onEndChange:T=>x({...p,end:T})}),c.jsxs("button",{onClick:D,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ae.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[l.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),l.filter(T=>{let C=!0;return p.start&&T.date<p.start&&(C=!1),p.end&&T.date>p.end&&(C=!1),C}).map(T=>{const C=ve(T.items);return c.jsxs(ki,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Ae.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:T.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",T.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:T.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",od(T.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",od(T.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Zs(C.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Dt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Te(T),children:c.jsx(Ae.Printer,{})}),c.jsx(Dt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>ae(T),children:c.jsx(Ae.Edit,{})}),c.jsx(Dt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Ne(T.id),children:c.jsx(Ae.Trash,{})})]})]})]},T.id)})]}),c.jsx(Vl,{isOpen:_,onClose:()=>E(!1),title:Q?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(At,{value:se.teklifNo,onChange:T=>W({...se,teklifNo:T.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(At,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:se.teklifName,onChange:T=>W({...se,teklifName:T.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Ta,{options:me,selected:se.customerName,onChange:T=>W({...se,customerName:T}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(At,{type:"date",required:!0,value:se.date,onChange:T=>W({...se,date:T.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(At,{type:"date",required:!0,value:se.validityDate,onChange:T=>W({...se,validityDate:T.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(WC,{rows:"4",value:se.note,onChange:T=>W({...se,note:T.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:M,onDrop:R,children:[c.jsx("input",{ref:G,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ye}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ae.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:se.images.map((T,C)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:T,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>I(C),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>S(C,-1),disabled:C===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>S(C,1),disabled:C===se.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},C))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:se.items.map((T,C)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(At,{placeholder:"rn/Hizmet aklamas",value:T.description,onChange:U=>q(C,"description",U.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(At,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:T.quantity,onChange:U=>q(C,"quantity",U.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(At,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:T.price,onChange:U=>q(C,"price",U.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:T.vat,onChange:U=>q(C,"vat",U.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Zs(T.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>xe(C),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Ae.Trash,{})})})]},C))})]}),c.jsx("button",{type:"button",onClick:te,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Zs(ve(se.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Zs(ve(se.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Zs(ve(se.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(Dt,{type:"submit",variant:"primary",children:Q?"Kaydet":"Olutur"}),c.jsx(Dt,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const d4="86715dfc9d1046e7e8a0d95a",h4=`https://v6.exchangerate-api.com/v6/${d4}/latest/USD`,ig=["A","B","C","D","E","F"],Y1=15,Rm=()=>{const r={};for(let e=1;e<=Y1;e++)ig.forEach(n=>{r[`${n}${e}`]={value:"",formula:"",result:null,currency:"None",customUnit:""}});return r},xa=r=>r==="USD"?"$":r==="EUR"?"":r==="TRY"?"":"",db=(r,e)=>{if(!r)return"";let n=r.toUpperCase();const i=(..._)=>_.flat().reduce((E,A)=>E+(Number(A)||0),0),l=(..._)=>{const E=_.flat(),A=E.reduce((z,G)=>z+(Number(G)||0),0);return E.length?A/E.length:0},u=(..._)=>Math.max(..._.flat().map(E=>Number(E)||0)),f=(..._)=>Math.min(..._.flat().map(E=>Number(E)||0)),y=(..._)=>_.flat().length,p=(..._)=>{const E=_.flat().map(Q=>Number(Q)||0);if(E.length===0)return 0;const A=E.reduce((Q,V)=>Q+V,0)/E.length,G=E.map(Q=>Math.pow(Q-A,2)).reduce((Q,V)=>Q+V,0)/E.length;return Math.sqrt(G)},x=(_,E,A)=>_?E:A;try{n=n.replace(/([A-F])([0-9]+):([A-F])([0-9]+)/g,(A,z,G,Q,V)=>{const se=[],W=z.charCodeAt(0),me=Q.charCodeAt(0),ge=parseInt(G),ve=parseInt(V);for(let ye=Math.min(W,me);ye<=Math.max(W,me);ye++)for(let I=Math.min(ge,ve);I<=Math.max(ge,ve);I++){const S=String.fromCharCode(ye)+I,j=e[S],M=j?j.result!==null&&j.result!==""?j.result:parseFloat(j.value)||0:0;se.push(M)}return`[${se.join(",")}]`}),n=n.replace(/[A-F][0-9]+/g,A=>{const z=e[A],G=z?z.result!==null&&z.result!==""?z.result:parseFloat(z.value):0;return isNaN(G)?0:G});const E=new Function("SUM","AVERAGE","MAX","MIN","COUNT","STDEV","IF","return "+n)(i,l,u,f,y,p,x);return typeof E=="function"||typeof E=="number"&&!isFinite(E)?"Hata":E}catch{return"Hata"}};function f4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState("cards"),[f,y]=Z.useState([]),[p,x]=Z.useState({TRY:34.5,USD:1,EUR:.95}),[_,E]=Z.useState(Rm()),[A,z]=Z.useState(null),[G,Q]=Z.useState(null),[V,se]=Z.useState(""),[W,me]=Z.useState([]),[ge,ve]=Z.useState(""),[ye,I]=Z.useState(null),[S,j]=Z.useState({cellId:"",label:"",targetCurrency:"None",customUnit:""});Z.useEffect(()=>{const C=Jn.onAuthStateChanged(H=>{e(H),i(!1)}),U=zn(wt(Ve,"price_cards"),es("updatedAt","desc")),k=Sn(U,H=>{y(H.docs.map(ie=>({id:ie.id,...ie.data()})))});return M(),()=>{C(),k()}},[]),Z.useEffect(()=>{const C=U=>{if(!["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName)&&A&&!G){if(U.key==="Delete"||U.key==="Backspace"){const k={..._};k[A]={...k[A],value:"",formula:"",result:null},E(k),se("");return}U.key.length===1&&!U.ctrlKey&&!U.metaKey&&!U.altKey&&Q(A),U.key==="Enter"&&(U.preventDefault(),Q(A))}};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[A,G,_]);const M=async()=>{try{const U=await(await fetch(h4)).json();U&&U.conversion_rates&&x({TRY:U.conversion_rates.TRY,USD:1,EUR:U.conversion_rates.EUR})}catch(C){console.error("Rate error",C)}};Z.useEffect(()=>{const C={..._},U=()=>{let k=!1;return Object.keys(C).forEach(H=>{const ie=C[H];let fe=ie.value;if(ie.formula.toString().startsWith("=")){const Ce=ie.formula.substring(1);fe=db(Ce,C)}else{const Ce=parseFloat(ie.value);fe=isNaN(Ce)?ie.value:Ce}fe!==ie.result&&(ie.result=fe,k=!0)}),k};U(),U()},[V]);const R=C=>{G&&G!==C&&Q(null),z(C),se(_[C].formula||_[C].value),j(U=>({...U,cellId:C}))},L=C=>{const U=C.target.value;se(U);const k=A;if(k){const H={..._};if(H[k]={...H[k],formula:U,value:U.startsWith("=")?H[k].value:U},U.startsWith("="))H[k].result=db(U.substring(1),H);else{const ie=parseFloat(U);H[k].result=isNaN(ie)?U:ie}E(H)}},D=(C,U)=>{if(!A)return;const k={..._};k[A]={...k[A],[C]:U},E(k)},ae=()=>{if(!S.cellId||!S.label){alert("Ltfen hcre ve isim giriniz.");return}me([...W,{...S,id:Date.now()}]),j({cellId:"",label:"",targetCurrency:"None",customUnit:""})},Ne=C=>{me(W.filter(U=>U.id!==C))},Y=(C,U,k=null)=>{const H=k?k[C]:_[C];if(!H)return{main:"Veri Yok",sub:null};let ie=parseFloat(H.result);if(isNaN(ie)&&(ie=parseFloat(H.value)),isNaN(ie))return{main:H.result||H.value||"-",sub:null};const fe=H.currency;if(U==="None"||fe==="None"||U===fe)return{main:ie,sub:null};let Ce=ie;fe!=="USD"&&(Ce=ie/(p[fe]||1));let ke=Ce;return U!=="USD"&&(ke=Ce*(p[U]||1)),{main:ke,sub:ie,sourceSym:xa(fe),targetSym:xa(U)}},q=async()=>{if(!ge){alert("Ltfen bir balk giriniz.");return}const C={};Object.keys(_).forEach(k=>{(_[k].formula||_[k].value||_[k].currency!=="None"||_[k].customUnit)&&(C[k]=_[k])});const U={title:ge,cells:JSON.stringify(C),outputs:JSON.stringify(W),updatedAt:new Date().toISOString()};try{ye?await gs(Mt(Ve,"price_cards",ye),U):await ar(wt(Ve,"price_cards"),U),alert("Kaydedildi!"),u("cards")}catch(k){alert("Hata: "+k.message)}},te=C=>{const U=JSON.parse(C.cells),k=Rm();Object.keys(U).forEach(H=>{k[H]=U[H]}),E(k),me(C.outputs?JSON.parse(C.outputs):[]),ve(C.title),I(C.id),u("sheet")},xe=()=>{E(Rm()),me([]),ve(""),I(null),se(""),z(null),Q(null),u("sheet")},Te=async C=>{window.confirm("Silmek istediinize emin misiniz?")&&await Vr(Mt(Ve,"price_cards",C))};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Ae.Lock,{})," Yetkisiz Eriim"]});const T=p.TRY/p.EUR;return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hesaplama Motoru"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Excel benzeri formller ve kur evirici"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"hidden lg:flex items-center gap-3 bg-white/80 backdrop-blur-md px-4 py-2 rounded-xl border border-gray-200 shadow-sm text-xs font-bold text-gray-600",children:[c.jsxs("span",{className:"flex items-center text-emerald-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"USD/TRY:"})," ",p.TRY.toFixed(2)]}),c.jsx("div",{className:"w-px h-4 bg-gray-300"}),c.jsxs("span",{className:"flex items-center text-indigo-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"EUR/TRY:"})," ",T.toFixed(2)]})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="cards"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Kartlar"}),c.jsx("button",{onClick:()=>u("sheet"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="sheet"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Hesaplama"})]})]})]}),l==="cards"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start",children:[c.jsxs("div",{onClick:xe,className:"border-2 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center h-48 cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/50 transition-all text-gray-400 hover:text-indigo-500 group",children:[c.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:c.jsx(Ae.Plus,{})}),c.jsx("span",{className:"font-bold text-sm",children:"Yeni Tablo"})]}),f.map(C=>{const U=C.outputs?JSON.parse(C.outputs):[],k=JSON.parse(C.cells);return c.jsxs(ki,{className:"p-0 hover:shadow-xl transition-all group flex flex-col h-auto overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-100 bg-gray-50/50",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate",title:C.title,children:C.title}),c.jsx("p",{className:"text-[10px] text-gray-400",children:new Date(C.updatedAt).toLocaleDateString("tr-TR")})]}),c.jsx("div",{className:"p-4 space-y-3 bg-white",children:U.length>0?U.map((H,ie)=>{const fe=Y(H.cellId,H.targetCurrency,k),Ce=H.targetCurrency==="Custom"?H.customUnit:H.targetCurrency!=="None"?xa(H.targetCurrency):"";return c.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-50 last:border-0 pb-2 last:pb-0",children:[c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase",children:H.label})}),c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"font-bold text-indigo-600 block",children:[typeof fe.main=="number"?fe.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):fe.main," ",Ce]}),fe.sub!==null&&fe.sourceSym&&c.jsxs("span",{className:"text-[10px] text-gray-400 block",children:["(",fe.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",fe.sourceSym,")"]})]})]},ie)}):c.jsx("div",{className:"text-xs text-gray-300 italic text-center py-4",children:"Gsterge eklenmemi."})}),c.jsxs("div",{className:"flex gap-2 p-3 bg-gray-50 border-t border-gray-200 mt-auto",children:[c.jsx(Dt,{variant:"primary",className:"flex-1 text-xs py-2",onClick:()=>te(C),children:"Dzenle"}),c.jsx("button",{onClick:()=>Te(C.id),className:"p-2 bg-white border border-gray-200 text-red-500 rounded-lg hover:bg-red-50 transition-colors",children:c.jsx(Ae.Trash,{})})]})]},C.id)})]}),l==="sheet"&&c.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[c.jsxs(ki,{className:"p-4 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between z-20",children:[c.jsxs("div",{className:"flex-grow w-full xl:w-auto flex gap-2 items-center",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-2 rounded-lg border border-indigo-100 min-w-[3rem] text-center",children:A||"A1"}),c.jsx("input",{className:"flex-grow bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm font-mono focus:ring-2 focus:ring-indigo-500 shadow-sm",placeholder:"Forml (=SUM(A1:B2)) veya Deer",value:V,onChange:L})]}),A&&c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-1.5 rounded-xl border border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 px-2",children:"HCRE:"}),c.jsxs("select",{className:"bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2 font-medium",value:_[A]?.currency||"None",onChange:C=>D("currency",C.target.value),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]}),_[A]?.currency==="None"&&c.jsx("input",{className:"w-20 bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2",placeholder:"Birim (kg)",value:_[A]?.customUnit||"",onChange:C=>D("customUnit",C.target.value)})]}),c.jsxs("div",{className:"flex gap-2 w-full xl:w-auto border-l border-gray-200 pl-4",children:[c.jsx("input",{className:"bg-transparent border-b border-gray-300 focus:border-indigo-500 outline-none text-sm font-bold text-gray-700 px-2 py-1 w-32",placeholder:"Tablo Ad...",value:ge,onChange:C=>ve(C.target.value)}),c.jsx(Dt,{variant:"success",className:"py-2 text-xs",onClick:q,children:"Kaydet"}),c.jsx(Dt,{variant:"secondary",className:"py-2 text-xs text-red-500",onClick:xe,children:"Temizle"})]})]}),c.jsx("div",{className:"flex-grow bg-white border border-gray-300 rounded-xl overflow-auto shadow-inner custom-scrollbar relative max-h-[50vh]",children:c.jsxs("table",{className:"w-full border-collapse",style:{minWidth:"800px"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-10 bg-gray-100 border-r border-b border-gray-300 sticky top-0 left-0 z-20"}),ig.map(C=>c.jsx("th",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 py-2 sticky top-0 z-10 w-32 text-center",children:C},C))]})}),c.jsx("tbody",{children:Array.from({length:Y1}).map((C,U)=>{const k=U+1;return c.jsxs("tr",{children:[c.jsx("td",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 text-center sticky left-0 z-10",children:k}),ig.map(H=>{const ie=`${H}${k}`,fe=_[ie],Ce=A===ie,ke=G===ie;fe.formula.startsWith("=");let rt="";return fe.currency&&fe.currency!=="None"?rt=xa(fe.currency):fe.customUnit&&(rt=fe.customUnit),c.jsx("td",{onClick:()=>R(ie),className:`
                                 border-r border-b border-gray-200 text-sm p-0 h-10 min-w-[100px] relative
                                 ${Ce?"ring-2 ring-indigo-500 z-10 bg-indigo-50":"hover:bg-gray-50"}
                                 cursor-cell transition-colors
                               `,children:ke?c.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none px-2 bg-white text-gray-900 font-mono",value:V,onChange:L,onBlur:()=>Q(null),onKeyDown:It=>{It.key==="Enter"&&Q(null)}}):c.jsxs("div",{className:"w-full h-full flex items-center justify-end px-2 truncate font-mono text-gray-700",children:[typeof fe.result=="number"?fe.result.toLocaleString("tr-TR",{maximumFractionDigits:2}):fe.result,c.jsx("span",{className:"text-[10px] text-gray-400 ml-1 font-sans",children:rt})]})},ie)})]},k)})})]})}),c.jsxs("div",{className:"text-[10px] text-gray-400 px-2",children:["* Fonksiyonlar: ",c.jsx("b",{children:"SUM, AVERAGE, MAX, MIN, COUNT, STDEV, IF"}),". rnek: ",c.jsx("b",{children:"=SUM(A1:A5)"})," veya ",c.jsx("b",{children:"=STDEV(B1:B10)"}),". Hcreyi silmek iin seip ",c.jsx("b",{children:"Delete"})," tuuna basn."]}),c.jsxs("div",{className:"bg-gray-100 rounded-2xl p-6 border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-4 flex items-center gap-2",children:"zel Gstergeler & eviriciler"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"w-full md:w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hcre"}),c.jsx(At,{placeholder:"A1",value:S.cellId,onChange:C=>j({...S,cellId:C.target.value.toUpperCase()}),className:"py-2 text-center font-mono uppercase"})]}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Etiket smi"}),c.jsx(At,{placeholder:"rn: Toplam Maliyet",value:S.label,onChange:C=>j({...S,label:C.target.value}),className:"py-2"})]}),c.jsxs("div",{className:"w-full md:w-40",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hedef Birim"}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:S.targetCurrency,onChange:C=>j({...S,targetCurrency:C.target.value}),children:[c.jsx("option",{value:"None",children:"evirme (Ayn)"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"}),c.jsx("option",{value:"Custom",children:"zel Birim"})]})]}),S.targetCurrency==="Custom"&&c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Birim Ad"}),c.jsx(At,{placeholder:"kg, m2",value:S.customUnit,onChange:C=>j({...S,customUnit:C.target.value}),className:"py-2"})]}),c.jsx("button",{onClick:ae,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 shadow-md transition-all h-[42px]",children:"Ekle"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[W.map(C=>{const U=Y(C.cellId,C.targetCurrency),k=_[C.cellId],H=C.targetCurrency==="Custom"?C.customUnit:C.targetCurrency!=="None"?xa(C.targetCurrency):k?xa(k.currency)!==""?xa(k.currency):k.customUnit:"";return c.jsxs(ki,{className:"p-4 relative group hover:shadow-lg border-l-4 border-l-indigo-500",children:[c.jsx("button",{onClick:()=>Ne(C.id),className:"absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:C.label}),c.jsx("span",{className:"text-[10px] font-mono text-indigo-300 bg-indigo-50 px-1 rounded",children:C.cellId})]}),c.jsxs("div",{className:"text-2xl font-bold text-gray-800 flex items-baseline gap-1",children:[typeof U.main=="number"?U.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):U.main,c.jsx("span",{className:"text-sm text-gray-500 font-medium",children:H})]}),U.sub!==null&&c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Orijinal: ",U.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",U.sourceSym]})]},C.id)}),W.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-4 text-sm",children:"Henz zel gsterge eklenmedi."})]})]})]})]})}const va={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},vl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},hb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],m4=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Im=2.5,As=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function g4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState(new Date),[p,x]=Z.useState(!1),[_,E]=Z.useState(!1),[A,z]=Z.useState(null),[G,Q]=Z.useState(new Date),[V,se]=Z.useState(!1),[W,me]=Z.useState(new Date().getFullYear()),[ge,ve]=Z.useState(!1),[ye,I]=Z.useState(null),[S,j]=Z.useState({type:"work",overtimeSlots:0,lateness:0}),[M,R]=Z.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});Z.useEffect(()=>{const k=Jn.onAuthStateChanged(Ce=>{e(Ce),i(!1)}),H=zn(wt(Ve,"employees"),es("name","asc")),ie=Sn(H,Ce=>{u(Ce.docs.map(ke=>({id:ke.id,...ke.data()})))}),fe=setInterval(()=>y(new Date),6e4);return()=>{k(),ie(),clearInterval(fe)}},[]);const L=k=>{const H=f.toISOString().split("T")[0],ie=f.getDay(),fe=f.getHours(),Ce=f.getMinutes(),ke=fe*60+Ce,rt=k.attendance?.[H];if(rt){if(["paid_leave","unpaid_leave"].includes(rt.type))return vl.LEAVE;if(rt.overtimeSlots>0)return vl.OVERTIME}const[It,ot]=k.startHour.split(":").map(Number),[oe,_e]=k.endHour.split(":").map(Number),he=It*60+ot,Re=oe*60+_e;return k.workDays.includes(ie)?ke>=he&&ke<Re?vl.ONLINE:ke>=Re&&rt?.overtimeSlots>0?vl.OVERTIME:vl.OFFLINE:vl.OFFLINE},D=k=>{if(!k.attendance)return{used:0,remaining:k.vacationTotal};let H=0;return Object.values(k.attendance).forEach(ie=>{ie.type==="paid_leave"&&H++}),{used:H,remaining:k.vacationTotal-H}},ae=(k,H)=>{const ie=H.getFullYear(),fe=H.getMonth(),Ce=new Date(ie,fe+1,0).getDate();let ke=0,rt=0,It=0,ot=0,oe=0;for(let ze=1;ze<=Ce;ze++){const Et=`${ie}-${String(fe+1).padStart(2,"0")}-${String(ze).padStart(2,"0")}`,vn=new Date(Et).getDay(),Rn=k.attendance?.[Et],zr=k.workDays.includes(vn);Rn?(Rn.type==="work"&&ke++,Rn.type==="paid_leave"&&oe++,Rn.type==="unpaid_leave"&&ot++,Rn.overtimeSlots&&(rt+=parseInt(Rn.overtimeSlots)),Rn.lateness&&(It+=parseFloat(Rn.lateness))):zr&&ke++}const _e=parseFloat(k.salaryAmount)||0,he=k.customDailyRate&&parseFloat(k.customDailyRate)>0?parseFloat(k.customDailyRate):_e/30,Re=parseFloat(k.customDeductionRate),He=!isNaN(Re)&&Re>0?Re:he,be=he/9,Ke=k.customOvertimeMultiplier?parseFloat(k.customOvertimeMultiplier):1.5,Xe=rt*Im,ne=Xe*(be*Ke),Ie=ot*He,We=It*be,ct=Ie+We,xn=_e+ne-ct+(parseFloat(k.insurance)||0)+(parseFloat(k.allowance)||0);return{workedDays:ke,totalOvertimeSlots:rt,totalOvertimeHours:Xe,unpaidLeaveDays:ot,paidLeaveDays:oe,overtimePay:ne,totalLatenessHours:It,latenessDeduction:We,totalDeduction:ct,totalSalary:xn,dailyRate:he,hourlyRate:be,deductionRate:He}},Ne=(k,H)=>{const ie=new Date(k,H,1);let fe=0;return l.forEach(Ce=>{fe+=ae(Ce,ie).totalSalary}),fe},Y=Z.useMemo(()=>{let k=0,H=0;const ie=new Date(G);return ie.setMonth(G.getMonth()-1),l.forEach(fe=>{k+=ae(fe,G).totalSalary,H+=ae(fe,ie).totalSalary}),{thisMonthTotal:k,lastMonthTotal:H}},[l,G]),q=()=>{E(!1),R({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},te=()=>{A&&(E(!0),R({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),z(null),x(!0))},xe=async k=>{k.preventDefault();try{const H={...M,updatedAt:new Date().toISOString()};_&&A?await gs(Mt(Ve,"employees",A.id),H):await ar(wt(Ve,"employees"),{...H,createdAt:new Date().toISOString()}),x(!1)}catch(H){alert("Hata: "+H.message)}},Te=async k=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Vr(Mt(Ve,"employees",k)),z(null))},T=(k,H)=>{I(k),j({type:H?.type||"work",overtimeSlots:H?.overtimeSlots||0,lateness:H?.lateness||0}),ve(!0)},C=async k=>{if(k.preventDefault(),!A||!ye)return;const H={...A.attendance};H[ye]={type:S.type,overtimeSlots:parseInt(S.overtimeSlots)||0,lateness:parseFloat(S.lateness)||0},await gs(Mt(Ve,"employees",A.id),{attendance:H}),z({...A,attendance:H}),ve(!1)};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(va.Lock,{})," Yetkisiz Eriim"]});const U=({employee:k,date:H,onDateClick:ie})=>{const fe=H.getFullYear(),Ce=H.getMonth(),ke=new Date(fe,Ce+1,0).getDate(),rt=new Date(fe,Ce,1).getDay(),It=[];for(let ot=0;ot<rt;ot++)It.push(null);for(let ot=1;ot<=ke;ot++)It.push(ot);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:hb.map((ot,oe)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:ot.slice(0,3)},oe))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:It.map((ot,oe)=>{if(!ot)return c.jsx("div",{},oe);const _e=`${fe}-${String(Ce+1).padStart(2,"0")}-${String(ot).padStart(2,"0")}`,he=k.attendance?.[_e],Re=new Date(_e).getDay(),He=k.workDays.includes(Re);let be="bg-gray-50 text-gray-400 border-gray-100";return He&&(be="bg-white border-emerald-200 text-gray-700 shadow-sm"),he&&(he.type==="paid_leave"&&(be="bg-yellow-50 border-yellow-200 text-yellow-700"),he.type==="unpaid_leave"&&(be="bg-red-50 border-red-200 text-red-700"),he.type==="work"&&(he.overtimeSlots>0||he.lateness>0)&&(be="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),he.type==="off"&&(be="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>ie(_e,he),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${be}`,children:[c.jsx("span",{className:"text-sm",children:ot}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[he?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",he.overtimeSlots,"M"]}),he?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",he.lateness,"s"]})]})]},oe)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>se(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",G.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:As(Y.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(va.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>se(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:As(Y.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:q,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(va.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(k=>{const H=L(k),ie=D(k);return c.jsxs("div",{onClick:()=>z(k),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${H.color} ${H.ring} ring-offset-2 ring-2`,children:H.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(va.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:k.name}),c.jsx("p",{className:"text-sm text-gray-500",children:k.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[k.startHour," - ",k.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[ie.remaining," gn kald"]})]})]})]},k.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:te,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(va.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Te(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(va.Trash,{})}),c.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",G.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const k=ae(A,G);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:As(k.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:As(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",k.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",As(k.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",k.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",As(k.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",k.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",As(k.totalDeduction-k.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",As(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Im," Saat",c.jsx("br",{}),"Saatlik cret = ",As(k.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",As(k.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>Q(new Date(G.setMonth(G.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:G.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>Q(new Date(G.setMonth(G.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(U,{employee:A,date:G,onDateClick:T})]})]})]})}),V&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>se(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(va.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>me(k=>k-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:W}),c.jsx("button",{onClick:()=>me(k=>k+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m4.map((k,H)=>{const ie=Ne(W,H),fe=new Date().getMonth()===H&&new Date().getFullYear()===W;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${fe?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${fe?"text-indigo-200":"text-gray-400"}`,children:k}),c.jsx("div",{className:`text-lg font-bold ${fe?"text-white":"text-gray-800"}`,children:ie>0?As(ie):"-"})]},k)})})]})}),p&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:xe,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.name,onChange:k=>R({...M,name:k.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.role,onChange:k=>R({...M,role:k.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryType,onChange:k=>R({...M,salaryType:k.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryAmount,onChange:k=>R({...M,salaryAmount:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.insurance,onChange:k=>R({...M,insurance:k.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.allowance,onChange:k=>R({...M,allowance:k.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDailyRate,onChange:k=>R({...M,customDailyRate:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customOvertimeMultiplier,onChange:k=>R({...M,customOvertimeMultiplier:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDeductionRate,onChange:k=>R({...M,customDeductionRate:k.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.vacationTotal,onChange:k=>R({...M,vacationTotal:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.startHour,onChange:k=>R({...M,startHour:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.endHour,onChange:k=>R({...M,endHour:k.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:hb.map((k,H)=>c.jsx("button",{type:"button",onClick:()=>{const ie=M.workDays.includes(H)?M.workDays.filter(fe=>fe!==H):[...M.workDays,H];R({...M,workDays:ie})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${M.workDays.includes(H)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:k.slice(0,3)},k))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),ge&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:ye}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(k=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:k.id,checked:S.type===k.id,onChange:H=>j({...S,type:H.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:k.label})]},k.id))})]}),S.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Im,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(k=>c.jsx("button",{type:"button",onClick:()=>j({...S,overtimeSlots:S.overtimeSlots===k?0:k}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${S.overtimeSlots===k?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:k},k))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:S.lateness,onChange:k=>j({...S,lateness:k.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ve(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}const ag={leftImage:null,topImage:null,kod:"",size:"",color:""},fb=Array(14).fill(null).map(()=>({...ag}));function p4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState([]),[f,y]=Z.useState([]),[p,x]=Z.useState(!1),[_,E]=Z.useState(!1),[A,z]=Z.useState("batches"),[G,Q]=Z.useState({title:"",labels:fb}),[V,se]=Z.useState({name:"",...ag}),[W,me]=Z.useState(null),ge=Z.useRef({});if(Z.useEffect(()=>{const q=Jn.onAuthStateChanged(C=>{e(C),i(!1)}),te=zn(wt(Ve,"label_batches"),es("createdAt","desc")),xe=Sn(te,C=>{u(C.docs.map(U=>({id:U.id,...U.data()})))}),Te=zn(wt(Ve,"label_templates"),es("name","asc")),T=Sn(Te,C=>{y(C.docs.map(U=>({id:U.id,...U.data()})))});return()=>{q(),xe(),T()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const ve=(q,te)=>{if(!q)return;const xe=new FileReader;xe.onload=Te=>{const T=new Image;T.onload=()=>{const C=document.createElement("canvas"),U=400;let k=T.width,H=T.height;k>H?k>U&&(H*=U/k,k=U):H>U&&(k*=U/H,H=U),C.width=k,C.height=H,C.getContext("2d").drawImage(T,0,0,k,H),te(C.toDataURL("image/jpeg",.6))},T.src=Te.target.result},xe.readAsDataURL(q)},ye=(q=null)=>{q?(me(q.id),Q({title:q.title,labels:q.labels})):(me(null),Q({title:"",labels:fb.map(te=>({...te}))})),x(!0)},I=(q,te,xe)=>{const Te=[...G.labels];Te[q]={...Te[q],[te]:xe},Q({...G,labels:Te})},S=()=>{if(window.confirm("lk etiketteki veriler dier tm etiketlere kopyalanacak. Onaylyor musunuz?")){const q=G.labels[0],te=G.labels.map(()=>({...q}));Q({...G,labels:te})}},j=(q,te)=>{const xe=f.find(Te=>Te.id===te);if(xe){const Te=[...G.labels];Te[q]={leftImage:xe.leftImage,topImage:xe.topImage,kod:xe.kod,size:xe.size,color:xe.color},Q({...G,labels:Te})}},M=async q=>{q.preventDefault();try{const te={...G,createdAt:new Date().toISOString()};W?await gs(Mt(Ve,"label_batches",W),te):await ar(wt(Ve,"label_batches"),te),x(!1)}catch(te){alert("Hata: "+te.message)}},R=async q=>{window.confirm("Bu etiket sayfasn silmek istiyor musunuz?")&&await Vr(Mt(Ve,"label_batches",q))},L=(q=null)=>{q?(me(q.id),se(q)):(me(null),se({name:"",...ag})),E(!0)},D=async q=>{q.preventDefault();try{W?await gs(Mt(Ve,"label_templates",W),V):await ar(wt(Ve,"label_templates"),V),E(!1)}catch(te){alert("Hata: "+te.message)}},ae=async q=>{window.confirm("Bu ablonu silmek istiyor musunuz?")&&await Vr(Mt(Ve,"label_templates",q))},Ne=q=>{const te=window.open("","","height=800,width=1000");if(!te)return;const xe=`
      <html><head><title>Etiketler - ${q.title}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        
        body { 
          font-family: 'Arial', sans-serif; 
          color: #000;
          box-sizing: border-box;
          padding-top: 10mm;
          padding-bottom: 10mm;
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: repeat(7, 1fr);
          height: 100%;
        }

        .label-container {
          border: 1px dashed #ccc;
          box-sizing: border-box;
          padding: 2px;
          display: flex;
          overflow: hidden;
          height: 100%;
          page-break-inside: avoid; 
        }

        .left-section {
          width: 25%;
          height: 100%;
          border-right: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-right: 2px;
        }
        /* PDF Fix: Use CONTAIN to show full image without cropping */
        .left-img {
          width: 100%;
          height: 100%;
          object-fit: contain; 
        }

        .right-section {
          width: 75%;
          display: flex;
          flex-direction: column;
          padding-left: 5px;
        }

        .top-section {
          height: 33%;
          border-bottom: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          margin-bottom: 2px;
        }
        .logo-img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        .info-section {
          height: 66%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          font-size: 11pt;
          font-weight: bold;
          line-height: 1.4;
        }

        .info-row { display: flex; align-items: baseline; }
        .label-key { width: 60px; font-weight: bold; }
        .label-val { font-weight: normal; }

        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        ${q.labels.map(Te=>`
          <div class="label-container">
            <div class="left-section">
              ${Te.leftImage?`<img src="${Te.leftImage}" class="left-img" />`:""}
            </div>
            <div class="right-section">
              <div class="top-section">
                ${Te.topImage?`<img src="${Te.topImage}" class="logo-img" />`:""}
              </div>
              <div class="info-section">
                <div class="info-row"><span class="label-key">KOD:</span> <span class="label-val">${Te.kod||""}</span></div>
                <div class="info-row"><span class="label-key">SIZE:</span> <span class="label-val">${Te.size||""}</span></div>
                <div class="info-row"><span class="label-key">COLOR:</span> <span class="label-val">${Te.color||""}</span></div>
              </div>
            </div>
          </div>
        `).join("")}
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;te.document.write(xe),te.document.close()},Y=(q,te,xe,Te=!1)=>c.jsxs("div",{className:`grid grid-cols-4 gap-0 bg-white border border-gray-300 rounded-xl shadow-sm relative group hover:z-20 transition-all ${Te?"":"h-36"}`,children:[c.jsx("div",{className:"col-span-1 border-r border-gray-300 bg-gray-50 relative h-full rounded-l-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ge.current[`left-${te}`]?.click(),children:[q.leftImage?c.jsx("img",{src:q.leftImage,className:"w-full h-full object-contain",alt:"Sol"}):c.jsx("span",{className:"text-2xl text-gray-300 font-light",children:"+"}),c.jsx("input",{type:"file",className:"hidden",ref:T=>ge.current[`left-${te}`]=T,onChange:T=>ve(T.target.files[0],C=>xe(te,"leftImage",C))}),q.leftImage&&c.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),xe(te,"leftImage",null)},className:"absolute top-1 right-1 bg-white/80 rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""})]})}),c.jsxs("div",{className:"col-span-3 flex flex-col h-full relative",children:[c.jsx("div",{className:"h-1/3 border-b border-gray-200 relative group bg-white rounded-tr-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>ge.current[`top-${te}`]?.click(),children:[q.topImage?c.jsx("img",{src:q.topImage,className:"w-full h-full object-contain",alt:"Logo"}):c.jsx("span",{className:"text-[9px] text-gray-400 font-bold tracking-widest",children:"LOGO"}),c.jsx("input",{type:"file",className:"hidden",ref:T=>ge.current[`top-${te}`]=T,onChange:T=>ve(T.target.files[0],C=>xe(te,"topImage",C))}),q.topImage&&c.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),xe(te,"topImage",null)},className:"absolute top-1 right-1 bg-white/80 text-red-500 w-4 h-4 text-[10px] flex items-center justify-center rounded hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:""})]})}),c.jsxs("div",{className:"h-2/3 flex flex-col justify-center p-2 gap-1.5 bg-white rounded-br-xl",children:[c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"KOD"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.kod,onChange:T=>xe(te,"kod",T.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"SIZE"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.size,onChange:T=>xe(te,"size",T.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"CLR"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.color,onChange:T=>xe(te,"color",T.target.value)})]})]})]}),!Te&&c.jsx("div",{className:"absolute top-1 left-1 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-24 scale-75 origin-bottom shadow-md bg-white rounded",children:c.jsx(Ta,{options:f.map(T=>T.name),placeholder:"ablon",onChange:T=>{const C=f.find(U=>U.name===T);C&&j(te,C.id)},selected:""})})})]});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Etiket Basm"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A4 etiket tasarm ve yazdrma"})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>z("batches"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="batches"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Etiket Sayfalar"}),c.jsx("button",{onClick:()=>z("templates"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="templates"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"ablonlar"})]}),c.jsxs("button",{onClick:()=>A==="batches"?ye():L(),className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ae.Plus,{})," ",c.jsx("span",{className:"ml-2",children:A==="batches"?"Etiket Sayfas Olutur":"ablon Ekle"})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10",children:A==="batches"?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.map(q=>c.jsx(ki,{className:"p-0 hover:shadow-xl transition-all group overflow-hidden",children:c.jsxs("div",{className:"flex h-40",children:[c.jsx("div",{className:"w-32 bg-gray-100 border-r border-gray-200 p-2 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full bg-white border border-gray-300 shadow-sm grid grid-cols-2 grid-rows-7 gap-[1px] p-[2px]",children:q.labels.map((te,xe)=>c.jsxs("div",{className:"bg-gray-50 border border-gray-100 relative overflow-hidden",children:[te.leftImage&&c.jsx("img",{src:te.leftImage,className:"absolute left-0 top-0 h-full w-1/3 object-cover opacity-50"}),te.topImage&&c.jsx("img",{src:te.topImage,className:"absolute right-0 top-0 h-1/2 w-2/3 object-contain opacity-50"})]},xe))})}),c.jsxs("div",{className:"flex-grow p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:q.title}),c.jsx("p",{className:"text-xs text-gray-500 font-medium bg-gray-100 inline-block px-2 py-0.5 rounded",children:new Date(q.createdAt).toLocaleDateString("tr-TR")})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(Dt,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>Ne(q),children:[c.jsx(Ae.Printer,{})," Yazdr"]}),c.jsx(Dt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-blue-600",onClick:()=>ye(q),children:c.jsx(Ae.Edit,{})}),c.jsx(Dt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-red-600",onClick:()=>R(q.id),children:c.jsx(Ae.Trash,{})})]})]})]})},q.id)),l.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"Kaytl etiket sayfas yok."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.map(q=>c.jsxs(ki,{className:"p-4 hover:shadow-xl transition-all group relative",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3 truncate border-b border-gray-100 pb-2",children:q.name}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white text-[9px] h-32 flex gap-2",children:[c.jsx("div",{className:"w-1/3 h-full bg-gray-50 flex items-center justify-center text-gray-300 overflow-hidden rounded relative",children:q.leftImage?c.jsx("img",{src:q.leftImage,className:"absolute inset-0 w-full h-full object-cover"}):"IMG"}),c.jsxs("div",{className:"w-2/3 flex flex-col h-full",children:[c.jsx("div",{className:"h-1/3 bg-gray-50 mb-2 flex items-center justify-center overflow-hidden border border-gray-100 relative rounded",children:q.topImage?c.jsx("img",{src:q.topImage,className:"absolute inset-0 w-full h-full object-cover"}):"LOGO"}),c.jsxs("div",{className:"space-y-1 mt-auto",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"KOD:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.kod})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"SIZE:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.size})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"CLR:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.color})]})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>L(q),className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Ae.Edit,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>ae(q.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Ae.Trash,{className:"w-4 h-4"})})]})]},q.id)),f.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"ablon bulunamad."})]})}),c.jsx(Vl,{isOpen:p,onClose:()=>x(!1),title:W?"Etiket Sayfasn Dzenle":"Yeni Etiket Sayfas",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sayfa Bal"}),c.jsx(At,{required:!0,placeholder:"rn: 2025 Kap Siparileri",value:G.title,onChange:q=>Q({...G,title:q.target.value})})]}),c.jsx("button",{type:"button",onClick:S,className:"px-5 py-3 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold hover:bg-purple-200 transition-colors shadow-sm",children:"lkini Hepsine Uygula"})]}),c.jsx("div",{className:"bg-gray-100 p-4 rounded-2xl border border-gray-200 h-[60vh] overflow-y-auto custom-scrollbar",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.labels.map((q,te)=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md z-30 pointer-events-none",children:te+1}),Y(q,te,I)]},te))})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Dt,{variant:"secondary",type:"button",onClick:()=>x(!1),children:"ptal"}),c.jsx(Dt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsx(Vl,{isOpen:_,onClose:()=>E(!1),title:W?"ablonu Dzenle":"Yeni ablon",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ablon Ad"}),c.jsx(At,{required:!0,placeholder:"rn: Beyaz Panel Kap",value:V.name,onChange:q=>se({...V,name:q.target.value})})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:Y(V,-1,(q,te,xe)=>se({...V,[te]:xe}),!0)}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Dt,{variant:"secondary",type:"button",onClick:()=>E(!1),children:"ptal"}),c.jsx(Dt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})})]})}function y4(){const[r,e]=Z.useState(null),[n,i]=Z.useState(!0),[l,u]=Z.useState("dashboard"),[f,y]=Z.useState(!1);Z.useEffect(()=>{const A=_S(Jn,z=>{e(z),i(!1)});return()=>A()},[]);const p=async()=>{try{await wS(Jn)}catch(A){console.error("k yaplrken hata:",A)}},x={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Tag:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},_=[{id:"dashboard",label:"Dashboard",icon:x.Home},{id:"musteriler",label:"Mteriler",icon:x.Users},{id:"urunler",label:"rnler",icon:x.Box},{id:"stok",label:"Stok Durumu",icon:x.Chart},{id:"siparis",label:"Sipari Formu",icon:x.Cart},{id:"teklif",label:"Teklif Formu",icon:x.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:x.Calculator},{id:"calisan",label:"alanlar",icon:x.Briefcase},{id:"etiket",label:"Etiket Basm",icon:x.Tag}],E=()=>{switch(l){case"dashboard":return c.jsx(ab,{onNavigate:u});case"musteriler":return c.jsx(t4,{});case"urunler":return c.jsx(i4,{});case"stok":return c.jsx(c4,{});case"siparis":return c.jsx(n4,{});case"teklif":return c.jsx(u4,{});case"fiyatlandirma":return c.jsx(f4,{});case"calisan":return c.jsx(g4,{});case"etiket":return c.jsx(p4,{});default:return c.jsx(ab,{onNavigate:u})}};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>y(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>y(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(x.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{u(A.id),y(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${l===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${l===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(x.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>y(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(x.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:E()})})]})]}):c.jsx(QC,{})}D2.createRoot(document.getElementById("root")).render(c.jsx(Z.StrictMode,{children:c.jsx(y4,{})}));
