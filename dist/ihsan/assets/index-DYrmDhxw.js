(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function CE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var om={exports:{}},$o={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function RE(){if(Tx)return $o;Tx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:f,ref:l!==void 0?l:null,props:u}}return $o.Fragment=e,$o.jsx=n,$o.jsxs=n,$o}var Sx;function IE(){return Sx||(Sx=1,om.exports=RE()),om.exports}var c=IE(),cm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function kE(){if(Nx)return qe;Nx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function z(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,L={};function re(O,k,I){this.props=O,this.context=k,this.refs=L,this.updater=I||F}re.prototype.isReactComponent={},re.prototype.setState=function(O,k){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,k,"setState")},re.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ne(){}ne.prototype=re.prototype;function W(O,k,I){this.props=O,this.context=k,this.refs=L,this.updater=I||F}var ue=W.prototype=new ne;ue.constructor=W,$(ue,re.prototype),ue.isPureReactComponent=!0;var ve=Array.isArray;function be(){}var R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(O,k,I){var j=I.ref;return{$$typeof:i,type:O,key:k,ref:j!==void 0?j:null,props:I}}function M(O,k){return C(O.type,k,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var k={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(I){return k[I]})}var A=/\/+/g;function ee(O,k){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):k.toString(36)}function Se(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(be,be):(O.status="pending",O.then(function(k){O.status==="pending"&&(O.status="fulfilled",O.value=k)},function(k){O.status==="pending"&&(O.status="rejected",O.reason=k)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,k,I,j,H){var ae=typeof O;(ae==="undefined"||ae==="boolean")&&(O=null);var fe=!1;if(O===null)fe=!0;else switch(ae){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(O.$$typeof){case i:case e:fe=!0;break;case _:return fe=O._init,K(fe(O._payload),k,I,j,H)}}if(fe)return H=H(O),fe=j===""?"."+ee(O,0):j,ve(H)?(I="",fe!=null&&(I=fe.replace(A,"$&/")+"/"),K(H,k,I,"",function(at){return at})):H!=null&&(D(H)&&(H=M(H,I+(H.key==null||O&&O.key===H.key?"":(""+H.key).replace(A,"$&/")+"/")+fe)),k.push(H)),1;fe=0;var Ae=j===""?".":j+":";if(ve(O))for(var Re=0;Re<O.length;Re++)j=O[Re],ae=Ae+ee(j,Re),fe+=K(j,k,I,ae,H);else if(Re=z(O),typeof Re=="function")for(O=Re.call(O),Re=0;!(j=O.next()).done;)j=j.value,ae=Ae+ee(j,Re++),fe+=K(j,k,I,ae,H);else if(ae==="object"){if(typeof O.then=="function")return K(Se(O),k,I,j,H);throw k=String(O),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return fe}function pe(O,k,I){if(O==null)return O;var j=[],H=0;return K(O,j,"","",function(ae){return k.call(I,ae,H++)}),j}function q(O){if(O._status===-1){var k=O._result;k=k(),k.then(function(I){(O._status===0||O._status===-1)&&(O._status=1,O._result=I)},function(I){(O._status===0||O._status===-1)&&(O._status=2,O._result=I)}),O._status===-1&&(O._status=0,O._result=k)}if(O._status===1)return O._result.default;throw O._result}var me=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},we={map:pe,forEach:function(O,k,I){pe(O,function(){k.apply(this,arguments)},I)},count:function(O){var k=0;return pe(O,function(){k++}),k},toArray:function(O){return pe(O,function(k){return k})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return qe.Activity=E,qe.Children=we,qe.Component=re,qe.Fragment=n,qe.Profiler=l,qe.PureComponent=W,qe.StrictMode=r,qe.Suspense=p,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},qe.cache=function(O){return function(){return O.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(O,k,I){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var j=$({},O.props),H=O.key;if(k!=null)for(ae in k.key!==void 0&&(H=""+k.key),k)!N.call(k,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&k.ref===void 0||(j[ae]=k[ae]);var ae=arguments.length-2;if(ae===1)j.children=I;else if(1<ae){for(var fe=Array(ae),Ae=0;Ae<ae;Ae++)fe[Ae]=arguments[Ae+2];j.children=fe}return C(O.type,H,j)},qe.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},qe.createElement=function(O,k,I){var j,H={},ae=null;if(k!=null)for(j in k.key!==void 0&&(ae=""+k.key),k)N.call(k,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(H[j]=k[j]);var fe=arguments.length-2;if(fe===1)H.children=I;else if(1<fe){for(var Ae=Array(fe),Re=0;Re<fe;Re++)Ae[Re]=arguments[Re+2];H.children=Ae}if(O&&O.defaultProps)for(j in fe=O.defaultProps,fe)H[j]===void 0&&(H[j]=fe[j]);return C(O,ae,H)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:y,render:O}},qe.isValidElement=D,qe.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:q}},qe.memo=function(O,k){return{$$typeof:x,type:O,compare:k===void 0?null:k}},qe.startTransition=function(O){var k=R.T,I={};R.T=I;try{var j=O(),H=R.S;H!==null&&H(I,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(be,me)}catch(ae){me(ae)}finally{k!==null&&I.types!==null&&(k.types=I.types),R.T=k}},qe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qe.use=function(O){return R.H.use(O)},qe.useActionState=function(O,k,I){return R.H.useActionState(O,k,I)},qe.useCallback=function(O,k){return R.H.useCallback(O,k)},qe.useContext=function(O){return R.H.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O,k){return R.H.useDeferredValue(O,k)},qe.useEffect=function(O,k){return R.H.useEffect(O,k)},qe.useEffectEvent=function(O){return R.H.useEffectEvent(O)},qe.useId=function(){return R.H.useId()},qe.useImperativeHandle=function(O,k,I){return R.H.useImperativeHandle(O,k,I)},qe.useInsertionEffect=function(O,k){return R.H.useInsertionEffect(O,k)},qe.useLayoutEffect=function(O,k){return R.H.useLayoutEffect(O,k)},qe.useMemo=function(O,k){return R.H.useMemo(O,k)},qe.useOptimistic=function(O,k){return R.H.useOptimistic(O,k)},qe.useReducer=function(O,k,I){return R.H.useReducer(O,k,I)},qe.useRef=function(O){return R.H.useRef(O)},qe.useState=function(O){return R.H.useState(O)},qe.useSyncExternalStore=function(O,k,I){return R.H.useSyncExternalStore(O,k,I)},qe.useTransition=function(){return R.H.useTransition()},qe.version="19.2.0",qe}var Ax;function op(){return Ax||(Ax=1,cm.exports=kE()),cm.exports}var J=op();const vb=CE(J);var um={exports:{}},Qo={},dm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function DE(){return jx||(jx=1,(function(i){function e(K,pe){var q=K.length;K.push(pe);e:for(;0<q;){var me=q-1>>>1,we=K[me];if(0<l(we,pe))K[me]=pe,K[q]=we,q=me;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var pe=K[0],q=K.pop();if(q!==pe){K[0]=q;e:for(var me=0,we=K.length,O=we>>>1;me<O;){var k=2*(me+1)-1,I=K[k],j=k+1,H=K[j];if(0>l(I,q))j<we&&0>l(H,I)?(K[me]=H,K[j]=q,me=j):(K[me]=I,K[k]=q,me=k);else if(j<we&&0>l(H,q))K[me]=H,K[j]=q,me=j;else break e}}return pe}function l(K,pe){var q=K.sortIndex-pe.sortIndex;return q!==0?q:K.id-pe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,y=f.now();i.unstable_now=function(){return f.now()-y}}var p=[],x=[],_=1,E=null,S=3,z=!1,F=!1,$=!1,L=!1,re=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ue(K){for(var pe=n(x);pe!==null;){if(pe.callback===null)r(x);else if(pe.startTime<=K)r(x),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=n(x)}}function ve(K){if($=!1,ue(K),!F)if(n(p)!==null)F=!0,be||(be=!0,P());else{var pe=n(x);pe!==null&&Se(ve,pe.startTime-K)}}var be=!1,R=-1,N=5,C=-1;function M(){return L?!0:!(i.unstable_now()-C<N)}function D(){if(L=!1,be){var K=i.unstable_now();C=K;var pe=!0;try{e:{F=!1,$&&($=!1,ne(R),R=-1),z=!0;var q=S;try{t:{for(ue(K),E=n(p);E!==null&&!(E.expirationTime>K&&M());){var me=E.callback;if(typeof me=="function"){E.callback=null,S=E.priorityLevel;var we=me(E.expirationTime<=K);if(K=i.unstable_now(),typeof we=="function"){E.callback=we,ue(K),pe=!0;break t}E===n(p)&&r(p),ue(K)}else r(p);E=n(p)}if(E!==null)pe=!0;else{var O=n(x);O!==null&&Se(ve,O.startTime-K),pe=!1}}break e}finally{E=null,S=q,z=!1}pe=void 0}}finally{pe?P():be=!1}}}var P;if(typeof W=="function")P=function(){W(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ee=A.port2;A.port1.onmessage=D,P=function(){ee.postMessage(null)}}else P=function(){re(D,0)};function Se(K,pe){R=re(function(){K(i.unstable_now())},pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(K){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var q=S;S=pe;try{return K()}finally{S=q}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(K,pe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var q=S;S=K;try{return pe()}finally{S=q}},i.unstable_scheduleCallback=function(K,pe,q){var me=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?me+q:me):q=me,K){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=q+we,K={id:_++,callback:pe,priorityLevel:K,startTime:q,expirationTime:we,sortIndex:-1},q>me?(K.sortIndex=q,e(x,K),n(p)===null&&K===n(x)&&($?(ne(R),R=-1):$=!0,Se(ve,q-me))):(K.sortIndex=we,e(p,K),F||z||(F=!0,be||(be=!0,P()))),K},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(K){var pe=S;return function(){var q=S;S=pe;try{return K.apply(this,arguments)}finally{S=q}}}})(hm)),hm}var Cx;function ME(){return Cx||(Cx=1,dm.exports=DE()),dm.exports}var fm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function OE(){if(Rx)return _n;Rx=1;var i=op();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,x,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:p,containerInfo:x,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(p,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(p,x,null,_)},_n.flushSync=function(p){var x=f.T,_=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=x,r.p=_,r.d.f()}},_n.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(p,x))},_n.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},_n.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var _=x.as,E=y(_,x.crossOrigin),S=typeof x.integrity=="string"?x.integrity:void 0,z=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:z}):_==="script"&&r.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:z,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},_n.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=y(x.as,x.crossOrigin);r.d.M(p,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(p)},_n.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,E=y(_,x.crossOrigin);r.d.L(p,_,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},_n.preloadModule=function(p,x){if(typeof p=="string")if(x){var _=y(x.as,x.crossOrigin);r.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(p)},_n.requestFormReset=function(p){r.d.r(p)},_n.unstable_batchedUpdates=function(p,x){return p(x)},_n.useFormState=function(p,x,_){return f.H.useFormState(p,x,_)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var Ix;function VE(){if(Ix)return fm.exports;Ix=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=OE(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function LE(){if(kx)return Qo;kx=1;var i=ME(),e=op(),n=VE();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(r(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===o)return p(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,o=m;break}if(w===o){v=!0,o=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,o=h;break}if(w===o){v=!0,o=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case re:return"Profiler";case L:return"StrictMode";case ve:return"Suspense";case be:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case W:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case ue:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return s=t.displayName||null,s!==null?s:ee(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return ee(t(s))}catch{}}return null}var Se=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},me=[],we=-1;function O(t){return{current:t}}function k(t){0>we||(t.current=me[we],me[we]=null,we--)}function I(t,s){we++,me[we]=t.current,t.current=s}var j=O(null),H=O(null),ae=O(null),fe=O(null);function Ae(t,s){switch(I(ae,s),I(H,t),I(j,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Yy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Yy(s),t=$y(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}k(j),I(j,t)}function Re(){k(j),k(H),k(ae)}function at(t){t.memoizedState!==null&&I(fe,t);var s=j.current,a=$y(s,t.type);s!==a&&(I(H,t),I(j,a))}function ct(t){H.current===t&&(k(j),k(H)),fe.current===t&&(k(fe),Fo._currentValue=q)}var Qe,Lt;function Et(t){if(Qe===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Qe=s&&s[1]||"",Lt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+t+Lt}var ce=!1;function ye(t,s){if(!t||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var Z=se}Reflect.construct(t,[],de)}else{try{de.call()}catch(se){Z=se}t.call(de.prototype)}}else{try{throw Error()}catch(se){Z=se}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&Z&&typeof se.stack=="string")return[se.stack,Z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var V=v.split(`
`),Q=w.split(`
`);for(h=o=0;o<V.length&&!V[o].includes("DetermineComponentFrameRoot");)o++;for(;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;if(o===V.length||h===Q.length)for(o=V.length-1,h=Q.length-1;1<=o&&0<=h&&V[o]!==Q[h];)h--;for(;1<=o&&0<=h;o--,h--)if(V[o]!==Q[h]){if(o!==1||h!==1)do if(o--,h--,0>h||V[o]!==Q[h]){var ie=`
`+V[o].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=o&&0<=h);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Et(a):""}function ge(t,s){switch(t.tag){case 26:case 27:case 5:return Et(t.type);case 16:return Et("Lazy");case 13:return t.child!==s&&s!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return ye(t.type,!1);case 11:return ye(t.type.render,!1);case 1:return ye(t.type,!0);case 31:return Et("Activity");default:return""}}function Le(t){try{var s="",a=null;do s+=ge(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Me=Object.prototype.hasOwnProperty,Ie=i.unstable_scheduleCallback,X=i.unstable_cancelCallback,Te=i.unstable_shouldYield,$e=i.unstable_requestPaint,it=i.unstable_now,vn=i.unstable_getCurrentPriorityLevel,Be=i.unstable_ImmediatePriority,Tt=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,Rn=i.unstable_LowPriority,qi=i.unstable_IdlePriority,Fr=i.log,ci=i.unstable_setDisableYieldValue,cn=null,kt=null;function un(t){if(typeof Fr=="function"&&ci(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(cn,t)}catch{}}var _t=Math.clz32?Math.clz32:Dc,Bn=Math.log,Hi=Math.LN2;function Dc(t){return t>>>=0,t===0?32:31-(Bn(t)/Hi|0)|0}var Ds=256,Gr=262144,Ft=4194304;function Ms(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Os(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~m,o!==0?h=Ms(o):(v&=w,v!==0?h=Ms(v):a||(a=w&~t,a!==0&&(h=Ms(a))))):(w=o&~m,w!==0?h=Ms(w):v!==0?h=Ms(v):a||(a=o&~t,a!==0&&(h=Ms(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function ys(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function dh(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mc(){var t=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),t}function Vs(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Kr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hh(t,s,a,o,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,V=t.expirationTimes,Q=t.hiddenUpdates;for(a=v&~a;0<a;){var ie=31-_t(a),de=1<<ie;w[ie]=0,V[ie]=-1;var Z=Q[ie];if(Z!==null)for(Q[ie]=null,ie=0;ie<Z.length;ie++){var se=Z[ie];se!==null&&(se.lane&=-536870913)}a&=~de}o!==0&&Yr(t,o,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Yr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-_t(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function $l(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-_t(a),h=1<<o;h&s|t[o]&s&&(t[o]|=s),a&=~h}}function Ql(t,s){var a=s&-s;return a=(a&42)!==0?1:$r(a),(a&(t.suspendedLanes|s))!==0?0:a}function $r(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ui(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oc(){var t=pe.p;return t!==0?t:(t=window.event,t===void 0?32:yx(t.type))}function xs(t,s){var a=pe.p;try{return pe.p=t,s()}finally{pe.p=a}}var vs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+vs,rn="__reactProps$"+vs,Ls="__reactContainer$"+vs,Ma="__reactEvents$"+vs,fh="__reactListeners$"+vs,Vc="__reactHandles$"+vs,Lc="__reactResources$"+vs,Ps="__reactMarker$"+vs;function Oa(t){delete t[Gt],delete t[rn],delete t[Ma],delete t[fh],delete t[Vc]}function Us(t){var s=t[Gt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ls]||a[Gt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=tx(t);t!==null;){if(a=t[Gt])return a;t=tx(t)}return s}t=a,a=t.parentNode}return null}function es(t){if(t=t[Gt]||t[Ls]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function qn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function zs(t){var s=t[Lc];return s||(s=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Kt(t){t[Ps]=!0}var Xl=new Set,Wl={};function Bs(t,s){qs(t,s),qs(t+"Capture",s)}function qs(t,s){for(Wl[t]=s,t=0;t<s.length;t++)Xl.add(s[t])}var Zl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},eo={};function Pc(t){return Me.call(eo,t)?!0:Me.call(Jl,t)?!1:Zl.test(t)?eo[t]=!0:(Jl[t]=!0,!1)}function Va(t,s,a){if(Pc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Hn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Yt(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function to(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ft(t){if(!t._valueTracker){var s=Fi(t)?"checked":"value";t._valueTracker=to(t,s,""+t[s])}}function Qr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Fi(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function Hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xr=/[\n"\\]/g;function In(t){return t.replace(Xr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function La(t,s,a,o,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+an(s)):t.value!==""+an(s)&&(t.value=""+an(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?no(t,v,an(s)):a!=null?no(t,v,an(a)):o!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+an(w):t.removeAttribute("name")}function Uc(t,s,a,o,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ft(t);return}a=a!=null?""+an(a):"",s=s!=null?""+an(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ft(t)}function no(t,s,a){s==="number"&&Hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Gi(t,s,a,o){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function zc(t,s,a){if(s!=null&&(s=""+an(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+an(a):""}function Ki(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(Se(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=an(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),ft(t)}function kn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function so(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Bc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function io(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&a[h]!==o&&so(t,h,o)}else for(var m in s)s.hasOwnProperty(m)&&so(t,m,s[m])}function Pa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(t){return Yi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function bs(){}var ro=null;function ts(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,Fs=null;function Wr(t){var s=es(t);if(s&&(t=s.stateNode)){var a=t[rn]||null;e:switch(t=s.stateNode,s.type){case"input":if(La(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+In(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var h=o[rn]||null;if(!h)throw Error(r(90));La(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&Qr(o)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Gi(t,!!a.multiple,s,!1)}}}var za=!1;function Qi(t,s,a){if(za)return t(s,a);za=!0;try{var o=t(s);return o}finally{if(za=!1,($i!==null||Fs!==null)&&(Ou(),$i&&(s=$i,t=Fs,Fs=$i=null,Wr(s),t)))for(s=0;s<t.length;s++)Wr(t[s])}}function _s(t,s){var a=t.stateNode;if(a===null)return null;var o=a[rn]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zr=!1;if(ns)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Zr=!1}var Gs=null,ao=null,Jr=null;function lo(){if(Jr)return Jr;var t,s=ao,a=s.length,o,h="value"in Gs?Gs.value:Gs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===h[m-o];o++);return Jr=h.slice(t,1<o?1-o:void 0)}function ea(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function di(){return!0}function ws(){return!1}function dn(t){function s(a,o,h,m,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?di:ws,this.isPropagationStopped=ws,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),s}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=dn(hi),Xi=E({},hi,{view:0,detail:0}),oo=dn(Xi),Wi,Ba,Ys,qa=E({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ys&&(Ys&&t.type==="mousemove"?(Wi=t.screenX-Ys.screenX,Ba=t.screenY-Ys.screenY):Ba=Wi=0,Ys=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),co=dn(qa),ta=E({},qa,{dataTransfer:0}),Hc=dn(ta),Fc=E({},Xi,{relatedTarget:0}),na=dn(Fc),uo=E({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=dn(uo),Ha=E({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kc=dn(Ha),Yc=E({},hi,{data:0}),$s=dn(Yc),$c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Xc[t])?!!s[t]:!1}function Zi(){return Wc}var Nn=E({},Xi,{key:function(t){if(t.key){var s=$c[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(t){return t.type==="keypress"?ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zc=dn(Nn),Jc=E({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=dn(Jc),d=E({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),g=dn(d),b=E({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=dn(b),G=E({},qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),te=dn(G),xe=E({},hi,{newState:0,oldState:0}),Fe=dn(xe),Pt=[9,13,27,32],ut=ns&&"CompositionEvent"in window,Ct=null;ns&&"documentMode"in document&&(Ct=document.documentMode);var ss=ns&&"TextEvent"in window&&!Ct,Qs=ns&&(!ut||Ct&&8<Ct&&11>=Ct),Es=" ",Ts=!1;function sa(t,s){switch(t){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ga=!1;function J1(t,s){switch(t){case"compositionend":return Fa(s);case"keypress":return s.which!==32?null:(Ts=!0,Es);case"textInput":return t=s.data,t===Es&&Ts?null:t;default:return null}}function ew(t,s){if(Ga)return t==="compositionend"||!ut&&sa(t,s)?(t=lo(),Jr=ao=Gs=null,Ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qs&&s.locale!=="ko"?null:s.data;default:return null}}var tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!tw[t.type]:s==="textarea"}function rg(t,s,a,o){$i?Fs?Fs.push(o):Fs=[o]:$i=o,s=qu(s,"onChange"),0<s.length&&(a=new Ks("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var ho=null,fo=null;function nw(t){By(t,0)}function eu(t){var s=qn(t);if(Qr(s))return t}function ag(t,s){if(t==="change")return s}var lg=!1;if(ns){var mh;if(ns){var ph="oninput"in document;if(!ph){var og=document.createElement("div");og.setAttribute("oninput","return;"),ph=typeof og.oninput=="function"}mh=ph}else mh=!1;lg=mh&&(!document.documentMode||9<document.documentMode)}function cg(){ho&&(ho.detachEvent("onpropertychange",ug),fo=ho=null)}function ug(t){if(t.propertyName==="value"&&eu(fo)){var s=[];rg(s,fo,t,ts(t)),Qi(nw,s)}}function sw(t,s,a){t==="focusin"?(cg(),ho=s,fo=a,ho.attachEvent("onpropertychange",ug)):t==="focusout"&&cg()}function iw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(fo)}function rw(t,s){if(t==="click")return eu(s)}function aw(t,s){if(t==="input"||t==="change")return eu(s)}function lw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Fn=typeof Object.is=="function"?Object.is:lw;function mo(t,s){if(Fn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Me.call(s,h)||!Fn(t[h],s[h]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,s){var a=dg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=dg(a)}}function fg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?fg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Hs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Hs(t.document)}return s}function gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var ow=ns&&"documentMode"in document&&11>=document.documentMode,Ka=null,yh=null,po=null,xh=!1;function pg(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xh||Ka==null||Ka!==Hs(o)||(o=Ka,"selectionStart"in o&&gh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),po&&mo(po,o)||(po=o,o=qu(yh,"onSelect"),0<o.length&&(s=new Ks("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ka)))}function ia(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ya={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},vh={},gg={};ns&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function ra(t){if(vh[t])return vh[t];if(!Ya[t])return t;var s=Ya[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in gg)return vh[t]=s[a];return t}var yg=ra("animationend"),xg=ra("animationiteration"),vg=ra("animationstart"),cw=ra("transitionrun"),uw=ra("transitionstart"),dw=ra("transitioncancel"),bg=ra("transitionend"),_g=new Map,bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bh.push("scrollEnd");function Ss(t,s){_g.set(t,s),Bs(s,[t])}var tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],$a=0,_h=0;function nu(){for(var t=$a,s=_h=$a=0;s<t;){var a=is[s];is[s++]=null;var o=is[s];is[s++]=null;var h=is[s];is[s++]=null;var m=is[s];if(is[s++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}m!==0&&wg(a,h,m)}}function su(t,s,a,o){is[$a++]=t,is[$a++]=s,is[$a++]=a,is[$a++]=o,_h|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wh(t,s,a,o){return su(t,s,a,o),iu(t)}function aa(t,s){return su(t,null,null,s),iu(t)}function wg(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-_t(a),t=m.hiddenUpdates,o=t[h],o===null?t[h]=[s]:o.push(s),s.lane=a|536870912),m):null}function iu(t){if(50<Lo)throw Lo=0,kf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Qa={};function hw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,s,a,o){return new hw(t,s,a,o)}function Eh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mi(t,s){var a=t.alternate;return a===null?(a=Gn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ru(t,s,a,o,h,m){var v=0;if(o=t,typeof t=="function")Eh(t)&&(v=1);else if(typeof t=="string")v=yE(t,a,j.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Gn(31,a,s,h),t.elementType=C,t.lanes=m,t;case $:return la(a.children,h,m,s);case L:v=8,h|=24;break;case re:return t=Gn(12,a,s,h|2),t.elementType=re,t.lanes=m,t;case ve:return t=Gn(13,a,s,h),t.elementType=ve,t.lanes=m,t;case be:return t=Gn(19,a,s,h),t.elementType=be,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:v=10;break e;case ne:v=9;break e;case ue:v=11;break e;case R:v=14;break e;case N:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Gn(v,a,s,h),s.elementType=t,s.type=o,s.lanes=m,s}function la(t,s,a,o){return t=Gn(7,t,o,s),t.lanes=a,t}function Th(t,s,a){return t=Gn(6,t,null,s),t.lanes=a,t}function Tg(t){var s=Gn(18,null,null,0);return s.stateNode=t,s}function Sh(t,s,a){return s=Gn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Sg=new WeakMap;function rs(t,s){if(typeof t=="object"&&t!==null){var a=Sg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Le(s)},Sg.set(t,s),s)}return{value:t,source:s,stack:Le(s)}}var Xa=[],Wa=0,au=null,go=0,as=[],ls=0,Ji=null,Xs=1,Ws="";function pi(t,s){Xa[Wa++]=go,Xa[Wa++]=au,au=t,go=s}function Ng(t,s,a){as[ls++]=Xs,as[ls++]=Ws,as[ls++]=Ji,Ji=t;var o=Xs;t=Ws;var h=32-_t(o)-1;o&=~(1<<h),a+=1;var m=32-_t(s)+h;if(30<m){var v=h-h%5;m=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Xs=1<<32-_t(s)+h|a<<h|o,Ws=m+t}else Xs=1<<m|a<<h|o,Ws=t}function Nh(t){t.return!==null&&(pi(t,1),Ng(t,1,0))}function Ah(t){for(;t===au;)au=Xa[--Wa],Xa[Wa]=null,go=Xa[--Wa],Xa[Wa]=null;for(;t===Ji;)Ji=as[--ls],as[ls]=null,Ws=as[--ls],as[ls]=null,Xs=as[--ls],as[ls]=null}function Ag(t,s){as[ls++]=Xs,as[ls++]=Ws,as[ls++]=Ji,Xs=s.id,Ws=s.overflow,Ji=t}var hn=null,Nt=null,st=!1,er=null,os=!1,jh=Error(r(519));function tr(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(rs(s,t)),jh}function jg(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Gt]=t,s[rn]=o,a){case"dialog":We("cancel",s),We("close",s);break;case"iframe":case"object":case"embed":We("load",s);break;case"video":case"audio":for(a=0;a<Uo.length;a++)We(Uo[a],s);break;case"source":We("error",s);break;case"img":case"image":case"link":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"input":We("invalid",s),Uc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":We("invalid",s);break;case"textarea":We("invalid",s),Ki(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||Gy(s.textContent,a)?(o.popover!=null&&(We("beforetoggle",s),We("toggle",s)),o.onScroll!=null&&We("scroll",s),o.onScrollEnd!=null&&We("scrollend",s),o.onClick!=null&&(s.onclick=bs),s=!0):s=!1,s||tr(t,!0)}function Cg(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:hn=hn.return}}function Za(t){if(t!==hn)return!1;if(!st)return Cg(t),st=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Yf(t.type,t.memoizedProps)),a=!a),a&&Nt&&tr(t),Cg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Nt=ex(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Nt=ex(t)}else s===27?(s=Nt,pr(t.type)?(t=Zf,Zf=null,Nt=t):Nt=s):Nt=hn?us(t.stateNode.nextSibling):null;return!0}function oa(){Nt=hn=null,st=!1}function Ch(){var t=er;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),er=null),t}function yo(t){er===null?er=[t]:er.push(t)}var Rh=O(null),ca=null,gi=null;function nr(t,s,a){I(Rh,s._currentValue),s._currentValue=a}function yi(t){t._currentValue=Rh.current,k(Rh)}function Ih(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function kh(t,s,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var V=0;V<s.length;V++)if(w.context===s[V]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Ih(m.return,a,t),o||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Ih(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ja(t,s,a,o){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;Fn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===fe.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Fo):t=[Fo])}h=h.return}t!==null&&kh(s,t,a,o),s.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ua(t){ca=t,gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return Rg(ca,t)}function ou(t,s){return ca===null&&ua(t),Rg(t,s)}function Rg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},gi===null){if(t===null)throw Error(r(308));gi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else gi=gi.next=s;return a}var fw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},mw=i.unstable_scheduleCallback,pw=i.unstable_NormalPriority,$t={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dh(){return{controller:new fw,data:new Map,refCount:0}}function xo(t){t.refCount--,t.refCount===0&&mw(pw,function(){t.controller.abort()})}var vo=null,Mh=0,el=0,tl=null;function gw(t,s){if(vo===null){var a=vo=[];Mh=0,el=Pf(),tl={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Mh++,s.then(Ig,Ig),s}function Ig(){if(--Mh===0&&vo!==null){tl!==null&&(tl.status="fulfilled");var t=vo;vo=null,el=0,tl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function yw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var kg=K.S;K.S=function(t,s){py=it(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&gw(t,s),kg!==null&&kg(t,s)};var da=O(null);function Oh(){var t=da.current;return t!==null?t:wt.pooledCache}function cu(t,s){s===null?I(da,da.current):I(da,s.pool)}function Dg(){var t=Oh();return t===null?null:{parent:$t._currentValue,pool:t}}var nl=Error(r(460)),Vh=Error(r(474)),uu=Error(r(542)),du={then:function(){}};function Mg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Og(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(bs,bs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Lg(t),t;default:if(typeof s.status=="string")s.then(bs,bs);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Lg(t),t}throw fa=s,nl}}function ha(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(fa=a,nl):a}}var fa=null;function Vg(){if(fa===null)throw Error(r(459));var t=fa;return fa=null,t}function Lg(t){if(t===nl||t===uu)throw Error(r(483))}var sl=null,bo=0;function hu(t){var s=bo;return bo+=1,sl===null&&(sl=[]),Og(sl,t,s)}function _o(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function fu(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Pg(t){function s(B,U){if(t){var Y=B.deletions;Y===null?(B.deletions=[U],B.flags|=16):Y.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function o(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function h(B,U){return B=mi(B,U),B.index=0,B.sibling=null,B}function m(B,U,Y){return B.index=Y,t?(Y=B.alternate,Y!==null?(Y=Y.index,Y<U?(B.flags|=67108866,U):Y):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,Y,le){return U===null||U.tag!==6?(U=Th(Y,B.mode,le),U.return=B,U):(U=h(U,Y),U.return=B,U)}function V(B,U,Y,le){var ke=Y.type;return ke===$?ie(B,U,Y.props.children,le,Y.key):U!==null&&(U.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===N&&ha(ke)===U.type)?(U=h(U,Y.props),_o(U,Y),U.return=B,U):(U=ru(Y.type,Y.key,Y.props,null,B.mode,le),_o(U,Y),U.return=B,U)}function Q(B,U,Y,le){return U===null||U.tag!==4||U.stateNode.containerInfo!==Y.containerInfo||U.stateNode.implementation!==Y.implementation?(U=Sh(Y,B.mode,le),U.return=B,U):(U=h(U,Y.children||[]),U.return=B,U)}function ie(B,U,Y,le,ke){return U===null||U.tag!==7?(U=la(Y,B.mode,le,ke),U.return=B,U):(U=h(U,Y),U.return=B,U)}function de(B,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Th(""+U,B.mode,Y),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return Y=ru(U.type,U.key,U.props,null,B.mode,Y),_o(Y,U),Y.return=B,Y;case F:return U=Sh(U,B.mode,Y),U.return=B,U;case N:return U=ha(U),de(B,U,Y)}if(Se(U)||P(U))return U=la(U,B.mode,Y,null),U.return=B,U;if(typeof U.then=="function")return de(B,hu(U),Y);if(U.$$typeof===W)return de(B,ou(B,U),Y);fu(B,U)}return null}function Z(B,U,Y,le){var ke=U!==null?U.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ke!==null?null:w(B,U,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return Y.key===ke?V(B,U,Y,le):null;case F:return Y.key===ke?Q(B,U,Y,le):null;case N:return Y=ha(Y),Z(B,U,Y,le)}if(Se(Y)||P(Y))return ke!==null?null:ie(B,U,Y,le,null);if(typeof Y.then=="function")return Z(B,U,hu(Y),le);if(Y.$$typeof===W)return Z(B,U,ou(B,Y),le);fu(B,Y)}return null}function se(B,U,Y,le,ke){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return B=B.get(Y)||null,w(U,B,""+le,ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case z:return B=B.get(le.key===null?Y:le.key)||null,V(U,B,le,ke);case F:return B=B.get(le.key===null?Y:le.key)||null,Q(U,B,le,ke);case N:return le=ha(le),se(B,U,Y,le,ke)}if(Se(le)||P(le))return B=B.get(Y)||null,ie(U,B,le,ke,null);if(typeof le.then=="function")return se(B,U,Y,hu(le),ke);if(le.$$typeof===W)return se(B,U,Y,ou(U,le),ke);fu(U,le)}return null}function je(B,U,Y,le){for(var ke=null,lt=null,Ce=U,Ye=U=0,Je=null;Ce!==null&&Ye<Y.length;Ye++){Ce.index>Ye?(Je=Ce,Ce=null):Je=Ce.sibling;var ot=Z(B,Ce,Y[Ye],le);if(ot===null){Ce===null&&(Ce=Je);break}t&&Ce&&ot.alternate===null&&s(B,Ce),U=m(ot,U,Ye),lt===null?ke=ot:lt.sibling=ot,lt=ot,Ce=Je}if(Ye===Y.length)return a(B,Ce),st&&pi(B,Ye),ke;if(Ce===null){for(;Ye<Y.length;Ye++)Ce=de(B,Y[Ye],le),Ce!==null&&(U=m(Ce,U,Ye),lt===null?ke=Ce:lt.sibling=Ce,lt=Ce);return st&&pi(B,Ye),ke}for(Ce=o(Ce);Ye<Y.length;Ye++)Je=se(Ce,B,Ye,Y[Ye],le),Je!==null&&(t&&Je.alternate!==null&&Ce.delete(Je.key===null?Ye:Je.key),U=m(Je,U,Ye),lt===null?ke=Je:lt.sibling=Je,lt=Je);return t&&Ce.forEach(function(br){return s(B,br)}),st&&pi(B,Ye),ke}function Ve(B,U,Y,le){if(Y==null)throw Error(r(151));for(var ke=null,lt=null,Ce=U,Ye=U=0,Je=null,ot=Y.next();Ce!==null&&!ot.done;Ye++,ot=Y.next()){Ce.index>Ye?(Je=Ce,Ce=null):Je=Ce.sibling;var br=Z(B,Ce,ot.value,le);if(br===null){Ce===null&&(Ce=Je);break}t&&Ce&&br.alternate===null&&s(B,Ce),U=m(br,U,Ye),lt===null?ke=br:lt.sibling=br,lt=br,Ce=Je}if(ot.done)return a(B,Ce),st&&pi(B,Ye),ke;if(Ce===null){for(;!ot.done;Ye++,ot=Y.next())ot=de(B,ot.value,le),ot!==null&&(U=m(ot,U,Ye),lt===null?ke=ot:lt.sibling=ot,lt=ot);return st&&pi(B,Ye),ke}for(Ce=o(Ce);!ot.done;Ye++,ot=Y.next())ot=se(Ce,B,Ye,ot.value,le),ot!==null&&(t&&ot.alternate!==null&&Ce.delete(ot.key===null?Ye:ot.key),U=m(ot,U,Ye),lt===null?ke=ot:lt.sibling=ot,lt=ot);return t&&Ce.forEach(function(jE){return s(B,jE)}),st&&pi(B,Ye),ke}function vt(B,U,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===$&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:e:{for(var ke=Y.key;U!==null;){if(U.key===ke){if(ke=Y.type,ke===$){if(U.tag===7){a(B,U.sibling),le=h(U,Y.props.children),le.return=B,B=le;break e}}else if(U.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===N&&ha(ke)===U.type){a(B,U.sibling),le=h(U,Y.props),_o(le,Y),le.return=B,B=le;break e}a(B,U);break}else s(B,U);U=U.sibling}Y.type===$?(le=la(Y.props.children,B.mode,le,Y.key),le.return=B,B=le):(le=ru(Y.type,Y.key,Y.props,null,B.mode,le),_o(le,Y),le.return=B,B=le)}return v(B);case F:e:{for(ke=Y.key;U!==null;){if(U.key===ke)if(U.tag===4&&U.stateNode.containerInfo===Y.containerInfo&&U.stateNode.implementation===Y.implementation){a(B,U.sibling),le=h(U,Y.children||[]),le.return=B,B=le;break e}else{a(B,U);break}else s(B,U);U=U.sibling}le=Sh(Y,B.mode,le),le.return=B,B=le}return v(B);case N:return Y=ha(Y),vt(B,U,Y,le)}if(Se(Y))return je(B,U,Y,le);if(P(Y)){if(ke=P(Y),typeof ke!="function")throw Error(r(150));return Y=ke.call(Y),Ve(B,U,Y,le)}if(typeof Y.then=="function")return vt(B,U,hu(Y),le);if(Y.$$typeof===W)return vt(B,U,ou(B,Y),le);fu(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,U!==null&&U.tag===6?(a(B,U.sibling),le=h(U,Y),le.return=B,B=le):(a(B,U),le=Th(Y,B.mode,le),le.return=B,B=le),v(B)):a(B,U)}return function(B,U,Y,le){try{bo=0;var ke=vt(B,U,Y,le);return sl=null,ke}catch(Ce){if(Ce===nl||Ce===uu)throw Ce;var lt=Gn(29,Ce,null,B.mode);return lt.lanes=le,lt.return=B,lt}finally{}}}var ma=Pg(!0),Ug=Pg(!1),sr=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ph(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function rr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(dt&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=iu(t),wg(t,null,a),s}return su(t,o,s,a),iu(t)}function wo(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,$l(t,a)}}function Uh(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var zh=!1;function Eo(){if(zh){var t=tl;if(t!==null)throw t}}function To(t,s,a,o){zh=!1;var h=t.updateQueue;sr=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var V=w,Q=V.next;V.next=null,v===null?m=Q:v.next=Q,v=V;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==v&&(w===null?ie.firstBaseUpdate=Q:w.next=Q,ie.lastBaseUpdate=V))}if(m!==null){var de=h.baseState;v=0,ie=Q=V=null,w=m;do{var Z=w.lane&-536870913,se=Z!==w.lane;if(se?(Ze&Z)===Z:(o&Z)===Z){Z!==0&&Z===el&&(zh=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var je=t,Ve=w;Z=s;var vt=a;switch(Ve.tag){case 1:if(je=Ve.payload,typeof je=="function"){de=je.call(vt,de,Z);break e}de=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ve.payload,Z=typeof je=="function"?je.call(vt,de,Z):je,Z==null)break e;de=E({},de,Z);break e;case 2:sr=!0}}Z=w.callback,Z!==null&&(t.flags|=64,se&&(t.flags|=8192),se=h.callbacks,se===null?h.callbacks=[Z]:se.push(Z))}else se={lane:Z,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(Q=ie=se,V=de):ie=ie.next=se,v|=Z;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;se=w,w=se.next,se.next=null,h.lastBaseUpdate=se,h.shared.pending=null}}while(!0);ie===null&&(V=de),h.baseState=V,h.firstBaseUpdate=Q,h.lastBaseUpdate=ie,m===null&&(h.shared.lanes=0),ur|=v,t.lanes=v,t.memoizedState=de}}function zg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Bg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)zg(a[t],s)}var il=O(null),mu=O(0);function qg(t,s){t=Ni,I(mu,t),I(il,s),Ni=t|s.baseLanes}function Bh(){I(mu,Ni),I(il,il.current)}function qh(){Ni=mu.current,k(il),k(mu)}var Kn=O(null),cs=null;function ar(t){var s=t.alternate;I(Ut,Ut.current&1),I(Kn,t),cs===null&&(s===null||il.current!==null||s.memoizedState!==null)&&(cs=t)}function Hh(t){I(Ut,Ut.current),I(Kn,t),cs===null&&(cs=t)}function Hg(t){t.tag===22?(I(Ut,Ut.current),I(Kn,t),cs===null&&(cs=t)):lr()}function lr(){I(Ut,Ut.current),I(Kn,Kn.current)}function Yn(t){k(Kn),cs===t&&(cs=null),k(Ut)}var Ut=O(0);function pu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xf(a)||Wf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,Ge=null,yt=null,Qt=null,gu=!1,rl=!1,pa=!1,yu=0,So=0,al=null,xw=0;function Mt(){throw Error(r(321))}function Fh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Fn(t[a],s[a]))return!1;return!0}function Gh(t,s,a,o,h,m){return xi=m,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?N0:lf,pa=!1,m=a(o,h),pa=!1,rl&&(m=Gg(s,a,o,h)),Fg(t),m}function Fg(t){K.H=jo;var s=yt!==null&&yt.next!==null;if(xi=0,Qt=yt=Ge=null,gu=!1,So=0,al=null,s)throw Error(r(300));t===null||Xt||(t=t.dependencies,t!==null&&lu(t)&&(Xt=!0))}function Gg(t,s,a,o){Ge=t;var h=0;do{if(rl&&(al=null),So=0,rl=!1,25<=h)throw Error(r(301));if(h+=1,Qt=yt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=A0,m=s(a,o)}while(rl);return m}function vw(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?No(s):s,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function Kh(){var t=yu!==0;return yu=0,t}function Yh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $h(t){if(gu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}gu=!1}xi=0,Qt=yt=Ge=null,rl=!1,So=yu=0,al=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ge.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function zt(){if(yt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var s=Qt===null?Ge.memoizedState:Qt.next;if(s!==null)Qt=s,yt=t;else{if(t===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Qt===null?Ge.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(t){var s=So;return So+=1,al===null&&(al=[]),t=Og(al,t,s),s=Ge,(Qt===null?s.memoizedState:Qt.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?N0:lf),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return No(t);if(t.$$typeof===W)return fn(t)}throw Error(r(438,String(t)))}function Qh(t){var s=null,a=Ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ge.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=xu(),Ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=M;return s.index++,a}function vi(t,s){return typeof s=="function"?s(t):s}function bu(t){var s=zt();return Xh(s,yt,t)}function Xh(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,m=o.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,o.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=v=null,V=null,Q=s,ie=!1;do{var de=Q.lane&-536870913;if(de!==Q.lane?(Ze&de)===de:(xi&de)===de){var Z=Q.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),de===el&&(ie=!0);else if((xi&Z)===Z){Q=Q.next,Z===el&&(ie=!0);continue}else de={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(w=V=de,v=m):V=V.next=de,Ge.lanes|=Z,ur|=Z;de=Q.action,pa&&a(m,de),m=Q.hasEagerState?Q.eagerState:a(m,de)}else Z={lane:de,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(w=V=Z,v=m):V=V.next=Z,Ge.lanes|=de,ur|=de;Q=Q.next}while(Q!==null&&Q!==s);if(V===null?v=m:V.next=w,!Fn(m,t.memoizedState)&&(Xt=!0,ie&&(a=tl,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=V,o.lastRenderedState=m}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Wh(t){var s=zt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Fn(m,s.memoizedState)||(Xt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function Kg(t,s,a){var o=Ge,h=zt(),m=st;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Fn((yt||h).memoizedState,a);if(v&&(h.memoizedState=a,Xt=!0),h=h.queue,ef(Qg.bind(null,o,h,t),[t]),h.getSnapshot!==s||v||Qt!==null&&Qt.memoizedState.tag&1){if(o.flags|=2048,ll(9,{destroy:void 0},$g.bind(null,o,h,a,s),null),wt===null)throw Error(r(349));m||(xi&127)!==0||Yg(o,s,a)}return a}function Yg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ge.updateQueue,s===null?(s=xu(),Ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function $g(t,s,a,o){s.value=a,s.getSnapshot=o,Xg(s)&&Wg(t)}function Qg(t,s,a){return a(function(){Xg(s)&&Wg(t)})}function Xg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Fn(t,a)}catch{return!0}}function Wg(t){var s=aa(t,2);s!==null&&Ln(s,t,2)}function Zh(t){var s=An();if(typeof t=="function"){var a=t;if(t=a(),pa){un(!0);try{a()}finally{un(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},s}function Zg(t,s,a,o){return t.baseState=a,Xh(t,yt,typeof o=="function"?o:vi)}function bw(t,s,a,o,h){if(Eu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,Jg(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Jg(t,s){var a=s.action,o=s.payload,h=t.state;if(s.isTransition){var m=K.T,v={};K.T=v;try{var w=a(h,o),V=K.S;V!==null&&V(v,w),e0(t,s,w)}catch(Q){Jh(t,s,Q)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,o),e0(t,s,m)}catch(Q){Jh(t,s,Q)}}function e0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){t0(t,s,o)},function(o){return Jh(t,s,o)}):t0(t,s,a)}function t0(t,s,a){s.status="fulfilled",s.value=a,n0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Jg(t,a)))}function Jh(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,n0(s),s=s.next;while(s!==o)}t.action=null}function n0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function s0(t,s){return s}function i0(t,s){if(st){var a=wt.formState;if(a!==null){e:{var o=Ge;if(st){if(Nt){t:{for(var h=Nt,m=os;h.nodeType!==8;){if(!m){h=null;break t}if(h=us(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Nt=us(h.nextSibling),o=h.data==="F!";break e}}tr(o)}o=!1}o&&(s=a[0])}}return a=An(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s0,lastRenderedState:s},a.queue=o,a=E0.bind(null,Ge,o),o.dispatch=a,o=Zh(!1),m=af.bind(null,Ge,!1,o.queue),o=An(),h={state:s,dispatch:null,action:t,pending:null},o.queue=h,a=bw.bind(null,Ge,h,m,a),h.dispatch=a,o.memoizedState=t,[s,a,!1]}function r0(t){var s=zt();return a0(s,yt,t)}function a0(t,s,a){if(s=Xh(t,s,s0)[0],t=bu(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=No(s)}catch(v){throw v===nl?uu:v}else o=s;s=zt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Ge.flags|=2048,ll(9,{destroy:void 0},_w.bind(null,h,a),null)),[o,m,t]}function _w(t,s){t.action=s}function l0(t){var s=zt(),a=yt;if(a!==null)return a0(s,a,t);zt(),s=s.memoizedState,a=zt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function ll(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=xu(),Ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function o0(){return zt().memoizedState}function _u(t,s,a,o){var h=An();Ge.flags|=t,h.memoizedState=ll(1|s,{destroy:void 0},a,o===void 0?null:o)}function wu(t,s,a,o){var h=zt();o=o===void 0?null:o;var m=h.memoizedState.inst;yt!==null&&o!==null&&Fh(o,yt.memoizedState.deps)?h.memoizedState=ll(s,m,a,o):(Ge.flags|=t,h.memoizedState=ll(1|s,m,a,o))}function c0(t,s){_u(8390656,8,t,s)}function ef(t,s){wu(2048,8,t,s)}function ww(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=xu(),Ge.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function u0(t){var s=zt().memoizedState;return ww({ref:s,nextImpl:t}),function(){if((dt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function d0(t,s){return wu(4,2,t,s)}function h0(t,s){return wu(4,4,t,s)}function f0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function m0(t,s,a){a=a!=null?a.concat([t]):null,wu(4,4,f0.bind(null,s,t),a)}function tf(){}function p0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Fh(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function g0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Fh(s,o[1]))return o[0];if(o=t(),pa){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[o,s],o}function nf(t,s,a){return a===void 0||(xi&1073741824)!==0&&(Ze&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=yy(),Ge.lanes|=t,ur|=t,a)}function y0(t,s,a,o){return Fn(a,s)?a:il.current!==null?(t=nf(t,a,o),Fn(t,s)||(Xt=!0),t):(xi&42)===0||(xi&1073741824)!==0&&(Ze&261930)===0?(Xt=!0,t.memoizedState=a):(t=yy(),Ge.lanes|=t,ur|=t,s)}function x0(t,s,a,o,h){var m=pe.p;pe.p=m!==0&&8>m?m:8;var v=K.T,w={};K.T=w,af(t,!1,s,a);try{var V=h(),Q=K.S;if(Q!==null&&Q(w,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ie=yw(V,o);Ao(t,s,ie,Xn(t))}else Ao(t,s,o,Xn(t))}catch(de){Ao(t,s,{then:function(){},status:"rejected",reason:de},Xn())}finally{pe.p=m,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function Ew(){}function sf(t,s,a,o){if(t.tag!==5)throw Error(r(476));var h=v0(t).queue;x0(t,h,s,q,a===null?Ew:function(){return b0(t),a(o)})}function v0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:q},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function b0(t){var s=v0(t);s.next===null&&(s=t.alternate.memoizedState),Ao(t,s.next.queue,{},Xn())}function rf(){return fn(Fo)}function _0(){return zt().memoizedState}function w0(){return zt().memoizedState}function Tw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Xn();t=ir(a);var o=rr(s,t,a);o!==null&&(Ln(o,s,a),wo(o,s,a)),s={cache:Dh()},t.payload=s;return}s=s.return}}function Sw(t,s,a){var o=Xn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?T0(s,a):(a=wh(t,s,a,o),a!==null&&(Ln(a,t,o),S0(a,s,o)))}function E0(t,s,a){var o=Xn();Ao(t,s,a,o)}function Ao(t,s,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))T0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Fn(w,v))return su(t,s,h,0),wt===null&&nu(),!1}catch{}finally{}if(a=wh(t,s,h,o),a!==null)return Ln(a,t,o),S0(a,s,o),!0}return!1}function af(t,s,a,o){if(o={lane:2,revertLane:Pf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(s)throw Error(r(479))}else s=wh(t,a,o,2),s!==null&&Ln(s,t,2)}function Eu(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function T0(t,s){rl=gu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function S0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,$l(t,a)}}var jo={readContext:fn,use:vu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};jo.useEffectEvent=Mt;var N0={readContext:fn,use:vu,useCallback:function(t,s){return An().memoizedState=[t,s===void 0?null:s],t},useContext:fn,useEffect:c0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,_u(4194308,4,f0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return _u(4194308,4,t,s)},useInsertionEffect:function(t,s){_u(4,2,t,s)},useMemo:function(t,s){var a=An();s=s===void 0?null:s;var o=t();if(pa){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=An();if(a!==void 0){var h=a(s);if(pa){un(!0);try{a(s)}finally{un(!1)}}}else h=s;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Sw.bind(null,Ge,t),[o.memoizedState,t]},useRef:function(t){var s=An();return t={current:t},s.memoizedState=t},useState:function(t){t=Zh(t);var s=t.queue,a=E0.bind(null,Ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:tf,useDeferredValue:function(t,s){var a=An();return nf(a,t,s)},useTransition:function(){var t=Zh(!1);return t=x0.bind(null,Ge,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ge,h=An();if(st){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),wt===null)throw Error(r(349));(Ze&127)!==0||Yg(o,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,c0(Qg.bind(null,o,m,t),[t]),o.flags|=2048,ll(9,{destroy:void 0},$g.bind(null,o,m,a,s),null),a},useId:function(){var t=An(),s=wt.identifierPrefix;if(st){var a=Ws,o=Xs;a=(o&~(1<<32-_t(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=yu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=xw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:rf,useFormState:i0,useActionState:i0,useOptimistic:function(t){var s=An();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=af.bind(null,Ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:Qh,useCacheRefresh:function(){return An().memoizedState=Tw.bind(null,Ge)},useEffectEvent:function(t){var s=An(),a={impl:t};return s.memoizedState=a,function(){if((dt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},lf={readContext:fn,use:vu,useCallback:p0,useContext:fn,useEffect:ef,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:bu,useRef:o0,useState:function(){return bu(vi)},useDebugValue:tf,useDeferredValue:function(t,s){var a=zt();return y0(a,yt.memoizedState,t,s)},useTransition:function(){var t=bu(vi)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:No(t),s]},useSyncExternalStore:Kg,useId:_0,useHostTransitionStatus:rf,useFormState:r0,useActionState:r0,useOptimistic:function(t,s){var a=zt();return Zg(a,yt,t,s)},useMemoCache:Qh,useCacheRefresh:w0};lf.useEffectEvent=u0;var A0={readContext:fn,use:vu,useCallback:p0,useContext:fn,useEffect:ef,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:Wh,useRef:o0,useState:function(){return Wh(vi)},useDebugValue:tf,useDeferredValue:function(t,s){var a=zt();return yt===null?nf(a,t,s):y0(a,yt.memoizedState,t,s)},useTransition:function(){var t=Wh(vi)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:No(t),s]},useSyncExternalStore:Kg,useId:_0,useHostTransitionStatus:rf,useFormState:l0,useActionState:l0,useOptimistic:function(t,s){var a=zt();return yt!==null?Zg(a,yt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qh,useCacheRefresh:w0};A0.useEffectEvent=u0;function of(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cf={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Xn(),h=ir(o);h.payload=s,a!=null&&(h.callback=a),s=rr(t,h,o),s!==null&&(Ln(s,t,o),wo(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Xn(),h=ir(o);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=rr(t,h,o),s!==null&&(Ln(s,t,o),wo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Xn(),o=ir(a);o.tag=2,s!=null&&(o.callback=s),s=rr(t,o,a),s!==null&&(Ln(s,t,a),wo(s,t,a))}};function j0(t,s,a,o,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!mo(a,o)||!mo(h,m):!0}function C0(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&cf.enqueueReplaceState(s,s.state,null)}function ga(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function R0(t){tu(t)}function I0(t){console.error(t)}function k0(t){tu(t)}function Tu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function D0(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,s,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){Tu(t,s)},a}function M0(t){return t=ir(t),t.tag=3,t}function O0(t,s,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;t.payload=function(){return h(m)},t.callback=function(){D0(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){D0(s,a,o),typeof h!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function Nw(t,s,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Ja(s,a,h,!0),a=Kn.current,a!==null){switch(a.tag){case 31:case 13:return cs===null?Vu():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===du?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Of(t,o,h)),!1;case 22:return a.flags|=65536,o===du?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Of(t,o,h)),!1}throw Error(r(435,a.tag))}return Of(t,o,h),Vu(),!1}if(st)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==jh&&(t=Error(r(422),{cause:o}),yo(rs(t,a)))):(o!==jh&&(s=Error(r(423),{cause:o}),yo(rs(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=rs(o,a),h=uf(t.stateNode,o,h),Uh(t,h),Ot!==4&&(Ot=2)),!1;var m=Error(r(520),{cause:o});if(m=rs(m,a),Vo===null?Vo=[m]:Vo.push(m),Ot!==4&&(Ot=2),s===null)return!0;o=rs(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=uf(a.stateNode,o,t),Uh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(dr===null||!dr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=M0(h),O0(h,t,a,o),Uh(a,h),!1}a=a.return}while(a!==null);return!1}var df=Error(r(461)),Xt=!1;function mn(t,s,a,o){s.child=t===null?Ug(s,null,a,o):ma(s,t.child,a,o)}function V0(t,s,a,o,h){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var w in o)w!=="ref"&&(v[w]=o[w])}else v=o;return ua(s),o=Gh(t,s,a,v,m,h),w=Kh(),t!==null&&!Xt?(Yh(t,s,h),bi(t,s,h)):(st&&w&&Nh(s),s.flags|=1,mn(t,s,o,h),s.child)}function L0(t,s,a,o,h){if(t===null){var m=a.type;return typeof m=="function"&&!Eh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,P0(t,s,m,o,h)):(t=ru(a.type,null,o,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!vf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:mo,a(v,o)&&t.ref===s.ref)return bi(t,s,h)}return s.flags|=1,t=mi(m,o),t.ref=s.ref,t.return=s,s.child=t}function P0(t,s,a,o,h){if(t!==null){var m=t.memoizedProps;if(mo(m,o)&&t.ref===s.ref)if(Xt=!1,s.pendingProps=o=m,vf(t,h))(t.flags&131072)!==0&&(Xt=!0);else return s.lanes=t.lanes,bi(t,s,h)}return hf(t,s,a,o,h)}function U0(t,s,a,o){var h=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~m}else o=0,s.child=null;return z0(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(s,m!==null?m.cachePool:null),m!==null?qg(s,m):Bh(),Hg(s);else return o=s.lanes=536870912,z0(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(cu(s,m.cachePool),qg(s,m),lr(),s.memoizedState=null):(t!==null&&cu(s,null),Bh(),lr());return mn(t,s,h,a),s.child}function Co(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function z0(t,s,a,o,h){var m=Oh();return m=m===null?null:{parent:$t._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&cu(s,null),Bh(),Hg(s),t!==null&&Ja(t,s,o,!0),s.childLanes=h,null}function Su(t,s){return s=Au({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function B0(t,s,a){return ma(s,t.child,null,a),t=Su(s,s.pendingProps),t.flags|=2,Yn(s),s.memoizedState=null,t}function Aw(t,s,a){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(st){if(o.mode==="hidden")return t=Su(s,o),s.lanes=536870912,Co(null,t);if(Hh(s),(t=Nt)?(t=Jy(t,os),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=s,s.child=a,hn=s,Nt=null)):t=null,t===null)throw tr(s);return s.lanes=536870912,null}return Su(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Hh(s),h)if(s.flags&256)s.flags&=-257,s=B0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Xt||Ja(t,s,a,!1),h=(a&t.childLanes)!==0,Xt||h){if(o=wt,o!==null&&(v=Ql(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,aa(t,v),Ln(o,t,v),df;Vu(),s=B0(t,s,a)}else t=m.treeContext,Nt=us(v.nextSibling),hn=s,st=!0,er=null,os=!1,t!==null&&Ag(s,t),s=Su(s,o),s.flags|=4096;return s}return t=mi(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Nu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function hf(t,s,a,o,h){return ua(s),a=Gh(t,s,a,o,void 0,h),o=Kh(),t!==null&&!Xt?(Yh(t,s,h),bi(t,s,h)):(st&&o&&Nh(s),s.flags|=1,mn(t,s,a,h),s.child)}function q0(t,s,a,o,h,m){return ua(s),s.updateQueue=null,a=Gg(s,o,a,h),Fg(t),o=Kh(),t!==null&&!Xt?(Yh(t,s,m),bi(t,s,m)):(st&&o&&Nh(s),s.flags|=1,mn(t,s,a,m),s.child)}function H0(t,s,a,o,h){if(ua(s),s.stateNode===null){var m=Qa,v=a.contextType;typeof v=="object"&&v!==null&&(m=fn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Lh(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?fn(v):Qa,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(of(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&cf.enqueueReplaceState(m,m.state,null),To(s,o,m,h),Eo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,V=ga(a,w);m.props=V;var Q=m.context,ie=a.contextType;v=Qa,typeof ie=="object"&&ie!==null&&(v=fn(ie));var de=a.getDerivedStateFromProps;ie=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||Q!==v)&&C0(s,m,o,v),sr=!1;var Z=s.memoizedState;m.state=Z,To(s,o,m,h),Eo(),Q=s.memoizedState,w||Z!==Q||sr?(typeof de=="function"&&(of(s,a,de,o),Q=s.memoizedState),(V=sr||j0(s,a,V,o,Z,Q,v))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=Q),m.props=o,m.state=Q,m.context=v,o=V):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Ph(t,s),v=s.memoizedProps,ie=ga(a,v),m.props=ie,de=s.pendingProps,Z=m.context,Q=a.contextType,V=Qa,typeof Q=="object"&&Q!==null&&(V=fn(Q)),w=a.getDerivedStateFromProps,(Q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==de||Z!==V)&&C0(s,m,o,V),sr=!1,Z=s.memoizedState,m.state=Z,To(s,o,m,h),Eo();var se=s.memoizedState;v!==de||Z!==se||sr||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof w=="function"&&(of(s,a,w,o),se=s.memoizedState),(ie=sr||j0(s,a,ie,o,Z,se,V)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,se,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,se,V)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=se),m.props=o,m.state=se,m.context=V,o=ie):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Nu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=ma(s,t.child,null,h),s.child=ma(s,null,a,h)):mn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=bi(t,s,h),t}function F0(t,s,a,o){return oa(),s.flags|=256,mn(t,s,a,o),s.child}var ff={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:Dg()}}function pf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Qn),t}function G0(t,s,a){var o=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(st){if(h?ar(s):lr(),(t=Nt)?(t=Jy(t,os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=s,s.child=a,hn=s,Nt=null)):t=null,t===null)throw tr(s);return Wf(t)?s.lanes=32:s.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(lr(),h=s.mode,w=Au({mode:"hidden",children:w},h),o=la(o,h,a,null),w.return=s,o.return=s,w.sibling=o,s.child=w,o=s.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),s.memoizedState=ff,Co(null,o)):(ar(s),gf(s,w))}var V=t.memoizedState;if(V!==null&&(w=V.dehydrated,w!==null)){if(m)s.flags&256?(ar(s),s.flags&=-257,s=yf(t,s,a)):s.memoizedState!==null?(lr(),s.child=t.child,s.flags|=128,s=null):(lr(),w=o.fallback,h=s.mode,o=Au({mode:"visible",children:o.children},h),w=la(w,h,a,null),w.flags|=2,o.return=s,w.return=s,o.sibling=w,s.child=o,ma(s,t.child,null,a),o=s.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),s.memoizedState=ff,s=Co(null,o));else if(ar(s),Wf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var Q=v.dgst;v=Q,o=Error(r(419)),o.stack="",o.digest=v,yo({value:o,source:null,stack:null}),s=yf(t,s,a)}else if(Xt||Ja(t,s,a,!1),v=(a&t.childLanes)!==0,Xt||v){if(v=wt,v!==null&&(o=Ql(v,a),o!==0&&o!==V.retryLane))throw V.retryLane=o,aa(t,o),Ln(v,t,o),df;Xf(w)||Vu(),s=yf(t,s,a)}else Xf(w)?(s.flags|=192,s.child=t.child,s=null):(t=V.treeContext,Nt=us(w.nextSibling),hn=s,st=!0,er=null,os=!1,t!==null&&Ag(s,t),s=gf(s,o.children),s.flags|=4096);return s}return h?(lr(),w=o.fallback,h=s.mode,V=t.child,Q=V.sibling,o=mi(V,{mode:"hidden",children:o.children}),o.subtreeFlags=V.subtreeFlags&65011712,Q!==null?w=mi(Q,w):(w=la(w,h,a,null),w.flags|=2),w.return=s,o.return=s,o.sibling=w,s.child=o,Co(null,o),o=s.child,w=t.child.memoizedState,w===null?w=mf(a):(h=w.cachePool,h!==null?(V=$t._currentValue,h=h.parent!==V?{parent:V,pool:V}:h):h=Dg(),w={baseLanes:w.baseLanes|a,cachePool:h}),o.memoizedState=w,o.childLanes=pf(t,v,a),s.memoizedState=ff,Co(t.child,o)):(ar(s),a=t.child,t=a.sibling,a=mi(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function gf(t,s){return s=Au({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Au(t,s){return t=Gn(22,t,null,s),t.lanes=0,t}function yf(t,s,a){return ma(s,t.child,null,a),t=gf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function K0(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Ih(t.return,s,a)}function xf(t,s,a,o,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function Y0(t,s,a){var o=s.pendingProps,h=o.revealOrder,m=o.tail;o=o.children;var v=Ut.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,I(Ut,v),mn(t,s,o,a),o=st?go:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K0(t,a,s);else if(t.tag===19)K0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&pu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),xf(s,!1,h,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&pu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}xf(s,!0,a,null,m,o);break;case"together":xf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function bi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ur|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ja(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=mi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=mi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function vf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function jw(t,s,a){switch(s.tag){case 3:Ae(s,s.stateNode.containerInfo),nr(s,$t,t.memoizedState.cache),oa();break;case 27:case 5:at(s);break;case 4:Ae(s,s.stateNode.containerInfo);break;case 10:nr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Hh(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ar(s),s.flags|=128,null):(a&s.child.childLanes)!==0?G0(t,s,a):(ar(s),t=bi(t,s,a),t!==null?t.sibling:null);ar(s);break;case 19:var h=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Ja(t,s,a,!1),o=(a&s.childLanes)!==0),h){if(o)return Y0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),I(Ut,Ut.current),o)break;return null;case 22:return s.lanes=0,U0(t,s,a,s.pendingProps);case 24:nr(s,$t,t.memoizedState.cache)}return bi(t,s,a)}function $0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Xt=!0;else{if(!vf(t,a)&&(s.flags&128)===0)return Xt=!1,jw(t,s,a);Xt=(t.flags&131072)!==0}else Xt=!1,st&&(s.flags&1048576)!==0&&Ng(s,go,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=ha(s.elementType),s.type=t,typeof t=="function")Eh(t)?(o=ga(t,o),s.tag=1,s=H0(null,s,t,o,a)):(s.tag=0,s=hf(null,s,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ue){s.tag=11,s=V0(null,s,t,o,a);break e}else if(h===R){s.tag=14,s=L0(null,s,t,o,a);break e}}throw s=ee(t)||t,Error(r(306,s,""))}}return s;case 0:return hf(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,h=ga(o,s.pendingProps),H0(t,s,o,h,a);case 3:e:{if(Ae(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;h=m.element,Ph(t,s),To(s,o,null,a);var v=s.memoizedState;if(o=v.cache,nr(s,$t,o),o!==m.cache&&kh(s,[$t],a,!0),Eo(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=F0(t,s,o,a);break e}else if(o!==h){h=rs(Error(r(424)),s),yo(h),s=F0(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=us(t.firstChild),hn=s,st=!0,er=null,os=!0,a=Ug(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(oa(),o===h){s=bi(t,s,a);break e}mn(t,s,o,a)}s=s.child}return s;case 26:return Nu(t,s),t===null?(a=rx(s.type,null,s.pendingProps,null))?s.memoizedState=a:st||(a=s.type,t=s.pendingProps,o=Hu(ae.current).createElement(a),o[Gt]=s,o[rn]=t,pn(o,a,t),Kt(o),s.stateNode=o):s.memoizedState=rx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return at(s),t===null&&st&&(o=s.stateNode=nx(s.type,s.pendingProps,ae.current),hn=s,os=!0,h=Nt,pr(s.type)?(Zf=h,Nt=us(o.firstChild)):Nt=h),mn(t,s,s.pendingProps.children,a),Nu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&st&&((h=o=Nt)&&(o=iE(o,s.type,s.pendingProps,os),o!==null?(s.stateNode=o,hn=s,Nt=us(o.firstChild),os=!1,h=!0):h=!1),h||tr(s)),at(s),h=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Yf(h,m)?o=null:v!==null&&Yf(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Gh(t,s,vw,null,null,a),Fo._currentValue=h),Nu(t,s),mn(t,s,o,a),s.child;case 6:return t===null&&st&&((t=a=Nt)&&(a=rE(a,s.pendingProps,os),a!==null?(s.stateNode=a,hn=s,Nt=null,t=!0):t=!1),t||tr(s)),null;case 13:return G0(t,s,a);case 4:return Ae(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=ma(s,null,o,a):mn(t,s,o,a),s.child;case 11:return V0(t,s,s.type,s.pendingProps,a);case 7:return mn(t,s,s.pendingProps,a),s.child;case 8:return mn(t,s,s.pendingProps.children,a),s.child;case 12:return mn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,nr(s,s.type,o.value),mn(t,s,o.children,a),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,ua(s),h=fn(h),o=o(h),s.flags|=1,mn(t,s,o,a),s.child;case 14:return L0(t,s,s.type,s.pendingProps,a);case 15:return P0(t,s,s.type,s.pendingProps,a);case 19:return Y0(t,s,a);case 31:return Aw(t,s,a);case 22:return U0(t,s,a,s.pendingProps);case 24:return ua(s),o=fn($t),t===null?(h=Oh(),h===null&&(h=wt,m=Dh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:o,cache:h},Lh(s),nr(s,$t,h)):((t.lanes&a)!==0&&(Ph(t,s),To(s,null,null,a),Eo()),h=t.memoizedState,m=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),nr(s,$t,o)):(o=m.cache,nr(s,$t,o),o!==h.cache&&kh(s,[$t],a,!0))),mn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _i(t){t.flags|=4}function bf(t,s,a,o,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(_y())t.flags|=8192;else throw fa=du,Vh}else t.flags&=-16777217}function Q0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ux(s))if(_y())t.flags|=8192;else throw fa=du,Vh}function ju(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Mc():536870912,t.lanes|=s,dl|=s)}function Ro(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function At(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function Cw(t,s,a){var o=s.pendingProps;switch(Ah(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(s),null;case 1:return At(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),yi($t),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Za(s)?_i(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ch())),At(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(_i(s),m!==null?(At(s),Q0(s,m)):(At(s),bf(s,h,null,o,a))):m?m!==t.memoizedState?(_i(s),At(s),Q0(s,m)):(At(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&_i(s),At(s),bf(s,h,t,o,a)),null;case 27:if(ct(s),a=ae.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return At(s),null}t=j.current,Za(s)?jg(s):(t=nx(h,o,a),s.stateNode=t,_i(s))}return At(s),null;case 5:if(ct(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return At(s),null}if(m=j.current,Za(s))jg(s);else{var v=Hu(ae.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}m[Gt]=s,m[rn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(pn(m,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&_i(s)}}return At(s),bf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=ae.current,Za(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,h=hn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Gt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Gy(t.nodeValue,a)),t||tr(s,!0)}else t=Hu(t).createTextNode(o),t[Gt]=s,s.stateNode=t}return At(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Za(s),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Gt]=s}else oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),t=!1}else a=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Yn(s),s):(Yn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return At(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Za(s),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Gt]=s}else oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),h=!1}else h=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Yn(s),s):(Yn(s),null)}return Yn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),ju(s,s.updateQueue),At(s),null);case 4:return Re(),t===null&&qf(s.stateNode.containerInfo),At(s),null;case 10:return yi(s.type),At(s),null;case 19:if(k(Ut),o=s.memoizedState,o===null)return At(s),null;if(h=(s.flags&128)!==0,m=o.rendering,m===null)if(h)Ro(o,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=pu(t),m!==null){for(s.flags|=128,Ro(o,!1),t=m.updateQueue,s.updateQueue=t,ju(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Eg(a,t),a=a.sibling;return I(Ut,Ut.current&1|2),st&&pi(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&it()>Du&&(s.flags|=128,h=!0,Ro(o,!1),s.lanes=4194304)}else{if(!h)if(t=pu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,ju(s,t),Ro(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!st)return At(s),null}else 2*it()-o.renderingStartTime>Du&&a!==536870912&&(s.flags|=128,h=!0,Ro(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=it(),t.sibling=null,a=Ut.current,I(Ut,h?a&1|2:a&1),st&&pi(s,o.treeForkCount),t):(At(s),null);case 22:case 23:return Yn(s),qh(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(At(s),s.subtreeFlags&6&&(s.flags|=8192)):At(s),a=s.updateQueue,a!==null&&ju(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&k(da),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),yi($t),At(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Rw(t,s){switch(Ah(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return yi($t),Re(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ct(s),null;case 31:if(s.memoizedState!==null){if(Yn(s),s.alternate===null)throw Error(r(340));oa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Yn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));oa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return k(Ut),null;case 4:return Re(),null;case 10:return yi(s.type),null;case 22:case 23:return Yn(s),qh(),t!==null&&k(da),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return yi($t),null;case 25:return null;default:return null}}function X0(t,s){switch(Ah(s),s.tag){case 3:yi($t),Re();break;case 26:case 27:case 5:ct(s);break;case 4:Re();break;case 31:s.memoizedState!==null&&Yn(s);break;case 13:Yn(s);break;case 19:k(Ut);break;case 10:yi(s.type);break;case 22:case 23:Yn(s),qh(),t!==null&&k(da);break;case 24:yi($t)}}function Io(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==h)}}catch(w){pt(s,s.return,w)}}function or(t,s,a){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&t)===t){var v=o.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=s;var V=a,Q=w;try{Q()}catch(ie){pt(h,V,ie)}}}o=o.next}while(o!==m)}}catch(ie){pt(s,s.return,ie)}}function W0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Bg(s,a)}catch(o){pt(t,t.return,o)}}}function Z0(t,s,a){a.props=ga(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){pt(t,s,o)}}function ko(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){pt(t,s,h)}}function Zs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){pt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){pt(t,s,h)}else a.current=null}function J0(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){pt(t,t.return,h)}}function _f(t,s,a){try{var o=t.stateNode;Zw(o,t.type,a,s),o[rn]=s}catch(h){pt(t,t.return,h)}}function ey(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pr(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=bs));else if(o!==4&&(o===27&&pr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ef(t,s,a),t=t.sibling;t!==null;)Ef(t,s,a),t=t.sibling}function Cu(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&pr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,s,a),t=t.sibling;t!==null;)Cu(t,s,a),t=t.sibling}function ty(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);pn(s,o,a),s[Gt]=t,s[rn]=a}catch(m){pt(t,t.return,m)}}var wi=!1,Wt=!1,Tf=!1,ny=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Iw(t,s){if(t=t.containerInfo,Gf=Xu,t=mg(t),gh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,V=-1,Q=0,ie=0,de=t,Z=null;t:for(;;){for(var se;de!==a||h!==0&&de.nodeType!==3||(w=v+h),de!==m||o!==0&&de.nodeType!==3||(V=v+o),de.nodeType===3&&(v+=de.nodeValue.length),(se=de.firstChild)!==null;)Z=de,de=se;for(;;){if(de===t)break t;if(Z===a&&++Q===h&&(w=v),Z===m&&++ie===o&&(V=v),(se=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=se}a=w===-1||V===-1?null:{start:w,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kf={focusedElem:t,selectionRange:a},Xu=!1,ln=s;ln!==null;)if(s=ln,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ln=t;else for(;ln!==null;){switch(s=ln,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var je=ga(a.type,h);t=o.getSnapshotBeforeUpdate(je,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ve){pt(a,a.return,Ve)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,ln=t;break}ln=s.return}}function sy(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(t,a),o&4&&Io(5,a);break;case 1:if(Ti(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){pt(a,a.return,v)}else{var h=ga(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){pt(a,a.return,v)}}o&64&&W0(a),o&512&&ko(a,a.return);break;case 3:if(Ti(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Bg(t,s)}catch(v){pt(a,a.return,v)}}break;case 27:s===null&&o&4&&ty(a);case 26:case 5:Ti(t,a),s===null&&o&4&&J0(a),o&512&&ko(a,a.return);break;case 12:Ti(t,a);break;case 31:Ti(t,a),o&4&&ay(t,a);break;case 13:Ti(t,a),o&4&&ly(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=zw.bind(null,a),aE(t,a))));break;case 22:if(o=a.memoizedState!==null||wi,!o){s=s!==null&&s.memoizedState!==null||Wt,h=wi;var m=Wt;wi=o,(Wt=s)&&!m?Si(t,a,(a.subtreeFlags&8772)!==0):Ti(t,a),wi=h,Wt=m}break;case 30:break;default:Ti(t,a)}}function iy(t){var s=t.alternate;s!==null&&(t.alternate=null,iy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Oa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,Dn=!1;function Ei(t,s,a){for(a=a.child;a!==null;)ry(t,s,a),a=a.sibling}function ry(t,s,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(cn,a)}catch{}switch(a.tag){case 26:Wt||Zs(a,s),Ei(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Wt||Zs(a,s);var o=Rt,h=Dn;pr(a.type)&&(Rt=a.stateNode,Dn=!1),Ei(t,s,a),Bo(a.stateNode),Rt=o,Dn=h;break;case 5:Wt||Zs(a,s);case 6:if(o=Rt,h=Dn,Rt=null,Ei(t,s,a),Rt=o,Dn=h,Rt!==null)if(Dn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(m){pt(a,s,m)}else try{Rt.removeChild(a.stateNode)}catch(m){pt(a,s,m)}break;case 18:Rt!==null&&(Dn?(t=Rt,Wy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),vl(t)):Wy(Rt,a.stateNode));break;case 4:o=Rt,h=Dn,Rt=a.stateNode.containerInfo,Dn=!0,Ei(t,s,a),Rt=o,Dn=h;break;case 0:case 11:case 14:case 15:or(2,a,s),Wt||or(4,a,s),Ei(t,s,a);break;case 1:Wt||(Zs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Z0(a,s,o)),Ei(t,s,a);break;case 21:Ei(t,s,a);break;case 22:Wt=(o=Wt)||a.memoizedState!==null,Ei(t,s,a),Wt=o;break;default:Ei(t,s,a)}}function ay(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{vl(t)}catch(a){pt(s,s.return,a)}}}function ly(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vl(t)}catch(a){pt(s,s.return,a)}}function kw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ny),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ny),s;default:throw Error(r(435,t.tag))}}function Ru(t,s){var a=kw(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var h=Bw.bind(null,t,o);o.then(h,h)}})}function Mn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],m=t,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){Rt=w.stateNode,Dn=!1;break e}break;case 5:Rt=w.stateNode,Dn=!1;break e;case 3:case 4:Rt=w.stateNode.containerInfo,Dn=!0;break e}w=w.return}if(Rt===null)throw Error(r(160));ry(m,v,h),Rt=null,Dn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)oy(s,t),s=s.sibling}var Ns=null;function oy(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(s,t),On(t),o&4&&(or(3,t,t.return),Io(3,t),or(5,t,t.return));break;case 1:Mn(s,t),On(t),o&512&&(Wt||a===null||Zs(a,a.return)),o&64&&wi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ns;if(Mn(s,t),On(t),o&512&&(Wt||a===null||Zs(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ps]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(o),h.head.insertBefore(m,h.querySelector("head > title"))),pn(m,o,a),m[Gt]=t,Kt(m),o=m;break e;case"link":var v=ox("link","href",h).get(o+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(o),pn(m,o,a),h.head.appendChild(m);break;case"meta":if(v=ox("meta","content",h).get(o+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(o),pn(m,o,a),h.head.appendChild(m);break;default:throw Error(r(468,o))}m[Gt]=t,Kt(m),o=m}t.stateNode=o}else cx(h,t.type,t.stateNode);else t.stateNode=lx(h,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?cx(h,t.type,t.stateNode):lx(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&_f(t,t.memoizedProps,a.memoizedProps)}break;case 27:Mn(s,t),On(t),o&512&&(Wt||a===null||Zs(a,a.return)),a!==null&&o&4&&_f(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Mn(s,t),On(t),o&512&&(Wt||a===null||Zs(a,a.return)),t.flags&32){h=t.stateNode;try{kn(h,"")}catch(je){pt(t,t.return,je)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,_f(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Tf=!0);break;case 6:if(Mn(s,t),On(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(je){pt(t,t.return,je)}}break;case 3:if(Ku=null,h=Ns,Ns=Fu(s.containerInfo),Mn(s,t),Ns=h,On(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(s.containerInfo)}catch(je){pt(t,t.return,je)}Tf&&(Tf=!1,cy(t));break;case 4:o=Ns,Ns=Fu(t.stateNode.containerInfo),Mn(s,t),On(t),Ns=o;break;case 12:Mn(s,t),On(t);break;case 31:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 13:Mn(s,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ku=it()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 22:h=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Q=wi,ie=Wt;if(wi=Q||h,Wt=ie||V,Mn(s,t),Wt=ie,wi=Q,On(t),o&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||V||wi||Wt||ya(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(m=V.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=V.stateNode;var de=V.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;w.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(je){pt(V,V.return,je)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(je){pt(V,V.return,je)}}}else if(s.tag===18){if(a===null){V=s;try{var se=V.stateNode;h?Zy(se,!0):Zy(V.stateNode,!1)}catch(je){pt(V,V.return,je)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ru(t,a))));break;case 19:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 30:break;case 21:break;default:Mn(s,t),On(t)}}function On(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(ey(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=wf(t);Cu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(kn(v,""),a.flags&=-33);var w=wf(t);Cu(t,w,v);break;case 3:case 4:var V=a.stateNode.containerInfo,Q=wf(t);Ef(t,Q,V);break;default:throw Error(r(161))}}catch(ie){pt(t,t.return,ie)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function cy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;cy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ti(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sy(t,s.alternate,s),s=s.sibling}function ya(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:or(4,s,s.return),ya(s);break;case 1:Zs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Z0(s,s.return,a),ya(s);break;case 27:Bo(s.stateNode);case 26:case 5:Zs(s,s.return),ya(s);break;case 22:s.memoizedState===null&&ya(s);break;case 30:ya(s);break;default:ya(s)}t=t.sibling}}function Si(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Si(h,m,a),Io(4,m);break;case 1:if(Si(h,m,a),o=m,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Q){pt(o,o.return,Q)}if(o=m,h=o.updateQueue,h!==null){var w=o.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)zg(V[h],w)}catch(Q){pt(o,o.return,Q)}}a&&v&64&&W0(m),ko(m,m.return);break;case 27:ty(m);case 26:case 5:Si(h,m,a),a&&o===null&&v&4&&J0(m),ko(m,m.return);break;case 12:Si(h,m,a);break;case 31:Si(h,m,a),a&&v&4&&ay(h,m);break;case 13:Si(h,m,a),a&&v&4&&ly(h,m);break;case 22:m.memoizedState===null&&Si(h,m,a),ko(m,m.return);break;case 30:break;default:Si(h,m,a)}s=s.sibling}}function Sf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&xo(a))}function Nf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&xo(t))}function As(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uy(t,s,a,o),s=s.sibling}function uy(t,s,a,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:As(t,s,a,o),h&2048&&Io(9,s);break;case 1:As(t,s,a,o);break;case 3:As(t,s,a,o),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&xo(t)));break;case 12:if(h&2048){As(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){pt(s,s.return,V)}}else As(t,s,a,o);break;case 31:As(t,s,a,o);break;case 13:As(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?As(t,s,a,o):Do(t,s):m._visibility&2?As(t,s,a,o):(m._visibility|=2,ol(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Sf(v,s);break;case 24:As(t,s,a,o),h&2048&&Nf(s.alternate,s);break;default:As(t,s,a,o)}}function ol(t,s,a,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,w=a,V=o,Q=v.flags;switch(v.tag){case 0:case 11:case 15:ol(m,v,w,V,h),Io(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?ol(m,v,w,V,h):Do(m,v):(ie._visibility|=2,ol(m,v,w,V,h)),h&&Q&2048&&Sf(v.alternate,v);break;case 24:ol(m,v,w,V,h),h&&Q&2048&&Nf(v.alternate,v);break;default:ol(m,v,w,V,h)}s=s.sibling}}function Do(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,h=o.flags;switch(o.tag){case 22:Do(a,o),h&2048&&Sf(o.alternate,o);break;case 24:Do(a,o),h&2048&&Nf(o.alternate,o);break;default:Do(a,o)}s=s.sibling}}var Mo=8192;function cl(t,s,a){if(t.subtreeFlags&Mo)for(t=t.child;t!==null;)dy(t,s,a),t=t.sibling}function dy(t,s,a){switch(t.tag){case 26:cl(t,s,a),t.flags&Mo&&t.memoizedState!==null&&xE(a,Ns,t.memoizedState,t.memoizedProps);break;case 5:cl(t,s,a);break;case 3:case 4:var o=Ns;Ns=Fu(t.stateNode.containerInfo),cl(t,s,a),Ns=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Mo,Mo=16777216,cl(t,s,a),Mo=o):cl(t,s,a));break;default:cl(t,s,a)}}function hy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Oo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ln=o,my(o,t)}hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fy(t),t=t.sibling}function fy(t){switch(t.tag){case 0:case 11:case 15:Oo(t),t.flags&2048&&or(9,t,t.return);break;case 3:Oo(t);break;case 12:Oo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Iu(t)):Oo(t);break;default:Oo(t)}}function Iu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ln=o,my(o,t)}hy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:or(8,s,s.return),Iu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Iu(s));break;default:Iu(s)}t=t.sibling}}function my(t,s){for(;ln!==null;){var a=ln;switch(a.tag){case 0:case 11:case 15:or(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ln=o;else e:for(a=t;ln!==null;){o=ln;var h=o.sibling,m=o.return;if(iy(o),o===a){ln=null;break e}if(h!==null){h.return=m,ln=h;break e}ln=m}}}var Dw={getCacheForType:function(t){var s=fn($t),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return fn($t).controller.signal}},Mw=typeof WeakMap=="function"?WeakMap:Map,dt=0,wt=null,Xe=null,Ze=0,mt=0,$n=null,cr=!1,ul=!1,Af=!1,Ni=0,Ot=0,ur=0,xa=0,jf=0,Qn=0,dl=0,Vo=null,Vn=null,Cf=!1,ku=0,py=0,Du=1/0,Mu=null,dr=null,nn=0,hr=null,hl=null,Ai=0,Rf=0,If=null,gy=null,Lo=0,kf=null;function Xn(){return(dt&2)!==0&&Ze!==0?Ze&-Ze:K.T!==null?Pf():Oc()}function yy(){if(Qn===0)if((Ze&536870912)===0||st){var t=Gr;Gr<<=1,(Gr&3932160)===0&&(Gr=262144),Qn=t}else Qn=536870912;return t=Kn.current,t!==null&&(t.flags|=32),Qn}function Ln(t,s,a){(t===wt&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(fl(t,0),fr(t,Ze,Qn,!1)),Kr(t,a),((dt&2)===0||t!==wt)&&(t===wt&&((dt&2)===0&&(xa|=a),Ot===4&&fr(t,Ze,Qn,!1)),Js(t))}function xy(t,s,a){if((dt&6)!==0)throw Error(r(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ys(t,s),h=o?Lw(t,s):Mf(t,s,!0),m=o;do{if(h===0){ul&&!o&&fr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!Ow(a)){h=Mf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=t;h=Vo;var V=w.current.memoizedState.isDehydrated;if(V&&(fl(w,v).flags|=256),v=Mf(w,v,!1),v!==2){if(Af&&!V){w.errorRecoveryDisabledLanes|=m,xa|=m,h=4;break e}m=Vn,Vn=h,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){fl(t,0),fr(t,s,0,!0);break}e:{switch(o=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:fr(o,s,Qn,!cr);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=ku+300-it(),10<h)){if(fr(o,s,Qn,!cr),Os(o,0,!0)!==0)break e;Ai=s,o.timeoutHandle=Qy(vy.bind(null,o,a,Vn,Mu,Cf,s,Qn,xa,dl,cr,m,"Throttled",-0,0),h);break e}vy(o,a,Vn,Mu,Cf,s,Qn,xa,dl,cr,m,null,-0,0)}}break}while(!0);Js(t)}function vy(t,s,a,o,h,m,v,w,V,Q,ie,de,Z,se){if(t.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bs},dy(s,m,de);var je=(m&62914560)===m?ku-it():(m&4194048)===m?py-it():0;if(je=vE(de,je),je!==null){Ai=m,t.cancelPendingCommit=je(Ay.bind(null,t,s,m,a,o,h,v,w,V,ie,de,null,Z,se)),fr(t,m,v,!Q);return}}Ay(t,s,m,a,o,h,v,w,V)}function Ow(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],m=h.getSnapshot;h=h.value;try{if(!Fn(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fr(t,s,a,o){s&=~jf,s&=~xa,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var h=s;0<h;){var m=31-_t(h),v=1<<m;o[m]=-1,h&=~v}a!==0&&Yr(t,a,s)}function Ou(){return(dt&6)===0?(Po(0),!1):!0}function Df(){if(Xe!==null){if(mt===0)var t=Xe.return;else t=Xe,gi=ca=null,$h(t),sl=null,bo=0,t=Xe;for(;t!==null;)X0(t.alternate,t),t=t.return;Xe=null}}function fl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,tE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ai=0,Df(),wt=t,Xe=a=mi(t.current,null),Ze=s,mt=0,$n=null,cr=!1,ul=ys(t,s),Af=!1,dl=Qn=jf=xa=ur=Ot=0,Vn=Vo=null,Cf=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var h=31-_t(o),m=1<<h;s|=t[h],o&=~m}return Ni=s,nu(),a}function by(t,s){Ge=null,K.H=jo,s===nl||s===uu?(s=Vg(),mt=3):s===Vh?(s=Vg(),mt=4):mt=s===df?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,Xe===null&&(Ot=1,Tu(t,rs(s,t.current)))}function _y(){var t=Kn.current;return t===null?!0:(Ze&4194048)===Ze?cs===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?t===cs:!1}function wy(){var t=K.H;return K.H=jo,t===null?jo:t}function Ey(){var t=K.A;return K.A=Dw,t}function Vu(){Ot=4,cr||(Ze&4194048)!==Ze&&Kn.current!==null||(ul=!0),(ur&134217727)===0&&(xa&134217727)===0||wt===null||fr(wt,Ze,Qn,!1)}function Mf(t,s,a){var o=dt;dt|=2;var h=wy(),m=Ey();(wt!==t||Ze!==s)&&(Mu=null,fl(t,s)),s=!1;var v=Ot;e:do try{if(mt!==0&&Xe!==null){var w=Xe,V=$n;switch(mt){case 8:Df(),v=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var Q=mt;if(mt=0,$n=null,ml(t,w,V,Q),a&&ul){v=0;break e}break;default:Q=mt,mt=0,$n=null,ml(t,w,V,Q)}}Vw(),v=Ot;break}catch(ie){by(t,ie)}while(!0);return s&&t.shellSuspendCounter++,gi=ca=null,dt=o,K.H=h,K.A=m,Xe===null&&(wt=null,Ze=0,nu()),v}function Vw(){for(;Xe!==null;)Ty(Xe)}function Lw(t,s){var a=dt;dt|=2;var o=wy(),h=Ey();wt!==t||Ze!==s?(Mu=null,Du=it()+500,fl(t,s)):ul=ys(t,s);e:do try{if(mt!==0&&Xe!==null){s=Xe;var m=$n;t:switch(mt){case 1:mt=0,$n=null,ml(t,s,m,1);break;case 2:case 9:if(Mg(m)){mt=0,$n=null,Sy(s);break}s=function(){mt!==2&&mt!==9||wt!==t||(mt=7),Js(t)},m.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Mg(m)?(mt=0,$n=null,Sy(s)):(mt=0,$n=null,ml(t,s,m,7));break;case 5:var v=null;switch(Xe.tag){case 26:v=Xe.memoizedState;case 5:case 27:var w=Xe;if(v?ux(v):w.stateNode.complete){mt=0,$n=null;var V=w.sibling;if(V!==null)Xe=V;else{var Q=w.return;Q!==null?(Xe=Q,Lu(Q)):Xe=null}break t}}mt=0,$n=null,ml(t,s,m,5);break;case 6:mt=0,$n=null,ml(t,s,m,6);break;case 8:Df(),Ot=6;break e;default:throw Error(r(462))}}Pw();break}catch(ie){by(t,ie)}while(!0);return gi=ca=null,K.H=o,K.A=h,dt=a,Xe!==null?0:(wt=null,Ze=0,nu(),Ot)}function Pw(){for(;Xe!==null&&!Te();)Ty(Xe)}function Ty(t){var s=$0(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,s===null?Lu(t):Xe=s}function Sy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=q0(a,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=q0(a,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:$h(s);default:X0(a,s),s=Xe=Eg(s,Ni),s=$0(a,s,Ni)}t.memoizedProps=t.pendingProps,s===null?Lu(t):Xe=s}function ml(t,s,a,o){gi=ca=null,$h(s),sl=null,bo=0;var h=s.return;try{if(Nw(t,h,s,a,Ze)){Ot=1,Tu(t,rs(a,t.current)),Xe=null;return}}catch(m){if(h!==null)throw Xe=h,m;Ot=1,Tu(t,rs(a,t.current)),Xe=null;return}s.flags&32768?(st||o===1?t=!0:ul||(Ze&536870912)!==0?t=!1:(cr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Kn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ny(s,t)):Lu(s)}function Lu(t){var s=t;do{if((s.flags&32768)!==0){Ny(s,cr);return}t=s.return;var a=Cw(s.alternate,s,Ni);if(a!==null){Xe=a;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=t}while(s!==null);Ot===0&&(Ot=5)}function Ny(t,s){do{var a=Rw(t.alternate,t);if(a!==null){a.flags&=32767,Xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Xe=t;return}Xe=t=a}while(t!==null);Ot=6,Xe=null}function Ay(t,s,a,o,h,m,v,w,V){t.cancelPendingCommit=null;do Pu();while(nn!==0);if((dt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=_h,hh(t,a,m,v,w,V),t===wt&&(Xe=wt=null,Ze=0),hl=s,hr=t,Ai=a,Rf=m,If=h,gy=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,qw(bn,function(){return ky(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=pe.p,pe.p=2,v=dt,dt|=4;try{Iw(t,s,a)}finally{dt=v,pe.p=h,K.T=o}}nn=1,jy(),Cy(),Ry()}}function jy(){if(nn===1){nn=0;var t=hr,s=hl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=pe.p;pe.p=2;var h=dt;dt|=4;try{oy(s,t);var m=Kf,v=mg(t.containerInfo),w=m.focusedElem,V=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&fg(w.ownerDocument.documentElement,w)){if(V!==null&&gh(w)){var Q=V.start,ie=V.end;if(ie===void 0&&(ie=Q),"selectionStart"in w)w.selectionStart=Q,w.selectionEnd=Math.min(ie,w.value.length);else{var de=w.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var se=Z.getSelection(),je=w.textContent.length,Ve=Math.min(V.start,je),vt=V.end===void 0?Ve:Math.min(V.end,je);!se.extend&&Ve>vt&&(v=vt,vt=Ve,Ve=v);var B=hg(w,Ve),U=hg(w,vt);if(B&&U&&(se.rangeCount!==1||se.anchorNode!==B.node||se.anchorOffset!==B.offset||se.focusNode!==U.node||se.focusOffset!==U.offset)){var Y=de.createRange();Y.setStart(B.node,B.offset),se.removeAllRanges(),Ve>vt?(se.addRange(Y),se.extend(U.node,U.offset)):(Y.setEnd(U.node,U.offset),se.addRange(Y))}}}}for(de=[],se=w;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<de.length;w++){var le=de[w];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Xu=!!Gf,Kf=Gf=null}finally{dt=h,pe.p=o,K.T=a}}t.current=s,nn=2}}function Cy(){if(nn===2){nn=0;var t=hr,s=hl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=pe.p;pe.p=2;var h=dt;dt|=4;try{sy(t,s.alternate,s)}finally{dt=h,pe.p=o,K.T=a}}nn=3}}function Ry(){if(nn===4||nn===3){nn=0,$e();var t=hr,s=hl,a=Ai,o=gy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,hl=hr=null,Iy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(dr=null),ui(a),s=s.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(cn,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=K.T,h=pe.p,pe.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var w=o[v];m(w.value,{componentStack:w.stack})}}finally{K.T=s,pe.p=h}}(Ai&3)!==0&&Pu(),Js(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===kf?Lo++:(Lo=0,kf=t):Lo=0,Po(0)}}function Iy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,xo(s)))}function Pu(){return jy(),Cy(),Ry(),ky()}function ky(){if(nn!==5)return!1;var t=hr,s=Rf;Rf=0;var a=ui(Ai),o=K.T,h=pe.p;try{pe.p=32>a?32:a,K.T=null,a=If,If=null;var m=hr,v=Ai;if(nn=0,hl=hr=null,Ai=0,(dt&6)!==0)throw Error(r(331));var w=dt;if(dt|=4,fy(m.current),uy(m,m.current,v,a),dt=w,Po(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(cn,m)}catch{}return!0}finally{pe.p=h,K.T=o,Iy(t,s)}}function Dy(t,s,a){s=rs(a,s),s=uf(t.stateNode,s,2),t=rr(t,s,2),t!==null&&(Kr(t,2),Js(t))}function pt(t,s,a){if(t.tag===3)Dy(t,t,a);else for(;s!==null;){if(s.tag===3){Dy(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(dr===null||!dr.has(o))){t=rs(a,t),a=M0(2),o=rr(s,a,2),o!==null&&(O0(a,o,s,t),Kr(o,2),Js(o));break}}s=s.return}}function Of(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Mw;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(a)||(Af=!0,h.add(a),t=Uw.bind(null,t,s,a),s.then(t,t))}function Uw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,wt===t&&(Ze&a)===a&&(Ot===4||Ot===3&&(Ze&62914560)===Ze&&300>it()-ku?(dt&2)===0&&fl(t,0):jf|=a,dl===Ze&&(dl=0)),Js(t)}function My(t,s){s===0&&(s=Mc()),t=aa(t,s),t!==null&&(Kr(t,s),Js(t))}function zw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),My(t,a)}function Bw(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),My(t,a)}function qw(t,s){return Ie(t,s)}var Uu=null,pl=null,Vf=!1,zu=!1,Lf=!1,mr=0;function Js(t){t!==pl&&t.next===null&&(pl===null?Uu=pl=t:pl=pl.next=t),zu=!0,Vf||(Vf=!0,Fw())}function Po(t,s){if(!Lf&&zu){Lf=!0;do for(var a=!1,o=Uu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var m=0;else{var v=o.suspendedLanes,w=o.pingedLanes;m=(1<<31-_t(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Py(o,m))}else m=Ze,m=Os(o,o===wt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ys(o,m)||(a=!0,Py(o,m));o=o.next}while(a);Lf=!1}}function Hw(){Oy()}function Oy(){zu=Vf=!1;var t=0;mr!==0&&eE()&&(t=mr);for(var s=it(),a=null,o=Uu;o!==null;){var h=o.next,m=Vy(o,s);m===0?(o.next=null,a===null?Uu=h:a.next=h,h===null&&(pl=a)):(a=o,(t!==0||(m&3)!==0)&&(zu=!0)),o=h}nn!==0&&nn!==5||Po(t),mr!==0&&(mr=0)}function Vy(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-_t(m),w=1<<v,V=h[v];V===-1?((w&a)===0||(w&o)!==0)&&(h[v]=dh(w,s)):V<=s&&(t.expiredLanes|=w),m&=~w}if(s=wt,a=Ze,a=Os(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&X(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ys(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&X(o),ui(a)){case 2:case 8:a=Tt;break;case 32:a=bn;break;case 268435456:a=qi;break;default:a=bn}return o=Ly.bind(null,t),a=Ie(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&X(o),t.callbackPriority=2,t.callbackNode=null,2}function Ly(t,s){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pu()&&t.callbackNode!==a)return null;var o=Ze;return o=Os(t,t===wt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(xy(t,o,s),Vy(t,it()),t.callbackNode!=null&&t.callbackNode===a?Ly.bind(null,t):null)}function Py(t,s){if(Pu())return null;xy(t,s,!0)}function Fw(){nE(function(){(dt&6)!==0?Ie(Be,Hw):Oy()})}function Pf(){if(mr===0){var t=el;t===0&&(t=Ds,Ds<<=1,(Ds&261888)===0&&(Ds=256)),mr=t}return mr}function Uy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ua(""+t)}function zy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Gw(t,s,a,o,h){if(s==="submit"&&a&&a.stateNode===h){var m=Uy((h[rn]||null).action),v=o.submitter;v&&(s=(s=v[rn]||null)?Uy(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Ks("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(mr!==0){var V=v?zy(h,v):new FormData(h);sf(a,{pending:!0,data:V,method:h.method,action:m},null,V)}}else typeof m=="function"&&(w.preventDefault(),V=v?zy(h,v):new FormData(h),sf(a,{pending:!0,data:V,method:h.method,action:m},m,V))},currentTarget:h}]})}}for(var Uf=0;Uf<bh.length;Uf++){var zf=bh[Uf],Kw=zf.toLowerCase(),Yw=zf[0].toUpperCase()+zf.slice(1);Ss(Kw,"on"+Yw)}Ss(yg,"onAnimationEnd"),Ss(xg,"onAnimationIteration"),Ss(vg,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(cw,"onTransitionRun"),Ss(uw,"onTransitionStart"),Ss(dw,"onTransitionCancel"),Ss(bg,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uo));function By(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var w=o[v],V=w.instance,Q=w.currentTarget;if(w=w.listener,V!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=Q;try{m(h)}catch(ie){tu(ie)}h.currentTarget=null,m=V}else for(v=0;v<o.length;v++){if(w=o[v],V=w.instance,Q=w.currentTarget,w=w.listener,V!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=Q;try{m(h)}catch(ie){tu(ie)}h.currentTarget=null,m=V}}}}function We(t,s){var a=s[Ma];a===void 0&&(a=s[Ma]=new Set);var o=t+"__bubble";a.has(o)||(qy(s,t,2,!1),a.add(o))}function Bf(t,s,a){var o=0;s&&(o|=4),qy(a,t,o,s)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Bu]){t[Bu]=!0,Xl.forEach(function(a){a!=="selectionchange"&&($w.has(a)||Bf(a,!1,t),Bf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Bu]||(s[Bu]=!0,Bf("selectionchange",!1,s))}}function qy(t,s,a,o){switch(yx(s)){case 2:var h=wE;break;case 8:h=EE;break;default:h=sm}a=h.bind(null,s,a,t),h=void 0,!Zr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Hf(t,s,a,o,h){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var w=o.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=o.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Us(w),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){o=m=v;continue e}w=w.parentNode}}o=o.return}Qi(function(){var Q=m,ie=ts(a),de=[];e:{var Z=_g.get(t);if(Z!==void 0){var se=Ks,je=t;switch(t){case"keypress":if(ea(a)===0)break e;case"keydown":case"keyup":se=Zc;break;case"focusin":je="focus",se=na;break;case"focusout":je="blur",se=na;break;case"beforeblur":case"afterblur":se=na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=g;break;case yg:case xg:case vg:se=Gc;break;case bg:se=T;break;case"scroll":case"scrollend":se=oo;break;case"wheel":se=te;break;case"copy":case"cut":case"paste":se=Kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=fi;break;case"toggle":case"beforetoggle":se=Fe}var Ve=(s&4)!==0,vt=!Ve&&(t==="scroll"||t==="scrollend"),B=Ve?Z!==null?Z+"Capture":null:Z;Ve=[];for(var U=Q,Y;U!==null;){var le=U;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||B===null||(le=_s(U,B),le!=null&&Ve.push(zo(U,le,Y))),vt)break;U=U.return}0<Ve.length&&(Z=new se(Z,je,null,a,ie),de.push({event:Z,listeners:Ve}))}}if((s&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",Z&&a!==ro&&(je=a.relatedTarget||a.fromElement)&&(Us(je)||je[Ls]))break e;if((se||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,se?(je=a.relatedTarget||a.toElement,se=Q,je=je?Us(je):null,je!==null&&(vt=u(je),Ve=je.tag,je!==vt||Ve!==5&&Ve!==27&&Ve!==6)&&(je=null)):(se=null,je=Q),se!==je)){if(Ve=co,le="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=fi,le="onPointerLeave",B="onPointerEnter",U="pointer"),vt=se==null?Z:qn(se),Y=je==null?Z:qn(je),Z=new Ve(le,U+"leave",se,a,ie),Z.target=vt,Z.relatedTarget=Y,le=null,Us(ie)===Q&&(Ve=new Ve(B,U+"enter",je,a,ie),Ve.target=Y,Ve.relatedTarget=vt,le=Ve),vt=le,se&&je)t:{for(Ve=Qw,B=se,U=je,Y=0,le=B;le;le=Ve(le))Y++;le=0;for(var ke=U;ke;ke=Ve(ke))le++;for(;0<Y-le;)B=Ve(B),Y--;for(;0<le-Y;)U=Ve(U),le--;for(;Y--;){if(B===U||U!==null&&B===U.alternate){Ve=B;break t}B=Ve(B),U=Ve(U)}Ve=null}else Ve=null;se!==null&&Hy(de,Z,se,Ve,!1),je!==null&&vt!==null&&Hy(de,vt,je,Ve,!0)}}e:{if(Z=Q?qn(Q):window,se=Z.nodeName&&Z.nodeName.toLowerCase(),se==="select"||se==="input"&&Z.type==="file")var lt=ag;else if(ig(Z))if(lg)lt=aw;else{lt=iw;var Ce=sw}else se=Z.nodeName,!se||se.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Pa(Q.elementType)&&(lt=ag):lt=rw;if(lt&&(lt=lt(t,Q))){rg(de,lt,a,ie);break e}Ce&&Ce(t,Z,Q),t==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&no(Z,"number",Z.value)}switch(Ce=Q?qn(Q):window,t){case"focusin":(ig(Ce)||Ce.contentEditable==="true")&&(Ka=Ce,yh=Q,po=null);break;case"focusout":po=yh=Ka=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,pg(de,a,ie);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":pg(de,a,ie)}var Ye;if(ut)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ga?sa(t,a)&&(Je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Qs&&a.locale!=="ko"&&(Ga||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ga&&(Ye=lo()):(Gs=ie,ao="value"in Gs?Gs.value:Gs.textContent,Ga=!0)),Ce=qu(Q,Je),0<Ce.length&&(Je=new $s(Je,t,null,a,ie),de.push({event:Je,listeners:Ce}),Ye?Je.data=Ye:(Ye=Fa(a),Ye!==null&&(Je.data=Ye)))),(Ye=ss?J1(t,a):ew(t,a))&&(Je=qu(Q,"onBeforeInput"),0<Je.length&&(Ce=new $s("onBeforeInput","beforeinput",null,a,ie),de.push({event:Ce,listeners:Je}),Ce.data=Ye)),Gw(de,t,Q,a,ie)}By(de,s)})}function zo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function qu(t,s){for(var a=s+"Capture",o=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=_s(t,a),h!=null&&o.unshift(zo(t,h,m)),h=_s(t,s),h!=null&&o.push(zo(t,h,m))),t.tag===3)return o;t=t.return}return[]}function Qw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Hy(t,s,a,o,h){for(var m=s._reactName,v=[];a!==null&&a!==o;){var w=a,V=w.alternate,Q=w.stateNode;if(w=w.tag,V!==null&&V===o)break;w!==5&&w!==26&&w!==27||Q===null||(V=Q,h?(Q=_s(a,m),Q!=null&&v.unshift(zo(a,Q,V))):h||(Q=_s(a,m),Q!=null&&v.push(zo(a,Q,V)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Xw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function Fy(t){return(typeof t=="string"?t:""+t).replace(Xw,`
`).replace(Ww,"")}function Gy(t,s){return s=Fy(s),Fy(t)===s}function xt(t,s,a,o,h,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||kn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&kn(t,""+o);break;case"className":Hn(t,"class",o);break;case"tabIndex":Hn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,a,o);break;case"style":io(t,o,m);break;case"data":if(s!=="object"){Hn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ua(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&xt(t,s,"name",h.name,h,null),xt(t,s,"formEncType",h.formEncType,h,null),xt(t,s,"formMethod",h.formMethod,h,null),xt(t,s,"formTarget",h.formTarget,h,null)):(xt(t,s,"encType",h.encType,h,null),xt(t,s,"method",h.method,h,null),xt(t,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ua(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=bs);break;case"onScroll":o!=null&&We("scroll",t);break;case"onScrollEnd":o!=null&&We("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Ua(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":We("beforetoggle",t),We("toggle",t),Va(t,"popover",o);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Va(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qc.get(a)||a,Va(t,a,o))}}function Ff(t,s,a,o,h,m){switch(a){case"style":io(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?kn(t,o):(typeof o=="number"||typeof o=="bigint")&&kn(t,""+o);break;case"onScroll":o!=null&&We("scroll",t);break;case"onScrollEnd":o!=null&&We("scrollend",t);break;case"onClick":o!=null&&(t.onclick=bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[rn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Va(t,a,o)}}}function pn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",t),We("load",t);var o=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(t,s,m,v,a,null)}}h&&xt(t,s,"srcSet",a.srcSet,a,null),o&&xt(t,s,"src",a.src,a,null);return;case"input":We("invalid",t);var w=m=v=h=null,V=null,Q=null;for(o in a)if(a.hasOwnProperty(o)){var ie=a[o];if(ie!=null)switch(o){case"name":h=ie;break;case"type":v=ie;break;case"checked":V=ie;break;case"defaultChecked":Q=ie;break;case"value":m=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:xt(t,s,o,ie,a,null)}}Uc(t,m,w,V,Q,v,h,!1);return;case"select":We("invalid",t),o=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":o=w;default:xt(t,s,h,w,a,null)}s=m,a=v,t.multiple=!!o,s!=null?Gi(t,!!o,s,!1):a!=null&&Gi(t,!!o,a,!0);return;case"textarea":We("invalid",t),m=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":o=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:xt(t,s,v,w,a,null)}Ki(t,o,h,m);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(o=a[V],o!=null))switch(V){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:xt(t,s,V,o,a,null)}return;case"dialog":We("beforetoggle",t),We("toggle",t),We("cancel",t),We("close",t);break;case"iframe":case"object":We("load",t);break;case"video":case"audio":for(o=0;o<Uo.length;o++)We(Uo[o],t);break;case"image":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"embed":case"source":case"link":We("error",t),We("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(o=a[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(t,s,Q,o,a,null)}return;default:if(Pa(s)){for(ie in a)a.hasOwnProperty(ie)&&(o=a[ie],o!==void 0&&Ff(t,s,ie,o,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(o=a[w],o!=null&&xt(t,s,w,o,a,null))}function Zw(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,V=null,Q=null,ie=null;for(se in a){var de=a[se];if(a.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":V=de;default:o.hasOwnProperty(se)||xt(t,s,se,null,o,de)}}for(var Z in o){var se=o[Z];if(de=a[Z],o.hasOwnProperty(Z)&&(se!=null||de!=null))switch(Z){case"type":m=se;break;case"name":h=se;break;case"checked":Q=se;break;case"defaultChecked":ie=se;break;case"value":v=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:se!==de&&xt(t,s,Z,se,o,de)}}La(t,v,w,V,Q,ie,m,h);return;case"select":se=v=w=Z=null;for(m in a)if(V=a[m],a.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":se=V;default:o.hasOwnProperty(m)||xt(t,s,m,null,o,V)}for(h in o)if(m=o[h],V=a[h],o.hasOwnProperty(h)&&(m!=null||V!=null))switch(h){case"value":Z=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==V&&xt(t,s,h,m,o,V)}s=w,a=v,o=se,Z!=null?Gi(t,!!a,Z,!1):!!o!=!!a&&(s!=null?Gi(t,!!a,s,!0):Gi(t,!!a,a?[]:"",!1));return;case"textarea":se=Z=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:xt(t,s,w,null,o,h)}for(v in o)if(h=o[v],m=a[v],o.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":Z=h;break;case"defaultValue":se=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&xt(t,s,v,h,o,m)}zc(t,Z,se);return;case"option":for(var je in a)if(Z=a[je],a.hasOwnProperty(je)&&Z!=null&&!o.hasOwnProperty(je))switch(je){case"selected":t.selected=!1;break;default:xt(t,s,je,null,o,Z)}for(V in o)if(Z=o[V],se=a[V],o.hasOwnProperty(V)&&Z!==se&&(Z!=null||se!=null))switch(V){case"selected":t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:xt(t,s,V,Z,o,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in a)Z=a[Ve],a.hasOwnProperty(Ve)&&Z!=null&&!o.hasOwnProperty(Ve)&&xt(t,s,Ve,null,o,Z);for(Q in o)if(Z=o[Q],se=a[Q],o.hasOwnProperty(Q)&&Z!==se&&(Z!=null||se!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:xt(t,s,Q,Z,o,se)}return;default:if(Pa(s)){for(var vt in a)Z=a[vt],a.hasOwnProperty(vt)&&Z!==void 0&&!o.hasOwnProperty(vt)&&Ff(t,s,vt,void 0,o,Z);for(ie in o)Z=o[ie],se=a[ie],!o.hasOwnProperty(ie)||Z===se||Z===void 0&&se===void 0||Ff(t,s,ie,Z,o,se);return}}for(var B in a)Z=a[B],a.hasOwnProperty(B)&&Z!=null&&!o.hasOwnProperty(B)&&xt(t,s,B,null,o,Z);for(de in o)Z=o[de],se=a[de],!o.hasOwnProperty(de)||Z===se||Z==null&&se==null||xt(t,s,de,Z,o,se)}function Ky(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&Ky(v)){for(v=0,w=h.responseEnd,o+=1;o<a.length;o++){var V=a[o],Q=V.startTime;if(Q>w)break;var ie=V.transferSize,de=V.initiatorType;ie&&Ky(de)&&(V=V.responseEnd,v+=ie*(V<w?1:(w-Q)/(V-Q)))}if(--o,s+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gf=null,Kf=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function Yy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $y(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Yf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function eE(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var Qy=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(sE)}:Qy;function sE(t){setTimeout(function(){throw t})}function pr(t){return t==="head"}function Wy(t,s){var a=s,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),vl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Bo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Bo(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Ps]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Bo(t.ownerDocument.body);a=h}while(a);vl(s)}function Zy(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Qf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qf(a),Oa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iE(t,s,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ps])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=us(t.nextSibling),t===null)break}return null}function rE(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=us(t.nextSibling),t===null))return null;return t}function Jy(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=us(t.nextSibling),t===null))return null;return t}function Xf(t){return t.data==="$?"||t.data==="$~"}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function aE(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function us(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Zf=null;function ex(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return us(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function tx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function nx(t,s,a){switch(s=Hu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Bo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Oa(t)}var ds=new Map,sx=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ji=pe.d;pe.d={f:lE,r:oE,D:cE,C:uE,L:dE,m:hE,X:mE,S:fE,M:pE};function lE(){var t=ji.f(),s=Ou();return t||s}function oE(t){var s=es(t);s!==null&&s.tag===5&&s.type==="form"?b0(s):ji.r(t)}var gl=typeof document>"u"?null:document;function ix(t,s,a){var o=gl;if(o&&typeof s=="string"&&s){var h=In(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),sx.has(h)||(sx.add(h),t={rel:t,crossOrigin:a,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),pn(s,"link",t),Kt(s),o.head.appendChild(s)))}}function cE(t){ji.D(t),ix("dns-prefetch",t,null)}function uE(t,s){ji.C(t,s),ix("preconnect",t,s)}function dE(t,s,a){ji.L(t,s,a);var o=gl;if(o&&t&&s){var h='link[rel="preload"][as="'+In(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+In(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+In(a.imageSizes)+'"]')):h+='[href="'+In(t)+'"]';var m=h;switch(s){case"style":m=yl(t);break;case"script":m=xl(t)}ds.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ds.set(m,t),o.querySelector(h)!==null||s==="style"&&o.querySelector(qo(m))||s==="script"&&o.querySelector(Ho(m))||(s=o.createElement("link"),pn(s,"link",t),Kt(s),o.head.appendChild(s)))}}function hE(t,s){ji.m(t,s);var a=gl;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+In(o)+'"][href="'+In(t)+'"]',m=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xl(t)}if(!ds.has(m)&&(t=E({rel:"modulepreload",href:t},s),ds.set(m,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ho(m)))return}o=a.createElement("link"),pn(o,"link",t),Kt(o),a.head.appendChild(o)}}}function fE(t,s,a){ji.S(t,s,a);var o=gl;if(o&&t){var h=zs(o).hoistableStyles,m=yl(t);s=s||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=o.querySelector(qo(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ds.get(m))&&Jf(t,a);var V=v=o.createElement("link");Kt(V),pn(V,"link",t),V._p=new Promise(function(Q,ie){V.onload=Q,V.onerror=ie}),V.addEventListener("load",function(){w.loading|=1}),V.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gu(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function mE(t,s){ji.X(t,s);var a=gl;if(a&&t){var o=zs(a).hoistableScripts,h=xl(t),m=o.get(h);m||(m=a.querySelector(Ho(h)),m||(t=E({src:t,async:!0},s),(s=ds.get(h))&&em(t,s),m=a.createElement("script"),Kt(m),pn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function pE(t,s){ji.M(t,s);var a=gl;if(a&&t){var o=zs(a).hoistableScripts,h=xl(t),m=o.get(h);m||(m=a.querySelector(Ho(h)),m||(t=E({src:t,async:!0,type:"module"},s),(s=ds.get(h))&&em(t,s),m=a.createElement("script"),Kt(m),pn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function rx(t,s,a,o){var h=(h=ae.current)?Fu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=yl(a.href),a=zs(h).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=yl(a.href);var m=zs(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(qo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),ds.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ds.set(t,a),m||gE(h,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xl(a),a=zs(h).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function yl(t){return'href="'+In(t)+'"'}function qo(t){return'link[rel="stylesheet"]['+t+"]"}function ax(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function gE(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),pn(s,"link",a),Kt(s),t.head.appendChild(s))}function xl(t){return'[src="'+In(t)+'"]'}function Ho(t){return"script[async]"+t}function lx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+In(a.href)+'"]');if(o)return s.instance=o,Kt(o),o;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Kt(o),pn(o,"style",h),Gu(o,a.precedence,t),s.instance=o;case"stylesheet":h=yl(a.href);var m=t.querySelector(qo(h));if(m)return s.state.loading|=4,s.instance=m,Kt(m),m;o=ax(a),(h=ds.get(h))&&Jf(o,h),m=(t.ownerDocument||t).createElement("link"),Kt(m);var v=m;return v._p=new Promise(function(w,V){v.onload=w,v.onerror=V}),pn(m,"link",o),s.state.loading|=4,Gu(m,a.precedence,t),s.instance=m;case"script":return m=xl(a.src),(h=t.querySelector(Ho(m)))?(s.instance=h,Kt(h),h):(o=a,(h=ds.get(m))&&(o=E({},a),em(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Kt(h),pn(h,"link",o),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Gu(o,a.precedence,t));return s.instance}function Gu(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,m=h,v=0;v<o.length;v++){var w=o[v];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Jf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function em(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ku=null;function ox(t,s,a){if(Ku===null){var o=new Map,h=Ku=new Map;h.set(a,o)}else h=Ku,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Ps]||m[Gt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var w=o.get(v);w?w.push(m):o.set(v,[m])}}return o}function cx(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function yE(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ux(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xE(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=yl(o.href),m=s.querySelector(qo(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Yu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Kt(m);return}m=s.ownerDocument||s,o=ax(o),(h=ds.get(h))&&Jf(o,h),m=m.createElement("link"),Kt(m);var v=m;v._p=new Promise(function(w,V){v.onload=w,v.onerror=V}),pn(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Yu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var tm=0;function vE(t,s){return t.stylesheets&&t.count===0&&Qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&tm===0&&(tm=62500*Jw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>tm?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Qu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,s.forEach(bE,t),$u=null,Yu.call(t))}function bE(t,s){if(!(s.state.loading&4)){var a=$u.get(t);if(a)var o=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,h),a.set(v,h),this.count++,o=Yu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Fo={$$typeof:W,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function _E(t,s,a,o,h,m,v,w,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vs(0),this.hiddenUpdates=Vs(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function dx(t,s,a,o,h,m,v,w,V,Q,ie,de){return t=new _E(t,s,a,v,V,Q,ie,de,w),s=1,m===!0&&(s|=24),m=Gn(3,null,null,s),t.current=m,m.stateNode=t,s=Dh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Lh(m),t}function hx(t){return t?(t=Qa,t):Qa}function fx(t,s,a,o,h,m){h=hx(h),o.context===null?o.context=h:o.pendingContext=h,o=ir(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=rr(t,o,s),a!==null&&(Ln(a,t,s),wo(a,t,s))}function mx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function nm(t,s){mx(t,s),(t=t.alternate)&&mx(t,s)}function px(t){if(t.tag===13||t.tag===31){var s=aa(t,67108864);s!==null&&Ln(s,t,67108864),nm(t,67108864)}}function gx(t){if(t.tag===13||t.tag===31){var s=Xn();s=$r(s);var a=aa(t,s);a!==null&&Ln(a,t,s),nm(t,s)}}var Xu=!0;function wE(t,s,a,o){var h=K.T;K.T=null;var m=pe.p;try{pe.p=2,sm(t,s,a,o)}finally{pe.p=m,K.T=h}}function EE(t,s,a,o){var h=K.T;K.T=null;var m=pe.p;try{pe.p=8,sm(t,s,a,o)}finally{pe.p=m,K.T=h}}function sm(t,s,a,o){if(Xu){var h=im(o);if(h===null)Hf(t,s,o,Wu,a),xx(t,o);else if(SE(h,t,s,a,o))o.stopPropagation();else if(xx(t,o),s&4&&-1<TE.indexOf(t)){for(;h!==null;){var m=es(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ms(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var V=1<<31-_t(v);w.entanglements[1]|=V,v&=~V}Js(m),(dt&6)===0&&(Du=it()+500,Po(0))}}break;case 31:case 13:w=aa(m,2),w!==null&&Ln(w,m,2),Ou(),nm(m,2)}if(m=im(o),m===null&&Hf(t,s,o,Wu,a),m===h)break;h=m}h!==null&&o.stopPropagation()}else Hf(t,s,o,null,a)}}function im(t){return t=ts(t),rm(t)}var Wu=null;function rm(t){if(Wu=null,t=Us(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=y(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Wu=t,null}function yx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case Be:return 2;case Tt:return 8;case bn:case Rn:return 32;case qi:return 268435456;default:return 32}default:return 32}}var am=!1,gr=null,yr=null,xr=null,Go=new Map,Ko=new Map,vr=[],TE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xx(t,s){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Go.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(s.pointerId)}}function Yo(t,s,a,o,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[h]},s!==null&&(s=es(s),s!==null&&px(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function SE(t,s,a,o,h){switch(s){case"focusin":return gr=Yo(gr,t,s,a,o,h),!0;case"dragenter":return yr=Yo(yr,t,s,a,o,h),!0;case"mouseover":return xr=Yo(xr,t,s,a,o,h),!0;case"pointerover":var m=h.pointerId;return Go.set(m,Yo(Go.get(m)||null,t,s,a,o,h)),!0;case"gotpointercapture":return m=h.pointerId,Ko.set(m,Yo(Ko.get(m)||null,t,s,a,o,h)),!0}return!1}function vx(t){var s=Us(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,xs(t.priority,function(){gx(a)});return}}else if(s===31){if(s=y(a),s!==null){t.blockedOn=s,xs(t.priority,function(){gx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=im(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);ro=o,a.target.dispatchEvent(o),ro=null}else return s=es(a),s!==null&&px(s),t.blockedOn=a,!1;s.shift()}return!0}function bx(t,s,a){Zu(t)&&a.delete(s)}function NE(){am=!1,gr!==null&&Zu(gr)&&(gr=null),yr!==null&&Zu(yr)&&(yr=null),xr!==null&&Zu(xr)&&(xr=null),Go.forEach(bx),Ko.forEach(bx)}function Ju(t,s){t.blockedOn===s&&(t.blockedOn=null,am||(am=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,NE)))}var ed=null;function _x(t){ed!==t&&(ed=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ed===t&&(ed=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],h=t[s+2];if(typeof o!="function"){if(rm(o||a)===null)continue;break}var m=es(a);m!==null&&(t.splice(s,3),s-=3,sf(m,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function vl(t){function s(V){return Ju(V,t)}gr!==null&&Ju(gr,t),yr!==null&&Ju(yr,t),xr!==null&&Ju(xr,t),Go.forEach(s),Ko.forEach(s);for(var a=0;a<vr.length;a++){var o=vr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)vx(a),a.blockedOn===null&&vr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],v=h[rn]||null;if(typeof m=="function")v||_x(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[rn]||null)w=v.formAction;else if(rm(h)!==null)continue}else w=v.action;typeof w=="function"?a[o+1]=w:(a.splice(o,3),o-=3),_x(a)}}}function wx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function lm(t){this._internalRoot=t}td.prototype.render=lm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=Xn();fx(a,o,t,s,null,null)},td.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;fx(t.current,2,null,t,null,null),Ou(),s[Ls]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var s=Oc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,t),a===0&&vx(t)}};var Ex=e.version;if(Ex!=="19.2.0")throw Error(r(527,Ex,"19.2.0"));pe.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var AE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{cn=nd.inject(AE),kt=nd}catch{}}return Qo.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",h=R0,m=I0,v=k0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=dx(t,1,!1,null,null,a,o,null,h,m,v,wx),t[Ls]=s.current,qf(t),new lm(s)},Qo.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,h="",m=R0,v=I0,w=k0,V=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),s=dx(t,1,!0,s,a??null,o,h,V,m,v,w,wx),s.context=hx(null),a=s.current,o=Xn(),o=$r(o),h=ir(o),h.callback=null,rr(a,h,o),a=o,s.current.lanes=a,Kr(s,a),Js(s),t[Ls]=s.current,qf(t),new td(s)},Qo.version="19.2.0",Qo}var Dx;function PE(){if(Dx)return um.exports;Dx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),um.exports=LE(),um.exports}var UE=PE();const zE=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},BE=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const l=i[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],f=i[n++],y=i[n++],p=((l&7)<<18|(u&63)<<12|(f&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},_b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],f=l+1<i.length,y=f?i[l+1]:0,p=l+2<i.length,x=p?i[l+2]:0,_=u>>2,E=(u&3)<<4|y>>4;let S=(y&15)<<2|x>>6,z=x&63;p||(z=64,f||(S=64)),r.push(n[_],n[E],n[S],n[z])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(bb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):BE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],y=l<i.length?n[i.charAt(l)]:0;++l;const x=l<i.length?n[i.charAt(l)]:64;++l;const E=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||y==null||x==null||E==null)throw new qE;const S=u<<2|y>>4;if(r.push(S),x!==64){const z=y<<4&240|x>>2;if(r.push(z),E!==64){const F=x<<6&192|E;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class qE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HE=function(i){const e=bb(i);return _b.encodeByteArray(e,!0)},_d=function(i){return HE(i).replace(/\./g,"")},wb=function(i){try{return _b.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=()=>FE().__FIREBASE_DEFAULTS__,KE=()=>{if(typeof process>"u"||typeof Mx>"u")return;const i=Mx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wb(i[1]);return e&&JSON.parse(e)},qd=()=>{try{return zE()||GE()||KE()||YE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Eb=i=>qd()?.emulatorHosts?.[i],$E=i=>{const e=Eb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tb=()=>qd()?.config,Sb=i=>qd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[_d(JSON.stringify(n)),_d(JSON.stringify(f)),""].join(".")}const nc={};function WE(){const i={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?i.emulator.push(e):i.prod.push(e);return i}function ZE(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ox=!1;function Ab(i,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||nc[i]===e||nc[i]||Ox)return;nc[i]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=WE().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function y(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,z){S.setAttribute("width","24"),S.setAttribute("id",z),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function x(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ox=!0,f()},S}function _(S,z){S.setAttribute("id",z),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=ZE(r),z=n("text"),F=document.getElementById(z)||document.createElement("span"),$=n("learnmore"),L=document.getElementById($)||document.createElement("a"),re=n("preprendIcon"),ne=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;y(W),_(L,$);const ue=x();p(ne,re),W.append(ne,F,L,ue),document.body.appendChild(W)}u?(F.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function eT(){const i=qd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function sT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iT(){const i=Sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function rT(){return!eT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aT(){try{return typeof indexedDB=="object"}catch{return!1}}function lT(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="FirebaseError";class Pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oT,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?cT(u,r):"Error",y=`${this.serviceName}: ${f} (${l}).`;return new Pi(l,y,r)}}function cT(i,e){return i.replace(uT,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const uT=/\{\$([^}]+)}/g;function dT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Na(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=i[l],f=e[l];if(Vx(u)&&Vx(f)){if(!Na(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Vx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Wo(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function hT(i,e){const n=new fT(i,e);return n.subscribe.bind(n)}class fT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mT(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=mm),l.error===void 0&&(l.error=mm),l.complete===void 0&&(l.complete=mm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mT(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(i){return i&&i._delegate?i._delegate:i}class Aa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yT(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);r===y&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gT(i){return i===_a?void 0:i}function yT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(et||(et={}));const vT={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},bT=et.INFO,_T={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},wT=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=_T[e];if(l)console[l](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=bT,this._logHandler=wT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const ET=(i,e)=>e.some(n=>i instanceof n);let Lx,Px;function TT(){return Lx||(Lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ST(){return Px||(Px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jb=new WeakMap,km=new WeakMap,Cb=new WeakMap,pm=new WeakMap,up=new WeakMap;function NT(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(jr(i.result)),l()},f=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&jb.set(n,i)}).catch(()=>{}),up.set(e,i),e}function AT(i){if(km.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});km.set(i,e)}let Dm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Cb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function jT(i){Dm=i(Dm)}function CT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(gm(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),jr(r)}:ST().includes(i)?function(...e){return i.apply(gm(this),e),jr(jb.get(this))}:function(...e){return jr(i.apply(gm(this),e))}}function RT(i){return typeof i=="function"?CT(i):(i instanceof IDBTransaction&&AT(i),ET(i,TT())?new Proxy(i,Dm):i)}function jr(i){if(i instanceof IDBRequest)return NT(i);if(pm.has(i))return pm.get(i);const e=RT(i);return e!==i&&(pm.set(i,e),up.set(e,i)),e}const gm=i=>up.get(i);function IT(i,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(i,e),y=jr(f);return r&&f.addEventListener("upgradeneeded",p=>{r(jr(f.result),p.oldVersion,p.newVersion,jr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),y.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),y}const kT=["get","getKey","getAll","getAllKeys","count"],DT=["put","add","delete","clear"],ym=new Map;function Ux(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=DT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||kT.includes(n)))return;const u=async function(f,...y){const p=this.transaction(f,l?"readwrite":"readonly");let x=p.store;return r&&(x=x.index(y.shift())),(await Promise.all([x[n](...y),l&&p.done]))[0]};return ym.set(e,u),u}jT(i=>({...i,get:(e,n,r)=>Ux(e,n)||i.get(e,n,r),has:(e,n)=>!!Ux(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OT(i){return i.getComponent()?.type==="VERSION"}const Mm="@firebase/app",zx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new cp("@firebase/app"),VT="@firebase/app-compat",LT="@firebase/analytics-compat",PT="@firebase/analytics",UT="@firebase/app-check-compat",zT="@firebase/app-check",BT="@firebase/auth",qT="@firebase/auth-compat",HT="@firebase/database",FT="@firebase/data-connect",GT="@firebase/database-compat",KT="@firebase/functions",YT="@firebase/functions-compat",$T="@firebase/installations",QT="@firebase/installations-compat",XT="@firebase/messaging",WT="@firebase/messaging-compat",ZT="@firebase/performance",JT="@firebase/performance-compat",e2="@firebase/remote-config",t2="@firebase/remote-config-compat",n2="@firebase/storage",s2="@firebase/storage-compat",i2="@firebase/firestore",r2="@firebase/ai",a2="@firebase/firestore-compat",l2="firebase",o2="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",c2={[Mm]:"fire-core",[VT]:"fire-core-compat",[PT]:"fire-analytics",[LT]:"fire-analytics-compat",[zT]:"fire-app-check",[UT]:"fire-app-check-compat",[BT]:"fire-auth",[qT]:"fire-auth-compat",[HT]:"fire-rtdb",[FT]:"fire-data-connect",[GT]:"fire-rtdb-compat",[KT]:"fire-fn",[YT]:"fire-fn-compat",[$T]:"fire-iid",[QT]:"fire-iid-compat",[XT]:"fire-fcm",[WT]:"fire-fcm-compat",[ZT]:"fire-perf",[JT]:"fire-perf-compat",[e2]:"fire-rc",[t2]:"fire-rc-compat",[n2]:"fire-gcs",[s2]:"fire-gcs-compat",[i2]:"fire-fst",[a2]:"fire-fst-compat",[r2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,u2=new Map,Vm=new Map;function Bx(i,e){try{i.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function kl(i){const e=i.name;if(Vm.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,i);for(const n of wd.values())Bx(n,i);for(const n of u2.values())Bx(n,i);return!0}function dp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function hs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new xc("app","Firebase",d2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=o2;function Rb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Om,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Cr.create("bad-app-name",{appName:String(l)});if(n||(n=Tb()),!n)throw Cr.create("no-options");const u=wd.get(l);if(u){if(Na(n,u.options)&&Na(r,u.config))return u;throw Cr.create("duplicate-app",{appName:l})}const f=new xT(l);for(const p of Vm.values())f.addComponent(p);const y=new h2(n,r,f);return wd.set(l,y),y}function Ib(i=Om){const e=wd.get(i);if(!e&&i===Om&&Tb())return Rb();if(!e)throw Cr.create("no-app",{appName:i});return e}function Rr(i,e,n){let r=c2[i]??i;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(f.join(" "));return}kl(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firebase-heartbeat-database",m2=1,oc="firebase-heartbeat-store";let xm=null;function kb(){return xm||(xm=IT(f2,m2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Cr.create("idb-open",{originalErrorMessage:i.message})})),xm}async function p2(i){try{const n=(await kb()).transaction(oc),r=await n.objectStore(oc).get(Db(i));return await n.done,r}catch(e){if(e instanceof Pi)ki.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e?.message});ki.warn(n.message)}}}async function qx(i,e){try{const r=(await kb()).transaction(oc,"readwrite");await r.objectStore(oc).put(e,Db(i)),await r.done}catch(n){if(n instanceof Pi)ki.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n?.message});ki.warn(r.message)}}}function Db(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1024,y2=30;class x2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>y2){const l=_2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ki.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hx(),{heartbeatsToSend:n,unsentEntries:r}=v2(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ki.warn(e),""}}}function Hx(){return new Date().toISOString().substring(0,10)}function v2(i,e=g2){const n=[];let r=i.slice();for(const l of i){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Fx(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Fx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aT()?lT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Fx(i){return _d(JSON.stringify({version:2,heartbeats:i})).length}function _2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(i){kl(new Aa("platform-logger",e=>new MT(e),"PRIVATE")),kl(new Aa("heartbeat",e=>new x2(e),"PRIVATE")),Rr(Mm,zx,i),Rr(Mm,zx,"esm2020"),Rr("fire-js","")}w2("");function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E2=Mb,Ob=new xc("auth","Firebase",Mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new cp("@firebase/auth");function T2(i,...e){Ed.logLevel<=et.WARN&&Ed.warn(`Auth (${Bl}): ${i}`,...e)}function ud(i,...e){Ed.logLevel<=et.ERROR&&Ed.error(`Auth (${Bl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(i,...e){throw hp(i,...e)}function ti(i,...e){return hp(i,...e)}function Vb(i,e,n){const r={...E2(),[e]:n};return new xc("auth","Firebase",r).create(e,{appName:i.name})}function Ii(i){return Vb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Ob.create(i,...e)}function Pe(i,e,...n){if(!i)throw hp(e,...n)}function Ci(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ud(e),new Error(e)}function Di(i,e){i||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof self<"u"&&self.location?.href||""}function S2(){return Gx()==="http:"||Gx()==="https:"}function Gx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S2()||nT()||"connection"in navigator)?navigator.onLine:!0}function A2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=JE()||sT()}get(){return N2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(i,e){Di(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R2=new bc(3e4,6e4);function Ui(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function zi(i,e,n,r,l={}){return Pb(i,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const y=vc({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:p,...u};return tT()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&zl(i.emulatorConfig.host)&&(x.credentials="include"),Lb.fetch()(await Ub(i,i.config.apiHost,n,y),x)})}async function Pb(i,e,n){i._canInitEmulator=!1;const r={...j2,...e};try{const l=new k2(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw sd(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const y=u.ok?f.errorMessage:f.error.message,[p,x]=y.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw sd(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw sd(i,"user-disabled",f);const _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Vb(i,_,x);Is(i,_)}}catch(l){if(l instanceof Pi)throw l;Is(i,"network-request-failed",{message:String(l)})}}async function _c(i,e,n,r,l={}){const u=await zi(i,e,n,r,l);return"mfaPendingCredential"in u&&Is(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ub(i,e,n,r){const l=`${e}${n}?${r}`,u=i,f=u.config.emulator?fp(i.config,l):`${i.config.apiScheme}://${l}`;return C2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function I2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),R2.get())})}}function sd(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=ti(i,e,r);return l.customData._tokenResponse=n,l}function Kx(i){return i!==void 0&&i.enterprise!==void 0}class D2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return I2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function M2(i,e){return zi(i,"GET","/v2/recaptchaConfig",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(i,e){return zi(i,"POST","/v1/accounts:delete",e)}async function Td(i,e){return zi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V2(i,e=!1){const n=Ht(i),r=await n.getIdToken(e),l=mp(r);Pe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:sc(vm(l.auth_time)),issuedAtTime:sc(vm(l.iat)),expirationTime:sc(vm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function vm(i){return Number(i)*1e3}function mp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const l=wb(n);return l?JSON.parse(l):(ud("Failed to decode base64 JWT payload"),null)}catch(l){return ud("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Yx(i){const e=mp(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pi&&L2(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function L2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(i){const e=i.auth,n=await i.getIdToken(),r=await cc(i,Td(e,{idToken:n}));Pe(r?.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=l.providerUserInfo?.length?zb(l.providerUserInfo):[],f=z2(i.providerData,u),y=i.isAnonymous,p=!(i.email&&l.passwordHash)&&!f?.length,x=y?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(i,_)}async function U2(i){const e=Ht(i);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z2(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function zb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(i,e){const n=await Pb(i,{},async()=>{const r=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,f=await Ub(i,l,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:y,body:r};return i.emulatorConfig&&zl(i.emulatorConfig.host)&&(p.credentials="include"),Lb.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q2(i,e){return zi(i,"POST","/v2/accounts:revokeToken",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=Yx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await B2(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,f=new Al;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(Pe(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(Pe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Rs{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new P2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V2(this,e)}reload(){return U2(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await cc(this,O2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,y=n.tenantId??void 0,p=n._redirectEventId??void 0,x=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:z,providerData:F,stsTokenManager:$}=n;Pe(E&&$,e,"internal-error");const L=Al.fromJSON(this.name,$);Pe(typeof E=="string",e,"internal-error"),_r(r,e.name),_r(l,e.name),Pe(typeof S=="boolean",e,"internal-error"),Pe(typeof z=="boolean",e,"internal-error"),_r(u,e.name),_r(f,e.name),_r(y,e.name),_r(p,e.name),_r(x,e.name),_r(_,e.name);const re=new Rs({uid:E,auth:e,email:l,emailVerified:S,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:y,stsTokenManager:L,createdAt:x,lastLoginAt:_});return F&&Array.isArray(F)&&(re.providerData=F.map(ne=>({...ne}))),p&&(re._redirectEventId=p),re}static async _fromIdTokenResponse(e,n,r=!1){const l=new Al;l.updateFromServerResponse(n);const u=new Rs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Sd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Pe(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?zb(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,y=new Al;y.updateFromIdToken(r);const p=new Rs({uid:l.localId,auth:e,stsTokenManager:y,isAnonymous:f}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(p,x),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;function Ri(i){Di(i instanceof Function,"Expected a class definition");let e=$x.get(i);return e?(Di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,$x.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bb.type="NONE";const Qx=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(i,e,n){return`firebase:${i}:${e}:${n}`}class jl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=dd(this.userKey,l.apiKey,u),this.fullPersistenceKey=dd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Rs._fromGetAccountInfoResponse(this.auth,n,e):null}return Rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jl(Ri(Qx),e,r);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Ri(Qx);const f=dd(r,e.config.apiKey,e.name);let y=null;for(const x of n)try{const _=await x._get(f);if(_){let E;if(typeof _=="string"){const S=await Td(e,{idToken:_}).catch(()=>{});if(!S)break;E=await Rs._fromGetAccountInfoResponse(e,S,_)}else E=Rs._fromJSON(e,_);x!==u&&(y=E),u=x;break}}catch{}const p=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new jl(u,e,r):(u=p[0],y&&await u._set(f,y.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new jl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yb(e))return"Blackberry";if($b(e))return"Webos";if(Hb(e))return"Safari";if((e.includes("chrome/")||Fb(e))&&!e.includes("edge/"))return"Chrome";if(Kb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function qb(i=Sn()){return/firefox\//i.test(i)}function Hb(i=Sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(i=Sn()){return/crios\//i.test(i)}function Gb(i=Sn()){return/iemobile/i.test(i)}function Kb(i=Sn()){return/android/i.test(i)}function Yb(i=Sn()){return/blackberry/i.test(i)}function $b(i=Sn()){return/webos/i.test(i)}function pp(i=Sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function H2(i=Sn()){return pp(i)&&!!window.navigator?.standalone}function F2(){return iT()&&document.documentMode===10}function Qb(i=Sn()){return pp(i)||Kb(i)||$b(i)||Yb(i)||/windows phone/i.test(i)||Gb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(i,e=[]){let n;switch(i){case"Browser":n=Xx(Sn());break;case"Worker":n=`${Xx(Sn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,y)=>{try{const p=e(u);f(p)}catch(p){y(p)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(i,e={}){return zi(i,"GET","/v2/passwordPolicy",Ui(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=6;class $2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Y2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wx(this),this.idTokenSubscription=new Wx(this),this.beforeStateQueue=new G2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),r=await Rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===f)&&y?.user&&(r=y.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hs(this.app))return Promise.reject(Ii(this));const n=e?Ht(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hs(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K2(this),n=new $2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(y,this,"internal-error"),y.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,l);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&T2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Br(i){return Ht(i)}class Wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=hT(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(i){Hd=i}function Wb(i){return Hd.loadJS(i)}function W2(){return Hd.recaptchaEnterpriseScript}function Z2(){return Hd.gapiScript}function J2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class eS{constructor(){this.enterprise=new tS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nS="recaptcha-enterprise",Zb="NO_RECAPTCHA";class sS{constructor(e){this.type=nS,this.auth=Br(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,y)=>{M2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const x=new D2(p);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(p=>{y(p)})})}function l(u,f,y){const p=window.grecaptcha;Kx(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(Zb)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eS().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(y=>{if(!n&&Kx(window.grecaptcha))l(y,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=W2();p.length!==0&&(p+=y),Wb(p).then(()=>{l(y,u,f)}).catch(x=>{f(x)})}}).catch(y=>{f(y)})})}}async function Zx(i,e,n,r=!1,l=!1){const u=new sS(i);let f;if(l)f=Zb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const y={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const p=y.phoneEnrollmentInfo.phoneNumber,x=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const p=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return r?Object.assign(y,{captchaResp:f}):Object.assign(y,{captchaResponse:f}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Nd(i,e,n,r,l){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Zx(i,e,n,n==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Zx(i,e,n,n==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(i,e){const n=dp(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Na(u,e??{}))return l;Is(l,"already-initialized")}return n.initialize({options:e})}function rS(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ri);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function aS(i,e,n){const r=Br(i);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=Jb(e),{host:f,port:y}=lS(e),p=y===null?"":`:${y}`,x={url:`${u}//${f}${p}/`},_=Object.freeze({host:f,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Na(x,r.config.emulator)&&Na(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,zl(f)?(Nb(`${u}//${f}${p}`),Ab("Auth",!0)):oS()}function Jb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function lS(i){const e=Jb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:Jx(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Jx(f)}}}function Jx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function oS(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function cS(i,e){return zi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(i,e){return _c(i,"POST","/v1/accounts:signInWithPassword",Ui(i,e))}async function dS(i,e){return zi(i,"POST","/v1/accounts:sendOobCode",Ui(i,e))}async function hS(i,e){return dS(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(i,e){return _c(i,"POST","/v1/accounts:signInWithEmailLink",Ui(i,e))}async function mS(i,e){return _c(i,"POST","/v1/accounts:signInWithEmailLink",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends gp{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new uc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,n,"signInWithPassword",uS);case"emailLink":return fS(e,{email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,r,"signUpPassword",cS);case"emailLink":return mS(e,{idToken:n,email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(i,e){return _c(i,"POST","/v1/accounts:signInWithIdp",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="http://localhost";class ja extends gp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const f=new ja(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Cl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cl(e,n)}buildRequest(){const e={requestUri:pS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yS(i){const e=Xo(Wo(i)).link,n=e?Xo(Wo(e)).deep_link_id:null,r=Xo(Wo(i)).deep_link_id;return(r?Xo(Wo(r)).link:null)||r||n||e||i}class yp{constructor(e){const n=Xo(Wo(e)),r=n.apiKey??null,l=n.oobCode??null,u=gS(n.mode??null);Pe(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=yS(e);try{return new yp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.providerId=ql.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yp.parseLink(n);return Pe(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}ql.PROVIDER_ID="password";ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends e_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends wc{constructor(){super("facebook.com")}static credential(e){return ja._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ja._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends wc{constructor(){super("github.com")}static credential(e){return ja._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends wc{constructor(){super("twitter.com")}static credential(e,n){return ja._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(i,e){return _c(i,"POST","/v1/accounts:signUp",Ui(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await Rs._fromIdTokenResponse(e,r,l),f=ev(r);return new Ca({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=ev(r);return new Ca({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function ev(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Pi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Ad(e,n,r,l)}}function t_(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(i,u,e,r):u})}async function vS(i,e,n=!1){const r=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ca._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(i,e,n=!1){const{auth:r}=i;if(hs(r.app))return Promise.reject(Ii(r));const l="reauthenticate";try{const u=await cc(i,t_(r,l,e,i),n);Pe(u.idToken,r,"internal-error");const f=mp(u.idToken);Pe(f,r,"internal-error");const{sub:y}=f;return Pe(i.uid===y,r,"user-mismatch"),Ca._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Is(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(i,e,n=!1){if(hs(i.app))return Promise.reject(Ii(i));const r="signIn",l=await t_(i,r,e),u=await Ca._fromIdTokenResponse(i,r,l);return n||await i._updateCurrentUser(u.user),u}async function _S(i,e){return n_(Br(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(i){const e=Br(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wS(i,e,n){const r=Br(i);await Nd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hS)}async function ES(i,e,n){if(hs(i.app))return Promise.reject(Ii(i));const r=Br(i),f=await Nd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&s_(i),p}),y=await Ca._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(y.user),y}function TS(i,e,n){return hs(i.app)?Promise.reject(Ii(i)):_S(Ht(i),ql.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s_(i),r})}function SS(i,e,n,r){return Ht(i).onIdTokenChanged(e,n,r)}function NS(i,e,n){return Ht(i).beforeAuthStateChanged(e,n)}function AS(i,e,n,r){return Ht(i).onAuthStateChanged(e,n,r)}function jS(i){return Ht(i).signOut()}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1e3,RS=10;class r_ extends i_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,y,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);F2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,RS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}r_.type="LOCAL";const IS=r_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends i_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}a_.type="SESSION";const l_=a_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const y=Array.from(f).map(async x=>x(n.origin,u)),p=await kS(y);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((y,p)=>{const x=xp("",20);l.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(E){const S=E;if(S.data.eventId===x)switch(S.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(S.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function MS(i){ni().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function OS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VS(){return navigator?.serviceWorker?.controller||null}function LS(){return o_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="firebaseLocalStorageDb",PS=1,Cd="firebaseLocalStorage",u_="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(i,e){return i.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function US(){const i=indexedDB.deleteDatabase(c_);return new Ec(i).toPromise()}function Um(){const i=indexedDB.open(c_,PS);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Cd,{keyPath:u_})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await US(),e(await Um()))})})}async function tv(i,e,n){const r=Gd(i,!0).put({[u_]:e,value:n});return new Ec(r).toPromise()}async function zS(i,e){const n=Gd(i,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function nv(i,e){const n=Gd(i,!0).delete(e);return new Ec(n).toPromise()}const BS=800,qS=3;class d_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(LS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OS(),!this.activeServiceWorker)return;this.sender=new DS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await tv(e,jd,"1"),await nv(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Gd(l,!1).getAll();return new Ec(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d_.type="LOCAL";const HS=d_;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(i,e){return e?Ri(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends gp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GS(i){return n_(i.auth,new vp(i),i.bypassAuthState)}function KS(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),bS(n,new vp(i),i.bypassAuthState)}async function YS(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),vS(n,new vp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:f,type:y}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GS;case"linkViaPopup":case"linkViaRedirect":return YS;case"reauthViaPopup":case"reauthViaRedirect":return KS;default:Is(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new bc(2e3,1e4);class Nl extends h_{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,Nl.currentPopupAction&&Nl.currentPopupAction.cancel(),Nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$S.get())};e()}}Nl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="pendingRedirect",hd=new Map;class XS extends h_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const r=await WS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WS(i,e){const n=eN(e),r=JS(i);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function ZS(i,e){hd.set(i._key(),e)}function JS(i){return Ri(i._redirectPersistence)}function eN(i){return dd(QS,i.config.apiKey,i.name)}async function tN(i,e,n=!1){if(hs(i.app))return Promise.reject(Ii(i));const r=Br(i),l=FS(r,e),f=await new XS(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!f_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ti(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nN&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function f_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function iN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(i,e={}){return zi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lN=/^https?/;async function oN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await rN(i);for(const n of e)try{if(cN(n))return}catch{}Is(i,"unauthorized-domain")}function cN(i){const e=Lm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!lN.test(n))return!1;if(aN.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new bc(3e4,6e4);function iv(){const i=ni().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function dN(i){return new Promise((e,n)=>{function r(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),n(ti(i,"network-request-failed"))},timeout:uN.get()})}if(ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ni().gapi?.load)r();else{const l=J2("iframefcb");return ni()[l]=()=>{gapi.load?r():n(ti(i,"network-request-failed"))},Wb(`${Z2()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw fd=null,e})}let fd=null;function hN(i){return fd=fd||dN(i),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new bc(5e3,15e3),mN="__/auth/iframe",pN="emulator/auth/iframe",gN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xN(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?fp(e,pN):`https://${i.config.authDomain}/${mN}`,r={apiKey:e.apiKey,appName:i.name,v:Bl},l=yN.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${vc(r).slice(1)}`}async function vN(i){const e=await hN(i),n=ni().gapi;return Pe(n,i,"internal-error"),e.open({where:document.body,url:xN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gN,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=ti(i,"network-request-failed"),y=ni().setTimeout(()=>{u(f)},fN.get());function p(){ni().clearTimeout(y),l(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,wN=600,EN="_blank",TN="http://localhost";class rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SN(i,e,n,r=_N,l=wN){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const p={...bN,width:r.toString(),height:l.toString(),top:u,left:f},x=Sn().toLowerCase();n&&(y=Fb(x)?EN:n),qb(x)&&(e=e||TN,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[z,F])=>`${S}${z}=${F},`,"");if(H2(x)&&y!=="_self")return NN(e||"",y),new rv(null);const E=window.open(e||"",y,_);Pe(E,i,"popup-blocked");try{E.focus()}catch{}return new rv(E)}function NN(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="__/auth/handler",jN="emulator/auth/handler",CN=encodeURIComponent("fac");async function av(i,e,n,r,l,u){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Bl,eventId:l};if(e instanceof e_){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",dT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof wc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const y=f;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const p=await i._getAppCheckToken(),x=p?`#${CN}=${encodeURIComponent(p)}`:"";return`${RN(i)}?${vc(y).slice(1)}${x}`}function RN({config:i}){return i.emulator?fp(i,jN):`https://${i.authDomain}/${AN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class IN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l_,this._completeRedirectFn=tN,this._overrideRedirectResult=ZS}async _openPopup(e,n,r,l){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await av(e,n,r,Lm(),l);return SN(e,u,xp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await av(e,n,r,Lm(),l);return MS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Di(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vN(e),r=new sN(e);return n.register("authEvent",l=>(Pe(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bm,{type:bm},l=>{const u=l?.[0]?.[bm];u!==void 0&&n(!!u),Is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qb()||Hb()||pp()}}const kN=IN;var lv="@firebase/auth",ov="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ON(i){kl(new Aa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:y}=r.options;Pe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xb(i)},x=new Q2(r,l,u,p);return rS(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kl(new Aa("auth-internal",e=>{const n=Br(e.getProvider("auth").getImmediate());return(r=>new DN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(lv,ov,MN(i)),Rr(lv,ov,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=300,LN=Sb("authIdTokenMaxAge")||VN;let cv=null;const PN=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LN)return;const l=n?.token;cv!==l&&(cv=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function UN(i=Ib()){const e=dp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=iS(i,{popupRedirectResolver:kN,persistence:[HS,IS,l_]}),r=Sb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=PN(u.toString());NS(n,f,()=>f(n.currentUser)),SS(n,y=>f(y))}}const l=Eb("auth");return l&&aS(n,`http://${l}`),n}function zN(){return document.getElementsByTagName("head")?.[0]??document}X2({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=ti("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",zN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ON("Browser");var BN="firebase",qN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(BN,qN,"app");var uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,m_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function C(){}C.prototype=N.prototype,R.F=N.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(M,D,P){for(var A=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)A[ee-2]=arguments[ee];return N.prototype[D].apply(M,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(R,N,C){C||(C=0);const M=Array(16);if(typeof N=="string")for(var D=0;D<16;++D)M[D]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(D=0;D<16;++D)M[D]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=R.g[0],C=R.g[1],D=R.g[2];let P=R.g[3],A;A=N+(P^C&(D^P))+M[0]+3614090360&4294967295,N=C+(A<<7&4294967295|A>>>25),A=P+(D^N&(C^D))+M[1]+3905402710&4294967295,P=N+(A<<12&4294967295|A>>>20),A=D+(C^P&(N^C))+M[2]+606105819&4294967295,D=P+(A<<17&4294967295|A>>>15),A=C+(N^D&(P^N))+M[3]+3250441966&4294967295,C=D+(A<<22&4294967295|A>>>10),A=N+(P^C&(D^P))+M[4]+4118548399&4294967295,N=C+(A<<7&4294967295|A>>>25),A=P+(D^N&(C^D))+M[5]+1200080426&4294967295,P=N+(A<<12&4294967295|A>>>20),A=D+(C^P&(N^C))+M[6]+2821735955&4294967295,D=P+(A<<17&4294967295|A>>>15),A=C+(N^D&(P^N))+M[7]+4249261313&4294967295,C=D+(A<<22&4294967295|A>>>10),A=N+(P^C&(D^P))+M[8]+1770035416&4294967295,N=C+(A<<7&4294967295|A>>>25),A=P+(D^N&(C^D))+M[9]+2336552879&4294967295,P=N+(A<<12&4294967295|A>>>20),A=D+(C^P&(N^C))+M[10]+4294925233&4294967295,D=P+(A<<17&4294967295|A>>>15),A=C+(N^D&(P^N))+M[11]+2304563134&4294967295,C=D+(A<<22&4294967295|A>>>10),A=N+(P^C&(D^P))+M[12]+1804603682&4294967295,N=C+(A<<7&4294967295|A>>>25),A=P+(D^N&(C^D))+M[13]+4254626195&4294967295,P=N+(A<<12&4294967295|A>>>20),A=D+(C^P&(N^C))+M[14]+2792965006&4294967295,D=P+(A<<17&4294967295|A>>>15),A=C+(N^D&(P^N))+M[15]+1236535329&4294967295,C=D+(A<<22&4294967295|A>>>10),A=N+(D^P&(C^D))+M[1]+4129170786&4294967295,N=C+(A<<5&4294967295|A>>>27),A=P+(C^D&(N^C))+M[6]+3225465664&4294967295,P=N+(A<<9&4294967295|A>>>23),A=D+(N^C&(P^N))+M[11]+643717713&4294967295,D=P+(A<<14&4294967295|A>>>18),A=C+(P^N&(D^P))+M[0]+3921069994&4294967295,C=D+(A<<20&4294967295|A>>>12),A=N+(D^P&(C^D))+M[5]+3593408605&4294967295,N=C+(A<<5&4294967295|A>>>27),A=P+(C^D&(N^C))+M[10]+38016083&4294967295,P=N+(A<<9&4294967295|A>>>23),A=D+(N^C&(P^N))+M[15]+3634488961&4294967295,D=P+(A<<14&4294967295|A>>>18),A=C+(P^N&(D^P))+M[4]+3889429448&4294967295,C=D+(A<<20&4294967295|A>>>12),A=N+(D^P&(C^D))+M[9]+568446438&4294967295,N=C+(A<<5&4294967295|A>>>27),A=P+(C^D&(N^C))+M[14]+3275163606&4294967295,P=N+(A<<9&4294967295|A>>>23),A=D+(N^C&(P^N))+M[3]+4107603335&4294967295,D=P+(A<<14&4294967295|A>>>18),A=C+(P^N&(D^P))+M[8]+1163531501&4294967295,C=D+(A<<20&4294967295|A>>>12),A=N+(D^P&(C^D))+M[13]+2850285829&4294967295,N=C+(A<<5&4294967295|A>>>27),A=P+(C^D&(N^C))+M[2]+4243563512&4294967295,P=N+(A<<9&4294967295|A>>>23),A=D+(N^C&(P^N))+M[7]+1735328473&4294967295,D=P+(A<<14&4294967295|A>>>18),A=C+(P^N&(D^P))+M[12]+2368359562&4294967295,C=D+(A<<20&4294967295|A>>>12),A=N+(C^D^P)+M[5]+4294588738&4294967295,N=C+(A<<4&4294967295|A>>>28),A=P+(N^C^D)+M[8]+2272392833&4294967295,P=N+(A<<11&4294967295|A>>>21),A=D+(P^N^C)+M[11]+1839030562&4294967295,D=P+(A<<16&4294967295|A>>>16),A=C+(D^P^N)+M[14]+4259657740&4294967295,C=D+(A<<23&4294967295|A>>>9),A=N+(C^D^P)+M[1]+2763975236&4294967295,N=C+(A<<4&4294967295|A>>>28),A=P+(N^C^D)+M[4]+1272893353&4294967295,P=N+(A<<11&4294967295|A>>>21),A=D+(P^N^C)+M[7]+4139469664&4294967295,D=P+(A<<16&4294967295|A>>>16),A=C+(D^P^N)+M[10]+3200236656&4294967295,C=D+(A<<23&4294967295|A>>>9),A=N+(C^D^P)+M[13]+681279174&4294967295,N=C+(A<<4&4294967295|A>>>28),A=P+(N^C^D)+M[0]+3936430074&4294967295,P=N+(A<<11&4294967295|A>>>21),A=D+(P^N^C)+M[3]+3572445317&4294967295,D=P+(A<<16&4294967295|A>>>16),A=C+(D^P^N)+M[6]+76029189&4294967295,C=D+(A<<23&4294967295|A>>>9),A=N+(C^D^P)+M[9]+3654602809&4294967295,N=C+(A<<4&4294967295|A>>>28),A=P+(N^C^D)+M[12]+3873151461&4294967295,P=N+(A<<11&4294967295|A>>>21),A=D+(P^N^C)+M[15]+530742520&4294967295,D=P+(A<<16&4294967295|A>>>16),A=C+(D^P^N)+M[2]+3299628645&4294967295,C=D+(A<<23&4294967295|A>>>9),A=N+(D^(C|~P))+M[0]+4096336452&4294967295,N=C+(A<<6&4294967295|A>>>26),A=P+(C^(N|~D))+M[7]+1126891415&4294967295,P=N+(A<<10&4294967295|A>>>22),A=D+(N^(P|~C))+M[14]+2878612391&4294967295,D=P+(A<<15&4294967295|A>>>17),A=C+(P^(D|~N))+M[5]+4237533241&4294967295,C=D+(A<<21&4294967295|A>>>11),A=N+(D^(C|~P))+M[12]+1700485571&4294967295,N=C+(A<<6&4294967295|A>>>26),A=P+(C^(N|~D))+M[3]+2399980690&4294967295,P=N+(A<<10&4294967295|A>>>22),A=D+(N^(P|~C))+M[10]+4293915773&4294967295,D=P+(A<<15&4294967295|A>>>17),A=C+(P^(D|~N))+M[1]+2240044497&4294967295,C=D+(A<<21&4294967295|A>>>11),A=N+(D^(C|~P))+M[8]+1873313359&4294967295,N=C+(A<<6&4294967295|A>>>26),A=P+(C^(N|~D))+M[15]+4264355552&4294967295,P=N+(A<<10&4294967295|A>>>22),A=D+(N^(P|~C))+M[6]+2734768916&4294967295,D=P+(A<<15&4294967295|A>>>17),A=C+(P^(D|~N))+M[13]+1309151649&4294967295,C=D+(A<<21&4294967295|A>>>11),A=N+(D^(C|~P))+M[4]+4149444226&4294967295,N=C+(A<<6&4294967295|A>>>26),A=P+(C^(N|~D))+M[11]+3174756917&4294967295,P=N+(A<<10&4294967295|A>>>22),A=D+(N^(P|~C))+M[2]+718787259&4294967295,D=P+(A<<15&4294967295|A>>>17),A=C+(P^(D|~N))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+P&4294967295}r.prototype.v=function(R,N){N===void 0&&(N=R.length);const C=N-this.blockSize,M=this.C;let D=this.h,P=0;for(;P<N;){if(D==0)for(;P<=C;)l(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<N;)if(M[D++]=R.charCodeAt(P++),D==this.blockSize){l(this,M),D=0;break}}else for(;P<N;)if(M[D++]=R[P++],D==this.blockSize){l(this,M),D=0;break}}this.h=D,this.o+=N},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)R[N++]=this.g[C]>>>M&255;return R};function u(R,N){var C=y;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=N(R)}function f(R,N){this.h=N;const C=[];let M=!0;for(let D=R.length-1;D>=0;D--){const P=R[D]|0;M&&P==N||(C[D]=P,M=!1)}this.g=C}var y={};function p(R){return-128<=R&&R<128?u(R,function(N){return new f([N|0],N<0?-1:0)}):new f([R|0],R<0?-1:0)}function x(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return L(x(-R));const N=[];let C=1;for(let M=0;R>=C;M++)N[M]=R/C|0,C*=4294967296;return new f(N,0)}function _(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return L(_(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=x(Math.pow(N,8));let M=E;for(let P=0;P<R.length;P+=8){var D=Math.min(8,R.length-P);const A=parseInt(R.substring(P,P+D),N);D<8?(D=x(Math.pow(N,D)),M=M.j(D).add(x(A))):(M=M.j(C),M=M.add(x(A)))}return M}var E=p(0),S=p(1),z=p(16777216);i=f.prototype,i.m=function(){if($(this))return-L(this).m();let R=0,N=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);R+=(M>=0?M:4294967296+M)*N,N*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if($(this))return"-"+L(this).toString(R);const N=x(Math.pow(R,6));var C=this;let M="";for(;;){const D=ue(C,N).g;C=re(C,D.j(N));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=D,F(C))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function $(R){return R.h==-1}i.l=function(R){return R=re(this,R),$(R)?-1:F(R)?0:1};function L(R){const N=R.g.length,C=[];for(let M=0;M<N;M++)C[M]=~R.g[M];return new f(C,~R.h).add(S)}i.abs=function(){return $(this)?L(this):this},i.add=function(R){const N=Math.max(this.g.length,R.g.length),C=[];let M=0;for(let D=0;D<=N;D++){let P=M+(this.i(D)&65535)+(R.i(D)&65535),A=(P>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);M=A>>>16,P&=65535,A&=65535,C[D]=A<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function re(R,N){return R.add(L(N))}i.j=function(R){if(F(this)||F(R))return E;if($(this))return $(R)?L(this).j(L(R)):L(L(this).j(R));if($(R))return L(this.j(L(R)));if(this.l(z)<0&&R.l(z)<0)return x(this.m()*R.m());const N=this.g.length+R.g.length,C=[];for(var M=0;M<2*N;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<R.g.length;D++){const P=this.i(M)>>>16,A=this.i(M)&65535,ee=R.i(D)>>>16,Se=R.i(D)&65535;C[2*M+2*D]+=A*Se,ne(C,2*M+2*D),C[2*M+2*D+1]+=P*Se,ne(C,2*M+2*D+1),C[2*M+2*D+1]+=A*ee,ne(C,2*M+2*D+1),C[2*M+2*D+2]+=P*ee,ne(C,2*M+2*D+2)}for(R=0;R<N;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=N;R<2*N;R++)C[R]=0;return new f(C,0)};function ne(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function W(R,N){this.g=R,this.h=N}function ue(R,N){if(F(N))throw Error("division by zero");if(F(R))return new W(E,E);if($(R))return N=ue(L(R),N),new W(L(N.g),L(N.h));if($(N))return N=ue(R,L(N)),new W(L(N.g),N.h);if(R.g.length>30){if($(R)||$(N))throw Error("slowDivide_ only works with positive integers.");for(var C=S,M=N;M.l(R)<=0;)C=ve(C),M=ve(M);var D=be(C,1),P=be(M,1);for(M=be(M,2),C=be(C,2);!F(M);){var A=P.add(M);A.l(R)<=0&&(D=D.add(C),P=A),M=be(M,1),C=be(C,1)}return N=re(R,D.j(N)),new W(D,N)}for(D=E;R.l(N)>=0;){for(C=Math.max(1,Math.floor(R.m()/N.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=x(C),A=P.j(N);$(A)||A.l(R)>0;)C-=M,P=x(C),A=P.j(N);F(P)&&(P=S),D=D.add(P),R=re(R,A)}return new W(D,R)}i.B=function(R){return ue(this,R).h},i.and=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)&R.i(M);return new f(C,this.h&R.h)},i.or=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)|R.i(M);return new f(C,this.h|R.h)},i.xor=function(R){const N=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<N;M++)C[M]=this.i(M)^R.i(M);return new f(C,this.h^R.h)};function ve(R){const N=R.g.length+1,C=[];for(let M=0;M<N;M++)C[M]=R.i(M)<<1|R.i(M-1)>>>31;return new f(C,R.h)}function be(R,N){const C=N>>5;N%=32;const M=R.g.length-C,D=[];for(let P=0;P<M;P++)D[P]=N>0?R.i(P+C)>>>N|R.i(P+C+1)<<32-N:R.i(P+C);return new f(D,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,m_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,Ir=f}).apply(typeof uv<"u"?uv:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p_,Zo,g_,md,zm,y_,x_,v_;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(d,g){if(g)e:{var b=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var G=d[T];if(!(G in b))break e;b=b[G]}d=d[d.length-1],T=b[d],g=g(T),g!=T&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(g){var b=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&b.push([T,g[T]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function y(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,b){return d.call.apply(d.bind,arguments)}function x(d,g,b){return x=p,x.apply(null,arguments)}function _(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function E(d,g){function b(){}b.prototype=g.prototype,d.Z=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(T,G,te){for(var xe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)xe[Fe-2]=arguments[Fe];return g.prototype[G].apply(T,xe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function z(d){const g=d.length;if(g>0){const b=Array(g);for(let T=0;T<g;T++)b[T]=d[T];return b}return[]}function F(d,g){for(let T=1;T<arguments.length;T++){const G=arguments[T];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=d.length||0;const te=G.length||0;d.length=b+te;for(let xe=0;xe<te;xe++)d[b+xe]=G[xe]}else d.push(G)}}class ${constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function L(d){f.setTimeout(()=>{throw d},0)}function re(){var d=R;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,b){const T=W.get();T.set(g,b),this.h?this.h.next=T:this.g=T,this.h=T}}var W=new $(()=>new ue,d=>d.reset());class ue{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,be=!1,R=new ne,N=()=>{const d=Promise.resolve(void 0);ve=()=>{d.then(C)}};function C(){for(var d;d=re();){try{d.h.call(d.g)}catch(b){L(b)}var g=W;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}be=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return d})();function A(d){return/^[\s\xa0]*$/.test(d)}function ee(d,g){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}E(ee,D),ee.prototype.init=function(d,g){const b=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),K=0;function pe(d,g,b,T,G){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!T,this.ha=G,this.key=++K,this.da=this.fa=!1}function q(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function me(d,g,b){for(const T in d)g.call(b,d[T],T,d)}function we(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function O(d){const g={};for(const b in d)g[b]=d[b];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(d,g){let b,T;for(let G=1;G<arguments.length;G++){T=arguments[G];for(b in T)d[b]=T[b];for(let te=0;te<k.length;te++)b=k[te],Object.prototype.hasOwnProperty.call(T,b)&&(d[b]=T[b])}}function j(d){this.src=d,this.g={},this.h=0}j.prototype.add=function(d,g,b,T,G){const te=d.toString();d=this.g[te],d||(d=this.g[te]=[],this.h++);const xe=ae(d,g,T,G);return xe>-1?(g=d[xe],b||(g.fa=!1)):(g=new pe(g,this.src,te,!!T,G),g.fa=b,d.push(g)),g};function H(d,g){const b=g.type;if(b in d.g){var T=d.g[b],G=Array.prototype.indexOf.call(T,g,void 0),te;(te=G>=0)&&Array.prototype.splice.call(T,G,1),te&&(q(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function ae(d,g,b,T){for(let G=0;G<d.length;++G){const te=d[G];if(!te.da&&te.listener==g&&te.capture==!!b&&te.ha==T)return G}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Ae={};function Re(d,g,b,T,G){if(Array.isArray(g)){for(let te=0;te<g.length;te++)Re(d,g[te],b,T,G);return null}return b=Le(b),d&&d[Se]?d.J(g,b,y(T)?!!T.capture:!1,G):at(d,g,b,!1,T,G)}function at(d,g,b,T,G,te){if(!g)throw Error("Invalid event type");const xe=y(G)?!!G.capture:!!G;let Fe=ye(d);if(Fe||(d[fe]=Fe=new j(d)),b=Fe.add(g,b,T,xe,te),b.proxy)return b;if(T=ct(),b.proxy=T,T.src=d,T.listener=b,d.addEventListener)P||(G=xe),G===void 0&&(G=!1),d.addEventListener(g.toString(),T,G);else if(d.attachEvent)d.attachEvent(Et(g.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ct(){function d(b){return g.call(d.src,d.listener,b)}const g=ce;return d}function Qe(d,g,b,T,G){if(Array.isArray(g))for(var te=0;te<g.length;te++)Qe(d,g[te],b,T,G);else T=y(T)?!!T.capture:!!T,b=Le(b),d&&d[Se]?(d=d.i,te=String(g).toString(),te in d.g&&(g=d.g[te],b=ae(g,b,T,G),b>-1&&(q(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete d.g[te],d.h--)))):d&&(d=ye(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ae(g,b,T,G)),(b=d>-1?g[d]:null)&&Lt(b))}function Lt(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Se])H(g.i,d);else{var b=d.type,T=d.proxy;g.removeEventListener?g.removeEventListener(b,T,d.capture):g.detachEvent?g.detachEvent(Et(b),T):g.addListener&&g.removeListener&&g.removeListener(T),(b=ye(g))?(H(b,d),b.h==0&&(b.src=null,g[fe]=null)):q(d)}}}function Et(d){return d in Ae?Ae[d]:Ae[d]="on"+d}function ce(d,g){if(d.da)d=!0;else{g=new ee(g,this);const b=d.listener,T=d.ha||d.src;d.fa&&Lt(d),d=b.call(T,g)}return d}function ye(d){return d=d[fe],d instanceof j?d:null}var ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function Le(d){return typeof d=="function"?d:(d[ge]||(d[ge]=function(g){return d.handleEvent(g)}),d[ge])}function Me(){M.call(this),this.i=new j(this),this.M=this,this.G=null}E(Me,M),Me.prototype[Se]=!0,Me.prototype.removeEventListener=function(d,g,b,T){Qe(this,d,g,b,T)};function Ie(d,g){var b,T=d.G;if(T)for(b=[];T;T=T.G)b.push(T);if(d=d.M,T=g.type||g,typeof g=="string")g=new D(g,d);else if(g instanceof D)g.target=g.target||d;else{var G=g;g=new D(T,d),I(g,G)}G=!0;let te,xe;if(b)for(xe=b.length-1;xe>=0;xe--)te=g.g=b[xe],G=X(te,T,!0,g)&&G;if(te=g.g=d,G=X(te,T,!0,g)&&G,G=X(te,T,!1,g)&&G,b)for(xe=0;xe<b.length;xe++)te=g.g=b[xe],G=X(te,T,!1,g)&&G}Me.prototype.N=function(){if(Me.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const b=d.g[g];for(let T=0;T<b.length;T++)q(b[T]);delete d.g[g],d.h--}}this.G=null},Me.prototype.J=function(d,g,b,T){return this.i.add(String(d),g,!1,b,T)},Me.prototype.K=function(d,g,b,T){return this.i.add(String(d),g,!0,b,T)};function X(d,g,b,T){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let G=!0;for(let te=0;te<g.length;++te){const xe=g[te];if(xe&&!xe.da&&xe.capture==b){const Fe=xe.listener,Pt=xe.ha||xe.src;xe.fa&&H(d.i,xe),G=Fe.call(Pt,T)!==!1&&G}}return G&&!T.defaultPrevented}function Te(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(d,g||0)}function $e(d){d.g=Te(()=>{d.g=null,d.i&&(d.i=!1,$e(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class it extends M{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:$e(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(d){M.call(this),this.h=d,this.g={}}E(vn,M);var Be=[];function Tt(d){me(d.g,function(g,b){this.g.hasOwnProperty(b)&&Lt(g)},d),d.g={}}vn.prototype.N=function(){vn.Z.N.call(this),Tt(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=f.JSON.stringify,Rn=f.JSON.parse,qi=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Fr(){}function ci(){}var cn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){D.call(this,"d")}E(kt,D);function un(){D.call(this,"c")}E(un,D);var _t={},Bn=null;function Hi(){return Bn=Bn||new Me}_t.Ia="serverreachability";function Dc(d){D.call(this,_t.Ia,d)}E(Dc,D);function Ds(d){const g=Hi();Ie(g,new Dc(g))}_t.STAT_EVENT="statevent";function Gr(d,g){D.call(this,_t.STAT_EVENT,d),this.stat=g}E(Gr,D);function Ft(d){const g=Hi();Ie(g,new Gr(g,d))}_t.Ja="timingevent";function Ms(d,g){D.call(this,_t.Ja,d),this.size=g}E(Ms,D);function Os(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},g)}function ys(){this.g=!0}ys.prototype.ua=function(){this.g=!1};function dh(d,g,b,T,G,te){d.info(function(){if(d.g)if(te){var xe="",Fe=te.split("&");for(let ut=0;ut<Fe.length;ut++){var Pt=Fe[ut].split("=");if(Pt.length>1){const Ct=Pt[0];Pt=Pt[1];const ss=Ct.split("_");xe=ss.length>=2&&ss[1]=="type"?xe+(Ct+"="+Pt+"&"):xe+(Ct+"=redacted&")}}}else xe=null;else xe=te;return"XMLHTTP REQ ("+T+") [attempt "+G+"]: "+g+`
`+b+`
`+xe})}function Mc(d,g,b,T,G,te,xe){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+G+"]: "+g+`
`+b+`
`+te+" "+xe})}function Vs(d,g,b,T){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+hh(d,b)+(T?" "+T:"")})}function Kr(d,g){d.info(function(){return"TIMEOUT: "+g})}ys.prototype.info=function(){};function hh(d,g){if(!d.g)return g;if(!g)return null;try{const te=JSON.parse(g);if(te){for(d=0;d<te.length;d++)if(Array.isArray(te[d])){var b=te[d];if(!(b.length<2)){var T=b[1];if(Array.isArray(T)&&!(T.length<1)){var G=T[0];if(G!="noop"&&G!="stop"&&G!="close")for(let xe=1;xe<T.length;xe++)T[xe]=""}}}}return bn(te)}catch{return g}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$l={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ql;function $r(){}E($r,Fr),$r.prototype.g=function(){return new XMLHttpRequest},Ql=new $r;function ui(d){return encodeURIComponent(String(d))}function Oc(d){var g=1;d=d.split(":");const b=[];for(;g>0&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function xs(d,g,b,T){this.j=d,this.i=g,this.l=b,this.S=T||1,this.V=new vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vs}function vs(){this.i=null,this.g="",this.h=!1}var Gt={},rn={};function Ls(d,g,b){d.M=1,d.A=Qr(Yt(g)),d.u=b,d.R=!0,Ma(d,null)}function Ma(d,g){d.F=Date.now(),Ps(d),d.B=Yt(d.A);var b=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),Pa(b.i,"t",T),d.C=0,b=d.j.L,d.h=new vs,d.g=Xc(d.j,b?g:null,!d.u),d.P>0&&(d.O=new it(x(d.Y,d,d.g),d.P)),g=d.V,b=d.g,T=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(Be[0]=G.toString()),G=Be);for(let te=0;te<G.length;te++){const xe=Re(b,G[te],T||g.handleEvent,!1,g.h||g);if(!xe)break;g.g[xe.key]=xe}g=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Ds(),dh(d.i,d.v,d.B,d.l,d.S,d.u)}xs.prototype.ba=function(d){d=d.target;const g=this.O;g&&ws(d)==3?g.j():this.Y(d)},xs.prototype.Y=function(d){try{if(d==this.g)e:{const Fe=ws(this.g),Pt=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Fe!=4||Pt==7||(Pt==8||ut<=0?Ds(3):Ds(2)),Us(this);var g=this.g.ca();this.X=g;var b=fh(this);if(this.o=g==200,Mc(this.i,this.v,this.B,this.l,this.S,Fe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,G=this.g;if((T=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var te=T;break t}}te=null}if(d=te)Vs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,d);else{this.o=!1,this.m=3,Ft(12),qn(this),es(this);break e}}if(this.R){d=!0;let Ct;for(;!this.K&&this.C<b.length;)if(Ct=Lc(this,b),Ct==rn){Fe==4&&(this.m=4,Ft(14),d=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Gt){this.m=4,Ft(15),Vs(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Vs(this.i,this.l,Ct,null),zs(this,Ct);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||b.length!=0||this.h.h||(this.m=1,Ft(16),d=!1),this.o=this.o&&d,!d)Vs(this.i,this.l,b,"[Invalid Chunked Response]"),qn(this),es(this);else if(b.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),uo(xe),xe.P=!0,Ft(11))}}else Vs(this.i,this.l,b,null),zs(this,b);Fe==4&&qn(this),this.o&&!this.K&&(Fe==4?Kc(this.j,this):(this.o=!1,Ps(this)))}else hi(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),qn(this),es(this)}}}catch{}finally{}};function fh(d){if(!Vc(d))return d.g.la();const g=dn(d.g);if(g==="")return"";let b="";const T=g.length,G=ws(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return qn(d),es(d),"";d.h.i=new f.TextDecoder}for(let te=0;te<T;te++)d.h.h=!0,b+=d.h.i.decode(g[te],{stream:!(G&&te==T-1)});return g.length=0,d.h.g+=b,d.C=0,d.h.g}function Vc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Lc(d,g){var b=d.C,T=g.indexOf(`
`,b);return T==-1?rn:(b=Number(g.substring(b,T)),isNaN(b)?Gt:(T+=1,T+b>g.length?rn:(g=g.slice(T,T+b),d.C=T+b,g)))}xs.prototype.cancel=function(){this.K=!0,qn(this)};function Ps(d){d.T=Date.now()+d.H,Oa(d,d.H)}function Oa(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Os(x(d.aa,d),g)}function Us(d){d.D&&(f.clearTimeout(d.D),d.D=null)}xs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Kr(this.i,this.B),this.M!=2&&(Ds(),Ft(17)),qn(this),this.m=2,es(this)):Oa(this,this.T-d)};function es(d){d.j.I==0||d.K||Kc(d.j,d)}function qn(d){Us(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Tt(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function zs(d,g){try{var b=d.j;if(b.I!=0&&(b.g==d||qs(b.h,d))){if(!d.L&&qs(b.h,d)&&b.I==3){try{var T=b.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var G=T;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Ha(b),Wi(b);else break e;na(b),Ft(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Os(x(b.Va,b),6e3));Bs(b.h)<=1&&b.ta&&(b.ta=void 0)}else $s(b,11)}else if((d.L||b.g==d)&&Ha(b),!A(g))for(G=b.Ba.g.parse(g),g=0;g<G.length;g++){let ut=G[g];const Ct=ut[0];if(!(Ct<=b.K))if(b.K=Ct,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const ss=ut[3];ss!=null&&(b.ka=ss,b.j.info("VER="+b.ka));const Qs=ut[4];Qs!=null&&(b.za=Qs,b.j.info("SVER="+b.za));const Es=ut[5];Es!=null&&typeof Es=="number"&&Es>0&&(T=1.5*Es,b.O=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const Ts=d.g;if(Ts){const sa=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var te=T.h;te.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Zl(te,te.h),te.h=null))}if(T.G){const Fa=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Fa&&(T.wa=Fa,ft(T.J,T.G,Fa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),T=b;var xe=d;if(T.na=Qc(T,T.L?T.ba:null,T.W),xe.L){Jl(T.h,xe);var Fe=xe,Pt=T.O;Pt&&(Fe.H=Pt),Fe.D&&(Us(Fe),Ps(Fe)),T.g=xe}else Fc(T);b.i.length>0&&Ys(b)}else ut[0]!="stop"&&ut[0]!="close"||$s(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?$s(b,7):oo(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}Ds(4)}catch{}}var Kt=class{constructor(d,g){this.g=d,this.map=g}};function Xl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Bs(d){return d.h?1:d.g?d.g.size:0}function qs(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Zl(d,g){d.g?d.g.add(g):d.h=g}function Jl(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Xl.prototype.cancel=function(){if(this.i=eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function eo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.G);return g}return z(d.i)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(d,g){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const T=d[b].indexOf("=");let G,te=null;T>=0?(G=d[b].substring(0,T),te=d[b].substring(T+1)):G=d[b],g(G,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Hn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Hn?(this.l=d.l,an(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.u),this.h=d.h,to(this,qc(d.i)),this.m=d.m):d&&(g=String(d).match(Pc))?(this.l=!1,an(this,g[1]||"",!0),this.o=Hs(g[2]||""),this.g=Hs(g[3]||"",!0),Fi(this,g[4]),this.h=Hs(g[5]||"",!0),to(this,g[6]||"",!0),this.m=Hs(g[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}Hn.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Xr(g,La,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Xr(g,La,!0),"@"),d.push(ui(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Xr(b,b.charAt(0)=="/"?no:Uc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Xr(b,zc)),d.join("")},Hn.prototype.resolve=function(d){const g=Yt(this);let b=!!d.j;b?an(g,d.j):b=!!d.o,b?g.o=d.o:b=!!d.g,b?g.g=d.g:b=d.u!=null;var T=d.h;if(b)Fi(g,d.u);else if(b=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var G=g.h.lastIndexOf("/");G!=-1&&(T=g.h.slice(0,G+1)+T)}if(G=T,G==".."||G==".")T="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){T=G.lastIndexOf("/",0)==0,G=G.split("/");const te=[];for(let xe=0;xe<G.length;){const Fe=G[xe++];Fe=="."?T&&xe==G.length&&te.push(""):Fe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),T&&xe==G.length&&te.push("")):(te.push(Fe),T=!0)}T=te.join("/")}else T=G}return b?g.h=T:b=d.i.toString()!=="",b?to(g,qc(d.i)):b=!!d.m,b&&(g.m=d.m),g};function Yt(d){return new Hn(d)}function an(d,g,b){d.j=b?Hs(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function to(d,g,b){g instanceof Ki?(d.i=g,Ua(d.i,d.l)):(b||(g=Xr(g,Gi)),d.i=new Ki(g,d.l))}function ft(d,g,b){d.i.set(g,b)}function Qr(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Hs(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xr(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,In),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function In(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var La=/[#\/\?@]/g,Uc=/[#\?:]/g,no=/[#\?]/g,Gi=/[#\?@]/g,zc=/#/g;function Ki(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function kn(d){d.g||(d.g=new Map,d.h=0,d.i&&Va(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=Ki.prototype,i.add=function(d,g){kn(this),this.i=null,d=Yi(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Bc(d,g){kn(d),g=Yi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function so(d,g){return kn(d),g=Yi(d,g),d.g.has(g)}i.forEach=function(d,g){kn(this),this.g.forEach(function(b,T){b.forEach(function(G){d.call(g,G,T,this)},this)},this)};function io(d,g){kn(d);let b=[];if(typeof g=="string")so(d,g)&&(b=b.concat(d.g.get(Yi(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)b=b.concat(d[g]);return b}i.set=function(d,g){return kn(this),this.i=null,d=Yi(this,d),so(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},i.get=function(d,g){return d?(d=io(this,d),d.length>0?String(d[0]):g):g};function Pa(d,g,b){Bc(d,g),b.length>0&&(d.i=null,d.g.set(Yi(d,g),z(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var b=g[T];const G=ui(b);b=io(this,b);for(let te=0;te<b.length;te++){let xe=G;b[te]!==""&&(xe+="="+ui(b[te])),d.push(xe)}}return this.i=d.join("&")};function qc(d){const g=new Ki;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Yi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Ua(d,g){g&&!d.j&&(kn(d),d.i=null,d.g.forEach(function(b,T){const G=T.toLowerCase();T!=G&&(Bc(this,T),Pa(this,G,b))},d)),d.j=g}function bs(d,g){const b=new ys;if(f.Image){const T=new Image;T.onload=_(ts,b,"TestLoadImage: loaded",!0,g,T),T.onerror=_(ts,b,"TestLoadImage: error",!1,g,T),T.onabort=_(ts,b,"TestLoadImage: abort",!1,g,T),T.ontimeout=_(ts,b,"TestLoadImage: timeout",!1,g,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else g(!1)}function ro(d,g){const b=new ys,T=new AbortController,G=setTimeout(()=>{T.abort(),ts(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:T.signal}).then(te=>{clearTimeout(G),te.ok?ts(b,"TestPingServer: ok",!0,g):ts(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(G),ts(b,"TestPingServer: error",!1,g)})}function ts(d,g,b,T,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),T(b)}catch{}}function $i(){this.g=new qi}function Fs(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Fs,Fr),Fs.prototype.g=function(){return new Wr(this.i,this.h)};function Wr(d,g){Me.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Wr,Me),i=Wr.prototype,i.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,_s(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Qi(this):_s(this),this.readyState==3&&za(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Qi(this))},i.Na=function(d){this.g&&(this.response=d,Qi(this))},i.ga=function(){this.g&&Qi(this)};function Qi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,_s(d)}i.setRequestHeader=function(d,g){this.A.append(d,g)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function _s(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ns(d){let g="";return me(d,function(b,T){g+=T,g+=":",g+=b,g+=`\r
`}),g}function Zr(d,g,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=ns(b),typeof d=="string"?b!=null&&ui(b):ft(d,g,b))}function gt(d){Me.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(gt,Me);var Gs=/^https?$/i,ao=["POST","PUT"];i=gt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,g,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ql.g(),this.g.onreadystatechange=S(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(te){Jr(this,te);return}if(d=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var G in T)b.set(G,T[G]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const te of T.keys())b.set(te,T.get(te));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(te=>te.toLowerCase()=="content-type"),G=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(ao,g,void 0)>=0)||T||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,xe]of b)this.g.setRequestHeader(te,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(te){Jr(this,te)}};function Jr(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,lo(d),di(d)}function lo(d){d.A||(d.A=!0,Ie(d,"complete"),Ie(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ie(this,"complete"),Ie(this,"abort"),di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),gt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ea(this):this.Xa())},i.Xa=function(){ea(this)};function ea(d){if(d.h&&typeof u<"u"){if(d.v&&ws(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ie(d,"readystatechange"),ws(d)==4){d.h=!1;try{const te=d.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var T;if(T=te===0){let xe=String(d.D).match(Pc)[1]||null;!xe&&f.self&&f.self.location&&(xe=f.self.location.protocol.slice(0,-1)),T=!Gs.test(xe?xe.toLowerCase():"")}b=T}if(b)Ie(d,"complete"),Ie(d,"success");else{d.o=6;try{var G=ws(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",lo(d)}}finally{di(d)}}}}function di(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,g||Ie(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ws(d){return d.g?d.g.readyState:0}i.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Rn(g)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hi(d){const g={};d=(d.g&&ws(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(A(d[T]))continue;var b=Oc(d[T]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const te=g[G]||[];g[G]=te,te.push(b)}we(g,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function Xi(d){this.za=0,this.i=[],this.j=new ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ks("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ks("baseRetryDelayMs",5e3,d),this.Za=Ks("retryDelaySeedMs",1e4,d),this.Ta=Ks("forwardChannelMaxRetries",2,d),this.va=Ks("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Xl(d&&d.concurrentRequestLimit),this.Ba=new $i,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Xi.prototype,i.ka=8,i.I=1,i.connect=function(d,g,b,T){Ft(0),this.W=d,this.H=g||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.J=Qc(this,null,this.W),Ys(this)};function oo(d){if(Ba(d),d.I==3){var g=d.V++,b=Yt(d.J);if(ft(b,"SID",d.M),ft(b,"RID",g),ft(b,"TYPE","terminate"),ta(d,b),g=new xs(d,d.j,g),g.M=2,g.A=Qr(Yt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Xc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ps(g)}$c(d)}function Wi(d){d.g&&(uo(d),d.g.cancel(),d.g=null)}function Ba(d){Wi(d),d.v&&(f.clearTimeout(d.v),d.v=null),Ha(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ys(d){if(!Wl(d.h)&&!d.m){d.m=!0;var g=d.Ea;ve||N(),be||(ve(),be=!0),R.add(g,d),d.D=0}}function qa(d,g){return Bs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Os(x(d.Ea,d,g),Yc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new xs(this,this.j,d);let te=this.o;if(this.U&&(te?(te=O(te),I(te,this.U)):te=this.U),this.u!==null||this.R||(G.J=te,te=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Hc(this,G,g),b=Yt(this.J),ft(b,"RID",d),ft(b,"CVER",22),this.G&&ft(b,"X-HTTP-Session-Id",this.G),ta(this,b),te&&(this.R?g="headers="+ui(ns(te))+"&"+g:this.u&&Zr(b,this.u,te)),Zl(this.h,G),this.Ra&&ft(b,"TYPE","init"),this.S?(ft(b,"$req",g),ft(b,"SID","null"),G.U=!0,Ls(G,b,null)):Ls(G,b,g),this.I=2}}else this.I==3&&(d?co(this,d):this.i.length==0||Wl(this.h)||co(this))};function co(d,g){var b;g?b=g.l:b=d.V++;const T=Yt(d.J);ft(T,"SID",d.M),ft(T,"RID",b),ft(T,"AID",d.K),ta(d,T),d.u&&d.o&&Zr(T,d.u,d.o),b=new xs(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Hc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Zl(d.h,b),Ls(b,T,g)}function ta(d,g){d.H&&me(d.H,function(b,T){ft(g,T,b)}),d.l&&me({},function(b,T){ft(g,T,b)})}function Hc(d,g,b){b=Math.min(d.i.length,b);const T=d.l?x(d.l.Ka,d.l,d):null;e:{var G=d.i;let Fe=-1;for(;;){const Pt=["count="+b];Fe==-1?b>0?(Fe=G[0].g,Pt.push("ofs="+Fe)):Fe=0:Pt.push("ofs="+Fe);let ut=!0;for(let Ct=0;Ct<b;Ct++){var te=G[Ct].g;const ss=G[Ct].map;if(te-=Fe,te<0)Fe=Math.max(0,G[Ct].g-100),ut=!1;else try{te="req"+te+"_"||"";try{var xe=ss instanceof Map?ss:Object.entries(ss);for(const[Qs,Es]of xe){let Ts=Es;y(Es)&&(Ts=bn(Es)),Pt.push(te+Qs+"="+encodeURIComponent(Ts))}}catch(Qs){throw Pt.push(te+"type="+encodeURIComponent("_badmap")),Qs}}catch{T&&T(ss)}}if(ut){xe=Pt.join("&");break e}}xe=void 0}return d=d.i.splice(0,b),g.G=d,xe}function Fc(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;ve||N(),be||(ve(),be=!0),R.add(g,d),d.A=0}}function na(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Os(x(d.Da,d),Yc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Os(x(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Wi(this),Gc(this))};function uo(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Gc(d){d.g=new xs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Yt(d.na);ft(g,"RID","rpc"),ft(g,"SID",d.M),ft(g,"AID",d.K),ft(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(g,"TO",d.ia),ft(g,"TYPE","xmlhttp"),ta(d,g),d.u&&d.o&&Zr(g,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Qr(Yt(g)),b.u=null,b.R=!0,Ma(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Wi(this),na(this),Ft(19))};function Ha(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Kc(d,g){var b=null;if(d.g==g){Ha(d),uo(d),d.g=null;var T=2}else if(qs(d.h,g))b=g.G,Jl(d.h,g),T=1;else return;if(d.I!=0){if(g.o)if(T==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var G=d.D;T=Hi(),Ie(T,new Ms(T,b)),Ys(d)}else Fc(d);else if(G=g.m,G==3||G==0&&g.X>0||!(T==1&&qa(d,g)||T==2&&na(d)))switch(b&&b.length>0&&(g=d.h,g.i=g.i.concat(b)),G){case 1:$s(d,5);break;case 4:$s(d,10);break;case 3:$s(d,6);break;default:$s(d,2)}}}function Yc(d,g){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*g}function $s(d,g){if(d.j.info("Error code "+g),g==2){var b=x(d.bb,d),T=d.Ua;const G=!T;T=new Hn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||an(T,"https"),Qr(T),G?bs(T.toString(),b):ro(T.toString(),b)}else Ft(2);d.I=0,d.l&&d.l.pa(g),$c(d),Ba(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function $c(d){if(d.I=0,d.ja=[],d.l){const g=eo(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ja,g),F(d.ja,d.i),d.h.i.length=0,z(d.i),d.i.length=0),d.l.oa()}}function Qc(d,g,b){var T=b instanceof Hn?Yt(b):new Hn(b);if(T.g!="")g&&(T.g=g+"."+T.g),Fi(T,T.u);else{var G=f.location;T=G.protocol,g=g?g+"."+G.hostname:G.hostname,G=+G.port;const te=new Hn(null);T&&an(te,T),g&&(te.g=g),G&&Fi(te,G),b&&(te.h=b),T=te}return b=d.G,g=d.wa,b&&g&&ft(T,b,g),ft(T,"VER",d.ka),ta(d,T),T}function Xc(d,g,b){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new gt(new Fs({ab:b})):new gt(d.ma),g.Fa(d.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}i=Wc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Zi(){}Zi.prototype.g=function(d,g){return new Nn(d,g)};function Nn(d,g){Me.call(this),this.g=new Xi(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!A(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!A(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new fi(this)}E(Nn,Me),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){oo(this.g)},Nn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=bn(d),d=b);g.i.push(new Kt(g.Ya++,d)),g.I==3&&Ys(g)},Nn.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,Nn.Z.N.call(this)};function Zc(d){kt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}E(Zc,kt);function Jc(){un.call(this),this.status=1}E(Jc,un);function fi(d){this.g=d}E(fi,Wc),fi.prototype.ra=function(){Ie(this.g,"a")},fi.prototype.qa=function(d){Ie(this.g,new Zc(d))},fi.prototype.pa=function(d){Ie(this.g,new Jc)},fi.prototype.oa=function(){Ie(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,v_=function(){return new Zi},x_=function(){return Hi()},y_=_t,zm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,md=Yr,$l.COMPLETE="complete",g_=$l,ci.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",Me.prototype.listen=Me.prototype.J,Zo=ci,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,p_=gt}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const dv="@firebase/firestore",hv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new cp("@firebase/firestore");function _l(){return Ra.logLevel}function Ne(i,...e){if(Ra.logLevel<=et.DEBUG){const n=e.map(bp);Ra.debug(`Firestore (${Hl}): ${i}`,...n)}}function Mi(i,...e){if(Ra.logLevel<=et.ERROR){const n=e.map(bp);Ra.error(`Firestore (${Hl}): ${i}`,...n)}}function Dl(i,...e){if(Ra.logLevel<=et.WARN){const n=e.map(bp);Ra.warn(`Firestore (${Hl}): ${i}`,...n)}}function bp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,b_(i,r,n)}function b_(i,e,n){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mi(r),new Error(r)}function ht(i,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,i||b_(e,l,r)}function He(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class FN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GN{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let r=this.i;const l=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new kr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},y=p=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>y(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new kr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new __(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class KN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $N{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const r=u=>{u.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=QN(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function tt(i,e){return i<e?-1:i>e?1:0}function Bm(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return _m(l)===_m(u)?tt(l,u):_m(l)?1:-1}return tt(i.length,e.length)}const XN=55296,WN=57343;function _m(i){const e=i.charCodeAt(0);return e>=XN&&e<=WN}function Ml(i,e,n){return i.length===e.length&&i.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=ei.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return tt(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),l=ei.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?ei.extractNumericId(e).compare(ei.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class St extends ei{construct(e,n,r){return new St(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ei{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return ZN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mv}static keyField(){return new yn([mv])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new Ee(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,l+=2}else y==="`"?(f=!f,l++):y!=="."||f?(r+=y,l++):(u(),l++)}if(u(),f)throw new Ee(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(St.fromString(e))}static fromName(e){return new De(St.fromString(e).popFirst(5))}static empty(){return new De(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(i,e,n){if(!n)throw new Ee(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function JN(i,e,n,r){if(e===!0&&r===!0)throw new Ee(oe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function pv(i){if(!De.isDocumentKey(i))throw new Ee(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function gv(i){if(De.isDocumentKey(i))throw new Ee(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function E_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Kd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ue(12329,{type:typeof i})}function Zn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ee(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kd(i);throw new Ee(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Tc(i,e){if(!E_(i))throw new Ee(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new Ee(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-62135596800,xv=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xv);return new jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yv)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xv}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tc(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:tn("string",jt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new jt(0,0))}static max(){return new ze(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function eA(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=ze.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Mr(l,De.empty(),e)}function tA(i){return new Mr(i.readTime,i.key,dc)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(ze.min(),De.empty(),dc)}static max(){return new Mr(ze.max(),De.empty(),dc)}}function nA(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(i.documentKey,e.documentKey),n!==0?n:tt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==sA)throw i;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,r)=>{n(e)}))}static reject(e){return new he(((n,r)=>{r(e)}))}static waitFor(e){return new he(((n,r)=>{let l=0,u=0,f=!1;e.forEach((y=>{++l,y.next((()=>{++u,f&&u===l&&n()}),(p=>r(p)))})),f=!0,u===l&&n()}))}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next((l=>l?he.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new he(((r,l)=>{const u=e.length,f=new Array(u);let y=0;for(let p=0;p<u;p++){const x=p;n(e[x]).next((_=>{f[x]=_,++y,y===u&&r(f)}),(_=>l(_)))}}))}static doWhile(e,n){return new he(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function rA(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=-1;function $d(i){return i==null}function Rd(i){return i===0&&1/i==-1/0}function aA(i){return typeof i=="number"&&Number.isInteger(i)&&!Rd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="";function lA(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=vv(e)),e=oA(i.get(n),e);return vv(e)}function oA(i,e){let n=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":n+="";break;case T_:n+="";break;default:n+=u}}return n}function vv(i){return i+T_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function qr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function S_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??gn.RED,this.left=l??gn.EMPTY,this.right=u??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new gn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return gn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(e){return new _v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class _v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new sn(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new N_("Invalid base64 string: "+u):u}})(e);return new xn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const cA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(i){if(ht(!!i,39018),typeof i=="string"){let e=0;const n=cA.exec(i);if(ht(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(i.seconds),nanos:Bt(i.nanos)}}function Bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Vr(i){return typeof i=="string"?xn.fromBase64String(i):xn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="server_timestamp",j_="__type__",C_="__previous_value__",R_="__local_write_time__";function Ep(i){return(i?.mapValue?.fields||{})[j_]?.stringValue===A_}function Qd(i){const e=i.mapValue.fields[C_];return Ep(e)?Qd(e):e}function hc(i){const e=Or(i.mapValue.fields[R_].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r,l,u,f,y,p,x,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=_}}const Id="(default)";class fc{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new fc("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="__type__",dA="__max__",ad={mapValue:{}},k_="__vector__",kd="value";function Lr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ep(i)?4:fA(i)?9007199254740991:hA(i)?10:11:Ue(28295,{value:i})}function oi(i,e){if(i===e)return!0;const n=Lr(i);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hc(i).isEqual(hc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Or(l.timestampValue),y=Or(u.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return Vr(l.bytesValue).isEqual(Vr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return Bt(l.geoPointValue.latitude)===Bt(u.geoPointValue.latitude)&&Bt(l.geoPointValue.longitude)===Bt(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Bt(l.integerValue)===Bt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Bt(l.doubleValue),y=Bt(u.doubleValue);return f===y?Rd(f)===Rd(y):isNaN(f)&&isNaN(y)}return!1})(i,e);case 9:return Ml(i.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},y=u.mapValue.fields||{};if(bv(f)!==bv(y))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(y[p]===void 0||!oi(f[p],y[p])))return!1;return!0})(i,e);default:return Ue(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>oi(n,e)))!==void 0}function Ol(i,e){if(i===e)return 0;const n=Lr(i),r=Lr(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const y=Bt(u.integerValue||u.doubleValue),p=Bt(f.integerValue||f.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1})(i,e);case 3:return wv(i.timestampValue,e.timestampValue);case 4:return wv(hc(i),hc(e));case 5:return Bm(i.stringValue,e.stringValue);case 6:return(function(u,f){const y=Vr(u),p=Vr(f);return y.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const y=u.split("/"),p=f.split("/");for(let x=0;x<y.length&&x<p.length;x++){const _=tt(y[x],p[x]);if(_!==0)return _}return tt(y.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const y=tt(Bt(u.latitude),Bt(f.latitude));return y!==0?y:tt(Bt(u.longitude),Bt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Ev(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const y=u.fields||{},p=f.fields||{},x=y[kd]?.arrayValue,_=p[kd]?.arrayValue,E=tt(x?.values?.length||0,_?.values?.length||0);return E!==0?E:Ev(x,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ad.mapValue&&f===ad.mapValue)return 0;if(u===ad.mapValue)return 1;if(f===ad.mapValue)return-1;const y=u.fields||{},p=Object.keys(y),x=f.fields||{},_=Object.keys(x);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const S=Bm(p[E],_[E]);if(S!==0)return S;const z=Ol(y[p[E]],x[_[E]]);if(z!==0)return z}return tt(p.length,_.length)})(i.mapValue,e.mapValue);default:throw Ue(23264,{he:n})}}function wv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return tt(i,e);const n=Or(i),r=Or(e),l=tt(n.seconds,r.seconds);return l!==0?l:tt(n.nanos,r.nanos)}function Ev(i,e){const n=i.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=Ol(n[l],r[l]);if(u)return u}return tt(n.length,r.length)}function Vl(i){return qm(i)}function qm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Vr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return De.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=qm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${qm(n.fields[f])}`;return l+"}"})(i.mapValue):Ue(61005,{value:i})}function pd(i){switch(Lr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(i);return e?16+pd(e):16;case 5:return 2*i.stringValue.length;case 6:return Vr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+pd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return qr(r.fields,((u,f)=>{l+=u.length+pd(f)})),l})(i.mapValue);default:throw Ue(13486,{value:i})}}function Tv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Hm(i){return!!i&&"integerValue"in i}function Tp(i){return!!i&&"arrayValue"in i}function Sv(i){return!!i&&"nullValue"in i}function Nv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gd(i){return!!i&&"mapValue"in i}function hA(i){return(i?.mapValue?.fields||{})[I_]?.stringValue===k_}function ic(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return qr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ic(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(i.arrayValue.values[n]);return e}return{...i}}function fA(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===dA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=yn.emptyPath(),r={},l=[];e.forEach(((f,y)=>{if(!n.isImmediateParentOf(y)){const p=this.getFieldsMap(n);this.applyChanges(p,r,l),r={},l=[],n=y.popLast()}f?r[y.lastSegment()]=ic(f):l.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){qr(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new Un(ic(this.value))}}function D_(i){const e=[];return qr(i.fields,((n,r)=>{const l=new yn([n]);if(gd(r)){const u=D_(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,l,u,f,y){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=y}static newInvalidDocument(e){return new Tn(e,0,ze.min(),ze.min(),ze.min(),Un.empty(),0)}static newFoundDocument(e,n,r,l){return new Tn(e,1,n,ze.min(),r,l,0)}static newNoDocument(e,n){return new Tn(e,2,n,ze.min(),ze.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,ze.min(),ze.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function Av(i,e,n){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],f=i.position[l];if(u.field.isKeyField()?r=De.comparator(De.fromName(f.referenceValue),n.key):r=Ol(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function jv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!oi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mA(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{}class en extends M_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gA(e,n,r):n==="array-contains"?new vA(e,r):n==="in"?new bA(e,r):n==="not-in"?new _A(e,r):n==="array-contains-any"?new wA(e,r):new en(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yA(e,r):new xA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ol(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(Ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends M_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ks(e,n)}matches(e){return O_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O_(i){return i.op==="and"}function V_(i){return pA(i)&&O_(i)}function pA(i){for(const e of i.filters)if(e instanceof ks)return!1;return!0}function Fm(i){if(i instanceof en)return i.field.canonicalString()+i.op.toString()+Vl(i.value);if(V_(i))return i.filters.map((e=>Fm(e))).join(",");{const e=i.filters.map((n=>Fm(n))).join(",");return`${i.op}(${e})`}}function L_(i,e){return i instanceof en?(function(r,l){return l instanceof en&&r.op===l.op&&r.field.isEqual(l.field)&&oi(r.value,l.value)})(i,e):i instanceof ks?(function(r,l){return l instanceof ks&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,y)=>u&&L_(f,l.filters[y])),!0):!1})(i,e):void Ue(19439)}function P_(i){return i instanceof en?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vl(n.value)}`})(i):i instanceof ks?(function(n){return n.op.toString()+" {"+n.getFilters().map(P_).join(" ,")+"}"})(i):"Filter"}class gA extends en{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class yA extends en{constructor(e,n){super(e,"in",n),this.keys=U_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xA extends en{constructor(e,n){super(e,"not-in",n),this.keys=U_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function U_(i,e){return(e.arrayValue?.values||[]).map((n=>De.fromName(n.referenceValue)))}class vA extends en{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&mc(n.arrayValue,this.value)}}class bA extends en{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class _A extends en{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class wA extends en{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>mc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n=null,r=[],l=[],u=null,f=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=y,this.Te=null}}function Cv(i,e=null,n=[],r=[],l=null,u=null,f=null){return new EA(i,e,n,r,l,u,f)}function Sp(i){const e=He(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Fm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),$d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Vl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Vl(r))).join(",")),e.Te=n}return e.Te}function Np(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!mA(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!L_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!jv(i.startAt,e.startAt)&&jv(i.endAt,e.endAt)}function Gm(i){return De.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n=null,r=[],l=[],u=null,f="F",y=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TA(i,e,n,r,l,u,f,y){return new Kl(i,e,n,r,l,u,f,y)}function Ap(i){return new Kl(i)}function Rv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function z_(i){return i.collectionGroup!==null}function rc(i){const e=He(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new sn(yn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(y=y.add(x.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new pc(u,r))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new pc(yn.keyField(),r))}return e.Ie}function si(i){const e=He(i);return e.Ee||(e.Ee=SA(e,rc(i))),e.Ee}function SA(i,e){if(i.limitType==="F")return Cv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new pc(l.field,u)}));const n=i.endAt?new Dd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Dd(i.startAt.position,i.startAt.inclusive):null;return Cv(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Km(i,e){const n=i.filters.concat([e]);return new Kl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Md(i,e,n){return new Kl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Xd(i,e){return Np(si(i),si(e))&&i.limitType===e.limitType}function B_(i){return`${Sp(si(i))}|lt:${i.limitType}`}function wl(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>P_(l))).join(", ")}]`),$d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>Vl(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>Vl(l))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function Wd(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):De.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of rc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(f,y,p){const x=Av(f,y,p);return f.inclusive?x<=0:x<0})(r.startAt,rc(r),l)||r.endAt&&!(function(f,y,p){const x=Av(f,y,p);return f.inclusive?x>=0:x>0})(r.endAt,rc(r),l))})(i,e)}function NA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function q_(i){return(e,n)=>{let r=!1;for(const l of rc(i)){const u=AA(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function AA(i,e,n){const r=i.field.isKeyField()?De.comparator(e.key,n.key):(function(u,f,y){const p=f.data.field(u),x=y.data.field(u);return p!==null&&x!==null?Ol(p,x):Ue(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return S_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new Dt(De.comparator);function Oi(){return jA}const H_=new Dt(De.comparator);function Jo(...i){let e=H_;for(const n of i)e=e.insert(n.key,n);return e}function F_(i){let e=H_;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function wa(){return ac()}function G_(){return ac()}function ac(){return new ka((i=>i.toString()),((i,e)=>i.isEqual(e)))}const CA=new Dt(De.comparator),RA=new sn(De.comparator);function nt(...i){let e=RA;for(const n of i)e=e.add(n);return e}const IA=new sn(tt);function kA(){return IA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function K_(i){return{integerValue:""+i}}function DA(i,e){return aA(e)?K_(e):jp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this._=void 0}}function MA(i,e,n){return i instanceof Od?(function(l,u){const f={fields:{[j_]:{stringValue:A_},[R_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Ep(u)&&(u=Qd(u)),u&&(f.fields[C_]=u),{mapValue:f}})(n,e):i instanceof gc?$_(i,e):i instanceof yc?Q_(i,e):(function(l,u){const f=Y_(l,u),y=Iv(f)+Iv(l.Ae);return Hm(f)&&Hm(l.Ae)?K_(y):jp(l.serializer,y)})(i,e)}function OA(i,e,n){return i instanceof gc?$_(i,e):i instanceof yc?Q_(i,e):n}function Y_(i,e){return i instanceof Vd?(function(r){return Hm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Od extends Zd{}class gc extends Zd{constructor(e){super(),this.elements=e}}function $_(i,e){const n=X_(e);for(const r of i.elements)n.some((l=>oi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class yc extends Zd{constructor(e){super(),this.elements=e}}function Q_(i,e){let n=X_(e);for(const r of i.elements)n=n.filter((l=>!oi(l,r)));return{arrayValue:{values:n}}}class Vd extends Zd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iv(i){return Bt(i.integerValue||i.doubleValue)}function X_(i){return Tp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function VA(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof gc&&l instanceof gc||r instanceof yc&&l instanceof yc?Ml(r.elements,l.elements,oi):r instanceof Vd&&l instanceof Vd?oi(r.Ae,l.Ae):r instanceof Od&&l instanceof Od})(i.transform,e.transform)}class LA{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Jd{}function W_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new eh(i.key,jn.none()):new Sc(i.key,i.data,jn.none());{const n=i.data,r=Un.empty();let l=new sn(yn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Hr(i.key,r,new Wn(l.toArray()),jn.none())}}function PA(i,e,n){i instanceof Sc?(function(l,u,f){const y=l.value.clone(),p=Dv(l.fieldTransforms,u,f.transformResults);y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,n):i instanceof Hr?(function(l,u,f){if(!yd(l.precondition,u))return void u.convertToUnknownDocument(f.version);const y=Dv(l.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(Z_(l)),p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function lc(i,e,n,r){return i instanceof Sc?(function(u,f,y,p){if(!yd(u.precondition,f))return y;const x=u.value.clone(),_=Mv(u.fieldTransforms,p,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(i,e,n,r):i instanceof Hr?(function(u,f,y,p){if(!yd(u.precondition,f))return y;const x=Mv(u.fieldTransforms,p,f),_=f.data;return _.setAll(Z_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,e,n,r):(function(u,f,y){return yd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y})(i,e,n)}function UA(i,e){let n=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=Y_(r.transform,l||null);u!=null&&(n===null&&(n=Un.empty()),n.set(r.field,u))}return n||null}function kv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Ml(r,l,((u,f)=>VA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Sc extends Jd{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Hr extends Jd{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Z_(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Dv(i,e,n){const r=new Map;ht(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let l=0;l<n.length;l++){const u=i[l],f=u.transform,y=e.data.field(u.field);r.set(u.field,OA(f,y,n[l]))}return r}function Mv(i,e,n){const r=new Map;for(const l of i){const u=l.transform,f=n.data.field(l.field);r.set(l.field,MA(u,f,e))}return r}class eh extends Jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zA extends Jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&PA(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=G_();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let y=this.applyToLocalView(f,u.mutatedFields);y=n.has(l.key)?null:y;const p=W_(f,y);p!==null&&r.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,((n,r)=>kv(n,r)))&&Ml(this.baseMutations,e.baseMutations,((n,r)=>kv(n,r)))}}class Cp{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){ht(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return CA})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new Cp(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,rt;function FA(i){switch(i){case oe.OK:return Ue(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ue(15467,{code:i})}}function J_(i){if(i===void 0)return Mi("GRPC error has no .code"),oe.UNKNOWN;switch(i){case Zt.OK:return oe.OK;case Zt.CANCELLED:return oe.CANCELLED;case Zt.UNKNOWN:return oe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return oe.INTERNAL;case Zt.UNAVAILABLE:return oe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return oe.NOT_FOUND;case Zt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Zt.ABORTED:return oe.ABORTED;case Zt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Zt.DATA_LOSS:return oe.DATA_LOSS;default:return Ue(39323,{code:i})}}(rt=Zt||(Zt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Ir([4294967295,4294967295],0);function Ov(i){const e=GA().encode(i),n=new m_;return n.update(e),new Uint8Array(n.digest())}function Vv(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([l,u],0)]}class Rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ec(`Invalid padding: ${n}`);if(r<0)throw new ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ir.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Ir.fromNumber(r)));return l.compare(KA)===1&&(l=new Ir([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ov(e),[r,l]=Vv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Rp(u,l,n);return r.forEach((y=>f.insert(y))),f}insert(e){if(this.ge===0)return;const n=Ov(e),[r,l]=Vv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new th(ze.min(),l,new Dt(tt),Oi(),nt())}}class Nc{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nc(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class e1{constructor(e,n){this.targetId=e,this.Ce=n}}class t1{constructor(e,n,r=xn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Lv{constructor(){this.ve=0,this.Fe=Pv(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),n=nt(),r=nt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Ue(38017,{changeType:u})}})),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=ld(),this.He=ld(),this.Ye=new Dt(tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Gm(u))if(r===0){const f=new De(u.path);this.et(n,f,Tn.newNoDocument(f,ze.min()))}else ht(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const y=this.ut(e),p=y?this.ct(y,e,f):1;if(p!==0){this.it(n);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let f,y;try{f=Vr(r).toUint8Array()}catch(p){if(p instanceof N_)return Dl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new Rp(f,l,u)}catch(p){return Dl(p instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const y=this.ot(f);if(y){if(u.current&&Gm(y.target)){const p=new De(y.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Tn.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=nt();this.He.forEach(((u,f)=>{let y=!0;f.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new th(e,n,this.Ye,this.je,r);return this.je=Oi(),this.Je=ld(),this.He=ld(),this.Ye=new Dt(tt),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Lv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new sn(tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new sn(tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ld(){return new Dt(De.comparator)}function Pv(){return new Dt(De.comparator)}const $A={asc:"ASCENDING",desc:"DESCENDING"},QA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XA={and:"AND",or:"OR"};class WA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(i,e){return i.useProto3Json||$d(e)?e:{value:e}}function Ld(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function ZA(i,e){return Ld(i,e.toTimestamp())}function ii(i){return ht(!!i,49232),ze.fromTimestamp((function(n){const r=Or(n);return new jt(r.seconds,r.nanos)})(i))}function Ip(i,e){return $m(i,e).canonicalString()}function $m(i,e){const n=(function(l){return new St(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?n:n.child(e)}function s1(i){const e=St.fromString(i);return ht(o1(e),10190,{key:e.toString()}),e}function Qm(i,e){return Ip(i.databaseId,e.path)}function wm(i,e){const n=s1(e);if(n.get(1)!==i.databaseId.projectId)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new De(r1(n))}function i1(i,e){return Ip(i.databaseId,e)}function JA(i){const e=s1(i);return e.length===4?St.emptyPath():r1(e)}function Xm(i){return new St(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function r1(i){return ht(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Uv(i,e,n){return{name:Qm(i,e),fields:n.value.mapValue.fields}}function ej(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ue(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(ht(_===void 0||typeof _=="string",58123),xn.fromBase64String(_||"")):(ht(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),xn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&(function(x){const _=x.code===void 0?oe.UNKNOWN:J_(x.code);return new Ee(_,x.message||"")})(f);n=new t1(r,l,u,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=wm(i,r.document.name),u=ii(r.document.updateTime),f=r.document.createTime?ii(r.document.createTime):ze.min(),y=new Un({mapValue:{fields:r.document.fields}}),p=Tn.newFoundDocument(l,u,f,y),x=r.targetIds||[],_=r.removedTargetIds||[];n=new xd(x,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=wm(i,r.document),u=r.readTime?ii(r.readTime):ze.min(),f=Tn.newNoDocument(l,u),y=r.removedTargetIds||[];n=new xd([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=wm(i,r.document),u=r.removedTargetIds||[];n=new xd([],u,l,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new HA(l,u),y=r.targetId;n=new e1(y,f)}}return n}function tj(i,e){let n;if(e instanceof Sc)n={update:Uv(i,e.key,e.value)};else if(e instanceof eh)n={delete:Qm(i,e.key)};else if(e instanceof Hr)n={update:Uv(i,e.key,e.data),updateMask:uj(e.fieldMask)};else{if(!(e instanceof zA))return Ue(16599,{Vt:e.type});n={verify:Qm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const y=f.transform;if(y instanceof Od)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof gc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Vd)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Ue(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:ZA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ue(27497)})(i,e.precondition)),n}function nj(i,e){return i&&i.length>0?(ht(e!==void 0,14353),i.map((n=>(function(l,u){let f=l.updateTime?ii(l.updateTime):ii(u);return f.isEqual(ze.min())&&(f=ii(u)),new LA(f,l.transformResults||[])})(n,e)))):[]}function sj(i,e){return{documents:[i1(i,e.path)]}}function ij(i,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i1(i,l);const u=(function(x){if(x.length!==0)return l1(ks.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(S){return{field:El(S.field),direction:lj(S.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const y=Ym(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function rj(i){let e=JA(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){ht(r===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(E){const S=a1(E);return S instanceof ks&&V_(S)?S.getFilters():[S]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((S=>(function(F){return new pc(Tl(F.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(S)))})(n.orderBy));let y=null;n.limit&&(y=(function(E){let S;return S=typeof E=="object"?E.value:E,$d(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(E){const S=!!E.before,z=E.values||[];return new Dd(z,S)})(n.startAt));let x=null;return n.endAt&&(x=(function(E){const S=!E.before,z=E.values||[];return new Dd(z,S)})(n.endAt)),TA(e,l,f,u,y,"F",p,x)}function aj(i,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function a1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tl(n.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Tl(n.unaryFilter.field);return en.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Tl(n.unaryFilter.field);return en.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Tl(n.unaryFilter.field);return en.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(i):i.fieldFilter!==void 0?(function(n){return en.create(Tl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ks.create(n.compositeFilter.filters.map((r=>a1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(n.compositeFilter.op))})(i):Ue(30097,{filter:i})}function lj(i){return $A[i]}function oj(i){return QA[i]}function cj(i){return XA[i]}function El(i){return{fieldPath:i.canonicalString()}}function Tl(i){return yn.fromServerFormat(i.fieldPath)}function l1(i){return i instanceof en?(function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:El(n.field),op:oj(n.op),value:n.value}}})(i):i instanceof ks?(function(n){const r=n.getFilters().map((l=>l1(l)));return r.length===1?r[0]:{compositeFilter:{op:cj(n.op),filters:r}}})(i):Ue(54877,{filter:i})}function uj(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function o1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,l,u=ze.min(),f=ze.min(),y=xn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.yt=e}}function hj(i){const e=rj({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Cn=new mj}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(Mr.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class mj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new sn(St.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new sn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c1=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(c1,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ll(0)}static cr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="LruGarbageCollector",pj=1048576;function qv([i,e],[n,r]){const l=tt(i,n);return l===0?tt(e,r):l}class gj{constructor(e){this.Ir=e,this.buffer=new sn(qv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(Bv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gl(n)?Ne(Bv,"Ignoring IndexedDB error during garbage collection: ",n):await Fl(n)}await this.Vr(3e5)}))}}class xj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Yd.ce);const r=new gj(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(zv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,f,y,p,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,f=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(r=E,y=Date.now(),this.removeTargets(e,r,n)))).next((E=>(u=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(x=Date.now(),_l()<=et.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${l} in `+(y-f)+`ms
	Removed ${u} targets in `+(p-y)+`ms
	Removed ${E} documents in `+(x-p)+`ms
Total Duration: ${x-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function vj(i,e){return new xj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&lc(r.mutation,l,Wn.empty(),jt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=nt()){const l=wa();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let f=Jo();return u.forEach(((y,p)=>{f=f.insert(y,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=wa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,nt())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,y)=>{n.set(f,y)}))}))}computeViews(e,n,r,l){let u=Oi();const f=ac(),y=(function(){return ac()})();return n.forEach(((p,x)=>{const _=r.get(x.key);l.has(x.key)&&(_===void 0||_.mutation instanceof Hr)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),lc(_.mutation,x,_.mutation.getFieldMask(),jt.now())):f.set(x.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((x,_)=>f.set(x,_))),n.forEach(((x,_)=>y.set(x,new _j(_,f.get(x)??null)))),y)))}recalculateAndSaveOverlays(e,n){const r=ac();let l=new Dt(((f,y)=>f-y)),u=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const y of f)y.keys().forEach((p=>{const x=n.get(p);if(x===null)return;let _=r.get(p)||Wn.empty();_=y.applyToLocalView(x,_),r.set(p,_);const E=(l.get(y.batchId)||nt()).add(p);l=l.insert(y.batchId,E)}))})).next((()=>{const f=[],y=l.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),x=p.key,_=p.value,E=G_();_.forEach((S=>{if(!u.has(S)){const z=W_(n.get(S),r.get(S));z!==null&&E.set(S,z),u=u.add(S)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,E))}return he.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return De.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):he.resolve(wa());let y=dc,p=u;return f.next((x=>he.forEach(x,((_,E)=>(y<E.largestBatchId&&(y=E.largestBatchId),u.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,p,x,nt()))).next((_=>({batchId:y,changes:F_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((r=>{let l=Jo();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let f=Jo();return this.indexManager.getCollectionParents(e,u).next((y=>he.forEach(y,(p=>{const x=(function(E,S){return new Kl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,l).next((_=>{_.forEach(((E,S)=>{f=f.insert(E,S)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((f=>{u.forEach(((p,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,Tn.newInvalidDocument(_)))}));let y=Jo();return f.forEach(((p,x)=>{const _=u.get(p);_!==void 0&&lc(_.mutation,x,Wn.empty(),jt.now()),Wd(n,x)&&(y=y.insert(p,x))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return he.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ii(l.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:hj(l.bundledQuery),readTime:ii(l.readTime)}})(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.overlays=new Dt(De.comparator),this.qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wa();return he.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),he.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const l=wa(),u=n.length+1,f=new De(n.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const p=y.getNext().value,x=p.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&p.largestBatchId>r&&l.set(p.getKey(),p)}return he.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Dt(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=wa(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const y=wa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,_)=>y.set(x,_))),!(y.size()>=l)););return he.resolve(y)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new qA(n,r));let u=this.qr.get(n);u===void 0&&(u=nt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Qr=new sn(on.$r),this.Ur=new sn(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new on(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new De(new St([])),r=new on(n,e),l=new on(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new De(new St([])),r=new on(n,e),l=new on(n,e+1);let u=nt();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new on(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return De.comparator(e.key,n.key)||tt(e.Yr,n.Yr)}static Kr(e,n){return tt(e.Yr,n.Yr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new sn(on.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new BA(u,n,r,l);this.mutationQueue.push(f);for(const y of l)this.Zr=this.Zr.add(new on(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return he.resolve(f)}lookupMutationBatch(e,n){return he.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return he.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?wp:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),l=new on(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const y=this.Xr(f.Yr);u.push(y)})),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn(tt);return n.forEach((l=>{const u=new on(l,0),f=new on(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(y=>{r=r.add(y.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;De.isDocumentKey(u)||(u=u.child(""));const f=new on(new De(u),0);let y=new sn(tt);return this.Zr.forEachWhile((p=>{const x=p.key.path;return!!r.isPrefixOf(x)&&(x.length===l&&(y=y.add(p.Yr)),!0)}),f),he.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(n.mutations,(l=>{const u=new on(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new on(n,0),l=this.Zr.firstAfterOrEqual(r);return he.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.ri=e,this.docs=(function(){return new Dt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=Oi();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():Tn.newInvalidDocument(l))})),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=Oi();const f=n.path,y=new De(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:x,value:{document:_}}=p.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||nA(tA(_),r)<=0||(l.has(_.key)||Wd(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return he.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Ue(9500)}ii(e,n){return he.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jj(this)}getSize(e){return he.resolve(this.size)}}class jj extends bj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),he.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.persistence=e,this.si=new ka((n=>Sp(n)),Np),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new kp,this.targetCount=0,this.ai=Ll.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),he.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Pr(n),he.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((f,y)=>{y.sequenceNumber<=n&&r.get(y.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),he.waitFor(u).next((()=>l))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),he.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yd(0),this.li=!1,this.li=!0,this.hi=new Sj,this.referenceDelegate=e(this),this.Pi=new Cj(this),this.indexManager=new fj,this.remoteDocumentCache=(function(l){return new Aj(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dj(n),this.Ii=new Ej(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Nj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const l=new Rj(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Rj extends iA{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Ri=new kp,this.Vi=null}static mi(e){return new Dp(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const l=De.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,ze.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pd{constructor(e,n){this.persistence=e,this.pi=new ka((r=>lA(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=vj(this,n)}static mi(e,n){return new Pd(e,n)}Ei(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return he.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?he.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((y=>{y||(r++,u.removeEntry(f,ze.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}br(e,n,r){return he.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return he.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=nt(),l=nt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Mp(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rT()?8:rA(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Ij;return this.Ss(e,n,f).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,f,y.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(_l()<=et.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(_l()<=et.DEBUG&&Ne("QueryEngine","Query:",wl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(_l()<=et.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):he.resolve())}ys(e,n){if(Rv(n))return he.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Md(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=nt(...u);return this.ps.getDocuments(e,f).next((y=>this.indexManager.getMinOffset(e,r).next((p=>{const x=this.Ds(n,y);return this.Cs(n,x,f,p.readTime)?this.ys(e,Md(n,null,"F")):this.vs(e,x,n,p)}))))})))))}ws(e,n,r,l){return Rv(n)||l.isEqual(ze.min())?he.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,l)?he.resolve(null):(_l()<=et.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),wl(n)),this.vs(e,f,n,eA(l,dc)).next((y=>y)))}))}Ds(e,n){let r=new sn(q_(e));return n.forEach(((l,u)=>{Wd(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return _l()<=et.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",wl(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="LocalStore",Dj=3e8;class Mj{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Dt(tt),this.xs=new ka((u=>Sp(u)),Np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Oj(i,e,n,r){return new Mj(i,e,n,r)}async function d1(i,e){const n=He(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],y=[];let p=nt();for(const x of l){f.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}for(const x of u){y.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(r,p).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:y})))}))}))}function Vj(i,e){const n=He(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,p,x,_){const E=x.batch,S=E.keys();let z=he.resolve();return S.forEach((F=>{z=z.next((()=>_.getEntry(p,F))).next(($=>{const L=x.docVersions.get(F);ht(L!==null,48541),$.version.compareTo(L)<0&&(E.applyToRemoteDocument($,x),$.isValidDocument()&&($.setReadTime(x.commitVersion),_.addEntry($)))}))})),z.next((()=>y.mutationQueue.removeMutationBatch(p,E)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(y){let p=nt();for(let x=0;x<y.mutationResults.length;++x)y.mutationResults[x].transformResults.length>0&&(p=p.add(y.batch.mutations[x].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function h1(i){const e=He(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Lj(i,e){const n=He(i),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];e.targetChanges.forEach(((_,E)=>{const S=l.get(E);if(!S)return;y.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,E))));let z=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(xn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(_.resumeToken,r)),l=l.insert(E,z),(function($,L,re){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Dj?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,z,_)&&y.push(n.Pi.updateTargetData(u,z))}));let p=Oi(),x=nt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),y.push(Pj(u,f,e.documentUpdates).next((_=>{p=_.ks,x=_.qs}))),!r.isEqual(ze.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((E=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));y.push(_)}return he.waitFor(y).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,x))).next((()=>p))})).then((u=>(n.Ms=l,u)))}function Pj(i,e,n){let r=nt(),l=nt();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Oi();return n.forEach(((y,p)=>{const x=u.get(y);p.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(y)),p.isNoDocument()&&p.version.isEqual(ze.min())?(e.removeEntry(y,p.readTime),f=f.insert(y,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),f=f.insert(y,p)):Ne(Op,"Ignoring outdated watch update for ",y,". Current version:",x.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function Uj(i,e){const n=He(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zj(i,e){const n=He(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,he.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new Ar(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Wm(i,e,n){const r=He(i),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Gl(f))throw f;Ne(Op,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Hv(i,e,n){const r=He(i);let l=ze.min(),u=nt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,x,_){const E=He(p),S=E.xs.get(_);return S!==void 0?he.resolve(E.Ms.get(S)):E.Pi.getTargetData(x,_)})(r,f,si(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,y.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:ze.min(),n?u:nt()))).next((y=>(Bj(r,NA(e),y),{documents:y,Qs:u})))))}function Bj(i,e,n){let r=i.Os.get(e)||ze.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class Fv{constructor(){this.activeTargetIds=kA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qj{constructor(){this.Mo=new Fv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="ConnectivityMonitor";class Kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(Gv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(Gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function Zm(){return od===null?od=(function(){return 268435456+Math.round(2147483648*Math.random())})():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",Fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Id?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const f=Zm(),y=this.zo(e,n.toUriEncodedString());Ne(Em,`Sending RPC '${e}' ${f}:`,y,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,u);const{host:x}=new URL(y),_=zl(x);return this.Jo(e,y,p,r,_).then((E=>(Ne(Em,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Dl(Em,`RPC '${e}' ${f} failed with error: `,E,"url: ",y,"request:",r),E}))}Ho(e,n,r,l,u,f){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=Fj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class Yj extends Gj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const f=Zm();return new Promise(((y,p)=>{const x=new p_;x.setWithCredentials(!0),x.listenOnce(g_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case md.NO_ERROR:const E=x.getResponseJson();Ne(wn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),y(E);break;case md.TIMEOUT:Ne(wn,`RPC '${e}' ${f} timed out`),p(new Ee(oe.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const S=x.getStatus();if(Ne(wn,`RPC '${e}' ${f} failed with status:`,S,"response text:",x.getResponseText()),S>0){let z=x.getResponseJson();Array.isArray(z)&&(z=z[0]);const F=z?.error;if(F&&F.status&&F.message){const $=(function(re){const ne=re.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ne)>=0?ne:oe.UNKNOWN})(F.status);p(new Ee($,F.message))}else p(new Ee(oe.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Ee(oe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ne(wn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(l);Ne(wn,`RPC '${e}' ${f} sending request:`,l),x.send(n,"POST",_,r,15)}))}T_(e,n,r){const l=Zm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=v_(),y=x_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const _=u.join("");Ne(wn,`Creating RPC '${e}' stream ${l}: ${_}`,p);const E=f.createWebChannel(_,p);this.I_(E);let S=!1,z=!1;const F=new Kj({Yo:L=>{z?Ne(wn,`Not sending because RPC '${e}' stream ${l} is closed:`,L):(S||(Ne(wn,`Opening RPC '${e}' stream ${l} transport.`),E.open(),S=!0),Ne(wn,`RPC '${e}' stream ${l} sending:`,L),E.send(L))},Zo:()=>E.close()}),$=(L,re,ne)=>{L.listen(re,(W=>{try{ne(W)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return $(E,Zo.EventType.OPEN,(()=>{z||(Ne(wn,`RPC '${e}' stream ${l} transport opened.`),F.o_())})),$(E,Zo.EventType.CLOSE,(()=>{z||(z=!0,Ne(wn,`RPC '${e}' stream ${l} transport closed`),F.a_(),this.E_(E))})),$(E,Zo.EventType.ERROR,(L=>{z||(z=!0,Dl(wn,`RPC '${e}' stream ${l} transport errored. Name:`,L.name,"Message:",L.message),F.a_(new Ee(oe.UNAVAILABLE,"The operation could not be completed")))})),$(E,Zo.EventType.MESSAGE,(L=>{if(!z){const re=L.data[0];ht(!!re,16349);const ne=re,W=ne?.error||ne[0]?.error;if(W){Ne(wn,`RPC '${e}' stream ${l} received error:`,W);const ue=W.status;let ve=(function(N){const C=Zt[N];if(C!==void 0)return J_(C)})(ue),be=W.message;ve===void 0&&(ve=oe.INTERNAL,be="Unknown error status: "+ue+" with message "+W.message),z=!0,F.a_(new Ee(ve,be)),E.close()}else Ne(wn,`RPC '${e}' stream ${l} received:`,re),F.u_(re)}})),$(y,y_.STAT_EVENT,(L=>{L.stat===zm.PROXY?Ne(wn,`RPC '${e}' stream ${l} detected buffering proxy`):L.stat===zm.NOPROXY&&Ne(wn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i){return new WA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&Ne("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="PersistentStream";class m1{constructor(e,n,r,l,u,f,y,p){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new Ee(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(Yv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ne(Yv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $j extends m1{constructor(e,n,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ej(this.serializer,e),r=(function(u){if(!("targetChange"in u))return ze.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?ze.min():f.readTime?ii(f.readTime):ze.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(u,f){let y;const p=f.target;if(y=Gm(p)?{documents:sj(u,p)}:{query:ij(u,p).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=n1(u,f.resumeToken);const x=Ym(u,f.expectedCount);x!==null&&(y.expectedCount=x)}else if(f.snapshotVersion.compareTo(ze.min())>0){y.readTime=Ld(u,f.snapshotVersion.toTimestamp());const x=Ym(u,f.expectedCount);x!==null&&(y.expectedCount=x)}return y})(this.serializer,e);const r=aj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.q_(n)}}class Qj extends m1{constructor(e,n,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nj(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Xm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>tj(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{}class Wj extends Xj{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,$m(n,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(oe.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Ho(e,$m(n,r),l,f,y,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ee(oe.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Zj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class Jj{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Da(this)&&(Ne(Ia,"Restarting streams for network reachability change."),await(async function(p){const x=He(p);x.Ea.add(4),await Ac(x),x.Ra.set("Unknown"),x.Ea.delete(4),await sh(x)})(this))}))})),this.Ra=new Zj(r,l)}}async function sh(i){if(Da(i))for(const e of i.da)await e(!0)}async function Ac(i){for(const e of i.da)await e(!1)}function p1(i,e){const n=He(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Up(n)?Pp(n):Yl(n).O_()&&Lp(n,e))}function Vp(i,e){const n=He(i),r=Yl(n);n.Ia.delete(e),r.O_()&&g1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Da(n)&&n.Ra.set("Unknown"))}function Lp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(i).Y_(e)}function g1(i,e){i.Va.Ue(e),Yl(i).Z_(e)}function Pp(i){i.Va=new YA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Yl(i).start(),i.Ra.ua()}function Up(i){return Da(i)&&!Yl(i).x_()&&i.Ia.size>0}function Da(i){return He(i).Ea.size===0}function y1(i){i.Va=void 0}async function eC(i){i.Ra.set("Online")}async function tC(i){i.Ia.forEach(((e,n)=>{Lp(i,e)}))}async function nC(i,e){y1(i),Up(i)?(i.Ra.ha(e),Pp(i)):i.Ra.set("Unknown")}async function sC(i,e,n){if(i.Ra.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const y of u.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,f),l.Ia.delete(y),l.Va.removeTarget(y))})(i,e)}catch(r){Ne(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(i,r)}else if(e instanceof xd?i.Va.Ze(e):e instanceof e1?i.Va.st(e):i.Va.tt(e),!n.isEqual(ze.min()))try{const r=await h1(i.localStore);n.compareTo(r)>=0&&await(function(u,f){const y=u.Va.Tt(f);return y.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(p.resumeToken,f))}})),y.targetMismatches.forEach(((p,x)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(xn.EMPTY_BYTE_STRING,_.snapshotVersion)),g1(u,p);const E=new Ar(_.target,p,x,_.sequenceNumber);Lp(u,E)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(r){Ne(Ia,"Failed to raise snapshot:",r),await Ud(i,r)}}async function Ud(i,e,n){if(!Gl(e))throw e;i.Ea.add(1),await Ac(i),i.Ra.set("Offline"),n||(n=()=>h1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ne(Ia,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await sh(i)}))}function x1(i,e){return e().catch((n=>Ud(i,n,e)))}async function ih(i){const e=He(i),n=Pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;iC(e);)try{const l=await Uj(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,rC(e,l)}catch(l){await Ud(e,l)}v1(e)&&b1(e)}function iC(i){return Da(i)&&i.Ta.length<10}function rC(i,e){i.Ta.push(e);const n=Pr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function v1(i){return Da(i)&&!Pr(i).x_()&&i.Ta.length>0}function b1(i){Pr(i).start()}async function aC(i){Pr(i).ra()}async function lC(i){const e=Pr(i);for(const n of i.Ta)e.ea(n.mutations)}async function oC(i,e,n){const r=i.Ta.shift(),l=Cp.from(r,e,n);await x1(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await ih(i)}async function cC(i,e){e&&Pr(i).X_&&await(async function(r,l){if((function(f){return FA(f)&&f!==oe.ABORTED})(l.code)){const u=r.Ta.shift();Pr(r).B_(),await x1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await ih(r)}})(i,e),v1(i)&&b1(i)}async function $v(i,e){const n=He(i);n.asyncQueue.verifyOperationInProgress(),Ne(Ia,"RemoteStore received new credentials");const r=Da(n);n.Ea.add(3),await Ac(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sh(n)}async function uC(i,e){const n=He(i);e?(n.Ea.delete(2),await sh(n)):e||(n.Ea.add(2),await Ac(n),n.Ra.set("Unknown"))}function Yl(i){return i.ma||(i.ma=(function(n,r,l){const u=He(n);return u.sa(),new $j(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:eC.bind(null,i),t_:tC.bind(null,i),r_:nC.bind(null,i),H_:sC.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Up(i)?Pp(i):i.Ra.set("Unknown")):(await i.ma.stop(),y1(i))}))),i.ma}function Pr(i){return i.fa||(i.fa=(function(n,r,l){const u=He(n);return u.sa(),new Qj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:aC.bind(null,i),r_:cC.bind(null,i),ta:lC.bind(null,i),na:oC.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ih(i)):(await i.fa.stop(),i.Ta.length>0&&(Ne(Ia,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const f=Date.now()+r,y=new zp(e,n,f,l,u);return y.start(r),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(i,e){if(Mi("AsyncQueue",`${e}: ${i}`),Gl(i))return new Ee(oe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ga=new Dt(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Pl{constructor(e,n,r,l,u,f,y,p,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,l,u){const f=[];return n.forEach((y=>{f.push({type:0,doc:y})})),new Pl(e,n,Rl.emptySet(n),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hC{constructor(){this.queries=Xv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=He(n),u=l.queries;l.queries=Xv(),u.forEach(((f,y)=>{for(const p of y.Sa)p.onError(r)}))})(this,new Ee(oe.ABORTED,"Firestore shutting down"))}}function Xv(){return new ka((i=>B_(i)),Xd)}async function _1(i,e){const n=He(i);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new dC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const y=Bp(f,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(y)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&qp(n)}async function w1(i,e){const n=He(i),r=e.query;let l=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fC(i,e){const n=He(i);let r=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const y of f.Sa)y.Fa(l)&&(r=!0);f.wa=l}}r&&qp(n)}function mC(i,e,n){const r=He(i),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function qp(i){i.Ca.forEach((e=>{e.next()}))}var Jm,Wv;(Wv=Jm||(Jm={})).Ma="default",Wv.Cache="cache";class E1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class pC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=q_(e),this.tu=new Rl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Qv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,y=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((_,E)=>{const S=l.get(_),z=Wd(this.query,E)?E:null,F=!!S&&this.mutatedKeys.has(S.key),$=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let L=!1;S&&z?S.data.isEqual(z.data)?F!==$&&(r.track({type:3,doc:z}),L=!0):this.su(S,z)||(r.track({type:2,doc:z}),L=!0,(p&&this.eu(z,p)>0||x&&this.eu(z,x)<0)&&(y=!0)):!S&&z?(r.track({type:0,doc:z}),L=!0):S&&!z&&(r.track({type:1,doc:S}),L=!0,(p||x)&&(y=!0)),L&&(z?(f=f.add(z),u=$?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(z,F){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:L})}};return $(z)-$(F)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),l=l??!1;const y=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,x=p!==this.Za;return this.Za=p,f.length!==0||x?{snapshot:new Pl(this.query,e.tu,u,f,e.mutatedKeys,p===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new S1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new T1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=nt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hp="SyncEngine";class gC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yC{constructor(e){this.key=e,this.hu=!1}}class xC{constructor(e,n,r,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ka((y=>B_(y)),Xd),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(De.comparator),this.Au=new Map,this.Ru=new kp,this.Vu={},this.mu=new Map,this.fu=Ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vC(i,e,n=!0){const r=I1(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await N1(r,e,n,!0),l}async function bC(i,e){const n=I1(i);await N1(n,e,!0,!1)}async function N1(i,e,n,r){const l=await zj(i.localStore,si(e)),u=l.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let y;return r&&(y=await _C(i,e,u,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&p1(i.remoteStore,l),y}async function _C(i,e,n,r,l){i.pu=(E,S,z)=>(async function($,L,re,ne){let W=L.view.ru(re);W.Cs&&(W=await Hv($.localStore,L.query,!1).then((({documents:R})=>L.view.ru(R,W))));const ue=ne&&ne.targetChanges.get(L.targetId),ve=ne&&ne.targetMismatches.get(L.targetId)!=null,be=L.view.applyChanges(W,$.isPrimaryClient,ue,ve);return Jv($,L.targetId,be.au),be.snapshot})(i,E,S,z);const u=await Hv(i.localStore,e,!0),f=new pC(e,u.Qs),y=f.ru(u.documents),p=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",l),x=f.applyChanges(y,i.isPrimaryClient,p);Jv(i,n,x.au);const _=new gC(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),x.snapshot}async function wC(i,e,n){const r=He(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Xd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Wm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Vp(r.remoteStore,l.targetId),ep(r,l.targetId)})).catch(Fl)):(ep(r,l.targetId),await Wm(r.localStore,l.targetId,!0))}async function EC(i,e){const n=He(i),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(n.remoteStore,r.targetId))}async function TC(i,e,n){const r=IC(i);try{const l=await(function(f,y){const p=He(f),x=jt.now(),_=y.reduce(((z,F)=>z.add(F.key)),nt());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let F=Oi(),$=nt();return p.Ns.getEntries(z,_).next((L=>{F=L,F.forEach(((re,ne)=>{ne.isValidDocument()||($=$.add(re))}))})).next((()=>p.localDocuments.getOverlayedDocuments(z,F))).next((L=>{E=L;const re=[];for(const ne of y){const W=UA(ne,E.get(ne.key).overlayedDocument);W!=null&&re.push(new Hr(ne.key,W,D_(W.value.mapValue),jn.exists(!0)))}return p.mutationQueue.addMutationBatch(z,x,re,y)})).next((L=>{S=L;const re=L.applyToLocalDocumentSet(E,$);return p.documentOverlayCache.saveOverlays(z,L.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:F_(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,y,p){let x=f.Vu[f.currentUser.toKey()];x||(x=new Dt(tt)),x=x.insert(y,p),f.Vu[f.currentUser.toKey()]=x})(r,l.batchId,n),await jc(r,l.changes),await ih(r.remoteStore)}catch(l){const u=Bp(l,"Failed to persist write");n.reject(u)}}async function A1(i,e){const n=He(i);try{const r=await Lj(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ht(f.hu,14607):l.removedDocuments.size>0&&(ht(f.hu,42227),f.hu=!1))})),await jc(n,r,e)}catch(r){await Fl(r)}}function Zv(i,e,n){const r=He(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,f)=>{const y=f.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(f,y){const p=He(f);p.onlineState=y;let x=!1;p.queries.forEach(((_,E)=>{for(const S of E.Sa)S.va(y)&&(x=!0)})),x&&qp(p)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SC(i,e,n){const r=He(i);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new Dt(De.comparator);f=f.insert(u,Tn.newNoDocument(u,ze.min()));const y=nt().add(u),p=new th(ze.min(),new Map,new Dt(tt),f,y);await A1(r,p),r.du=r.du.remove(u),r.Au.delete(e),Fp(r)}else await Wm(r.localStore,e,!1).then((()=>ep(r,e,n))).catch(Fl)}async function NC(i,e){const n=He(i),r=e.batch.batchId;try{const l=await Vj(n.localStore,e);C1(n,r,null),j1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jc(n,l)}catch(l){await Fl(l)}}async function AC(i,e,n){const r=He(i);try{const l=await(function(f,y){const p=He(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return p.mutationQueue.lookupMutationBatch(x,y).next((E=>(ht(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(x,E)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,_,y))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>p.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);C1(r,e,n),j1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jc(r,l)}catch(l){await Fl(l)}}function j1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function C1(i,e,n){const r=He(i);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function ep(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||R1(i,r)}))}function R1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Vp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Fp(i))}function Jv(i,e,n){for(const r of n)r instanceof T1?(i.Ru.addReference(r.key,e),jC(i,r)):r instanceof S1?(Ne(Hp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||R1(i,r.key)):Ue(19791,{wu:r})}function jC(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(Ne(Hp,"New document in limbo: "+n),i.Eu.add(r),Fp(i))}function Fp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new De(St.fromString(e)),r=i.fu.next();i.Au.set(r,new yC(n)),i.du=i.du.insert(n,r),p1(i.remoteStore,new Ar(si(Ap(n.path)),r,"TargetPurposeLimboResolution",Yd.ce))}}async function jc(i,e,n){const r=He(i),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((y,p)=>{f.push(r.pu(p,e,n).then((x=>{if((x||n)&&r.isPrimaryClient){const _=x?!x.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(x){l.push(x);const _=Mp.As(p.targetId,x);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(p,x){const _=He(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>he.forEach(x,(S=>he.forEach(S.Es,(z=>_.persistence.referenceDelegate.addReference(E,S.targetId,z))).next((()=>he.forEach(S.ds,(z=>_.persistence.referenceDelegate.removeReference(E,S.targetId,z)))))))))}catch(E){if(!Gl(E))throw E;Ne(Op,"Failed to update sequence numbers: "+E)}for(const E of x){const S=E.targetId;if(!E.fromCache){const z=_.Ms.get(S),F=z.snapshotVersion,$=z.withLastLimboFreeSnapshotVersion(F);_.Ms=_.Ms.insert(S,$)}}})(r.localStore,u))}async function CC(i,e){const n=He(i);if(!n.currentUser.isEqual(e)){Ne(Hp,"User change. New user:",e.toKey());const r=await d1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((y=>{y.forEach((p=>{p.reject(new Ee(oe.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jc(n,r.Ls)}}function RC(i,e){const n=He(i),r=n.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let l=nt();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const y=n.Tu.get(f);l=l.unionWith(y.view.nu)}return l}}function I1(i){const e=He(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SC.bind(null,e),e.Pu.H_=fC.bind(null,e.eventManager),e.Pu.yu=mC.bind(null,e.eventManager),e}function IC(i){const e=He(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Oj(this.persistence,new kj,e.initialUser,this.serializer)}Cu(e){return new u1(Dp.mi,this.serializer)}Du(e){return new qj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class kC extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof Pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new u1((r=>Pd.mi(r,n)),this.serializer)}}class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),await uC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hC})()}createDatastore(e){const n=nh(e.databaseInfo.databaseId),r=(function(u){return new Yj(u)})(e.databaseInfo);return(function(u,f,y,p){return new Wj(u,f,y,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,f,y){return new Jj(r,l,u,f,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>Zv(this.syncEngine,n,0)),(function(){return Kv.v()?new Kv:new Hj})())}createSyncEngine(e,n){return(function(l,u,f,y,p,x,_){const E=new xC(l,u,f,y,p,x);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=He(n);Ne(Ia,"RemoteStore shutting down."),r.Ea.add(5),await Ac(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class DC{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Ne(Ur,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Ne(Ur,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sm(i,e){i.asyncQueue.verifyOperationInProgress(),Ne(Ur,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await d1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function eb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await MC(i);Ne(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>$v(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>$v(e.remoteStore,l))),i._onlineComponents=e}async function MC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ne(Ur,"Using user provided OfflineComponentProvider");try{await Sm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Dl("Error using user provided cache. Falling back to memory cache: "+n),await Sm(i,new zd)}}else Ne(Ur,"Using default OfflineComponentProvider"),await Sm(i,new kC(void 0));return i._offlineComponents}async function D1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ne(Ur,"Using user provided OnlineComponentProvider"),await eb(i,i._uninitializedComponentsProvider._online)):(Ne(Ur,"Using default OnlineComponentProvider"),await eb(i,new tp))),i._onlineComponents}function OC(i){return D1(i).then((e=>e.syncEngine))}async function np(i){const e=await D1(i),n=e.eventManager;return n.onListen=vC.bind(null,e.syncEngine),n.onUnlisten=wC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EC.bind(null,e.syncEngine),n}function VC(i,e,n={}){const r=new kr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,y,p,x){const _=new k1({next:S=>{_.Nu(),f.enqueueAndForget((()=>w1(u,E))),S.fromCache&&p.source==="server"?x.reject(new Ee(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(S)},error:S=>x.reject(S)}),E=new E1(y,_,{includeMetadataChanges:!0,qa:!0});return _1(u,E)})(await np(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firestore.googleapis.com",nb=!0;class sb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O1,this.ssl=nb}else this.host=e.host,this.ssl=e.ssl??nb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pj)throw new Ee(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new HN;switch(r.type){case"firstParty":return new YN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=tb.get(n);r&&(Ne("ComponentProvider","Removing Datastore"),tb.delete(n),r.terminate())})(this),Promise.resolve()}}function LC(i,e,n,r={}){i=Zn(i,rh);const l=zl(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;l&&(Nb(`https://${y}`),Ab("Firestore",!0)),u.host!==O1&&u.host!==y&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:y,ssl:l,emulatorOptions:r};if(!Na(p,f)&&(i._setSettings(p),r.mockUserToken)){let x,_;if(typeof r.mockUserToken=="string")x=r.mockUserToken,_=En.MOCK_USER;else{x=XE(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ee(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new En(E)}i._authCredentials=new FN(new __(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tc(n,qt._jsonSchema))return new qt(e,r||null,new De(St.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:tn("string",qt._jsonSchemaVersion),referencePath:tn("string")};class Dr extends Bi{constructor(e,n,r){super(e,n,Ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new De(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function bt(i,e,...n){if(i=Ht(i),w_("collection","path",e),i instanceof rh){const r=St.fromString(e,...n);return gv(r),new Dr(i,null,r)}{if(!(i instanceof qt||i instanceof Dr))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(St.fromString(e,...n));return gv(r),new Dr(i.firestore,null,r)}}function It(i,e,...n){if(i=Ht(i),arguments.length===1&&(e=_p.newId()),w_("doc","path",e),i instanceof rh){const r=St.fromString(e,...n);return pv(r),new qt(i,null,new De(r))}{if(!(i instanceof qt||i instanceof Dr))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(St.fromString(e,...n));return pv(r),new qt(i.firestore,i instanceof Dr?i.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="AsyncQueue";class rb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f1(this,"async_queue_retry"),this._c=()=>{const r=Tm();r&&Ne(ib,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gl(e))throw e;Ne(ib,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",ab(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=zp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ue(47125,{Pc:ab(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ab(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Vi extends rh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new rb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rb(e),this._firestoreClient=void 0,await e}}}function PC(i,e){const n=typeof i=="object"?i:Ib(),r=typeof i=="string"?i:Id,l=dp(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=$E("firestore");u&&LC(l,...u)}return l}function ah(i){if(i._terminated)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||UC(i),i._firestoreClient}function UC(i){const e=i._freezeSettings(),n=(function(l,u,f,y){return new uA(l,u,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,M1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new DC(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(xn.fromBase64String(e))}catch(n){throw new Ee(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fs(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tc(e,fs._jsonSchema))return fs.fromBase64String(e.bytes)}}fs._jsonSchemaVersion="firestore/bytes/1.0",fs._jsonSchema={type:tn("string",fs._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(Tc(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:tn("string",ri._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tc(e,ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ai(e.vectorValues);throw new Ee(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ai._jsonSchemaVersion="firestore/vectorValue/1.0",ai._jsonSchema={type:tn("string",ai._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^__.*__$/;class BC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class V1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function L1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:i})}}class Kp{constructor(e,n,r,l,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(L1(this.Ac)&&zC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nh(e)}Cc(e,n,r,l=!1){return new Kp({Ac:e,methodName:n,Dc:r,path:yn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(i){const e=i._freezeSettings(),n=nh(i._databaseId);return new qC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Yp(i,e,n,r,l,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,l);$p("Data must be an object, but it was:",f,r);const y=z1(r,f);let p,x;if(u.merge)p=new Wn(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const E of u.mergeFields){const S=sp(e,E,n);if(!f.contains(S))throw new Ee(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);q1(_,S)||_.push(S)}p=new Wn(_),x=f.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,x=f.fieldTransforms;return new BC(new Un(y),p,x)}class lh extends Gp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lh}}function P1(i,e,n,r){const l=i.Cc(1,e,n);$p("Data must be an object, but it was:",l,r);const u=[],f=Un.empty();qr(r,((p,x)=>{const _=Qp(e,p,n);x=Ht(x);const E=l.yc(_);if(x instanceof lh)u.push(_);else{const S=Ic(x,E);S!=null&&(u.push(_),f.set(_,S))}}));const y=new Wn(u);return new V1(f,y,l.fieldTransforms)}function U1(i,e,n,r,l,u){const f=i.Cc(1,e,n),y=[sp(e,r,n)],p=[l];if(u.length%2!=0)throw new Ee(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)y.push(sp(e,u[S])),p.push(u[S+1]);const x=[],_=Un.empty();for(let S=y.length-1;S>=0;--S)if(!q1(x,y[S])){const z=y[S];let F=p[S];F=Ht(F);const $=f.yc(z);if(F instanceof lh)x.push(z);else{const L=Ic(F,$);L!=null&&(x.push(z),_.set(z,L))}}const E=new Wn(x);return new V1(_,E,f.fieldTransforms)}function HC(i,e,n,r=!1){return Ic(n,i.Cc(r?4:3,e))}function Ic(i,e){if(B1(i=Ht(i)))return $p("Unsupported field value:",e,i),z1(i,e);if(i instanceof Gp)return(function(r,l){if(!L1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const y of r){let p=Ic(y,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DA(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=jt.fromDate(r);return{timestampValue:Ld(l.serializer,u)}}if(r instanceof jt){const u=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ld(l.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fs)return{bytesValue:n1(l.serializer,r._byteString)};if(r instanceof qt){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ip(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof ai)return(function(f,y){return{mapValue:{fields:{[I_]:{stringValue:k_},[kd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw y.Sc("VectorValues must only contain numeric values.");return jp(y.serializer,x)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Kd(r)}`)})(i,e)}function z1(i,e){const n={};return S_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(i,((r,l)=>{const u=Ic(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function B1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof ri||i instanceof fs||i instanceof qt||i instanceof Gp||i instanceof ai)}function $p(i,e,n){if(!B1(n)||!E_(n)){const r=Kd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function sp(i,e,n){if((e=Ht(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return Qp(i,e);throw Bd("Field path arguments must be of type string or ",i,!1,void 0,n)}const FC=new RegExp("[~\\*/\\[\\]]");function Qp(i,e,n){if(e.search(FC)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Bd(i,e,n,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${l}`),p+=")"),new Ee(oe.INVALID_ARGUMENT,y+i+p)}function q1(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GC extends H1{data(){return super.data()}}function oh(i,e){return typeof e=="string"?Qp(i,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ee(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xp{}class Wp extends Xp{}function Cn(i,e,...n){let r=[];e instanceof Xp&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((p=>p instanceof Zp)).length,y=u.filter((p=>p instanceof ch)).length;if(f>1||f>0&&y>0)throw new Ee(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class ch extends Wp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ch(e,n,r)}_apply(e){const n=this._parse(e);return G1(e._query,n),new Bi(e.firestore,e.converter,Km(e._query,n))}_parse(e){const n=Rc(e.firestore);return(function(u,f,y,p,x,_,E){let S;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ub(E,_);const F=[];for(const $ of E)F.push(cb(p,u,$));S={arrayValue:{values:F}}}else S=cb(p,u,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ub(E,_),S=HC(y,f,E,_==="in"||_==="not-in");return en.create(x,_,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function KC(i,e,n){const r=e,l=oh("where",i);return ch._create(l,r,n)}class Zp extends Xp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ks.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const y=u.getFlattenedFilters();for(const p of y)G1(f,p),f=Km(f,p)})(e._query,n),new Bi(e.firestore,e.converter,Km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jp extends Wp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jp(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(u,f)})(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Kl(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function zn(i,e="asc"){const n=e,r=oh("orderBy",i);return Jp._create(r,n)}class eg extends Wp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new eg(e,n,r)}_apply(e){return new Bi(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}function ob(i){return eg._create("limit",i,"F")}function cb(i,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&n.indexOf("/")!==-1)throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(St.fromString(n));if(!De.isDocumentKey(r))throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tv(i,new De(r))}if(n instanceof qt)return Tv(i,n._key);throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(n)}.`)}function ub(i,e){if(!Array.isArray(i)||i.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G1(i,e){const n=(function(l,u){for(const f of l)for(const y of f.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YC{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qr(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[kd].arrayValue?.values?.map((r=>Bt(r.doubleValue)));return new ai(n)}convertGeoPoint(e){return new ri(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=Or(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=St.fromString(e);ht(o1(r),9688,{name:e});const l=new fc(r.get(1),r.get(3)),u=new De(r.popFirst(5));return l.isEqual(n)||Mi(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends H1{constructor(e,n,r,l,u,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ea._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:tn("string",Ea._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class vd extends Ea{data(e={}){return super.data(e)}}class Ta{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new tc(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vd(this._firestore,this._userDataWriter,r.key,r,new tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((y=>{const p=new vd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new tc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const p=new vd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new tc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,_=-1;return y.type!==0&&(x=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),_=f.indexOf(y.doc.key)),{type:$C(y.type),doc:p,oldIndex:x,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $C(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:i})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:tn("string",Ta._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class ng extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Sl(i){i=Zn(i,Bi);const e=Zn(i.firestore,Vi),n=ah(e),r=new ng(e);return F1(i._query),VC(n,i._query).then((l=>new Ta(e,r,i,l)))}function QC(i,e,n){i=Zn(i,qt);const r=Zn(i.firestore,Vi),l=tg(i.converter,e,n);return kc(r,[Yp(Rc(r),"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,jn.none())])}function Jn(i,e,n,...r){i=Zn(i,qt);const l=Zn(i.firestore,Vi),u=Rc(l);let f;return f=typeof(e=Ht(e))=="string"||e instanceof Cc?U1(u,"updateDoc",i._key,e,n,r):P1(u,"updateDoc",i._key,e),kc(l,[f.toMutation(i._key,jn.exists(!0))])}function Li(i){return kc(Zn(i.firestore,Vi),[new eh(i._key,jn.none())])}function li(i,e){const n=Zn(i.firestore,Vi),r=It(i),l=tg(i.converter,e);return kc(n,[Yp(Rc(i.firestore),"addDoc",r._key,l,i.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then((()=>r))}function gs(i,...e){i=Ht(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||lb(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lb(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let u,f,y;if(i instanceof qt)f=Zn(i.firestore,Vi),y=Ap(i._key.path),u={next:p=>{e[r]&&e[r](XC(f,i,p))},error:e[r+1],complete:e[r+2]};else{const p=Zn(i,Bi);f=Zn(p.firestore,Vi),y=p._query;const x=new ng(f);u={next:_=>{e[r]&&e[r](new Ta(f,x,p,_))},error:e[r+1],complete:e[r+2]},F1(i._query)}return(function(x,_,E,S){const z=new k1(S),F=new E1(_,z,E);return x.asyncQueue.enqueueAndForget((async()=>_1(await np(x),F))),()=>{z.Nu(),x.asyncQueue.enqueueAndForget((async()=>w1(await np(x),F)))}})(ah(f),y,l,u)}function kc(i,e){return(function(r,l){const u=new kr;return r.asyncQueue.enqueueAndForget((async()=>TC(await OC(r),l,u))),u.promise})(ah(i),e)}function XC(i,e,n){const r=n.docs.get(e._key),l=new ng(i);return new Ea(i,l,e._key,r,new tc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rc(e)}set(e,n,r){this._verifyNotCommitted();const l=Nm(e,this._firestore),u=tg(l.converter,n,r),f=Yp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,jn.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const u=Nm(e,this._firestore);let f;return f=typeof(n=Ht(n))=="string"||n instanceof Cc?U1(this._dataReader,"WriteBatch.update",u._key,n,r,l):P1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Nm(e,this._firestore);return this._mutations=this._mutations.concat(new eh(n._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nm(i,e){if((i=Ht(i)).firestore!==e)throw new Ee(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(i){return ah(i=Zn(i,Vi)),new WC(i,(e=>kc(i,e)))}(function(e,n=!0){(function(l){Hl=l})(Bl),kl(new Aa("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),y=new Vi(new GN(r.getProvider("auth-internal")),new $N(f,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ee(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(x.options.projectId,_)})(f,l),f);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),Rr(dv,hv,e),Rr(dv,hv,"esm2020")})();const JC={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},K1=Rb(JC),ms=UN(K1),Oe=PC(K1),_e={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),TableRows:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 6h18M3 10h18M3 14h18M3 18h18"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},Ke=vb.forwardRef(({className:i="",...e},n)=>c.jsx("input",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),db=vb.forwardRef(({className:i="",...e},n)=>c.jsx("textarea",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),Vt=({children:i,variant:e="primary",className:n="",...r})=>{const l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${l[e]}
        ${n}
      `,...r,children:i})},Y1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Sa=({options:i,selected:e,onChange:n,placeholder:r="Seiniz...",isMulti:l=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[y,p]=J.useState(!1),[x,_]=J.useState(""),E=J.useRef(null);J.useEffect(()=>{const L=re=>{E.current&&!E.current.contains(re.target)&&p(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const S=L=>{if(l){const re=e.includes(L)?e.filter(ne=>ne!==L):[...e,L];n(re)}else n(L),p(!1),_("")},z=L=>{_(L.target.value),f&&n(L.target.value)},F=l?e.length>0?`(${e.length})`:"":e||r,$=i.filter(L=>L.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Ke,{placeholder:r,value:e,onChange:z,onFocus:()=>p(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>p(!y),children:c.jsx(_e.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>p(!y),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${l&&e.length>0||!l&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[l&&c.jsx(_e.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:l?`${r} ${F}`:F})]}),c.jsx(_e.ChevronDown,{})]}),y&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:L=>_(L.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[$.map(L=>{const re=l?e.includes(L):e===L;return c.jsxs("div",{onClick:()=>f?n(L):S(L),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${re?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[l&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${re?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:re&&c.jsx(_e.Check,{})}),c.jsx("span",{className:"truncate",children:L})]}),u&&c.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),u(L)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(_e.Trash,{})})]},L)}),$.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),l&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>n([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},zr=({isOpen:i,onClose:e,title:n,children:r,maxWidth:l="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${l} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,ps=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),sg=({startDate:i,endDate:e,onStartChange:n,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:l=>n(l.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:l=>r(l.target.value)})]}),Am={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function eR(){const[i,e]=J.useState(!0),[n,r]=J.useState(""),[l,u]=J.useState(""),[f,y]=J.useState(""),[p,x]=J.useState(""),[_,E]=J.useState(!1),S=async $=>{$.preventDefault(),y(""),x(""),E(!0);try{if(i)await TS(ms,n,l);else{const re=(await ES(ms,n,l)).user;await QC(It(Oe,"users",re.uid),{email:re.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(L){y(F(L.code))}finally{E(!1)}},z=async()=>{if(!n){y("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await wS(ms,n),x("ifre sfrlama balants e-posta adresinize gnderildi."),y("")}catch($){y(F($.code))}},F=$=>{switch($){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+$}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),p&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:p}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Am.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:n,onChange:$=>r($.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Am.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:l,onChange:$=>u($.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:z,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(Am.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const ip={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tR=i=>{if(!i)return 0;let e=0,n=0;return Object.values(ip).forEach(r=>{r.steps.forEach(l=>{e++,i[r.title.split(" ")[0].toLowerCase()]?.[l.id]&&n++})}),e===0?0:Math.round(n/e*100)},nR=i=>{const e=parseFloat(i.qty)||0,n=parseFloat(i.unitPrice)||0,r=parseFloat(i.vatRate)||0,l=e*n,u=l*(r/100);return l+u},sR=(i,e=1e3)=>{const[n,r]=J.useState(0);return J.useEffect(()=>{let l=0;if(i===0){r(0);return}const u=i/(e/16),f=setInterval(()=>{l+=u,u>0&&l>=i||u<0&&l<=i?(r(i),clearInterval(f)):r(Math.floor(l))},16);return()=>clearInterval(f)},[i,e]),n},cd=({title:i,value:e,icon:n,color:r,subtext:l,isCurrency:u=!1})=>{const f=sR(e),y=u?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(f):f.toLocaleString("tr-TR");return c.jsxs(ps,{className:"p-6 relative overflow-hidden group hover:scale-[1.02] transition-transform duration-300",children:[c.jsx("div",{className:`absolute -right-6 -top-6 w-24 h-24 rounded-full opacity-10 transition-transform group-hover:scale-150 ${r}`}),c.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:`text-2xl font-black ${u&&e<0?"text-red-600":"text-gray-800"}`,children:y})]}),c.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-20 text-opacity-100`,children:n})]}),c.jsx("p",{className:"text-xs text-gray-500 font-medium relative z-10 flex items-center gap-1",children:l})]})};function hb({onNavigate:i,user:e}){const[n,r]=J.useState({customers:0,activeOrdersCount:0,products:0,lowStock:0,generalBalance:0,recentOrders:[]}),[l,u]=J.useState(!0),[f,y]=J.useState({}),[p,x]=J.useState(!1),[_,E]=J.useState(null),S=e?.email==="furkan@avci.jp";J.useEffect(()=>{(async()=>{if(!S){const P=Cn(bt(Oe,"siparisler"),zn("createdAt","desc"),ob(20)),ee=(await Sl(P)).docs.map(Se=>({id:Se.id,...Se.data()}));r(Se=>({...Se,recentOrders:ee})),u(!1);return}const L=await Sl(bt(Oe,"customers")),re=Cn(bt(Oe,"siparisler"),zn("createdAt","desc"),ob(20)),ne=await Sl(re),W=ne.docs.map(P=>({id:P.id,...P.data()})),ue=await Sl(bt(Oe,"inventory_movements")),ve={};ue.docs.forEach(P=>{const A=P.data(),ee=Number(A.quantity)||0,Se=A.action==="add"?ee:-ee;ve[A.productName]||(ve[A.productName]=0),ve[A.productName]+=Se});const be=Object.keys(ve).length,R=Object.values(ve).filter(P=>P<10&&P>0).length,N=await Sl(bt(Oe,"sales"));let C=0,M=0;N.docs.forEach(P=>{const A=P.data();if(A.type==="payment"){const ee=parseFloat(A.amount)||0;A.direction==="in"?M+=ee:C+=ee}else{const ee=(A.items||[]).reduce((Se,K)=>Se+nR(K),0);A.transactionType==="purchase"?M+=ee:C+=ee}});const D=C-M;r({customers:L.size,activeOrdersCount:ne.size,products:be,lowStock:R,generalBalance:D,recentOrders:W}),u(!1)})()},[S]);const z=$=>{y(L=>({...L,[$]:!L[$]}))},F=async($,L)=>{if(!_)return;const re=_.productionStatus||{},ne=re[$]||{},W={...re,[$]:{...ne,[L]:!ne[L]}};E({..._,productionStatus:W});const ue=n.recentOrders.map(ve=>ve.id===_.id?{...ve,productionStatus:W}:ve);r(ve=>({...ve,recentOrders:ue})),await Jn(It(Oe,"siparisler",_.id),{productionStatus:W})};return l?c.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"p-4 sm:p-8 space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/4"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h1",{className:"text-3xl font-black mb-2",children:"Hogeldiniz "}),c.jsx("p",{className:"text-indigo-100 max-w-lg",children:"Erelebiler Ahap Ynetim Paneli. letmenizin durumu hakknda anlk bilgilere buradan ulaabilirsiniz."}),c.jsxs("div",{className:"mt-6 flex gap-3",children:[c.jsx("button",{onClick:()=>i("siparis"),className:"px-5 py-2.5 bg-white text-indigo-600 rounded-xl font-bold text-sm shadow-lg hover:bg-gray-50 transition-colors",children:"Yeni Sipari"}),c.jsx("button",{onClick:()=>i("stok"),className:"px-5 py-2.5 bg-indigo-500/30 text-white border border-white/20 rounded-xl font-bold text-sm hover:bg-indigo-500/50 transition-colors",children:"Stok Ekle"})]})]})]}),S&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(cd,{title:"Genel Bakiye",value:n.generalBalance,icon:c.jsx(_e.Wallet,{className:"w-6 h-6 text-emerald-600"}),color:n.generalBalance>0?"bg-emerald-500":"bg-red-500",subtext:n.generalBalance>0?"Alacakl Durumdasnz":"Borlu Durumdasnz",isCurrency:!0}),c.jsx(cd,{title:"Toplam Mteri",value:n.customers,icon:c.jsx(_e.User,{className:"w-6 h-6 text-indigo-600"}),color:"bg-indigo-500",subtext:"Aktif mteri veritaban"}),c.jsx(cd,{title:"Kaytl Sipari",value:n.activeOrdersCount,icon:c.jsx(_e.Clipboard,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-500",subtext:"Toplam sipari says"}),c.jsx(cd,{title:"Kritik Stok",value:n.lowStock,icon:c.jsx(_e.Box,{className:"w-6 h-6 text-red-600"}),color:"bg-red-500",subtext:"10 adetten az kalan rnler"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs(ps,{className:"col-span-1 p-6 flex flex-col justify-center items-center text-center bg-gradient-to-br from-white/80 to-indigo-50/50",children:[c.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mb-4 text-indigo-600",children:c.jsx(_e.Chart,{})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Hzl lemler"}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 mb-6",children:"Sk kullanlan modllere hzlca eriin."}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[c.jsx("button",{onClick:()=>i("stok"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Stok Kontrol"}),c.jsx("button",{onClick:()=>i("fiyatlandirma"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Maliyet Hesab"}),c.jsx("button",{onClick:()=>i("etiket"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Etiket Bas"}),c.jsx("button",{onClick:()=>i("calisan"),className:"p-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all text-sm font-bold text-gray-600 hover:text-indigo-700",children:"Personel"})]})]}),c.jsxs(ps,{className:"col-span-1 lg:col-span-2 p-6 flex flex-col h-full",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"})," Son Sipariler ve Durum"]}),c.jsx("div",{className:"space-y-3 overflow-y-auto custom-scrollbar max-h-[400px]",children:n.recentOrders.length>0?n.recentOrders.map(($,L)=>{const re=tR($.productionStatus),ne=new Date($.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}),W=f[$.id];return c.jsxs("div",{className:`flex flex-col rounded-xl hover:bg-gray-50 transition-colors border border-transparent hover:border-gray-100 group ${W?"bg-gray-50":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-3",children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[c.jsxs("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold text-xs shrink-0",children:[re,"%"]}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-700 truncate",children:["#",$.siparisNo," - ",$.customerId]}),c.jsx("p",{className:"text-[10px] text-gray-400",children:ne})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-24 h-1.5 bg-gray-200 rounded-full overflow-hidden hidden sm:block",children:c.jsx("div",{className:`h-full rounded-full ${re===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${re}%`}})}),c.jsxs("button",{onClick:()=>z($.id),className:"px-3 py-1.5 bg-white border border-gray-200 text-gray-500 hover:text-indigo-600 hover:border-indigo-200 rounded-lg text-xs font-bold transition-all whitespace-nowrap flex items-center gap-1",children:[W?c.jsx(_e.ChevronUp,{className:"w-3 h-3"}):c.jsx(_e.ChevronDown,{className:"w-3 h-3"}),"retim Durumu"]})]})]}),W&&c.jsx("div",{className:"px-4 pb-4 pt-1",children:c.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(ip).map(([ue,ve])=>c.jsxs("div",{children:[c.jsx("h5",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2 border-b border-gray-100 pb-1",children:ve.title.replace(" KISMI","")}),c.jsx("div",{className:"space-y-1",children:ve.steps.map(be=>{const R=$.productionStatus?.[ue]?.[be.id];return c.jsxs("button",{onClick:()=>F($,ue,be.id),className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-[10px] font-medium transition-colors ${R?"bg-emerald-50 text-emerald-700":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:be.label}),R?c.jsx(_e.Check,{className:"w-3 h-3"}):c.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300"})]},be.id)})})]},ue))})})]},L)}):c.jsx("div",{className:"text-center text-gray-400 py-10",children:"Henz sipari yok."})})]})]}),p&&_&&c.jsx(zr,{isOpen:p,onClose:()=>x(!1),title:"Sipari Durumu Takip",maxWidth:"max-w-3xl",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(ip).map(([$,L])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:L.title}),c.jsx("div",{className:"space-y-2",children:L.steps.map(re=>{const ne=_.productionStatus?.[$]?.[re.id];return c.jsxs("button",{onClick:()=>F(_,$,re.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${ne?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:re.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${ne?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:ne&&c.jsx(_e.Check,{})})]},re.id)})})]},$))})})]})}const uh=i=>i==="USD"?"$":i==="EUR"?"":"",Jt=(i,e="TRY")=>{const n=uh(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" "+n},jm=i=>i===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),iR=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",Il=i=>{if(!i)return"-";const e=new Date(i);return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear()).slice(2)}`},Ul=i=>{const e=parseFloat(i.qty)||0,n=parseFloat(i.unitPrice)||0,r=parseFloat(i.vatRate)||0,l=e*n,u=l*(r/100);return l+u},Cm=i=>{if(!i)return{subtotal:0,totalVAT:0,grandTotal:0};const e=i.reduce((r,l)=>r+(parseFloat(l.qty)||0)*(parseFloat(l.unitPrice)||0),0),n=i.reduce((r,l)=>r+Ul(l),0);return{subtotal:e,totalVAT:n-e,grandTotal:n}},$1=i=>i?i.reduce((e,n)=>e+Ul(n),0):0,rR=(i,e)=>{const n=e.filter(l=>l.customerId===i);let r=0;return n.forEach(l=>{if(l.type==="payment"){const u=parseFloat(l.amount)||0;l.direction==="in"?r-=u:r+=u}else{const u=$1(l.items);l.transactionType==="purchase"?r-=u:r+=u}}),r},Q1=(i,e)=>{let n=e.filter(u=>u.customerId===i);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let r=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,y=u.direction==="out";y?r+=f:r-=f;let p=u.paymentMethod||"-";p==="Kredi Kart"&&(p="KrediK"),l.push({docNo:u.docNo||"-",date:u.date,action:y?"DEME":"TAHSLAT",type:p,note:u.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:y?f:0,alacak:y?0:f,balance:r})}else{const f=u.transactionType==="purchase",y=f?"ALI":"SATI";u.items?.forEach(p=>{const x=Ul(p);f?r-=x:r+=x,l.push({docNo:u.docNo,date:u.date,action:y,type:"-",note:u.note||"",ek:p.ek||"",desc:p.name,qty:p.qty,unitPrice:p.unitPrice,borc:f?0:x,alacak:f?x:0,balance:r})})}}),l},aR=(i,e)=>{let n=e.filter(u=>u.customerId===i);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let r=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,y=u.direction==="out";y?r+=f:r-=f,l.push({docNo:u.docNo||"-",date:u.date,action:y?"DEME YAPILDI":"DEME ALINDI",type:u.paymentMethod||"-",note:u.note||"",borc:y?f:0,alacak:y?0:f,balance:r})}else{const f=u.transactionType==="purchase",y=f?"ALI":"SATI";let p=0;u.items?.forEach(x=>{p+=Ul(x)}),f?r-=p:r+=p,l.push({docNo:u.docNo,date:u.date,action:y,type:"-",note:`${u.items?.length||0} Kalem rn`,borc:f?0:p,alacak:f?p:0,balance:r})}}),l},lR=(i,e)=>{const n=Q1(i.id,e),r=i.currency||"TRY",l=uh(r);let u="data:text/csv;charset=utf-8,\uFEFF";u+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,n.forEach(p=>{const x=S=>Jt(Math.abs(S),r).replace(l,"").trim(),_=(p.balance<0?"-":"")+x(p.balance),E=[`"${p.date}"`,`"${p.docNo}"`,`"${p.action}"`,`"${p.type}"`,`"${p.note}"`,`"${p.ek}"`,`"${p.desc}"`,`"${p.qty}"`,`"${p.unitPrice!=="-"?x(parseFloat(p.unitPrice)):"-"}"`,`"${x(p.borc)}"`,`"${x(p.alacak)}"`,`"${_}"`].join(",");u+=E+`
`});const f=encodeURI(u),y=document.createElement("a");y.setAttribute("href",f),y.setAttribute("download",`${i.name}_Ekstre.csv`),document.body.appendChild(y),y.click(),document.body.removeChild(y)},fb=(i,e,n,r=null)=>{const l=Q1(i.id,e),u=i.currency||"TRY",f=l.filter(z=>r?z.docNo===r:!(n.start&&z.date<n.start||n.end&&z.date>n.end)),y=[];let p=null;f.forEach(z=>{(!p||p.docNo!==z.docNo||p.action!==z.action)&&(p&&y.push(p),p={docNo:z.docNo,date:z.date,action:z.action,type:z.type,items:[]}),p.items.push(z)}),p&&y.push(p);const x=window.open("","","height=800,width=1000");if(!x)return;const _=f.length>0?f[f.length-1].balance:0,E=r?f.reduce((z,F)=>z+(F.borc||0)+(F.alacak||0),0):0,S=`
    <html><head><title>Ekstre - ${i.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }
        body { 
          font-family: 'Helvetica', sans-serif; 
          color: #000; 
          font-size: 10px;
          margin-top: 100px;
        }        
      /* Header */
      .header { position: absolute; top: 0; left: 0; right: 0; height: 90px; display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 5px; }
      .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
      .company-info p { margin: 0; font-size: 9pt; color: #333; }
      .report-info { text-align: right; }
      .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
      
      /* Transaction Group Styling */
      .osman {margin-top: 100px;}
      
      .transaction-block { margin-bottom: 20px; }
      
      .transaction-header {
          background-color: #e5e7eb;
          border: 1px solid #999;
          border-bottom: none;
          padding: 8px;
          font-size: 11pt;
          font-weight: bold;
          display: flex;
          gap: 30px;
          page-break-after: avoid;
      }

      /* Table Styling */
      table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
      
      /* THEAD repetition */
      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }
      
      th { 
          background-color: #f3f4f6; 
          border-bottom: 1px solid #999; 
          padding: 5px; 
          text-align: left; 
          font-weight: bold; 
          font-size: 9pt;
      }
      
      td { 
          border-bottom: 1px solid #ccc; 
          padding: 5px; 
          vertical-align: top; 
          font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }
      
      /* Footer Balance */
      .balance-container {
         margin-top: 20px; 
         text-align: right; 
         font-size: 12pt;
         border-top: 2px solid #000;
         padding-top: 10px;
         page-break-inside: avoid;
      }
    </style>
    </head><body>
      <div class="header">
        <div class="company-info">
          <h1>ERCELEBILER AHSAP</h1>
          <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
          <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
        </div>
        <div class="report-info">
          <h2>${r?"LEM DETAYI":"HESAP EKSTRES"}</h2>
          <p>Sayn: <strong>${i.name}</strong></p>
          <p>${r?`Belge: #${r}`:(n.start?`${Il(n.start)} - `:"")+(n.end?Il(n.end):"Tm")}</p>
        </div>
      </div>

      <!-- LOOP THROUGH GROUPS -->
        ${y.map(z=>{const F=z.action.includes("DEME")||z.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII -->
                <div class="transaction-header">
                    ${`TARIH : ${Il(z.date)} <span style="color:#999; margin:0 5px;">|</span> BELGE : #${z.docNo} <span style="color:#999; margin:0 5px;">|</span> LEM : ${z.action}`}
                </div>

              <!-- CONTENT TABLE -->
              <table>
                  <colgroup>
                      <col style="width: 9%;"> <!-- Tip / Ek -->
                      <col style="width: auto;"> <!-- Aklama -->
                      <col style="width: 4%;"> <!-- Miktar -->
                      <col style="width: 10%;"> <!-- B.Fiyat -->
                      ${r?"":'<col style="width: 15%;">'} <!-- deme (Hidden in single) -->
                      <col style="width: 15%;"> <!-- Tutar -->
                      ${r?"":'<col style="width: 18%;">'} <!-- Bakiye (Hidden in single) -->
                  </colgroup>
                  <thead>
                      <tr>
                          <th>TP / EK</th>
                          <th>AIKLAMA</th>
                          <th class="right">MK.</th>
                          <th class="right">B.FYAT</th>
                          ${r?"":'<th class="right">DEME (A)</th>'}
                          <th class="right">TUTAR (B)</th>
                          ${r?"":'<th class="right">BAKYE</th>'}
                      </tr>
                  </thead>
<tbody>
                        ${z.items.map(L=>{const re=L.borc>0?L.borc:L.alacak,ne=F?L.note||"":L.desc+(L.note?` - ${L.note}`:"");return`
                            <tr>
                                <td>${F?L.type:L.ek||"-"}</td>
                                <td class="col-desc">${ne}</td>
                              <td class="right">${L.qty!=="-"?L.qty:"-"}</td>
                              <td class="right">${L.unitPrice!=="-"?Jt(L.unitPrice,u).replace(uh(u),""):"-"}</td>
                              
                              ${r?"":`<td class="right" style="color:#059669">${L.alacak>0?Jt(L.alacak,u):"-"}</td>`}
                              
                              <td class="right" style="color:#dc2626">
                                 ${r?Jt(re,u):L.borc>0?Jt(L.borc,u):"-"}
                              </td>
                              
                              ${r?"":`
                                  <td class="right bold" style="color:${L.balance>0?"#dc2626":"#059669"}">
                                      ${Jt(Math.abs(L.balance),u)} ${L.balance>0?"(B)":"(A)"}
                                  </td>
                              `}
                          </tr>
                          `}).join("")}
                  </tbody>
              </table>
          </div>
          `}).join("")}

      <div class="balance-container">
         <strong>${r?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
         <span style="font-weight: bold; margin-left: 10px; color:${(r?E:_)>0?"#dc2626":"#059669"}">
           ${r?Jt(E,u):(_<0?"-":"")+Jt(Math.abs(_),u)+(_>0?" (Bor)":" (Alacak)")}
         </span>
      </div>
    </body></html>
  `;x.document.write(S),setTimeout(()=>{x.document.close(),x.print()},500)},oR=(i,e,n)=>{const l=aR(i.id,e).filter(p=>!(n.start&&p.date<n.start||n.end&&p.date>n.end)),u=l.length>0?l[l.length-1].balance:0,f=window.open("","","height=800,width=1000");if(!f)return;const y=`
  <html>
  <head>
    <title>zet Ekstre - ${i.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }

      body {
        font-family: 'Helvetica', sans-serif;
        font-size: 10px;
        margin-top: 100px;
        color: #000;
      }

      /* Header (IDENTICAL) */
      .header {
        position: absolute;
        top: 0; left: 0; right: 0;
        height: 90px;
        display: flex;
        justify-content: space-between;
        border-bottom: 2px solid #000;
        padding-bottom: 5px;
      }

      .company-info h1 {
        font-size: 16pt;
        font-weight: bold;
        margin: 0 0 5px 0;
      }

      .company-info p {
        margin: 0;
        font-size: 9pt;
      }

      .report-info {
        text-align: right;
      }

      .report-info h2 {
        font-size: 14pt;
        margin: 0 0 5px 0;
        color: #4f46e5;
      }

      /* Transaction header (IDENTICAL) */
      .transaction-block {
        margin-bottom: 20px;
      }

      .transaction-header {
        background-color: #e5e7eb;
        border: 1px solid #999;
        border-bottom: none;
        padding: 8px;
        font-size: 11pt;
        font-weight: bold;
        display: flex;
        gap: 30px;
        page-break-after: avoid;
      }

      /* Table (IDENTICAL PHILOSOPHY) */
      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        border: 1px solid #999;
      }

      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }

      th {
        background-color: #f3f4f6;
        border-bottom: 1px solid #999;
        padding: 5px;
        font-size: 9pt;
        text-align: left;
      }

      td {
        border-bottom: 1px solid #ccc;
        padding: 5px;
        font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }

      .balance-container {
        margin-top: 20px;
        text-align: right;
        font-size: 12pt;
        border-top: 2px solid #000;
        padding-top: 10px;
        page-break-inside: avoid;
      }
    </style>
  </head>

  <body>
    <div class="header">
      <div class="company-info">
        <h1>ERCELEBILER AHSAP</h1>
        <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14</p>
        <p>TOSYA / KASTAMONU</p>
      </div>
      <div class="report-info">
        <h2>HESAP ZET</h2>
        <p>Sayn: <strong>${i.name}</strong></p>
        <p>${n.start?Il(n.start):""} - ${n.end?Il(n.end):"Tm"}</p>
      </div>
    </div>

    ${l.map(p=>`
        <div class="transaction-block">
          <div class="transaction-header">
            ${`
        TARIH : ${Il(p.date)}
        <span style="color:#999;">|</span>
        BELGE : #${p.docNo}
        <span style="color:#999;">|</span>
        LEM : ${p.action}
      `}
          </div>

          <table>
            <colgroup>
              <col style="width:auto;">
              <col style="width:20%;">
              <col style="width:20%;">
              <col style="width:20%;">
            </colgroup>

            <thead>
              <tr>
                <th>AIKLAMA</th>
                <th class="right">DEME (A)</th>
                <th class="right">TUTAR (B)</th>
                <th class="right">BAKYE</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td class="col-desc">${p.note||"-"}</td>
                <td class="right" style="color:#059669">${p.alacak>0?Jt(p.alacak):"-"}</td>
                <td class="right" style="color:#dc2626">${p.borc>0?Jt(p.borc):"-"}</td>
                <td class="right bold" style="color:${p.balance>0?"#dc2626":"#059669"}">
                  ${Jt(Math.abs(p.balance))}
                  ${p.balance>0?" (B)":" (A)"}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `).join("")}
    <div class="balance-container">
  <strong>GENEL BAKYE:</strong>
  <span style="
    font-weight: bold;
    margin-left: 10px;
    color:${u>0?"#dc2626":"#059669"};
  ">
    ${(u<0?"-":"")+Jt(Math.abs(u))+(u>0?" (Bor)":" (Alacak)")}
  </span>
</div>
  </body>
  </html>
  `;f.document.write(y),setTimeout(()=>{f.document.close(),f.print()},500)};function cR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState([]),[p,x]=J.useState(!1),[_,E]=J.useState({start:"",end:""}),[S,z]=J.useState({}),[F,$]=J.useState({}),[L,re]=J.useState(!1),[ne,W]=J.useState(!1),[ue,ve]=J.useState(!1),[be,R]=J.useState(null),[N,C]=J.useState(null),[M,D]=J.useState(null),[P,A]=J.useState(null),[ee,Se]=J.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[K,pe]=J.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[q,me]=J.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),[we,O]=J.useState(null);if(J.useEffect(()=>{const X=ms.onAuthStateChanged(Be=>{e(Be),r(!1)}),Te=Cn(bt(Oe,"customers"),zn("createdAt","desc")),$e=gs(Te,Be=>{u(Be.docs.map(Tt=>({id:Tt.id,...Tt.data()})))}),it=Cn(bt(Oe,"sales"),zn("createdAt","desc")),vn=gs(it,Be=>{y(Be.docs.map(Tt=>({id:Tt.id,...Tt.data()})))});return()=>{X(),$e(),vn()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(_e.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const k=X=>{z(Te=>({...Te,[X]:!Te[X]}))},I=X=>O(X),j=X=>X.preventDefault(),H=X=>{if(we===null)return;const Te=[...ee.items],$e=Te[we];Te.splice(we,1),Te.splice(X,0,$e),Se({...ee,items:Te}),O(null)},ae=()=>{D(null),pe({name:"",company:"",phone:"",email:"",currency:"TRY"}),W(!0)},fe=X=>{D(X),pe({name:X.name,company:X.company,phone:X.phone,email:X.email,currency:X.currency||"TRY"}),W(!0)},Ae=async X=>{X.preventDefault();try{const Te={...K,updatedAt:new Date().toISOString()};M?await Jn(It(Oe,"customers",M.id),Te):await li(bt(Oe,"customers"),{...Te,createdAt:new Date().toISOString()}),W(!1)}catch(Te){alert("Hata: "+Te.message)}},Re=async X=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Li(It(Oe,"customers",X))},at=X=>{R(X),A(null);const Te="TH-"+Date.now().toString().slice(-6);me({docNo:Te,amount:0,formattedAmount:jm(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),ve(!0)},ct=(X,Te)=>{R(Te),A(X),me({docNo:X.docNo||"",amount:X.amount,formattedAmount:jm(X.amount),type:X.paymentMethod,direction:X.direction||"in",note:X.note,date:X.date}),ve(!0)},Qe=X=>{const Te=X.target.value.replace(/\D/g,""),$e=Te===""?0:parseInt(Te,10)/100;me({...q,amount:$e,formattedAmount:jm($e)})},Lt=async X=>{if(X.preventDefault(),!!be)try{const Te={customerId:be.id,type:"payment",docNo:q.docNo,amount:parseFloat(q.amount),paymentMethod:q.type,direction:q.direction,note:q.note,date:q.date,createdAt:P?P.createdAt:new Date().toISOString()};P?await Jn(It(Oe,"sales",P.id),Te):await li(bt(Oe,"sales"),Te),ve(!1)}catch(Te){alert("Hata: "+Te.message)}},Et=X=>{R(X),C(null);const Te="DOC-"+Date.now().toString().slice(-6);Se({docNo:Te,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),re(!0)},ce=(X,Te)=>{R(Te),C(X);const $e=(X.items||[]).map(it=>({...it,ek:it.ek||""}));Se({docNo:X.docNo,transactionType:X.transactionType||"sale",date:X.date,description:X.description,status:X.status,items:$e}),re(!0)},ye=async X=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Li(It(Oe,"sales",X))}catch(Te){alert("Hata: "+Te.message)}},ge=async X=>{X.preventDefault();try{const Te={customerId:be.id,...ee,type:"sale",createdAt:N?N.createdAt:new Date().toISOString()};N?await Jn(It(Oe,"sales",N.id),Te):await li(bt(Oe,"sales"),Te),re(!1)}catch(Te){alert("Hata: "+Te.message)}},Le=(X,Te,$e)=>{const it=[...ee.items];it[X][Te]=$e,Se({...ee,items:it})},Me=()=>Se({...ee,items:[...ee.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Ie=X=>Se({...ee,items:ee.items.filter((Te,$e)=>$e!==X)});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(sg,{startDate:_.start,endDate:_.end,onStartChange:X=>E({..._,start:X}),onEndChange:X=>E({..._,end:X})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Y1,{checked:p,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:ae,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(_e.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 columns-1 lg:columns-2 gap-6 space-y-6",children:l.map(X=>{const Te=f.filter(Be=>{const Tt=Be.customerId===X.id;let bn=!0;return _.start&&Be.date<_.start&&(bn=!1),_.end&&Be.date>_.end&&(bn=!1),Tt&&bn}).sort((Be,Tt)=>new Date(Tt.date)-new Date(Be.date)),$e=rR(X.id,f),it=S[X.id],vn=X.currency||"TRY";return c.jsxs(ps,{className:"break-inside-avoid mb-6 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 flex flex-col xl:flex-row xl:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer flex-grow min-w-0 mr-2",onClick:()=>k(X.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-3 shadow-sm",children:c.jsx(_e.User,{})}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 line-clamp-2 leading-snug",children:X.name}),c.jsx("button",{onClick:Be=>{Be.stopPropagation(),fe(X)},className:"text-gray-400 hover:text-indigo-500 transition-colors flex-shrink-0",children:c.jsx(_e.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate",children:X.company})]}),c.jsx("div",{className:"ml-3 text-indigo-400 flex-shrink-0",children:it?c.jsx(_e.ChevronDown,{className:"transform rotate-180"}):c.jsx(_e.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-row items-center justify-end gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"text-right pr-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-lg sm:text-xl font-black whitespace-nowrap ${$e>0?"text-emerald-600":"text-red-500"}`,children:Jt($e,vn)}),c.jsx("span",{className:"text-[9px] text-gray-400 block whitespace-nowrap",children:$e>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Vt,{variant:"success",className:"px-3 py-1.5 text-xs whitespace-nowrap",onClick:()=>at(X),children:[c.jsx(_e.Wallet,{})," ",c.jsx("span",{className:"ml-1",children:"Tahsilat"})]}),c.jsxs(Vt,{variant:"primary",className:"px-3 py-1.5 text-xs whitespace-nowrap",onClick:()=>Et(X),children:[c.jsx(_e.Plus,{})," ",c.jsx("span",{className:"ml-1",children:"lem Yap"})]})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-lg p-0.5 shadow-sm",children:[c.jsx("button",{onClick:()=>fb(X,f,_),className:"p-2 text-indigo-900 hover:text-indigo-900 hover:bg-indigo-50 rounded-lg transition-all",title:"Detayl Rapor",children:c.jsx(_e.TableRows,{className:"text-current"})}),c.jsx("button",{onClick:()=>oR(X,f,_),className:"p-2 text-purple-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all",title:"zet Rapor",children:c.jsx(_e.Clipboard,{className:"text-current"})}),c.jsx("button",{onClick:()=>lR(X,f),className:"p-2 text-emerald-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all",title:"Excel",children:c.jsx(_e.Download,{className:"text-current"})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Re(X.id),className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(_e.Trash,{className:"text-current"})}),"                                        "]})]})]})]}),it&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:Te.map(Be=>{const Tt=Be.type==="payment",bn=Be.transactionType==="purchase",Rn=Be.direction==="out",qi=Tt?Be.amount:$1(Be.items),Fr=F[Be.id];let ci="",cn="",kt="bg-indigo-400",un=`SATI #${Be.docNo}`,_t="+";return Tt?Rn?(un="DEME YAPILDI",ci="bg-red-50/30",cn="text-red-500",kt="bg-red-400",_t="+"):(un="DEME ALINDI",ci="bg-emerald-50/30",cn="text-emerald-600",kt="bg-emerald-400",_t="-"):bn?(ci="bg-red-50/30",cn="text-red-500",kt="bg-red-400",un=`ALI #${Be.docNo}`,_t="-"):(cn="text-emerald-600",kt="bg-emerald-400",_t="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${ci}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${kt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:un}),Tt&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:Be.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:iR(Be.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Tt?Be.note||"-":`${Be.items?.length||0} Kalem rn`}),!Tt&&c.jsxs("button",{onClick:()=>$(Bn=>({...Bn,[Be.id]:!Bn[Be.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[Fr?c.jsx(_e.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(_e.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${cn}`,children:[_t,Jt(qi,vn)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>fb(X,f,_,Be.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(_e.Printer,{})}),Tt?c.jsx("button",{onClick:()=>ct(Be,X),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(_e.Edit,{})}):c.jsx("button",{onClick:()=>ce(Be,X),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(_e.Edit,{})}),c.jsx("button",{onClick:()=>ye(Be.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(_e.Trash,{})})]})]})]}),Fr&&!Tt&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:Be.items?.map((Bn,Hi)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:Bn.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:Bn.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:Bn.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:Jt(Bn.unitPrice,vn)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:Jt(Ul(Bn),vn)})]},Hi))})]})})})]},Be.id)})})]},X.id)})}),ne&&c.jsx(zr,{isOpen:ne,onClose:()=>W(!1),title:M?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[c.jsx(Ke,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:K.name,onChange:X=>pe({...K,name:X.target.value})}),c.jsx(Ke,{placeholder:"Firma (Opsiyonel)",value:K.company,onChange:X=>pe({...K,company:X.target.value})}),c.jsx(Ke,{placeholder:"Telefon",value:K.phone,onChange:X=>pe({...K,phone:X.target.value})}),c.jsx(Ke,{placeholder:"E-Posta",value:K.email,onChange:X=>pe({...K,email:X.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(X=>c.jsx("button",{type:"button",onClick:()=>pe({...K,currency:X}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${K.currency===X?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:X},X))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(Vt,{variant:"secondary",type:"button",onClick:()=>W(!1),children:"ptal"}),c.jsx(Vt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),ue&&c.jsxs(zr,{isOpen:ue,onClose:()=>ve(!1),title:P?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:be?.name}),c.jsxs("form",{onSubmit:Lt,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>me({...q,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${q.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>me({...q,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${q.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(X=>c.jsx("button",{type:"button",onClick:()=>me({...q,type:X}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${q.type===X?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:X},X))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${q.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:q.formattedAmount,onChange:Qe}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:uh(be?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(Ke,{placeholder:"Belge No",value:q.docNo,onChange:X=>me({...q,docNo:X.target.value})}),c.jsx(Ke,{type:"date",required:!0,value:q.date,onChange:X=>me({...q,date:X.target.value})})]}),c.jsx(Ke,{placeholder:"Not (Opsiyonel)",value:q.note,onChange:X=>me({...q,note:X.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(Vt,{variant:"secondary",type:"button",onClick:()=>ve(!1),children:"ptal"}),c.jsx(Vt,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),L&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:ge,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:N?"lemi Dzenle":"Yeni lem"}),c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>Se({...ee,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ee.transactionType==="sale"?"bg-emerald-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP (+)"}),c.jsx("button",{type:"button",onClick:()=>Se({...ee,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${ee.transactionType==="purchase"?"bg-red-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP (-)"})]})]}),c.jsx("button",{type:"button",onClick:()=>re(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Ke,{value:ee.docNo,onChange:X=>Se({...ee,docNo:X.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Ke,{type:"date",required:!0,value:ee.date,onChange:X=>Se({...ee,date:X.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Ke,{value:ee.description,onChange:X=>Se({...ee,description:X.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:ee.items.map((X,Te)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>I(Te),onDragOver:j,onDrop:()=>H(Te),style:{opacity:we===Te?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:X.ek,onChange:$e=>Le(Te,"ek",$e.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:X.name,onChange:$e=>Le(Te,"name",$e.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:X.qty,onChange:$e=>Le(Te,"qty",$e.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:X.unitPrice,onChange:$e=>Le(Te,"unitPrice",$e.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:X.vatRate,onChange:$e=>Le(Te,"vatRate",$e.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:Jt(Ul(X),be?.currency)}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Ie(Te),className:"text-gray-400 hover:text-red-500",children:c.jsx(_e.Trash,{})})})]},Te))})]}),c.jsxs("button",{type:"button",onClick:()=>{if(ee.items.length===0)return;const X=ee.items[ee.items.length-1];Se({...ee,items:[...ee.items,{...X}]})},className:"w-full py-2 bg-indigo-50/50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Me,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Jt(Cm(ee.items).subtotal,be?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:Jt(Cm(ee.items).totalVAT,be?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:Jt(Cm(ee.items).grandTotal,be?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>re(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const X1=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",uR=(i,e)=>{const n=window.open("","","height=800,width=1000");if(!n){alert("Pop-up engelleyiciyi kapatn.");return}const r=`
    <html><head><title>Sipari - ${i.siparisNo}</title>
    <style>
      @page { size: A4; margin: 5mm; }
      html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
      
      body { 
        font-family: 'Helvetica', sans-serif; 
        color: #333; 
        display: flex; 
        flex-direction: column; 
        box-sizing: border-box; 
      }
      
      .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
      .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
      .meta-table { font-size: 12px; border-collapse: collapse; }
      .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
      .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
      
      table.main { width: 100%; border-collapse: collapse; font-size: 13px; table-layout: fixed; flex-shrink: 0; }
      table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
      table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
      
      /* Column Widths */
      .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
      
      .group-kasa { background: #fff7ed; font-weight: bold; }
      .group-net { background: #f0fdf4; }
      
      .order-note { margin-top: 20px; font-size: 15px; word-wrap: break-word; border: 5px solid #eee; background: #fcfcfc; flex-shrink: 0; }
      
      .door-image-container {
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        padding-top: 20px;
        min-height: 100px; 
      }
      .door-image {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border: 1px solid #eee;
      }
      
      @media print { .no-print { display: none; } }
    </style>
    </head><body>
      <div class="header">
        <div>
          <div class="brand-title">Erelebiler Orman rnleri</div>
          <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
        </div>
        <div style="text-align:right">
          <table class="meta-table">
            <tr><td class="meta-label">Mteri:</td><td><strong>${e}</strong></td></tr>
            <tr><td class="meta-label">Sipari No:</td><td>#${i.siparisNo}</td></tr>
            <tr><td class="meta-label">Tarih:</td><td>${X1(i.date)}</td></tr>
          </table>
        </div>
      </div>

      <table class="main">
        <colgroup>
          <col style="width: 6%"> <!-- En (Kasa) -->
          <col style="width: 6%"> <!-- Boy (Kasa) -->
          <col style="width: 5%"> <!-- Genislik -->
          <col style="width: 5%"> <!-- Takim -->
          <col style="width: auto"> <!-- Aciklama -->
          <col style="width: 6%"> <!-- En (Net) -->
          <col style="width: 6%"> <!-- Boy (Net) -->
          <col style="width: 6%"> <!-- Sekil -->
        </colgroup>
        <thead>
          <tr>
            <th colspan="3" class="group-kasa">KASA LS</th>
            <th colspan="2">DETAYLAR</th>
            <th colspan="2" class="group-net">NET L</th>
            <th></th>
          </tr>
          <tr>
            <th class="group-kasa">EN</th>
            <th class="group-kasa">BOY</th>
            <th class="group-kasa">GEN</th>
            <th>TAK</th>
            <th>AIKLAMA</th>
            <th class="group-net">EN</th>
            <th class="group-net">BOY</th>
            <th>EKL</th>
          </tr>
        </thead>
        <tbody>
          ${i.items.map(l=>`
            <tr>
              <td class="group-kasa">${l.en1||"-"}</td>
              <td class="group-kasa">${l.boy1||"-"}</td>
              <td class="group-kasa">${l.genislik||"-"}</td>
              <td>${l.takim||""}</td>
              <td class="col-desc">${l.aciklama||""}</td>
              <td class="group-net"><strong>${l.en2||""}</strong></td>
              <td class="group-net"><strong>${l.boy2||""}</strong></td>
              <td>${l.sekil||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
      
      ${i.note?`
        <div class="order-note">
          <strong>NOT:</strong> ${i.note}
        </div>
      `:""}

      ${i.image?`
        <div class="door-image-container">
          <img src="${i.image}" class="door-image" />
        </div>
      `:""}

      <script>window.onload=function(){window.print()}<\/script>
    </body></html>
  `;n.document.write(r),n.document.close()},W1={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},dR=i=>{if(!i)return 0;let e=0,n=0;return Object.values(W1).forEach(r=>{r.steps.forEach(l=>{e++,i[r.title.split(" ")[0].toLowerCase()]?.[l.id]&&n++})}),e===0?0:Math.round(n/e*100)};function hR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState([]),[p,x]=J.useState({start:"",end:""}),[_,E]=J.useState(!1),[S,z]=J.useState(!1),[F,$]=J.useState(!1),[L,re]=J.useState({}),[ne,W]=J.useState({}),[ue,ve]=J.useState(null),be=J.useRef(null),[R,N]=J.useState(null),[C,M]=J.useState(null),[D,P]=J.useState({en:6,boy:4}),[A,ee]=J.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),Se=J.useMemo(()=>f.map(ce=>ce.name).sort(),[f]),K=J.useMemo(()=>{const ce={};return f.forEach(ye=>{ce[ye.id]={id:ye.id,name:ye.name,company:ye.company,orders:[]}}),l.forEach(ye=>{const ge=ye.customerId||"Bilinmeyen";if(ce[ge])ce[ge].orders.push(ye);else{const Le=f.find(Ie=>Ie.id===ge),Me=Le?Le.id:ge;ce[Me]||(ce[Me]={id:Me,name:Le?Le.name:ge,company:"D Mteri",orders:[]}),ce[Me].orders.push(ye)}}),Object.values(ce).filter(ye=>ye.orders.length>0).sort((ye,ge)=>ye.name.localeCompare(ge.name))},[l,f]);if(J.useEffect(()=>{const ce=ms.onAuthStateChanged(Ie=>{e(Ie),r(!1)}),ye=Cn(bt(Oe,"customers"),zn("name","asc")),ge=gs(ye,Ie=>{y(Ie.docs.map(X=>({id:X.id,...X.data()})))}),Le=Cn(bt(Oe,"siparisler"),zn("createdAt","desc")),Me=gs(Le,Ie=>{u(Ie.docs.map(X=>({id:X.id,...X.data()})))});return()=>{ce(),ge(),Me()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const pe=i?.email==="furkan@avci.jp",q=ce=>{if(!ce)return;const ye=new FileReader;ye.onload=ge=>{const Le=new Image;Le.onload=()=>{const Me=document.createElement("canvas"),Ie=800;let X=Le.width,Te=Le.height;X>Te?X>Ie&&(Te*=Ie/X,X=Ie):Te>800&&(X*=800/Te,Te=800),Me.width=X,Me.height=Te,Me.getContext("2d").drawImage(Le,0,0,X,Te),ee(it=>({...it,image:Me.toDataURL("image/jpeg",.8)}))},Le.src=ge.target.result},ye.readAsDataURL(ce)},me=ce=>{ce.preventDefault(),$(!0)},we=()=>$(!1),O=ce=>{ce.preventDefault(),$(!1),ce.dataTransfer.files[0]&&q(ce.dataTransfer.files[0])},k=ce=>{if(ue===null)return;const ye=[...A.items],ge=ye.splice(ue,1)[0];ye.splice(ce,0,ge),ee({...A,items:ye}),ve(null)},I=()=>{N(null);const ce="SP-"+Date.now().toString().slice(-6);ee({siparisNo:ce,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),P({en:6,boy:4}),E(!0)},j=ce=>{N(ce);const ye=f.find(ge=>ge.id===ce.customerId);ee({siparisNo:ce.siparisNo,customerId:ye?ye.name:ce.customerId,date:ce.date,note:ce.note||"",image:ce.image,items:ce.items||[]}),E(!0)},H=async ce=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Li(It(Oe,"siparisler",ce))}catch(ye){alert(ye.message)}},ae=async ce=>{ce.preventDefault();let ye=A.customerId;(!ye||ye.trim()==="")&&(ye="xxx");try{const ge=f.find(Ie=>Ie.name===ye),Le=ge?ge.id:ye,Me={...A,customerId:Le,createdAt:R?R.createdAt:new Date().toISOString()};R?await Jn(It(Oe,"siparisler",R.id),Me):await li(bt(Oe,"siparisler"),{...Me,productionStatus:{}}),E(!1)}catch(ge){alert("Kaydetme hatas: "+ge.message)}},fe=(ce,ye,ge)=>{const Le=[...A.items],Me=Le[ce];if(Me[ye]=ge,ye==="en1"){const Ie=parseFloat(ge);isNaN(Ie)?ge===""&&(Me.en2=""):Me.en2=Ie-D.en}if(ye==="boy1"){const Ie=parseFloat(ge);isNaN(Ie)?ge===""&&(Me.boy2=""):Me.boy2=Ie-D.boy}ee({...A,items:Le})},Ae=()=>ee({...A,items:[...A.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),Re=()=>{A.items.length!==0&&ee({...A,items:[...A.items,{...A.items[A.items.length-1]}]})},at=ce=>ee({...A,items:A.items.filter((ye,ge)=>ge!==ce)}),ct=(ce,ye)=>{const ge=parseFloat(ye)||0,Le={...D,[ce]:ge};P(Le);const Me=A.items.map(Ie=>({...Ie,en2:Ie.en1?parseFloat(Ie.en1)-Le.en:Ie.en2,boy2:Ie.boy1?parseFloat(Ie.boy1)-Le.boy:Ie.boy2}));ee({...A,items:Me})},Qe=async(ce,ye,ge)=>{const Le=ce.productionStatus||{},Me=Le[ye]||{},Ie={...Le,[ye]:{...Me,[ge]:!Me[ge]}};await Jn(It(Oe,"siparisler",ce.id),{productionStatus:Ie})},Lt=ce=>{W(ye=>({...ye,[ce]:!ye[ce]}))},Et=ce=>{const ye=f.find(ge=>ge.id===ce.customerId);uR(ce,ye?ye.name:ce.customerId)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(sg,{startDate:p.start,endDate:p.end,onStartChange:ce=>x({...p,start:ce}),onEndChange:ce=>x({...p,end:ce})}),pe&&c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(_e.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6 pb-10",children:K.map(ce=>{const ye=ce.orders.filter(ge=>!(p.start&&ge.date<p.start||p.end&&ge.date>p.end));return ye.length===0?null:c.jsxs("div",{className:"break-inside-avoid mb-6 bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(_e.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:ce.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[ye.length," Sipari"]})]}),c.jsx("div",{className:"p-2 space-y-2",children:ye.map(ge=>{const Le=L[ge.id],Me=ne[ge.id],Ie=dR(ge.productionStatus);return c.jsxs(ps,{className:"p-3 flex flex-col justify-between gap-3 transition-all duration-200 border border-transparent hover:border-indigo-100",children:[c.jsxs("div",{className:"flex items-start gap-3 overflow-hidden",children:[c.jsx("div",{className:"w-10 h-14 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:ge.image?c.jsx("img",{src:ge.image,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-[10px]",children:"Yok"})}),c.jsxs("div",{className:"min-w-0 flex-grow",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm font-bold text-indigo-600",children:["#",ge.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400",children:X1(ge.date)}),c.jsxs("span",{className:`text-[9px] font-bold px-1.5 rounded-full ${Ie===100?"bg-emerald-100 text-emerald-700":"bg-indigo-100 text-indigo-700"}`,children:["%",Ie]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>Et(ge),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",children:c.jsx(_e.Printer,{className:"w-3 h-3"})}),pe&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>j(ge),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:c.jsx(_e.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>H(ge.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",children:c.jsx(_e.Trash,{className:"w-3 h-3"})})]})]})]}),c.jsxs("div",{className:"flex justify-between items-end mt-1",children:[c.jsxs("p",{className:"text-[10px] text-gray-500 font-medium",children:[ge.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>Lt(ge.id),className:"text-[10px] font-bold text-purple-600 hover:text-purple-800 flex items-center gap-0.5 bg-purple-50 px-2 py-0.5 rounded cursor-pointer transition-colors",children:[Me?c.jsx(_e.ChevronUp,{className:"w-3 h-3"}):c.jsx(_e.ChevronDown,{className:"w-3 h-3"})," retim"]}),c.jsxs("button",{onClick:()=>re(X=>({...X,[ge.id]:!X[ge.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-2 py-0.5 rounded cursor-pointer transition-colors",children:[Le?c.jsx(_e.ChevronUp,{className:"w-3 h-3"}):c.jsx(_e.ChevronDown,{className:"w-3 h-3"})," Detay"]})]})]})]})]}),Le&&c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-[10px] border border-gray-100 mt-1 overflow-x-auto",children:[c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"text-gray-400 font-bold border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-1",children:"Aklama"}),c.jsx("th",{className:"pb-1 text-center",children:"Takm"}),c.jsx("th",{className:"pb-1 text-center",children:"Gen."}),c.jsx("th",{className:"pb-1 text-center",children:"ekil"}),c.jsx("th",{className:"pb-1 text-right",children:"Net (En/Boy)"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:ge.items?.map((X,Te)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-1.5 font-medium text-gray-600",children:X.aciklama||"-"}),c.jsx("td",{className:"py-1.5 text-center text-gray-500",children:X.takim||"-"}),c.jsx("td",{className:"py-1.5 text-center text-orange-600 font-medium",children:X.genislik||"-"}),c.jsx("td",{className:"py-1.5 text-center text-gray-500",children:X.sekil||"-"}),c.jsxs("td",{className:"py-1.5 text-right font-mono text-green-600 font-bold whitespace-nowrap",children:[X.en2,"x",X.boy2]})]},Te))})]}),ge.note&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 text-gray-500 italic",children:[c.jsx("span",{className:"font-bold",children:"Not:"})," ",ge.note]})]}),Me&&c.jsx("div",{className:"bg-purple-50/50 rounded-lg p-3 text-[10px] border border-purple-100 mt-1",children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(W1).map(([X,Te])=>c.jsxs("div",{children:[c.jsx("h5",{className:"text-[9px] font-bold text-gray-400 uppercase mb-1 border-b border-gray-200/50 pb-0.5",children:Te.title.replace(" KISMI","")}),c.jsx("div",{className:"space-y-1",children:Te.steps.map($e=>{const it=ge.productionStatus?.[X]?.[$e.id];return c.jsxs("button",{onClick:()=>Qe(ge,X,$e.id),className:`w-full flex items-center justify-between px-1.5 py-0.5 rounded transition-colors ${it?"text-emerald-700 bg-emerald-50 font-bold":"text-gray-400 hover:bg-gray-50"}`,children:[c.jsx("span",{children:$e.label}),it&&c.jsx(_e.Check,{className:"w-3 h-3"})]},$e.id)})})]},X))})})]},ge.id)})})]},ce.id)})}),c.jsx(zr,{isOpen:_,onClose:()=>E(!1),title:R?"Siparii Dzenle":"Yeni Sipari",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:ae,className:"flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col gap-4 overflow-y-auto p-1 custom-scrollbar",style:{maxHeight:"75vh"},children:[c.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[c.jsxs("div",{className:"flex-grow bg-white/50 p-4 rounded-2xl border border-gray-200/60 grid grid-cols-2 md:grid-cols-4 gap-3 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Sipari No"}),c.jsx(Ke,{value:A.siparisNo,onChange:ce=>ee({...A,siparisNo:ce.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Tarih"}),c.jsx(Ke,{type:"date",required:!0,value:A.date,onChange:ce=>ee({...A,date:ce.target.value})})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Mteri"}),c.jsx(Sa,{options:Se,selected:A.customerId,onChange:ce=>ee({...A,customerId:ce}),placeholder:"Se / Yaz",allowNew:!0})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-indigo-50/50 p-2 rounded-lg border border-indigo-100 md:col-span-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-700 uppercase whitespace-nowrap mr-2",children:"Oto. D:"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500",children:"En:"}),c.jsx(Ke,{type:"number",className:"w-16 py-1 text-center bg-white h-9",value:D.en,onChange:ce=>ct("en",ce.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500",children:"Boy:"}),c.jsx(Ke,{type:"number",className:"w-16 py-1 text-center bg-white h-9",value:D.boy,onChange:ce=>ct("boy",ce.target.value)})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Not"}),c.jsx(Ke,{value:A.note,onChange:ce=>ee({...A,note:ce.target.value})})]})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative w-full xl:w-48 h-32 xl:h-auto cursor-pointer outline-none focus:ring-2 focus:ring-indigo-500 ${F?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:me,onDragLeave:we,onDrop:O,onClick:()=>be.current.click(),tabIndex:"0",onPaste:ce=>{ce.clipboardData.files&&ce.clipboardData.files.length>0&&(ce.preventDefault(),q(ce.clipboardData.files[0]))},children:[c.jsx("input",{ref:be,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ce=>q(ce.target.files[0])}),A.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group p-2",children:[c.jsx("img",{src:A.image,alt:"Preview",className:"h-full object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none p-2",children:[c.jsx(_e.Upload,{className:"mx-auto"}),c.jsx("span",{className:"text-[9px] block mt-1",children:"Grsel (Tkla/Yaptr)"})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-visible shadow-sm bg-white min-h-[300px] flex flex-col",children:[c.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"8%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50 text-[10px] text-gray-500 font-bold uppercase",children:[c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{colSpan:3,className:"text-center bg-orange-50/50 border-b border-orange-100",children:"KASA"}),c.jsx("th",{colSpan:2,className:"text-center",children:"DETAY"}),c.jsx("th",{colSpan:2,className:"text-center bg-green-50/50 border-b border-green-100",children:"NET"}),c.jsx("th",{colSpan:2})]}),c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{className:"px-1 text-center bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 text-center bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 text-center bg-orange-50/30",children:"GEN"}),c.jsx("th",{className:"px-1 text-center",children:"TAKIM"}),c.jsx("th",{className:"px-1 text-left",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 text-center bg-green-50/30",children:"EN"}),c.jsx("th",{className:"px-1 text-center bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 text-center",children:"EKL"}),c.jsx("th",{})]})]}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:A.items.map((ce,ye)=>c.jsxs("tr",{className:"hover:bg-gray-50 group",draggable:!0,onDragStart:()=>ve(ye),onDragOver:ge=>ge.preventDefault(),onDrop:()=>k(ye),style:{opacity:ue===ye?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-0 text-center text-gray-300 cursor-move align-middle",children:c.jsx("div",{className:"flex items-center justify-center h-full w-full",children:c.jsx(_e.TableRows,{className:"w-3 h-3"})})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs",placeholder:"0",value:ce.en1,onChange:ge=>fe(ye,"en1",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs",placeholder:"0",value:ce.boy1,onChange:ge=>fe(ye,"boy1",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs",value:ce.genislik,onChange:ge=>fe(ye,"genislik",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs",value:ce.takim,onChange:ge=>fe(ye,"takim",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-xs",value:ce.aciklama,onChange:ge=>fe(ye,"aciklama",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs font-bold text-green-700 bg-green-50/30",value:ce.en2,onChange:ge=>fe(ye,"en2",ge.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"px-1 py-0 h-8 text-center text-xs font-bold text-green-700 bg-green-50/30",value:ce.boy2,onChange:ge=>fe(ye,"boy2",ge.target.value)})}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsxs("select",{className:"w-full px-1 py-0 h-8 text-xs text-center bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm outline-none cursor-pointer text-gray-700",value:ce.sekil,onChange:ge=>fe(ye,"sekil",ge.target.value),children:[c.jsx("option",{value:"",children:"-"}),c.jsx("option",{value:"Kapal",children:"Kapal"}),c.jsx("option",{value:"Caml",children:"Caml"})]})}),c.jsx("td",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>at(ye),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(_e.Trash,{})})})]},ye))})]})}),c.jsxs("div",{className:"mt-auto",children:[c.jsxs("button",{type:"button",onClick:Re,className:"w-full py-1.5 bg-indigo-50/50 text-indigo-600 text-[10px] font-bold uppercase border-t border-indigo-100 flex items-center justify-center gap-1",children:[c.jsx(_e.Clipboard,{className:"w-3 h-3"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Ae,className:"w-full py-2 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 text-xs font-bold",children:"+ Yeni Satr"})]})]})]}),c.jsxs("div",{className:"pt-4 mt-auto flex flex-row-reverse gap-3 border-t border-gray-200 bg-white rounded-b-3xl pb-6 px-6",children:[c.jsx(Vt,{type:"submit",variant:"primary",children:R?"Kaydet":"Olutur"}),c.jsx(Vt,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const fR=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",mR=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),mb=({item:i,isAdd:e,onEdit:n,onDelete:r})=>c.jsxs(ps,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:fR(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>n(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(_e.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(_e.Trash,{})})]})]})]});function pR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState({start:"",end:""}),[p,x]=J.useState(!1),[_,E]=J.useState([]),[S,z]=J.useState(!0),[F,$]=J.useState(!0),[L,re]=J.useState(null),[ne,W]=J.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),ue=J.useMemo(()=>[...new Set(l.map(ee=>ee.productName))].sort(),[l]),ve=J.useMemo(()=>{const ee=l.map(K=>K.unit).filter(Boolean),Se=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Se,...ee])].sort()},[l]);J.useEffect(()=>{const ee=ms.onAuthStateChanged(pe=>{e(pe),r(!1)}),Se=Cn(bt(Oe,"inventory_movements"),zn("date","desc")),K=gs(Se,pe=>{u(pe.docs.map(q=>({id:q.id,...q.data()})))});return()=>{ee(),K()}},[]);const be=J.useMemo(()=>l.filter(ee=>{let Se=!0;if(f.start&&(Se=Se&&ee.date>=f.start),f.end&&(Se=Se&&ee.date<=f.end),ee.productType==="raw"&&!S||(ee.productType==="manufactured"||ee.productType==="uretilmis")&&!F)return!1;let K=!0;return _.length>0&&(K=_.includes(ee.productName)),Se&&K}),[l,f,S,F,_]),R=be.filter(ee=>ee.action==="add"),N=be.filter(ee=>ee.action==="remove"),C=async ee=>{ee.preventDefault();try{const Se={...ne,quantity:Number(ne.quantity),createdAt:new Date().toISOString()};L?await Jn(It(Oe,"inventory_movements",L),Se):await li(bt(Oe,"inventory_movements"),Se),A()}catch(Se){alert("Hata: "+Se.message)}},M=async ee=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Li(It(Oe,"inventory_movements",ee))},D=async ee=>{if(window.confirm(`"${ee}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Se=Cn(bt(Oe,"inventory_movements"),KC("productName","==",ee)),K=await Sl(Se),pe=ZC(Oe);K.forEach(q=>{pe.delete(q.ref)}),await pe.commit(),_.includes(ee)&&E(q=>q.filter(me=>me!==ee)),ne.productName===ee&&W(q=>({...q,productName:""}))}catch(Se){alert("Silme hatas: "+Se.message)}},P=ee=>{re(ee.id),W({productType:ee.productType,productName:ee.productName,action:ee.action,quantity:ee.quantity,unit:ee.unit,date:ee.date}),x(!0)},A=()=>{x(!1),re(null),W({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return n?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(sg,{startDate:f.start,endDate:f.end,onStartChange:ee=>y({...f,start:ee}),onEndChange:ee=>y({...f,end:ee})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(mR,{showRaw:S,setShowRaw:z,showManufactured:F,setShowManufactured:$}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Sa,{options:ue,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(_e.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(ee=>c.jsx(mb,{item:ee,isAdd:!0,onEdit:P,onDelete:M},ee.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[N.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[N.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),N.map(ee=>c.jsx(mb,{item:ee,isAdd:!1,onEdit:P,onDelete:M},ee.id))]})]})]}),c.jsx(zr,{isOpen:p,onClose:A,title:L?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${ne.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:ne.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(Y1,{checked:ne.productType==="manufactured",onChange:ee=>W({...ne,productType:ee?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Sa,{options:ue,selected:ne.productName,onChange:ee=>W({...ne,productName:ee}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:D})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>W({...ne,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>W({...ne,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Ke,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:ne.quantity,onChange:ee=>W({...ne,quantity:ee.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Sa,{options:ve,selected:ne.unit,onChange:ee=>W({...ne,unit:ee}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Ke,{type:"date",required:!0,value:ne.date,onChange:ee=>W({...ne,date:ee.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Vt,{type:"submit",variant:"primary",children:L?"Gncelle":"Kaydet"}),c.jsx(Vt,{type:"button",variant:"secondary",onClick:A,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const gR=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),yR=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const n=300,r=800,l=40,u=r-l*2,f=n-l*2,y=i.flatMap(_=>e.map(E=>_[E]||0)),p=Math.max(...y,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=n-l-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:l,y1:E,x2:r-l,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:l-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(p/4*_)})]},_)}),e.map((_,E)=>{const S=x[E%x.length],z=i.map((F,$)=>{const L=l+$*(u/(i.length-1||1)),re=F[_]||0,ne=n-l-re/p*f,W=isNaN(L)?l:L,ue=isNaN(ne)?n-l:ne;return`${W},${ue}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:S,strokeWidth:"3",points:z,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((F,$)=>{const L=l+$*(u/(i.length-1||1)),re=F[_]||0,ne=n-l-re/p*f,W=isNaN(L)?l:L,ue=isNaN(ne)?n-l:ne;return c.jsx("circle",{cx:W,cy:ue,r:"4",fill:"white",stroke:S,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${F.month} - ${_}: ${re}`})},$)})]},_)}),i.map((_,E)=>{const S=l+E*(u/(i.length-1||1));return c.jsx("text",{x:S,y:n-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[E%x.length]}}),_]},_))})]})},xR=({name:i,qty:e,unit:n,type:r,change:l,changePercent:u})=>{const f=r==="raw",y=e<0,p=u>10;let x="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(_e.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",E=c.jsx(_e.TrendingDown,{}));let S=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",z=f?"text-pink-900":"text-purple-900",F=f?"text-pink-700/70":"text-purple-700/70";y?(S="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",z="text-red-700",F="text-red-500"):p&&(S="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",z="text-emerald-800",F="text-emerald-600");const $=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${S}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:$}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${z}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${F} uppercase`,children:n})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[l>0?"+":"",l.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function vR(){const[i,e]=J.useState([]),[n,r]=J.useState(!0),[l,u]=J.useState(!0),[f,y]=J.useState(!0),[p,x]=J.useState([]),[_,E]=J.useState("year");J.useEffect(()=>{const L=Cn(bt(Oe,"inventory_movements"),zn("date","asc")),re=gs(L,ne=>{const W=ne.docs.map(ue=>ue.data());e(W),r(!1)});return()=>re()},[]);const S=J.useMemo(()=>{const L={},re=new Date;return re.setDate(re.getDate()-30),i.forEach(ne=>{const W=Number(ne.quantity)||0,ue=ne.action==="add"?W:-W,ve=new Date(ne.date);L[ne.productName]||(L[ne.productName]={name:ne.productName,qty:0,unit:ne.unit,type:ne.productType||"raw",change30Days:0}),L[ne.productName].qty+=ue,L[ne.productName].type=ne.productType||L[ne.productName].type,ve>=re&&(L[ne.productName].change30Days+=ue)}),Object.values(L).map(ne=>{const W=ne.qty-ne.change30Days;let ue=0;return W!==0?ue=ne.change30Days/Math.abs(W)*100:ne.change30Days!==0&&(ue=100),{...ne,changePercent:ue}})},[i]),z=J.useMemo(()=>S.filter(L=>!(L.type==="raw"&&!l||(L.type==="manufactured"||L.type==="uretilmis")&&!f||p.length>0&&!p.includes(L.name))),[S,l,f,p]),F=J.useMemo(()=>S.map(L=>L.name).sort(),[S]),$=J.useMemo(()=>{const L=z.sort((ue,ve)=>Math.abs(ve.qty)-Math.abs(ue.qty)).slice(0,5).map(ue=>ue.name);if(L.length===0)return{data:[],keys:[]};const re={},ne={};return L.forEach(ue=>ne[ue]=0),i.forEach(ue=>{if(!L.includes(ue.productName))return;const ve=ue.date?ue.date.slice(0,7):"N/A";if(ve==="N/A")return;if(_==="year"){const N=new Date().getFullYear();if(new Date(ue.date).getFullYear()!==N)return}const be=Number(ue.quantity)||0,R=ue.action==="add"?be:-be;ne[ue.productName]||(ne[ue.productName]=0),ne[ue.productName]+=R,re[ve]={...ne,month:ve}}),{data:Object.values(re).sort((ue,ve)=>ue.month.localeCompare(ve.month)),keys:L}},[i,z,_]);return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(gR,{showRaw:l,setShowRaw:u,showManufactured:f,setShowManufactured:y}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Sa,{options:F,selected:p,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:z.length>0?z.map((L,re)=>c.jsx(xR,{name:L.name,qty:L.qty,unit:L.unit,type:L.type,change:L.change30Days,changePercent:L.changePercent},re)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(_e.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),$.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(_e.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:L=>E(L.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(yR,{data:$.data,keys:$.keys})]})]})]})}const pb=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,wr={deliveryDate:"stenilen teslim tarihi en az 50 gn ncesinden imalat firmaya bildirilecektir.",packaging:"Tm rnler hava artlarndan etkilenmeyecek ekilde, stre naylon ve ke koruyucu malzemelerle ambalajlanacaktr.",assembly:"Nakliye ve montaj haritir.",vat:"KDV hari fiyatlardr."},Cs=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",bd=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",rp=i=>{if(!i)return{subtotal:0,totalVAT:0,grandTotal:0};const e=i.reduce((r,l)=>r+Number(l.quantity)*Number(l.price),0),n=i.reduce((r,l)=>r+Number(l.quantity)*Number(l.price)*(Number(l.vat)/100),0);return{subtotal:e,totalVAT:n,grandTotal:e+n}},bR=i=>{const e=window.open("","","height=800,width=1000");if(!e){alert("Pop-up engelleyiciyi kapatn.");return}const n=rp(i.items||[]),r=i.images||[],l=i.type==="contract",u=`
    @page { size: A4; margin: 0; }
    html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
    body { font-family: 'Helvetica', sans-serif; color: #333; padding: 10mm 15mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
    
    /* Background Image */
    .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
    .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

    .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

    table { width: 100%; border-collapse: collapse; font-size: 10pt; margin-bottom: 20px; }
    th { border-bottom: 2px solid #be185d; color: #be185d; padding: 8px 4px; text-align: left; font-weight: bold; text-transform: uppercase; }
    td { border-bottom: 1px solid #fce7f3; padding: 8px 4px; vertical-align: top; }
    .text-right { text-align: right; } 
    .text-center { text-align: center; }
    .font-bold { font-weight: bold; }
    .text-pink { color: #be185d; }

    .totals-container { margin-left: auto; width: 300px; padding: 10px; }
    .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 10pt; }
    .grand-total { font-size: 14pt; font-weight: bold; color: #be185d; border-top: 2px solid #be185d; padding-top: 8px; margin-top: 4px; }
    
    .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
  `;let f="";l?f=`
      <div class="header-contract" style="text-align:center; margin-bottom:30px;">
        <div style="text-align:right; font-size:11pt; font-weight:bold; margin-top:10px; color:#be185d;">TARH: ${bd(i.date)}</div>
        <h2 style="font-size:18pt; letter-spacing:3px; margin-top:10px;"><br></h2>
      </div>

      <div style="margin-bottom:20px; font-size:11pt;">
        <strong>SAYIN:</strong> <span style="font-size:12pt;">${i.customerName}</span>
      </div>

      <table>
        <thead><tr><th width="50%">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Fiyat</th><th class="text-right">Tutar</th></tr></thead>
        <tbody>
          ${i.items.map(p=>`
            <tr>
              <td>${p.description}</td>
              <td class="text-center">${p.quantity}</td>
              <td class="text-right">${Cs(p.price)}</td>
              <td class="text-right"><strong>${Cs(p.total)}</strong></td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="totals-container">
        <div class="total-row grand-total"><span>TOPLAM:</span> <span>${Cs(n.grandTotal)}</span></div>
      </div>

      <div style="margin-top:20px; font-size:10pt; line-height:1.5;">
        <p><strong>deme ekli:</strong> ${i.note||"-"}</p>
        <p><strong>Teslim Tarihi:</strong> ${i.deliveryDate}</p>
        <p><strong>Ambalaj:</strong> ${i.packaging}</p>
        <p><strong>Montaj ve Nakliye:</strong> ${i.assembly}</p>
        <p><strong>KDV:</strong> ${i.vat}</p>
        <p><strong>Not:</strong> Fiyat Teklifi ${bd(i.validityDate)} tarihine kadar geerlidir.</p>
        ${i.validityNote?`<p><strong>Ek Not:</strong> ${i.validityNote}</p>`:""}
      </div>

      <!-- Signature Area -->
      <div style="display:flex; justify-content:space-between; margin-top:50px; margin-bottom:50px;">
         <div style="width:40%; border:2px dashed #be185d; height:100px; display:flex; align-items:end; justify-content:center; padding-bottom:10px; color:#be185d; font-weight:bold;">
            FRMA KAE / MZA
         </div>
         <div style="width:40%; border:2px dashed #be185d; height:100px; display:flex; align-items:end; justify-content:center; padding-bottom:10px; color:#be185d; font-weight:bold;">
            MTER MZA
         </div>
      </div>
    `:f=`
<div style="display:flex; justify-content:space-between; margin-bottom:40px; border-bottom:2px solid #fce7f3; padding-bottom:10px;">
  <div></div>

  <div style="text-align:right; background:#fff; padding:10px; border-radius:16px; box-shadow:0 0 0 9999px rgba(255,255,255,0.7) inset;">
    <h2 style="font-size:30px; font-weight:bold; color:#be185d; margin:0;">Teklif Formu</h2>
    <table style="font-size:12px; margin-top:5px; border:none;">
      <tr>
        <td style="border:none; padding:2px; font-weight:bold; color:#831843;">Teklif No:</td>
        <td style="border:none; padding:2px; text-align:right;">#${i.teklifNo}</td>
      </tr>
      <tr>
        <td style="border:none; padding:2px; font-weight:bold; color:#831843;">Tarih:</td>
        <td style="border:none; padding:2px; text-align:right;">${bd(i.date)}</td>
      </tr>
    </table>
  </div>
</div>


      <div style="margin-bottom:30px;">
         <div style="font-size:10px; font-weight:bold; color:#be185d;">SAYIN</div>
         <div style="font-size:18px; font-weight:bold;">${i.customerName}</div>
      </div>

      <table>
        <thead><tr><th width="45%">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
        <tbody>
          ${i.items.map(p=>`
            <tr>
              <td>${p.description}</td>
              <td class="text-center">${p.quantity}</td>
              <td class="text-right">${Cs(p.price)}</td>
              <td class="text-center">%${p.vat}</td>
              <td class="text-right"><strong>${Cs(p.total)}</strong></td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="totals-container">
        <div class="total-row"><span>Ara Toplam:</span> <span>${Cs(n.subtotal)}</span></div>
        <div class="total-row"><span>Toplam KDV:</span> <span>${Cs(n.totalVAT)}</span></div>
        <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Cs(n.grandTotal)}</span></div>
      </div>

      ${i.note?`<div style="margin-top:20px; font-size:11px; white-space:pre-wrap;"><strong>NOT:</strong><br/>${i.note}</div>`:""}
    `;const y=`
    <html><head><title>${l?"Szleme":"Teklif"} - ${i.teklifNo}</title>
    <style>${u}</style>
    </head><body>
      <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
      <div class="content">
        
        ${f}

        <div class="image-section" style="margin-top:auto; padding-top:20px;">
           <div class="image-grid" style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
             ${r.map(p=>`<img src="${p}" style="max-width:45%; max-height:200px; object-fit:contain; border:1px solid #fce7f3; background:white; padding:3px;" />`).join("")}
           </div>
        </div>

        <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
      </div>
      <script>setTimeout(() => { window.print(); }, 1000);<\/script>
    </body></html>
  `;e.document.write(y),e.document.close()};function _R(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState([]),[p,x]=J.useState("both"),[_,E]=J.useState(!1),[S,z]=J.useState(!1),[F,$]=J.useState(null),L=J.useRef(null),[re,ne]=J.useState(null),[W,ue]=J.useState({type:"proposal",teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:pb,paymentMethod:"",deliveryDate:wr.deliveryDate,packaging:wr.packaging,assembly:wr.assembly,vat:wr.vat,validityNote:"",images:[],items:[]}),ve=J.useMemo(()=>f.map(I=>I.name).sort(),[f]);if(J.useEffect(()=>{const I=ms.onAuthStateChanged(Ae=>{e(Ae),r(!1)}),j=Cn(bt(Oe,"teklifler"),zn("createdAt","desc")),H=gs(j,Ae=>u(Ae.docs.map(Re=>({id:Re.id,...Re.data()})))),ae=Cn(bt(Oe,"customers"),zn("name","asc")),fe=gs(ae,Ae=>y(Ae.docs.map(Re=>({id:Re.id,...Re.data()}))));return()=>{I(),H(),fe()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(_e.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const be=I=>{const j=Array.from(I.target.files||I.dataTransfer.files);j.length&&j.forEach(H=>{if(!H.type.startsWith("image/"))return;const ae=new FileReader;ae.onload=fe=>{const Ae=new Image;Ae.onload=()=>{const Re=document.createElement("canvas"),at=800;let ct=Ae.width,Qe=Ae.height;ct>Qe?ct>at&&(Qe*=at/ct,ct=at):Qe>at&&(ct*=at/Qe,Qe=at),Re.width=ct,Re.height=Qe,Re.getContext("2d").drawImage(Ae,0,0,ct,Qe),ue(Et=>({...Et,images:[...Et.images,Re.toDataURL("image/jpeg",.6)]}))},Ae.src=fe.target.result},ae.readAsDataURL(H)})},R=I=>{I.preventDefault(),z(!0)},N=()=>z(!1),C=I=>{I.preventDefault(),z(!1),be(I)},M=I=>{I.clipboardData.files&&I.clipboardData.files.length>0&&(I.preventDefault(),be({target:{files:I.clipboardData.files}}))},D=(I,j,H)=>{const ae=[...W.items];ae[I][j]=H;const fe=parseFloat(ae[I].quantity)||0,Ae=parseFloat(ae[I].price)||0,Re=parseFloat(ae[I].vat)||0;ae[I].total=fe*Ae+fe*Ae*(Re/100),ue({...W,items:ae})},P=()=>ue({...W,items:[...W.items,{description:"",quantity:1,price:0,vat:20,total:0}]}),A=I=>ue({...W,items:W.items.filter((j,H)=>H!==I)}),ee=()=>{if(W.items.length===0)return;const I={...W.items[W.items.length-1]};ue({...W,items:[...W.items,I]})},Se=I=>$(I),K=I=>I.preventDefault(),pe=I=>{if(F===null)return;const j=[...W.items],H=j.splice(F,1)[0];j.splice(I,0,H),ue({...W,items:j}),$(null)},q=()=>{ne(null);const I=new Date;I.setDate(I.getDate()+7),ue({type:"proposal",teklifNo:"TK-"+Date.now().toString().slice(-6),teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:I.toISOString().split("T")[0],note:pb,paymentMethod:"",deliveryDate:wr.deliveryDate,packaging:wr.packaging,assembly:wr.assembly,vat:wr.vat,validityNote:"",images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},me=I=>{ne(I.id),ue(I),E(!0)},we=async I=>{if(I.preventDefault(),!W.customerName){alert("Ltfen mteri ad giriniz.");return}try{const j={...W,createdAt:new Date().toISOString()};re?await Jn(It(Oe,"teklifler",re),j):await li(bt(Oe,"teklifler"),j),E(!1)}catch(j){alert(j.message)}},O=async I=>{window.confirm("Silmek istediinize emin misiniz?")&&await Li(It(Oe,"teklifler",I))},k=l.filter(I=>!(p==="proposal"&&I.type==="contract"||p==="contract"&&I.type!=="contract"));return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?M:void 0,children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white/80 backdrop-blur-xl p-1.5 rounded-2xl border border-gray-200/60 shadow-sm",children:[c.jsxs("div",{className:"flex bg-gray-100/50 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>x("both"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${p==="both"?"bg-white shadow-sm text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:"Tm"}),c.jsx("button",{onClick:()=>x("proposal"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${p==="proposal"?"bg-white shadow-sm text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:"Teklifler"}),c.jsx("button",{onClick:()=>x("contract"),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${p==="contract"?"bg-white shadow-sm text-pink-600":"text-gray-400 hover:text-gray-600"}`,children:"Szlemeler"})]}),c.jsx("button",{onClick:q,className:"flex items-center justify-center w-10 h-10 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all ml-2",children:c.jsx(_e.Plus,{})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pb-10",children:[k.map(I=>{const j=I.type==="contract",H=rp(I.items);return c.jsxs(ps,{className:`p-3 flex items-center justify-between gap-3 hover:scale-[1.01] transition-transform duration-200 ${j?"bg-pink-50/40 border-pink-200/50":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center text-lg ${j?"bg-pink-100 text-pink-600":"bg-indigo-50 text-indigo-600"}`,children:c.jsx(_e.Clipboard,{})}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 truncate",children:I.teklifName||"simsiz"}),c.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider ${j?"bg-pink-50 border-pink-100 text-pink-600":"bg-indigo-50 border-indigo-100 text-indigo-600"}`,children:j?"SZLEME":"TEKLF"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[c.jsx("span",{className:"font-medium truncate max-w-[100px]",children:I.customerName}),c.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),c.jsx("span",{children:bd(I.date)})]})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[c.jsx("span",{className:"text-sm font-black text-gray-800",children:Cs(H.grandTotal)}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>bR(I),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-indigo-600 transition-colors",title:"Yazdr",children:c.jsx(_e.Printer,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>me(I),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-blue-600 transition-colors",title:"Dzenle",children:c.jsx(_e.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>O(I.id),className:"p-1.5 hover:bg-gray-100 rounded-md text-gray-400 hover:text-red-500 transition-colors",title:"Sil",children:c.jsx(_e.Trash,{className:"w-3 h-3"})})]})]})]},I.id)}),k.length===0&&c.jsx("div",{className:"col-span-full text-center py-12 text-gray-400 bg-white/40 rounded-xl border border-dashed border-gray-300",children:"Kayt bulunamad."})]}),c.jsx(zr,{isOpen:_,onClose:()=>E(!1),title:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{children:re?"Dzenle":"Yeni Kayt"}),c.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg ml-4",children:[c.jsx("button",{type:"button",onClick:()=>ue({...W,type:"proposal"}),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${W.type==="proposal"?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"TEKLF"}),c.jsx("button",{type:"button",onClick:()=>ue({...W,type:"contract"}),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${W.type==="contract"?"bg-white text-pink-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"SZLEME"})]})]}),maxWidth:"max-w-6xl",children:c.jsxs("form",{onSubmit:we,className:"flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 overflow-y-auto p-1 custom-scrollbar",style:{maxHeight:"65vh"},children:[c.jsxs("div",{className:"lg:w-1/3 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-white/50 p-4 rounded-2xl border border-gray-200/60 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Numara"}),c.jsx(Ke,{value:W.teklifNo,onChange:I=>ue({...W,teklifNo:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Tarih"}),c.jsx(Ke,{type:"date",value:W.date,onChange:I=>ue({...W,date:I.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Balk"}),c.jsx(Ke,{placeholder:"Proje Ad",value:W.teklifName,onChange:I=>ue({...W,teklifName:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Mteri"}),c.jsx(Sa,{options:ve,selected:W.customerName,onChange:I=>ue({...W,customerName:I}),placeholder:"Mteri Se/Yaz",allowNew:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Geerlilik Tarihi"}),c.jsx(Ke,{type:"date",value:W.validityDate,onChange:I=>ue({...W,validityDate:I.target.value})})]})]}),c.jsx("div",{className:"bg-white/50 p-4 rounded-2xl border border-gray-200/60 space-y-3",children:W.type==="proposal"?c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block mb-1",children:"Teklif Notu"}),c.jsx(db,{rows:"3",value:W.note,onChange:I=>ue({...W,note:I.target.value})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"deme ekli"}),c.jsx(db,{rows:"2",value:W.paymentMethod,onChange:I=>ue({...W,paymentMethod:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Teslim Tarihi"}),c.jsx(Ke,{value:W.deliveryDate,onChange:I=>ue({...W,deliveryDate:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Ambalaj"}),c.jsx(Ke,{value:W.packaging,onChange:I=>ue({...W,packaging:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Montaj/Nakliye"}),c.jsx(Ke,{value:W.assembly,onChange:I=>ue({...W,assembly:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"KDV Notu"}),c.jsx(Ke,{value:W.vat,onChange:I=>ue({...W,vat:I.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase ml-1 block",children:"Ek Not"}),c.jsx(Ke,{value:W.validityNote,onChange:I=>ue({...W,validityNote:I.target.value})})]})]})})]}),c.jsxs("div",{className:"lg:w-2/3 flex flex-col gap-5",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white min-h-[300px] flex flex-col",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"12%"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"40px"}})]}),c.jsx("thead",{className:"bg-gray-50 text-[10px] text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 py-2 text-left",children:"Aklama"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV"}),c.jsx("th",{className:"text-right pr-4",children:"Tutar"}),c.jsx("th",{})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:W.items.map((I,j)=>c.jsxs("tr",{className:"hover:bg-gray-50 group",draggable:!0,onDragStart:()=>Se(j),onDragOver:K,onDrop:()=>pe(j),children:[c.jsx("td",{className:"text-center text-gray-300 cursor-move",children:c.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{className:"py-1.5 border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.description,onChange:H=>D(j,"description",H.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{type:"number",className:"py-1.5 text-center border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.quantity,onChange:H=>D(j,"quantity",H.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx(Ke,{type:"number",className:"py-1.5 text-right border-transparent bg-transparent hover:bg-white focus:bg-white",value:I.price,onChange:H=>D(j,"price",H.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsxs("select",{className:"bg-transparent text-xs border-none focus:ring-0 cursor-pointer",value:I.vat,onChange:H=>D(j,"vat",H.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-1 text-right font-bold text-gray-700 pr-4",children:Cs(I.total)}),c.jsx("td",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>A(j),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(_e.Trash,{})})})]},j))})]})}),c.jsxs("div",{className:"mt-auto",children:[c.jsxs("button",{type:"button",onClick:ee,className:"w-full py-1.5 bg-indigo-50/50 text-indigo-600 text-[10px] font-bold uppercase border-t border-indigo-100 flex items-center justify-center gap-1",children:[c.jsx(_e.Clipboard,{className:"w-3 h-3"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:P,className:"w-full py-2 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 text-xs font-bold",children:"+ Yeni Satr"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase mr-3",children:"GENEL TOPLAM"}),c.jsx("span",{className:"text-2xl font-black text-gray-800",children:Cs(rp(W.items).grandTotal)})]})}),W.type==="proposal"&&c.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-2",children:"Grseller"}),c.jsxs("div",{className:"flex gap-4 items-start",children:[c.jsxs("div",{className:`w-24 h-24 flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all cursor-pointer ${S?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,onDragOver:R,onDragLeave:N,onDrop:C,onClick:()=>L.current.click(),children:[c.jsx("input",{ref:L,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:be}),c.jsx(_e.Upload,{className:"text-gray-400"}),c.jsx("span",{className:"text-[9px] text-gray-400 mt-1",children:"Ekle"})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:W.images.map((I,j)=>c.jsxs("div",{className:"relative shrink-0 w-24 h-24 rounded-lg overflow-hidden border border-gray-200 group bg-white shadow-sm",children:[c.jsx("img",{src:I,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>ue(H=>({...H,images:H.images.filter((ae,fe)=>fe!==j)})),className:"absolute top-1 right-1 bg-white rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity text-xs",children:""})]},j))})]})]})]})]}),c.jsxs("div",{className:"pt-4 mt-auto flex flex-row-reverse gap-3 border-t border-gray-200",children:[c.jsx(Vt,{type:"submit",variant:"primary",children:re?"Deiiklikleri Kaydet":"Olutur"}),c.jsx(Vt,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const wR="86715dfc9d1046e7e8a0d95a",ER=`https://v6.exchangerate-api.com/v6/${wR}/latest/USD`,ap=["A","B","C","D","E","F"],Z1=15,Rm=()=>{const i={};for(let e=1;e<=Z1;e++)ap.forEach(n=>{i[`${n}${e}`]={value:"",formula:"",result:null,currency:"None",customUnit:""}});return i},va=i=>i==="USD"?"$":i==="EUR"?"":i==="TRY"?"":"",gb=(i,e)=>{if(!i)return"";let n=i.toUpperCase();const r=(..._)=>_.flat().reduce((E,S)=>E+(Number(S)||0),0),l=(..._)=>{const E=_.flat(),S=E.reduce((z,F)=>z+(Number(F)||0),0);return E.length?S/E.length:0},u=(..._)=>Math.max(..._.flat().map(E=>Number(E)||0)),f=(..._)=>Math.min(..._.flat().map(E=>Number(E)||0)),y=(..._)=>_.flat().length,p=(..._)=>{const E=_.flat().map($=>Number($)||0);if(E.length===0)return 0;const S=E.reduce(($,L)=>$+L,0)/E.length,F=E.map($=>Math.pow($-S,2)).reduce(($,L)=>$+L,0)/E.length;return Math.sqrt(F)},x=(_,E,S)=>_?E:S;try{n=n.replace(/([A-F])([0-9]+):([A-F])([0-9]+)/g,(S,z,F,$,L)=>{const re=[],ne=z.charCodeAt(0),W=$.charCodeAt(0),ue=parseInt(F),ve=parseInt(L);for(let be=Math.min(ne,W);be<=Math.max(ne,W);be++)for(let R=Math.min(ue,ve);R<=Math.max(ue,ve);R++){const N=String.fromCharCode(be)+R,C=e[N],M=C?C.result!==null&&C.result!==""?C.result:parseFloat(C.value)||0:0;re.push(M)}return`[${re.join(",")}]`}),n=n.replace(/[A-F][0-9]+/g,S=>{const z=e[S],F=z?z.result!==null&&z.result!==""?z.result:parseFloat(z.value):0;return isNaN(F)?0:F});const E=new Function("SUM","AVERAGE","MAX","MIN","COUNT","STDEV","IF","return "+n)(r,l,u,f,y,p,x);return typeof E=="function"||typeof E=="number"&&!isFinite(E)?"Hata":E}catch{return"Hata"}};function TR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState("cards"),[f,y]=J.useState([]),[p,x]=J.useState({TRY:34.5,USD:1,EUR:.95}),[_,E]=J.useState(Rm()),[S,z]=J.useState(null),[F,$]=J.useState(null),[L,re]=J.useState(""),[ne,W]=J.useState([]),[ue,ve]=J.useState(""),[be,R]=J.useState(null),[N,C]=J.useState({cellId:"",label:"",targetCurrency:"None",customUnit:""});J.useEffect(()=>{const k=ms.onAuthStateChanged(H=>{e(H),r(!1)}),I=Cn(bt(Oe,"price_cards"),zn("updatedAt","desc")),j=gs(I,H=>{y(H.docs.map(ae=>({id:ae.id,...ae.data()})))});return M(),()=>{k(),j()}},[]),J.useEffect(()=>{const k=I=>{if(!["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName)&&S&&!F){if(I.key==="Delete"||I.key==="Backspace"){const j={..._};j[S]={...j[S],value:"",formula:"",result:null},E(j),re("");return}I.key.length===1&&!I.ctrlKey&&!I.metaKey&&!I.altKey&&$(S),I.key==="Enter"&&(I.preventDefault(),$(S))}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[S,F,_]);const M=async()=>{try{const I=await(await fetch(ER)).json();I&&I.conversion_rates&&x({TRY:I.conversion_rates.TRY,USD:1,EUR:I.conversion_rates.EUR})}catch(k){console.error("Rate error",k)}};J.useEffect(()=>{const k={..._},I=()=>{let j=!1;return Object.keys(k).forEach(H=>{const ae=k[H];let fe=ae.value;if(ae.formula.toString().startsWith("=")){const Ae=ae.formula.substring(1);fe=gb(Ae,k)}else{const Ae=parseFloat(ae.value);fe=isNaN(Ae)?ae.value:Ae}fe!==ae.result&&(ae.result=fe,j=!0)}),j};I(),I()},[L]);const D=k=>{F&&F!==k&&$(null),z(k),re(_[k].formula||_[k].value),C(I=>({...I,cellId:k}))},P=k=>{const I=k.target.value;re(I);const j=S;if(j){const H={..._};if(H[j]={...H[j],formula:I,value:I.startsWith("=")?H[j].value:I},I.startsWith("="))H[j].result=gb(I.substring(1),H);else{const ae=parseFloat(I);H[j].result=isNaN(ae)?I:ae}E(H)}},A=(k,I)=>{if(!S)return;const j={..._};j[S]={...j[S],[k]:I},E(j)},ee=()=>{if(!N.cellId||!N.label){alert("Ltfen hcre ve isim giriniz.");return}W([...ne,{...N,id:Date.now()}]),C({cellId:"",label:"",targetCurrency:"None",customUnit:""})},Se=k=>{W(ne.filter(I=>I.id!==k))},K=(k,I,j=null)=>{const H=j?j[k]:_[k];if(!H)return{main:"Veri Yok",sub:null};let ae=parseFloat(H.result);if(isNaN(ae)&&(ae=parseFloat(H.value)),isNaN(ae))return{main:H.result||H.value||"-",sub:null};const fe=H.currency;if(I==="None"||fe==="None"||I===fe)return{main:ae,sub:null};let Ae=ae;fe!=="USD"&&(Ae=ae/(p[fe]||1));let Re=Ae;return I!=="USD"&&(Re=Ae*(p[I]||1)),{main:Re,sub:ae,sourceSym:va(fe),targetSym:va(I)}},pe=async()=>{if(!ue){alert("Ltfen bir balk giriniz.");return}const k={};Object.keys(_).forEach(j=>{(_[j].formula||_[j].value||_[j].currency!=="None"||_[j].customUnit)&&(k[j]=_[j])});const I={title:ue,cells:JSON.stringify(k),outputs:JSON.stringify(ne),updatedAt:new Date().toISOString()};try{be?await Jn(It(Oe,"price_cards",be),I):await li(bt(Oe,"price_cards"),I),alert("Kaydedildi!"),u("cards")}catch(j){alert("Hata: "+j.message)}},q=k=>{const I=JSON.parse(k.cells),j=Rm();Object.keys(I).forEach(H=>{j[H]=I[H]}),E(j),W(k.outputs?JSON.parse(k.outputs):[]),ve(k.title),R(k.id),u("sheet")},me=()=>{E(Rm()),W([]),ve(""),R(null),re(""),z(null),$(null),u("sheet")},we=async k=>{window.confirm("Silmek istediinize emin misiniz?")&&await Li(It(Oe,"price_cards",k))};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(_e.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const O=p.TRY/p.EUR;return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hesaplama Motoru"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Excel benzeri formller ve kur evirici"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"hidden lg:flex items-center gap-3 bg-white/80 backdrop-blur-md px-4 py-2 rounded-xl border border-gray-200 shadow-sm text-xs font-bold text-gray-600",children:[c.jsxs("span",{className:"flex items-center text-emerald-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"USD/TRY:"})," ",p.TRY.toFixed(2)]}),c.jsx("div",{className:"w-px h-4 bg-gray-300"}),c.jsxs("span",{className:"flex items-center text-indigo-600",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"EUR/TRY:"})," ",O.toFixed(2)]})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="cards"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Kartlar"}),c.jsx("button",{onClick:()=>u("sheet"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="sheet"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Hesaplama"})]})]})]}),l==="cards"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start",children:[c.jsxs("div",{onClick:me,className:"border-2 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center h-48 cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/50 transition-all text-gray-400 hover:text-indigo-500 group",children:[c.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:c.jsx(_e.Plus,{})}),c.jsx("span",{className:"font-bold text-sm",children:"Yeni Tablo"})]}),f.map(k=>{const I=k.outputs?JSON.parse(k.outputs):[],j=JSON.parse(k.cells);return c.jsxs(ps,{className:"p-0 hover:shadow-xl transition-all group flex flex-col h-auto overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-100 bg-gray-50/50",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate",title:k.title,children:k.title}),c.jsx("p",{className:"text-[10px] text-gray-400",children:new Date(k.updatedAt).toLocaleDateString("tr-TR")})]}),c.jsx("div",{className:"p-4 space-y-3 bg-white",children:I.length>0?I.map((H,ae)=>{const fe=K(H.cellId,H.targetCurrency,j),Ae=H.targetCurrency==="Custom"?H.customUnit:H.targetCurrency!=="None"?va(H.targetCurrency):"";return c.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-50 last:border-0 pb-2 last:pb-0",children:[c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase",children:H.label})}),c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"font-bold text-indigo-600 block",children:[typeof fe.main=="number"?fe.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):fe.main," ",Ae]}),fe.sub!==null&&fe.sourceSym&&c.jsxs("span",{className:"text-[10px] text-gray-400 block",children:["(",fe.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",fe.sourceSym,")"]})]})]},ae)}):c.jsx("div",{className:"text-xs text-gray-300 italic text-center py-4",children:"Gsterge eklenmemi."})}),c.jsxs("div",{className:"flex gap-2 p-3 bg-gray-50 border-t border-gray-200 mt-auto",children:[c.jsx(Vt,{variant:"primary",className:"flex-1 text-xs py-2",onClick:()=>q(k),children:"Dzenle"}),c.jsx("button",{onClick:()=>we(k.id),className:"p-2 bg-white border border-gray-200 text-red-500 rounded-lg hover:bg-red-50 transition-colors",children:c.jsx(_e.Trash,{})})]})]},k.id)})]}),l==="sheet"&&c.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[c.jsxs(ps,{className:"p-4 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between z-20",children:[c.jsxs("div",{className:"flex-grow w-full xl:w-auto flex gap-2 items-center",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-2 rounded-lg border border-indigo-100 min-w-[3rem] text-center",children:S||"A1"}),c.jsx("input",{className:"flex-grow bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm font-mono focus:ring-2 focus:ring-indigo-500 shadow-sm",placeholder:"Forml (=SUM(A1:B2)) veya Deer",value:L,onChange:P})]}),S&&c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-1.5 rounded-xl border border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 px-2",children:"HCRE:"}),c.jsxs("select",{className:"bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2 font-medium",value:_[S]?.currency||"None",onChange:k=>A("currency",k.target.value),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]}),_[S]?.currency==="None"&&c.jsx("input",{className:"w-20 bg-white border-none text-xs rounded-lg shadow-sm py-1.5 px-2",placeholder:"Birim (kg)",value:_[S]?.customUnit||"",onChange:k=>A("customUnit",k.target.value)})]}),c.jsxs("div",{className:"flex gap-2 w-full xl:w-auto border-l border-gray-200 pl-4",children:[c.jsx("input",{className:"bg-transparent border-b border-gray-300 focus:border-indigo-500 outline-none text-sm font-bold text-gray-700 px-2 py-1 w-32",placeholder:"Tablo Ad...",value:ue,onChange:k=>ve(k.target.value)}),c.jsx(Vt,{variant:"success",className:"py-2 text-xs",onClick:pe,children:"Kaydet"}),c.jsx(Vt,{variant:"secondary",className:"py-2 text-xs text-red-500",onClick:me,children:"Temizle"})]})]}),c.jsx("div",{className:"flex-grow bg-white border border-gray-300 rounded-xl overflow-auto shadow-inner custom-scrollbar relative max-h-[50vh]",children:c.jsxs("table",{className:"w-full border-collapse",style:{minWidth:"800px"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-10 bg-gray-100 border-r border-b border-gray-300 sticky top-0 left-0 z-20"}),ap.map(k=>c.jsx("th",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 py-2 sticky top-0 z-10 w-32 text-center",children:k},k))]})}),c.jsx("tbody",{children:Array.from({length:Z1}).map((k,I)=>{const j=I+1;return c.jsxs("tr",{children:[c.jsx("td",{className:"bg-gray-100 border-r border-b border-gray-300 text-xs font-bold text-gray-500 text-center sticky left-0 z-10",children:j}),ap.map(H=>{const ae=`${H}${j}`,fe=_[ae],Ae=S===ae,Re=F===ae;fe.formula.startsWith("=");let at="";return fe.currency&&fe.currency!=="None"?at=va(fe.currency):fe.customUnit&&(at=fe.customUnit),c.jsx("td",{onClick:()=>D(ae),className:`
                                 border-r border-b border-gray-200 text-sm p-0 h-10 min-w-[100px] relative
                                 ${Ae?"ring-2 ring-indigo-500 z-10 bg-indigo-50":"hover:bg-gray-50"}
                                 cursor-cell transition-colors
                               `,children:Re?c.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none px-2 bg-white text-gray-900 font-mono",value:L,onChange:P,onBlur:()=>$(null),onKeyDown:ct=>{ct.key==="Enter"&&$(null)}}):c.jsxs("div",{className:"w-full h-full flex items-center justify-end px-2 truncate font-mono text-gray-700",children:[typeof fe.result=="number"?fe.result.toLocaleString("tr-TR",{maximumFractionDigits:2}):fe.result,c.jsx("span",{className:"text-[10px] text-gray-400 ml-1 font-sans",children:at})]})},ae)})]},j)})})]})}),c.jsxs("div",{className:"text-[10px] text-gray-400 px-2",children:["* Fonksiyonlar: ",c.jsx("b",{children:"SUM, AVERAGE, MAX, MIN, COUNT, STDEV, IF"}),". rnek: ",c.jsx("b",{children:"=SUM(A1:A5)"})," veya ",c.jsx("b",{children:"=STDEV(B1:B10)"}),". Hcreyi silmek iin seip ",c.jsx("b",{children:"Delete"})," tuuna basn."]}),c.jsxs("div",{className:"bg-gray-100 rounded-2xl p-6 border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-4 flex items-center gap-2",children:"zel Gstergeler & eviriciler"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"w-full md:w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hcre"}),c.jsx(Ke,{placeholder:"A1",value:N.cellId,onChange:k=>C({...N,cellId:k.target.value.toUpperCase()}),className:"py-2 text-center font-mono uppercase"})]}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Etiket smi"}),c.jsx(Ke,{placeholder:"rn: Toplam Maliyet",value:N.label,onChange:k=>C({...N,label:k.target.value}),className:"py-2"})]}),c.jsxs("div",{className:"w-full md:w-40",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Hedef Birim"}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:N.targetCurrency,onChange:k=>C({...N,targetCurrency:k.target.value}),children:[c.jsx("option",{value:"None",children:"evirme (Ayn)"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"}),c.jsx("option",{value:"Custom",children:"zel Birim"})]})]}),N.targetCurrency==="Custom"&&c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Birim Ad"}),c.jsx(Ke,{placeholder:"kg, m2",value:N.customUnit,onChange:k=>C({...N,customUnit:k.target.value}),className:"py-2"})]}),c.jsx("button",{onClick:ee,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 shadow-md transition-all h-[42px]",children:"Ekle"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[ne.map(k=>{const I=K(k.cellId,k.targetCurrency),j=_[k.cellId],H=k.targetCurrency==="Custom"?k.customUnit:k.targetCurrency!=="None"?va(k.targetCurrency):j?va(j.currency)!==""?va(j.currency):j.customUnit:"";return c.jsxs(ps,{className:"p-4 relative group hover:shadow-lg border-l-4 border-l-indigo-500",children:[c.jsx("button",{onClick:()=>Se(k.id),className:"absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:k.label}),c.jsx("span",{className:"text-[10px] font-mono text-indigo-300 bg-indigo-50 px-1 rounded",children:k.cellId})]}),c.jsxs("div",{className:"text-2xl font-bold text-gray-800 flex items-baseline gap-1",children:[typeof I.main=="number"?I.main.toLocaleString("tr-TR",{maximumFractionDigits:2}):I.main,c.jsx("span",{className:"text-sm text-gray-500 font-medium",children:H})]}),I.sub!==null&&c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Orijinal: ",I.sub.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",I.sourceSym]})]},k.id)}),ne.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-4 text-sm",children:"Henz zel gsterge eklenmedi."})]})]})]})]})}const lp={leftImage:null,topImage:null,kod:"",size:"",color:""},yb=Array(14).fill(null).map(()=>({...lp}));function SR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState([]),[p,x]=J.useState(!1),[_,E]=J.useState(!1),[S,z]=J.useState("batches"),[F,$]=J.useState({title:"",labels:yb}),[L,re]=J.useState({name:"",...lp}),[ne,W]=J.useState(null),ue=J.useRef({});if(J.useEffect(()=>{const q=ms.onAuthStateChanged(I=>{e(I),r(!1)}),me=Cn(bt(Oe,"label_batches"),zn("createdAt","desc")),we=gs(me,I=>{u(I.docs.map(j=>({id:j.id,...j.data()})))}),O=Cn(bt(Oe,"label_templates"),zn("name","asc")),k=gs(O,I=>{y(I.docs.map(j=>({id:j.id,...j.data()})))});return()=>{q(),we(),k()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const ve=(q,me)=>{if(!q)return;const we=new FileReader;we.onload=O=>{const k=new Image;k.onload=()=>{const I=document.createElement("canvas"),j=400;let H=k.width,ae=k.height;H>ae?H>j&&(ae*=j/H,H=j):ae>j&&(H*=j/ae,ae=j),I.width=H,I.height=ae,I.getContext("2d").drawImage(k,0,0,H,ae),me(I.toDataURL("image/jpeg",.6))},k.src=O.target.result},we.readAsDataURL(q)},be=(q,me,we,O)=>{const k=q.clipboardData.items;for(let I=0;I<k.length;I++)if(k[I].type.indexOf("image")!==-1){const j=k[I].getAsFile();ve(j,H=>O(me,we,H)),q.preventDefault();return}},R=(q=null)=>{q?(W(q.id),$({title:q.title,labels:q.labels})):(W(null),$({title:"",labels:yb.map(me=>({...me}))})),x(!0)},N=(q,me,we)=>{const O=[...F.labels];O[q]={...O[q],[me]:we},$({...F,labels:O})},C=()=>{if(window.confirm("lk etiketteki veriler dier tm etiketlere kopyalanacak. Onaylyor musunuz?")){const q=F.labels[0],me=F.labels.map(()=>({...q}));$({...F,labels:me})}},M=(q,me)=>{const we=f.find(O=>O.id===me);if(we){const O=[...F.labels];O[q]={leftImage:we.leftImage,topImage:we.topImage,kod:we.kod,size:we.size,color:we.color},$({...F,labels:O})}},D=async q=>{q.preventDefault();try{const me={...F,createdAt:new Date().toISOString()};ne?await Jn(It(Oe,"label_batches",ne),me):await li(bt(Oe,"label_batches"),me),x(!1)}catch(me){alert("Hata: "+me.message)}},P=async q=>{window.confirm("Bu etiket sayfasn silmek istiyor musunuz?")&&await Li(It(Oe,"label_batches",q))},A=(q=null)=>{q?(W(q.id),re(q)):(W(null),re({name:"",...lp})),E(!0)},ee=async q=>{q.preventDefault();try{ne?await Jn(It(Oe,"label_templates",ne),L):await li(bt(Oe,"label_templates"),L),E(!1)}catch(me){alert("Hata: "+me.message)}},Se=async q=>{window.confirm("Bu ablonu silmek istiyor musunuz?")&&await Li(It(Oe,"label_templates",q))},K=q=>{const me=window.open("","","height=800,width=1000");if(!me)return;const we=`
      <html><head><title>Etiketler - ${q.title}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        
        body { 
          font-family: 'Arial', sans-serif; 
          color: #000;
          box-sizing: border-box;
          
          /* 3. STEK: stten 3mm, alttan 1mm ksaltld (Eskisi 10mm idi) */
          padding-top: 9mm;     
          padding-bottom: 10mm;
          
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: repeat(7, 1fr);
                    
          height: 100%;
        }

        .label-container {
          /* 1. STEK: Kesik izgiler kaldrld (border: none) */
          border: none; 
          
          box-sizing: border-box;
          padding: 2px;
          display: flex;
          overflow: hidden;
          height: 100%;
          page-break-inside: avoid; 
        }

        /* 25% Left (Vertical Image) */
        .left-section {
          width: 28%;
          height: 100%;
          /* Sa izgi hafife kalsn m? sterseniz kaldrabilirsiniz: border-right: none; */
          border-right: 1px solid #eee; 
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-right: 2px;
        }
        .left-img {
          width: 100%;
          height: 100%;
          object-fit: contain; 
        }

        /* 75% Right */
        .right-section {
          width: 72%;
          display: flex;
          flex-direction: column;
          padding-left: 5px;
        }

        /* Top 1/3 of Right (Horizontal Logo) */
        .top-section {
          height: 35%;
          border-bottom: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          margin-bottom: 2px;
        }
        .logo-img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        /* Bottom 2/3 of Right (Info) */
        .info-section {
          height: 65%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          font-size: 11pt;
          /* 2. STEK: Tm yazlar kaln (bold) */
          font-weight: bold; 
          line-height: 1.4;
        }

        .info-row { align-items: baseline; }
        .label-key { width: 55px; font-weight: bold; }
        
        /* 2. STEK: Deerler de kaln olsun */
        .label-val { font-weight: bold; } 

        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        ${q.labels.map(O=>`
          <div class="label-container">
            <div class="left-section">
              ${O.leftImage?`<img src="${O.leftImage}" class="left-img" />`:""}
            </div>
            <div class="right-section">
              <div class="top-section">
                ${O.topImage?`<img src="${O.topImage}" class="logo-img" />`:""}
              </div>
              <div class="info-section">
                <div class="info-row"><span class="label-key">KOD:</span> <span class="label-val">${O.kod||""}</span></div>
                <div class="info-row"><span class="label-key">SIZE:</span> <span class="label-val">${O.size||""}</span></div>
                <div class="info-row"><span class="label-key">COLOR: </span> <span class="label-val">${O.color||""}</span></div>
              </div>
            </div>
          </div>
        `).join("")}
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;me.document.write(we),me.document.close()},pe=(q,me,we,O=!1)=>c.jsxs("div",{className:`grid grid-cols-4 gap-0 bg-white border border-gray-300 rounded-xl shadow-sm relative group hover:z-20 transition-all ${O?"":"h-36"}`,children:[c.jsx("div",{className:"col-span-1 border-r border-gray-300 bg-gray-50 relative h-full rounded-l-xl overflow-hidden",children:c.jsxs("div",{tabIndex:"0",onPaste:k=>be(k,me,"leftImage",we),className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors outline-none focus:ring-4 focus:ring-indigo-200 focus:bg-white",onClick:()=>ue.current[`left-${me}`]?.click(),title:"Tkla ve Resim Se veya CTRL+V ile Yaptr",children:[q.leftImage?c.jsx("img",{src:q.leftImage,className:"w-full h-full object-cover",alt:"Sol"}):c.jsx("span",{className:"text-2xl text-gray-300 font-light select-none",children:"+"}),c.jsx("input",{type:"file",className:"hidden",ref:k=>ue.current[`left-${me}`]=k,onChange:k=>ve(k.target.files[0],I=>we(me,"leftImage",I))}),q.leftImage&&c.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),we(me,"leftImage",null)},className:"absolute top-1 right-1 bg-white/80 rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""})]})}),c.jsxs("div",{className:"col-span-3 flex flex-col h-full relative",children:[c.jsx("div",{className:"h-1/3 border-b border-gray-200 relative group bg-white rounded-tr-xl overflow-hidden",children:c.jsxs("div",{tabIndex:"0",onPaste:k=>be(k,me,"topImage",we),className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors outline-none focus:ring-4 focus:ring-indigo-200",onClick:()=>ue.current[`top-${me}`]?.click(),title:"Tkla ve Resim Se veya CTRL+V ile Yaptr",children:[q.topImage?c.jsx("img",{src:q.topImage,className:"w-full h-full object-contain p-1",alt:"Logo"}):c.jsx("span",{className:"text-[9px] text-gray-400 font-bold tracking-widest select-none",children:"LOGO"}),c.jsx("input",{type:"file",className:"hidden",ref:k=>ue.current[`top-${me}`]=k,onChange:k=>ve(k.target.files[0],I=>we(me,"topImage",I))}),q.topImage&&c.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),we(me,"topImage",null)},className:"absolute top-1 right-1 bg-white/80 text-red-500 w-4 h-4 text-[10px] flex items-center justify-center rounded hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:""})]})}),c.jsxs("div",{className:"h-2/3 flex flex-col justify-center p-2 gap-1.5 bg-white rounded-br-xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"KOD"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.kod,onChange:k=>we(me,"kod",k.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"SIZE"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.size,onChange:k=>we(me,"size",k.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-500 w-8 text-right flex-shrink-0",children:"CLR"}),c.jsx("input",{className:"flex-grow min-w-0 text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:q.color,onChange:k=>we(me,"color",k.target.value)})]})]})]}),!O&&c.jsx("div",{className:"absolute top-1 left-1 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-24 scale-75 origin-top-left shadow-md bg-white rounded",children:c.jsx(Sa,{options:f.map(k=>k.name),placeholder:"ablon",onChange:k=>{const I=f.find(j=>j.name===k);I&&M(me,I.id)},selected:""})})})]});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Etiket Basm"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A4 etiket tasarm ve yazdrma"})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>z("batches"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${S==="batches"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Etiket Sayfalar"}),c.jsx("button",{onClick:()=>z("templates"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${S==="templates"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"ablonlar"})]}),c.jsxs("button",{onClick:()=>S==="batches"?R():A(),className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(_e.Plus,{})," ",c.jsx("span",{className:"ml-2",children:S==="batches"?"Etiket Sayfas Olutur":"ablon Ekle"})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10",children:S==="batches"?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.map(q=>c.jsx(ps,{className:"p-0 hover:shadow-xl transition-all group overflow-hidden",children:c.jsxs("div",{className:"flex h-40",children:[c.jsx("div",{className:"w-32 bg-gray-100 border-r border-gray-200 p-2 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full bg-white border border-gray-300 shadow-sm grid grid-cols-2 grid-rows-7 gap-[1px] p-[2px]",children:q.labels.map((me,we)=>c.jsxs("div",{className:"bg-gray-50 border border-gray-100 relative overflow-hidden",children:[me.leftImage&&c.jsx("img",{src:me.leftImage,className:"absolute left-0 top-0 h-full w-1/3 object-cover opacity-50"}),me.topImage&&c.jsx("img",{src:me.topImage,className:"absolute right-0 top-0 h-1/2 w-2/3 object-contain opacity-50"})]},we))})}),c.jsxs("div",{className:"flex-grow p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:q.title}),c.jsx("p",{className:"text-xs text-gray-500 font-medium bg-gray-100 inline-block px-2 py-0.5 rounded",children:new Date(q.createdAt).toLocaleDateString("tr-TR")})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(Vt,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>K(q),children:[c.jsx(_e.Printer,{})," Yazdr"]}),c.jsx(Vt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-blue-600",onClick:()=>R(q),children:c.jsx(_e.Edit,{})}),c.jsx(Vt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-red-600",onClick:()=>P(q.id),children:c.jsx(_e.Trash,{})})]})]})]})},q.id)),l.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"Kaytl etiket sayfas yok."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.map(q=>c.jsxs(ps,{className:"p-4 hover:shadow-xl transition-all group relative",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3 truncate border-b border-gray-100 pb-2",children:q.name}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white text-[9px] h-32 flex gap-2",children:[c.jsx("div",{className:"w-1/3 h-full bg-gray-50 flex items-center justify-center text-gray-300 overflow-hidden rounded relative",children:q.leftImage?c.jsx("img",{src:q.leftImage,className:"absolute inset-0 w-full h-full object-cover"}):"IMG"}),c.jsxs("div",{className:"w-2/3 flex flex-col h-full",children:[c.jsx("div",{className:"h-1/3 bg-gray-50 mb-2 flex items-center justify-center overflow-hidden border border-gray-100 relative rounded",children:q.topImage?c.jsx("img",{src:q.topImage,className:"absolute inset-0 w-full h-full object-cover"}):"LOGO"}),c.jsxs("div",{className:"space-y-1 mt-auto",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"KOD:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.kod})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"SIZE:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.size})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"CLR:"}),c.jsx("span",{className:"truncate w-16 text-right",children:q.color})]})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>A(q),className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(_e.Edit,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>Se(q.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",children:c.jsx(_e.Trash,{className:"w-4 h-4"})})]})]},q.id)),f.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"ablon bulunamad."})]})}),c.jsx(zr,{isOpen:p,onClose:()=>x(!1),title:ne?"Etiket Sayfasn Dzenle":"Yeni Etiket Sayfas",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sayfa Bal"}),c.jsx(Ke,{required:!0,placeholder:"rn: 2025 Kap Siparileri",value:F.title,onChange:q=>$({...F,title:q.target.value})})]}),c.jsx("button",{type:"button",onClick:C,className:"px-5 py-3 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold hover:bg-purple-200 transition-colors shadow-sm",children:"lkini Hepsine Uygula"})]}),c.jsx("div",{className:"bg-gray-100 p-4 rounded-2xl border border-gray-200 h-[60vh] overflow-y-auto custom-scrollbar",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.labels.map((q,me)=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md z-30 pointer-events-none",children:me+1}),pe(q,me,N)]},me))})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Vt,{variant:"secondary",type:"button",onClick:()=>x(!1),children:"ptal"}),c.jsx(Vt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsx(zr,{isOpen:_,onClose:()=>E(!1),title:ne?"ablonu Dzenle":"Yeni ablon",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ablon Ad"}),c.jsx(Ke,{required:!0,placeholder:"rn: Beyaz Panel Kap",value:L.name,onChange:q=>re({...L,name:q.target.value})})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:pe(L,-1,(q,me,we)=>re({...L,[me]:we}),!0)}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Vt,{variant:"secondary",type:"button",onClick:()=>E(!1),children:"ptal"}),c.jsx(Vt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})})]})}const ba={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},bl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},xb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],NR=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Im=2.5,js=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function AR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState([]),[f,y]=J.useState(new Date),[p,x]=J.useState(!1),[_,E]=J.useState(!1),[S,z]=J.useState(null),[F,$]=J.useState(new Date),[L,re]=J.useState(!1),[ne,W]=J.useState(new Date().getFullYear()),[ue,ve]=J.useState(!1),[be,R]=J.useState(null),[N,C]=J.useState({type:"work",overtimeSlots:0,lateness:0}),[M,D]=J.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});J.useEffect(()=>{const j=ms.onAuthStateChanged(Ae=>{e(Ae),r(!1)}),H=Cn(bt(Oe,"employees"),zn("name","asc")),ae=gs(H,Ae=>{u(Ae.docs.map(Re=>({id:Re.id,...Re.data()})))}),fe=setInterval(()=>y(new Date),6e4);return()=>{j(),ae(),clearInterval(fe)}},[]);const P=j=>{const H=f.toISOString().split("T")[0],ae=f.getDay(),fe=f.getHours(),Ae=f.getMinutes(),Re=fe*60+Ae,at=j.attendance?.[H];if(at){if(["paid_leave","unpaid_leave"].includes(at.type))return bl.LEAVE;if(at.overtimeSlots>0)return bl.OVERTIME}const[ct,Qe]=j.startHour.split(":").map(Number),[Lt,Et]=j.endHour.split(":").map(Number),ce=ct*60+Qe,ye=Lt*60+Et;return j.workDays.includes(ae)?Re>=ce&&Re<ye?bl.ONLINE:Re>=ye&&at?.overtimeSlots>0?bl.OVERTIME:bl.OFFLINE:bl.OFFLINE},A=j=>{if(!j.attendance)return{used:0,remaining:j.vacationTotal};let H=0;return Object.values(j.attendance).forEach(ae=>{ae.type==="paid_leave"&&H++}),{used:H,remaining:j.vacationTotal-H}},ee=(j,H)=>{const ae=H.getFullYear(),fe=H.getMonth(),Ae=new Date(ae,fe+1,0).getDate();let Re=0,at=0,ct=0,Qe=0,Lt=0;for(let Be=1;Be<=Ae;Be++){const Tt=`${ae}-${String(fe+1).padStart(2,"0")}-${String(Be).padStart(2,"0")}`,bn=new Date(Tt).getDay(),Rn=j.attendance?.[Tt],qi=j.workDays.includes(bn);Rn?(Rn.type==="work"&&Re++,Rn.type==="paid_leave"&&Lt++,Rn.type==="unpaid_leave"&&Qe++,Rn.overtimeSlots&&(at+=parseInt(Rn.overtimeSlots)),Rn.lateness&&(ct+=parseFloat(Rn.lateness))):qi&&Re++}const Et=parseFloat(j.salaryAmount)||0,ce=j.customDailyRate&&parseFloat(j.customDailyRate)>0?parseFloat(j.customDailyRate):Et/30,ye=parseFloat(j.customDeductionRate),ge=!isNaN(ye)&&ye>0?ye:ce,Le=ce/9,Me=j.customOvertimeMultiplier?parseFloat(j.customOvertimeMultiplier):1.5,Ie=at*Im,X=Ie*(Le*Me),Te=Qe*ge,$e=ct*Le,it=Te+$e,vn=Et+X-it+(parseFloat(j.insurance)||0)+(parseFloat(j.allowance)||0);return{workedDays:Re,totalOvertimeSlots:at,totalOvertimeHours:Ie,unpaidLeaveDays:Qe,paidLeaveDays:Lt,overtimePay:X,totalLatenessHours:ct,latenessDeduction:$e,totalDeduction:it,totalSalary:vn,dailyRate:ce,hourlyRate:Le,deductionRate:ge}},Se=(j,H)=>{const ae=new Date(j,H,1);let fe=0;return l.forEach(Ae=>{fe+=ee(Ae,ae).totalSalary}),fe},K=J.useMemo(()=>{let j=0,H=0;const ae=new Date(F);return ae.setMonth(F.getMonth()-1),l.forEach(fe=>{j+=ee(fe,F).totalSalary,H+=ee(fe,ae).totalSalary}),{thisMonthTotal:j,lastMonthTotal:H}},[l,F]),pe=()=>{E(!1),D({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},q=()=>{S&&(E(!0),D({name:S.name,role:S.role,salaryType:S.salaryType,salaryAmount:S.salaryAmount,insurance:S.insurance,allowance:S.allowance,vacationTotal:S.vacationTotal,workDays:S.workDays,startHour:S.startHour,endHour:S.endHour,customDailyRate:S.customDailyRate||"",customOvertimeMultiplier:S.customOvertimeMultiplier||"1.5",customDeductionRate:S.customDeductionRate||"",attendance:S.attendance||{}}),z(null),x(!0))},me=async j=>{j.preventDefault();try{const H={...M,updatedAt:new Date().toISOString()};_&&S?await Jn(It(Oe,"employees",S.id),H):await li(bt(Oe,"employees"),{...H,createdAt:new Date().toISOString()}),x(!1)}catch(H){alert("Hata: "+H.message)}},we=async j=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Li(It(Oe,"employees",j)),z(null))},O=(j,H)=>{R(j),C({type:H?.type||"work",overtimeSlots:H?.overtimeSlots||0,lateness:H?.lateness||0}),ve(!0)},k=async j=>{if(j.preventDefault(),!S||!be)return;const H={...S.attendance};H[be]={type:N.type,overtimeSlots:parseInt(N.overtimeSlots)||0,lateness:parseFloat(N.lateness)||0},await Jn(It(Oe,"employees",S.id),{attendance:H}),z({...S,attendance:H}),ve(!1)};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ba.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const I=({employee:j,date:H,onDateClick:ae})=>{const fe=H.getFullYear(),Ae=H.getMonth(),Re=new Date(fe,Ae+1,0).getDate(),at=new Date(fe,Ae,1).getDay(),ct=[];for(let Qe=0;Qe<at;Qe++)ct.push(null);for(let Qe=1;Qe<=Re;Qe++)ct.push(Qe);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:xb.map((Qe,Lt)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:Qe.slice(0,3)},Lt))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:ct.map((Qe,Lt)=>{if(!Qe)return c.jsx("div",{},Lt);const Et=`${fe}-${String(Ae+1).padStart(2,"0")}-${String(Qe).padStart(2,"0")}`,ce=j.attendance?.[Et],ye=new Date(Et).getDay(),ge=j.workDays.includes(ye);let Le="bg-gray-50 text-gray-400 border-gray-100";return ge&&(Le="bg-white border-emerald-200 text-gray-700 shadow-sm"),ce&&(ce.type==="paid_leave"&&(Le="bg-yellow-50 border-yellow-200 text-yellow-700"),ce.type==="unpaid_leave"&&(Le="bg-red-50 border-red-200 text-red-700"),ce.type==="work"&&(ce.overtimeSlots>0||ce.lateness>0)&&(Le="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),ce.type==="off"&&(Le="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>ae(Et,ce),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${Le}`,children:[c.jsx("span",{className:"text-sm",children:Qe}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[ce?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",ce.overtimeSlots,"M"]}),ce?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",ce.lateness,"s"]})]})]},Lt)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>re(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",F.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:js(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(ba.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>re(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:js(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:pe,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(ba.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(j=>{const H=P(j),ae=A(j);return c.jsxs("div",{onClick:()=>z(j),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${H.color} ${H.ring} ring-offset-2 ring-2`,children:H.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(ba.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:j.name}),c.jsx("p",{className:"text-sm text-gray-500",children:j.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[j.startHour," - ",j.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[ae.remaining," gn kald"]})]})]})]},j.id)})}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:S.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:S.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(ba.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>we(S.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(ba.Trash,{})}),c.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",F.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const j=ee(S,F);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:js(j.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:js(Number(S.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",j.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",js(j.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",j.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",js(j.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",j.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",js(j.totalDeduction-j.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",js(Number(S.insurance)+Number(S.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Im," Saat",c.jsx("br",{}),"Saatlik cret = ",js(j.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",js(j.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>$(new Date(F.setMonth(F.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:F.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>$(new Date(F.setMonth(F.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(I,{employee:S,date:F,onDateClick:O})]})]})]})}),L&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>re(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(ba.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>W(j=>j-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:ne}),c.jsx("button",{onClick:()=>W(j=>j+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:NR.map((j,H)=>{const ae=Se(ne,H),fe=new Date().getMonth()===H&&new Date().getFullYear()===ne;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${fe?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${fe?"text-indigo-200":"text-gray-400"}`,children:j}),c.jsx("div",{className:`text-lg font-bold ${fe?"text-white":"text-gray-800"}`,children:ae>0?js(ae):"-"})]},j)})})]})}),p&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:me,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.name,onChange:j=>D({...M,name:j.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:M.role,onChange:j=>D({...M,role:j.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryType,onChange:j=>D({...M,salaryType:j.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.salaryAmount,onChange:j=>D({...M,salaryAmount:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.insurance,onChange:j=>D({...M,insurance:j.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.allowance,onChange:j=>D({...M,allowance:j.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDailyRate,onChange:j=>D({...M,customDailyRate:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customOvertimeMultiplier,onChange:j=>D({...M,customOvertimeMultiplier:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:M.customDeductionRate,onChange:j=>D({...M,customDeductionRate:j.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.vacationTotal,onChange:j=>D({...M,vacationTotal:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.startHour,onChange:j=>D({...M,startHour:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:M.endHour,onChange:j=>D({...M,endHour:j.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:xb.map((j,H)=>c.jsx("button",{type:"button",onClick:()=>{const ae=M.workDays.includes(H)?M.workDays.filter(fe=>fe!==H):[...M.workDays,H];D({...M,workDays:ae})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${M.workDays.includes(H)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:j.slice(0,3)},j))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),ue&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:be}),c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(j=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:j.id,checked:N.type===j.id,onChange:H=>C({...N,type:H.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:j.label})]},j.id))})]}),N.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Im,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(j=>c.jsx("button",{type:"button",onClick:()=>C({...N,overtimeSlots:N.overtimeSlots===j?0:j}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${N.overtimeSlots===j?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:j},j))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:N.lateness,onChange:j=>C({...N,lateness:j.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ve(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function jR(){const[i,e]=J.useState(null),[n,r]=J.useState(!0),[l,u]=J.useState("dashboard"),[f,y]=J.useState(!1);J.useEffect(()=>{const S=AS(ms,z=>{e(z),r(!1)});return()=>S()},[]);const p=async()=>{try{await jS(ms)}catch(S){console.error("k hatas:",S)}},x=S=>{u(S),y(!1)},_=[{id:"dashboard",label:"Genel Bak",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"musteriler",label:"Mteriler",icon:c.jsx(_e.User,{})},{id:"teklif",label:"Teklif & Szleme",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"siparis",label:"Sipariler",icon:c.jsx(_e.Clipboard,{})},{id:"urunler",label:"rn Hareketleri",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{id:"stok",label:"Stok Durumu",icon:c.jsx(_e.Box,{})},{id:"fiyatlandirma",label:"Hesaplama Motoru",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})},{id:"etiket",label:"Etiket Basm",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},{id:"calisan",label:"Personel",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}],E=()=>{switch(l){case"dashboard":return c.jsx(hb,{onNavigate:x,user:i});case"musteriler":return c.jsx(cR,{});case"siparis":return c.jsx(hR,{});case"teklif":return c.jsx(_R,{});case"urunler":return c.jsx(pR,{});case"stok":return c.jsx(vR,{});case"fiyatlandirma":return c.jsx(TR,{});case"etiket":return c.jsx(SR,{});case"calisan":return c.jsx(AR,{});default:return c.jsx(hb,{onNavigate:x})}};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):i?c.jsxs("div",{className:"flex min-h-screen bg-white font-sans text-gray-900 relative",children:[c.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-indigo-100/50 blur-[120px] animate-pulse"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-pink-100/50 blur-[120px] animate-pulse",style:{animationDelay:"2s"}})]}),c.jsxs("button",{onClick:()=>y(!f),className:"fixed top-0 left-0 z-[70] cursor-pointer group focus:outline-none","aria-label":"Toggle Menu",children:[c.jsx("div",{className:"w-[80px] h-[80px] bg-slate-900 group-hover:bg-indigo-600 transition-colors duration-300 shadow-2xl",style:{clipPath:"polygon(0 0, 100% 0, 0 100%)"}}),c.jsx("div",{className:"absolute top-4 left-4 text-white",children:f?c.jsx("svg",{className:"w-6 h-6 transform transition-transform duration-300 rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),c.jsxs("aside",{className:"fixed inset-y-0 left-0 z-60 w-80 bg-[#0f172a] text-white shadow-2xl border-r border-emerald-500/20",style:{clipPath:f?"circle(150% at 0px 0px)":"circle(0px at 0px 0px)",transition:"clip-path 0.7s cubic-bezier(0.25, 1, 0.5, 1)",pointerEvents:f?"auto":"none"},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-900/10 to-purple-900/10 pointer-events-none"}),c.jsxs("div",{className:"relative z-10 flex flex-col h-full pl-8",children:[c.jsxs("div",{className:"pt-24 pb-8 px-8 border-b border-white/5 bg-gradient-to-b from-[#0f172a] to-transparent -ml-8",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4 px-8",children:[c.jsx("h1",{className:"text-2xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400",children:"ERELEBLER"}),c.jsx("button",{onClick:p,className:"p-2 -mt-2 -mr-2 text-gray-400 hover:text-red-400 hover:bg-white/5 rounded-full transition-colors",title:"k Yap",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),c.jsxs("div",{className:"flex items-center gap-3 px-8",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-cyan-600 flex items-center justify-center text-sm font-bold shadow-lg shadow-emerald-900/50",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("p",{className:"text-xs font-bold text-white truncate w-48 opacity-90",children:i.email}),c.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),c.jsx("span",{className:"text-[10px] text-emerald-400 font-bold uppercase tracking-wider",children:"Ynetici"})]})]})]})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto custom-scrollbar space-y-1 -ml-4",children:_.map((S,z)=>c.jsxs("button",{onClick:()=>x(S.id),style:{transitionDelay:`${z*30}ms`},className:`
                    w-full flex items-center px-4 py-3.5 text-sm font-bold rounded-xl transition-all duration-300 group relative overflow-hidden
                    ${l===S.id?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.1)] translate-x-2":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent hover:translate-x-1"}
                    ${f?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
                  `,children:[c.jsx("span",{className:`mr-3 transition-transform duration-300 ${l===S.id?"scale-110":"group-hover:scale-110"}`,children:S.icon}),c.jsx("span",{children:S.label}),l===S.id&&c.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-emerald-500 shadow-[0_0_10px_#10b981]"})]},S.id))}),c.jsx("div",{className:"p-6 text-center -ml-8",children:c.jsx("p",{className:"text-[10px] text-slate-600 font-mono tracking-wider",children:"v2.1 SYSTEM ONLINE"})})]})]}),c.jsx("main",{className:"flex-1 flex flex-col min-w-0 relative z-10 transition-all duration-300 h-screen overflow-hidden",children:c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar p-0",children:c.jsx("div",{className:"w-full h-full max-w-[1920px] mx-auto",children:E()})})})]}):c.jsx(eR,{})}UE.createRoot(document.getElementById("root")).render(c.jsx(J.StrictMode,{children:c.jsx(jR,{})}));
