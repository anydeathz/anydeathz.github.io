(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function cw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tm={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function uw(){if(dv)return Uo;dv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:d}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var hv;function dw(){return hv||(hv=1,tm.exports=uw()),tm.exports}var c=dw(),nm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function hw(){if(fv)return Pe;fv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),N=Symbol.iterator;function U(M){return M===null||typeof M!="object"?null:(M=N&&M[N]||M["@@iterator"],typeof M=="function"?M:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Y={};function he(M,J,me){this.props=M,this.context=J,this.refs=Y,this.updater=me||X}he.prototype.isReactComponent={},he.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},he.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function oe(){}oe.prototype=he.prototype;function ve(M,J,me){this.props=M,this.context=J,this.refs=Y,this.updater=me||X}var ye=ve.prototype=new oe;ye.constructor=ve,G(ye,he.prototype),ye.isPureReactComponent=!0;var Se=Array.isArray;function xe(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function A(M,J,me){var L=me.ref;return{$$typeof:r,type:M,key:J,ref:L!==void 0?L:null,props:me}}function C(M,J){return A(M.type,J,M.props)}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(me){return J[me]})}var I=/\/+/g;function ce(M,J){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):J.toString(36)}function ke(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function K(M,J,me,L,V){var te=typeof M;(te==="undefined"||te==="boolean")&&(M=null);var ue=!1;if(M===null)ue=!0;else switch(te){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(M.$$typeof){case r:case e:ue=!0;break;case _:return ue=M._init,K(ue(M._payload),J,me,L,V)}}if(ue)return V=V(M),ue=L===""?"."+ce(M,0):L,Se(V)?(me="",ue!=null&&(me=ue.replace(I,"$&/")+"/"),K(V,J,me,"",function(Z){return Z})):V!=null&&(j(V)&&(V=C(V,me+(V.key==null||M&&M.key===V.key?"":(""+V.key).replace(I,"$&/")+"/")+ue)),J.push(V)),1;ue=0;var Ce=L===""?".":L+":";if(Se(M))for(var Me=0;Me<M.length;Me++)L=M[Me],te=Ce+ce(L,Me),ue+=K(L,J,me,te,V);else if(Me=U(M),typeof Me=="function")for(M=Me.call(M),Me=0;!(L=M.next()).done;)L=L.value,te=Ce+ce(L,Me++),ue+=K(L,J,me,te,V);else if(te==="object"){if(typeof M.then=="function")return K(ke(M),J,me,L,V);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ue}function fe(M,J,me){if(M==null)return M;var L=[],V=0;return K(M,L,"","",function(te){return J.call(me,te,V++)}),L}function _e(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(me){(M._status===0||M._status===-1)&&(M._status=1,M._result=me)},function(me){(M._status===0||M._status===-1)&&(M._status=2,M._result=me)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Be=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:fe,forEach:function(M,J,me){fe(M,function(){J.apply(this,arguments)},me)},count:function(M){var J=0;return fe(M,function(){J++}),J},toArray:function(M){return fe(M,function(J){return J})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Pe.Activity=T,Pe.Children=Ye,Pe.Component=he,Pe.Fragment=s,Pe.Profiler=o,Pe.PureComponent=ve,Pe.StrictMode=i,Pe.Suspense=v,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Pe.cache=function(M){return function(){return M.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(M,J,me){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var L=G({},M.props),V=M.key;if(J!=null)for(te in J.key!==void 0&&(V=""+J.key),J)!w.call(J,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&J.ref===void 0||(L[te]=J[te]);var te=arguments.length-2;if(te===1)L.children=me;else if(1<te){for(var ue=Array(te),Ce=0;Ce<te;Ce++)ue[Ce]=arguments[Ce+2];L.children=ue}return A(M.type,V,L)},Pe.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:d,_context:M},M},Pe.createElement=function(M,J,me){var L,V={},te=null;if(J!=null)for(L in J.key!==void 0&&(te=""+J.key),J)w.call(J,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(V[L]=J[L]);var ue=arguments.length-2;if(ue===1)V.children=me;else if(1<ue){for(var Ce=Array(ue),Me=0;Me<ue;Me++)Ce[Me]=arguments[Me+2];V.children=Ce}if(M&&M.defaultProps)for(L in ue=M.defaultProps,ue)V[L]===void 0&&(V[L]=ue[L]);return A(M,te,V)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(M){return{$$typeof:p,render:M}},Pe.isValidElement=j,Pe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:_e}},Pe.memo=function(M,J){return{$$typeof:y,type:M,compare:J===void 0?null:J}},Pe.startTransition=function(M){var J=R.T,me={};R.T=me;try{var L=M(),V=R.S;V!==null&&V(me,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(xe,Be)}catch(te){Be(te)}finally{J!==null&&me.types!==null&&(J.types=me.types),R.T=J}},Pe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Pe.use=function(M){return R.H.use(M)},Pe.useActionState=function(M,J,me){return R.H.useActionState(M,J,me)},Pe.useCallback=function(M,J){return R.H.useCallback(M,J)},Pe.useContext=function(M){return R.H.useContext(M)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(M,J){return R.H.useDeferredValue(M,J)},Pe.useEffect=function(M,J){return R.H.useEffect(M,J)},Pe.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Pe.useId=function(){return R.H.useId()},Pe.useImperativeHandle=function(M,J,me){return R.H.useImperativeHandle(M,J,me)},Pe.useInsertionEffect=function(M,J){return R.H.useInsertionEffect(M,J)},Pe.useLayoutEffect=function(M,J){return R.H.useLayoutEffect(M,J)},Pe.useMemo=function(M,J){return R.H.useMemo(M,J)},Pe.useOptimistic=function(M,J){return R.H.useOptimistic(M,J)},Pe.useReducer=function(M,J,me){return R.H.useReducer(M,J,me)},Pe.useRef=function(M){return R.H.useRef(M)},Pe.useState=function(M){return R.H.useState(M)},Pe.useSyncExternalStore=function(M,J,me){return R.H.useSyncExternalStore(M,J,me)},Pe.useTransition=function(){return R.H.useTransition()},Pe.version="19.2.0",Pe}var mv;function Zm(){return mv||(mv=1,nm.exports=hw()),nm.exports}var se=Zm();const nb=cw(se);var sm={exports:{}},zo={},rm={exports:{}},im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function fw(){return gv||(gv=1,(function(r){function e(K,fe){var _e=K.length;K.push(fe);e:for(;0<_e;){var Be=_e-1>>>1,Ye=K[Be];if(0<o(Ye,fe))K[Be]=fe,K[_e]=Ye,_e=Be;else break e}}function s(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var fe=K[0],_e=K.pop();if(_e!==fe){K[0]=_e;e:for(var Be=0,Ye=K.length,M=Ye>>>1;Be<M;){var J=2*(Be+1)-1,me=K[J],L=J+1,V=K[L];if(0>o(me,_e))L<Ye&&0>o(V,me)?(K[Be]=V,K[L]=_e,Be=L):(K[Be]=me,K[J]=_e,Be=J);else if(L<Ye&&0>o(V,_e))K[Be]=V,K[L]=_e,Be=L;else break e}}return fe}function o(K,fe){var _e=K.sortIndex-fe.sortIndex;return _e!==0?_e:K.id-fe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var v=[],y=[],_=1,T=null,N=3,U=!1,X=!1,G=!1,Y=!1,he=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;function ye(K){for(var fe=s(y);fe!==null;){if(fe.callback===null)i(y);else if(fe.startTime<=K)i(y),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=s(y)}}function Se(K){if(G=!1,ye(K),!X)if(s(v)!==null)X=!0,xe||(xe=!0,k());else{var fe=s(y);fe!==null&&ke(Se,fe.startTime-K)}}var xe=!1,R=-1,w=5,A=-1;function C(){return Y?!0:!(r.unstable_now()-A<w)}function j(){if(Y=!1,xe){var K=r.unstable_now();A=K;var fe=!0;try{e:{X=!1,G&&(G=!1,oe(R),R=-1),U=!0;var _e=N;try{t:{for(ye(K),T=s(v);T!==null&&!(T.expirationTime>K&&C());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,N=T.priorityLevel;var Ye=Be(T.expirationTime<=K);if(K=r.unstable_now(),typeof Ye=="function"){T.callback=Ye,ye(K),fe=!0;break t}T===s(v)&&i(v),ye(K)}else i(v);T=s(v)}if(T!==null)fe=!0;else{var M=s(y);M!==null&&ke(Se,M.startTime-K),fe=!1}}break e}finally{T=null,N=_e,U=!1}fe=void 0}}finally{fe?k():xe=!1}}}var k;if(typeof ve=="function")k=function(){ve(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ce=I.port2;I.port1.onmessage=j,k=function(){ce.postMessage(null)}}else k=function(){he(j,0)};function ke(K,fe){R=he(function(){K(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(K){switch(N){case 1:case 2:case 3:var fe=3;break;default:fe=N}var _e=N;N=fe;try{return K()}finally{N=_e}},r.unstable_requestPaint=function(){Y=!0},r.unstable_runWithPriority=function(K,fe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var _e=N;N=K;try{return fe()}finally{N=_e}},r.unstable_scheduleCallback=function(K,fe,_e){var Be=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,K){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=_e+Ye,K={id:_++,callback:fe,priorityLevel:K,startTime:_e,expirationTime:Ye,sortIndex:-1},_e>Be?(K.sortIndex=_e,e(y,K),s(v)===null&&K===s(y)&&(G?(oe(R),R=-1):G=!0,ke(Se,_e-Be))):(K.sortIndex=Ye,e(v,K),X||U||(X=!0,xe||(xe=!0,k()))),K},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(K){var fe=N;return function(){var _e=N;N=fe;try{return K.apply(this,arguments)}finally{N=_e}}}})(im)),im}var pv;function mw(){return pv||(pv=1,rm.exports=fw()),rm.exports}var am={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function gw(){if(yv)return cn;yv=1;var r=Zm();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:v,containerInfo:y,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(v,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(v,y,null,_)},cn.flushSync=function(v){var y=f.T,_=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=y,i.p=_,i.d.f()}},cn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(v,y))},cn.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},cn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:N,fetchPriority:U}):_==="script"&&i.d.X(v,{crossOrigin:T,integrity:N,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},cn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);i.d.M(v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(v)},cn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin);i.d.L(v,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},cn.preloadModule=function(v,y){if(typeof v=="string")if(y){var _=p(y.as,y.crossOrigin);i.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(v)},cn.requestFormReset=function(v){i.d.r(v)},cn.unstable_batchedUpdates=function(v,y){return v(y)},cn.useFormState=function(v,y,_){return f.H.useFormState(v,y,_)},cn.useFormStatus=function(){return f.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var vv;function pw(){if(vv)return am.exports;vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),am.exports=gw(),am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function yw(){if(xv)return zo;xv=1;var r=mw(),e=Zm(),s=pw();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(i(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return v(h),t;if(m===l)return v(h),n;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,l=m;break}if(E===l){x=!0,l=h,a=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===a){x=!0,a=m,l=h;break}if(E===l){x=!0,l=m,a=h;break}E=E.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,N=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),ve=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case he:return"Profiler";case Y:return"StrictMode";case Se:return"Suspense";case xe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case ve:return t.displayName||"Context";case oe:return(t._context.displayName||"Context")+".Consumer";case ye:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:ce(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return ce(t(n))}catch{}}return null}var ke=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Ye=-1;function M(t){return{current:t}}function J(t){0>Ye||(t.current=Be[Ye],Be[Ye]=null,Ye--)}function me(t,n){Ye++,Be[Ye]=t.current,t.current=n}var L=M(null),V=M(null),te=M(null),ue=M(null);function Ce(t,n){switch(me(te,n),me(V,t),me(L,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?My(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=My(n),t=Oy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(L),me(L,t)}function Me(){J(L),J(V),J(te)}function Z(t){t.memoizedState!==null&&me(ue,t);var n=L.current,a=Oy(n,t.type);n!==a&&(me(V,t),me(L,a))}function Ee(t){V.current===t&&(J(L),J(V)),ue.current===t&&(J(ue),Oo._currentValue=_e)}var de,H;function ie(t){if(de===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);de=n&&n[1]||"",H=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+t+H}var ae=!1;function we(t,n){if(!t||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch($){var F=$}Reflect.construct(t,[],re)}else{try{re.call()}catch($){F=$}t.call(re.prototype)}}else{try{throw Error()}catch($){F=$}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch($){if($&&F&&typeof $.stack=="string")return[$.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var D=x.split(`
`),q=E.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===q.length)for(l=D.length-1,h=q.length-1;1<=l&&0<=h&&D[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==q[h]){var W=`
`+D[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ie(a):""}function ge(t,n){switch(t.tag){case 26:case 27:case 5:return ie(t.type);case 16:return ie("Lazy");case 13:return t.child!==n&&n!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return we(t.type,!1);case 11:return we(t.type.render,!1);case 1:return we(t.type,!0);case 31:return ie("Activity");default:return""}}function je(t){try{var n="",a=null;do n+=ge(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ke=Object.prototype.hasOwnProperty,pt=r.unstable_scheduleCallback,mn=r.unstable_cancelCallback,Pl=r.unstable_shouldYield,Vi=r.unstable_requestPaint,Qt=r.unstable_now,tr=r.unstable_getCurrentPriorityLevel,nr=r.unstable_ImmediatePriority,Mr=r.unstable_UserBlockingPriority,Es=r.unstable_NormalPriority,Un=r.unstable_LowPriority,Sa=r.unstable_IdlePriority,Tc=r.log,Sc=r.unstable_setDisableYieldValue,rs=null,Jt=null;function zn(t){if(typeof Tc=="function"&&Sc(t),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(rs,t)}catch{}}var At=Math.clz32?Math.clz32:Ac,Nc=Math.log,Na=Math.LN2;function Ac(t){return t>>>=0,t===0?32:31-(Nc(t)/Na|0)|0}var Ts=256,Li=262144,Mt=4194304;function Ss(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ns(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?h=Ss(l):(x&=E,x!==0?h=Ss(x):a||(a=E&~t,a!==0&&(h=Ss(a))))):(E=l&~m,E!==0?h=Ss(E):x!==0?h=Ss(x):a||(a=l&~t,a!==0&&(h=Ss(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function is(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function rh(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(){var t=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),t}function As(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Pi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ih(t,n,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=x&~a;0<a;){var W=31-At(a),re=1<<W;E[W]=0,D[W]=-1;var F=q[W];if(F!==null)for(q[W]=null,W=0;W<F.length;W++){var $=F[W];$!==null&&($.lane&=-536870913)}a&=~re}l!==0&&Ui(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~n))}function Ui(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-At(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ul(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-At(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function zl(t,n){var a=n&-n;return a=(a&42)!==0?1:zi(a),(a&(t.suspendedLanes|n))!==0?0:a}function zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cc(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:rv(t.type))}function as(t,n){var a=fe.p;try{return fe.p=t,n()}finally{fe.p=a}}var ls=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ls,$t="__reactProps$"+ls,js="__reactContainer$"+ls,Aa="__reactEvents$"+ls,ah="__reactListeners$"+ls,Rc="__reactHandles$"+ls,Ic="__reactResources$"+ls,Cs="__reactMarker$"+ls;function ja(t){delete t[Ot],delete t[$t],delete t[Aa],delete t[ah],delete t[Rc]}function Rs(t){var n=t[Ot];if(n)return n;for(var a=t.parentNode;a;){if(n=a[js]||a[Ot]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=qy(t);t!==null;){if(a=t[Ot])return a;t=qy(t)}return n}t=a,a=t.parentNode}return null}function Bn(t){if(t=t[Ot]||t[js]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function jn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Is(t){var n=t[Ic];return n||(n=t[Ic]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(t){t[Cs]=!0}var Bl=new Set,ql={};function ks(t,n){Ds(t,n),Ds(t+"Capture",n)}function Ds(t,n){for(ql[t]=n,t=0;t<n.length;t++)Bl.add(n[t])}var Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Gl={};function kc(t){return Ke.call(Gl,t)?!0:Ke.call(Fl,t)?!1:Hl.test(t)?Gl[t]=!0:(Fl[t]=!0,!1)}function Ca(t,n,a){if(kc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Cn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Lt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Or(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ot(t){if(!t._valueTracker){var n=Or(t)?"checked":"value";t._valueTracker=Yl(t,n,""+t[n])}}function Bi(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Or(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qi=/[\n"\\]/g;function vn(t){return t.replace(qi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ra(t,n,a,l,h,m,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Xt(n)):t.value!==""+Xt(n)&&(t.value=""+Xt(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Kl(t,x,Xt(n)):a!=null?Kl(t,x,Xt(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Xt(E):t.removeAttribute("name")}function Dc(t,n,a,l,h,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ot(t);return}a=a!=null?""+Xt(a):"",n=n!=null?""+Xt(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),ot(t)}function Kl(t,n,a){n==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Vr(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Xt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Mc(t,n,a){if(n!=null&&(n=""+Xt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Xt(a):""}function Lr(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(ke(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Xt(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ot(t)}function xn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Oc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $l(t,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Ql(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Ql(t,m,n[m])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(t){return Pr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function os(){}var Xl=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ur=null,Os=null;function Hi(t){var n=Bn(t);if(n&&(t=n.stateNode)){var a=t[$t]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ra(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[$t]||null;if(!h)throw Error(i(90));Ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Bi(l)}break e;case"textarea":Mc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Vr(t,!!a.multiple,n,!1)}}}var Da=!1;function zr(t,n,a){if(Da)return t(n,a);Da=!0;try{var l=t(n);return l}finally{if(Da=!1,(Ur!==null||Os!==null)&&(Cu(),Ur&&(n=Ur,t=Os,Os=Ur=null,Hi(n),t)))for(n=0;n<t.length;n++)Hi(t[n])}}function cs(t,n){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(Hn)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{Fi=!1}var Vs=null,Wl=null,Gi=null;function Zl(){if(Gi)return Gi;var t,n=Wl,a=n.length,l,h="value"in Vs?Vs.value:Vs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[m-l];l++);return Gi=h.slice(t,1<l?1-l:void 0)}function Yi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function rr(){return!0}function us(){return!1}function en(t){function n(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?rr:us,this.isPropagationStopped=us,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),n}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=en(ir),Br=T({},ir,{view:0,detail:0}),Jl=en(Br),qr,Ma,Ps,Oa=T({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(qr=t.screenX-Ps.screenX,Ma=t.screenY-Ps.screenY):Ma=qr=0,Ps=t),qr)},movementY:function(t){return"movementY"in t?t.movementY:Ma}}),eo=en(Oa),Ki=T({},Oa,{dataTransfer:0}),Lc=en(Ki),Pc=T({},Br,{relatedTarget:0}),Qi=en(Pc),to=T({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Uc=en(to),Va=T({},ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zc=en(Va),Bc=T({},ir,{data:0}),Us=en(Bc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Fc[t])?!!n[t]:!1}function Hr(){return Gc}var gn=T({},Br,{key:function(t){if(t.key){var n=qc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yc=en(gn),Kc=T({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ar=en(Kc),u=T({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),g=en(u),b=T({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=en(b),z=T({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=en(z),pe=T({},ir,{newState:0,oldState:0}),qe=en(pe),jt=[9,13,27,32],it=Hn&&"CompositionEvent"in window,_t=null;Hn&&"documentMode"in document&&(_t=document.documentMode);var Fn=Hn&&"TextEvent"in window&&!_t,zs=Hn&&(!it||_t&&8<_t&&11>=_t),ds=" ",hs=!1;function $i(t,n){switch(t){case"keyup":return jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function D1(t,n){switch(t){case"compositionend":return La(n);case"keypress":return n.which!==32?null:(hs=!0,ds);case"textInput":return t=n.data,t===ds&&hs?null:t;default:return null}}function M1(t,n){if(Pa)return t==="compositionend"||!it&&$i(t,n)?(t=Zl(),Gi=Wl=Vs=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return zs&&n.locale!=="ko"?null:n.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!O1[t.type]:n==="textarea"}function Yg(t,n,a,l){Ur?Os?Os.push(l):Os=[l]:Ur=l,n=Vu(n,"onChange"),0<n.length&&(a=new Ls("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var no=null,so=null;function V1(t){jy(t,0)}function Qc(t){var n=jn(t);if(Bi(n))return t}function Kg(t,n){if(t==="change")return n}var Qg=!1;if(Hn){var lh;if(Hn){var oh="oninput"in document;if(!oh){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),oh=typeof $g.oninput=="function"}lh=oh}else lh=!1;Qg=lh&&(!document.documentMode||9<document.documentMode)}function Xg(){no&&(no.detachEvent("onpropertychange",Wg),so=no=null)}function Wg(t){if(t.propertyName==="value"&&Qc(so)){var n=[];Yg(n,so,t,qn(t)),zr(V1,n)}}function L1(t,n,a){t==="focusin"?(Xg(),no=n,so=a,no.attachEvent("onpropertychange",Wg)):t==="focusout"&&Xg()}function P1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(so)}function U1(t,n){if(t==="click")return Qc(n)}function z1(t,n){if(t==="input"||t==="change")return Qc(n)}function B1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Rn=typeof Object.is=="function"?Object.is:B1;function ro(t,n){if(Rn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ke.call(n,h)||!Rn(t[h],n[h]))return!1}return!0}function Zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,n){var a=Zg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zg(a)}}function ep(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ep(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function tp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ms(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ms(t.document)}return n}function ch(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var q1=Hn&&"documentMode"in document&&11>=document.documentMode,Ua=null,uh=null,io=null,dh=!1;function np(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dh||Ua==null||Ua!==Ms(l)||(l=Ua,"selectionStart"in l&&ch(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),io&&ro(io,l)||(io=l,l=Vu(uh,"onSelect"),0<l.length&&(n=new Ls("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ua)))}function Xi(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var za={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},hh={},sp={};Hn&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Wi(t){if(hh[t])return hh[t];if(!za[t])return t;var n=za[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in sp)return hh[t]=n[a];return t}var rp=Wi("animationend"),ip=Wi("animationiteration"),ap=Wi("animationstart"),H1=Wi("transitionrun"),F1=Wi("transitionstart"),G1=Wi("transitioncancel"),lp=Wi("transitionend"),op=new Map,fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fh.push("scrollEnd");function fs(t,n){op.set(t,n),ks(n,[t])}var $c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gn=[],Ba=0,mh=0;function Xc(){for(var t=Ba,n=mh=Ba=0;n<t;){var a=Gn[n];Gn[n++]=null;var l=Gn[n];Gn[n++]=null;var h=Gn[n];Gn[n++]=null;var m=Gn[n];if(Gn[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&cp(a,h,m)}}function Wc(t,n,a,l){Gn[Ba++]=t,Gn[Ba++]=n,Gn[Ba++]=a,Gn[Ba++]=l,mh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function gh(t,n,a,l){return Wc(t,n,a,l),Zc(t)}function Zi(t,n){return Wc(t,null,null,n),Zc(t)}function cp(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-At(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Zc(t){if(50<jo)throw jo=0,Sf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var qa={};function Y1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,n,a,l){return new Y1(t,n,a,l)}function ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lr(t,n){var a=t.alternate;return a===null?(a=In(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function up(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Jc(t,n,a,l,h,m){var x=0;if(l=t,typeof t=="function")ph(t)&&(x=1);else if(typeof t=="string")x=W2(t,a,L.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=In(31,a,n,h),t.elementType=A,t.lanes=m,t;case G:return Ji(a.children,h,m,n);case Y:x=8,h|=24;break;case he:return t=In(12,a,n,h|2),t.elementType=he,t.lanes=m,t;case Se:return t=In(13,a,n,h),t.elementType=Se,t.lanes=m,t;case xe:return t=In(19,a,n,h),t.elementType=xe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ve:x=10;break e;case oe:x=9;break e;case ye:x=11;break e;case R:x=14;break e;case w:x=16,l=null;break e}x=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return n=In(x,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function Ji(t,n,a,l){return t=In(7,t,l,n),t.lanes=a,t}function yh(t,n,a){return t=In(6,t,null,n),t.lanes=a,t}function dp(t){var n=In(18,null,null,0);return n.stateNode=t,n}function vh(t,n,a){return n=In(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var hp=new WeakMap;function Yn(t,n){if(typeof t=="object"&&t!==null){var a=hp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:je(n)},hp.set(t,n),n)}return{value:t,source:n,stack:je(n)}}var Ha=[],Fa=0,eu=null,ao=0,Kn=[],Qn=0,Fr=null,Bs=1,qs="";function or(t,n){Ha[Fa++]=ao,Ha[Fa++]=eu,eu=t,ao=n}function fp(t,n,a){Kn[Qn++]=Bs,Kn[Qn++]=qs,Kn[Qn++]=Fr,Fr=t;var l=Bs;t=qs;var h=32-At(l)-1;l&=~(1<<h),a+=1;var m=32-At(n)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Bs=1<<32-At(n)+h|a<<h|l,qs=m+t}else Bs=1<<m|a<<h|l,qs=t}function xh(t){t.return!==null&&(or(t,1),fp(t,1,0))}function bh(t){for(;t===eu;)eu=Ha[--Fa],Ha[Fa]=null,ao=Ha[--Fa],Ha[Fa]=null;for(;t===Fr;)Fr=Kn[--Qn],Kn[Qn]=null,qs=Kn[--Qn],Kn[Qn]=null,Bs=Kn[--Qn],Kn[Qn]=null}function mp(t,n){Kn[Qn++]=Bs,Kn[Qn++]=qs,Kn[Qn++]=Fr,Bs=n.id,qs=n.overflow,Fr=t}var tn=null,vt=null,tt=!1,Gr=null,$n=!1,_h=Error(i(519));function Yr(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(Yn(n,t)),_h}function gp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Ot]=t,n[$t]=l,a){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<Ro.length;a++)$e(Ro[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":$e("invalid",n),Dc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$e("invalid",n);break;case"textarea":$e("invalid",n),Lr(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||ky(n.textContent,a)?(l.popover!=null&&($e("beforetoggle",n),$e("toggle",n)),l.onScroll!=null&&$e("scroll",n),l.onScrollEnd!=null&&$e("scrollend",n),l.onClick!=null&&(n.onclick=os),n=!0):n=!1,n||Yr(t,!0)}function pp(t){for(tn=t.return;tn;)switch(tn.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:tn=tn.return}}function Ga(t){if(t!==tn)return!1;if(!tt)return pp(t),tt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||zf(t.type,t.memoizedProps)),a=!a),a&&vt&&Yr(t),pp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=By(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=By(t)}else n===27?(n=vt,ai(t.type)?(t=Gf,Gf=null,vt=t):vt=n):vt=tn?Wn(t.stateNode.nextSibling):null;return!0}function ea(){vt=tn=null,tt=!1}function wh(){var t=Gr;return t!==null&&(En===null?En=t:En.push.apply(En,t),Gr=null),t}function lo(t){Gr===null?Gr=[t]:Gr.push(t)}var Eh=M(null),ta=null,cr=null;function Kr(t,n,a){me(Eh,n._currentValue),n._currentValue=a}function ur(t){t._currentValue=Eh.current,J(Eh)}function Th(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Sh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var D=0;D<n.length;D++)if(E.context===n[D]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Th(m.return,a,t),l||(x=null);break e}m=E.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Th(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Ya(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var E=h.type;Rn(h.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(h===ue.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Oo):t=[Oo])}h=h.return}t!==null&&Sh(n,t,a,l),n.flags|=262144}function tu(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nn(t){return yp(ta,t)}function nu(t,n){return ta===null&&na(t),yp(t,n)}function yp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},cr===null){if(t===null)throw Error(i(308));cr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else cr=cr.next=n;return a}var K1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Q1=r.unstable_scheduleCallback,$1=r.unstable_NormalPriority,Pt={$$typeof:ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nh(){return{controller:new K1,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&Q1($1,function(){t.controller.abort()})}var co=null,Ah=0,Ka=0,Qa=null;function X1(t,n){if(co===null){var a=co=[];Ah=0,Ka=If(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ah++,n.then(vp,vp),n}function vp(){if(--Ah===0&&co!==null){Qa!==null&&(Qa.status="fulfilled");var t=co;co=null,Ka=0,Qa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function W1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var xp=K.S;K.S=function(t,n){ny=Qt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&X1(t,n),xp!==null&&xp(t,n)};var sa=M(null);function jh(){var t=sa.current;return t!==null?t:gt.pooledCache}function su(t,n){n===null?me(sa,sa.current):me(sa,n.pool)}function bp(){var t=jh();return t===null?null:{parent:Pt._currentValue,pool:t}}var $a=Error(i(460)),Ch=Error(i(474)),ru=Error(i(542)),iu={then:function(){}};function _p(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(os,os),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tp(t),t;default:if(typeof n.status=="string")n.then(os,os);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tp(t),t}throw ia=n,$a}}function ra(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ia=a,$a):a}}var ia=null;function Ep(){if(ia===null)throw Error(i(459));var t=ia;return ia=null,t}function Tp(t){if(t===$a||t===ru)throw Error(i(483))}var Xa=null,uo=0;function au(t){var n=uo;return uo+=1,Xa===null&&(Xa=[]),wp(Xa,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lu(t,n){throw n.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Sp(t){function n(P,O){if(t){var B=P.deletions;B===null?(P.deletions=[O],P.flags|=16):B.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function l(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=lr(P,O),P.index=0,P.sibling=null,P}function m(P,O,B){return P.index=B,t?(B=P.alternate,B!==null?(B=B.index,B<O?(P.flags|=67108866,O):B):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function x(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,O,B,ee){return O===null||O.tag!==6?(O=yh(B,P.mode,ee),O.return=P,O):(O=h(O,B),O.return=P,O)}function D(P,O,B,ee){var Re=B.type;return Re===G?W(P,O,B.props.children,ee,B.key):O!==null&&(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&ra(Re)===O.type)?(O=h(O,B.props),ho(O,B),O.return=P,O):(O=Jc(B.type,B.key,B.props,null,P.mode,ee),ho(O,B),O.return=P,O)}function q(P,O,B,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=vh(B,P.mode,ee),O.return=P,O):(O=h(O,B.children||[]),O.return=P,O)}function W(P,O,B,ee,Re){return O===null||O.tag!==7?(O=Ji(B,P.mode,ee,Re),O.return=P,O):(O=h(O,B),O.return=P,O)}function re(P,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=yh(""+O,P.mode,B),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case U:return B=Jc(O.type,O.key,O.props,null,P.mode,B),ho(B,O),B.return=P,B;case X:return O=vh(O,P.mode,B),O.return=P,O;case w:return O=ra(O),re(P,O,B)}if(ke(O)||k(O))return O=Ji(O,P.mode,B,null),O.return=P,O;if(typeof O.then=="function")return re(P,au(O),B);if(O.$$typeof===ve)return re(P,nu(P,O),B);lu(P,O)}return null}function F(P,O,B,ee){var Re=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Re!==null?null:E(P,O,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case U:return B.key===Re?D(P,O,B,ee):null;case X:return B.key===Re?q(P,O,B,ee):null;case w:return B=ra(B),F(P,O,B,ee)}if(ke(B)||k(B))return Re!==null?null:W(P,O,B,ee,null);if(typeof B.then=="function")return F(P,O,au(B),ee);if(B.$$typeof===ve)return F(P,O,nu(P,B),ee);lu(P,B)}return null}function $(P,O,B,ee,Re){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return P=P.get(B)||null,E(O,P,""+ee,Re);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case U:return P=P.get(ee.key===null?B:ee.key)||null,D(O,P,ee,Re);case X:return P=P.get(ee.key===null?B:ee.key)||null,q(O,P,ee,Re);case w:return ee=ra(ee),$(P,O,B,ee,Re)}if(ke(ee)||k(ee))return P=P.get(B)||null,W(O,P,ee,Re,null);if(typeof ee.then=="function")return $(P,O,B,au(ee),Re);if(ee.$$typeof===ve)return $(P,O,B,nu(O,ee),Re);lu(O,ee)}return null}function Ne(P,O,B,ee){for(var Re=null,st=null,Ae=O,Fe=O=0,We=null;Ae!==null&&Fe<B.length;Fe++){Ae.index>Fe?(We=Ae,Ae=null):We=Ae.sibling;var rt=F(P,Ae,B[Fe],ee);if(rt===null){Ae===null&&(Ae=We);break}t&&Ae&&rt.alternate===null&&n(P,Ae),O=m(rt,O,Fe),st===null?Re=rt:st.sibling=rt,st=rt,Ae=We}if(Fe===B.length)return a(P,Ae),tt&&or(P,Fe),Re;if(Ae===null){for(;Fe<B.length;Fe++)Ae=re(P,B[Fe],ee),Ae!==null&&(O=m(Ae,O,Fe),st===null?Re=Ae:st.sibling=Ae,st=Ae);return tt&&or(P,Fe),Re}for(Ae=l(Ae);Fe<B.length;Fe++)We=$(Ae,P,Fe,B[Fe],ee),We!==null&&(t&&We.alternate!==null&&Ae.delete(We.key===null?Fe:We.key),O=m(We,O,Fe),st===null?Re=We:st.sibling=We,st=We);return t&&Ae.forEach(function(di){return n(P,di)}),tt&&or(P,Fe),Re}function De(P,O,B,ee){if(B==null)throw Error(i(151));for(var Re=null,st=null,Ae=O,Fe=O=0,We=null,rt=B.next();Ae!==null&&!rt.done;Fe++,rt=B.next()){Ae.index>Fe?(We=Ae,Ae=null):We=Ae.sibling;var di=F(P,Ae,rt.value,ee);if(di===null){Ae===null&&(Ae=We);break}t&&Ae&&di.alternate===null&&n(P,Ae),O=m(di,O,Fe),st===null?Re=di:st.sibling=di,st=di,Ae=We}if(rt.done)return a(P,Ae),tt&&or(P,Fe),Re;if(Ae===null){for(;!rt.done;Fe++,rt=B.next())rt=re(P,rt.value,ee),rt!==null&&(O=m(rt,O,Fe),st===null?Re=rt:st.sibling=rt,st=rt);return tt&&or(P,Fe),Re}for(Ae=l(Ae);!rt.done;Fe++,rt=B.next())rt=$(Ae,P,Fe,rt.value,ee),rt!==null&&(t&&rt.alternate!==null&&Ae.delete(rt.key===null?Fe:rt.key),O=m(rt,O,Fe),st===null?Re=rt:st.sibling=rt,st=rt);return t&&Ae.forEach(function(ow){return n(P,ow)}),tt&&or(P,Fe),Re}function mt(P,O,B,ee){if(typeof B=="object"&&B!==null&&B.type===G&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case U:e:{for(var Re=B.key;O!==null;){if(O.key===Re){if(Re=B.type,Re===G){if(O.tag===7){a(P,O.sibling),ee=h(O,B.props.children),ee.return=P,P=ee;break e}}else if(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&ra(Re)===O.type){a(P,O.sibling),ee=h(O,B.props),ho(ee,B),ee.return=P,P=ee;break e}a(P,O);break}else n(P,O);O=O.sibling}B.type===G?(ee=Ji(B.props.children,P.mode,ee,B.key),ee.return=P,P=ee):(ee=Jc(B.type,B.key,B.props,null,P.mode,ee),ho(ee,B),ee.return=P,P=ee)}return x(P);case X:e:{for(Re=B.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(P,O.sibling),ee=h(O,B.children||[]),ee.return=P,P=ee;break e}else{a(P,O);break}else n(P,O);O=O.sibling}ee=vh(B,P.mode,ee),ee.return=P,P=ee}return x(P);case w:return B=ra(B),mt(P,O,B,ee)}if(ke(B))return Ne(P,O,B,ee);if(k(B)){if(Re=k(B),typeof Re!="function")throw Error(i(150));return B=Re.call(B),De(P,O,B,ee)}if(typeof B.then=="function")return mt(P,O,au(B),ee);if(B.$$typeof===ve)return mt(P,O,nu(P,B),ee);lu(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(P,O.sibling),ee=h(O,B),ee.return=P,P=ee):(a(P,O),ee=yh(B,P.mode,ee),ee.return=P,P=ee),x(P)):a(P,O)}return function(P,O,B,ee){try{uo=0;var Re=mt(P,O,B,ee);return Xa=null,Re}catch(Ae){if(Ae===$a||Ae===ru)throw Ae;var st=In(29,Ae,null,P.mode);return st.lanes=ee,st.return=P,st}finally{}}}var aa=Sp(!0),Np=Sp(!1),Qr=!1;function Rh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ih(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $r(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Zc(t),cp(t,null,a),n}return Wc(t,l,n,a),Zc(t)}function fo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}function kh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Dh=!1;function mo(){if(Dh){var t=Qa;if(t!==null)throw t}}function go(t,n,a,l){Dh=!1;var h=t.updateQueue;Qr=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var D=E,q=D.next;D.next=null,x===null?m=q:x.next=q,x=D;var W=t.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==x&&(E===null?W.firstBaseUpdate=q:E.next=q,W.lastBaseUpdate=D))}if(m!==null){var re=h.baseState;x=0,W=q=D=null,E=m;do{var F=E.lane&-536870913,$=F!==E.lane;if($?(Xe&F)===F:(l&F)===F){F!==0&&F===Ka&&(Dh=!0),W!==null&&(W=W.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ne=t,De=E;F=n;var mt=a;switch(De.tag){case 1:if(Ne=De.payload,typeof Ne=="function"){re=Ne.call(mt,re,F);break e}re=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=De.payload,F=typeof Ne=="function"?Ne.call(mt,re,F):Ne,F==null)break e;re=T({},re,F);break e;case 2:Qr=!0}}F=E.callback,F!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[F]:$.push(F))}else $={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(q=W=$,D=re):W=W.next=$,x|=F;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;$=E,E=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);W===null&&(D=re),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=W,m===null&&(h.shared.lanes=0),ti|=x,t.lanes=x,t.memoizedState=re}}function Ap(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function jp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ap(a[t],n)}var Wa=M(null),ou=M(0);function Cp(t,n){t=xr,me(ou,t),me(Wa,n),xr=t|n.baseLanes}function Mh(){me(ou,xr),me(Wa,Wa.current)}function Oh(){xr=ou.current,J(Wa),J(ou)}var kn=M(null),Xn=null;function Wr(t){var n=t.alternate;me(Ct,Ct.current&1),me(kn,t),Xn===null&&(n===null||Wa.current!==null||n.memoizedState!==null)&&(Xn=t)}function Vh(t){me(Ct,Ct.current),me(kn,t),Xn===null&&(Xn=t)}function Rp(t){t.tag===22?(me(Ct,Ct.current),me(kn,t),Xn===null&&(Xn=t)):Zr()}function Zr(){me(Ct,Ct.current),me(kn,kn.current)}function Dn(t){J(kn),Xn===t&&(Xn=null),J(Ct)}var Ct=M(0);function cu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Hf(a)||Ff(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var dr=0,He=null,ht=null,Ut=null,uu=!1,Za=!1,la=!1,du=0,po=0,Ja=null,Z1=0;function St(){throw Error(i(321))}function Lh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Rn(t[a],n[a]))return!1;return!0}function Ph(t,n,a,l,h,m){return dr=m,He=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?f0:Jh,la=!1,m=a(l,h),la=!1,Za&&(m=kp(n,a,l,h)),Ip(t),m}function Ip(t){K.H=xo;var n=ht!==null&&ht.next!==null;if(dr=0,Ut=ht=He=null,uu=!1,po=0,Ja=null,n)throw Error(i(300));t===null||zt||(t=t.dependencies,t!==null&&tu(t)&&(zt=!0))}function kp(t,n,a,l){He=t;var h=0;do{if(Za&&(Ja=null),po=0,Za=!1,25<=h)throw Error(i(301));if(h+=1,Ut=ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=m0,m=n(a,l)}while(Za);return m}function J1(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?yo(n):n,t=t.useState()[0],(ht!==null?ht.memoizedState:null)!==t&&(He.flags|=1024),n}function Uh(){var t=du!==0;return du=0,t}function zh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Bh(t){if(uu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}uu=!1}dr=0,Ut=ht=He=null,Za=!1,po=du=0,Ja=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?He.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Rt(){if(ht===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var n=Ut===null?He.memoizedState:Ut.next;if(n!==null)Ut=n,ht=t;else{if(t===null)throw He.alternate===null?Error(i(467)):Error(i(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Ut===null?He.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var n=po;return po+=1,Ja===null&&(Ja=[]),t=wp(Ja,t,n),n=He,(Ut===null?n.memoizedState:Ut.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?f0:Jh),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===ve)return nn(t)}throw Error(i(438,String(t)))}function qh(t){var n=null,a=He.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hu(),He.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=C;return n.index++,a}function hr(t,n){return typeof n=="function"?n(t):n}function mu(t){var n=Rt();return Hh(n,ht,t)}function Hh(t,n,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var E=x=null,D=null,q=n,W=!1;do{var re=q.lane&-536870913;if(re!==q.lane?(Xe&re)===re:(dr&re)===re){var F=q.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),re===Ka&&(W=!0);else if((dr&F)===F){q=q.next,F===Ka&&(W=!0);continue}else re={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(E=D=re,x=m):D=D.next=re,He.lanes|=F,ti|=F;re=q.action,la&&a(m,re),m=q.hasEagerState?q.eagerState:a(m,re)}else F={lane:re,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(E=D=F,x=m):D=D.next=F,He.lanes|=re,ti|=re;q=q.next}while(q!==null&&q!==n);if(D===null?x=m:D.next=E,!Rn(m,t.memoizedState)&&(zt=!0,W&&(a=Qa,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Fh(t){var n=Rt(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);Rn(m,n.memoizedState)||(zt=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Dp(t,n,a){var l=He,h=Rt(),m=tt;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=n();var x=!Rn((ht||h).memoizedState,a);if(x&&(h.memoizedState=a,zt=!0),h=h.queue,Kh(Vp.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||Ut!==null&&Ut.memoizedState.tag&1){if(l.flags|=2048,el(9,{destroy:void 0},Op.bind(null,l,h,a,n),null),gt===null)throw Error(i(349));m||(dr&127)!==0||Mp(l,n,a)}return a}function Mp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=He.updateQueue,n===null?(n=hu(),He.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Op(t,n,a,l){n.value=a,n.getSnapshot=l,Lp(n)&&Pp(t)}function Vp(t,n,a){return a(function(){Lp(n)&&Pp(t)})}function Lp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Rn(t,a)}catch{return!0}}function Pp(t){var n=Zi(t,2);n!==null&&Tn(n,t,2)}function Gh(t){var n=pn();if(typeof t=="function"){var a=t;if(t=a(),la){zn(!0);try{a()}finally{zn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:t},n}function Up(t,n,a,l){return t.baseState=a,Hh(t,ht,typeof l=="function"?l:hr)}function e2(t,n,a,l,h){if(yu(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,zp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function zp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=K.T,x={};K.T=x;try{var E=a(h,l),D=K.S;D!==null&&D(x,E),Bp(t,n,E)}catch(q){Yh(t,n,q)}finally{m!==null&&x.types!==null&&(m.types=x.types),K.T=m}}else try{m=a(h,l),Bp(t,n,m)}catch(q){Yh(t,n,q)}}function Bp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){qp(t,n,l)},function(l){return Yh(t,n,l)}):qp(t,n,a)}function qp(t,n,a){n.status="fulfilled",n.value=a,Hp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,zp(t,a)))}function Yh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Hp(n),n=n.next;while(n!==l)}t.action=null}function Hp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Fp(t,n){return n}function Gp(t,n){if(tt){var a=gt.formState;if(a!==null){e:{var l=He;if(tt){if(vt){t:{for(var h=vt,m=$n;h.nodeType!==8;){if(!m){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){vt=Wn(h.nextSibling),l=h.data==="F!";break e}}Yr(l)}l=!1}l&&(n=a[0])}}return a=pn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fp,lastRenderedState:n},a.queue=l,a=u0.bind(null,He,l),l.dispatch=a,l=Gh(!1),m=Zh.bind(null,He,!1,l.queue),l=pn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=e2.bind(null,He,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Yp(t){var n=Rt();return Kp(n,ht,t)}function Kp(t,n,a){if(n=Hh(t,n,Fp)[0],t=mu(hr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yo(n)}catch(x){throw x===$a?ru:x}else l=n;n=Rt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(He.flags|=2048,el(9,{destroy:void 0},t2.bind(null,h,a),null)),[l,m,t]}function t2(t,n){t.action=n}function Qp(t){var n=Rt(),a=ht;if(a!==null)return Kp(n,a,t);Rt(),n=n.memoizedState,a=Rt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function el(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=He.updateQueue,n===null&&(n=hu(),He.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function $p(){return Rt().memoizedState}function gu(t,n,a,l){var h=pn();He.flags|=t,h.memoizedState=el(1|n,{destroy:void 0},a,l===void 0?null:l)}function pu(t,n,a,l){var h=Rt();l=l===void 0?null:l;var m=h.memoizedState.inst;ht!==null&&l!==null&&Lh(l,ht.memoizedState.deps)?h.memoizedState=el(n,m,a,l):(He.flags|=t,h.memoizedState=el(1|n,m,a,l))}function Xp(t,n){gu(8390656,8,t,n)}function Kh(t,n){pu(2048,8,t,n)}function n2(t){He.flags|=4;var n=He.updateQueue;if(n===null)n=hu(),He.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Wp(t){var n=Rt().memoizedState;return n2({ref:n,nextImpl:t}),function(){if((at&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Zp(t,n){return pu(4,2,t,n)}function Jp(t,n){return pu(4,4,t,n)}function e0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function t0(t,n,a){a=a!=null?a.concat([t]):null,pu(4,4,e0.bind(null,n,t),a)}function Qh(){}function n0(t,n){var a=Rt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Lh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function s0(t,n){var a=Rt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Lh(n,l[1]))return l[0];if(l=t(),la){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,n],l}function $h(t,n,a){return a===void 0||(dr&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=ry(),He.lanes|=t,ti|=t,a)}function r0(t,n,a,l){return Rn(a,n)?a:Wa.current!==null?(t=$h(t,a,l),Rn(t,n)||(zt=!0),t):(dr&42)===0||(dr&1073741824)!==0&&(Xe&261930)===0?(zt=!0,t.memoizedState=a):(t=ry(),He.lanes|=t,ti|=t,n)}function i0(t,n,a,l,h){var m=fe.p;fe.p=m!==0&&8>m?m:8;var x=K.T,E={};K.T=E,Zh(t,!1,n,a);try{var D=h(),q=K.S;if(q!==null&&q(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=W1(D,l);vo(t,n,W,Vn(t))}else vo(t,n,l,Vn(t))}catch(re){vo(t,n,{then:function(){},status:"rejected",reason:re},Vn())}finally{fe.p=m,x!==null&&E.types!==null&&(x.types=E.types),K.T=x}}function s2(){}function Xh(t,n,a,l){if(t.tag!==5)throw Error(i(476));var h=a0(t).queue;i0(t,h,n,_e,a===null?s2:function(){return l0(t),a(l)})}function a0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:_e},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function l0(t){var n=a0(t);n.next===null&&(n=t.alternate.memoizedState),vo(t,n.next.queue,{},Vn())}function Wh(){return nn(Oo)}function o0(){return Rt().memoizedState}function c0(){return Rt().memoizedState}function r2(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Vn();t=$r(a);var l=Xr(n,t,a);l!==null&&(Tn(l,n,a),fo(l,n,a)),n={cache:Nh()},t.payload=n;return}n=n.return}}function i2(t,n,a){var l=Vn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yu(t)?d0(n,a):(a=gh(t,n,a,l),a!==null&&(Tn(a,t,l),h0(a,n,l)))}function u0(t,n,a){var l=Vn();vo(t,n,a,l)}function vo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yu(t))d0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,E=m(x,a);if(h.hasEagerState=!0,h.eagerState=E,Rn(E,x))return Wc(t,n,h,0),gt===null&&Xc(),!1}catch{}finally{}if(a=gh(t,n,h,l),a!==null)return Tn(a,t,l),h0(a,n,l),!0}return!1}function Zh(t,n,a,l){if(l={lane:2,revertLane:If(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yu(t)){if(n)throw Error(i(479))}else n=gh(t,a,l,2),n!==null&&Tn(n,t,2)}function yu(t){var n=t.alternate;return t===He||n!==null&&n===He}function d0(t,n){Za=uu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function h0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}var xo={readContext:nn,use:fu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};xo.useEffectEvent=St;var f0={readContext:nn,use:fu,useCallback:function(t,n){return pn().memoizedState=[t,n===void 0?null:n],t},useContext:nn,useEffect:Xp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,gu(4194308,4,e0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return gu(4194308,4,t,n)},useInsertionEffect:function(t,n){gu(4,2,t,n)},useMemo:function(t,n){var a=pn();n=n===void 0?null:n;var l=t();if(la){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=pn();if(a!==void 0){var h=a(n);if(la){zn(!0);try{a(n)}finally{zn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=i2.bind(null,He,t),[l.memoizedState,t]},useRef:function(t){var n=pn();return t={current:t},n.memoizedState=t},useState:function(t){t=Gh(t);var n=t.queue,a=u0.bind(null,He,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Qh,useDeferredValue:function(t,n){var a=pn();return $h(a,t,n)},useTransition:function(){var t=Gh(!1);return t=i0.bind(null,He,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=He,h=pn();if(tt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),gt===null)throw Error(i(349));(Xe&127)!==0||Mp(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Xp(Vp.bind(null,l,m,t),[t]),l.flags|=2048,el(9,{destroy:void 0},Op.bind(null,l,m,a,n),null),a},useId:function(){var t=pn(),n=gt.identifierPrefix;if(tt){var a=qs,l=Bs;a=(l&~(1<<32-At(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=du++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Z1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Wh,useFormState:Gp,useActionState:Gp,useOptimistic:function(t){var n=pn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Zh.bind(null,He,!0,a),a.dispatch=n,[t,n]},useMemoCache:qh,useCacheRefresh:function(){return pn().memoizedState=r2.bind(null,He)},useEffectEvent:function(t){var n=pn(),a={impl:t};return n.memoizedState=a,function(){if((at&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Jh={readContext:nn,use:fu,useCallback:n0,useContext:nn,useEffect:Kh,useImperativeHandle:t0,useInsertionEffect:Zp,useLayoutEffect:Jp,useMemo:s0,useReducer:mu,useRef:$p,useState:function(){return mu(hr)},useDebugValue:Qh,useDeferredValue:function(t,n){var a=Rt();return r0(a,ht.memoizedState,t,n)},useTransition:function(){var t=mu(hr)[0],n=Rt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Dp,useId:o0,useHostTransitionStatus:Wh,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,n){var a=Rt();return Up(a,ht,t,n)},useMemoCache:qh,useCacheRefresh:c0};Jh.useEffectEvent=Wp;var m0={readContext:nn,use:fu,useCallback:n0,useContext:nn,useEffect:Kh,useImperativeHandle:t0,useInsertionEffect:Zp,useLayoutEffect:Jp,useMemo:s0,useReducer:Fh,useRef:$p,useState:function(){return Fh(hr)},useDebugValue:Qh,useDeferredValue:function(t,n){var a=Rt();return ht===null?$h(a,t,n):r0(a,ht.memoizedState,t,n)},useTransition:function(){var t=Fh(hr)[0],n=Rt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Dp,useId:o0,useHostTransitionStatus:Wh,useFormState:Qp,useActionState:Qp,useOptimistic:function(t,n){var a=Rt();return ht!==null?Up(a,ht,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:qh,useCacheRefresh:c0};m0.useEffectEvent=Wp;function ef(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var tf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.payload=n,a!=null&&(h.callback=a),n=Xr(t,h,l),n!==null&&(Tn(n,t,l),fo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Xr(t,h,l),n!==null&&(Tn(n,t,l),fo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Vn(),l=$r(a);l.tag=2,n!=null&&(l.callback=n),n=Xr(t,l,a),n!==null&&(Tn(n,t,a),fo(n,t,a))}};function g0(t,n,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!ro(a,l)||!ro(h,m):!0}function p0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&tf.enqueueReplaceState(n,n.state,null)}function oa(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function y0(t){$c(t)}function v0(t){console.error(t)}function x0(t){$c(t)}function vu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function b0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function nf(t,n,a){return a=$r(a),a.tag=3,a.payload={element:null},a.callback=function(){vu(t,n)},a}function _0(t){return t=$r(t),t.tag=3,t}function w0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){b0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){b0(n,a,l),typeof h!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function a2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ya(n,a,h,!0),a=kn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Ru():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),jf(t,l,h)),!1;case 22:return a.flags|=65536,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),jf(t,l,h)),!1}throw Error(i(435,a.tag))}return jf(t,l,h),Ru(),!1}if(tt)return n=kn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==_h&&(t=Error(i(422),{cause:l}),lo(Yn(t,a)))):(l!==_h&&(n=Error(i(423),{cause:l}),lo(Yn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Yn(l,a),h=nf(t.stateNode,l,h),kh(t,h),Nt!==4&&(Nt=2)),!1;var m=Error(i(520),{cause:l});if(m=Yn(m,a),Ao===null?Ao=[m]:Ao.push(m),Nt!==4&&(Nt=2),n===null)return!0;l=Yn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=nf(a.stateNode,l,t),kh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ni===null||!ni.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=_0(h),w0(h,t,a,l),kh(a,h),!1}a=a.return}while(a!==null);return!1}var sf=Error(i(461)),zt=!1;function sn(t,n,a,l){n.child=t===null?Np(n,null,a,l):aa(n,t.child,a,l)}function E0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return na(n),l=Ph(t,n,a,x,m,h),E=Uh(),t!==null&&!zt?(zh(t,n,h),fr(t,n,h)):(tt&&E&&xh(n),n.flags|=1,sn(t,n,l,h),n.child)}function T0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!ph(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,S0(t,n,m,l,h)):(t=Jc(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!hf(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:ro,a(x,l)&&t.ref===n.ref)return fr(t,n,h)}return n.flags|=1,t=lr(m,l),t.ref=n.ref,t.return=n,n.child=t}function S0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(ro(m,l)&&t.ref===n.ref)if(zt=!1,n.pendingProps=l=m,hf(t,h))(t.flags&131072)!==0&&(zt=!0);else return n.lanes=t.lanes,fr(t,n,h)}return rf(t,n,a,l,h)}function N0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return A0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&su(n,m!==null?m.cachePool:null),m!==null?Cp(n,m):Mh(),Rp(n);else return l=n.lanes=536870912,A0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(su(n,m.cachePool),Cp(n,m),Zr(),n.memoizedState=null):(t!==null&&su(n,null),Mh(),Zr());return sn(t,n,h,a),n.child}function bo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function A0(t,n,a,l,h){var m=jh();return m=m===null?null:{parent:Pt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&su(n,null),Mh(),Rp(n),t!==null&&Ya(t,n,l,!0),n.childLanes=h,null}function xu(t,n){return n=_u({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function j0(t,n,a){return aa(n,t.child,null,a),t=xu(n,n.pendingProps),t.flags|=2,Dn(n),n.memoizedState=null,t}function l2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(tt){if(l.mode==="hidden")return t=xu(n,l),n.lanes=536870912,bo(null,t);if(Vh(n),(t=vt)?(t=zy(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Bs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},a=dp(t),a.return=n,n.child=a,tn=n,vt=null)):t=null,t===null)throw Yr(n);return n.lanes=536870912,null}return xu(n,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Vh(n),h)if(n.flags&256)n.flags&=-257,n=j0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(zt||Ya(t,n,a,!1),h=(a&t.childLanes)!==0,zt||h){if(l=gt,l!==null&&(x=zl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,Zi(t,x),Tn(l,t,x),sf;Ru(),n=j0(t,n,a)}else t=m.treeContext,vt=Wn(x.nextSibling),tn=n,tt=!0,Gr=null,$n=!1,t!==null&&mp(n,t),n=xu(n,l),n.flags|=4096;return n}return t=lr(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function bu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function rf(t,n,a,l,h){return na(n),a=Ph(t,n,a,l,void 0,h),l=Uh(),t!==null&&!zt?(zh(t,n,h),fr(t,n,h)):(tt&&l&&xh(n),n.flags|=1,sn(t,n,a,h),n.child)}function C0(t,n,a,l,h,m){return na(n),n.updateQueue=null,a=kp(n,l,a,h),Ip(t),l=Uh(),t!==null&&!zt?(zh(t,n,m),fr(t,n,m)):(tt&&l&&xh(n),n.flags|=1,sn(t,n,a,m),n.child)}function R0(t,n,a,l,h){if(na(n),n.stateNode===null){var m=qa,x=a.contextType;typeof x=="object"&&x!==null&&(m=nn(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=tf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Rh(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?nn(x):qa,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(ef(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&tf.enqueueReplaceState(m,m.state,null),go(n,l,m,h),mo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var E=n.memoizedProps,D=oa(a,E);m.props=D;var q=m.context,W=a.contextType;x=qa,typeof W=="object"&&W!==null&&(x=nn(W));var re=a.getDerivedStateFromProps;W=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||q!==x)&&p0(n,m,l,x),Qr=!1;var F=n.memoizedState;m.state=F,go(n,l,m,h),mo(),q=n.memoizedState,E||F!==q||Qr?(typeof re=="function"&&(ef(n,a,re,l),q=n.memoizedState),(D=Qr||g0(n,a,D,l,F,q,x))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=q),m.props=l,m.state=q,m.context=x,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Ih(t,n),x=n.memoizedProps,W=oa(a,x),m.props=W,re=n.pendingProps,F=m.context,q=a.contextType,D=qa,typeof q=="object"&&q!==null&&(D=nn(q)),E=a.getDerivedStateFromProps,(q=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==re||F!==D)&&p0(n,m,l,D),Qr=!1,F=n.memoizedState,m.state=F,go(n,l,m,h),mo();var $=n.memoizedState;x!==re||F!==$||Qr||t!==null&&t.dependencies!==null&&tu(t.dependencies)?(typeof E=="function"&&(ef(n,a,E,l),$=n.memoizedState),(W=Qr||g0(n,a,W,l,F,$,D)||t!==null&&t.dependencies!==null&&tu(t.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),m.props=l,m.state=$,m.context=D,l=W):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,bu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=aa(n,t.child,null,h),n.child=aa(n,null,a,h)):sn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=fr(t,n,h),t}function I0(t,n,a,l){return ea(),n.flags|=256,sn(t,n,a,l),n.child}var af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lf(t){return{baseLanes:t,cachePool:bp()}}function of(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=On),t}function k0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(tt){if(h?Wr(n):Zr(),(t=vt)?(t=zy(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Bs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},a=dp(t),a.return=n,n.child=a,tn=n,vt=null)):t=null,t===null)throw Yr(n);return Ff(t)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Zr(),h=n.mode,E=_u({mode:"hidden",children:E},h),l=Ji(l,h,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=lf(a),l.childLanes=of(t,x,a),n.memoizedState=af,bo(null,l)):(Wr(n),cf(n,E))}var D=t.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(m)n.flags&256?(Wr(n),n.flags&=-257,n=uf(t,n,a)):n.memoizedState!==null?(Zr(),n.child=t.child,n.flags|=128,n=null):(Zr(),E=l.fallback,h=n.mode,l=_u({mode:"visible",children:l.children},h),E=Ji(E,h,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,aa(n,t.child,null,a),l=n.child,l.memoizedState=lf(a),l.childLanes=of(t,x,a),n.memoizedState=af,n=bo(null,l));else if(Wr(n),Ff(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var q=x.dgst;x=q,l=Error(i(419)),l.stack="",l.digest=x,lo({value:l,source:null,stack:null}),n=uf(t,n,a)}else if(zt||Ya(t,n,a,!1),x=(a&t.childLanes)!==0,zt||x){if(x=gt,x!==null&&(l=zl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Zi(t,l),Tn(x,t,l),sf;Hf(E)||Ru(),n=uf(t,n,a)}else Hf(E)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,vt=Wn(E.nextSibling),tn=n,tt=!0,Gr=null,$n=!1,t!==null&&mp(n,t),n=cf(n,l.children),n.flags|=4096);return n}return h?(Zr(),E=l.fallback,h=n.mode,D=t.child,q=D.sibling,l=lr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?E=lr(q,E):(E=Ji(E,h,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,bo(null,l),l=n.child,E=t.child.memoizedState,E===null?E=lf(a):(h=E.cachePool,h!==null?(D=Pt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=bp(),E={baseLanes:E.baseLanes|a,cachePool:h}),l.memoizedState=E,l.childLanes=of(t,x,a),n.memoizedState=af,bo(t.child,l)):(Wr(n),a=t.child,t=a.sibling,a=lr(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function cf(t,n){return n=_u({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function _u(t,n){return t=In(22,t,null,n),t.lanes=0,t}function uf(t,n,a){return aa(n,t.child,null,a),t=cf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function D0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Th(t.return,n,a)}function df(t,n,a,l,h,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=m)}function M0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var x=Ct.current,E=(x&2)!==0;if(E?(x=x&1|2,n.flags|=128):x&=1,me(Ct,x),sn(t,n,l,a),l=tt?ao:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D0(t,a,n);else if(t.tag===19)D0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&cu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),df(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&cu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}df(n,!0,a,null,m,l);break;case"together":df(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function fr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ti|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ya(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,a=lr(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=lr(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function hf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&tu(t)))}function o2(t,n,a){switch(n.tag){case 3:Ce(n,n.stateNode.containerInfo),Kr(n,Pt,t.memoizedState.cache),ea();break;case 27:case 5:Z(n);break;case 4:Ce(n,n.stateNode.containerInfo);break;case 10:Kr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Vh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Wr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?k0(t,n,a):(Wr(n),t=fr(t,n,a),t!==null?t.sibling:null);Wr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ya(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return M0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),me(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,N0(t,n,a,n.pendingProps);case 24:Kr(n,Pt,t.memoizedState.cache)}return fr(t,n,a)}function O0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)zt=!0;else{if(!hf(t,a)&&(n.flags&128)===0)return zt=!1,o2(t,n,a);zt=(t.flags&131072)!==0}else zt=!1,tt&&(n.flags&1048576)!==0&&fp(n,ao,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=ra(n.elementType),n.type=t,typeof t=="function")ph(t)?(l=oa(t,l),n.tag=1,n=R0(null,n,t,l,a)):(n.tag=0,n=rf(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ye){n.tag=11,n=E0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=T0(null,n,t,l,a);break e}}throw n=ce(t)||t,Error(i(306,n,""))}}return n;case 0:return rf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=oa(l,n.pendingProps),R0(t,n,l,h,a);case 3:e:{if(Ce(n,n.stateNode.containerInfo),t===null)throw Error(i(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,Ih(t,n),go(n,l,null,a);var x=n.memoizedState;if(l=x.cache,Kr(n,Pt,l),l!==m.cache&&Sh(n,[Pt],a,!0),mo(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=I0(t,n,l,a);break e}else if(l!==h){h=Yn(Error(i(424)),n),lo(h),n=I0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=Wn(t.firstChild),tn=n,tt=!0,Gr=null,$n=!0,a=Np(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ea(),l===h){n=fr(t,n,a);break e}sn(t,n,l,a)}n=n.child}return n;case 26:return bu(t,n),t===null?(a=Yy(n.type,null,n.pendingProps,null))?n.memoizedState=a:tt||(a=n.type,t=n.pendingProps,l=Lu(te.current).createElement(a),l[Ot]=n,l[$t]=t,rn(l,a,t),Vt(l),n.stateNode=l):n.memoizedState=Yy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Z(n),t===null&&tt&&(l=n.stateNode=Hy(n.type,n.pendingProps,te.current),tn=n,$n=!0,h=vt,ai(n.type)?(Gf=h,vt=Wn(l.firstChild)):vt=h),sn(t,n,n.pendingProps.children,a),bu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&tt&&((h=l=vt)&&(l=P2(l,n.type,n.pendingProps,$n),l!==null?(n.stateNode=l,tn=n,vt=Wn(l.firstChild),$n=!1,h=!0):h=!1),h||Yr(n)),Z(n),h=n.type,m=n.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,zf(h,m)?l=null:x!==null&&zf(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=Ph(t,n,J1,null,null,a),Oo._currentValue=h),bu(t,n),sn(t,n,l,a),n.child;case 6:return t===null&&tt&&((t=a=vt)&&(a=U2(a,n.pendingProps,$n),a!==null?(n.stateNode=a,tn=n,vt=null,t=!0):t=!1),t||Yr(n)),null;case 13:return k0(t,n,a);case 4:return Ce(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=aa(n,null,l,a):sn(t,n,l,a),n.child;case 11:return E0(t,n,n.type,n.pendingProps,a);case 7:return sn(t,n,n.pendingProps,a),n.child;case 8:return sn(t,n,n.pendingProps.children,a),n.child;case 12:return sn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Kr(n,n.type,l.value),sn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,na(n),h=nn(h),l=l(h),n.flags|=1,sn(t,n,l,a),n.child;case 14:return T0(t,n,n.type,n.pendingProps,a);case 15:return S0(t,n,n.type,n.pendingProps,a);case 19:return M0(t,n,a);case 31:return l2(t,n,a);case 22:return N0(t,n,a,n.pendingProps);case 24:return na(n),l=nn(Pt),t===null?(h=jh(),h===null&&(h=gt,m=Nh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},Rh(n),Kr(n,Pt,h)):((t.lanes&a)!==0&&(Ih(t,n),go(n,null,null,a),mo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Kr(n,Pt,l)):(l=m.cache,Kr(n,Pt,l),l!==h.cache&&Sh(n,[Pt],a,!0))),sn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function mr(t){t.flags|=4}function ff(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(oy())t.flags|=8192;else throw ia=iu,Ch}else t.flags&=-16777217}function V0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wy(n))if(oy())t.flags|=8192;else throw ia=iu,Ch}function wu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?jc():536870912,t.lanes|=n,rl|=n)}function _o(t,n){if(!tt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function xt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function c2(t,n,a){var l=n.pendingProps;switch(bh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(n),null;case 1:return xt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ur(Pt),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ga(n)?mr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,wh())),xt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(mr(n),m!==null?(xt(n),V0(n,m)):(xt(n),ff(n,h,null,l,a))):m?m!==t.memoizedState?(mr(n),xt(n),V0(n,m)):(xt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&mr(n),xt(n),ff(n,h,t,l,a)),null;case 27:if(Ee(n),a=te.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}t=L.current,Ga(n)?gp(n):(t=Hy(h,l,a),n.stateNode=t,mr(n))}return xt(n),null;case 5:if(Ee(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}if(m=L.current,Ga(n))gp(n);else{var x=Lu(te.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}m[Ot]=n,m[$t]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;e:switch(rn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(n)}}return xt(n),ff(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&mr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(t=te.current,Ga(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ot]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ky(t.nodeValue,a)),t||Yr(n,!0)}else t=Lu(t).createTextNode(l),t[Ot]=n,n.stateNode=t}return xt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ga(n),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ot]=n}else ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),t=!1}else a=wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Dn(n),n):(Dn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return xt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ga(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ot]=n}else ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),h=!1}else h=wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Dn(n),n):(Dn(n),null)}return Dn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),wu(n,n.updateQueue),xt(n),null);case 4:return Me(),t===null&&Of(n.stateNode.containerInfo),xt(n),null;case 10:return ur(n.type),xt(n),null;case 19:if(J(Ct),l=n.memoizedState,l===null)return xt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)_o(l,!1);else{if(Nt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=cu(t),m!==null){for(n.flags|=128,_o(l,!1),t=m.updateQueue,n.updateQueue=t,wu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)up(a,t),a=a.sibling;return me(Ct,Ct.current&1|2),tt&&or(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Qt()>Au&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304)}else{if(!h)if(t=cu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,wu(n,t),_o(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!tt)return xt(n),null}else 2*Qt()-l.renderingStartTime>Au&&a!==536870912&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qt(),t.sibling=null,a=Ct.current,me(Ct,h?a&1|2:a&1),tt&&or(n,l.treeForkCount),t):(xt(n),null);case 22:case 23:return Dn(n),Oh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(xt(n),n.subtreeFlags&6&&(n.flags|=8192)):xt(n),a=n.updateQueue,a!==null&&wu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&J(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ur(Pt),xt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function u2(t,n){switch(bh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ur(Pt),Me(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ee(n),null;case 31:if(n.memoizedState!==null){if(Dn(n),n.alternate===null)throw Error(i(340));ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Dn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return J(Ct),null;case 4:return Me(),null;case 10:return ur(n.type),null;case 22:case 23:return Dn(n),Oh(),t!==null&&J(sa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ur(Pt),null;case 25:return null;default:return null}}function L0(t,n){switch(bh(n),n.tag){case 3:ur(Pt),Me();break;case 26:case 27:case 5:Ee(n);break;case 4:Me();break;case 31:n.memoizedState!==null&&Dn(n);break;case 13:Dn(n);break;case 19:J(Ct);break;case 10:ur(n.type);break;case 22:case 23:Dn(n),Oh(),t!==null&&J(sa);break;case 24:ur(Pt)}}function wo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(E){ut(n,n.return,E)}}function Jr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,h=n;var D=a,q=E;try{q()}catch(W){ut(h,D,W)}}}l=l.next}while(l!==m)}}catch(W){ut(n,n.return,W)}}function P0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{jp(n,a)}catch(l){ut(t,t.return,l)}}}function U0(t,n,a){a.props=oa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,n,l)}}function Eo(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ut(t,n,h)}}function Hs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,n,h)}else a.current=null}function z0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function mf(t,n,a){try{var l=t.stateNode;k2(l,t.type,a,n),l[$t]=n}catch(h){ut(t,t.return,h)}}function B0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ai(t.type)||t.tag===4}function gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=os));else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(pf(t,n,a),t=t.sibling;t!==null;)pf(t,n,a),t=t.sibling}function Eu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Eu(t,n,a),t=t.sibling;t!==null;)Eu(t,n,a),t=t.sibling}function q0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);rn(n,l,a),n[Ot]=t,n[$t]=a}catch(m){ut(t,t.return,m)}}var gr=!1,Bt=!1,yf=!1,H0=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function d2(t,n){if(t=t.containerInfo,Pf=Fu,t=tp(t),ch(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,E=-1,D=-1,q=0,W=0,re=t,F=null;t:for(;;){for(var $;re!==a||h!==0&&re.nodeType!==3||(E=x+h),re!==m||l!==0&&re.nodeType!==3||(D=x+l),re.nodeType===3&&(x+=re.nodeValue.length),($=re.firstChild)!==null;)F=re,re=$;for(;;){if(re===t)break t;if(F===a&&++q===h&&(E=x),F===m&&++W===l&&(D=x),($=re.nextSibling)!==null)break;re=F,F=re.parentNode}re=$}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},Fu=!1,Wt=n;Wt!==null;)if(n=Wt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Wt=t;else for(;Wt!==null;){switch(n=Wt,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=oa(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){ut(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Wt=t;break}Wt=n.return}}function F0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:yr(t,a),l&4&&wo(5,a);break;case 1:if(yr(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){ut(a,a.return,x)}else{var h=oa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ut(a,a.return,x)}}l&64&&P0(a),l&512&&Eo(a,a.return);break;case 3:if(yr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{jp(t,n)}catch(x){ut(a,a.return,x)}}break;case 27:n===null&&l&4&&q0(a);case 26:case 5:yr(t,a),n===null&&l&4&&z0(a),l&512&&Eo(a,a.return);break;case 12:yr(t,a);break;case 31:yr(t,a),l&4&&K0(t,a);break;case 13:yr(t,a),l&4&&Q0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=b2.bind(null,a),z2(t,a))));break;case 22:if(l=a.memoizedState!==null||gr,!l){n=n!==null&&n.memoizedState!==null||Bt,h=gr;var m=Bt;gr=l,(Bt=n)&&!m?vr(t,a,(a.subtreeFlags&8772)!==0):yr(t,a),gr=h,Bt=m}break;case 30:break;default:yr(t,a)}}function G0(t){var n=t.alternate;n!==null&&(t.alternate=null,G0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ja(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wt=null,bn=!1;function pr(t,n,a){for(a=a.child;a!==null;)Y0(t,n,a),a=a.sibling}function Y0(t,n,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(rs,a)}catch{}switch(a.tag){case 26:Bt||Hs(a,n),pr(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Hs(a,n);var l=wt,h=bn;ai(a.type)&&(wt=a.stateNode,bn=!1),pr(t,n,a),ko(a.stateNode),wt=l,bn=h;break;case 5:Bt||Hs(a,n);case 6:if(l=wt,h=bn,wt=null,pr(t,n,a),wt=l,bn=h,wt!==null)if(bn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(a.stateNode)}catch(m){ut(a,n,m)}else try{wt.removeChild(a.stateNode)}catch(m){ut(a,n,m)}break;case 18:wt!==null&&(bn?(t=wt,Py(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),hl(t)):Py(wt,a.stateNode));break;case 4:l=wt,h=bn,wt=a.stateNode.containerInfo,bn=!0,pr(t,n,a),wt=l,bn=h;break;case 0:case 11:case 14:case 15:Jr(2,a,n),Bt||Jr(4,a,n),pr(t,n,a);break;case 1:Bt||(Hs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&U0(a,n,l)),pr(t,n,a);break;case 21:pr(t,n,a);break;case 22:Bt=(l=Bt)||a.memoizedState!==null,pr(t,n,a),Bt=l;break;default:pr(t,n,a)}}function K0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hl(t)}catch(a){ut(n,n.return,a)}}}function Q0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hl(t)}catch(a){ut(n,n.return,a)}}function h2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new H0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new H0),n;default:throw Error(i(435,t.tag))}}function Tu(t,n){var a=h2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=_2.bind(null,t,l);l.then(h,h)}})}function _n(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=n,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(ai(E.type)){wt=E.stateNode,bn=!1;break e}break;case 5:wt=E.stateNode,bn=!1;break e;case 3:case 4:wt=E.stateNode.containerInfo,bn=!0;break e}E=E.return}if(wt===null)throw Error(i(160));Y0(m,x,h),wt=null,bn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)$0(n,t),n=n.sibling}var ms=null;function $0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(n,t),wn(t),l&4&&(Jr(3,t,t.return),wo(3,t),Jr(5,t,t.return));break;case 1:_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),l&64&&gr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ms;if(_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Cs]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),rn(m,l,a),m[Ot]=t,Vt(m),l=m;break e;case"link":var x=$y("link","href",h).get(l+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}m=h.createElement(l),rn(m,l,a),h.head.appendChild(m);break;case"meta":if(x=$y("meta","content",h).get(l+(a.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}m=h.createElement(l),rn(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ot]=t,Vt(m),l=m}t.stateNode=l}else Xy(h,t.type,t.stateNode);else t.stateNode=Qy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Xy(h,t.type,t.stateNode):Qy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),a!==null&&l&4&&mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(n,t),wn(t),l&512&&(Bt||a===null||Hs(a,a.return)),t.flags&32){h=t.stateNode;try{xn(h,"")}catch(Ne){ut(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,mf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(yf=!0);break;case 6:if(_n(n,t),wn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){ut(t,t.return,Ne)}}break;case 3:if(zu=null,h=ms,ms=Pu(n.containerInfo),_n(n,t),ms=h,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(n.containerInfo)}catch(Ne){ut(t,t.return,Ne)}yf&&(yf=!1,X0(t));break;case 4:l=ms,ms=Pu(t.stateNode.containerInfo),_n(n,t),wn(t),ms=l;break;case 12:_n(n,t),wn(t);break;case 31:_n(n,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 13:_n(n,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nu=Qt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=gr,W=Bt;if(gr=q||h,Bt=W||D,_n(n,t),Bt=W,gr=q,wn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||gr||Bt||ca(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=D.stateNode;var re=D.memoizedProps.style,F=re!=null&&re.hasOwnProperty("display")?re.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Ne){ut(D,D.return,Ne)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Ne){ut(D,D.return,Ne)}}}else if(n.tag===18){if(a===null){D=n;try{var $=D.stateNode;h?Uy($,!0):Uy(D.stateNode,!1)}catch(Ne){ut(D,D.return,Ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tu(t,a))));break;case 19:_n(n,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 30:break;case 21:break;default:_n(n,t),wn(t)}}function wn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(B0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=gf(t);Eu(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(xn(x,""),a.flags&=-33);var E=gf(t);Eu(t,E,x);break;case 3:case 4:var D=a.stateNode.containerInfo,q=gf(t);pf(t,q,D);break;default:throw Error(i(161))}}catch(W){ut(t,t.return,W)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function X0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;X0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function yr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)F0(t,n.alternate,n),n=n.sibling}function ca(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Jr(4,n,n.return),ca(n);break;case 1:Hs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&U0(n,n.return,a),ca(n);break;case 27:ko(n.stateNode);case 26:case 5:Hs(n,n.return),ca(n);break;case 22:n.memoizedState===null&&ca(n);break;case 30:ca(n);break;default:ca(n)}t=t.sibling}}function vr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:vr(h,m,a),wo(4,m);break;case 1:if(vr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){ut(l,l.return,q)}if(l=m,h=l.updateQueue,h!==null){var E=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Ap(D[h],E)}catch(q){ut(l,l.return,q)}}a&&x&64&&P0(m),Eo(m,m.return);break;case 27:q0(m);case 26:case 5:vr(h,m,a),a&&l===null&&x&4&&z0(m),Eo(m,m.return);break;case 12:vr(h,m,a);break;case 31:vr(h,m,a),a&&x&4&&K0(h,m);break;case 13:vr(h,m,a),a&&x&4&&Q0(h,m);break;case 22:m.memoizedState===null&&vr(h,m,a),Eo(m,m.return);break;case 30:break;default:vr(h,m,a)}n=n.sibling}}function vf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&oo(a))}function xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t))}function gs(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)W0(t,n,a,l),n=n.sibling}function W0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:gs(t,n,a,l),h&2048&&wo(9,n);break;case 1:gs(t,n,a,l);break;case 3:gs(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){gs(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ut(n,n.return,D)}}else gs(t,n,a,l);break;case 31:gs(t,n,a,l);break;case 13:gs(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?gs(t,n,a,l):To(t,n):m._visibility&2?gs(t,n,a,l):(m._visibility|=2,tl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&vf(x,n);break;case 24:gs(t,n,a,l),h&2048&&xf(n.alternate,n);break;default:gs(t,n,a,l)}}function tl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,x=n,E=a,D=l,q=x.flags;switch(x.tag){case 0:case 11:case 15:tl(m,x,E,D,h),wo(8,x);break;case 23:break;case 22:var W=x.stateNode;x.memoizedState!==null?W._visibility&2?tl(m,x,E,D,h):To(m,x):(W._visibility|=2,tl(m,x,E,D,h)),h&&q&2048&&vf(x.alternate,x);break;case 24:tl(m,x,E,D,h),h&&q&2048&&xf(x.alternate,x);break;default:tl(m,x,E,D,h)}n=n.sibling}}function To(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:To(a,l),h&2048&&vf(l.alternate,l);break;case 24:To(a,l),h&2048&&xf(l.alternate,l);break;default:To(a,l)}n=n.sibling}}var So=8192;function nl(t,n,a){if(t.subtreeFlags&So)for(t=t.child;t!==null;)Z0(t,n,a),t=t.sibling}function Z0(t,n,a){switch(t.tag){case 26:nl(t,n,a),t.flags&So&&t.memoizedState!==null&&Z2(a,ms,t.memoizedState,t.memoizedProps);break;case 5:nl(t,n,a);break;case 3:case 4:var l=ms;ms=Pu(t.stateNode.containerInfo),nl(t,n,a),ms=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=So,So=16777216,nl(t,n,a),So=l):nl(t,n,a));break;default:nl(t,n,a)}}function J0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function No(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Wt=l,ty(l,t)}J0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ey(t),t=t.sibling}function ey(t){switch(t.tag){case 0:case 11:case 15:No(t),t.flags&2048&&Jr(9,t,t.return);break;case 3:No(t);break;case 12:No(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Su(t)):No(t);break;default:No(t)}}function Su(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Wt=l,ty(l,t)}J0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Jr(8,n,n.return),Su(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Su(n));break;default:Su(n)}t=t.sibling}}function ty(t,n){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:Jr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:oo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Wt=l;else e:for(a=t;Wt!==null;){l=Wt;var h=l.sibling,m=l.return;if(G0(l),l===a){Wt=null;break e}if(h!==null){h.return=m,Wt=h;break e}Wt=m}}}var f2={getCacheForType:function(t){var n=nn(Pt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return nn(Pt).controller.signal}},m2=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,Qe=null,Xe=0,ct=0,Mn=null,ei=!1,sl=!1,bf=!1,xr=0,Nt=0,ti=0,ua=0,_f=0,On=0,rl=0,Ao=null,En=null,wf=!1,Nu=0,ny=0,Au=1/0,ju=null,ni=null,Yt=0,si=null,il=null,br=0,Ef=0,Tf=null,sy=null,jo=0,Sf=null;function Vn(){return(at&2)!==0&&Xe!==0?Xe&-Xe:K.T!==null?If():Cc()}function ry(){if(On===0)if((Xe&536870912)===0||tt){var t=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),On=t}else On=536870912;return t=kn.current,t!==null&&(t.flags|=32),On}function Tn(t,n,a){(t===gt&&(ct===2||ct===9)||t.cancelPendingCommit!==null)&&(al(t,0),ri(t,Xe,On,!1)),Pi(t,a),((at&2)===0||t!==gt)&&(t===gt&&((at&2)===0&&(ua|=a),Nt===4&&ri(t,Xe,On,!1)),Fs(t))}function iy(t,n,a){if((at&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||is(t,n),h=l?y2(t,n):Af(t,n,!0),m=l;do{if(h===0){sl&&!l&&ri(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!g2(a)){h=Af(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var E=t;h=Ao;var D=E.current.memoizedState.isDehydrated;if(D&&(al(E,x).flags|=256),x=Af(E,x,!1),x!==2){if(bf&&!D){E.errorRecoveryDisabledLanes|=m,ua|=m,h=4;break e}m=En,En=h,m!==null&&(En===null?En=m:En.push.apply(En,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){al(t,0),ri(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:ri(l,n,On,!ei);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Nu+300-Qt(),10<h)){if(ri(l,n,On,!ei),Ns(l,0,!0)!==0)break e;br=n,l.timeoutHandle=Vy(ay.bind(null,l,a,En,ju,wf,n,On,ua,rl,ei,m,"Throttled",-0,0),h);break e}ay(l,a,En,ju,wf,n,On,ua,rl,ei,m,null,-0,0)}}break}while(!0);Fs(t)}function ay(t,n,a,l,h,m,x,E,D,q,W,re,F,$){if(t.timeoutHandle=-1,re=n.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:os},Z0(n,m,re);var Ne=(m&62914560)===m?Nu-Qt():(m&4194048)===m?ny-Qt():0;if(Ne=J2(re,Ne),Ne!==null){br=m,t.cancelPendingCommit=Ne(my.bind(null,t,n,m,a,l,h,x,E,D,W,re,null,F,$)),ri(t,m,x,!q);return}}my(t,n,m,a,l,h,x,E,D)}function g2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Rn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ri(t,n,a,l){n&=~_f,n&=~ua,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-At(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Ui(t,a,n)}function Cu(){return(at&6)===0?(Co(0),!1):!0}function Nf(){if(Qe!==null){if(ct===0)var t=Qe.return;else t=Qe,cr=ta=null,Bh(t),Xa=null,uo=0,t=Qe;for(;t!==null;)L0(t.alternate,t),t=t.return;Qe=null}}function al(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,O2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),br=0,Nf(),gt=t,Qe=a=lr(t.current,null),Xe=n,ct=0,Mn=null,ei=!1,sl=is(t,n),bf=!1,rl=On=_f=ua=ti=Nt=0,En=Ao=null,wf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-At(l),m=1<<h;n|=t[h],l&=~m}return xr=n,Xc(),a}function ly(t,n){He=null,K.H=xo,n===$a||n===ru?(n=Ep(),ct=3):n===Ch?(n=Ep(),ct=4):ct=n===sf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mn=n,Qe===null&&(Nt=1,vu(t,Yn(n,t.current)))}function oy(){var t=kn.current;return t===null?!0:(Xe&4194048)===Xe?Xn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===Xn:!1}function cy(){var t=K.H;return K.H=xo,t===null?xo:t}function uy(){var t=K.A;return K.A=f2,t}function Ru(){Nt=4,ei||(Xe&4194048)!==Xe&&kn.current!==null||(sl=!0),(ti&134217727)===0&&(ua&134217727)===0||gt===null||ri(gt,Xe,On,!1)}function Af(t,n,a){var l=at;at|=2;var h=cy(),m=uy();(gt!==t||Xe!==n)&&(ju=null,al(t,n)),n=!1;var x=Nt;e:do try{if(ct!==0&&Qe!==null){var E=Qe,D=Mn;switch(ct){case 8:Nf(),x=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(n=!0);var q=ct;if(ct=0,Mn=null,ll(t,E,D,q),a&&sl){x=0;break e}break;default:q=ct,ct=0,Mn=null,ll(t,E,D,q)}}p2(),x=Nt;break}catch(W){ly(t,W)}while(!0);return n&&t.shellSuspendCounter++,cr=ta=null,at=l,K.H=h,K.A=m,Qe===null&&(gt=null,Xe=0,Xc()),x}function p2(){for(;Qe!==null;)dy(Qe)}function y2(t,n){var a=at;at|=2;var l=cy(),h=uy();gt!==t||Xe!==n?(ju=null,Au=Qt()+500,al(t,n)):sl=is(t,n);e:do try{if(ct!==0&&Qe!==null){n=Qe;var m=Mn;t:switch(ct){case 1:ct=0,Mn=null,ll(t,n,m,1);break;case 2:case 9:if(_p(m)){ct=0,Mn=null,hy(n);break}n=function(){ct!==2&&ct!==9||gt!==t||(ct=7),Fs(t)},m.then(n,n);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:_p(m)?(ct=0,Mn=null,hy(n)):(ct=0,Mn=null,ll(t,n,m,7));break;case 5:var x=null;switch(Qe.tag){case 26:x=Qe.memoizedState;case 5:case 27:var E=Qe;if(x?Wy(x):E.stateNode.complete){ct=0,Mn=null;var D=E.sibling;if(D!==null)Qe=D;else{var q=E.return;q!==null?(Qe=q,Iu(q)):Qe=null}break t}}ct=0,Mn=null,ll(t,n,m,5);break;case 6:ct=0,Mn=null,ll(t,n,m,6);break;case 8:Nf(),Nt=6;break e;default:throw Error(i(462))}}v2();break}catch(W){ly(t,W)}while(!0);return cr=ta=null,K.H=l,K.A=h,at=a,Qe!==null?0:(gt=null,Xe=0,Xc(),Nt)}function v2(){for(;Qe!==null&&!Pl();)dy(Qe)}function dy(t){var n=O0(t.alternate,t,xr);t.memoizedProps=t.pendingProps,n===null?Iu(t):Qe=n}function hy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=C0(a,n,n.pendingProps,n.type,void 0,Xe);break;case 11:n=C0(a,n,n.pendingProps,n.type.render,n.ref,Xe);break;case 5:Bh(n);default:L0(a,n),n=Qe=up(n,xr),n=O0(a,n,xr)}t.memoizedProps=t.pendingProps,n===null?Iu(t):Qe=n}function ll(t,n,a,l){cr=ta=null,Bh(n),Xa=null,uo=0;var h=n.return;try{if(a2(t,h,n,a,Xe)){Nt=1,vu(t,Yn(a,t.current)),Qe=null;return}}catch(m){if(h!==null)throw Qe=h,m;Nt=1,vu(t,Yn(a,t.current)),Qe=null;return}n.flags&32768?(tt||l===1?t=!0:sl||(Xe&536870912)!==0?t=!1:(ei=t=!0,(l===2||l===9||l===3||l===6)&&(l=kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),fy(n,t)):Iu(n)}function Iu(t){var n=t;do{if((n.flags&32768)!==0){fy(n,ei);return}t=n.return;var a=c2(n.alternate,n,xr);if(a!==null){Qe=a;return}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=t}while(n!==null);Nt===0&&(Nt=5)}function fy(t,n){do{var a=u2(t.alternate,t);if(a!==null){a.flags&=32767,Qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=a}while(t!==null);Nt=6,Qe=null}function my(t,n,a,l,h,m,x,E,D){t.cancelPendingCommit=null;do ku();while(Yt!==0);if((at&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=mh,ih(t,a,m,x,E,D),t===gt&&(Qe=gt=null,Xe=0),il=n,si=t,br=a,Ef=m,Tf=h,sy=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,w2(Es,function(){return xy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=fe.p,fe.p=2,x=at,at|=4;try{d2(t,n,a)}finally{at=x,fe.p=h,K.T=l}}Yt=1,gy(),py(),yy()}}function gy(){if(Yt===1){Yt=0;var t=si,n=il,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=fe.p;fe.p=2;var h=at;at|=4;try{$0(n,t);var m=Uf,x=tp(t.containerInfo),E=m.focusedElem,D=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&ep(E.ownerDocument.documentElement,E)){if(D!==null&&ch(E)){var q=D.start,W=D.end;if(W===void 0&&(W=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(W,E.value.length);else{var re=E.ownerDocument||document,F=re&&re.defaultView||window;if(F.getSelection){var $=F.getSelection(),Ne=E.textContent.length,De=Math.min(D.start,Ne),mt=D.end===void 0?De:Math.min(D.end,Ne);!$.extend&&De>mt&&(x=mt,mt=De,De=x);var P=Jg(E,De),O=Jg(E,mt);if(P&&O&&($.rangeCount!==1||$.anchorNode!==P.node||$.anchorOffset!==P.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var B=re.createRange();B.setStart(P.node,P.offset),$.removeAllRanges(),De>mt?($.addRange(B),$.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),$.addRange(B))}}}}for(re=[],$=E;$=$.parentNode;)$.nodeType===1&&re.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<re.length;E++){var ee=re[E];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Fu=!!Pf,Uf=Pf=null}finally{at=h,fe.p=l,K.T=a}}t.current=n,Yt=2}}function py(){if(Yt===2){Yt=0;var t=si,n=il,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=fe.p;fe.p=2;var h=at;at|=4;try{F0(t,n.alternate,n)}finally{at=h,fe.p=l,K.T=a}}Yt=3}}function yy(){if(Yt===4||Yt===3){Yt=0,Vi();var t=si,n=il,a=br,l=sy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Yt=5:(Yt=0,il=si=null,vy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ni=null),sr(a),n=n.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(rs,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=fe.p,fe.p=2,K.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var E=l[x];m(E.value,{componentStack:E.stack})}}finally{K.T=n,fe.p=h}}(br&3)!==0&&ku(),Fs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Sf?jo++:(jo=0,Sf=t):jo=0,Co(0)}}function vy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oo(n)))}function ku(){return gy(),py(),yy(),xy()}function xy(){if(Yt!==5)return!1;var t=si,n=Ef;Ef=0;var a=sr(br),l=K.T,h=fe.p;try{fe.p=32>a?32:a,K.T=null,a=Tf,Tf=null;var m=si,x=br;if(Yt=0,il=si=null,br=0,(at&6)!==0)throw Error(i(331));var E=at;if(at|=4,ey(m.current),W0(m,m.current,x,a),at=E,Co(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(rs,m)}catch{}return!0}finally{fe.p=h,K.T=l,vy(t,n)}}function by(t,n,a){n=Yn(a,n),n=nf(t.stateNode,n,2),t=Xr(t,n,2),t!==null&&(Pi(t,2),Fs(t))}function ut(t,n,a){if(t.tag===3)by(t,t,a);else for(;n!==null;){if(n.tag===3){by(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ni===null||!ni.has(l))){t=Yn(a,t),a=_0(2),l=Xr(n,a,2),l!==null&&(w0(a,l,n,t),Pi(l,2),Fs(l));break}}n=n.return}}function jf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new m2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(bf=!0,h.add(a),t=x2.bind(null,t,n,a),n.then(t,t))}function x2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,gt===t&&(Xe&a)===a&&(Nt===4||Nt===3&&(Xe&62914560)===Xe&&300>Qt()-Nu?(at&2)===0&&al(t,0):_f|=a,rl===Xe&&(rl=0)),Fs(t)}function _y(t,n){n===0&&(n=jc()),t=Zi(t,n),t!==null&&(Pi(t,n),Fs(t))}function b2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),_y(t,a)}function _2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),_y(t,a)}function w2(t,n){return pt(t,n)}var Du=null,ol=null,Cf=!1,Mu=!1,Rf=!1,ii=0;function Fs(t){t!==ol&&t.next===null&&(ol===null?Du=ol=t:ol=ol.next=t),Mu=!0,Cf||(Cf=!0,T2())}function Co(t,n){if(!Rf&&Mu){Rf=!0;do for(var a=!1,l=Du;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-At(42|t)+1)-1,m&=h&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Sy(l,m))}else m=Xe,m=Ns(l,l===gt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||is(l,m)||(a=!0,Sy(l,m));l=l.next}while(a);Rf=!1}}function E2(){wy()}function wy(){Mu=Cf=!1;var t=0;ii!==0&&M2()&&(t=ii);for(var n=Qt(),a=null,l=Du;l!==null;){var h=l.next,m=Ey(l,n);m===0?(l.next=null,a===null?Du=h:a.next=h,h===null&&(ol=a)):(a=l,(t!==0||(m&3)!==0)&&(Mu=!0)),l=h}Yt!==0&&Yt!==5||Co(t),ii!==0&&(ii=0)}function Ey(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-At(m),E=1<<x,D=h[x];D===-1?((E&a)===0||(E&l)!==0)&&(h[x]=rh(E,n)):D<=n&&(t.expiredLanes|=E),m&=~E}if(n=gt,a=Xe,a=Ns(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ct===2||ct===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&mn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||is(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&mn(l),sr(a)){case 2:case 8:a=Mr;break;case 32:a=Es;break;case 268435456:a=Sa;break;default:a=Es}return l=Ty.bind(null,t),a=pt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&mn(l),t.callbackPriority=2,t.callbackNode=null,2}function Ty(t,n){if(Yt!==0&&Yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=Xe;return l=Ns(t,t===gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(iy(t,l,n),Ey(t,Qt()),t.callbackNode!=null&&t.callbackNode===a?Ty.bind(null,t):null)}function Sy(t,n){if(ku())return null;iy(t,n,!0)}function T2(){V2(function(){(at&6)!==0?pt(nr,E2):wy()})}function If(){if(ii===0){var t=Ka;t===0&&(t=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),ii=t}return ii}function Ny(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ka(""+t)}function Ay(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function S2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ny((h[$t]||null).action),x=l.submitter;x&&(n=(n=x[$t]||null)?Ny(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var E=new Ls("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ii!==0){var D=x?Ay(h,x):new FormData(h);Xh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=x?Ay(h,x):new FormData(h),Xh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var kf=0;kf<fh.length;kf++){var Df=fh[kf],N2=Df.toLowerCase(),A2=Df[0].toUpperCase()+Df.slice(1);fs(N2,"on"+A2)}fs(rp,"onAnimationEnd"),fs(ip,"onAnimationIteration"),fs(ap,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(H1,"onTransitionRun"),fs(F1,"onTransitionStart"),fs(G1,"onTransitionCancel"),fs(lp,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function jy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var E=l[x],D=E.instance,q=E.currentTarget;if(E=E.listener,D!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=q;try{m(h)}catch(W){$c(W)}h.currentTarget=null,m=D}else for(x=0;x<l.length;x++){if(E=l[x],D=E.instance,q=E.currentTarget,E=E.listener,D!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=q;try{m(h)}catch(W){$c(W)}h.currentTarget=null,m=D}}}}function $e(t,n){var a=n[Aa];a===void 0&&(a=n[Aa]=new Set);var l=t+"__bubble";a.has(l)||(Cy(n,t,2,!1),a.add(l))}function Mf(t,n,a){var l=0;n&&(l|=4),Cy(a,t,l,n)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[Ou]){t[Ou]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(j2.has(a)||Mf(a,!1,t),Mf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ou]||(n[Ou]=!0,Mf("selectionchange",!1,n))}}function Cy(t,n,a,l){switch(rv(n)){case 2:var h=nw;break;case 8:h=sw;break;default:h=Xf}a=h.bind(null,n,a,t),h=void 0,!Fi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Vf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;E!==null;){if(x=Rs(E),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=m=x;continue e}E=E.parentNode}}l=l.return}zr(function(){var q=m,W=qn(a),re=[];e:{var F=op.get(t);if(F!==void 0){var $=Ls,Ne=t;switch(t){case"keypress":if(Yi(a)===0)break e;case"keydown":case"keyup":$=Yc;break;case"focusin":Ne="focus",$=Qi;break;case"focusout":Ne="blur",$=Qi;break;case"beforeblur":case"afterblur":$=Qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=g;break;case rp:case ip:case ap:$=Uc;break;case lp:$=S;break;case"scroll":case"scrollend":$=Jl;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ar;break;case"toggle":case"beforetoggle":$=qe}var De=(n&4)!==0,mt=!De&&(t==="scroll"||t==="scrollend"),P=De?F!==null?F+"Capture":null:F;De=[];for(var O=q,B;O!==null;){var ee=O;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||P===null||(ee=cs(O,P),ee!=null&&De.push(Io(O,ee,B))),mt)break;O=O.return}0<De.length&&(F=new $(F,Ne,null,a,W),re.push({event:F,listeners:De}))}}if((n&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",F&&a!==Xl&&(Ne=a.relatedTarget||a.fromElement)&&(Rs(Ne)||Ne[js]))break e;if(($||F)&&(F=W.window===W?W:(F=W.ownerDocument)?F.defaultView||F.parentWindow:window,$?(Ne=a.relatedTarget||a.toElement,$=q,Ne=Ne?Rs(Ne):null,Ne!==null&&(mt=d(Ne),De=Ne.tag,Ne!==mt||De!==5&&De!==27&&De!==6)&&(Ne=null)):($=null,Ne=q),$!==Ne)){if(De=eo,ee="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(De=ar,ee="onPointerLeave",P="onPointerEnter",O="pointer"),mt=$==null?F:jn($),B=Ne==null?F:jn(Ne),F=new De(ee,O+"leave",$,a,W),F.target=mt,F.relatedTarget=B,ee=null,Rs(W)===q&&(De=new De(P,O+"enter",Ne,a,W),De.target=B,De.relatedTarget=mt,ee=De),mt=ee,$&&Ne)t:{for(De=C2,P=$,O=Ne,B=0,ee=P;ee;ee=De(ee))B++;ee=0;for(var Re=O;Re;Re=De(Re))ee++;for(;0<B-ee;)P=De(P),B--;for(;0<ee-B;)O=De(O),ee--;for(;B--;){if(P===O||O!==null&&P===O.alternate){De=P;break t}P=De(P),O=De(O)}De=null}else De=null;$!==null&&Ry(re,F,$,De,!1),Ne!==null&&mt!==null&&Ry(re,mt,Ne,De,!0)}}e:{if(F=q?jn(q):window,$=F.nodeName&&F.nodeName.toLowerCase(),$==="select"||$==="input"&&F.type==="file")var st=Kg;else if(Gg(F))if(Qg)st=z1;else{st=P1;var Ae=L1}else $=F.nodeName,!$||$.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Ia(q.elementType)&&(st=Kg):st=U1;if(st&&(st=st(t,q))){Yg(re,st,a,W);break e}Ae&&Ae(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Kl(F,"number",F.value)}switch(Ae=q?jn(q):window,t){case"focusin":(Gg(Ae)||Ae.contentEditable==="true")&&(Ua=Ae,uh=q,io=null);break;case"focusout":io=uh=Ua=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,np(re,a,W);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":np(re,a,W)}var Fe;if(it)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Pa?$i(t,a)&&(We="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(zs&&a.locale!=="ko"&&(Pa||We!=="onCompositionStart"?We==="onCompositionEnd"&&Pa&&(Fe=Zl()):(Vs=W,Wl="value"in Vs?Vs.value:Vs.textContent,Pa=!0)),Ae=Vu(q,We),0<Ae.length&&(We=new Us(We,t,null,a,W),re.push({event:We,listeners:Ae}),Fe?We.data=Fe:(Fe=La(a),Fe!==null&&(We.data=Fe)))),(Fe=Fn?D1(t,a):M1(t,a))&&(We=Vu(q,"onBeforeInput"),0<We.length&&(Ae=new Us("onBeforeInput","beforeinput",null,a,W),re.push({event:Ae,listeners:We}),Ae.data=Fe)),S2(re,t,q,a,W)}jy(re,n)})}function Io(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Vu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=cs(t,a),h!=null&&l.unshift(Io(t,h,m)),h=cs(t,n),h!=null&&l.push(Io(t,h,m))),t.tag===3)return l;t=t.return}return[]}function C2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ry(t,n,a,l,h){for(var m=n._reactName,x=[];a!==null&&a!==l;){var E=a,D=E.alternate,q=E.stateNode;if(E=E.tag,D!==null&&D===l)break;E!==5&&E!==26&&E!==27||q===null||(D=q,h?(q=cs(a,m),q!=null&&x.unshift(Io(a,q,D))):h||(q=cs(a,m),q!=null&&x.push(Io(a,q,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var R2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function Iy(t){return(typeof t=="string"?t:""+t).replace(R2,`
`).replace(I2,"")}function ky(t,n){return n=Iy(n),Iy(t)===n}function ft(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||xn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&xn(t,""+l);break;case"className":Cn(t,"class",l);break;case"tabIndex":Cn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(t,a,l);break;case"style":$l(t,l,m);break;case"data":if(n!=="object"){Cn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&ft(t,n,"name",h.name,h,null),ft(t,n,"formEncType",h.formEncType,h,null),ft(t,n,"formMethod",h.formMethod,h,null),ft(t,n,"formTarget",h.formTarget,h,null)):(ft(t,n,"encType",h.encType,h,null),ft(t,n,"method",h.method,h,null),ft(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=os);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":$e("beforetoggle",t),$e("toggle",t),Ca(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ca(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,Ca(t,a,l))}}function Lf(t,n,a,l,h,m){switch(a){case"style":$l(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?xn(t,l):(typeof l=="number"||typeof l=="bigint")&&xn(t,""+l);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"onClick":l!=null&&(t.onclick=os);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ca(t,a,l)}}}function rn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(t,n,m,x,a,null)}}h&&ft(t,n,"srcSet",a.srcSet,a,null),l&&ft(t,n,"src",a.src,a,null);return;case"input":$e("invalid",t);var E=m=x=h=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":x=W;break;case"checked":D=W;break;case"defaultChecked":q=W;break;case"value":m=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,n));break;default:ft(t,n,l,W,a,null)}}Dc(t,m,E,D,q,x,h,!1);return;case"select":$e("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:ft(t,n,h,E,a,null)}n=m,a=x,t.multiple=!!l,n!=null?Vr(t,!!l,n,!1):a!=null&&Vr(t,!!l,a,!0);return;case"textarea":$e("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:ft(t,n,x,E,a,null)}Lr(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(t,n,D,l,a,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(l=0;l<Ro.length;l++)$e(Ro[l],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(t,n,q,l,a,null)}return;default:if(Ia(n)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Lf(t,n,W,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&ft(t,n,E,l,a,null))}function k2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,E=null,D=null,q=null,W=null;for($ in a){var re=a[$];if(a.hasOwnProperty($)&&re!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=re;default:l.hasOwnProperty($)||ft(t,n,$,null,l,re)}}for(var F in l){var $=l[F];if(re=a[F],l.hasOwnProperty(F)&&($!=null||re!=null))switch(F){case"type":m=$;break;case"name":h=$;break;case"checked":q=$;break;case"defaultChecked":W=$;break;case"value":x=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,n));break;default:$!==re&&ft(t,n,F,$,l,re)}}Ra(t,x,E,D,q,W,m,h);return;case"select":$=x=E=F=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(m)||ft(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":F=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==D&&ft(t,n,h,m,l,D)}n=E,a=x,l=$,F!=null?Vr(t,!!a,F,!1):!!l!=!!a&&(n!=null?Vr(t,!!a,n,!0):Vr(t,!!a,a?[]:"",!1));return;case"textarea":$=F=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ft(t,n,E,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":F=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&ft(t,n,x,h,l,m)}Mc(t,F,$);return;case"option":for(var Ne in a)if(F=a[Ne],a.hasOwnProperty(Ne)&&F!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:ft(t,n,Ne,null,l,F)}for(D in l)if(F=l[D],$=a[D],l.hasOwnProperty(D)&&F!==$&&(F!=null||$!=null))switch(D){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ft(t,n,D,F,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)F=a[De],a.hasOwnProperty(De)&&F!=null&&!l.hasOwnProperty(De)&&ft(t,n,De,null,l,F);for(q in l)if(F=l[q],$=a[q],l.hasOwnProperty(q)&&F!==$&&(F!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,n));break;default:ft(t,n,q,F,l,$)}return;default:if(Ia(n)){for(var mt in a)F=a[mt],a.hasOwnProperty(mt)&&F!==void 0&&!l.hasOwnProperty(mt)&&Lf(t,n,mt,void 0,l,F);for(W in l)F=l[W],$=a[W],!l.hasOwnProperty(W)||F===$||F===void 0&&$===void 0||Lf(t,n,W,F,l,$);return}}for(var P in a)F=a[P],a.hasOwnProperty(P)&&F!=null&&!l.hasOwnProperty(P)&&ft(t,n,P,null,l,F);for(re in l)F=l[re],$=a[re],!l.hasOwnProperty(re)||F===$||F==null&&$==null||ft(t,n,re,F,l,$)}function Dy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,x=h.initiatorType,E=h.duration;if(m&&E&&Dy(x)){for(x=0,E=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>E)break;var W=D.transferSize,re=D.initiatorType;W&&Dy(re)&&(D=D.responseEnd,x+=W*(D<E?1:(E-q)/(D-q)))}if(--l,n+=8*(m+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Pf=null,Uf=null;function Lu(t){return t.nodeType===9?t:t.ownerDocument}function My(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function zf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bf=null;function M2(){var t=window.event;return t&&t.type==="popstate"?t===Bf?!1:(Bf=t,!0):(Bf=null,!1)}var Vy=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,V2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(t){return Ly.resolve(null).then(t).catch(L2)}:Vy;function L2(t){setTimeout(function(){throw t})}function ai(t){return t==="head"}function Py(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),hl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ko(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ko(a);for(var m=a.firstChild;m;){var x=m.nextSibling,E=m.nodeName;m[Cs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&ko(t.ownerDocument.body);a=h}while(a);hl(n)}function Uy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function qf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qf(a),ja(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function P2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Cs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function U2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function zy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Wn(t.nextSibling),t===null))return null;return t}function Hf(t){return t.data==="$?"||t.data==="$~"}function Ff(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function z2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Gf=null;function By(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Wn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function qy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Hy(t,n,a){switch(n=Lu(a),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ko(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ja(t)}var Zn=new Map,Fy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _r=fe.d;fe.d={f:B2,r:q2,D:H2,C:F2,L:G2,m:Y2,X:Q2,S:K2,M:$2};function B2(){var t=_r.f(),n=Cu();return t||n}function q2(t){var n=Bn(t);n!==null&&n.tag===5&&n.type==="form"?l0(n):_r.r(t)}var cl=typeof document>"u"?null:document;function Gy(t,n,a){var l=cl;if(l&&typeof n=="string"&&n){var h=vn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Fy.has(h)||(Fy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),rn(n,"link",t),Vt(n),l.head.appendChild(n)))}}function H2(t){_r.D(t),Gy("dns-prefetch",t,null)}function F2(t,n){_r.C(t,n),Gy("preconnect",t,n)}function G2(t,n,a){_r.L(t,n,a);var l=cl;if(l&&t&&n){var h='link[rel="preload"][as="'+vn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vn(a.imageSizes)+'"]')):h+='[href="'+vn(t)+'"]';var m=h;switch(n){case"style":m=ul(t);break;case"script":m=dl(t)}Zn.has(m)||(t=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Zn.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Do(m))||n==="script"&&l.querySelector(Mo(m))||(n=l.createElement("link"),rn(n,"link",t),Vt(n),l.head.appendChild(n)))}}function Y2(t,n){_r.m(t,n);var a=cl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+vn(l)+'"][href="'+vn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(t)}if(!Zn.has(m)&&(t=T({rel:"modulepreload",href:t},n),Zn.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mo(m)))return}l=a.createElement("link"),rn(l,"link",t),Vt(l),a.head.appendChild(l)}}}function K2(t,n,a){_r.S(t,n,a);var l=cl;if(l&&t){var h=Is(l).hoistableStyles,m=ul(t);n=n||"default";var x=h.get(m);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Do(m)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Zn.get(m))&&Yf(t,a);var D=x=l.createElement("link");Vt(D),rn(D,"link",t),D._p=new Promise(function(q,W){D.onload=q,D.onerror=W}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Uu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:E},h.set(m,x)}}}function Q2(t,n){_r.X(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=T({src:t,async:!0},n),(n=Zn.get(h))&&Kf(t,n),m=a.createElement("script"),Vt(m),rn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function $2(t,n){_r.M(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=T({src:t,async:!0,type:"module"},n),(n=Zn.get(h))&&Kf(t,n),m=a.createElement("script"),Vt(m),rn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Yy(t,n,a,l){var h=(h=te.current)?Pu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ul(a.href),a=Is(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ul(a.href);var m=Is(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Do(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),m||X2(h,t,a,x.state))),n&&l===null)throw Error(i(528,""));return x}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(a),a=Is(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ul(t){return'href="'+vn(t)+'"'}function Do(t){return'link[rel="stylesheet"]['+t+"]"}function Ky(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function X2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),rn(n,"link",a),Vt(n),t.head.appendChild(n))}function dl(t){return'[src="'+vn(t)+'"]'}function Mo(t){return"script[async]"+t}function Qy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+vn(a.href)+'"]');if(l)return n.instance=l,Vt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Vt(l),rn(l,"style",h),Uu(l,a.precedence,t),n.instance=l;case"stylesheet":h=ul(a.href);var m=t.querySelector(Do(h));if(m)return n.state.loading|=4,n.instance=m,Vt(m),m;l=Ky(a),(h=Zn.get(h))&&Yf(l,h),m=(t.ownerDocument||t).createElement("link"),Vt(m);var x=m;return x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),rn(m,"link",l),n.state.loading|=4,Uu(m,a.precedence,t),n.instance=m;case"script":return m=dl(a.src),(h=t.querySelector(Mo(m)))?(n.instance=h,Vt(h),h):(l=a,(h=Zn.get(m))&&(l=T({},a),Kf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Vt(h),rn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uu(l,a.precedence,t));return n.instance}function Uu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===n)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Yf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var zu=null;function $y(t,n,a){if(zu===null){var l=new Map,h=zu=new Map;h.set(a,l)}else h=zu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Cs]||m[Ot]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=t+x;var E=l.get(x);E?E.push(m):l.set(x,[m])}}return l}function Xy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function W2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Z2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ul(l.href),m=n.querySelector(Do(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Bu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Vt(m);return}m=n.ownerDocument||n,l=Ky(l),(h=Zn.get(h))&&Yf(l,h),m=m.createElement("link"),Vt(m);var x=m;x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),rn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Bu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Qf=0;function J2(t,n){return t.stylesheets&&t.count===0&&Hu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Qf===0&&(Qf=62500*D2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Qf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qu=null;function Hu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qu=new Map,n.forEach(ew,t),qu=null,Bu.call(t))}function ew(t,n){if(!(n.state.loading&4)){var a=qu.get(t);if(a)var l=a.get(null);else{a=new Map,qu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=Bu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Oo={$$typeof:ve,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function tw(t,n,a,l,h,m,x,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Zy(t,n,a,l,h,m,x,E,D,q,W,re){return t=new tw(t,n,a,x,D,q,W,re,E),n=1,m===!0&&(n|=24),m=In(3,null,null,n),t.current=m,m.stateNode=t,n=Nh(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Rh(m),t}function Jy(t){return t?(t=qa,t):qa}function ev(t,n,a,l,h,m){h=Jy(h),l.context===null?l.context=h:l.pendingContext=h,l=$r(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Xr(t,l,n),a!==null&&(Tn(a,t,n),fo(a,t,n))}function tv(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function $f(t,n){tv(t,n),(t=t.alternate)&&tv(t,n)}function nv(t){if(t.tag===13||t.tag===31){var n=Zi(t,67108864);n!==null&&Tn(n,t,67108864),$f(t,67108864)}}function sv(t){if(t.tag===13||t.tag===31){var n=Vn();n=zi(n);var a=Zi(t,n);a!==null&&Tn(a,t,n),$f(t,n)}}var Fu=!0;function nw(t,n,a,l){var h=K.T;K.T=null;var m=fe.p;try{fe.p=2,Xf(t,n,a,l)}finally{fe.p=m,K.T=h}}function sw(t,n,a,l){var h=K.T;K.T=null;var m=fe.p;try{fe.p=8,Xf(t,n,a,l)}finally{fe.p=m,K.T=h}}function Xf(t,n,a,l){if(Fu){var h=Wf(l);if(h===null)Vf(t,n,l,Gu,a),iv(t,l);else if(iw(h,t,n,a,l))l.stopPropagation();else if(iv(t,l),n&4&&-1<rw.indexOf(t)){for(;h!==null;){var m=Bn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Ss(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var D=1<<31-At(x);E.entanglements[1]|=D,x&=~D}Fs(m),(at&6)===0&&(Au=Qt()+500,Co(0))}}break;case 31:case 13:E=Zi(m,2),E!==null&&Tn(E,m,2),Cu(),$f(m,2)}if(m=Wf(l),m===null&&Vf(t,n,l,Gu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Vf(t,n,l,null,a)}}function Wf(t){return t=qn(t),Zf(t)}var Gu=null;function Zf(t){if(Gu=null,t=Rs(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Gu=t,null}function rv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tr()){case nr:return 2;case Mr:return 8;case Es:case Un:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var Jf=!1,li=null,oi=null,ci=null,Vo=new Map,Lo=new Map,ui=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(t,n){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function Po(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=Bn(n),n!==null&&nv(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function iw(t,n,a,l,h){switch(n){case"focusin":return li=Po(li,t,n,a,l,h),!0;case"dragenter":return oi=Po(oi,t,n,a,l,h),!0;case"mouseover":return ci=Po(ci,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Vo.set(m,Po(Vo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Lo.set(m,Po(Lo.get(m)||null,t,n,a,l,h)),!0}return!1}function av(t){var n=Rs(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,as(t.priority,function(){sv(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,as(t.priority,function(){sv(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Wf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xl=l,a.target.dispatchEvent(l),Xl=null}else return n=Bn(a),n!==null&&nv(n),t.blockedOn=a,!1;n.shift()}return!0}function lv(t,n,a){Yu(t)&&a.delete(n)}function aw(){Jf=!1,li!==null&&Yu(li)&&(li=null),oi!==null&&Yu(oi)&&(oi=null),ci!==null&&Yu(ci)&&(ci=null),Vo.forEach(lv),Lo.forEach(lv)}function Ku(t,n){t.blockedOn===n&&(t.blockedOn=null,Jf||(Jf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aw)))}var Qu=null;function ov(t){Qu!==t&&(Qu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Zf(l||a)===null)continue;break}var m=Bn(a);m!==null&&(t.splice(n,3),n-=3,Xh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function hl(t){function n(D){return Ku(D,t)}li!==null&&Ku(li,t),oi!==null&&Ku(oi,t),ci!==null&&Ku(ci,t),Vo.forEach(n),Lo.forEach(n);for(var a=0;a<ui.length;a++){var l=ui[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ui.length&&(a=ui[0],a.blockedOn===null);)av(a),a.blockedOn===null&&ui.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[$t]||null;if(typeof m=="function")x||ov(a);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[$t]||null)E=x.formAction;else if(Zf(h)!==null)continue}else E=x.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),ov(a)}}}function cv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function em(t){this._internalRoot=t}$u.prototype.render=em.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Vn();ev(a,l,t,n,null,null)},$u.prototype.unmount=em.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ev(t.current,2,null,t,null,null),Cu(),n[js]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var n=Cc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<ui.length&&n!==0&&n<ui[a].priority;a++);ui.splice(a,0,t),a===0&&av(t)}};var uv=e.version;if(uv!=="19.2.0")throw Error(i(527,uv,"19.2.0"));fe.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var lw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{rs=Xu.inject(lw),Jt=Xu}catch{}}return zo.createRoot=function(t,n){if(!o(t))throw Error(i(299));var a=!1,l="",h=y0,m=v0,x=x0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Zy(t,1,!1,null,null,a,l,null,h,m,x,cv),t[js]=n.current,Of(t),new em(n)},zo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=y0,x=v0,E=x0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Zy(t,1,!0,n,a??null,l,h,D,m,x,E,cv),n.context=Jy(null),a=n.current,l=Vn(),l=zi(l),h=$r(l),h.callback=null,Xr(a,h,l),a=l,n.current.lanes=a,Pi(n,a),Fs(n),t[js]=n.current,Of(t),new $u(n)},zo.version="19.2.0",zo}var bv;function vw(){if(bv)return sm.exports;bv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sm.exports=yw(),sm.exports}var xw=vw();const bw=()=>{};var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=function(r){const e=[];let s=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},_w=function(r){const e=[];let s=0,i=0;for(;s<r.length;){const o=r[s++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const d=r[s++];e[i++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=r[s++],f=r[s++],p=r[s++],v=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const d=r[s++],f=r[s++];e[i++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},rb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const d=r[o],f=o+1<r.length,p=f?r[o+1]:0,v=o+2<r.length,y=v?r[o+2]:0,_=d>>2,T=(d&3)<<4|p>>4;let N=(p&15)<<2|y>>6,U=y&63;v||(U=64,f||(N=64)),i.push(s[_],s[T],s[N],s[U])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(sb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):_w(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const d=s[r.charAt(o++)],p=o<r.length?s[r.charAt(o)]:0;++o;const y=o<r.length?s[r.charAt(o)]:64;++o;const T=o<r.length?s[r.charAt(o)]:64;if(++o,d==null||p==null||y==null||T==null)throw new ww;const N=d<<2|p>>4;if(i.push(N),y!==64){const U=p<<4&240|y>>2;if(i.push(U),T!==64){const X=y<<6&192|T;i.push(X)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ew=function(r){const e=sb(r);return rb.encodeByteArray(e,!0)},gd=function(r){return Ew(r).replace(/\./g,"")},ib=function(r){try{return rb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=()=>Tw().__FIREBASE_DEFAULTS__,Nw=()=>{if(typeof process>"u"||typeof _v>"u")return;const r=_v.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Aw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ib(r[1]);return e&&JSON.parse(e)},Od=()=>{try{return bw()||Sw()||Nw()||Aw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ab=r=>Od()?.emulatorHosts?.[r],jw=r=>{const e=ab(r);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),i]:[e.substring(0,s),i]},lb=()=>Od()?.config,ob=r=>Od()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cb(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gd(JSON.stringify(s)),gd(JSON.stringify(f)),""].join(".")}const Ko={};function Iw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?r.emulator.push(e):r.prod.push(e);return r}function kw(r){let e=document.getElementById(r),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),s=!0),{created:s,element:e}}let wv=!1;function ub(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ko[r]===e||Ko[r]||wv)return;Ko[r]=e;function s(N){return`__firebase__banner__${N}`}const i="__firebase__banner",d=Iw().prod.length>0;function f(){const N=document.getElementById(i);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function v(N,U){N.setAttribute("width","24"),N.setAttribute("id",U),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{wv=!0,f()},N}function _(N,U){N.setAttribute("id",U),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function T(){const N=kw(i),U=s("text"),X=document.getElementById(U)||document.createElement("span"),G=s("learnmore"),Y=document.getElementById(G)||document.createElement("a"),he=s("preprendIcon"),oe=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ve=N.element;p(ve),_(Y,G);const ye=y();v(oe,he),ve.append(oe,X,Y,ye),document.body.appendChild(ve)}d?(X.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Mw(){const r=Od()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ow(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Lw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pw(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Uw(){return!Mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zw(){try{return typeof indexedDB=="object"}catch{return!1}}function Bw(){return new Promise((r,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="FirebaseError";class Ir extends Error{constructor(e,s,i){super(s),this.code=e,this.customData=i,this.name=qw,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,s,i){this.service=e,this.serviceName=s,this.errors=i}create(e,...s){const i=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?Hw(d,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Ir(o,p,i)}}function Hw(r,e){return r.replace(Fw,(s,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Fw=/\{\$([^}]+)}/g;function Gw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ya(r,e){if(r===e)return!0;const s=Object.keys(r),i=Object.keys(e);for(const o of s){if(!i.includes(o))return!1;const d=r[o],f=e[o];if(Ev(d)&&Ev(f)){if(!ya(d,f))return!1}else if(d!==f)return!1}for(const o of i)if(!s.includes(o))return!1;return!0}function Ev(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r){const e=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Bo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,d]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function qo(r){const e=r.indexOf("?");if(!e)return"";const s=r.indexOf("#",e);return r.substring(e,s>0?s:void 0)}function Yw(r,e){const s=new Kw(r,e);return s.subscribe.bind(s)}class Kw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,i){let o;if(e===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");Qw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:i},o.next===void 0&&(o.next=lm),o.error===void 0&&(o.error=lm),o.complete===void 0&&(o.complete=lm);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qw(r,e){if(typeof r!="object"||r===null)return!1;for(const s of e)if(s in r&&typeof r[s]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r){return r&&r._delegate?r._delegate:r}class va{constructor(e,s,i){this.name=e,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const i=new Cw;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ww(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});i.resolve(d)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);i===p&&f.resolve(o)}return o}onInit(e,s){const i=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const d=this.instances.get(i);return d&&e(d,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const i=this.onInitCallbacks.get(s);if(i)for(const o of i)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Xw(e),options:s}),this.instances.set(e,i),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xw(r){return r===ha?void 0:r}function Ww(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new $w(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const Jw={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},eE=Ze.INFO,tE={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},nE=(r,e,...s)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=tE[e];if(o)console[o](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=eE,this._logHandler=nE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const sE=(r,e)=>e.some(s=>r instanceof s);let Tv,Sv;function rE(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iE(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const db=new WeakMap,Tm=new WeakMap,hb=new WeakMap,om=new WeakMap,eg=new WeakMap;function aE(r){const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{s(xi(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&db.set(s,r)}).catch(()=>{}),eg.set(e,r),e}function lE(r){if(Tm.has(r))return;const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});Tm.set(r,e)}let Sm={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return Tm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||hb.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return xi(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function oE(r){Sm=r(Sm)}function cE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const i=r.call(cm(this),e,...s);return hb.set(i,e.sort?e.sort():[e]),xi(i)}:iE().includes(r)?function(...e){return r.apply(cm(this),e),xi(db.get(this))}:function(...e){return xi(r.apply(cm(this),e))}}function uE(r){return typeof r=="function"?cE(r):(r instanceof IDBTransaction&&lE(r),sE(r,rE())?new Proxy(r,Sm):r)}function xi(r){if(r instanceof IDBRequest)return aE(r);if(om.has(r))return om.get(r);const e=uE(r);return e!==r&&(om.set(r,e),eg.set(e,r)),e}const cm=r=>eg.get(r);function dE(r,e,{blocked:s,upgrade:i,blocking:o,terminated:d}={}){const f=indexedDB.open(r,e),p=xi(f);return i&&f.addEventListener("upgradeneeded",v=>{i(xi(f.result),v.oldVersion,v.newVersion,xi(f.transaction),v)}),s&&f.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const hE=["get","getKey","getAll","getAllKeys","count"],fE=["put","add","delete","clear"],um=new Map;function Nv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,o=fE.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(o||hE.includes(s)))return;const d=async function(f,...p){const v=this.transaction(f,o?"readwrite":"readonly");let y=v.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&v.done]))[0]};return um.set(e,d),d}oE(r=>({...r,get:(e,s,i)=>Nv(e,s)||r.get(e,s,i),has:(e,s)=>!!Nv(e,s)||r.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(gE(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function gE(r){return r.getComponent()?.type==="VERSION"}const Nm="@firebase/app",Av="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Jm("@firebase/app"),pE="@firebase/app-compat",yE="@firebase/analytics-compat",vE="@firebase/analytics",xE="@firebase/app-check-compat",bE="@firebase/app-check",_E="@firebase/auth",wE="@firebase/auth-compat",EE="@firebase/database",TE="@firebase/data-connect",SE="@firebase/database-compat",NE="@firebase/functions",AE="@firebase/functions-compat",jE="@firebase/installations",CE="@firebase/installations-compat",RE="@firebase/messaging",IE="@firebase/messaging-compat",kE="@firebase/performance",DE="@firebase/performance-compat",ME="@firebase/remote-config",OE="@firebase/remote-config-compat",VE="@firebase/storage",LE="@firebase/storage-compat",PE="@firebase/firestore",UE="@firebase/ai",zE="@firebase/firestore-compat",BE="firebase",qE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",HE={[Nm]:"fire-core",[pE]:"fire-core-compat",[vE]:"fire-analytics",[yE]:"fire-analytics-compat",[bE]:"fire-app-check",[xE]:"fire-app-check-compat",[_E]:"fire-auth",[wE]:"fire-auth-compat",[EE]:"fire-rtdb",[TE]:"fire-data-connect",[SE]:"fire-rtdb-compat",[NE]:"fire-fn",[AE]:"fire-fn-compat",[jE]:"fire-iid",[CE]:"fire-iid-compat",[RE]:"fire-fcm",[IE]:"fire-fcm-compat",[kE]:"fire-perf",[DE]:"fire-perf-compat",[ME]:"fire-rc",[OE]:"fire-rc-compat",[VE]:"fire-gcs",[LE]:"fire-gcs-compat",[PE]:"fire-fst",[zE]:"fire-fst-compat",[UE]:"fire-vertex","fire-js":"fire-js",[BE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,FE=new Map,jm=new Map;function jv(r,e){try{r.container.addComponent(e)}catch(s){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function El(r){const e=r.name;if(jm.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,r);for(const s of pd.values())jv(s,r);for(const s of FE.values())jv(s,r);return!0}function tg(r,e){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(e)}function es(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new cc("app","Firebase",GE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,s,i){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=qE;function fb(r,e={}){let s=r;typeof e!="object"&&(e={name:e});const i={name:Am,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(s||(s=lb()),!s)throw bi.create("no-options");const d=pd.get(o);if(d){if(ya(s,d.options)&&ya(i,d.config))return d;throw bi.create("duplicate-app",{appName:o})}const f=new Zw(o);for(const v of jm.values())f.addComponent(v);const p=new YE(s,i,f);return pd.set(o,p),p}function mb(r=Am){const e=pd.get(r);if(!e&&r===Am&&lb())return fb();if(!e)throw bi.create("no-app",{appName:r});return e}function _i(r,e,s){let i=HE[r]??r;s&&(i+=`-${s}`);const o=i.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(f.join(" "));return}El(new va(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebase-heartbeat-database",QE=1,Jo="firebase-heartbeat-store";let dm=null;function gb(){return dm||(dm=dE(KE,QE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Jo)}catch(s){console.warn(s)}}}}).catch(r=>{throw bi.create("idb-open",{originalErrorMessage:r.message})})),dm}async function $E(r){try{const s=(await gb()).transaction(Jo),i=await s.objectStore(Jo).get(pb(r));return await s.done,i}catch(e){if(e instanceof Ir)Nr.warn(e.message);else{const s=bi.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(s.message)}}}async function Cv(r,e){try{const i=(await gb()).transaction(Jo,"readwrite");await i.objectStore(Jo).put(e,pb(r)),await i.done}catch(s){if(s instanceof Ir)Nr.warn(s.message);else{const i=bi.create("idb-set",{originalErrorMessage:s?.message});Nr.warn(i.message)}}}function pb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=1024,WE=30;class ZE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new eT(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>WE){const o=tT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rv(),{heartbeatsToSend:s,unsentEntries:i}=JE(this._heartbeatsCache.heartbeats),o=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Nr.warn(e),""}}}function Rv(){return new Date().toISOString().substring(0,10)}function JE(r,e=XE){const s=[];let i=r.slice();for(const o of r){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),Iv(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Iv(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class eT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zw()?Bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await $E(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Iv(r){return gd(JSON.stringify({version:2,heartbeats:r})).length}function tT(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r){El(new va("platform-logger",e=>new mE(e),"PRIVATE")),El(new va("heartbeat",e=>new ZE(e),"PRIVATE")),_i(Nm,Av,r),_i(Nm,Av,"esm2020"),_i("fire-js","")}nT("");function yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sT=yb,vb=new cc("auth","Firebase",yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Jm("@firebase/auth");function rT(r,...e){yd.logLevel<=Ze.WARN&&yd.warn(`Auth (${Il}): ${r}`,...e)}function id(r,...e){yd.logLevel<=Ze.ERROR&&yd.error(`Auth (${Il}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(r,...e){throw ng(r,...e)}function Ks(r,...e){return ng(r,...e)}function xb(r,e,s){const i={...sT(),[e]:s};return new cc("auth","Firebase",i).create(e,{appName:r.name})}function Tr(r){return xb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const s=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return vb.create(r,...e)}function Oe(r,e,...s){if(!r)throw ng(e,...s)}function wr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw id(e),new Error(e)}function Ar(r,e){r||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){return typeof self<"u"&&self.location?.href||""}function iT(){return kv()==="http:"||kv()==="https:"}function kv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iT()||Vw()||"connection"in navigator)?navigator.onLine:!0}function lT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ar(s>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||Lw()}get(){return aT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r,e){Ar(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static initialize(e,s,i){this.fetchImpl=e,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uT=new dc(3e4,6e4);function kr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Dr(r,e,s,i,o={}){return _b(r,o,async()=>{let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});const p=uc({key:r.config.apiKey,...f}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:v,...d};return Ow()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(y.credentials="include"),bb.fetch()(await wb(r,r.config.apiHost,s,p),y)})}async function _b(r,e,s){r._canInitEmulator=!1;const i={...oT,...e};try{const o=new hT(r),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Wu(r,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[v,y]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw Wu(r,"user-disabled",f);const _=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw xb(r,_,y);bs(r,_)}}catch(o){if(o instanceof Ir)throw o;bs(r,"network-request-failed",{message:String(o)})}}async function hc(r,e,s,i,o={}){const d=await Dr(r,e,s,i,o);return"mfaPendingCredential"in d&&bs(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function wb(r,e,s,i){const o=`${e}${s}?${i}`,d=r,f=d.config.emulator?sg(r.config,o):`${r.config.apiScheme}://${o}`;return cT.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function dT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(Ks(this.auth,"network-request-failed")),uT.get())})}}function Wu(r,e,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const o=Ks(r,e,i);return o.customData._tokenResponse=s,o}function Dv(r){return r!==void 0&&r.enterprise!==void 0}class fT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return dT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mT(r,e){return Dr(r,"GET","/v2/recaptchaConfig",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(r,e){return Dr(r,"POST","/v1/accounts:delete",e)}async function vd(r,e){return Dr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pT(r,e=!1){const s=Dt(r),i=await s.getIdToken(e),o=rg(i);Oe(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:i,authTime:Qo(hm(o.auth_time)),issuedAtTime:Qo(hm(o.iat)),expirationTime:Qo(hm(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function hm(r){return Number(r)*1e3}function rg(r){const[e,s,i]=r.split(".");if(e===void 0||s===void 0||i===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{const o=ib(s);return o?JSON.parse(o):(id("Failed to decode base64 JWT payload"),null)}catch(o){return id("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Mv(r){const e=rg(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(r,e,s=!1){if(s)return e;try{return await e}catch(i){throw i instanceof Ir&&yT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function yT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(r){const e=r.auth,s=await r.getIdToken(),i=await ec(r,vd(e,{idToken:s}));Oe(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const d=o.providerUserInfo?.length?Eb(o.providerUserInfo):[],f=bT(r.providerData,d),p=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!f?.length,y=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function xT(r){const e=Dt(r);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Eb(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(r,e){const s=await _b(r,{},async()=>{const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=r.config,f=await wb(r,o,"/v1/token",`key=${d}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:i};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(v.credentials="include"),bb.fetch()(f,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function wT(r,e){return Dr(r,"POST","/v2/accounts:revokeToken",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const s=Mv(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:i,refreshToken:o,expiresIn:d}=await _T(e,s);this.updateTokensAndExpiration(i,o,Number(d))}updateTokensAndExpiration(e,s,i){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,s){const{refreshToken:i,accessToken:o,expirationTime:d}=s,f=new xl;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Oe(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:s,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new vT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ec(this,this.stsTokenManager.getToken(this.auth,e));return Oe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return pT(this,e)}reload(){return xT(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),s&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await ec(this,gT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const i=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,v=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:T,emailVerified:N,isAnonymous:U,providerData:X,stsTokenManager:G}=s;Oe(T&&G,e,"internal-error");const Y=xl.fromJSON(this.name,G);Oe(typeof T=="string",e,"internal-error"),hi(i,e.name),hi(o,e.name),Oe(typeof N=="boolean",e,"internal-error"),Oe(typeof U=="boolean",e,"internal-error"),hi(d,e.name),hi(f,e.name),hi(p,e.name),hi(v,e.name),hi(y,e.name),hi(_,e.name);const he=new xs({uid:T,auth:e,email:o,emailVerified:N,displayName:i,isAnonymous:U,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:Y,createdAt:y,lastLoginAt:_});return X&&Array.isArray(X)&&(he.providerData=X.map(oe=>({...oe}))),v&&(he._redirectEventId=v),he}static async _fromIdTokenResponse(e,s,i=!1){const o=new xl;o.updateFromServerResponse(s);const d=new xs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xd(d),d}static async _fromGetAccountInfoResponse(e,s,i){const o=s.users[0];Oe(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?Eb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new xl;p.updateFromIdToken(i);const v=new xs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function Er(r){Ar(r instanceof Function,"Expected a class definition");let e=Ov.get(r);return e?(Ar(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ov.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Tb.type="NONE";const Vv=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(r,e,s){return`firebase:${r}:${e}:${s}`}class bl{constructor(e,s,i){this.persistence=e,this.auth=s,this.userKey=i;const{config:o,name:d}=this.auth;this.fullUserKey=ad(this.userKey,o.apiKey,d),this.fullPersistenceKey=ad("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await vd(this.auth,{idToken:e}).catch(()=>{});return s?xs._fromGetAccountInfoResponse(this.auth,s,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,i="authUser"){if(!s.length)return new bl(Er(Vv),e,i);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||Er(Vv);const f=ad(i,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let T;if(typeof _=="string"){const N=await vd(e,{idToken:_}).catch(()=>{});if(!N)break;T=await xs._fromGetAccountInfoResponse(e,N,_)}else T=xs._fromJSON(e,_);y!==d&&(p=T),d=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new bl(d,e,i):(d=v[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new bl(d,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rb(e))return"Blackberry";if(Ib(e))return"Webos";if(Nb(e))return"Safari";if((e.includes("chrome/")||Ab(e))&&!e.includes("edge/"))return"Chrome";if(Cb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function Sb(r=fn()){return/firefox\//i.test(r)}function Nb(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ab(r=fn()){return/crios\//i.test(r)}function jb(r=fn()){return/iemobile/i.test(r)}function Cb(r=fn()){return/android/i.test(r)}function Rb(r=fn()){return/blackberry/i.test(r)}function Ib(r=fn()){return/webos/i.test(r)}function ig(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ET(r=fn()){return ig(r)&&!!window.navigator?.standalone}function TT(){return Pw()&&document.documentMode===10}function kb(r=fn()){return ig(r)||Cb(r)||Ib(r)||Rb(r)||/windows phone/i.test(r)||jb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r,e=[]){let s;switch(r){case"Browser":s=Lv(fn());break;case"Worker":s=`${Lv(fn())}-${r}`;break;default:s=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const i=d=>new Promise((f,p)=>{try{const v=e(d);f(v)}catch(v){p(v)}});i.onAbort=s,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const i of this.queue)await i(e),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(r,e={}){return Dr(r,"GET","/v2/passwordPolicy",kr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=6;class jT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??AT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=e.length>=i),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,s,i,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,s,i,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new ST(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Er(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await vd(this,{idToken:e}),i=await xs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(es(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(Tr(this));const s=e?Dt(e):null;return s&&Oe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NT(this),s=new jT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,s,i){return this.registerStateListener(this.authStateSubscription,e,s,i)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,i){return this.registerStateListener(this.idTokenSubscription,e,s,i)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await wT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const i=await this.getOrInitRedirectPersistenceManager(s);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Er(e)||this._popupRedirectResolver;Oe(s,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Er(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,i,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,i,o);return()=>{f=!0,v()}}else{const v=e.addObserver(s);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ki(r){return Dt(r)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yw(s=>this.observer=s)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RT(r){Vd=r}function Mb(r){return Vd.loadJS(r)}function IT(){return Vd.recaptchaEnterpriseScript}function kT(){return Vd.gapiScript}function DT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class MT{constructor(){this.enterprise=new OT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class OT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const VT="recaptcha-enterprise",Ob="NO_RECAPTCHA";class LT{constructor(e){this.type=VT,this.auth=ki(e)}async verify(e="verify",s=!1){async function i(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{mT(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new fT(v);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(v=>{p(v)})})}function o(d,f,p){const v=window.grecaptcha;Dv(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(Ob)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{i(this.auth).then(p=>{if(!s&&Dv(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=IT();v.length!==0&&(v+=p),Mb(v).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Uv(r,e,s,i=!1,o=!1){const d=new LT(r);let f;if(o)f=Ob;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function bd(r,e,s,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Uv(r,e,s,s==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Uv(r,e,s,s==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(r,e){const s=tg(r,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(ya(d,e??{}))return o;bs(o,"already-initialized")}return s.initialize({options:e})}function UT(r,e){const s=e?.persistence||[],i=(Array.isArray(s)?s:[s]).map(Er);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function zT(r,e,s){const i=ki(r);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,d=Vb(e),{host:f,port:p}=BT(e),v=p===null?"":`:${p}`,y={url:`${d}//${f}${v}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(ya(y,i.config.emulator)&&ya(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Rl(f)?(cb(`${d}//${f}${v}`),ub("Auth",!0)):qT()}function Vb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function BT(r){const e=Vb(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const d=o[1];return{host:d,port:zv(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:zv(f)}}}function zv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function qT(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,s){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}async function HT(r,e){return Dr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(r,e){return hc(r,"POST","/v1/accounts:signInWithPassword",kr(r,e))}async function GT(r,e){return Dr(r,"POST","/v1/accounts:sendOobCode",kr(r,e))}async function YT(r,e){return GT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",kr(r,e))}async function QT(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends ag{constructor(e,s,i,o=null){super("password",i),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new tc(e,s,"password")}static _fromEmailAndCode(e,s,i=null){return new tc(e,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bd(e,s,"signInWithPassword",FT);case"emailLink":return KT(e,{email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bd(e,i,"signUpPassword",HT);case"emailLink":return QT(e,{idToken:s,email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(r,e){return hc(r,"POST","/v1/accounts:signInWithIdp",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="http://localhost";class xa extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):bs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...d}=s;if(!i||!o)return null;const f=new xa(i,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return _l(e,s)}_linkToIdToken(e,s){const i=this.buildRequest();return i.idToken=s,_l(e,i)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,_l(e,s)}buildRequest(){const e={requestUri:$T,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=uc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WT(r){const e=Bo(qo(r)).link,s=e?Bo(qo(e)).deep_link_id:null,i=Bo(qo(r)).deep_link_id;return(i?Bo(qo(i)).link:null)||i||s||e||r}class lg{constructor(e){const s=Bo(qo(e)),i=s.apiKey??null,o=s.oobCode??null,d=XT(s.mode??null);Oe(i&&o&&d,"argument-error"),this.apiKey=i,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=WT(e);try{return new lg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,s){return tc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const i=lg.parseLink(s);return Oe(i,"argument-error"),tc._fromEmailAndCode(e,i.code,i.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Lb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends fc{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return xa._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:i}=e;if(!s&&!i)return null;try{return gi.credential(s,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends fc{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends fc{constructor(){super("twitter.com")}static credential(e,s){return xa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=e;if(!s||!i)return null;try{return yi.credential(s,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(r,e){return hc(r,"POST","/v1/accounts:signUp",kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,i,o=!1){const d=await xs._fromIdTokenResponse(e,i,o),f=Bv(i);return new ba({user:d,providerId:f,_tokenResponse:i,operationType:s})}static async _forOperation(e,s,i){await e._updateTokensIfNecessary(i,!0);const o=Bv(i);return new ba({user:e,providerId:o,_tokenResponse:i,operationType:s})}}function Bv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Ir{constructor(e,s,i,o){super(s.code,s.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,s,i,o){return new _d(e,s,i,o)}}function Pb(r,e,s,i){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(r,d,e,i):d})}async function JT(r,e,s=!1){const i=await ec(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return ba._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e,s=!1){const{auth:i}=r;if(es(i.app))return Promise.reject(Tr(i));const o="reauthenticate";try{const d=await ec(r,Pb(i,o,e,r),s);Oe(d.idToken,i,"internal-error");const f=rg(d.idToken);Oe(f,i,"internal-error");const{sub:p}=f;return Oe(r.uid===p,i,"user-mismatch"),ba._forOperation(r,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&bs(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(r,e,s=!1){if(es(r.app))return Promise.reject(Tr(r));const i="signIn",o=await Pb(r,i,e),d=await ba._fromIdTokenResponse(r,i,o);return s||await r._updateCurrentUser(d.user),d}async function tS(r,e){return Ub(ki(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(r){const e=ki(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nS(r,e,s){const i=ki(r);await bd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",YT)}async function sS(r,e,s){if(es(r.app))return Promise.reject(Tr(r));const i=ki(r),f=await bd(i,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZT).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&zb(r),v}),p=await ba._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function rS(r,e,s){return es(r.app)?Promise.reject(Tr(r)):tS(Dt(r),kl.credential(e,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zb(r),i})}function iS(r,e,s,i){return Dt(r).onIdTokenChanged(e,s,i)}function aS(r,e,s){return Dt(r).beforeAuthStateChanged(e,s)}function lS(r,e,s,i){return Dt(r).onAuthStateChanged(e,s,i)}function oS(r){return Dt(r).signOut()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1e3,uS=10;class qb extends Bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),o=this.localCache[s];i!==o&&e(s,o,i)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,v)=>{this.notifyListeners(f,v)});return}const i=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!s&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);TT()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uS):o()}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:i}),!0)})},cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}qb.type="LOCAL";const dS=qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Hb.type="SESSION";const Fb=Hb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const i=new Ld(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:i,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),v=await hS(p);s.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(r="",e=10){let s="";for(let i=0;i<e;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,v)=>{const y=og("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(T){const N=T;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(N.data.response);break;default:clearTimeout(_),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}function mS(r){Qs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function gS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pS(){return navigator?.serviceWorker?.controller||null}function yS(){return Gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",vS=1,Ed="firebaseLocalStorage",Kb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Pd(r,e){return r.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function xS(){const r=indexedDB.deleteDatabase(Yb);return new mc(r).toPromise()}function Im(){const r=indexedDB.open(Yb,vS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ed,{keyPath:Kb})}catch(o){s(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ed)?e(i):(i.close(),await xS(),e(await Im()))})})}async function qv(r,e,s){const i=Pd(r,!0).put({[Kb]:e,value:s});return new mc(i).toPromise()}async function bS(r,e){const s=Pd(r,!1).get(e),i=await new mc(s).toPromise();return i===void 0?null:i.value}function Hv(r,e){const s=Pd(r,!0).delete(e);return new mc(s).toPromise()}const _S=800,wS=3;class Qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let s=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(s++>wS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(yS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gS(),!this.activeServiceWorker)return;this.sender=new fS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await qv(e,wd,"1"),await Hv(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>qv(i,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(i=>bS(i,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Pd(o,!1).getAll();return new mc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qb.type="LOCAL";const ES=Qb;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r,e){return e?Er(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _l(e,this._buildIdpRequest())}_linkToIdToken(e,s){return _l(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return _l(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function SS(r){return Ub(r.auth,new cg(r),r.bypassAuthState)}function NS(r){const{auth:e,user:s}=r;return Oe(s,e,"internal-error"),eS(s,new cg(r),r.bypassAuthState)}async function AS(r){const{auth:e,user:s}=r;return Oe(s,e,"internal-error"),JT(s,new cg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,s,i,o,d=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:i,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:s,sessionId:i,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SS;case"linkViaPopup":case"linkViaRedirect":return AS;case"reauthViaPopup":case"reauthViaRedirect":return NS;default:bs(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new dc(2e3,1e4);class vl extends $b{constructor(e,s,i,o,d){super(e,s,o,d),this.provider=i,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jS.get())};e()}}vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="pendingRedirect",ld=new Map;class RS extends $b{constructor(e,s,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const i=await IS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(s){e=()=>Promise.reject(s)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IS(r,e){const s=MS(e),i=DS(r);if(!await i._isAvailable())return!1;const o=await i._get(s)==="true";return await i._remove(s),o}function kS(r,e){ld.set(r._key(),e)}function DS(r){return Er(r._redirectPersistence)}function MS(r){return ad(CS,r.config.apiKey,r.name)}async function OS(r,e,s=!1){if(es(r.app))return Promise.reject(Tr(r));const i=ki(r),o=TS(i,e),f=await new RS(i,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=600*1e3;class LS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(s=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Xb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Ks(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const i=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Xb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function PS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(r,e={}){return Dr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BS=/^https?/;async function qS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await US(r);for(const s of e)try{if(HS(s))return}catch{}bs(r,"unauthorized-domain")}function HS(r){const e=Cm(),{protocol:s,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===i}if(!BS.test(s))return!1;if(zS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new dc(3e4,6e4);function Gv(){const r=Qs().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function GS(r){return new Promise((e,s)=>{function i(){Gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gv(),s(Ks(r,"network-request-failed"))},timeout:FS.get()})}if(Qs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qs().gapi?.load)i();else{const o=DT("iframefcb");return Qs()[o]=()=>{gapi.load?i():s(Ks(r,"network-request-failed"))},Mb(`${kT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw od=null,e})}let od=null;function YS(r){return od=od||GS(r),od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new dc(5e3,15e3),QS="__/auth/iframe",$S="emulator/auth/iframe",XS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZS(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?sg(e,$S):`https://${r.config.authDomain}/${QS}`,i={apiKey:e.apiKey,appName:r.name,v:Il},o=WS.get(r.config.apiHost);o&&(i.eid=o);const d=r._getFrameworks();return d.length&&(i.fw=d.join(",")),`${s}?${uc(i).slice(1)}`}async function JS(r){const e=await YS(r),s=Qs().gapi;return Oe(s,r,"internal-error"),e.open({where:document.body,url:ZS(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XS,dontclear:!0},i=>new Promise(async(o,d)=>{await i.restyle({setHideOnLeave:!1});const f=Ks(r,"network-request-failed"),p=Qs().setTimeout(()=>{d(f)},KS.get());function v(){Qs().clearTimeout(p),o(i)}i.ping(v).then(v,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tN=500,nN=600,sN="_blank",rN="http://localhost";class Yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iN(r,e,s,i=tN,o=nN){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const v={...eN,width:i.toString(),height:o.toString(),top:d,left:f},y=fn().toLowerCase();s&&(p=Ab(y)?sN:s),Sb(y)&&(e=e||rN,v.scrollbars="yes");const _=Object.entries(v).reduce((N,[U,X])=>`${N}${U}=${X},`,"");if(ET(y)&&p!=="_self")return aN(e||"",p),new Yv(null);const T=window.open(e||"",p,_);Oe(T,r,"popup-blocked");try{T.focus()}catch{}return new Yv(T)}function aN(r,e){const s=document.createElement("a");s.href=r,s.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="__/auth/handler",oN="emulator/auth/handler",cN=encodeURIComponent("fac");async function Kv(r,e,s,i,o,d){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Il,eventId:o};if(e instanceof Lb){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Gw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))f[_]=T}if(e instanceof fc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await r._getAppCheckToken(),y=v?`#${cN}=${encodeURIComponent(v)}`:"";return`${uN(r)}?${uc(p).slice(1)}${y}`}function uN({config:r}){return r.emulator?sg(r,oN):`https://${r.authDomain}/${lN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class dN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fb,this._completeRedirectFn=OS,this._overrideRedirectResult=kS}async _openPopup(e,s,i,o){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Kv(e,s,i,Cm(),o);return iN(e,d,og())}async _openRedirect(e,s,i,o){await this._originValidation(e);const d=await Kv(e,s,i,Cm(),o);return mS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Ar(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(e);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(e){const s=await JS(e),i=new LS(e);return s.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=s,i}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(fm,{type:fm},o=>{const d=o?.[0]?.[fm];d!==void 0&&s(!!d),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=qS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return kb()||Nb()||ig()}}const hN=dN;var Qv="@firebase/auth",$v="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gN(r){El(new va("auth",(e,{options:s})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;Oe(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Db(r)},y=new CT(i,o,d,v);return UT(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,i)=>{e.getProvider("auth-internal").initialize()})),El(new va("auth-internal",e=>{const s=ki(e.getProvider("auth").getImmediate());return(i=>new fN(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(Qv,$v,mN(r)),_i(Qv,$v,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=300,yN=ob("authIdTokenMaxAge")||pN;let Xv=null;const vN=r=>async e=>{const s=e&&await e.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>yN)return;const o=s?.token;Xv!==o&&(Xv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xN(r=mb()){const e=tg(r,"auth");if(e.isInitialized())return e.getImmediate();const s=PT(r,{popupRedirectResolver:hN,persistence:[ES,dS,Fb]}),i=ob("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(i,location.origin);if(location.origin===d.origin){const f=vN(d.toString());aS(s,f,()=>f(s.currentUser)),iS(s,p=>f(p))}}const o=ab("auth");return o&&zT(s,`http://${o}`),s}function bN(){return document.getElementsByTagName("head")?.[0]??document}RT({loadJS(r){return new Promise((e,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const d=Ks("internal-error");d.customData=o,s(d)},i.type="text/javascript",i.charset="UTF-8",bN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gN("Browser");var _N="firebase",wN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(_N,wN,"app");var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,Wb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function A(){}A.prototype=w.prototype,R.F=w.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(C,j,k){for(var I=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)I[ce-2]=arguments[ce];return w.prototype[j].apply(C,I)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,A){A||(A=0);const C=Array(16);if(typeof w=="string")for(var j=0;j<16;++j)C[j]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(j=0;j<16;++j)C[j]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=R.g[0],A=R.g[1],j=R.g[2];let k=R.g[3],I;I=w+(k^A&(j^k))+C[0]+3614090360&4294967295,w=A+(I<<7&4294967295|I>>>25),I=k+(j^w&(A^j))+C[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(A^k&(w^A))+C[2]+606105819&4294967295,j=k+(I<<17&4294967295|I>>>15),I=A+(w^j&(k^w))+C[3]+3250441966&4294967295,A=j+(I<<22&4294967295|I>>>10),I=w+(k^A&(j^k))+C[4]+4118548399&4294967295,w=A+(I<<7&4294967295|I>>>25),I=k+(j^w&(A^j))+C[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(A^k&(w^A))+C[6]+2821735955&4294967295,j=k+(I<<17&4294967295|I>>>15),I=A+(w^j&(k^w))+C[7]+4249261313&4294967295,A=j+(I<<22&4294967295|I>>>10),I=w+(k^A&(j^k))+C[8]+1770035416&4294967295,w=A+(I<<7&4294967295|I>>>25),I=k+(j^w&(A^j))+C[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(A^k&(w^A))+C[10]+4294925233&4294967295,j=k+(I<<17&4294967295|I>>>15),I=A+(w^j&(k^w))+C[11]+2304563134&4294967295,A=j+(I<<22&4294967295|I>>>10),I=w+(k^A&(j^k))+C[12]+1804603682&4294967295,w=A+(I<<7&4294967295|I>>>25),I=k+(j^w&(A^j))+C[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=j+(A^k&(w^A))+C[14]+2792965006&4294967295,j=k+(I<<17&4294967295|I>>>15),I=A+(w^j&(k^w))+C[15]+1236535329&4294967295,A=j+(I<<22&4294967295|I>>>10),I=w+(j^k&(A^j))+C[1]+4129170786&4294967295,w=A+(I<<5&4294967295|I>>>27),I=k+(A^j&(w^A))+C[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^A&(k^w))+C[11]+643717713&4294967295,j=k+(I<<14&4294967295|I>>>18),I=A+(k^w&(j^k))+C[0]+3921069994&4294967295,A=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(A^j))+C[5]+3593408605&4294967295,w=A+(I<<5&4294967295|I>>>27),I=k+(A^j&(w^A))+C[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^A&(k^w))+C[15]+3634488961&4294967295,j=k+(I<<14&4294967295|I>>>18),I=A+(k^w&(j^k))+C[4]+3889429448&4294967295,A=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(A^j))+C[9]+568446438&4294967295,w=A+(I<<5&4294967295|I>>>27),I=k+(A^j&(w^A))+C[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^A&(k^w))+C[3]+4107603335&4294967295,j=k+(I<<14&4294967295|I>>>18),I=A+(k^w&(j^k))+C[8]+1163531501&4294967295,A=j+(I<<20&4294967295|I>>>12),I=w+(j^k&(A^j))+C[13]+2850285829&4294967295,w=A+(I<<5&4294967295|I>>>27),I=k+(A^j&(w^A))+C[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=j+(w^A&(k^w))+C[7]+1735328473&4294967295,j=k+(I<<14&4294967295|I>>>18),I=A+(k^w&(j^k))+C[12]+2368359562&4294967295,A=j+(I<<20&4294967295|I>>>12),I=w+(A^j^k)+C[5]+4294588738&4294967295,w=A+(I<<4&4294967295|I>>>28),I=k+(w^A^j)+C[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^A)+C[11]+1839030562&4294967295,j=k+(I<<16&4294967295|I>>>16),I=A+(j^k^w)+C[14]+4259657740&4294967295,A=j+(I<<23&4294967295|I>>>9),I=w+(A^j^k)+C[1]+2763975236&4294967295,w=A+(I<<4&4294967295|I>>>28),I=k+(w^A^j)+C[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^A)+C[7]+4139469664&4294967295,j=k+(I<<16&4294967295|I>>>16),I=A+(j^k^w)+C[10]+3200236656&4294967295,A=j+(I<<23&4294967295|I>>>9),I=w+(A^j^k)+C[13]+681279174&4294967295,w=A+(I<<4&4294967295|I>>>28),I=k+(w^A^j)+C[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^A)+C[3]+3572445317&4294967295,j=k+(I<<16&4294967295|I>>>16),I=A+(j^k^w)+C[6]+76029189&4294967295,A=j+(I<<23&4294967295|I>>>9),I=w+(A^j^k)+C[9]+3654602809&4294967295,w=A+(I<<4&4294967295|I>>>28),I=k+(w^A^j)+C[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=j+(k^w^A)+C[15]+530742520&4294967295,j=k+(I<<16&4294967295|I>>>16),I=A+(j^k^w)+C[2]+3299628645&4294967295,A=j+(I<<23&4294967295|I>>>9),I=w+(j^(A|~k))+C[0]+4096336452&4294967295,w=A+(I<<6&4294967295|I>>>26),I=k+(A^(w|~j))+C[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~A))+C[14]+2878612391&4294967295,j=k+(I<<15&4294967295|I>>>17),I=A+(k^(j|~w))+C[5]+4237533241&4294967295,A=j+(I<<21&4294967295|I>>>11),I=w+(j^(A|~k))+C[12]+1700485571&4294967295,w=A+(I<<6&4294967295|I>>>26),I=k+(A^(w|~j))+C[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~A))+C[10]+4293915773&4294967295,j=k+(I<<15&4294967295|I>>>17),I=A+(k^(j|~w))+C[1]+2240044497&4294967295,A=j+(I<<21&4294967295|I>>>11),I=w+(j^(A|~k))+C[8]+1873313359&4294967295,w=A+(I<<6&4294967295|I>>>26),I=k+(A^(w|~j))+C[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~A))+C[6]+2734768916&4294967295,j=k+(I<<15&4294967295|I>>>17),I=A+(k^(j|~w))+C[13]+1309151649&4294967295,A=j+(I<<21&4294967295|I>>>11),I=w+(j^(A|~k))+C[4]+4149444226&4294967295,w=A+(I<<6&4294967295|I>>>26),I=k+(A^(w|~j))+C[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=j+(w^(k|~A))+C[2]+718787259&4294967295,j=k+(I<<15&4294967295|I>>>17),I=A+(k^(j|~w))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+k&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const A=w-this.blockSize,C=this.C;let j=this.h,k=0;for(;k<w;){if(j==0)for(;k<=A;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(C[j++]=R.charCodeAt(k++),j==this.blockSize){o(this,C),j=0;break}}else for(;k<w;)if(C[j++]=R[k++],j==this.blockSize){o(this,C),j=0;break}}this.h=j,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)R[w++]=this.g[A]>>>C&255;return R};function d(R,w){var A=p;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=w(R)}function f(R,w){this.h=w;const A=[];let C=!0;for(let j=R.length-1;j>=0;j--){const k=R[j]|0;C&&k==w||(A[j]=k,C=!1)}this.g=A}var p={};function v(R){return-128<=R&&R<128?d(R,function(w){return new f([w|0],w<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return Y(y(-R));const w=[];let A=1;for(let C=0;R>=A;C++)w[C]=R/A|0,A*=4294967296;return new f(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return Y(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(w,8));let C=T;for(let k=0;k<R.length;k+=8){var j=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+j),w);j<8?(j=y(Math.pow(w,j)),C=C.j(j).add(y(I))):(C=C.j(A),C=C.add(y(I)))}return C}var T=v(0),N=v(1),U=v(16777216);r=f.prototype,r.m=function(){if(G(this))return-Y(this).m();let R=0,w=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);R+=(C>=0?C:4294967296+C)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(X(this))return"0";if(G(this))return"-"+Y(this).toString(R);const w=y(Math.pow(R,6));var A=this;let C="";for(;;){const j=ye(A,w).g;A=he(A,j.j(w));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=j,X(A))return k+C;for(;k.length<6;)k="0"+k;C=k+C}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function X(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function G(R){return R.h==-1}r.l=function(R){return R=he(this,R),G(R)?-1:X(R)?0:1};function Y(R){const w=R.g.length,A=[];for(let C=0;C<w;C++)A[C]=~R.g[C];return new f(A,~R.h).add(N)}r.abs=function(){return G(this)?Y(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),A=[];let C=0;for(let j=0;j<=w;j++){let k=C+(this.i(j)&65535)+(R.i(j)&65535),I=(k>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);C=I>>>16,k&=65535,I&=65535,A[j]=I<<16|k}return new f(A,A[A.length-1]&-2147483648?-1:0)};function he(R,w){return R.add(Y(w))}r.j=function(R){if(X(this)||X(R))return T;if(G(this))return G(R)?Y(this).j(Y(R)):Y(Y(this).j(R));if(G(R))return Y(this.j(Y(R)));if(this.l(U)<0&&R.l(U)<0)return y(this.m()*R.m());const w=this.g.length+R.g.length,A=[];for(var C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let j=0;j<R.g.length;j++){const k=this.i(C)>>>16,I=this.i(C)&65535,ce=R.i(j)>>>16,ke=R.i(j)&65535;A[2*C+2*j]+=I*ke,oe(A,2*C+2*j),A[2*C+2*j+1]+=k*ke,oe(A,2*C+2*j+1),A[2*C+2*j+1]+=I*ce,oe(A,2*C+2*j+1),A[2*C+2*j+2]+=k*ce,oe(A,2*C+2*j+2)}for(R=0;R<w;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=w;R<2*w;R++)A[R]=0;return new f(A,0)};function oe(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function ve(R,w){this.g=R,this.h=w}function ye(R,w){if(X(w))throw Error("division by zero");if(X(R))return new ve(T,T);if(G(R))return w=ye(Y(R),w),new ve(Y(w.g),Y(w.h));if(G(w))return w=ye(R,Y(w)),new ve(Y(w.g),w.h);if(R.g.length>30){if(G(R)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var A=N,C=w;C.l(R)<=0;)A=Se(A),C=Se(C);var j=xe(A,1),k=xe(C,1);for(C=xe(C,2),A=xe(A,2);!X(C);){var I=k.add(C);I.l(R)<=0&&(j=j.add(A),k=I),C=xe(C,1),A=xe(A,1)}return w=he(R,j.j(w)),new ve(j,w)}for(j=T;R.l(w)>=0;){for(A=Math.max(1,Math.floor(R.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),k=y(A),I=k.j(w);G(I)||I.l(R)>0;)A-=C,k=y(A),I=k.j(w);X(k)&&(k=N),j=j.add(k),R=he(R,I)}return new ve(j,R)}r.B=function(R){return ye(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)&R.i(C);return new f(A,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)|R.i(C);return new f(A,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)^R.i(C);return new f(A,this.h^R.h)};function Se(R){const w=R.g.length+1,A=[];for(let C=0;C<w;C++)A[C]=R.i(C)<<1|R.i(C-1)>>>31;return new f(A,R.h)}function xe(R,w){const A=w>>5;w%=32;const C=R.g.length-A,j=[];for(let k=0;k<C;k++)j[k]=w>0?R.i(k+A)>>>w|R.i(k+A+1)<<32-w:R.i(k+A);return new f(j,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Wb=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,wi=f}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zb,Ho,Jb,cd,km,e_,t_,n_;(function(){var r,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function o(u,g){if(g)e:{var b=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in b))break e;b=b[z]}u=u[u.length-1],S=b[u],g=g(S),g!=S&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.push([S,g[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=v,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,z,Q){for(var pe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)pe[qe-2]=arguments[qe];return g.prototype[z].apply(S,pe)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const b=Array(g);for(let S=0;S<g;S++)b[S]=u[S];return b}return[]}function X(u,g){for(let S=1;S<arguments.length;S++){const z=arguments[S];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=u.length||0;const Q=z.length||0;u.length=b+Q;for(let pe=0;pe<Q;pe++)u[b+pe]=z[pe]}else u.push(z)}}class G{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Y(u){f.setTimeout(()=>{throw u},0)}function he(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,b){const S=ve.get();S.set(g,b),this.h?this.h.next=S:this.g=S,this.h=S}}var ve=new G(()=>new ye,u=>u.reset());class ye{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,xe=!1,R=new oe,w=()=>{const u=Promise.resolve(void 0);Se=()=>{u.then(A)}};function A(){for(var u;u=he();){try{u.h.call(u.g)}catch(b){Y(b)}var g=ve;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}xe=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function ce(u,g){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(ce,j),ce.prototype.init=function(u,g){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),K=0;function fe(u,g,b,S,z){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!S,this.ha=z,this.key=++K,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Be(u,g,b){for(const S in u)g.call(b,u[S],S,u)}function Ye(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function M(u){const g={};for(const b in u)g[b]=u[b];return g}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(u,g){let b,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(b in S)u[b]=S[b];for(let Q=0;Q<J.length;Q++)b=J[Q],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function L(u){this.src=u,this.g={},this.h=0}L.prototype.add=function(u,g,b,S,z){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const pe=te(u,g,S,z);return pe>-1?(g=u[pe],b||(g.fa=!1)):(g=new fe(g,this.src,Q,!!S,z),g.fa=b,u.push(g)),g};function V(u,g){const b=g.type;if(b in u.g){var S=u.g[b],z=Array.prototype.indexOf.call(S,g,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(S,z,1),Q&&(_e(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function te(u,g,b,S){for(let z=0;z<u.length;++z){const Q=u[z];if(!Q.da&&Q.listener==g&&Q.capture==!!b&&Q.ha==S)return z}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),Ce={};function Me(u,g,b,S,z){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)Me(u,g[Q],b,S,z);return null}return b=je(b),u&&u[ke]?u.J(g,b,p(S)?!!S.capture:!1,z):Z(u,g,b,!1,S,z)}function Z(u,g,b,S,z,Q){if(!g)throw Error("Invalid event type");const pe=p(z)?!!z.capture:!!z;let qe=we(u);if(qe||(u[ue]=qe=new L(u)),b=qe.add(g,b,S,pe,Q),b.proxy)return b;if(S=Ee(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)k||(z=pe),z===void 0&&(z=!1),u.addEventListener(g.toString(),S,z);else if(u.attachEvent)u.attachEvent(ie(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ee(){function u(b){return g.call(u.src,u.listener,b)}const g=ae;return u}function de(u,g,b,S,z){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)de(u,g[Q],b,S,z);else S=p(S)?!!S.capture:!!S,b=je(b),u&&u[ke]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],b=te(g,b,S,z),b>-1&&(_e(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=we(u))&&(g=u.g[g.toString()],u=-1,g&&(u=te(g,b,S,z)),(b=u>-1?g[u]:null)&&H(b))}function H(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ke])V(g.i,u);else{var b=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(b,S,u.capture):g.detachEvent?g.detachEvent(ie(b),S):g.addListener&&g.removeListener&&g.removeListener(S),(b=we(g))?(V(b,u),b.h==0&&(b.src=null,g[ue]=null)):_e(u)}}}function ie(u){return u in Ce?Ce[u]:Ce[u]="on"+u}function ae(u,g){if(u.da)u=!0;else{g=new ce(g,this);const b=u.listener,S=u.ha||u.src;u.fa&&H(u),u=b.call(S,g)}return u}function we(u){return u=u[ue],u instanceof L?u:null}var ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(u){return typeof u=="function"?u:(u[ge]||(u[ge]=function(g){return u.handleEvent(g)}),u[ge])}function Ke(){C.call(this),this.i=new L(this),this.M=this,this.G=null}T(Ke,C),Ke.prototype[ke]=!0,Ke.prototype.removeEventListener=function(u,g,b,S){de(this,u,g,b,S)};function pt(u,g){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new j(g,u);else if(g instanceof j)g.target=g.target||u;else{var z=g;g=new j(S,u),me(g,z)}z=!0;let Q,pe;if(b)for(pe=b.length-1;pe>=0;pe--)Q=g.g=b[pe],z=mn(Q,S,!0,g)&&z;if(Q=g.g=u,z=mn(Q,S,!0,g)&&z,z=mn(Q,S,!1,g)&&z,b)for(pe=0;pe<b.length;pe++)Q=g.g=b[pe],z=mn(Q,S,!1,g)&&z}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let S=0;S<b.length;S++)_e(b[S]);delete u.g[g],u.h--}}this.G=null},Ke.prototype.J=function(u,g,b,S){return this.i.add(String(u),g,!1,b,S)},Ke.prototype.K=function(u,g,b,S){return this.i.add(String(u),g,!0,b,S)};function mn(u,g,b,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let Q=0;Q<g.length;++Q){const pe=g[Q];if(pe&&!pe.da&&pe.capture==b){const qe=pe.listener,jt=pe.ha||pe.src;pe.fa&&V(u.i,pe),z=qe.call(jt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Pl(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Vi(u){u.g=Pl(()=>{u.g=null,u.i&&(u.i=!1,Vi(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Qt extends C{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(u){C.call(this),this.h=u,this.g={}}T(tr,C);var nr=[];function Mr(u){Be(u.g,function(g,b){this.g.hasOwnProperty(b)&&H(g)},u),u.g={}}tr.prototype.N=function(){tr.Z.N.call(this),Mr(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=f.JSON.stringify,Un=f.JSON.parse,Sa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Tc(){}function Sc(){}var rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){j.call(this,"d")}T(Jt,j);function zn(){j.call(this,"c")}T(zn,j);var At={},Nc=null;function Na(){return Nc=Nc||new Ke}At.Ia="serverreachability";function Ac(u){j.call(this,At.Ia,u)}T(Ac,j);function Ts(u){const g=Na();pt(g,new Ac(g))}At.STAT_EVENT="statevent";function Li(u,g){j.call(this,At.STAT_EVENT,u),this.stat=g}T(Li,j);function Mt(u){const g=Na();pt(g,new Li(g,u))}At.Ja="timingevent";function Ss(u,g){j.call(this,At.Ja,u),this.size=g}T(Ss,j);function Ns(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function rh(u,g,b,S,z,Q){u.info(function(){if(u.g)if(Q){var pe="",qe=Q.split("&");for(let it=0;it<qe.length;it++){var jt=qe[it].split("=");if(jt.length>1){const _t=jt[0];jt=jt[1];const Fn=_t.split("_");pe=Fn.length>=2&&Fn[1]=="type"?pe+(_t+"="+jt+"&"):pe+(_t+"=redacted&")}}}else pe=null;else pe=Q;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+g+`
`+b+`
`+pe})}function jc(u,g,b,S,z,Q,pe){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+g+`
`+b+`
`+Q+" "+pe})}function As(u,g,b,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ih(u,b)+(S?" "+S:"")})}function Pi(u,g){u.info(function(){return"TIMEOUT: "+g})}is.prototype.info=function(){};function ih(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var b=Q[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let pe=1;pe<S.length;pe++)S[pe]=""}}}}return Es(Q)}catch{return g}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zl;function zi(){}T(zi,Tc),zi.prototype.g=function(){return new XMLHttpRequest},zl=new zi;function sr(u){return encodeURIComponent(String(u))}function Cc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function as(u,g,b,S){this.j=u,this.i=g,this.l=b,this.S=S||1,this.V=new tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}var Ot={},$t={};function js(u,g,b){u.M=1,u.A=Bi(Lt(g)),u.u=b,u.R=!0,Aa(u,null)}function Aa(u,g){u.F=Date.now(),Cs(u),u.B=Lt(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ia(b.i,"t",S),u.C=0,b=u.j.L,u.h=new ls,u.g=Fc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Qt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,S=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(nr[0]=z.toString()),z=nr);for(let Q=0;Q<z.length;Q++){const pe=Me(b,z[Q],S||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ts(),rh(u.i,u.v,u.B,u.l,u.S,u.u)}as.prototype.ba=function(u){u=u.target;const g=this.O;g&&us(u)==3?g.j():this.Y(u)},as.prototype.Y=function(u){try{if(u==this.g)e:{const qe=us(this.g),jt=this.g.ya(),it=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||qe!=4||jt==7||(jt==8||it<=0?Ts(3):Ts(2)),Rs(this);var g=this.g.ca();this.X=g;var b=ah(this);if(this.o=g==200,jc(this.i,this.v,this.B,this.l,this.S,qe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var Q=S;break t}}Q=null}if(u=Q)As(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Is(this,u);else{this.o=!1,this.m=3,Mt(12),jn(this),Bn(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<b.length;)if(_t=Ic(this,b),_t==$t){qe==4&&(this.m=4,Mt(14),u=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Mt(15),As(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else As(this.i,this.l,_t,null),Is(this,_t);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||b.length!=0||this.h.h||(this.m=1,Mt(16),u=!1),this.o=this.o&&u,!u)As(this.i,this.l,b,"[Invalid Chunked Response]"),jn(this),Bn(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),to(pe),pe.P=!0,Mt(11))}}else As(this.i,this.l,b,null),Is(this,b);qe==4&&jn(this),this.o&&!this.K&&(qe==4?zc(this.j,this):(this.o=!1,Cs(this)))}else ir(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),jn(this),Bn(this)}}}catch{}finally{}};function ah(u){if(!Rc(u))return u.g.la();const g=en(u.g);if(g==="")return"";let b="";const S=g.length,z=us(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return jn(u),Bn(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<S;Q++)u.h.h=!0,b+=u.h.i.decode(g[Q],{stream:!(z&&Q==S-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Rc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ic(u,g){var b=u.C,S=g.indexOf(`
`,b);return S==-1?$t:(b=Number(g.substring(b,S)),isNaN(b)?Ot:(S+=1,S+b>g.length?$t:(g=g.slice(S,S+b),u.C=S+b,g)))}as.prototype.cancel=function(){this.K=!0,jn(this)};function Cs(u){u.T=Date.now()+u.H,ja(u,u.H)}function ja(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ns(y(u.aa,u),g)}function Rs(u){u.D&&(f.clearTimeout(u.D),u.D=null)}as.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(Ts(),Mt(17)),jn(this),this.m=2,Bn(this)):ja(this,this.T-u)};function Bn(u){u.j.I==0||u.K||zc(u.j,u)}function jn(u){Rs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Mr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Is(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ds(b.h,u))){if(!u.L&&Ds(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Va(b),qr(b);else break e;Qi(b),Mt(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ns(y(b.Va,b),6e3));ks(b.h)<=1&&b.ta&&(b.ta=void 0)}else Us(b,11)}else if((u.L||b.g==u)&&Va(b),!I(g))for(z=b.Ba.g.parse(g),g=0;g<z.length;g++){let it=z[g];const _t=it[0];if(!(_t<=b.K))if(b.K=_t,it=it[1],b.I==2)if(it[0]=="c"){b.M=it[1],b.ba=it[2];const Fn=it[3];Fn!=null&&(b.ka=Fn,b.j.info("VER="+b.ka));const zs=it[4];zs!=null&&(b.za=zs,b.j.info("SVER="+b.za));const ds=it[5];ds!=null&&typeof ds=="number"&&ds>0&&(S=1.5*ds,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const hs=u.g;if(hs){const $i=hs.g?hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var Q=S.h;Q.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Hl(Q,Q.h),Q.h=null))}if(S.G){const La=hs.g?hs.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,ot(S.J,S.G,La))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var pe=u;if(S.na=Hc(S,S.L?S.ba:null,S.W),pe.L){Fl(S.h,pe);var qe=pe,jt=S.O;jt&&(qe.H=jt),qe.D&&(Rs(qe),Cs(qe)),S.g=pe}else Pc(S);b.i.length>0&&Ps(b)}else it[0]!="stop"&&it[0]!="close"||Us(b,7);else b.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Us(b,7):Jl(b):it[0]!="noop"&&b.l&&b.l.qa(it),b.A=0)}}Ts(4)}catch{}}var Vt=class{constructor(u,g){this.g=u,this.map=g}};function Bl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ql(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ks(u){return u.h?1:u.g?u.g.size:0}function Ds(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Hl(u,g){u.g?u.g.add(g):u.h=g}function Fl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return U(u.i)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let z,Q=null;S>=0?(z=u[b].substring(0,S),Q=u[b].substring(S+1)):z=u[b],g(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Cn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Cn?(this.l=u.l,Xt(this,u.j),this.o=u.o,this.g=u.g,Or(this,u.u),this.h=u.h,Yl(this,Vc(u.i)),this.m=u.m):u&&(g=String(u).match(kc))?(this.l=!1,Xt(this,g[1]||"",!0),this.o=Ms(g[2]||""),this.g=Ms(g[3]||"",!0),Or(this,g[4]),this.h=Ms(g[5]||"",!0),Yl(this,g[6]||"",!0),this.m=Ms(g[7]||"")):(this.l=!1,this.i=new Lr(null,this.l))}Cn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(qi(g,Ra,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(qi(g,Ra,!0),"@"),u.push(sr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(qi(b,b.charAt(0)=="/"?Kl:Dc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",qi(b,Mc)),u.join("")},Cn.prototype.resolve=function(u){const g=Lt(this);let b=!!u.j;b?Xt(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var S=u.h;if(b)Or(g,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=g.h.lastIndexOf("/");z!=-1&&(S=g.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let pe=0;pe<z.length;){const qe=z[pe++];qe=="."?S&&pe==z.length&&Q.push(""):qe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&pe==z.length&&Q.push("")):(Q.push(qe),S=!0)}S=Q.join("/")}else S=z}return b?g.h=S:b=u.i.toString()!=="",b?Yl(g,Vc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Lt(u){return new Cn(u)}function Xt(u,g,b){u.j=b?Ms(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Or(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Yl(u,g,b){g instanceof Lr?(u.i=g,ka(u.i,u.l)):(b||(g=qi(g,Vr)),u.i=new Lr(g,u.l))}function ot(u,g,b){u.i.set(g,b)}function Bi(u){return ot(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qi(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,vn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ra=/[#\/\?@]/g,Dc=/[#\?:]/g,Kl=/[#\?]/g,Vr=/[#\?@]/g,Mc=/#/g;function Lr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function xn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ca(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=Lr.prototype,r.add=function(u,g){xn(this),this.i=null,u=Pr(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Oc(u,g){xn(u),g=Pr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ql(u,g){return xn(u),g=Pr(u,g),u.g.has(g)}r.forEach=function(u,g){xn(this),this.g.forEach(function(b,S){b.forEach(function(z){u.call(g,z,S,this)},this)},this)};function $l(u,g){xn(u);let b=[];if(typeof g=="string")Ql(u,g)&&(b=b.concat(u.g.get(Pr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return xn(this),this.i=null,u=Pr(this,u),Ql(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=$l(this,u),u.length>0?String(u[0]):g):g};function Ia(u,g,b){Oc(u,g),b.length>0&&(u.i=null,u.g.set(Pr(u,g),U(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var b=g[S];const z=sr(b);b=$l(this,b);for(let Q=0;Q<b.length;Q++){let pe=z;b[Q]!==""&&(pe+="="+sr(b[Q])),u.push(pe)}}return this.i=u.join("&")};function Vc(u){const g=new Lr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Pr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ka(u,g){g&&!u.j&&(xn(u),u.i=null,u.g.forEach(function(b,S){const z=S.toLowerCase();S!=z&&(Oc(this,S),Ia(this,z,b))},u)),u.j=g}function os(u,g){const b=new is;if(f.Image){const S=new Image;S.onload=_(qn,b,"TestLoadImage: loaded",!0,g,S),S.onerror=_(qn,b,"TestLoadImage: error",!1,g,S),S.onabort=_(qn,b,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(qn,b,"TestLoadImage: timeout",!1,g,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Xl(u,g){const b=new is,S=new AbortController,z=setTimeout(()=>{S.abort(),qn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(Q=>{clearTimeout(z),Q.ok?qn(b,"TestPingServer: ok",!0,g):qn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),qn(b,"TestPingServer: error",!1,g)})}function qn(u,g,b,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(b)}catch{}}function Ur(){this.g=new Sa}function Os(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Os,Tc),Os.prototype.g=function(){return new Hi(this.i,this.h)};function Hi(u,g){Ke.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Hi,Ke),r=Hi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,cs(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Da(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Da(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?zr(this):cs(this),this.readyState==3&&Da(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,zr(this))},r.Na=function(u){this.g&&(this.response=u,zr(this))},r.ga=function(){this.g&&zr(this)};function zr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,cs(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function cs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hn(u){let g="";return Be(u,function(b,S){g+=S,g+=":",g+=b,g+=`\r
`}),g}function Fi(u,g,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Hn(b),typeof u=="string"?b!=null&&sr(b):ot(u,g,b))}function dt(u){Ke.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(dt,Ke);var Vs=/^https?$/i,Wl=["POST","PUT"];r=dt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zl.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){Gi(this,Q);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)b.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())b.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Wl,g,void 0)>=0)||S||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,pe]of b)this.g.setRequestHeader(Q,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Gi(this,Q)}};function Gi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Zl(u),rr(u)}function Zl(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,pt(this,"complete"),pt(this,"abort"),rr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},r.Xa=function(){Yi(this)};function Yi(u){if(u.h&&typeof d<"u"){if(u.v&&us(u)==4)setTimeout(u.Ca.bind(u),0);else if(pt(u,"readystatechange"),us(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var S;if(S=Q===0){let pe=String(u.D).match(kc)[1]||null;!pe&&f.self&&f.self.location&&(pe=f.self.location.protocol.slice(0,-1)),S=!Vs.test(pe?pe.toLowerCase():"")}b=S}if(b)pt(u,"complete"),pt(u,"success");else{u.o=6;try{var z=us(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",Zl(u)}}finally{rr(u)}}}}function rr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||pt(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function us(u){return u.g?u.g.readyState:0}r.ca=function(){try{return us(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Un(g)}};function en(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ir(u){const g={};u=(u.g&&us(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(I(u[S]))continue;var b=Cc(u[S]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=g[z]||[];g[z]=Q,Q.push(b)}Ye(g,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Br(u){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ls("baseRetryDelayMs",5e3,u),this.Za=Ls("retryDelaySeedMs",1e4,u),this.Ta=Ls("forwardChannelMaxRetries",2,u),this.va=Ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bl(u&&u.concurrentRequestLimit),this.Ba=new Ur,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Br.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,S){Mt(0),this.W=u,this.H=g||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Hc(this,null,this.W),Ps(this)};function Jl(u){if(Ma(u),u.I==3){var g=u.V++,b=Lt(u.J);if(ot(b,"SID",u.M),ot(b,"RID",g),ot(b,"TYPE","terminate"),Ki(u,b),g=new as(u,u.j,g),g.M=2,g.A=Bi(Lt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Fc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Cs(g)}qc(u)}function qr(u){u.g&&(to(u),u.g.cancel(),u.g=null)}function Ma(u){qr(u),u.v&&(f.clearTimeout(u.v),u.v=null),Va(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ps(u){if(!ql(u.h)&&!u.m){u.m=!0;var g=u.Ea;Se||w(),xe||(Se(),xe=!0),R.add(g,u),u.D=0}}function Oa(u,g){return ks(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ns(y(u.Ea,u,g),Bc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new as(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=M(Q),me(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Lc(this,z,g),b=Lt(this.J),ot(b,"RID",u),ot(b,"CVER",22),this.G&&ot(b,"X-HTTP-Session-Id",this.G),Ki(this,b),Q&&(this.R?g="headers="+sr(Hn(Q))+"&"+g:this.u&&Fi(b,this.u,Q)),Hl(this.h,z),this.Ra&&ot(b,"TYPE","init"),this.S?(ot(b,"$req",g),ot(b,"SID","null"),z.U=!0,js(z,b,null)):js(z,b,g),this.I=2}}else this.I==3&&(u?eo(this,u):this.i.length==0||ql(this.h)||eo(this))};function eo(u,g){var b;g?b=g.l:b=u.V++;const S=Lt(u.J);ot(S,"SID",u.M),ot(S,"RID",b),ot(S,"AID",u.K),Ki(u,S),u.u&&u.o&&Fi(S,u.u,u.o),b=new as(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Lc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Hl(u.h,b),js(b,S,g)}function Ki(u,g){u.H&&Be(u.H,function(b,S){ot(g,S,b)}),u.l&&Be({},function(b,S){ot(g,S,b)})}function Lc(u,g,b){b=Math.min(u.i.length,b);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var z=u.i;let qe=-1;for(;;){const jt=["count="+b];qe==-1?b>0?(qe=z[0].g,jt.push("ofs="+qe)):qe=0:jt.push("ofs="+qe);let it=!0;for(let _t=0;_t<b;_t++){var Q=z[_t].g;const Fn=z[_t].map;if(Q-=qe,Q<0)qe=Math.max(0,z[_t].g-100),it=!1;else try{Q="req"+Q+"_"||"";try{var pe=Fn instanceof Map?Fn:Object.entries(Fn);for(const[zs,ds]of pe){let hs=ds;p(ds)&&(hs=Es(ds)),jt.push(Q+zs+"="+encodeURIComponent(hs))}}catch(zs){throw jt.push(Q+"type="+encodeURIComponent("_badmap")),zs}}catch{S&&S(Fn)}}if(it){pe=jt.join("&");break e}}pe=void 0}return u=u.i.splice(0,b),g.G=u,pe}function Pc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Se||w(),xe||(Se(),xe=!0),R.add(g,u),u.A=0}}function Qi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ns(y(u.Da,u),Bc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ns(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),qr(this),Uc(this))};function to(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Uc(u){u.g=new as(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Lt(u.na);ot(g,"RID","rpc"),ot(g,"SID",u.M),ot(g,"AID",u.K),ot(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ot(g,"TO",u.ia),ot(g,"TYPE","xmlhttp"),Ki(u,g),u.u&&u.o&&Fi(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Bi(Lt(g)),b.u=null,b.R=!0,Aa(b,u)}r.Va=function(){this.C!=null&&(this.C=null,qr(this),Qi(this),Mt(19))};function Va(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function zc(u,g){var b=null;if(u.g==g){Va(u),to(u),u.g=null;var S=2}else if(Ds(u.h,g))b=g.G,Fl(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var z=u.D;S=Na(),pt(S,new Ss(S,b)),Ps(u)}else Pc(u);else if(z=g.m,z==3||z==0&&g.X>0||!(S==1&&Oa(u,g)||S==2&&Qi(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),z){case 1:Us(u,5);break;case 4:Us(u,10);break;case 3:Us(u,6);break;default:Us(u,2)}}}function Bc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Us(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),S=u.Ua;const z=!S;S=new Cn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Xt(S,"https"),Bi(S),z?os(S.toString(),b):Xl(S.toString(),b)}else Mt(2);u.I=0,u.l&&u.l.pa(g),qc(u),Ma(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function qc(u){if(u.I=0,u.ja=[],u.l){const g=Gl(u.h);(g.length!=0||u.i.length!=0)&&(X(u.ja,g),X(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function Hc(u,g,b){var S=b instanceof Cn?Lt(b):new Cn(b);if(S.g!="")g&&(S.g=g+"."+S.g),Or(S,S.u);else{var z=f.location;S=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const Q=new Cn(null);S&&Xt(Q,S),g&&(Q.g=g),z&&Or(Q,z),b&&(Q.h=b),S=Q}return b=u.G,g=u.wa,b&&g&&ot(S,b,g),ot(S,"VER",u.ka),Ki(u,S),S}function Fc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new dt(new Os({ab:b})):new dt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}r=Gc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hr(){}Hr.prototype.g=function(u,g){return new gn(u,g)};function gn(u,g){Ke.call(this),this.g=new Br(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ar(this)}T(gn,Ke),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jl(this.g)},gn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Es(u),u=b);g.i.push(new Vt(g.Ya++,u)),g.I==3&&Ps(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,gn.Z.N.call(this)};function Yc(u){Jt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Yc,Jt);function Kc(){zn.call(this),this.status=1}T(Kc,zn);function ar(u){this.g=u}T(ar,Gc),ar.prototype.ra=function(){pt(this.g,"a")},ar.prototype.qa=function(u){pt(this.g,new Yc(u))},ar.prototype.pa=function(u){pt(this.g,new Kc)},ar.prototype.oa=function(){pt(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,n_=function(){return new Hr},t_=function(){return Na()},e_=At,km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,cd=Ui,Ul.COMPLETE="complete",Jb=Ul,Sc.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Ho=Sc,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,Zb=dt}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const Zv="@firebase/firestore",Jv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Jm("@firebase/firestore");function ml(){return _a.logLevel}function Te(r,...e){if(_a.logLevel<=Ze.DEBUG){const s=e.map(ug);_a.debug(`Firestore (${Dl}): ${r}`,...s)}}function jr(r,...e){if(_a.logLevel<=Ze.ERROR){const s=e.map(ug);_a.error(`Firestore (${Dl}): ${r}`,...s)}}function Tl(r,...e){if(_a.logLevel<=Ze.WARN){const s=e.map(ug);_a.warn(`Firestore (${Dl}): ${r}`,...s)}}function ug(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,s_(r,i,s)}function s_(r,e,s){let i=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw jr(i),new Error(i)}function lt(r,e,s,i){let o="Unexpected state";typeof s=="string"?o=s:i=s,r||s_(e,o,i)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ir{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(dn.UNAUTHENTICATED)))}shutdown(){}}class TN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class SN{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){lt(this.o===void 0,42304);let i=this.i;const o=v=>this.i!==i?(i=this.i,s(v)):Promise.resolve();let d=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ei,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ei)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new r_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class NN{constructor(e,s,i){this.P=e,this.T=s,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AN{constructor(e,s,i){this.P=e,this.T=s,this.I=i}getToken(){return Promise.resolve(new NN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){lt(this.o===void 0,3512);const i=d=>{d.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>i(d)))};const o=d=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ex(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(lt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new ex(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=CN(40);for(let d=0;d<o.length;++d)i.length<20&&o[d]<s&&(i+=e.charAt(o[d]%62))}return i}}function Je(r,e){return r<e?-1:r>e?1:0}function Dm(r,e){const s=Math.min(r.length,e.length);for(let i=0;i<s;i++){const o=r.charAt(i),d=e.charAt(i);if(o!==d)return mm(o)===mm(d)?Je(o,d):mm(o)?1:-1}return Je(r.length,e.length)}const RN=55296,IN=57343;function mm(r){const e=r.charCodeAt(0);return e>=RN&&e<=IN}function Sl(r,e,s){return r.length===e.length&&r.every(((i,o)=>s(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__name__";class Ys{constructor(e,s,i){s===void 0?s=0:s>e.length&&Ve(637,{offset:s,range:e.length}),i===void 0?i=e.length-s:i>e.length-s&&Ve(1746,{length:i,range:e.length-s}),this.segments=e,this.offset=s,this.len=i}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach((i=>{s.push(i)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,i=this.limit();s<i;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const i=Math.min(e.length,s.length);for(let o=0;o<i;o++){const d=Ys.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return Je(e.length,s.length)}static compareSegments(e,s){const i=Ys.isNumericId(e),o=Ys.isNumericId(s);return i&&!o?-1:!i&&o?1:i&&o?Ys.extractNumericId(e).compare(Ys.extractNumericId(s)):Dm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class yt extends Ys{construct(e,s,i){return new yt(e,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const i of e){if(i.indexOf("//")>=0)throw new be(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((o=>o.length>0)))}return new yt(s)}static emptyPath(){return new yt([])}}const kN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Ys{construct(e,s,i){return new ln(e,s,i)}static isValidIdentifier(e){return kN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tx}static keyField(){return new ln([tx])}static fromServerFormat(e){const s=[];let i="",o=0;const d=()=>{if(i.length===0)throw new be(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new be(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new be(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(d(),o++)}if(d(),f)throw new be(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(s)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(yt.fromString(e))}static fromName(e){return new Ie(yt.fromString(e).popFirst(5))}static empty(){return new Ie(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return yt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r,e,s){if(!s)throw new be(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DN(r,e,s,i){if(e===!0&&i===!0)throw new be(ne.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function nx(r){if(!Ie.isDocumentKey(r))throw new be(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function sx(r){if(Ie.isDocumentKey(r))throw new be(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function a_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ud(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Pn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Ud(r);throw new be(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r,e){const s={typeString:r};return e&&(s.value=e),s}function gc(r,e){if(!a_(r))throw new be(ne.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in e)if(e[i]){const o=e[i].typeString,d="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){s=`JSON field '${i}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${i}' field to equal '${d.value}'`;break}}if(s)throw new be(ne.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=-62135596800,ix=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),i=Math.floor((e-1e3*s)*ix);return new bt(s,i)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new be(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new be(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<rx)throw new be(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ix}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Ft("string",bt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new bt(0,0))}static max(){return new Le(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function MN(r,e){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(i===1e9?new bt(s+1,0):new bt(s,i));return new Si(o,Ie.empty(),e)}function ON(r){return new Si(r.readTime,r.key,nc)}class Si{constructor(e,s,i){this.readTime=e,this.documentKey=s,this.largestBatchId=i}static min(){return new Si(Le.min(),Ie.empty(),nc)}static max(){return new Si(Le.max(),Ie.empty(),nc)}}function VN(r,e){let s=r.readTime.compareTo(e.readTime);return s!==0?s:(s=Ie.comparator(r.documentKey,e.documentKey),s!==0?s:Je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==LN)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(i,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(i,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof le?s:le.resolve(s)}catch(s){return le.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):le.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):le.reject(s)}static resolve(e){return new le(((s,i)=>{s(e)}))}static reject(e){return new le(((s,i)=>{i(e)}))}static waitFor(e){return new le(((s,i)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(v=>i(v)))})),f=!0,d===o&&s()}))}static or(e){let s=le.resolve(!1);for(const i of e)s=s.next((o=>o?le.resolve(o):i()));return s}static forEach(e,s){const i=[];return e.forEach(((o,d)=>{i.push(s.call(this,o,d))})),this.waitFor(i)}static mapArray(e,s){return new le(((i,o)=>{const d=e.length,f=new Array(d);let p=0;for(let v=0;v<d;v++){const y=v;s(e[y]).next((_=>{f[y]=_,++p,p===d&&i(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new le(((i,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):i()};d()}))}}function UN(r){const e=r.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ol(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function Bd(r){return r==null}function Td(r){return r===0&&1/r==-1/0}function zN(r){return typeof r=="number"&&Number.isInteger(r)&&!Td(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="";function BN(r){let e="";for(let s=0;s<r.length;s++)e.length>0&&(e=ax(e)),e=qN(r.get(s),e);return ax(e)}function qN(r,e){let s=e;const i=r.length;for(let o=0;o<i;o++){const d=r.charAt(o);switch(d){case"\0":s+="";break;case l_:s+="";break;default:s+=d}}return s}function ax(r){return r+l_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(r){let e=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e++;return e}function Di(r,e){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e(s,r[s])}function o_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,s){this.comparator=e,this.root=s||an.EMPTY}insert(e,s){return new Tt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(e){let s=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return s+i.left.size;o<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,i)=>(e(s,i),!1)))}toString(){const e=[];return this.inorderTraversal(((s,i)=>(e.push(`${s}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,s,i,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?i(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,s,i,o,d){this.key=e,this.value=s,this.color=i??an.RED,this.left=o??an.EMPTY,this.right=d??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,i,o,d){return new an(e??this.key,s??this.value,i??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,i){let o=this;const d=i(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,i),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let i,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,s,i,o,d){return this}insert(e,s,i){return new an(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,i)=>(e(s),!1)))}forEachInRange(e,s){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new ox(this.data.getIterator())}getIteratorFrom(e){return new ox(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((i=>{s=s.add(i)})),s}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const s=this.data.getIterator(),i=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Kt(this.comparator);return s.data=e,s}}class ox{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Ln([])}unionWith(e){let s=new Kt(ln.comparator);for(const i of this.fields)s=s.add(i);for(const i of e)s=s.add(i);return new Ln(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new c_("Invalid base64 string: "+d):d}})(e);return new on(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new on(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const HN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(r){if(lt(!!r,39018),typeof r=="string"){let e=0;const s=HN.exec(r);if(lt(!!s,46558,{timestamp:r}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="server_timestamp",d_="__type__",h_="__previous_value__",f_="__local_write_time__";function fg(r){return(r?.mapValue?.fields||{})[d_]?.stringValue===u_}function qd(r){const e=r.mapValue.fields[h_];return fg(e)?qd(e):e}function sc(r){const e=Ni(r.mapValue.fields[f_].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,s,i,o,d,f,p,v,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=i,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=_}}const Sd="(default)";class rc{constructor(e,s){this.projectId=e,this.database=s||Sd}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__type__",GN="__max__",ed={mapValue:{}},g_="__vector__",Nd="value";function ji(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?fg(r)?4:KN(r)?9007199254740991:YN(r)?10:11:Ve(28295,{value:r})}function Js(r,e){if(r===e)return!0;const s=ji(r);if(s!==ji(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sc(r).isEqual(sc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Ni(o.timestampValue),p=Ni(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,d){return Ai(o.bytesValue).isEqual(Ai(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,d){return It(o.geoPointValue.latitude)===It(d.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(d.geoPointValue.longitude)})(r,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return It(o.integerValue)===It(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=It(o.doubleValue),p=It(d.doubleValue);return f===p?Td(f)===Td(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return Sl(r.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(lx(f)!==lx(p))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(p[v]===void 0||!Js(f[v],p[v])))return!1;return!0})(r,e);default:return Ve(52216,{left:r})}}function ic(r,e){return(r.values||[]).find((s=>Js(s,e)))!==void 0}function Nl(r,e){if(r===e)return 0;const s=ji(r),i=ji(e);if(s!==i)return Je(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return Je(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=It(d.integerValue||d.doubleValue),v=It(f.integerValue||f.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(r,e);case 3:return cx(r.timestampValue,e.timestampValue);case 4:return cx(sc(r),sc(e));case 5:return Dm(r.stringValue,e.stringValue);case 6:return(function(d,f){const p=Ai(d),v=Ai(f);return p.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),v=f.split("/");for(let y=0;y<p.length&&y<v.length;y++){const _=Je(p[y],v[y]);if(_!==0)return _}return Je(p.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=Je(It(d.latitude),It(f.latitude));return p!==0?p:Je(It(d.longitude),It(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ux(r.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},v=f.fields||{},y=p[Nd]?.arrayValue,_=v[Nd]?.arrayValue,T=Je(y?.values?.length||0,_?.values?.length||0);return T!==0?T:ux(y,_)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===ed.mapValue&&f===ed.mapValue)return 0;if(d===ed.mapValue)return 1;if(f===ed.mapValue)return-1;const p=d.fields||{},v=Object.keys(p),y=f.fields||{},_=Object.keys(y);v.sort(),_.sort();for(let T=0;T<v.length&&T<_.length;++T){const N=Dm(v[T],_[T]);if(N!==0)return N;const U=Nl(p[v[T]],y[_[T]]);if(U!==0)return U}return Je(v.length,_.length)})(r.mapValue,e.mapValue);default:throw Ve(23264,{he:s})}}function cx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Je(r,e);const s=Ni(r),i=Ni(e),o=Je(s.seconds,i.seconds);return o!==0?o:Je(s.nanos,i.nanos)}function ux(r,e){const s=r.values||[],i=e.values||[];for(let o=0;o<s.length&&o<i.length;++o){const d=Nl(s[o],i[o]);if(d)return d}return Je(s.length,i.length)}function Al(r){return Mm(r)}function Mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ni(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ai(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Ie.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",o=!0;for(const d of s.values||[])o?o=!1:i+=",",i+=Mm(d);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of i)d?d=!1:o+=",",o+=`${f}:${Mm(s.fields[f])}`;return o+"}"})(r.mapValue):Ve(61005,{value:r})}function ud(r){switch(ji(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qd(r);return e?16+ud(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,d)=>o+ud(d)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Di(i.fields,((d,f)=>{o+=d.length+ud(f)})),o})(r.mapValue);default:throw Ve(13486,{value:r})}}function dx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Om(r){return!!r&&"integerValue"in r}function mg(r){return!!r&&"arrayValue"in r}function hx(r){return!!r&&"nullValue"in r}function fx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function dd(r){return!!r&&"mapValue"in r}function YN(r){return(r?.mapValue?.fields||{})[m_]?.stringValue===g_}function $o(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Di(r.mapValue.fields,((s,i)=>e.mapValue.fields[s]=$o(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=$o(r.arrayValue.values[s]);return e}return{...r}}function KN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===GN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let i=0;i<e.length-1;++i)if(s=(s.mapValue.fields||{})[e.get(i)],!dd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(s)}setAll(e){let s=ln.emptyPath(),i={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,i,o),i={},o=[],s=p.popLast()}f?i[p.lastSegment()]=$o(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,i,o)}delete(e){const s=this.field(e.popLast());dd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=s.mapValue.fields[e.get(i)];dd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(i)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,i){Di(s,((o,d)=>e[o]=d));for(const o of i)delete e[o]}clone(){return new Nn($o(this.value))}}function p_(r){const e=[];return Di(r.fields,((s,i)=>{const o=new ln([s]);if(dd(i)){const d=p_(i.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,s,i,o,d,f,p){this.key=e,this.documentType=s,this.version=i,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new hn(e,0,Le.min(),Le.min(),Le.min(),Nn.empty(),0)}static newFoundDocument(e,s,i,o){return new hn(e,1,s,Le.min(),i,o,0)}static newNoDocument(e,s){return new hn(e,2,s,Le.min(),Le.min(),Nn.empty(),0)}static newUnknownDocument(e,s){return new hn(e,3,s,Le.min(),Le.min(),Nn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,s){this.position=e,this.inclusive=s}}function mx(r,e,s){let i=0;for(let o=0;o<r.position.length;o++){const d=e[o],f=r.position[o];if(d.field.isKeyField()?i=Ie.comparator(Ie.fromName(f.referenceValue),s.key):i=Nl(f,s.data.field(d.field)),d.dir==="desc"&&(i*=-1),i!==0)break}return i}function gx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Js(r.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,s="asc"){this.field=e,this.dir=s}}function QN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class Ht extends y_{constructor(e,s,i){super(),this.field=e,this.op=s,this.value=i}static create(e,s,i){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,i):new XN(e,s,i):s==="array-contains"?new JN(e,i):s==="in"?new eA(e,i):s==="not-in"?new tA(e,i):s==="array-contains-any"?new nA(e,i):new Ht(e,s,i)}static createKeyFieldInFilter(e,s,i){return s==="in"?new WN(e,i):new ZN(e,i)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Nl(s,this.value)):s!==null&&ji(this.value)===ji(s)&&this.matchesComparison(Nl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends y_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new _s(e,s)}matches(e){return v_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v_(r){return r.op==="and"}function x_(r){return $N(r)&&v_(r)}function $N(r){for(const e of r.filters)if(e instanceof _s)return!1;return!0}function Vm(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+Al(r.value);if(x_(r))return r.filters.map((e=>Vm(e))).join(",");{const e=r.filters.map((s=>Vm(s))).join(",");return`${r.op}(${e})`}}function b_(r,e){return r instanceof Ht?(function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&Js(i.value,o.value)})(r,e):r instanceof _s?(function(i,o){return o instanceof _s&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((d,f,p)=>d&&b_(f,o.filters[p])),!0):!1})(r,e):void Ve(19439)}function __(r){return r instanceof Ht?(function(s){return`${s.field.canonicalString()} ${s.op} ${Al(s.value)}`})(r):r instanceof _s?(function(s){return s.op.toString()+" {"+s.getFilters().map(__).join(" ,")+"}"})(r):"Filter"}class XN extends Ht{constructor(e,s,i){super(e,s,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const s=Ie.comparator(e.key,this.key);return this.matchesComparison(s)}}class WN extends Ht{constructor(e,s){super(e,"in",s),this.keys=w_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class ZN extends Ht{constructor(e,s){super(e,"not-in",s),this.keys=w_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function w_(r,e){return(e.arrayValue?.values||[]).map((s=>Ie.fromName(s.referenceValue)))}class JN extends Ht{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return mg(s)&&ic(s.arrayValue,this.value)}}class eA extends Ht{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ic(this.value.arrayValue,s)}}class tA extends Ht{constructor(e,s){super(e,"not-in",s)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ic(this.value.arrayValue,s)}}class nA extends Ht{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!mg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>ic(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,s=null,i=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=i,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function px(r,e=null,s=[],i=[],o=null,d=null,f=null){return new sA(r,e,s,i,o,d,f)}function gg(r){const e=ze(r);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((i=>Vm(i))).join(","),s+="|ob:",s+=e.orderBy.map((i=>(function(d){return d.field.canonicalString()+d.dir})(i))).join(","),Bd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>Al(i))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>Al(i))).join(",")),e.Te=s}return e.Te}function pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!QN(r.orderBy[s],e.orderBy[s]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!b_(r.filters[s],e.filters[s]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!gx(r.startAt,e.startAt)&&gx(r.endAt,e.endAt)}function Lm(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,s=null,i=[],o=[],d=null,f="F",p=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rA(r,e,s,i,o,d,f,p){return new Vl(r,e,s,i,o,d,f,p)}function yg(r){return new Vl(r)}function yx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function E_(r){return r.collectionGroup!==null}function Xo(r){const e=ze(r);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Kt(ln.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new ac(d,i))})),s.has(ln.keyField().canonicalString())||e.Ie.push(new ac(ln.keyField(),i))}return e.Ie}function $s(r){const e=ze(r);return e.Ee||(e.Ee=iA(e,Xo(r))),e.Ee}function iA(r,e){if(r.limitType==="F")return px(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new ac(o.field,d)}));const s=r.endAt?new Ad(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ad(r.startAt.position,r.startAt.inclusive):null;return px(r.path,r.collectionGroup,e,r.filters,r.limit,s,i)}}function Pm(r,e){const s=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function Um(r,e,s){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,s,r.startAt,r.endAt)}function Hd(r,e){return pg($s(r),$s(e))&&r.limitType===e.limitType}function T_(r){return`${gg($s(r))}|lt:${r.limitType}`}function gl(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((o=>__(o))).join(", ")}]`),Bd(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((o=>Al(o))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((o=>Al(o))).join(",")),`Target(${i})`})($s(r))}; limitType=${r.limitType})`}function Fd(r,e){return e.isFoundDocument()&&(function(i,o){const d=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(d):Ie.isDocumentKey(i.path)?i.path.isEqual(d):i.path.isImmediateParentOf(d)})(r,e)&&(function(i,o){for(const d of Xo(i))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const d of i.filters)if(!d.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,p,v){const y=mx(f,p,v);return f.inclusive?y<=0:y<0})(i.startAt,Xo(i),o)||i.endAt&&!(function(f,p,v){const y=mx(f,p,v);return f.inclusive?y>=0:y>0})(i.endAt,Xo(i),o))})(r,e)}function aA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function S_(r){return(e,s)=>{let i=!1;for(const o of Xo(r)){const d=lA(o,e,s);if(d!==0)return d;i=i||o.field.isKeyField()}return 0}}function lA(r,e,s){const i=r.field.isKeyField()?Ie.comparator(e.key,s.key):(function(d,f,p){const v=f.data.field(d),y=p.data.field(d);return v!==null&&y!==null?Nl(v,y):Ve(42886)})(r.field,e,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i!==void 0){for(const[o,d]of i)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[s]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((s,i)=>{for(const[o,d]of i)e(o,d)}))}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Tt(Ie.comparator);function Cr(){return oA}const N_=new Tt(Ie.comparator);function Fo(...r){let e=N_;for(const s of r)e=e.insert(s.key,s);return e}function A_(r){let e=N_;return r.forEach(((s,i)=>e=e.insert(s,i.overlayedDocument))),e}function ma(){return Wo()}function j_(){return Wo()}function Wo(){return new Ea((r=>r.toString()),((r,e)=>r.isEqual(e)))}const cA=new Tt(Ie.comparator),uA=new Kt(Ie.comparator);function et(...r){let e=uA;for(const s of r)e=e.add(s);return e}const dA=new Kt(Je);function hA(){return dA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function C_(r){return{integerValue:""+r}}function fA(r,e){return zN(e)?C_(e):vg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function mA(r,e,s){return r instanceof jd?(function(o,d){const f={fields:{[d_]:{stringValue:u_},[f_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&fg(d)&&(d=qd(d)),d&&(f.fields[h_]=d),{mapValue:f}})(s,e):r instanceof lc?I_(r,e):r instanceof oc?k_(r,e):(function(o,d){const f=R_(o,d),p=vx(f)+vx(o.Ae);return Om(f)&&Om(o.Ae)?C_(p):vg(o.serializer,p)})(r,e)}function gA(r,e,s){return r instanceof lc?I_(r,e):r instanceof oc?k_(r,e):s}function R_(r,e){return r instanceof Cd?(function(i){return Om(i)||(function(d){return!!d&&"doubleValue"in d})(i)})(e)?e:{integerValue:0}:null}class jd extends Gd{}class lc extends Gd{constructor(e){super(),this.elements=e}}function I_(r,e){const s=D_(e);for(const i of r.elements)s.some((o=>Js(o,i)))||s.push(i);return{arrayValue:{values:s}}}class oc extends Gd{constructor(e){super(),this.elements=e}}function k_(r,e){let s=D_(e);for(const i of r.elements)s=s.filter((o=>!Js(o,i)));return{arrayValue:{values:s}}}class Cd extends Gd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function vx(r){return It(r.integerValue||r.doubleValue)}function D_(r){return mg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function pA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof lc&&o instanceof lc||i instanceof oc&&o instanceof oc?Sl(i.elements,o.elements,Js):i instanceof Cd&&o instanceof Cd?Js(i.Ae,o.Ae):i instanceof jd&&o instanceof jd})(r.transform,e.transform)}class yA{constructor(e,s){this.version=e,this.transformResults=s}}class yn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Yd{}function M_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Kd(r.key,yn.none()):new pc(r.key,r.data,yn.none());{const s=r.data,i=Nn.empty();let o=new Kt(ln.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?i.delete(d):i.set(d,f),o=o.add(d)}return new Mi(r.key,i,new Ln(o.toArray()),yn.none())}}function vA(r,e,s){r instanceof pc?(function(o,d,f){const p=o.value.clone(),v=bx(o.fieldTransforms,d,f.transformResults);p.setAll(v),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,s):r instanceof Mi?(function(o,d,f){if(!hd(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=bx(o.fieldTransforms,d,f.transformResults),v=d.data;v.setAll(O_(o)),v.setAll(p),d.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Zo(r,e,s,i){return r instanceof pc?(function(d,f,p,v){if(!hd(d.precondition,f))return p;const y=d.value.clone(),_=_x(d.fieldTransforms,v,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,s,i):r instanceof Mi?(function(d,f,p,v){if(!hd(d.precondition,f))return p;const y=_x(d.fieldTransforms,v,f),_=f.data;return _.setAll(O_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((T=>T.field)))})(r,e,s,i):(function(d,f,p){return hd(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,s)}function xA(r,e){let s=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),d=R_(i.transform,o||null);d!=null&&(s===null&&(s=Nn.empty()),s.set(i.field,d))}return s||null}function xx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sl(i,o,((d,f)=>pA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class pc extends Yd{constructor(e,s,i,o=[]){super(),this.key=e,this.value=s,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mi extends Yd{constructor(e,s,i,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=i,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function O_(r){const e=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);e.set(s,i)}})),e}function bx(r,e,s){const i=new Map;lt(r.length===s.length,32656,{Re:s.length,Ve:r.length});for(let o=0;o<s.length;o++){const d=r[o],f=d.transform,p=e.data.field(d.field);i.set(d.field,gA(f,p,s[o]))}return i}function _x(r,e,s){const i=new Map;for(const o of r){const d=o.transform,f=s.data.field(o.field);i.set(o.field,mA(d,f,e))}return i}class Kd extends Yd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bA extends Yd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,s,i,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,s){const i=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&vA(d,e,i[o])}}applyToLocalView(e,s){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const i=j_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const v=M_(f,p);v!==null&&i.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(Le.min())})),i}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),et())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,i)=>xx(s,i)))&&Sl(this.baseMutations,e.baseMutations,((s,i)=>xx(s,i)))}}class xg{constructor(e,s,i,o){this.batch=e,this.commitVersion=s,this.mutationResults=i,this.docVersions=o}static from(e,s,i){lt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return cA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,i[f].version);return new xg(e,s,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function TA(r){switch(r){case ne.OK:return Ve(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function V_(r){if(r===void 0)return jr("GRPC error has no .code"),ne.UNKNOWN;switch(r){case qt.OK:return ne.OK;case qt.CANCELLED:return ne.CANCELLED;case qt.UNKNOWN:return ne.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ne.INTERNAL;case qt.UNAVAILABLE:return ne.UNAVAILABLE;case qt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case qt.NOT_FOUND:return ne.NOT_FOUND;case qt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case qt.ABORTED:return ne.ABORTED;case qt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case qt.DATA_LOSS:return ne.DATA_LOSS;default:return Ve(39323,{code:r})}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new wi([4294967295,4294967295],0);function wx(r){const e=SA().encode(r),s=new Wb;return s.update(e),new Uint8Array(s.digest())}function Ex(r){const e=new DataView(r.buffer),s=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new wi([s,i],0),new wi([o,d],0)]}class bg{constructor(e,s,i){if(this.bitmap=e,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Go(`Invalid padding: ${s}`);if(i<0)throw new Go(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${i}`);if(e.length===0&&s!==0)throw new Go(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=wi.fromNumber(this.ge)}ye(e,s,i){let o=e.add(s.multiply(wi.fromNumber(i)));return o.compare(NA)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=wx(e),[i,o]=Ex(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);if(!this.we(f))return!1}return!0}static create(e,s,i){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new bg(d,o,s);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=wx(e),[i,o]=Ex(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),i=e%8;this.bitmap[s]|=1<<i}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,s,i,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,i){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,s,i)),new Qd(Le.min(),o,new Tt(Je),Cr(),et())}}class yc{constructor(e,s,i,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,i){return new yc(i,s,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,s,i,o){this.be=e,this.removedTargetIds=s,this.key=i,this.De=o}}class L_{constructor(e,s){this.targetId=e,this.Ce=s}}class P_{constructor(e,s,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=i,this.cause=o}}class Tx{constructor(){this.ve=0,this.Fe=Sx(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),s=et(),i=et();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:i=i.add(o);break;default:Ve(38017,{changeType:d})}})),new yc(this.Me,this.xe,e,s,i)}qe(){this.Oe=!1,this.Fe=Sx()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.Je=td(),this.He=td(),this.Ye=new Tt(Je)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const i=this.nt(s);switch(e.state){case 0:this.rt(s)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((i,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,i=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Lm(d))if(i===0){const f=new Ie(d.path);this.et(s,f,hn.newNoDocument(f,Le.min()))}else lt(i===1,20013,{expectedCount:i});else{const f=this._t(s);if(f!==i){const p=this.ut(e),v=p?this.ct(p,e,f):1;if(v!==0){this.it(s);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Ai(i).toUint8Array()}catch(v){if(v instanceof c_)return Tl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new bg(f,o,d)}catch(v){return Tl(v instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,s,i){return s.Ce.count===i-this.Pt(e,s.targetId)?0:2}Pt(e,s){const i=this.Ge.getRemoteKeysForTarget(s);let o=0;return i.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Lm(p.target)){const v=new Ie(p.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,hn.newNoDocument(v,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let i=et();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new Qd(e,s,this.Ye,this.je,i);return this.je=Cr(),this.Je=td(),this.He=td(),this.Ye=new Tt(Je),o}Xe(e,s){if(!this.rt(e))return;const i=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,i),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),i&&(this.je=this.je.insert(s,i))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Tx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Kt(Je),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Kt(Je),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Te("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function td(){return new Tt(Ie.comparator)}function Sx(){return new Tt(Ie.comparator)}const jA={asc:"ASCENDING",desc:"DESCENDING"},CA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RA={and:"AND",or:"OR"};class IA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function zm(r,e){return r.useProto3Json||Bd(e)?e:{value:e}}function Rd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function kA(r,e){return Rd(r,e.toTimestamp())}function Xs(r){return lt(!!r,49232),Le.fromTimestamp((function(s){const i=Ni(s);return new bt(i.seconds,i.nanos)})(r))}function _g(r,e){return Bm(r,e).canonicalString()}function Bm(r,e){const s=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?s:s.child(e)}function z_(r){const e=yt.fromString(r);return lt(G_(e),10190,{key:e.toString()}),e}function qm(r,e){return _g(r.databaseId,e.path)}function gm(r,e){const s=z_(e);if(s.get(1)!==r.databaseId.projectId)throw new be(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new be(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Ie(q_(s))}function B_(r,e){return _g(r.databaseId,e)}function DA(r){const e=z_(r);return e.length===4?yt.emptyPath():q_(e)}function Hm(r){return new yt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function q_(r){return lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Nx(r,e,s){return{name:qm(r,e),fields:s.value.mapValue.fields}}function MA(r,e){let s;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ve(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(lt(_===void 0||typeof _=="string",58123),on.fromBase64String(_||"")):(lt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),on.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?ne.UNKNOWN:V_(y.code);return new be(_,y.message||"")})(f);s=new P_(i,o,d,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gm(r,i.document.name),d=Xs(i.document.updateTime),f=i.document.createTime?Xs(i.document.createTime):Le.min(),p=new Nn({mapValue:{fields:i.document.fields}}),v=hn.newFoundDocument(o,d,f,p),y=i.targetIds||[],_=i.removedTargetIds||[];s=new fd(y,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gm(r,i.document),d=i.readTime?Xs(i.readTime):Le.min(),f=hn.newNoDocument(o,d),p=i.removedTargetIds||[];s=new fd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gm(r,i.document),d=i.removedTargetIds||[];s=new fd([],d,o,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:d}=i,f=new EA(o,d),p=i.targetId;s=new L_(p,f)}}return s}function OA(r,e){let s;if(e instanceof pc)s={update:Nx(r,e.key,e.value)};else if(e instanceof Kd)s={delete:qm(r,e.key)};else if(e instanceof Mi)s={update:Nx(r,e.key,e.data),updateMask:FA(e.fieldMask)};else{if(!(e instanceof bA))return Ve(16599,{Vt:e.type});s={verify:qm(r,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((i=>(function(d,f){const p=f.transform;if(p instanceof jd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof oc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Cd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ve(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:kA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Ve(27497)})(r,e.precondition)),s}function VA(r,e){return r&&r.length>0?(lt(e!==void 0,14353),r.map((s=>(function(o,d){let f=o.updateTime?Xs(o.updateTime):Xs(d);return f.isEqual(Le.min())&&(f=Xs(d)),new yA(f,o.transformResults||[])})(s,e)))):[]}function LA(r,e){return{documents:[B_(r,e.path)]}}function PA(r,e){const s={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=B_(r,o);const d=(function(y){if(y.length!==0)return F_(_s.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(N){return{field:pl(N.field),direction:BA(N.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=zm(r,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function UA(r){let e=DA(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let o=null;if(i>0){lt(i===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(T){const N=H_(T);return N instanceof _s&&x_(N)?N.getFilters():[N]})(s.where));let f=[];s.orderBy&&(f=(function(T){return T.map((N=>(function(X){return new ac(yl(X.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(N)))})(s.orderBy));let p=null;s.limit&&(p=(function(T){let N;return N=typeof T=="object"?T.value:T,Bd(N)?null:N})(s.limit));let v=null;s.startAt&&(v=(function(T){const N=!!T.before,U=T.values||[];return new Ad(U,N)})(s.startAt));let y=null;return s.endAt&&(y=(function(T){const N=!T.before,U=T.values||[];return new Ad(U,N)})(s.endAt)),rA(e,o,f,d,p,"F",v,y)}function zA(r,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function H_(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=yl(s.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yl(s.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=yl(s.unaryFilter.field);return Ht.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=yl(s.unaryFilter.field);return Ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ht.create(yl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return _s.create(s.compositeFilter.filters.map((i=>H_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(s.compositeFilter.op))})(r):Ve(30097,{filter:r})}function BA(r){return jA[r]}function qA(r){return CA[r]}function HA(r){return RA[r]}function pl(r){return{fieldPath:r.canonicalString()}}function yl(r){return ln.fromServerFormat(r.fieldPath)}function F_(r){return r instanceof Ht?(function(s){if(s.op==="=="){if(fx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NAN"}};if(hx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(fx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NAN"}};if(hx(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(s.field),op:qA(s.op),value:s.value}}})(r):r instanceof _s?(function(s){const i=s.getFilters().map((o=>F_(o)));return i.length===1?i[0]:{compositeFilter:{op:HA(s.op),filters:i}}})(r):Ve(54877,{filter:r})}function FA(r){const e=[];return r.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function G_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,s,i,o,d=Le.min(),f=Le.min(),p=on.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.yt=e}}function YA(r){const e=UA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.Cn=new QA}addToCollectionParentIndex(e,s){return this.Cn.add(s),le.resolve()}getCollectionParents(e,s){return le.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return le.resolve()}deleteFieldIndex(e,s){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,s){return le.resolve()}getDocumentsMatchingTarget(e,s){return le.resolve(null)}getIndexType(e,s){return le.resolve(0)}getFieldIndexes(e,s){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,s){return le.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,s){return le.resolve(Si.min())}updateCollectionGroup(e,s,i){return le.resolve()}updateIndexEntries(e,s){return le.resolve()}}class QA{constructor(){this.index={}}add(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s]||new Kt(yt.comparator),d=!o.has(i);return this.index[s]=o.add(i),d}has(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Kt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y_=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(Y_,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jl(0)}static cr(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="LruGarbageCollector",$A=1048576;function Cx([r,e],[s,i]){const o=Je(r,s);return o===0?Je(e,i):o}class XA{constructor(e){this.Ir=e,this.buffer=new Kt(Cx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Cx(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class WA{constructor(e,s,i){this.garbageCollector=e,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(jx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ol(s)?Te(jx,"Ignoring IndexedDB error during garbage collection: ",s):await Ml(s)}await this.Vr(3e5)}))}}class ZA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(e,s){if(s===0)return le.resolve(zd.ce);const i=new XA(s);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,s,i){return this.mr.removeTargets(e,s,i)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Ax)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ax):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let i,o,d,f,p,v,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,s)))).next((T=>(d=T,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),ml()<=Ze.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(v-p)+`ms
	Removed ${T} documents in `+(y-v)+`ms
Total Duration: ${y-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:T}))))}}function JA(r,e){return new ZA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.changes=new Ea((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?le.resolve(i):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,s,i,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,s){let i=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(i!==null&&Zo(i.mutation,o,Ln.empty(),bt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.getLocalViewOfDocuments(e,i,et()).next((()=>i))))}getLocalViewOfDocuments(e,s,i=et()){const o=ma();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,i).next((d=>{let f=Fo();return d.forEach(((p,v)=>{f=f.insert(p,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const i=ma();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,et())))}populateOverlays(e,s,i){const o=[];return i.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,i,o){let d=Cr();const f=Wo(),p=(function(){return Wo()})();return s.forEach(((v,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Mi)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Zo(_.mutation,y,_.mutation.getFieldMask(),bt.now())):f.set(y.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new t4(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const i=Wo();let o=new Tt(((f,p)=>f-p)),d=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((v=>{const y=s.get(v);if(y===null)return;let _=i.get(v)||Ln.empty();_=p.applyToLocalView(y,_),i.set(v,_);const T=(o.get(p.batchId)||et()).add(v);o=o.insert(p.batchId,T)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),y=v.key,_=v.value,T=j_();_.forEach((N=>{if(!d.has(N)){const U=M_(s.get(N),i.get(N));U!==null&&T.set(N,U),d=d.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,T))}return le.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,s,i,o){return(function(f){return Ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):E_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,i,o):this.getDocumentsMatchingCollectionQuery(e,s,i,o)}getNextDocuments(e,s,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,i,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,i.largestBatchId,o-d.size):le.resolve(ma());let p=nc,v=d;return f.next((y=>le.forEach(y,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),d.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((N=>{v=v.insert(_,N)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,v,y,et()))).next((_=>({batchId:p,changes:A_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ie(s)).next((i=>{let o=Fo();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,i,o){const d=s.collectionGroup;let f=Fo();return this.indexManager.getCollectionParents(e,d).next((p=>le.forEach(p,(v=>{const y=(function(T,N){return new Vl(N,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((T,N)=>{f=f.insert(T,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,i,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,i.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,i,d,o)))).next((f=>{d.forEach(((v,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,hn.newInvalidDocument(_)))}));let p=Fo();return f.forEach(((v,y)=>{const _=d.get(v);_!==void 0&&Zo(_.mutation,y,Ln.empty(),bt.now()),Fd(s,y)&&(p=p.insert(v,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return le.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Xs(o.createTime)}})(s)),le.resolve()}getNamedQuery(e,s){return le.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:YA(o.bundledQuery),readTime:Xs(o.readTime)}})(s)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.overlays=new Tt(Ie.comparator),this.qr=new Map}getOverlay(e,s){return le.resolve(this.overlays.get(s))}getOverlays(e,s){const i=ma();return le.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&i.set(o,d)})))).next((()=>i))}saveOverlays(e,s,i){return i.forEach(((o,d)=>{this.St(e,s,d)})),le.resolve()}removeOverlaysForBatchId(e,s,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,s,i){const o=ma(),d=s.length+1,f=new Ie(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const v=p.getNext().value,y=v.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&v.largestBatchId>i&&o.set(v.getKey(),v)}return le.resolve(o)}getOverlaysForCollectionGroup(e,s,i,o){let d=new Tt(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>i){let _=d.get(y.largestBatchId);_===null&&(_=ma(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=ma(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return le.resolve(p)}St(e,s,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new wA(s,i));let d=this.qr.get(s);d===void 0&&(d=et(),this.qr.set(s,d)),this.qr.set(s,d.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Qr=new Kt(Zt.$r),this.Ur=new Kt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const i=new Zt(e,s);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,s){e.forEach((i=>this.addReference(i,s)))}removeReference(e,s){this.Gr(new Zt(e,s))}zr(e,s){e.forEach((i=>this.removeReference(i,s)))}jr(e){const s=new Ie(new yt([])),i=new Zt(s,e),o=new Zt(s,e+1),d=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ie(new yt([])),i=new Zt(s,e),o=new Zt(s,e+1);let d=et();return this.Ur.forEachInRange([i,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new Zt(e,0),i=this.Qr.firstAfterOrEqual(s);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ie.comparator(e.key,s.key)||Je(e.Yr,s.Yr)}static Kr(e,s){return Je(e.Yr,s.Yr)||Ie.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Zt.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,i,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new _A(d,s,i,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new Zt(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(f)}lookupMutationBatch(e,s){return le.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const i=s+1,o=this.ei(i),d=o<0?0:o;return le.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const i=new Zt(s,0),o=new Zt(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([i,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),le.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let i=new Kt(Je);return s.forEach((o=>{const d=new Zt(o,0),f=new Zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{i=i.add(p.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,s){const i=s.path,o=i.length+1;let d=i;Ie.isDocumentKey(d)||(d=d.child(""));const f=new Zt(new Ie(d),0);let p=new Kt(Je);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(v.Yr)),!0)}),f),le.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){lt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(s.mutations,(o=>{const d=new Zt(o.key,s.batchId);return i=i.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,s){const i=new Zt(s,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const i=s.key,o=this.docs.get(i),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const i=this.docs.get(s);return le.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(s))}getEntries(e,s){let i=Cr();return s.forEach((o=>{const d=this.docs.get(o);i=i.insert(o,d?d.document.mutableCopy():hn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,s,i,o){let d=Cr();const f=s.path,p=new Ie(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:y,value:{document:_}}=v.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||VN(ON(_),i)<=0||(o.has(_.key)||Fd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return le.resolve(d)}getAllFromCollectionGroup(e,s,i,o){Ve(9500)}ii(e,s){return le.forEach(this.docs,(i=>s(i)))}newChangeBuffer(e){return new o4(this)}getSize(e){return le.resolve(this.size)}}class o4 extends e4{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.persistence=e,this.si=new Ea((s=>gg(s)),pg),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=jl.ur()}forEachTarget(e,s){return this.si.forEach(((i,o)=>s(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.oi&&(this.oi=s),le.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new jl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,le.resolve()}updateTargetData(e,s){return this.Pr(s),le.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,s,i){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),le.waitFor(d).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,s){const i=this.si.get(s)||null;return le.resolve(i)}addMatchingKeys(e,s,i){return this._i.Wr(s,i),le.resolve()}removeMatchingKeys(e,s,i){this._i.zr(s,i);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),le.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),le.resolve()}getMatchingKeysForTargetId(e,s){const i=this._i.Hr(s);return le.resolve(i)}containsKey(e,s){return le.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,s){this.ui={},this.overlays={},this.ci=new zd(0),this.li=!1,this.li=!0,this.hi=new i4,this.referenceDelegate=e(this),this.Pi=new c4(this),this.indexManager=new KA,this.remoteDocumentCache=(function(o){return new l4(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new GA(s),this.Ii=new s4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new r4,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let i=this.ui[e.toKey()];return i||(i=new a4(s,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,i){Te("MemoryPersistence","Starting transaction:",e);const o=new u4(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,s))))}}class u4 extends PN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new wg,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,s,i){return this.Ri.addReference(i,s),this.fi.delete(i.toString()),le.resolve()}removeReference(e,s,i){return this.Ri.removeReference(i,s),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),le.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>i.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=Ie.fromPath(i);return this.gi(e,o).next((d=>{d||s.removeEntry(o,Le.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((i=>{i?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return le.or([()=>le.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Id{constructor(e,s){this.persistence=e,this.pi=new Ea((i=>BN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=JA(this,s)}static mi(e,s){return new Id(e,s)}Ei(){}di(e){return le.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>s.next((o=>i+o))))}wr(e){let s=0;return this.pr(e,(i=>{s++})).next((()=>s))}pr(e,s){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((d=>d?le.resolve():s(o)))))}removeTargets(e,s,i){return this.persistence.getTargetCache().removeTargets(e,s,i)}removeOrphanedDocuments(e,s){let i=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(i++,d.removeEntry(f,Le.min()))})))).next((()=>d.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeTarget(e,s){const i=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=ud(e.data.value)),s}br(e,s,i){return le.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,s,i,o){this.targetId=e,this.fromCache=s,this.Es=i,this.ds=o}static As(e,s){let i=et(),o=et();for(const d of s.docChanges)switch(d.type){case 0:i=i.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new Tg(e,s.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Uw()?8:UN(fn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,i,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,i).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new d4;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,i,o){return i.documentReadCount<this.fs?(ml()<=Ze.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",gl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(ml()<=Ze.DEBUG&&Te("QueryEngine","Query:",gl(s),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ml()<=Ze.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",gl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(s))):le.resolve())}ys(e,s){if(yx(s))return le.resolve(null);let i=$s(s);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Um(s,null,"F"),i=$s(s)),this.indexManager.getDocumentsMatchingTarget(e,i).next((d=>{const f=et(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((v=>{const y=this.Ds(s,p);return this.Cs(s,y,f,v.readTime)?this.ys(e,Um(s,null,"F")):this.vs(e,y,s,v)}))))})))))}ws(e,s,i,o){return yx(s)||o.isEqual(Le.min())?le.resolve(null):this.ps.getDocuments(e,i).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,i,o)?le.resolve(null):(ml()<=Ze.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),gl(s)),this.vs(e,f,s,MN(o,nc)).next((p=>p)))}))}Ds(e,s){let i=new Kt(S_(e));return s.forEach(((o,d)=>{Fd(e,d)&&(i=i.add(d))})),i}Cs(e,s,i,o){if(e.limit===null)return!1;if(i.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,i){return ml()<=Ze.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",gl(s)),this.ps.getDocumentsMatchingQuery(e,s,Si.min(),i)}vs(e,s,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="LocalStore",f4=3e8;class m4{constructor(e,s,i,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Tt(Je),this.xs=new Ea((d=>gg(d)),pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function g4(r,e,s,i){return new m4(r,e,s,i)}async function Q_(r,e){const s=ze(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return s.mutationQueue.getAllMutationBatches(i).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(i)))).next((d=>{const f=[],p=[];let v=et();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(i,v).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function p4(r,e){const s=ze(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,y,_){const T=y.batch,N=T.keys();let U=le.resolve();return N.forEach((X=>{U=U.next((()=>_.getEntry(v,X))).next((G=>{const Y=y.docVersions.get(X);lt(Y!==null,48541),G.version.compareTo(Y)<0&&(T.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),_.addEntry(G)))}))})),U.next((()=>p.mutationQueue.removeMutationBatch(v,T)))})(s,i,e,d).next((()=>d.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let v=et();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(v=v.add(p.batch.mutations[y].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(i,o)))}))}function $_(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function y4(r,e){const s=ze(r),i=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,T)=>{const N=o.get(T);if(!N)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,T).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,T))));let U=N.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(T)!==null?U=U.withResumeToken(on.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):_.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(_.resumeToken,i)),o=o.insert(T,U),(function(G,Y,he){return G.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=f4?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(N,U,_)&&p.push(s.Pi.updateTargetData(d,U))}));let v=Cr(),y=et();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(v4(d,f,e.documentUpdates).next((_=>{v=_.ks,y=_.qs}))),!i.isEqual(Le.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((T=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,i)));p.push(_)}return le.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,v,y))).next((()=>v))})).then((d=>(s.Ms=o,d)))}function v4(r,e,s){let i=et(),o=et();return s.forEach((d=>i=i.add(d))),e.getEntries(r,i).next((d=>{let f=Cr();return s.forEach(((p,v)=>{const y=d.get(p);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(Le.min())?(e.removeEntry(p,v.readTime),f=f.insert(p,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),f=f.insert(p,v)):Te(Sg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function x4(r,e){const s=ze(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hg),s.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function b4(r,e){const s=ze(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return s.Pi.getTargetData(i,e).next((d=>d?(o=d,le.resolve(o)):s.Pi.allocateTargetId(i).next((f=>(o=new vi(e,f,"TargetPurposeListen",i.currentSequenceNumber),s.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=s.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(i.targetId,i),s.xs.set(e,i.targetId)),i}))}async function Fm(r,e,s){const i=ze(r),o=i.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",d,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ol(f))throw f;Te(Sg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Rx(r,e,s){const i=ze(r);let o=Le.min(),d=et();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,y,_){const T=ze(v),N=T.xs.get(_);return N!==void 0?le.resolve(T.Ms.get(N)):T.Pi.getTargetData(y,_)})(i,f,$s(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,p.targetId).next((v=>{d=v}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,s?o:Le.min(),s?d:et()))).next((p=>(_4(i,aA(e),p),{documents:p,Qs:d})))))}function _4(r,e,s){let i=r.Os.get(e)||Le.min();s.forEach(((o,d)=>{d.readTime.compareTo(i)>0&&(i=d.readTime)})),r.Os.set(e,i)}class Ix{constructor(){this.activeTargetIds=hA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w4{constructor(){this.Mo=new Ix,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,i){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,i){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ix,Promise.resolve()}handleUserChange(e,s,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="ConnectivityMonitor";class Dx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(kx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Gm(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",T4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Sd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,s,i,o,d){const f=Gm(),p=this.zo(e,s.toUriEncodedString());Te(pm,`Sending RPC '${e}' ${f}:`,p,i);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,d);const{host:y}=new URL(p),_=Rl(y);return this.Jo(e,p,v,i,_).then((T=>(Te(pm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw Tl(pm,`RPC '${e}' ${f} failed with error: `,T,"url: ",p,"request:",i),T}))}Ho(e,s,i,o,d,f){return this.Go(e,s,i,o,d)}jo(e,s,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),i&&i.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const i=T4[e];return`${this.Uo}/v1/${s}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class A4 extends S4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,i,o,d){const f=Gm();return new Promise(((p,v)=>{const y=new Zb;y.setWithCredentials(!0),y.listenOnce(Jb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case cd.NO_ERROR:const T=y.getResponseJson();Te(un,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),p(T);break;case cd.TIMEOUT:Te(un,`RPC '${e}' ${f} timed out`),v(new be(ne.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const N=y.getStatus();if(Te(un,`RPC '${e}' ${f} failed with status:`,N,"response text:",y.getResponseText()),N>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const X=U?.error;if(X&&X.status&&X.message){const G=(function(he){const oe=he.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(oe)>=0?oe:ne.UNKNOWN})(X.status);v(new be(G,X.message))}else v(new be(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new be(ne.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Te(un,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Te(un,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,i,15)}))}T_(e,s,i){const o=Gm(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=n_(),p=t_(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,i),v.encodeInitMessageHeaders=!0;const _=d.join("");Te(un,`Creating RPC '${e}' stream ${o}: ${_}`,v);const T=f.createWebChannel(_,v);this.I_(T);let N=!1,U=!1;const X=new N4({Yo:Y=>{U?Te(un,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(N||(Te(un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),N=!0),Te(un,`RPC '${e}' stream ${o} sending:`,Y),T.send(Y))},Zo:()=>T.close()}),G=(Y,he,oe)=>{Y.listen(he,(ve=>{try{oe(ve)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return G(T,Ho.EventType.OPEN,(()=>{U||(Te(un,`RPC '${e}' stream ${o} transport opened.`),X.o_())})),G(T,Ho.EventType.CLOSE,(()=>{U||(U=!0,Te(un,`RPC '${e}' stream ${o} transport closed`),X.a_(),this.E_(T))})),G(T,Ho.EventType.ERROR,(Y=>{U||(U=!0,Tl(un,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),X.a_(new be(ne.UNAVAILABLE,"The operation could not be completed")))})),G(T,Ho.EventType.MESSAGE,(Y=>{if(!U){const he=Y.data[0];lt(!!he,16349);const oe=he,ve=oe?.error||oe[0]?.error;if(ve){Te(un,`RPC '${e}' stream ${o} received error:`,ve);const ye=ve.status;let Se=(function(w){const A=qt[w];if(A!==void 0)return V_(A)})(ye),xe=ve.message;Se===void 0&&(Se=ne.INTERNAL,xe="Unknown error status: "+ye+" with message "+ve.message),U=!0,X.a_(new be(Se,xe)),T.close()}else Te(un,`RPC '${e}' stream ${o} received:`,he),X.u_(he)}})),G(p,e_.STAT_EVENT,(Y=>{Y.stat===km.PROXY?Te(un,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===km.NOPROXY&&Te(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(r){return new IA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,s,i=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=i,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="PersistentStream";class W_{constructor(e,s,i,o,d,f,p,v){this.Mi=e,this.S_=i,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ne.RESOURCE_EXHAUSTED?(jr(s.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===s&&this.G_(i,o)}),(i=>{e((()=>{const o=new be(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,s){const i=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Mx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Te(Mx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j4 extends W_{constructor(e,s,i,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=MA(this.serializer,e),i=(function(d){if(!("targetChange"in d))return Le.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?Le.min():f.readTime?Xs(f.readTime):Le.min()})(e);return this.listener.H_(s,i)}Y_(e){const s={};s.database=Hm(this.serializer),s.addTarget=(function(d,f){let p;const v=f.target;if(p=Lm(v)?{documents:LA(d,v)}:{query:PA(d,v).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=U_(d,f.resumeToken);const y=zm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Le.min())>0){p.readTime=Rd(d,f.snapshotVersion.toTimestamp());const y=zm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=zA(this.serializer,e);i&&(s.labels=i),this.q_(s)}Z_(e){const s={};s.database=Hm(this.serializer),s.removeTarget=e,this.q_(s)}}class C4 extends W_{constructor(e,s,i,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=VA(e.writeResults,e.commitTime),i=Xs(e.commitTime);return this.listener.na(i,s)}ra(){const e={};e.database=Hm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((i=>OA(this.serializer,i)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{}class I4 extends R4{constructor(e,s,i,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Bm(s,i),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(ne.UNKNOWN,d.toString())}))}Ho(e,s,i,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Bm(s,i),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new be(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class k4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jr(s),this.aa=!1):Te("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class D4{constructor(e,s,i,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{Ta(this)&&(Te(wa,"Restarting streams for network reachability change."),await(async function(v){const y=ze(v);y.Ea.add(4),await vc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Xd(y)})(this))}))})),this.Ra=new k4(i,o)}}async function Xd(r){if(Ta(r))for(const e of r.da)await e(!0)}async function vc(r){for(const e of r.da)await e(!1)}function Z_(r,e){const s=ze(r);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Cg(s)?jg(s):Ll(s).O_()&&Ag(s,e))}function Ng(r,e){const s=ze(r),i=Ll(s);s.Ia.delete(e),i.O_()&&J_(s,e),s.Ia.size===0&&(i.O_()?i.L_():Ta(s)&&s.Ra.set("Unknown"))}function Ag(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ll(r).Y_(e)}function J_(r,e){r.Va.Ue(e),Ll(r).Z_(e)}function jg(r){r.Va=new AA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ll(r).start(),r.Ra.ua()}function Cg(r){return Ta(r)&&!Ll(r).x_()&&r.Ia.size>0}function Ta(r){return ze(r).Ea.size===0}function e1(r){r.Va=void 0}async function M4(r){r.Ra.set("Online")}async function O4(r){r.Ia.forEach(((e,s)=>{Ag(r,e)}))}async function V4(r,e){e1(r),Cg(r)?(r.Ra.ha(e),jg(r)):r.Ra.set("Unknown")}async function L4(r,e,s){if(r.Ra.set("Online"),e instanceof P_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){Te(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kd(r,i)}else if(e instanceof fd?r.Va.Ze(e):e instanceof L_?r.Va.st(e):r.Va.tt(e),!s.isEqual(Le.min()))try{const i=await $_(r.localStore);s.compareTo(i)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(v.resumeToken,f))}})),p.targetMismatches.forEach(((v,y)=>{const _=d.Ia.get(v);if(!_)return;d.Ia.set(v,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),J_(d,v);const T=new vi(_.target,v,y,_.sequenceNumber);Ag(d,T)})),d.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){Te(wa,"Failed to raise snapshot:",i),await kd(r,i)}}async function kd(r,e,s){if(!Ol(e))throw e;r.Ea.add(1),await vc(r),r.Ra.set("Offline"),s||(s=()=>$_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(wa,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Xd(r)}))}function t1(r,e){return e().catch((s=>kd(r,s,e)))}async function Wd(r){const e=ze(r),s=Ci(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;P4(e);)try{const o=await x4(e.localStore,i);if(o===null){e.Ta.length===0&&s.L_();break}i=o.batchId,U4(e,o)}catch(o){await kd(e,o)}n1(e)&&s1(e)}function P4(r){return Ta(r)&&r.Ta.length<10}function U4(r,e){r.Ta.push(e);const s=Ci(r);s.O_()&&s.X_&&s.ea(e.mutations)}function n1(r){return Ta(r)&&!Ci(r).x_()&&r.Ta.length>0}function s1(r){Ci(r).start()}async function z4(r){Ci(r).ra()}async function B4(r){const e=Ci(r);for(const s of r.Ta)e.ea(s.mutations)}async function q4(r,e,s){const i=r.Ta.shift(),o=xg.from(i,e,s);await t1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Wd(r)}async function H4(r,e){e&&Ci(r).X_&&await(async function(i,o){if((function(f){return TA(f)&&f!==ne.ABORTED})(o.code)){const d=i.Ta.shift();Ci(i).B_(),await t1(i,(()=>i.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Wd(i)}})(r,e),n1(r)&&s1(r)}async function Ox(r,e){const s=ze(r);s.asyncQueue.verifyOperationInProgress(),Te(wa,"RemoteStore received new credentials");const i=Ta(s);s.Ea.add(3),await vc(s),i&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Xd(s)}async function F4(r,e){const s=ze(r);e?(s.Ea.delete(2),await Xd(s)):e||(s.Ea.add(2),await vc(s),s.Ra.set("Unknown"))}function Ll(r){return r.ma||(r.ma=(function(s,i,o){const d=ze(s);return d.sa(),new j4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:M4.bind(null,r),t_:O4.bind(null,r),r_:V4.bind(null,r),H_:L4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?jg(r):r.Ra.set("Unknown")):(await r.ma.stop(),e1(r))}))),r.ma}function Ci(r){return r.fa||(r.fa=(function(s,i,o){const d=ze(s);return d.sa(),new C4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:z4.bind(null,r),r_:H4.bind(null,r),ta:B4.bind(null,r),na:q4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Wd(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(wa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,s,i,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=i,this.op=o,this.removalCallback=d,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,i,o,d){const f=Date.now()+i,p=new Rg(e,s,f,o,d);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(r,e){if(jr("AsyncQueue",`${e}: ${r}`),Ol(r))return new be(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(s,i)=>e(s,i)||Ie.comparator(s.key,i.key):(s,i)=>Ie.comparator(s.key,i.key),this.keyedMap=Fo(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,i)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.ga=new Tt(Ie.comparator)}track(e){const s=e.doc.key,i=this.ga.get(s);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(s,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(s):e.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,i)=>{e.push(i)})),e}}class Cl{constructor(e,s,i,o,d,f,p,v,y){this.query=e,this.docs=s,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,s,i,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Cl(e,s,wl.emptySet(s),f,i,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,i=e.docChanges;if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==i[o].type||!s[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Y4{constructor(){this.queries=Lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const o=ze(s),d=o.queries;o.queries=Lx(),d.forEach(((f,p)=>{for(const v of p.Sa)v.onError(i)}))})(this,new be(ne.ABORTED,"Firestore shutting down"))}}function Lx(){return new Ea((r=>T_(r)),Hd)}async function r1(r,e){const s=ze(r);let i=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(i=2):(d=new G4,i=e.Da()?0:1);try{switch(i){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Ig(f,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&kg(s)}async function i1(r,e){const s=ze(r),i=e.query;let o=3;const d=s.queries.get(i);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function K4(r,e){const s=ze(r);let i=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(i=!0);f.wa=o}}i&&kg(s)}function Q4(r,e,s){const i=ze(r),o=i.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);i.queries.delete(e)}function kg(r){r.Ca.forEach((e=>{e.next()}))}var Ym,Px;(Px=Ym||(Ym={})).Ma="default",Px.Cache="cache";class a1{constructor(e,s,i){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.key=e}}class o1{constructor(e){this.key=e}}class $4{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=S_(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,s){const i=s?s.iu:new Vx,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const N=o.get(_),U=Fd(this.query,T)?T:null,X=!!N&&this.mutatedKeys.has(N.key),G=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Y=!1;N&&U?N.data.isEqual(U.data)?X!==G&&(i.track({type:3,doc:U}),Y=!0):this.su(N,U)||(i.track({type:2,doc:U}),Y=!0,(v&&this.eu(U,v)>0||y&&this.eu(U,y)<0)&&(p=!0)):!N&&U?(i.track({type:0,doc:U}),Y=!0):N&&!U&&(i.track({type:1,doc:N}),Y=!0,(v||y)&&(p=!0)),Y&&(U?(f=f.add(U),d=G?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,i,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,T)=>(function(U,X){const G=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:Y})}};return G(U)-G(X)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const p=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,f.length!==0||y?{snapshot:new Cl(this.query,e.tu,d,f,e.mutatedKeys,v===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const s=[];return e.forEach((i=>{this.Xa.has(i)||s.push(new o1(i))})),this.Xa.forEach((i=>{e.has(i)||s.push(new l1(i))})),s}cu(e){this.Ya=e.Qs,this.Xa=et();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class X4{constructor(e,s,i){this.query=e,this.targetId=s,this.view=i}}class W4{constructor(e){this.key=e,this.hu=!1}}class Z4{constructor(e,s,i,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=i,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ea((p=>T_(p)),Hd),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ie.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function J4(r,e,s=!0){const i=m1(r);let o;const d=i.Tu.get(e);return d?(i.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await c1(i,e,s,!0),o}async function ej(r,e){const s=m1(r);await c1(s,e,!0,!1)}async function c1(r,e,s,i){const o=await b4(r.localStore,$s(e)),d=o.targetId,f=r.sharedClientState.addLocalQueryTarget(d,s);let p;return i&&(p=await tj(r,e,d,f==="current",o.resumeToken)),r.isPrimaryClient&&s&&Z_(r.remoteStore,o),p}async function tj(r,e,s,i,o){r.pu=(T,N,U)=>(async function(G,Y,he,oe){let ve=Y.view.ru(he);ve.Cs&&(ve=await Rx(G.localStore,Y.query,!1).then((({documents:R})=>Y.view.ru(R,ve))));const ye=oe&&oe.targetChanges.get(Y.targetId),Se=oe&&oe.targetMismatches.get(Y.targetId)!=null,xe=Y.view.applyChanges(ve,G.isPrimaryClient,ye,Se);return zx(G,Y.targetId,xe.au),xe.snapshot})(r,T,N,U);const d=await Rx(r.localStore,e,!0),f=new $4(e,d.Qs),p=f.ru(d.documents),v=yc.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,v);zx(r,s,y.au);const _=new X4(e,s,f);return r.Tu.set(e,_),r.Iu.has(s)?r.Iu.get(s).push(e):r.Iu.set(s,[e]),y.snapshot}async function nj(r,e,s){const i=ze(r),o=i.Tu.get(e),d=i.Iu.get(o.targetId);if(d.length>1)return i.Iu.set(o.targetId,d.filter((f=>!Hd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Fm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),s&&Ng(i.remoteStore,o.targetId),Km(i,o.targetId)})).catch(Ml)):(Km(i,o.targetId),await Fm(i.localStore,o.targetId,!0))}async function sj(r,e){const s=ze(r),i=s.Tu.get(e),o=s.Iu.get(i.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Ng(s.remoteStore,i.targetId))}async function rj(r,e,s){const i=dj(r);try{const o=await(function(f,p){const v=ze(f),y=bt.now(),_=p.reduce(((U,X)=>U.add(X.key)),et());let T,N;return v.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let X=Cr(),G=et();return v.Ns.getEntries(U,_).next((Y=>{X=Y,X.forEach(((he,oe)=>{oe.isValidDocument()||(G=G.add(he))}))})).next((()=>v.localDocuments.getOverlayedDocuments(U,X))).next((Y=>{T=Y;const he=[];for(const oe of p){const ve=xA(oe,T.get(oe.key).overlayedDocument);ve!=null&&he.push(new Mi(oe.key,ve,p_(ve.value.mapValue),yn.exists(!0)))}return v.mutationQueue.addMutationBatch(U,y,he,p)})).next((Y=>{N=Y;const he=Y.applyToLocalDocumentSet(T,G);return v.documentOverlayCache.saveOverlays(U,Y.batchId,he)}))})).then((()=>({batchId:N.batchId,changes:A_(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,p,v){let y=f.Vu[f.currentUser.toKey()];y||(y=new Tt(Je)),y=y.insert(p,v),f.Vu[f.currentUser.toKey()]=y})(i,o.batchId,s),await xc(i,o.changes),await Wd(i.remoteStore)}catch(o){const d=Ig(o,"Failed to persist write");s.reject(d)}}async function u1(r,e){const s=ze(r);try{const i=await y4(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?lt(f.hu,14607):o.removedDocuments.size>0&&(lt(f.hu,42227),f.hu=!1))})),await xc(s,i,e)}catch(i){await Ml(i)}}function Ux(r,e,s){const i=ze(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const o=[];i.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const v=ze(f);v.onlineState=p;let y=!1;v.queries.forEach(((_,T)=>{for(const N of T.Sa)N.va(p)&&(y=!0)})),y&&kg(v)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ij(r,e,s){const i=ze(r);i.sharedClientState.updateQueryState(e,"rejected",s);const o=i.Au.get(e),d=o&&o.key;if(d){let f=new Tt(Ie.comparator);f=f.insert(d,hn.newNoDocument(d,Le.min()));const p=et().add(d),v=new Qd(Le.min(),new Map,new Tt(Je),f,p);await u1(i,v),i.du=i.du.remove(d),i.Au.delete(e),Mg(i)}else await Fm(i.localStore,e,!1).then((()=>Km(i,e,s))).catch(Ml)}async function aj(r,e){const s=ze(r),i=e.batch.batchId;try{const o=await p4(s.localStore,e);h1(s,i,null),d1(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await xc(s,o)}catch(o){await Ml(o)}}async function lj(r,e,s){const i=ze(r);try{const o=await(function(f,p){const v=ze(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return v.mutationQueue.lookupMutationBatch(y,p).next((T=>(lt(T!==null,37113),_=T.keys(),v.mutationQueue.removeMutationBatch(y,T)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>v.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);h1(i,e,s),d1(i,e),i.sharedClientState.updateMutationState(e,"rejected",s),await xc(i,o)}catch(o){await Ml(o)}}function d1(r,e){(r.mu.get(e)||[]).forEach((s=>{s.resolve()})),r.mu.delete(e)}function h1(r,e,s){const i=ze(r);let o=i.Vu[i.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Km(r,e,s=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||f1(r,i)}))}function f1(r,e){r.Eu.delete(e.path.canonicalString());const s=r.du.get(e);s!==null&&(Ng(r.remoteStore,s),r.du=r.du.remove(e),r.Au.delete(s),Mg(r))}function zx(r,e,s){for(const i of s)i instanceof l1?(r.Ru.addReference(i.key,e),oj(r,i)):i instanceof o1?(Te(Dg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||f1(r,i.key)):Ve(19791,{wu:i})}function oj(r,e){const s=e.key,i=s.path.canonicalString();r.du.get(s)||r.Eu.has(i)||(Te(Dg,"New document in limbo: "+s),r.Eu.add(i),Mg(r))}function Mg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const s=new Ie(yt.fromString(e)),i=r.fu.next();r.Au.set(i,new W4(s)),r.du=r.du.insert(s,i),Z_(r.remoteStore,new vi($s(yg(s.path)),i,"TargetPurposeLimboResolution",zd.ce))}}async function xc(r,e,s){const i=ze(r),o=[],d=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,v)=>{f.push(i.pu(v,e,s).then((y=>{if((y||s)&&i.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(v.targetId)?.current;i.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Tg.As(v.targetId,y);d.push(_)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(v,y){const _=ze(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(y,(N=>le.forEach(N.Es,(U=>_.persistence.referenceDelegate.addReference(T,N.targetId,U))).next((()=>le.forEach(N.ds,(U=>_.persistence.referenceDelegate.removeReference(T,N.targetId,U)))))))))}catch(T){if(!Ol(T))throw T;Te(Sg,"Failed to update sequence numbers: "+T)}for(const T of y){const N=T.targetId;if(!T.fromCache){const U=_.Ms.get(N),X=U.snapshotVersion,G=U.withLastLimboFreeSnapshotVersion(X);_.Ms=_.Ms.insert(N,G)}}})(i.localStore,d))}async function cj(r,e){const s=ze(r);if(!s.currentUser.isEqual(e)){Te(Dg,"User change. New user:",e.toKey());const i=await Q_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((v=>{v.reject(new be(ne.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(s,i.Ls)}}function uj(r,e){const s=ze(r),i=s.Au.get(e);if(i&&i.hu)return et().add(i.key);{let o=et();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function m1(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=u1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ij.bind(null,e),e.Pu.H_=K4.bind(null,e.eventManager),e.Pu.yu=Q4.bind(null,e.eventManager),e}function dj(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lj.bind(null,e),e}class Dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return g4(this.persistence,new h4,e.initialUser,this.serializer)}Cu(e){return new K_(Eg.mi,this.serializer)}Du(e){return new w4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dd.provider={build:()=>new Dd};class hj extends Dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){lt(this.persistence.referenceDelegate instanceof Id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new WA(i,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new K_((i=>Id.mi(i,s)),this.serializer)}}class Qm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ux(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cj.bind(null,this.syncEngine),await F4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Y4})()}createDatastore(e){const s=$d(e.databaseInfo.databaseId),i=(function(d){return new A4(d)})(e.databaseInfo);return(function(d,f,p,v){return new I4(d,f,p,v)})(e.authCredentials,e.appCheckCredentials,i,s)}createRemoteStore(e){return(function(i,o,d,f,p){return new D4(i,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Ux(this.syncEngine,s,0)),(function(){return Dx.v()?new Dx:new E4})())}createSyncEngine(e,s){return(function(o,d,f,p,v,y,_){const T=new Z4(o,d,f,p,v,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const i=ze(s);Te(wa,"RemoteStore shutting down."),i.Ea.add(5),await vc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="FirestoreClient";class fj{constructor(e,s,i,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=i,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(i,(async f=>{Te(Ri,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Te(Ri,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const i=Ig(s,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function vm(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Ri,"Initializing OfflineComponentProvider");const s=r.configuration;await e.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Q_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Bx(r,e){r.asyncQueue.verifyOperationInProgress();const s=await mj(r);Te(Ri,"Initializing OnlineComponentProvider"),await e.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Ox(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Ox(e.remoteStore,o))),r._onlineComponents=e}async function mj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Ri,"Using user provided OfflineComponentProvider");try{await vm(r,r._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Tl("Error using user provided cache. Falling back to memory cache: "+s),await vm(r,new Dd)}}else Te(Ri,"Using default OfflineComponentProvider"),await vm(r,new hj(void 0));return r._offlineComponents}async function p1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Ri,"Using user provided OnlineComponentProvider"),await Bx(r,r._uninitializedComponentsProvider._online)):(Te(Ri,"Using default OnlineComponentProvider"),await Bx(r,new Qm))),r._onlineComponents}function gj(r){return p1(r).then((e=>e.syncEngine))}async function $m(r){const e=await p1(r),s=e.eventManager;return s.onListen=J4.bind(null,e.syncEngine),s.onUnlisten=nj.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=ej.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=sj.bind(null,e.syncEngine),s}function pj(r,e,s={}){const i=new Ei;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,v,y){const _=new g1({next:N=>{_.Nu(),f.enqueueAndForget((()=>i1(d,T))),N.fromCache&&v.source==="server"?y.reject(new be(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),T=new a1(p,_,{includeMetadataChanges:!0,qa:!0});return r1(d,T)})(await $m(r),r.asyncQueue,e,s,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="firestore.googleapis.com",Hx=!0;class Fx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v1,this.ssl=Hx}else this.host=e.host,this.ssl=e.ssl??Hx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$A)throw new be(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new be(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,s,i,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new EN;switch(i.type){case"firstParty":return new AN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new be(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=qx.get(s);i&&(Te("ComponentProvider","Removing Datastore"),qx.delete(s),i.terminate())})(this),Promise.resolve()}}function yj(r,e,s,i={}){r=Pn(r,Zd);const o=Rl(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${s}`;o&&(cb(`https://${p}`),ub("Firestore",!0)),d.host!==v1&&d.host!==p&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...d,host:p,ssl:o,emulatorOptions:i};if(!ya(v,f)&&(r._setSettings(v),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=dn.MOCK_USER;else{y=Rw(i.mockUserToken,r._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new be(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new dn(T)}r._authCredentials=new TN(new r_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class kt{constructor(e,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,i){if(gc(s,kt._jsonSchema))return new kt(e,i||null,new Ie(yt.fromString(s.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Ft("string",kt._jsonSchemaVersion),referencePath:Ft("string")};class Ti extends Oi{constructor(e,s,i){super(e,s,yg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ie(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function Et(r,e,...s){if(r=Dt(r),i_("collection","path",e),r instanceof Zd){const i=yt.fromString(e,...s);return sx(i),new Ti(r,null,i)}{if(!(r instanceof kt||r instanceof Ti))throw new be(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(e,...s));return sx(i),new Ti(r.firestore,null,i)}}function Gt(r,e,...s){if(r=Dt(r),arguments.length===1&&(e=dg.newId()),i_("doc","path",e),r instanceof Zd){const i=yt.fromString(e,...s);return nx(i),new kt(r,null,new Ie(i))}{if(!(r instanceof kt||r instanceof Ti))throw new be(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(e,...s));return nx(i),new kt(r.firestore,r instanceof Ti?r.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="AsyncQueue";class Yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X_(this,"async_queue_retry"),this._c=()=>{const i=ym();i&&Te(Gx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const s=ym();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=ym();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;Te(Gx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,jr("INTERNAL UNHANDLED ERROR: ",Kx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(e,s,i){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Rg.createAndSchedule(this,e,s,i,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Ve(47125,{Pc:Kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Kx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(r){return(function(s,i){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of i)if(d in o&&typeof o[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Rr extends Zd{constructor(e,s,i,o){super(e,s,i,o),this.type="firestore",this._queue=new Yx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yx(e),this._firestoreClient=void 0,await e}}}function vj(r,e){const s=typeof r=="object"?r:mb(),i=typeof r=="string"?r:Sd,o=tg(s,"firestore").getImmediate({identifier:i});if(!o._initialized){const d=jw("firestore");d&&yj(o,...d)}return o}function Jd(r){if(r._terminated)throw new be(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||xj(r),r._firestoreClient}function xj(r){const e=r._freezeSettings(),s=(function(o,d,f,p){return new FN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,y1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new fj(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(on.fromBase64String(e))}catch(s){throw new be(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ts(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:Ft("string",ts._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new be(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new be(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new be(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(gc(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:Ft("string",Ws._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let d=0;d<i.length;++d)if(i[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Zs(e.vectorValues);throw new be(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:Ft("string",Zs._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=/^__.*__$/;class _j{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,s,this.fieldTransforms):new pc(e,this.data,s,this.fieldTransforms)}}class x1{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return new Mi(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function b1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:r})}}class Vg{constructor(e,s,i,o,d,f){this.settings=e,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(b1(this.Ac)&&bj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wj{constructor(e,s,i){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=i||$d(e)}Cc(e,s,i,o=!1){return new Vg({Ac:e,methodName:s,Dc:i,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(r){const e=r._freezeSettings(),s=$d(r._databaseId);return new wj(r._databaseId,!!e.ignoreUndefinedProperties,s)}function Lg(r,e,s,i,o,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,s,o);Pg("Data must be an object, but it was:",f,i);const p=E1(i,f);let v,y;if(d.merge)v=new Ln(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const T of d.mergeFields){const N=Xm(e,T,s);if(!f.contains(N))throw new be(ne.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);S1(_,N)||_.push(N)}v=new Ln(_),y=f.fieldTransforms.filter((T=>v.covers(T.field)))}else v=null,y=f.fieldTransforms;return new _j(new Nn(p),v,y)}class eh extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function _1(r,e,s,i){const o=r.Cc(1,e,s);Pg("Data must be an object, but it was:",o,i);const d=[],f=Nn.empty();Di(i,((v,y)=>{const _=Ug(e,v,s);y=Dt(y);const T=o.yc(_);if(y instanceof eh)d.push(_);else{const N=wc(y,T);N!=null&&(d.push(_),f.set(_,N))}}));const p=new Ln(d);return new x1(f,p,o.fieldTransforms)}function w1(r,e,s,i,o,d){const f=r.Cc(1,e,s),p=[Xm(e,i,s)],v=[o];if(d.length%2!=0)throw new be(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<d.length;N+=2)p.push(Xm(e,d[N])),v.push(d[N+1]);const y=[],_=Nn.empty();for(let N=p.length-1;N>=0;--N)if(!S1(y,p[N])){const U=p[N];let X=v[N];X=Dt(X);const G=f.yc(U);if(X instanceof eh)y.push(U);else{const Y=wc(X,G);Y!=null&&(y.push(U),_.set(U,Y))}}const T=new Ln(y);return new x1(_,T,f.fieldTransforms)}function Ej(r,e,s,i=!1){return wc(s,r.Cc(i?4:3,e))}function wc(r,e){if(T1(r=Dt(r)))return Pg("Unsupported field value:",e,r),E1(r,e);if(r instanceof Og)return(function(i,o){if(!b1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const d=i._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const d=[];let f=0;for(const p of i){let v=wc(p,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),f++}return{arrayValue:{values:d}}})(r,e)}return(function(i,o){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const d=bt.fromDate(i);return{timestampValue:Rd(o.serializer,d)}}if(i instanceof bt){const d=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rd(o.serializer,d)}}if(i instanceof Ws)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ts)return{bytesValue:U_(o.serializer,i._byteString)};if(i instanceof kt){const d=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:_g(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Zs)return(function(f,p){return{mapValue:{fields:{[m_]:{stringValue:g_},[Nd]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return vg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Ud(i)}`)})(r,e)}function E1(r,e){const s={};return o_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(r,((i,o)=>{const d=wc(o,e.mc(i));d!=null&&(s[i]=d)})),{mapValue:{fields:s}}}function T1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof Ws||r instanceof ts||r instanceof kt||r instanceof Og||r instanceof Zs)}function Pg(r,e,s){if(!T1(s)||!a_(s)){const i=Ud(s);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Xm(r,e,s){if((e=Dt(e))instanceof bc)return e._internalPath;if(typeof e=="string")return Ug(r,e);throw Md("Field path arguments must be of type string or ",r,!1,void 0,s)}const Tj=new RegExp("[~\\*/\\[\\]]");function Ug(r,e,s){if(e.search(Tj)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new bc(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Md(r,e,s,i,o){const d=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(d||f)&&(v+=" (found",d&&(v+=` in field ${i}`),f&&(v+=` in document ${o}`),v+=")"),new be(ne.INVALID_ARGUMENT,p+r+v)}function S1(r,e){return r.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,s,i,o,d){this._firestore=e,this._userDataWriter=s,this._key=i,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(th("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class Sj extends N1{data(){return super.data()}}function th(r,e){return typeof e=="string"?Ug(r,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class j1 extends zg{}function ss(r,e,...s){let i=[];e instanceof zg&&i.push(e),i=i.concat(s),(function(d){const f=d.filter((v=>v instanceof Bg)).length,p=d.filter((v=>v instanceof nh)).length;if(f>1||f>0&&p>0)throw new be(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class nh extends j1{constructor(e,s,i){super(),this._field=e,this._op=s,this._value=i,this.type="where"}static _create(e,s,i){return new nh(e,s,i)}_apply(e){const s=this._parse(e);return C1(e._query,s),new Oi(e.firestore,e.converter,Pm(e._query,s))}_parse(e){const s=_c(e.firestore);return(function(d,f,p,v,y,_,T){let N;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new be(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Xx(T,_);const X=[];for(const G of T)X.push($x(v,d,G));N={arrayValue:{values:X}}}else N=$x(v,d,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Xx(T,_),N=Ej(p,f,T,_==="in"||_==="not-in");return Ht.create(y,_,N)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Nj(r,e,s){const i=e,o=th("where",r);return nh._create(o,i,s)}class Bg extends zg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Bg(e,s)}_parse(e){const s=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:_s.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const v of p)C1(f,v),f=Pm(f,v)})(e._query,s),new Oi(e.firestore,e.converter,Pm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends j1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new qg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new be(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(d,f)})(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Vl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ws(r,e="asc"){const s=e,i=th("orderBy",r);return qg._create(i,s)}function $x(r,e,s){if(typeof(s=Dt(s))=="string"){if(s==="")throw new be(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&s.indexOf("/")!==-1)throw new be(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=e.path.child(yt.fromString(s));if(!Ie.isDocumentKey(i))throw new be(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dx(r,new Ie(i))}if(s instanceof kt)return dx(r,s._key);throw new be(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(s)}.`)}function Xx(r,e){if(!Array.isArray(r)||r.length===0)throw new be(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C1(r,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new be(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class Aj{convertValue(e,s="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const i={};return Di(e,((o,d)=>{i[o]=this.convertValue(d,s)})),i}convertVectorValue(e){const s=e.fields?.[Nd].arrayValue?.values?.map((i=>It(i.doubleValue)));return new Zs(s)}convertGeoPoint(e){return new Ws(It(e.latitude),It(e.longitude))}convertArray(e,s){return(e.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const i=qd(e);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const s=Ni(e);return new bt(s.seconds,s.nanos)}convertDocumentKey(e,s){const i=yt.fromString(e);lt(G_(i),9688,{name:e});const o=new rc(i.get(1),i.get(3)),d=new Ie(i.popFirst(5));return o.isEqual(s)||jr(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(r,e,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(e,s):r.toFirestore(e):e,i}class Yo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends N1{constructor(e,s,i,o,d,f){super(e,s,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const i=this._document.data.field(th("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ga._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Ft("string",ga._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class md extends ga{data(e={}){return super.data(e)}}class pa{constructor(e,s,i,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((i=>{e.call(s,new md(this._firestore,this._userDataWriter,i.key,i,new Yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new be(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const v=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const v=new md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:jj(p.type),doc:v,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),i.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:Ft("string",pa._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Fg extends Aj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,s)}}function Cj(r){r=Pn(r,Oi);const e=Pn(r.firestore,Rr),s=Jd(e),i=new Fg(e);return A1(r._query),pj(s,r._query).then((o=>new pa(e,i,r,o)))}function Rj(r,e,s){r=Pn(r,kt);const i=Pn(r.firestore,Rr),o=Hg(r.converter,e,s);return Ec(i,[Lg(_c(i),"setDoc",r._key,o,r.converter!==null,s).toMutation(r._key,yn.none())])}function er(r,e,s,...i){r=Pn(r,kt);const o=Pn(r.firestore,Rr),d=_c(o);let f;return f=typeof(e=Dt(e))=="string"||e instanceof bc?w1(d,"updateDoc",r._key,e,s,i):_1(d,"updateDoc",r._key,e),Ec(o,[f.toMutation(r._key,yn.exists(!0))])}function Ii(r){return Ec(Pn(r.firestore,Rr),[new Kd(r._key,yn.none())])}function Sr(r,e){const s=Pn(r.firestore,Rr),i=Gt(r),o=Hg(r.converter,e);return Ec(s,[Lg(_c(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,yn.exists(!1))]).then((()=>i))}function An(r,...e){r=Dt(r);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Qx(e[i])||(s=e[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Qx(e[i])){const v=e[i];e[i]=v.next?.bind(v),e[i+1]=v.error?.bind(v),e[i+2]=v.complete?.bind(v)}let d,f,p;if(r instanceof kt)f=Pn(r.firestore,Rr),p=yg(r._key.path),d={next:v=>{e[i]&&e[i](Ij(f,r,v))},error:e[i+1],complete:e[i+2]};else{const v=Pn(r,Oi);f=Pn(v.firestore,Rr),p=v._query;const y=new Fg(f);d={next:_=>{e[i]&&e[i](new pa(f,y,v,_))},error:e[i+1],complete:e[i+2]},A1(r._query)}return(function(y,_,T,N){const U=new g1(N),X=new a1(_,U,T);return y.asyncQueue.enqueueAndForget((async()=>r1(await $m(y),X))),()=>{U.Nu(),y.asyncQueue.enqueueAndForget((async()=>i1(await $m(y),X)))}})(Jd(f),p,o,d)}function Ec(r,e){return(function(i,o){const d=new Ei;return i.asyncQueue.enqueueAndForget((async()=>rj(await gj(i),o,d))),d.promise})(Jd(r),e)}function Ij(r,e,s){const i=s.docs.get(e._key),o=new Fg(r);return new ga(r,o,e._key,i,new Yo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=_c(e)}set(e,s,i){this._verifyNotCommitted();const o=xm(e,this._firestore),d=Hg(o.converter,s,i),f=Lg(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,yn.none())),this}update(e,s,i,...o){this._verifyNotCommitted();const d=xm(e,this._firestore);let f;return f=typeof(s=Dt(s))=="string"||s instanceof bc?w1(this._dataReader,"WriteBatch.update",d._key,s,i,o):_1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=xm(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(s._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xm(r,e){if((r=Dt(r)).firestore!==e)throw new be(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(r){return Jd(r=Pn(r,Rr)),new kj(r,(e=>Ec(r,e)))}(function(e,s=!0){(function(o){Dl=o})(Il),El(new va("firestore",((i,{instanceIdentifier:o,options:d})=>{const f=i.getProvider("app").getImmediate(),p=new Rr(new SN(i.getProvider("auth-internal")),new jN(f,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new be(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),_i(Zv,Jv,e),_i(Zv,Jv,"esm2020")})();const Mj={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},R1=fb(Mj),ns=xN(R1),Ue=vj(R1),bm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function Oj(){const[r,e]=se.useState(!0),[s,i]=se.useState(""),[o,d]=se.useState(""),[f,p]=se.useState(""),[v,y]=se.useState(""),[_,T]=se.useState(!1),N=async G=>{G.preventDefault(),p(""),y(""),T(!0);try{if(r)await rS(ns,s,o);else{const he=(await sS(ns,s,o)).user;await Rj(Gt(Ue,"users",he.uid),{email:he.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(Y){p(X(Y.code))}finally{T(!1)}},U=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await nS(ns,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(G){p(X(G.code))}},X=G=>{switch(G){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+G}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),v&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:v}),c.jsxs("form",{onSubmit:N,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(bm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:G=>i(G.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(bm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:G=>d(G.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:U,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(bm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const fi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},Vj=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,i=20,o=Math.max(...r.map(p=>p.value))||100,d=r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),T=isNaN(y)?i:y,N=isNaN(_)?e-i:_;return`${T},${N}`}).join(" "),f=`${d} ${s-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:s-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((p,v)=>{const y=r.length>1?v/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),T=isNaN(y)?i:y,N=isNaN(_)?e-i:_;return c.jsx("circle",{cx:T,cy:N,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},sd=({title:r,value:e,subtext:s,icon:i,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(fi.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(i,{})})]});function Wx({onNavigate:r=()=>{}}){const[e,s]=se.useState(null),[i,o]=se.useState(!0),[d,f]=se.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,v]=se.useState([]),[y,_]=se.useState([]),[T,N]=se.useState([]),[U,X]=se.useState([]);return se.useEffect(()=>{const G=ns.onAuthStateChanged(ye=>{s(ye),o(!1)}),Y=An(ss(Et(Ue,"siparisler"),ws("createdAt","desc")),ye=>{const Se=ye.docs.map(w=>w.data());_(Se.slice(0,5));const xe={};Se.forEach(w=>{const A=w.date?w.date.slice(0,7):"N/A";xe[A]=(xe[A]||0)+1});const R=Object.entries(xe).map(([w,A])=>({label:w,value:A})).sort((w,A)=>w.label.localeCompare(A.label));X(R),f(w=>({...w,activeOrders:Se.length}))}),he=An(Et(Ue,"teklifler"),ye=>{f(Se=>({...Se,pendingProposals:ye.size}))}),oe=An(Et(Ue,"employees"),ye=>{const Se=ye.docs.map(w=>w.data());f(w=>({...w,totalWorkers:Se.length}));const xe=new Date().toISOString().split("T")[0],R=Se.filter(w=>{const A=w.attendance?.[xe];return A&&["paid_leave","unpaid_leave","off"].includes(A.type)});v(R)}),ve=An(Et(Ue,"inventory_movements"),ye=>{const Se=ye.docs.map(w=>w.data()),xe={};Se.forEach(w=>{const A=Number(w.quantity)||0,C=w.action==="add"?A:-A;xe[w.productName]||(xe[w.productName]=0),xe[w.productName]+=C});const R=Object.entries(xe).filter(([w,A])=>A<100).map(([w,A])=>({name:w,qty:A}));N(R.slice(0,5)),f(w=>({...w,inventoryCount:Object.keys(xe).length}))});return()=>{G(),Y(),he(),oe(),ve()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(fi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(sd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:fi.Cart,color:"bg-indigo-600"}),c.jsx(sd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:fi.Document,color:"bg-purple-600"}),c.jsx(sd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:fi.Box,color:"bg-emerald-600"}),c.jsx(sd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:fi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(Vj,{data:U})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((G,Y)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",G.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",G.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:G.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},Y)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(fi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((G,Y)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:G.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:G.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:G.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},Y)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(fi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:T.length>0?T.map((G,Y)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:G.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[G.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},Y)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ge={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},vs=nb.forwardRef(({className:r="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${r}
    `,...e}));nb.forwardRef(({className:r="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${r}
    `,...e}));const fa=({children:r,variant:e="primary",className:s="",...i})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...i,children:r})},Lj=({checked:r,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})})}),_m=({options:r,selected:e,onChange:s,placeholder:i="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,v]=se.useState(!1),[y,_]=se.useState(""),T=se.useRef(null);se.useEffect(()=>{const Y=he=>{T.current&&!T.current.contains(he.target)&&v(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const N=Y=>{if(o){const he=e.includes(Y)?e.filter(oe=>oe!==Y):[...e,Y];s(he)}else s(Y),v(!1),_("")},U=Y=>{_(Y.target.value),f&&s(Y.target.value)},X=o?e.length>0?`(${e.length})`:"":e||i,G=r.filter(Y=>Y.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:T,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(vs,{placeholder:i,value:e,onChange:U,onFocus:()=>v(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>v(!p),children:c.jsx(Ge.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>v(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Ge.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${i} ${X}`:X})]}),c.jsx(Ge.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:Y=>_(Y.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[G.map(Y=>{const he=o?e.includes(Y):e===Y;return c.jsxs("div",{onClick:()=>f?s(Y):N(Y),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${he?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${he?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:he&&c.jsx(Ge.Check,{})}),c.jsx("span",{className:"truncate",children:Y})]}),d&&c.jsx("button",{type:"button",onClick:oe=>{oe.stopPropagation(),d(Y)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Ge.Trash,{})})]},Y)}),G.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},I1=({isOpen:r,onClose:e,title:s,children:i,maxWidth:o="max-w-xl"})=>r?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:i})]})}):null,k1=({children:r,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:r}),sh=({startDate:r,endDate:e,onStartChange:s,onEndChange:i})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:r,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>i(o.target.value)})]}),ps=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",Pj=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"}):"-",Uj=({checked:r,onChange:e,label:s})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:[c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function zj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState([]),[v,y]=se.useState(!1),[_,T]=se.useState({start:"",end:""}),[N,U]=se.useState(!1),[X,G]=se.useState(!1),[Y,he]=se.useState(!1),[oe,ve]=se.useState(null),[ye,Se]=se.useState(null),[xe,R]=se.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[w,A]=se.useState({name:"",company:"",phone:"",email:""}),[C,j]=se.useState(null),[k,I]=se.useState({docNo:"",amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),ce=H=>{const ie=(H.qty||0)*(H.unitPrice||0),ae=ie*((H.vatRate||0)/100);return ie+ae},ke=H=>{if(!H)return{subtotal:0,totalVAT:0,grandTotal:0};const ie=H.reduce((we,ge)=>we+(ge.qty||0)*(ge.unitPrice||0),0),ae=H.reduce((we,ge)=>we+ce(ge),0);return{subtotal:ie,totalVAT:ae-ie,grandTotal:ae}},K=H=>H?H.reduce((ie,ae)=>ie+ce(ae),0):0,fe=H=>{const ie=f.filter(ge=>ge.customerId===H);let ae=0,we=0;return ie.forEach(ge=>{ge.type==="payment"?we+=parseFloat(ge.amount)||0:ae+=K(ge.items)}),ae-we};se.useEffect(()=>{const H=ns.onAuthStateChanged(je=>{e(je),i(!1)}),ie=ss(Et(Ue,"customers"),ws("createdAt","desc")),ae=An(ie,je=>{d(je.docs.map(Ke=>({id:Ke.id,...Ke.data()})))}),we=ss(Et(Ue,"sales"),ws("createdAt","desc")),ge=An(we,je=>{p(je.docs.map(Ke=>({id:Ke.id,...Ke.data()})))});return()=>{H(),ae(),ge()}},[]);const _e=H=>{let ie=f.filter(ge=>ge.customerId===H);ie.sort((ge,je)=>new Date(ge.date)-new Date(je.date));let ae=0;const we=[];return ie.forEach(ge=>{if(ge.type==="payment"){const je=parseFloat(ge.amount)||0;ae-=je,we.push({docNo:ge.docNo||"-",date:ge.date,action:"TAHSLAT",desc:`${ge.paymentMethod} ile deme - ${ge.note||""}`,qty:"-",unitPrice:"-",borc:je,alacak:0,balance:ae})}else ge.items?.forEach(je=>{const Ke=ce(je);ae+=Ke,we.push({docNo:ge.docNo,date:ge.date,action:"SATI",desc:je.name,qty:je.qty,unitPrice:je.unitPrice,borc:0,alacak:Ke,balance:ae})})}),we},Be=async H=>{H.preventDefault();try{await Sr(Et(Ue,"customers"),{...w,createdAt:new Date().toISOString()}),A({name:"",company:"",phone:"",email:""}),G(!1)}catch(ie){alert("Hata: "+ie.message)}},Ye=async H=>{window.confirm("Mteriyi silmek istiyor musunuz?")&&await Ii(Gt(Ue,"customers",H))},M=H=>{ve(H),j(null);const ie="TH-"+Date.now().toString().slice(-6);I({docNo:ie,amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),he(!0)},J=(H,ie)=>{ve(ie),j(H),I({docNo:H.docNo||"",amount:H.amount,type:H.paymentMethod,note:H.note,date:H.date}),he(!0)},me=async H=>{if(H.preventDefault(),!!oe)try{const ie={customerId:oe.id,type:"payment",docNo:k.docNo,amount:parseFloat(k.amount),paymentMethod:k.type,note:k.note,date:k.date,createdAt:C?C.createdAt:new Date().toISOString()};C?await er(Gt(Ue,"sales",C.id),ie):await Sr(Et(Ue,"sales"),ie),he(!1)}catch(ie){alert("Hata: "+ie.message)}},L=H=>{ve(H),Se(null);const ie="DOC-"+Date.now().toString().slice(-6);R({docNo:ie,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{name:"",qty:1,unitPrice:0,vatRate:20}]}),U(!0)},V=(H,ie)=>{ve(ie),Se(H),R({docNo:H.docNo,date:H.date,description:H.description,status:H.status,items:H.items||[]}),U(!0)},te=async H=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Ii(Gt(Ue,"sales",H))}catch(ie){alert("Hata: "+ie.message)}},ue=async H=>{H.preventDefault();try{const ie={customerId:oe.id,...xe,type:"sale",createdAt:ye?ye.createdAt:new Date().toISOString()};ye?await er(Gt(Ue,"sales",ye.id),ie):await Sr(Et(Ue,"sales"),ie),U(!1)}catch(ie){alert("Hata: "+ie.message)}},Ce=(H,ie,ae)=>{const we=[...xe.items];we[H][ie]=ie==="name"?ae:Number(ae),R({...xe,items:we})},Me=()=>R({...xe,items:[...xe.items,{name:"",qty:1,unitPrice:0,vatRate:20}]}),Z=H=>R({...xe,items:xe.items.filter((ie,ae)=>ae!==H)}),Ee=H=>{const ie=_e(H.id);let ae="data:text/csv;charset=utf-8,\uFEFF";ae+=`Tarih,Belge No,Hareket,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,ie.forEach(je=>{const Ke=mn=>ps(mn).replace(" ",""),pt=[`"${je.date}"`,`"${je.docNo}"`,`"${je.action}"`,`"${je.desc}"`,`"${je.qty}"`,`"${Ke(je.unitPrice)}"`,`"${Ke(je.borc)}"`,`"${Ke(je.alacak)}"`,`"${Ke(je.balance)}"`].join(",");ae+=pt+`
`});const we=encodeURI(ae),ge=document.createElement("a");ge.setAttribute("href",we),ge.setAttribute("download",`${H.name}_Ekstre.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},de=H=>{const ie=_e(H.id),ae=window.open("","","height=800,width=1000");if(!ae)return;const we=`
      <html><head><title>Ekstre - ${H.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:11px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:8px;text-align:left}
        td{border:1px solid #d1d5db;padding:6px}
        .right{text-align:right}
        .payment-row{background-color:#f0fdf4} 
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
      </style>
      </head><body>
        <h2>${H.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr><th>Tarih</th><th>Belge No</th><th>Aklama</th><th class="right">Miktar</th><th class="right">B.Fiyat</th><th class="right">deme (Alnan)</th><th class="right">Tutar (Bor)</th><th class="right">Bakiye</th></tr>
          </thead>
          <tbody>
            ${ie.map(ge=>`
              <tr class="${ge.action==="TAHSLAT"?"payment-row":"sale-row"}">
                <td>${ge.date}</td>
                <td>${ge.docNo}</td>
                <td>${ge.desc}</td>
                <td class="right">${ge.qty}</td>
                <td class="right">${ge.unitPrice!=="-"?ps(ge.unitPrice):"-"}</td>
                <td class="right">${ge.borc>0?ps(ge.borc):"-"}</td>
                <td class="right">${ge.alacak>0?ps(ge.alacak):"-"}</td>
                <td class="right bold" style="color:${ge.balance>0?"#dc2626":"#059669"}">${ps(ge.balance)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body></html>
    `;ae.document.open(),ae.document.write(we),ae.document.close(),ae.setTimeout(()=>{ae.focus(),ae.print()},500)};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Ge.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(sh,{startDate:_.start,endDate:_.end,onStartChange:H=>T({..._,start:H}),onEndChange:H=>T({..._,end:H})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Uj,{checked:v,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>G(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ge.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(H=>{const ie=f.filter(we=>{const ge=we.customerId===H.id;let je=!0;return _.start&&we.date<_.start&&(je=!1),_.end&&we.date>_.end&&(je=!1),ge&&je}).sort((we,ge)=>new Date(ge.date)-new Date(we.date)),ae=fe(H.id);return c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ge.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:H.name}),c.jsx("p",{className:"text-xs text-gray-500",children:H.company})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${ae>0?"text-red-500":"text-emerald-600"}`,children:ps(ae)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:ae>0?"(Borlu)":"(Alacakl/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>M(H),className:"flex items-center px-4 py-2 bg-emerald-100 text-emerald-700 rounded-xl hover:bg-emerald-200 transition-colors text-xs font-bold shadow-sm border border-emerald-200",children:[c.jsx(Ge.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"deme Al"})]}),c.jsxs("button",{onClick:()=>L(H),className:"flex items-center px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl hover:bg-indigo-200 transition-colors text-xs font-bold shadow-sm border border-indigo-200",children:[c.jsx(Ge.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>de(H),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ge.Printer,{})}),c.jsx("button",{onClick:()=>Ee(H),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ge.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Ye(H.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ge.Trash,{})})]})]})]})]}),ie.length>0?c.jsx("div",{className:"bg-white/40",children:ie.map(we=>{const ge=we.type==="payment",je=ge?we.amount:K(we.items);return c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${ge?"bg-emerald-50/30":""}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:["                                                    ",c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ge?"bg-emerald-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:ge?"TAHSLAT":"SATI"}),c.jsxs("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:["#",we.docNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:Pj(we.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ge?`${we.paymentMethod} ile deme - ${we.note||""}`:`${we.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${ge?"text-emerald-600":"text-red-500"}`,children:[ge?"-":"+",ps(je)]}),!ge&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>V(we,H),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ge.Edit,{})}),c.jsx("button",{onClick:()=>te(we.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Ge.Trash,{})})]}),ge&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>J(we,H),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ge.Edit,{})}),c.jsx("button",{onClick:()=>te(we.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ge.Trash,{})})]})]})]},we.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic",children:"Hareket bulunamad."})]},H.id)})}),X&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.name,onChange:H=>A({...w,name:H.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.company,onChange:H=>A({...w,company:H.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.phone,onChange:H=>A({...w,phone:H.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.email,onChange:H=>A({...w,email:H.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>G(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),Y&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:C?"deme Dzenle":"deme Al"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:oe?.name}),c.jsxs("form",{onSubmit:me,className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-3 gap-2 p-1 bg-gray-100 rounded-xl",children:["Nakit","Kredi Kart","ek"].map(H=>c.jsx("button",{type:"button",onClick:()=>I({...k,type:H}),className:`py-2 text-xs font-bold rounded-lg transition-all ${k.type===H?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:H},H))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"number",autoFocus:!0,required:!0,className:"w-full border border-emerald-200 rounded-2xl px-4 py-4 text-2xl font-bold text-emerald-700 focus:ring-2 focus:ring-emerald-500 bg-emerald-50/30 text-center",placeholder:"0.00",value:k.amount,onChange:H=>I({...k,amount:H.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Belge No",value:k.docNo,onChange:H=>I({...k,docNo:H.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:k.date,onChange:H=>I({...k,date:H.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm mt-3",placeholder:"Not (Opsiyonel)",value:k.note,onChange:H=>I({...k,note:H.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>he(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-emerald-600 text-white rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),N&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:ue,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ye?"Sat Dzenle":"Yeni Sat"}),c.jsx("button",{type:"button",onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.docNo,onChange:H=>R({...xe,docNo:H.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.date,onChange:H=>R({...xe,date:H.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:xe.description,onChange:H=>R({...xe,description:H.target.value})})]})]}),c.jsxs("table",{className:"w-full text-left text-sm border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:xe.items.map((H,ie)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 font-medium",placeholder:"rn Ad",value:H.name,onChange:ae=>Ce(ie,"name",ae.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-center [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:H.qty,onChange:ae=>Ce(ie,"qty",ae.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-right [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:H.unitPrice,onChange:ae=>Ce(ie,"unitPrice",ae.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded px-2 py-1.5 text-xs focus:ring-2 focus:ring-indigo-500",value:H.vatRate,onChange:ae=>Ce(ie,"vatRate",ae.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 text-right font-bold text-indigo-600",children:ps(ce(H))}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Z(ie),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ge.Trash,{})})})]},ie))})]}),c.jsx("button",{type:"button",onClick:Me,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-2",children:"+ Yeni Satr"}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-64 p-6 bg-gray-50 rounded-2xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{children:ps(ke(xe.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{children:ps(ke(xe.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{className:"whitespace-nowrap",children:ps(ke(xe.items).grandTotal)})]}),"                                    "]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const Zx={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},Jx=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function Bj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState([]),[v,y]=se.useState({start:"",end:""}),[_,T]=se.useState(!1),[N,U]=se.useState(!1),[X,G]=se.useState(!1),[Y,he]=se.useState({}),[oe,ve]=se.useState({}),ye=se.useRef(null),[Se,xe]=se.useState(null),[R,w]=se.useState(null),[A,C]=se.useState({en:6,boy:4}),[j,k]=se.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]});if(se.useEffect(()=>{const Z=ns.onAuthStateChanged(ae=>{e(ae),i(!1)}),Ee=ss(Et(Ue,"customers"),ws("name","asc")),de=An(Ee,ae=>{p(ae.docs.map(we=>({id:we.id,...we.data()})))}),H=ss(Et(Ue,"siparisler"),ws("createdAt","desc")),ie=An(H,ae=>{d(ae.docs.map(we=>({id:we.id,...we.data()})))});return()=>{Z(),de(),ie()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const I=r?.email==="furkan@avci.jp",ce=Z=>{if(!Z)return;const Ee=new FileReader;Ee.onload=de=>{const H=new Image;H.onload=()=>{const ie=document.createElement("canvas"),ae=800,we=800;let ge=H.width,je=H.height;ge>je?ge>ae&&(je*=ae/ge,ge=ae):je>we&&(ge*=we/je,je=we),ie.width=ge,ie.height=je,ie.getContext("2d").drawImage(H,0,0,ge,je);const pt=ie.toDataURL("image/jpeg",.8);k(mn=>({...mn,image:pt}))},H.src=de.target.result},Ee.readAsDataURL(Z)},ke=Z=>{Z.preventDefault(),G(!0)},K=()=>G(!1),fe=Z=>{Z.preventDefault(),G(!1),Z.dataTransfer.files&&Z.dataTransfer.files[0]&&ce(Z.dataTransfer.files[0])},_e=Z=>{Z.clipboardData.files&&Z.clipboardData.files[0]&&ce(Z.clipboardData.files[0])},Be=()=>{xe(null);const Z="SP-"+Date.now().toString().slice(-6);k({siparisNo:Z,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),C({en:6,boy:4}),T(!0)},Ye=Z=>{xe(Z),k({siparisNo:Z.siparisNo,customerId:Z.customerId,date:Z.date,note:Z.note||"",image:Z.image,items:Z.items||[]}),T(!0)},M=async Z=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Ii(Gt(Ue,"siparisler",Z))}catch(Ee){alert(Ee.message)}},J=async Z=>{if(Z.preventDefault(),!j.customerId){alert("Ltfen bir mteri seiniz.");return}try{const Ee={...j,createdAt:Se?Se.createdAt:new Date().toISOString()};Se?await er(Gt(Ue,"siparisler",Se.id),Ee):await Sr(Et(Ue,"siparisler"),{...Ee,productionStatus:{}}),T(!1)}catch(Ee){alert(Ee.message)}},me=(Z,Ee,de)=>{const H=[...j.items],ie=H[Z];if(ie[Ee]=de,Ee==="en1"){const ae=parseFloat(de);isNaN(ae)?de===""&&(ie.en2=""):ie.en2=ae-A.en}if(Ee==="boy1"){const ae=parseFloat(de);isNaN(ae)?de===""&&(ie.boy2=""):ie.boy2=ae-A.boy}k({...j,items:H})},L=()=>{k({...j,items:[...j.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},V=Z=>{const Ee=j.items.filter((de,H)=>H!==Z);k({...j,items:Ee})},te=(Z,Ee)=>{const de=parseFloat(Ee)||0,H={...A,[Z]:de};C(H);const ie=j.items.map(ae=>({...ae,en2:ae.en1?parseFloat(ae.en1)-H.en:ae.en2,boy2:ae.boy1?parseFloat(ae.boy1)-H.boy:ae.boy2}));k({...j,items:ie})},ue=Z=>{w(Z),U(!0)},Ce=async(Z,Ee)=>{if(!R)return;const de=R.productionStatus||{},H=de[Z]||{},ie={...de,[Z]:{...H,[Ee]:!H[Ee]}};w({...R,productionStatus:ie}),await er(Gt(Ue,"siparisler",R.id),{productionStatus:ie})},Me=Z=>{const Ee=f.find(ie=>ie.id===Z.customerId)||{name:"Bilinmeyen Mteri"},de=window.open("","","height=800,width=1000");if(!de){alert("Pop-up engelleyiciyi kapatn.");return}const H=`
      <html><head><title>Sipari - ${Z.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 11px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${Ee.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${Z.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${Jx(Z.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 6%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 58%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- Sekil -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th>EKL</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
            </tr>
          </thead>
          <tbody>
            ${Z.items.map(ie=>`
              <tr>
                <td class="group-kasa">${ie.en1||"-"}</td>
                <td class="group-kasa">${ie.boy1||"-"}</td>
                <td class="group-kasa">${ie.genislik||"-"}</td>
                <td>${ie.takim||""}</td>
                <td class="col-desc">${ie.aciklama||""}</td>
                <td>${ie.sekil||""}</td>
                <td class="group-net"><strong>${ie.en2||""}</strong></td>
                <td class="group-net"><strong>${ie.boy2||""}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${Z.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${Z.note}
          </div>
        `:""}

        ${Z.image?`
          <div class="door-image-container">
            <img src="${Z.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;de.document.write(H),de.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_e,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(sh,{startDate:v.start,endDate:v.end,onStartChange:Z=>y({...v,start:Z}),onEndChange:Z=>y({...v,end:Z})}),I&&c.jsxs("button",{onClick:Be,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ge.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:f.map(Z=>{const Ee=o.filter(de=>{const H=de.customerId===Z.id;let ie=!0;return v.start&&(ie=ie&&de.date>=v.start),v.end&&(ie=ie&&de.date<=v.end),H&&ie});return Ee.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Ge.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:Z.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[Ee.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:Ee.map(de=>{const H=Y[de.id],ie=oe[de.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:de.image?c.jsx("img",{src:de.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",de.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:Jx(de.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[de.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>he(ae=>({...ae,[de.id]:!ae[de.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[H?c.jsx(Ge.ChevronUp,{}):c.jsx(Ge.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>ve(ae=>({...ae,[de.id]:!ae[de.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[ie?c.jsx(Ge.ChevronUp,{}):c.jsx(Ge.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>ue(de),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Ge.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Me(de),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ge.Printer,{})}),I&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Ye(de),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ge.Edit,{})}),c.jsx("button",{onClick:()=>M(de.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ge.Trash,{})})]})]})]}),H&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:de.items?.map((ae,we)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:ae.aciklama||"-"}),c.jsx("td",{className:"py-2",children:ae.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[ae.en1||"-"," x ",ae.boy1||"-"," x ",ae.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[ae.en2," x ",ae.boy2]}),c.jsx("td",{className:"py-2",children:ae.sekil||"-"})]},we))})]})}),ie&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(Zx).map(([ae,we])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:we.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:we.steps.map(ge=>{const je=de.productionStatus?.[ae]?.[ge.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:je?"text-purple-700 font-medium":"text-gray-400",children:ge.label}),je?c.jsx(Ge.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Ge.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},ge.id)})})]},ae))})})]},de.id)})})]},Z.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:J,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Se?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:j.siparisNo,onChange:Z=>k({...j,siparisNo:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:j.customerId,onChange:Z=>k({...j,customerId:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",children:[c.jsx("option",{value:"",children:"Seiniz..."}),f.map(Z=>c.jsxs("option",{value:Z.id,children:[Z.name," (",Z.company,")"]},Z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:j.date,onChange:Z=>k({...j,date:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${X?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:ke,onDragLeave:K,onDrop:fe,children:[c.jsx("input",{ref:ye,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Z=>ce(Z.target.files[0])}),j.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:j.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ge.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:X?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:j.note,onChange:Z=>k({...j,note:Z.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:A.en,onChange:Z=>te("en",Z.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:A.boy,onChange:Z=>te("boy",Z.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:j.items.map((Z,Ee)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Z.en1,onChange:de=>me(Ee,"en1",de.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Z.boy1,onChange:de=>me(Ee,"boy1",de.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:Z.genislik,onChange:de=>me(Ee,"genislik",de.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:Z.takim,onChange:de=>me(Ee,"takim",de.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:Z.aciklama,onChange:de=>me(Ee,"aciklama",de.target.value),onInput:de=>{de.target.style.height="auto",de.target.style.height=de.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${Ee}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:Z.sekil,onChange:de=>me(Ee,"sekil",de.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${Ee}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Z.en2,onChange:de=>me(Ee,"en2",de.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Z.boy2,onChange:de=>me(Ee,"boy2",de.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>V(Ee),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},Ee))})]}),c.jsx("button",{type:"button",onClick:L,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Se?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),N&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(Zx).map(([Z,Ee])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:Ee.title}),c.jsx("div",{className:"space-y-2",children:Ee.steps.map(de=>{const H=R.productionStatus?.[Z]?.[de.id];return c.jsxs("button",{onClick:()=>Ce(Z,de.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${H?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:de.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${H?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:H&&c.jsx(Ge.Check,{})})]},de.id)})})]},Z))})]})})]})}const qj=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",Hj=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),eb=({item:r,isAdd:e,onEdit:s,onDelete:i})=>c.jsxs(k1,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:qj(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ge.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ge.Trash,{})})]})]})]});function Fj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState({start:"",end:""}),[v,y]=se.useState(!1),[_,T]=se.useState([]),[N,U]=se.useState(!0),[X,G]=se.useState(!0),[Y,he]=se.useState(null),[oe,ve]=se.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),ye=se.useMemo(()=>[...new Set(o.map(ce=>ce.productName))].sort(),[o]),Se=se.useMemo(()=>{const ce=o.map(K=>K.unit).filter(Boolean),ke=["adet","kg","m2","m3","mt","paket"];return[...new Set([...ke,...ce])].sort()},[o]);se.useEffect(()=>{const ce=ns.onAuthStateChanged(fe=>{e(fe),i(!1)}),ke=ss(Et(Ue,"inventory_movements"),ws("date","desc")),K=An(ke,fe=>{d(fe.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{ce(),K()}},[]);const xe=se.useMemo(()=>o.filter(ce=>{let ke=!0;if(f.start&&(ke=ke&&ce.date>=f.start),f.end&&(ke=ke&&ce.date<=f.end),ce.productType==="raw"&&!N||(ce.productType==="manufactured"||ce.productType==="uretilmis")&&!X)return!1;let K=!0;return _.length>0&&(K=_.includes(ce.productName)),ke&&K}),[o,f,N,X,_]),R=xe.filter(ce=>ce.action==="add"),w=xe.filter(ce=>ce.action==="remove"),A=async ce=>{ce.preventDefault();try{const ke={...oe,quantity:Number(oe.quantity),createdAt:new Date().toISOString()};Y?await er(Gt(Ue,"inventory_movements",Y),ke):await Sr(Et(Ue,"inventory_movements"),ke),I()}catch(ke){alert("Hata: "+ke.message)}},C=async ce=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Ii(Gt(Ue,"inventory_movements",ce))},j=async ce=>{if(window.confirm(`"${ce}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const ke=ss(Et(Ue,"inventory_movements"),Nj("productName","==",ce)),K=await Cj(ke),fe=Dj(Ue);K.forEach(_e=>{fe.delete(_e.ref)}),await fe.commit(),_.includes(ce)&&T(_e=>_e.filter(Be=>Be!==ce)),oe.productName===ce&&ve(_e=>({..._e,productName:""}))}catch(ke){alert("Silme hatas: "+ke.message)}},k=ce=>{he(ce.id),ve({productType:ce.productType,productName:ce.productName,action:ce.action,quantity:ce.quantity,unit:ce.unit,date:ce.date}),y(!0)},I=()=>{y(!1),he(null),ve({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(sh,{startDate:f.start,endDate:f.end,onStartChange:ce=>p({...f,start:ce}),onEndChange:ce=>p({...f,end:ce})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(Hj,{showRaw:N,setShowRaw:U,showManufactured:X,setShowManufactured:G}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(_m,{options:ye,selected:_,onChange:T,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Ge.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(ce=>c.jsx(eb,{item:ce,isAdd:!0,onEdit:k,onDelete:C},ce.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[w.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[w.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),w.map(ce=>c.jsx(eb,{item:ce,isAdd:!1,onEdit:k,onDelete:C},ce.id))]})]})]}),c.jsx(I1,{isOpen:v,onClose:I,title:Y?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${oe.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:oe.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(Lj,{checked:oe.productType==="manufactured",onChange:ce=>ve({...oe,productType:ce?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(_m,{options:ye,selected:oe.productName,onChange:ce=>ve({...oe,productName:ce}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:j})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>ve({...oe,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${oe.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>ve({...oe,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${oe.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(vs,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:oe.quantity,onChange:ce=>ve({...oe,quantity:ce.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(_m,{options:Se,selected:oe.unit,onChange:ce=>ve({...oe,unit:ce}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(vs,{type:"date",required:!0,value:oe.date,onChange:ce=>ve({...oe,date:ce.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(fa,{type:"submit",variant:"primary",children:Y?"Gncelle":"Kaydet"}),c.jsx(fa,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const Wm={Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Box:()=>c.jsx("svg",{className:"w-8 h-8 opacity-20",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})})},Gj=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,i=800,o=40,d=i-o*2,f=s-o*2,p=r.flatMap(_=>e.map(T=>_[T]||0)),v=Math.max(...p,10)*1.1,y=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const T=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:T,x2:i-o,y2:T,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:T+4,textAnchor:"end",fontSize:"10",fill:"#6B7280",children:Math.round(v/4*_)})]},_)}),e.map((_,T)=>{const N=y[T%y.length],U=r.map((X,G)=>{const Y=o+G*(d/(r.length-1||1)),he=X[_]||0,oe=s-o-he/v*f;return`${Y},${oe}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:N,strokeWidth:"3",points:U,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 2px 2px rgba(0,0,0,0.1))"}),r.map((X,G)=>{const Y=o+G*(d/(r.length-1||1)),he=X[_]||0,oe=s-o-he/v*f;return c.jsx("circle",{cx:Y,cy:oe,r:"4",fill:"white",stroke:N,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${X.month} - ${_}: ${he}`})},G)})]},_)}),r.map((_,T)=>{const N=o+T*(d/(r.length-1||1));return c.jsx("text",{x:N,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},T)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,T)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-600 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[T%y.length]}}),_]},_))})]})},Yj=({name:r,qty:e,unit:s,type:i})=>{const o=i==="raw",d=o?"bg-amber-50/40 border-amber-200/40 shadow-amber-100/20":"bg-indigo-50/40 border-indigo-200/40 shadow-indigo-100/20",f=o?"text-amber-900":"text-indigo-900",p=o?"text-amber-700":"text-indigo-700",v=o?"bg-amber-500/10 text-amber-700 border-amber-200/50":"bg-indigo-500/10 text-indigo-700 border-indigo-200/50",y=o?"Ham Madde":"retilmi";return c.jsxs("div",{className:`relative backdrop-blur-xl rounded-3xl border p-6 shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 overflow-hidden group ${d}`,children:[c.jsx("div",{className:`absolute -top-10 -right-10 w-32 h-32 rounded-full blur-3xl opacity-20 ${o?"bg-amber-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h3",{className:`text-sm font-bold uppercase mb-2 tracking-wide ${p} opacity-80 pr-2 truncate`,children:r}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-6",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${f}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-sm font-semibold ${p} opacity-60`,children:s})]})]}),c.jsx("div",{className:`absolute bottom-4 right-4 px-3 py-1.5 rounded-xl text-[10px] font-bold uppercase tracking-wider border backdrop-blur-md shadow-sm ${v}`,children:y}),c.jsx("div",{className:`absolute bottom-4 left-4 transform opacity-10 scale-125 ${f}`,children:c.jsx(Wm.Box,{})})]})};function Kj(){const[r,e]=se.useState([]),[s,i]=se.useState(!0),[o,d]=se.useState(!0),[f,p]=se.useState(!0);se.useEffect(()=>{const T=ss(Et(Ue,"inventory_movements"),ws("date","asc")),N=An(T,U=>{const X=U.docs.map(G=>G.data());e(X),i(!1)});return()=>N()},[]);const v=se.useMemo(()=>{const T={};return r.forEach(N=>{const U=Number(N.quantity)||0,X=N.action==="add"?U:-U;T[N.productName]||(T[N.productName]={name:N.productName,qty:0,unit:N.unit,type:N.productType||"raw"}),T[N.productName].qty+=X,T[N.productName].type=N.productType||T[N.productName].type}),Object.values(T)},[r]),y=se.useMemo(()=>v.filter(T=>!(T.type==="raw"&&!o||(T.type==="manufactured"||T.type==="uretilmis"||T.type==="manufactured")&&!f)),[v,o,f]),_=se.useMemo(()=>{const T={},N={},U=y.sort((G,Y)=>Y.qty-G.qty).slice(0,5).map(G=>G.name);return U.length===0?{data:[],keys:[]}:(U.forEach(G=>N[G]=0),r.forEach(G=>{if(!U.includes(G.productName))return;const Y=G.date.slice(0,7),he=Number(G.quantity)||0,oe=G.action==="add"?he:-he;N[G.productName]||(N[G.productName]=0),N[G.productName]+=oe,T[Y]={...N,month:Y}}),{data:Object.values(T).sort((G,Y)=>G.month.localeCompare(Y.month)),keys:U})},[r,y]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/40 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsxs("button",{onClick:()=>d(!o),className:`
              flex items-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all mr-2 border
              ${o?"bg-amber-100/80 text-amber-700 border-amber-200 shadow-sm":"bg-transparent text-gray-400 border-transparent hover:bg-white/30"}
            `,children:[c.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 shadow-sm ${o?"bg-amber-500":"bg-gray-300"}`}),"Ham Madde"]}),c.jsxs("button",{onClick:()=>p(!f),className:`
              flex items-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all border
              ${f?"bg-indigo-100/80 text-indigo-700 border-indigo-200 shadow-sm":"bg-transparent text-gray-400 border-transparent hover:bg-white/30"}
            `,children:[c.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 shadow-sm ${f?"bg-indigo-500":"bg-gray-300"}`}),"retilmi"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:y.length>0?y.map((T,N)=>c.jsx(Yj,{name:T.name,qty:T.qty,unit:T.unit,type:T.type},N)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Wm.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."}),c.jsx("span",{className:"text-xs mt-1 text-gray-300",children:"Ltfen filtreleri veya kaytlar kontrol ediniz."})]})}),_.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-indigo-600 border border-indigo-50",children:c.jsx(Wm.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"rn Stok Deiimi"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Seili rnlerin zaman iindeki deiimi"})]})]}),c.jsxs("select",{className:"bg-white/50 border-none text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",children:[c.jsx("option",{children:"Son 12 Ay"}),c.jsx("option",{children:"Bu Yl"})]})]}),c.jsx(Gj,{data:_.data,keys:_.keys})]})]})}const Gs=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",rd=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function Qj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState({start:"",end:""}),[v,y]=se.useState(!1),[_,T]=se.useState(null),[N,U]=se.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",items:[]});if(se.useEffect(()=>{const w=ns.onAuthStateChanged(j=>{e(j),i(!1)}),A=ss(Et(Ue,"teklifler"),ws("createdAt","desc")),C=An(A,j=>{d(j.docs.map(k=>({id:k.id,...k.data()})))});return()=>{w(),C()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ge.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const X=(w,A,C)=>{const j=w*A,k=j*(C/100);return j+k},G=w=>{if(!w)return{subtotal:0,totalVAT:0,grandTotal:0};const A=w.reduce((j,k)=>j+Number(k.quantity)*Number(k.price),0),C=w.reduce((j,k)=>j+Number(k.quantity)*Number(k.price)*(Number(k.vat)/100),0);return{subtotal:A,totalVAT:C,grandTotal:A+C}},Y=()=>{T(null);const w="TK-"+Date.now().toString().slice(-6),A=new Date;A.setDate(A.getDate()+7),U({teklifNo:w,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:A.toISOString().split("T")[0],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),y(!0)},he=w=>{T(w.id),U({teklifNo:w.teklifNo,teklifName:w.teklifName||"",customerName:w.customerName,date:w.date,validityDate:w.validityDate||"",items:w.items||[]}),y(!0)},oe=async w=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Ii(Gt(Ue,"teklifler",w))}catch(A){alert(A.message)}},ve=async w=>{if(w.preventDefault(),!N.customerName){alert("Ltfen mteri ad giriniz.");return}try{const A={...N,createdAt:new Date().toISOString()};_?await er(Gt(Ue,"teklifler",_),A):await Sr(Et(Ue,"teklifler"),A),y(!1)}catch(A){alert(A.message)}},ye=(w,A,C)=>{const j=[...N.items],k=j[w];k[A]=C;const I=parseFloat(A==="quantity"?C:k.quantity),ce=parseFloat(A==="price"?C:k.price),ke=parseFloat(A==="vat"?C:k.vat);!isNaN(I)&&!isNaN(ce)&&!isNaN(ke)&&(k.total=X(I,ce,ke)),U({...N,items:j})},Se=()=>{U({...N,items:[...N.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},xe=w=>{U({...N,items:N.items.filter((A,C)=>C!==w)})},R=w=>{const A=window.open("","","height=800,width=1000");if(!A){alert("Pop-up engelleyiciyi kapatn.");return}const C=G(w.items||[]),j=`
      <html><head><title>Teklif - ${w.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; }
        
        /* Header Layout */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
        
        /* Left: Company Info */
        .company-info { width: 55%; }
        .company-name { font-size: 22px; font-weight: bold; color: #4F46E5; margin-bottom: 5px; text-transform: uppercase; }
        .company-sub { font-size: 11px; color: #666; font-weight: bold; margin-bottom: 10px; display: block; }
        .company-details { font-size: 10px; color: #555; line-height: 1.4; }
        
        /* Right: Proposal Meta */
        .meta-info { width: 40%; text-align: right; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #ddd; letter-spacing: 2px; margin-bottom: 15px; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 4px 0; border-bottom: 1px solid #f9f9f9; }
        .meta-label { font-weight: bold; color: #666; }
        .meta-value { font-weight: bold; color: #333; }
        
        /* Customer Box */
        .customer-box { background: #f8fafc; padding: 15px; border-radius: 8px; margin-bottom: 30px; border: 1px solid #e2e8f0; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; margin-bottom: 4px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #334155; }

        /* Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 30px; }
        table.items th { background: #4F46E5; color: white; padding: 10px 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #e2e8f0; padding: 10px 8px; vertical-align: top; }
        
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .col-desc { width: 45%; }
        
        /* Totals */
        .totals-container { float: right; width: 250px; }
        .total-row { display: flex; justify-content: space-between; padding: 6px 0; font-size: 12px; border-bottom: 1px solid #f1f5f9; }
        .grand-total { font-size: 16px; font-weight: bold; color: #4F46E5; border-top: 2px solid #e2e8f0; padding-top: 10px; margin-top: 5px; border-bottom: none; }
        
        /* Footer */
        .footer { margin-top: auto; border-top: 1px solid #eee; padding-top: 15px; font-size: 9px; color: #94a3b8; text-align: center; }
      </style>
      </head><body>
        
        <div class="header-container">
          <div class="company-info">
            <div class="company-name">Erelebiler Ahap</div>
            <span class="company-sub">Ahap Dorama Scak Pres Kap Sanayii</span>
            <div class="company-details">
              Page  Industrial Company<br>
              Tosya, Turkey<br>
              Tel: +90 366 313 69 70<br>
              twitter.com/ercelebilerahsap<br>
              ercelebilerahsap.com.tr
            </div>
          </div>
          <div class="meta-info">
            <div class="invoice-title">TEKLF</div>
            <table class="meta-table" align="right">
              <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${w.teklifNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td class="meta-value">${rd(w.date)}</td></tr>
              <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${rd(w.validityDate)}</td></tr>
            </table>
          </div>
        </div>

        <div class="customer-box">
          <div class="customer-label">Sayn</div>
          <div class="customer-name">${w.customerName}</div>
        </div>

        <table class="items">
          <thead>
            <tr>
              <th class="col-desc">Aklama</th>
              <th class="text-center">Miktar</th>
              <th class="text-right">Birim Fiyat</th>
              <th class="text-center">KDV %</th>
              <th class="text-right">Tutar</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map(k=>`
              <tr>
                <td>${k.description}</td>
                <td class="text-center">${k.quantity}</td>
                <td class="text-right">${Gs(k.price)}</td>
                <td class="text-center">%${k.vat}</td>
                <td class="text-right"><strong>${Gs(k.total)}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals-container">
          <div class="total-row"><span>Ara Toplam:</span> <span>${Gs(C.subtotal)}</span></div>
          <div class="total-row"><span>Toplam KDV:</span> <span>${Gs(C.totalVAT)}</span></div>
          <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Gs(C.grandTotal)}</span></div>
        </div>

        <div class="footer">
          Bu belge elektronik ortamda retilmitir. Geerlilik tarihine kadar onaylanmas durumunda balaycl vardr.
        </div>

        <script>
           setTimeout(() => { window.print(); }, 500);
        <\/script>
      </body></html>
    `;A.document.write(j),A.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(sh,{startDate:f.start,endDate:f.end,onStartChange:w=>p({...f,start:w}),onEndChange:w=>p({...f,end:w})}),c.jsxs("button",{onClick:Y,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ge.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(w=>{let A=!0;return f.start&&w.date<f.start&&(A=!1),f.end&&w.date>f.end&&(A=!1),A}).map(w=>{const A=G(w.items);return c.jsxs(k1,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Ge.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:w.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",w.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:w.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",rd(w.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",rd(w.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Gs(A.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>R(w),children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})})}),c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>he(w),children:c.jsx(Ge.Edit,{})}),c.jsx(fa,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>oe(w.id),children:c.jsx(Ge.Trash,{})})]})]})]},w.id)})]}),c.jsx(I1,{isOpen:v,onClose:()=>y(!1),title:_?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:ve,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(vs,{value:N.teklifNo,onChange:w=>U({...N,teklifNo:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(vs,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:N.teklifName,onChange:w=>U({...N,teklifName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(vs,{required:!0,placeholder:"Mteri ad giriniz...",value:N.customerName,onChange:w=>U({...N,customerName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(vs,{type:"date",required:!0,value:N.date,onChange:w=>U({...N,date:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(vs,{type:"date",required:!0,value:N.validityDate,onChange:w=>U({...N,validityDate:w.target.value})})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:N.items.map((w,A)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(vs,{placeholder:"rn/Hizmet aklamas",value:w.description,onChange:C=>ye(A,"description",C.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(vs,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white",value:w.quantity,onChange:C=>ye(A,"quantity",C.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(vs,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white",value:w.price,onChange:C=>ye(A,"price",C.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:w.vat,onChange:C=>ye(A,"vat",C.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Gs(w.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>xe(A),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Ge.Trash,{})})})]},A))})]}),c.jsx("button",{type:"button",onClick:Se,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Gs(G(N.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Gs(G(N.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Gs(G(N.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(fa,{type:"submit",variant:"primary",children:_?"Kaydet":"Olutur"}),c.jsx(fa,{type:"button",variant:"secondary",onClick:()=>y(!1),children:"ptal"})]})]})})]})}const Jn={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},$j="86715dfc9d1046e7e8a0d95a",Xj=`https://v6.exchangerate-api.com/v6/${$j}/latest/USD`,wm=({ops:r,onChange:e,allowRefs:s=!1,rows:i=[],constants:o=[],constantsMap:d})=>{const f=(y,_,T)=>{const N=[...r];N[y]={...N[y],[_]:T},_==="type"&&T!=="op"&&(N[y].value=""),e(N)},p=()=>{e([...r,{type:"op",value:"+"},{type:"num",value:0}])},v=y=>{if(y===0)return;const _=[...r];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[r.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:T=>f(_,"type",T.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:T=>f(_,"value",T.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(T=>c.jsx("option",{value:T.id,children:T.name},T.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),i.map(T=>c.jsx("option",{value:T.id,children:T.name||"simsiz Satr"},T.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(Jn.Plus,{})})]})};function Wj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState([]),[v,y]=se.useState({TRY:1,USD:1,EUR:1}),[_,T]=se.useState(null),[N,U]=se.useState(!1),[X,G]=se.useState(!1),[Y,he]=se.useState(null),[oe,ve]=se.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[ye,Se]=se.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});se.useEffect(()=>{const V=ns.onAuthStateChanged(Z=>{e(Z),i(!1)}),te=ss(Et(Ue,"pricing_constants"),ws("name","asc")),ue=An(te,Z=>{d(Z.docs.map(Ee=>({id:Ee.id,...Ee.data()})))}),Ce=ss(Et(Ue,"pricing_items"),ws("updatedAt","desc")),Me=An(Ce,Z=>{p(Z.docs.map(Ee=>({id:Ee.id,...Ee.data()})))});return xe(),()=>{V(),ue(),Me()}},[]);const xe=async()=>{try{const te=await(await fetch(Xj)).json();if(te&&te.conversion_rates){const ue=te.conversion_rates.TRY,Ce=te.conversion_rates.EUR,Me=ue/Ce;y({TRY:1,USD:ue,EUR:Me}),T(new Date().toLocaleTimeString())}}catch(V){console.error("Rate fetch error",V)}},R=(V,te)=>{if(!te||te==="None"||te==="TRY")return parseFloat(V)||0;const ue=v[te]||1;return parseFloat(V)*ue},w=(V,te)=>{if(te==="TRY")return V;const ue=v[te]||1;return V/ue},A=(V,te={})=>{if(V.type==="num")return parseFloat(V.value)||0;if(V.type==="const"){const ue=o.find(Ce=>Ce.id===V.value);return ue?R(ue.value,ue.currency):0}return V.type==="ref"&&te[V.value]||0},C=(V,te={})=>{if(!V||V.length===0)return 0;let ue=A(V[0],te);for(let Ce=1;Ce<V.length;Ce+=2){const Me=V[Ce].value,Z=A(V[Ce+1],te);switch(Me){case"+":ue+=Z;break;case"-":ue-=Z;break;case"*":ue*=Z;break;case"/":ue=Z!==0?ue/Z:0;break}}return ue},j=V=>{const te={};(V.rows||[]).forEach(Ce=>{te[Ce.id]=C(Ce.ops,te)});const ue=C(V.finalFormula?.ops,te);return w(ue,V.finalCurrency||"TRY")},k=V=>C(V,{}),I=se.useMemo(()=>j(ye),[ye,o,v]),ce=se.useMemo(()=>k(oe.ops),[oe.ops,o,v]),ke=async V=>{V.preventDefault();const te=k(oe.ops),ue={...oe,value:te};Y?await er(Gt(Ue,"pricing_constants",Y),ue):await Sr(Et(Ue,"pricing_constants"),ue),ve({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),he(null),U(!1)},K=async V=>await Ii(Gt(Ue,"pricing_constants",V)),fe=()=>{const V="row_"+Date.now();Se({...ye,rows:[...ye.rows,{id:V,name:"",ops:[{type:"num",value:0}]}]})},_e=V=>{const te=[...ye.rows];te.splice(V,1),Se({...ye,rows:te})},Be=(V,te)=>{const ue=[...ye.rows];ue[V].name=te,Se({...ye,rows:ue})},Ye=(V,te)=>{const ue=[...ye.rows];ue[V].ops=te,Se({...ye,rows:ue})},M=async V=>{V.preventDefault();const te={...ye,updatedAt:new Date().toISOString()};Y?await er(Gt(Ue,"pricing_items",Y),te):await Sr(Et(Ue,"pricing_items"),te),Se({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),he(null),G(!1)},J=V=>{const te={...V,rows:V.rows||[],finalFormula:V.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:V.finalCurrency||"TRY"};Se(te),he(V.id),G(!0)},me=async V=>{window.confirm("Silmek istediinize emin misiniz?")&&await Ii(Gt(Ue,"pricing_items",V))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:xe,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Jn.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{he(null),ve({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),U(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Jn.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{he(null),Se({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),G(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Jn.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(Jn.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(V=>{const te=R(V.value,V.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:V.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[V.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",V.currency!=="None"?V.currency:"",V.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",V.unit]}):""]}),V.currency!=="TRY"&&V.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",te.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{ve({...V,ops:V.ops||[{type:"num",value:V.value}]}),he(V.id),U(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Jn.Edit,{})}),c.jsx("button",{onClick:()=>K(V.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Jn.Trash,{})})]})]},V.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(V=>{const te=j(V),ue=V.finalCurrency||"TRY",Ce=Math.random()>.5?"up":"down",Me=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(V.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:V.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:V.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[te.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",ue]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ce==="up"?"text-emerald-500":"text-red-500"}`,children:[Ce==="up"?c.jsx(Jn.TrendingUp,{}):c.jsx(Jn.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",Me]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>J(V),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>me(V.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},V.id)})})]})]}),N&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:ke,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:oe.name,onChange:V=>ve({...oe,name:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:oe.unit,onChange:V=>ve({...oe,unit:V.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(wm,{ops:oe.ops,onChange:V=>ve({...oe,ops:V}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:ce.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:oe.currency,onChange:V=>ve({...oe,currency:V.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),X&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:M,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:ye.title,onChange:V=>Se({...ye,title:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:ye.unitType,onChange:V=>Se({...ye,unitType:V.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:fe,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),ye.rows.map((V,te)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:V.name,onChange:ue=>Be(te,ue.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(wm,{ops:V.ops,onChange:ue=>Ye(te,ue),allowRefs:!0,rows:ye.rows.slice(0,te),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:C(V.ops,j({...ye,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>_e(te),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Jn.Trash,{})})]})]},V.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Jn.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:ye.finalCurrency,onChange:V=>Se({...ye,finalCurrency:V.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(wm,{ops:ye.finalFormula.ops,onChange:V=>Se({...ye,finalFormula:{...ye.finalFormula,ops:V}}),allowRefs:!0,rows:ye.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[I.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:ye.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:M,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>G(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Jn.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]})}const da={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},fl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},tb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],Zj=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Em=2.5,ys=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function Jj(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState([]),[f,p]=se.useState(new Date),[v,y]=se.useState(!1),[_,T]=se.useState(!1),[N,U]=se.useState(null),[X,G]=se.useState(new Date),[Y,he]=se.useState(!1),[oe,ve]=se.useState(new Date().getFullYear()),[ye,Se]=se.useState(!1),[xe,R]=se.useState(null),[w,A]=se.useState({type:"work",overtimeSlots:0,lateness:0}),[C,j]=se.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});se.useEffect(()=>{const L=ns.onAuthStateChanged(Ce=>{e(Ce),i(!1)}),V=ss(Et(Ue,"employees"),ws("name","asc")),te=An(V,Ce=>{d(Ce.docs.map(Me=>({id:Me.id,...Me.data()})))}),ue=setInterval(()=>p(new Date),6e4);return()=>{L(),te(),clearInterval(ue)}},[]);const k=L=>{const V=f.toISOString().split("T")[0],te=f.getDay(),ue=f.getHours(),Ce=f.getMinutes(),Me=ue*60+Ce,Z=L.attendance?.[V];if(Z){if(["paid_leave","unpaid_leave"].includes(Z.type))return fl.LEAVE;if(Z.overtimeSlots>0)return fl.OVERTIME}const[Ee,de]=L.startHour.split(":").map(Number),[H,ie]=L.endHour.split(":").map(Number),ae=Ee*60+de,we=H*60+ie;return L.workDays.includes(te)?Me>=ae&&Me<we?fl.ONLINE:Me>=we&&Z?.overtimeSlots>0?fl.OVERTIME:fl.OFFLINE:fl.OFFLINE},I=L=>{if(!L.attendance)return{used:0,remaining:L.vacationTotal};let V=0;return Object.values(L.attendance).forEach(te=>{te.type==="paid_leave"&&V++}),{used:V,remaining:L.vacationTotal-V}},ce=(L,V)=>{const te=V.getFullYear(),ue=V.getMonth(),Ce=new Date(te,ue+1,0).getDate();let Me=0,Z=0,Ee=0,de=0,H=0;for(let nr=1;nr<=Ce;nr++){const Mr=`${te}-${String(ue+1).padStart(2,"0")}-${String(nr).padStart(2,"0")}`,Es=new Date(Mr).getDay(),Un=L.attendance?.[Mr],Sa=L.workDays.includes(Es);Un?(Un.type==="work"&&Me++,Un.type==="paid_leave"&&H++,Un.type==="unpaid_leave"&&de++,Un.overtimeSlots&&(Z+=parseInt(Un.overtimeSlots)),Un.lateness&&(Ee+=parseFloat(Un.lateness))):Sa&&Me++}const ie=parseFloat(L.salaryAmount)||0,ae=L.customDailyRate&&parseFloat(L.customDailyRate)>0?parseFloat(L.customDailyRate):ie/30,we=parseFloat(L.customDeductionRate),ge=!isNaN(we)&&we>0?we:ae,je=ae/9,Ke=L.customOvertimeMultiplier?parseFloat(L.customOvertimeMultiplier):1.5,pt=Z*Em,mn=pt*(je*Ke),Pl=de*ge,Vi=Ee*je,Qt=Pl+Vi,tr=ie+mn-Qt+(parseFloat(L.insurance)||0)+(parseFloat(L.allowance)||0);return{workedDays:Me,totalOvertimeSlots:Z,totalOvertimeHours:pt,unpaidLeaveDays:de,paidLeaveDays:H,overtimePay:mn,totalLatenessHours:Ee,latenessDeduction:Vi,totalDeduction:Qt,totalSalary:tr,dailyRate:ae,hourlyRate:je,deductionRate:ge}},ke=(L,V)=>{const te=new Date(L,V,1);let ue=0;return o.forEach(Ce=>{ue+=ce(Ce,te).totalSalary}),ue},K=se.useMemo(()=>{let L=0,V=0;const te=new Date(X);return te.setMonth(X.getMonth()-1),o.forEach(ue=>{L+=ce(ue,X).totalSalary,V+=ce(ue,te).totalSalary}),{thisMonthTotal:L,lastMonthTotal:V}},[o,X]),fe=()=>{T(!1),j({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},_e=()=>{N&&(T(!0),j({name:N.name,role:N.role,salaryType:N.salaryType,salaryAmount:N.salaryAmount,insurance:N.insurance,allowance:N.allowance,vacationTotal:N.vacationTotal,workDays:N.workDays,startHour:N.startHour,endHour:N.endHour,customDailyRate:N.customDailyRate||"",customOvertimeMultiplier:N.customOvertimeMultiplier||"1.5",customDeductionRate:N.customDeductionRate||"",attendance:N.attendance||{}}),U(null),y(!0))},Be=async L=>{L.preventDefault();try{const V={...C,updatedAt:new Date().toISOString()};_&&N?await er(Gt(Ue,"employees",N.id),V):await Sr(Et(Ue,"employees"),{...V,createdAt:new Date().toISOString()}),y(!1)}catch(V){alert("Hata: "+V.message)}},Ye=async L=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Ii(Gt(Ue,"employees",L)),U(null))},M=(L,V)=>{R(L),A({type:V?.type||"work",overtimeSlots:V?.overtimeSlots||0,lateness:V?.lateness||0}),Se(!0)},J=async L=>{if(L.preventDefault(),!N||!xe)return;const V={...N.attendance};V[xe]={type:w.type,overtimeSlots:parseInt(w.overtimeSlots)||0,lateness:parseFloat(w.lateness)||0},await er(Gt(Ue,"employees",N.id),{attendance:V}),U({...N,attendance:V}),Se(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(da.Lock,{})," Yetkisiz Eriim"]});const me=({employee:L,date:V,onDateClick:te})=>{const ue=V.getFullYear(),Ce=V.getMonth(),Me=new Date(ue,Ce+1,0).getDate(),Z=new Date(ue,Ce,1).getDay(),Ee=[];for(let de=0;de<Z;de++)Ee.push(null);for(let de=1;de<=Me;de++)Ee.push(de);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:tb.map((de,H)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:de.slice(0,3)},H))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:Ee.map((de,H)=>{if(!de)return c.jsx("div",{},H);const ie=`${ue}-${String(Ce+1).padStart(2,"0")}-${String(de).padStart(2,"0")}`,ae=L.attendance?.[ie],we=new Date(ie).getDay(),ge=L.workDays.includes(we);let je="bg-gray-50 text-gray-400 border-gray-100";return ge&&(je="bg-white border-emerald-200 text-gray-700 shadow-sm"),ae&&(ae.type==="paid_leave"&&(je="bg-yellow-50 border-yellow-200 text-yellow-700"),ae.type==="unpaid_leave"&&(je="bg-red-50 border-red-200 text-red-700"),ae.type==="work"&&(ae.overtimeSlots>0||ae.lateness>0)&&(je="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),ae.type==="off"&&(je="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>te(ie,ae),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${je}`,children:[c.jsx("span",{className:"text-sm",children:de}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[ae?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",ae.overtimeSlots,"M"]}),ae?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",ae.lateness,"s"]})]})]},H)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>he(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:ys(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(da.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>he(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:ys(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:fe,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(da.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(L=>{const V=k(L),te=I(L);return c.jsxs("div",{onClick:()=>U(L),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${V.color} ${V.ring} ring-offset-2 ring-2`,children:V.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(da.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:L.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[L.startHour," - ",L.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[te.remaining," gn kald"]})]})]})]},L.id)})}),N&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:N.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:N.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:_e,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(da.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ye(N.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(da.Trash,{})}),c.jsx("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const L=ce(N,X);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:ys(L.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:ys(Number(N.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",L.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",ys(L.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",L.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",ys(L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",L.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",ys(L.totalDeduction-L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",ys(Number(N.insurance)+Number(N.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Em," Saat",c.jsx("br",{}),"Saatlik cret = ",ys(L.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",ys(L.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>G(new Date(X.setMonth(X.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:X.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>G(new Date(X.setMonth(X.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(me,{employee:N,date:X,onDateClick:M})]})]})]})}),Y&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>he(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(da.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>ve(L=>L-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:oe}),c.jsx("button",{onClick:()=>ve(L=>L+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Zj.map((L,V)=>{const te=ke(oe,V),ue=new Date().getMonth()===V&&new Date().getFullYear()===oe;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${ue?"text-indigo-200":"text-gray-400"}`,children:L}),c.jsx("div",{className:`text-lg font-bold ${ue?"text-white":"text-gray-800"}`,children:te>0?ys(te):"-"})]},L)})})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:Be,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:C.name,onChange:L=>j({...C,name:L.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:C.role,onChange:L=>j({...C,role:L.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.salaryType,onChange:L=>j({...C,salaryType:L.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.salaryAmount,onChange:L=>j({...C,salaryAmount:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.insurance,onChange:L=>j({...C,insurance:L.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.allowance,onChange:L=>j({...C,allowance:L.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customDailyRate,onChange:L=>j({...C,customDailyRate:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customOvertimeMultiplier,onChange:L=>j({...C,customOvertimeMultiplier:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:C.customDeductionRate,onChange:L=>j({...C,customDeductionRate:L.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.vacationTotal,onChange:L=>j({...C,vacationTotal:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.startHour,onChange:L=>j({...C,startHour:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:C.endHour,onChange:L=>j({...C,endHour:L.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:tb.map((L,V)=>c.jsx("button",{type:"button",onClick:()=>{const te=C.workDays.includes(V)?C.workDays.filter(ue=>ue!==V):[...C.workDays,V];j({...C,workDays:te})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${C.workDays.includes(V)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:L.slice(0,3)},L))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),ye&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:xe}),c.jsxs("form",{onSubmit:J,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(L=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:L.id,checked:w.type===L.id,onChange:V=>A({...w,type:V.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:L.label})]},L.id))})]}),w.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Em,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(L=>c.jsx("button",{type:"button",onClick:()=>A({...w,overtimeSlots:w.overtimeSlots===L?0:L}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${w.overtimeSlots===L?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:L},L))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:w.lateness,onChange:L=>A({...w,lateness:L.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>Se(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function eC(){const[r,e]=se.useState(null),[s,i]=se.useState(!0),[o,d]=se.useState("dashboard"),[f,p]=se.useState(!1);se.useEffect(()=>{const N=lS(ns,U=>{e(U),i(!1)});return()=>N()},[]);const v=async()=>{try{await oS(ns)}catch(N){console.error("k yaplrken hata:",N)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],T=()=>{switch(o){case"dashboard":return c.jsx(Wx,{onNavigate:d});case"musteriler":return c.jsx(zj,{});case"urunler":return c.jsx(Fj,{});case"stok":return c.jsx(Kj,{});case"siparis":return c.jsx(Bj,{});case"teklif":return c.jsx(Qj,{});case"fiyatlandirma":return c.jsx(Wj,{});case"calisan":return c.jsx(Jj,{});default:return c.jsx(Wx,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(N=>c.jsxs("button",{onClick:()=>{d(N.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===N.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===N.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(N.icon,{})}),N.label]},N.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:T()})})]})]}):c.jsx(Oj,{})}xw.createRoot(document.getElementById("root")).render(c.jsx(se.StrictMode,{children:c.jsx(eC,{})}));
