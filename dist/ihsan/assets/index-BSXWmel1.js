(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function v2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rm={exports:{}},Fo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function b2(){if(xx)return Fo;xx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Fo.Fragment=e,Fo.jsx=n,Fo.jsxs=n,Fo}var vx;function _2(){return vx||(vx=1,rm.exports=b2()),rm.exports}var c=_2(),am={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function w2(){if(bx)return Fe;bx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function U(E){return E===null||typeof E!="object"?null:(E=A&&E[A]||E["@@iterator"],typeof E=="function"?E:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,O={};function se(E,P,Z){this.props=E,this.context=P,this.refs=O,this.updater=Z||K}se.prototype.isReactComponent={},se.prototype.setState=function(E,P){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,P,"setState")},se.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function ne(){}ne.prototype=se.prototype;function pe(E,P,Z){this.props=E,this.context=P,this.refs=O,this.updater=Z||K}var fe=pe.prototype=new ne;fe.constructor=pe,W(fe,se.prototype),fe.isPureReactComponent=!0;var xe=Array.isArray;function me(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function j(E,P,Z){var M=Z.ref;return{$$typeof:i,type:E,key:P,ref:M!==void 0?M:null,props:Z}}function k(E,P){return j(E.type,P,E.props)}function R(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function V(E){var P={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return P[Z]})}var I=/\/+/g;function le(E,P){return typeof E=="object"&&E!==null&&E.key!=null?V(""+E.key):P.toString(36)}function Ie(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(me,me):(E.status="pending",E.then(function(P){E.status==="pending"&&(E.status="fulfilled",E.value=P)},function(P){E.status==="pending"&&(E.status="rejected",E.reason=P)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function H(E,P,Z,M,ie){var ge=typeof E;(ge==="undefined"||ge==="boolean")&&(E=null);var _e=!1;if(E===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(E.$$typeof){case i:case e:_e=!0;break;case _:return _e=E._init,H(_e(E._payload),P,Z,M,ie)}}if(_e)return ie=ie(E),_e=M===""?"."+le(E,0):M,xe(ie)?(Z="",_e!=null&&(Z=_e.replace(I,"$&/")+"/"),H(ie,P,Z,"",function(re){return re})):ie!=null&&(R(ie)&&(ie=k(ie,Z+(ie.key==null||E&&E.key===ie.key?"":(""+ie.key).replace(I,"$&/")+"/")+_e)),P.push(ie)),1;_e=0;var Ue=M===""?".":M+":";if(xe(E))for(var Le=0;Le<E.length;Le++)M=E[Le],ge=Ue+le(M,Le),_e+=H(M,P,Z,ge,ie);else if(Le=U(E),typeof Le=="function")for(E=Le.call(E),Le=0;!(M=E.next()).done;)M=M.value,ge=Ue+le(M,Le++),_e+=H(M,P,Z,ge,ie);else if(ge==="object"){if(typeof E.then=="function")return H(Ie(E),P,Z,M,ie);throw P=String(E),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return _e}function B(E,P,Z){if(E==null)return E;var M=[],ie=0;return H(E,M,"","",function(ge){return P.call(Z,ge,ie++)}),M}function ee(E){if(E._status===-1){var P=E._result;P=P(),P.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=P)}if(E._status===1)return E._result.default;throw E._result}var be=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},je={map:B,forEach:function(E,P,Z){B(E,function(){P.apply(this,arguments)},Z)},count:function(E){var P=0;return B(E,function(){P++}),P},toArray:function(E){return B(E,function(P){return P})||[]},only:function(E){if(!R(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Fe.Activity=T,Fe.Children=je,Fe.Component=se,Fe.Fragment=n,Fe.Profiler=l,Fe.PureComponent=pe,Fe.StrictMode=r,Fe.Suspense=p,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(E){return C.H.useMemoCache(E)}},Fe.cache=function(E){return function(){return E.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(E,P,Z){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var M=W({},E.props),ie=E.key;if(P!=null)for(ge in P.key!==void 0&&(ie=""+P.key),P)!N.call(P,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&P.ref===void 0||(M[ge]=P[ge]);var ge=arguments.length-2;if(ge===1)M.children=Z;else if(1<ge){for(var _e=Array(ge),Ue=0;Ue<ge;Ue++)_e[Ue]=arguments[Ue+2];M.children=_e}return j(E.type,ie,M)},Fe.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},Fe.createElement=function(E,P,Z){var M,ie={},ge=null;if(P!=null)for(M in P.key!==void 0&&(ge=""+P.key),P)N.call(P,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(ie[M]=P[M]);var _e=arguments.length-2;if(_e===1)ie.children=Z;else if(1<_e){for(var Ue=Array(_e),Le=0;Le<_e;Le++)Ue[Le]=arguments[Le+2];ie.children=Ue}if(E&&E.defaultProps)for(M in _e=E.defaultProps,_e)ie[M]===void 0&&(ie[M]=_e[M]);return j(E,ge,ie)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(E){return{$$typeof:y,render:E}},Fe.isValidElement=R,Fe.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:ee}},Fe.memo=function(E,P){return{$$typeof:x,type:E,compare:P===void 0?null:P}},Fe.startTransition=function(E){var P=C.T,Z={};C.T=Z;try{var M=E(),ie=C.S;ie!==null&&ie(Z,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(me,be)}catch(ge){be(ge)}finally{P!==null&&Z.types!==null&&(P.types=Z.types),C.T=P}},Fe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Fe.use=function(E){return C.H.use(E)},Fe.useActionState=function(E,P,Z){return C.H.useActionState(E,P,Z)},Fe.useCallback=function(E,P){return C.H.useCallback(E,P)},Fe.useContext=function(E){return C.H.useContext(E)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(E,P){return C.H.useDeferredValue(E,P)},Fe.useEffect=function(E,P){return C.H.useEffect(E,P)},Fe.useEffectEvent=function(E){return C.H.useEffectEvent(E)},Fe.useId=function(){return C.H.useId()},Fe.useImperativeHandle=function(E,P,Z){return C.H.useImperativeHandle(E,P,Z)},Fe.useInsertionEffect=function(E,P){return C.H.useInsertionEffect(E,P)},Fe.useLayoutEffect=function(E,P){return C.H.useLayoutEffect(E,P)},Fe.useMemo=function(E,P){return C.H.useMemo(E,P)},Fe.useOptimistic=function(E,P){return C.H.useOptimistic(E,P)},Fe.useReducer=function(E,P,Z){return C.H.useReducer(E,P,Z)},Fe.useRef=function(E){return C.H.useRef(E)},Fe.useState=function(E){return C.H.useState(E)},Fe.useSyncExternalStore=function(E,P,Z){return C.H.useSyncExternalStore(E,P,Z)},Fe.useTransition=function(){return C.H.useTransition()},Fe.version="19.2.0",Fe}var _x;function rp(){return _x||(_x=1,am.exports=w2()),am.exports}var Q=rp();const db=v2(Q);var lm={exports:{}},Go={},om={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx;function E2(){return wx||(wx=1,(function(i){function e(H,B){var ee=H.length;H.push(B);e:for(;0<ee;){var be=ee-1>>>1,je=H[be];if(0<l(je,B))H[be]=B,H[ee]=je,ee=be;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var B=H[0],ee=H.pop();if(ee!==B){H[0]=ee;e:for(var be=0,je=H.length,E=je>>>1;be<E;){var P=2*(be+1)-1,Z=H[P],M=P+1,ie=H[M];if(0>l(Z,ee))M<je&&0>l(ie,Z)?(H[be]=ie,H[M]=ee,be=M):(H[be]=Z,H[P]=ee,be=P);else if(M<je&&0>l(ie,ee))H[be]=ie,H[M]=ee,be=M;else break e}}return B}function l(H,B){var ee=H.sortIndex-B.sortIndex;return ee!==0?ee:H.id-B.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,y=f.now();i.unstable_now=function(){return f.now()-y}}var p=[],x=[],_=1,T=null,A=3,U=!1,K=!1,W=!1,O=!1,se=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function fe(H){for(var B=n(x);B!==null;){if(B.callback===null)r(x);else if(B.startTime<=H)r(x),B.sortIndex=B.expirationTime,e(p,B);else break;B=n(x)}}function xe(H){if(W=!1,fe(H),!K)if(n(p)!==null)K=!0,me||(me=!0,V());else{var B=n(x);B!==null&&Ie(xe,B.startTime-H)}}var me=!1,C=-1,N=5,j=-1;function k(){return O?!0:!(i.unstable_now()-j<N)}function R(){if(O=!1,me){var H=i.unstable_now();j=H;var B=!0;try{e:{K=!1,W&&(W=!1,ne(C),C=-1),U=!0;var ee=A;try{t:{for(fe(H),T=n(p);T!==null&&!(T.expirationTime>H&&k());){var be=T.callback;if(typeof be=="function"){T.callback=null,A=T.priorityLevel;var je=be(T.expirationTime<=H);if(H=i.unstable_now(),typeof je=="function"){T.callback=je,fe(H),B=!0;break t}T===n(p)&&r(p),fe(H)}else r(p);T=n(p)}if(T!==null)B=!0;else{var E=n(x);E!==null&&Ie(xe,E.startTime-H),B=!1}}break e}finally{T=null,A=ee,U=!1}B=void 0}}finally{B?V():me=!1}}}var V;if(typeof pe=="function")V=function(){pe(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,le=I.port2;I.port1.onmessage=R,V=function(){le.postMessage(null)}}else V=function(){se(R,0)};function Ie(H,B){C=se(function(){H(i.unstable_now())},B)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(H){switch(A){case 1:case 2:case 3:var B=3;break;default:B=A}var ee=A;A=B;try{return H()}finally{A=ee}},i.unstable_requestPaint=function(){O=!0},i.unstable_runWithPriority=function(H,B){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=A;A=H;try{return B()}finally{A=ee}},i.unstable_scheduleCallback=function(H,B,ee){var be=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?be+ee:be):ee=be,H){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ee+je,H={id:_++,callback:B,priorityLevel:H,startTime:ee,expirationTime:je,sortIndex:-1},ee>be?(H.sortIndex=ee,e(x,H),n(p)===null&&H===n(x)&&(W?(ne(C),C=-1):W=!0,Ie(xe,ee-be))):(H.sortIndex=je,e(p,H),K||U||(K=!0,me||(me=!0,V()))),H},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(H){var B=A;return function(){var ee=A;A=B;try{return H.apply(this,arguments)}finally{A=ee}}}})(cm)),cm}var Ex;function T2(){return Ex||(Ex=1,om.exports=E2()),om.exports}var um={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function S2(){if(Tx)return _n;Tx=1;var i=rp();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,x,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:p,containerInfo:x,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(p,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(p,x,null,_)},_n.flushSync=function(p){var x=f.T,_=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=x,r.p=_,r.d.f()}},_n.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(p,x))},_n.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},_n.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var _=x.as,T=y(_,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,U=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:U}):_==="script"&&r.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:U,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},_n.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=y(x.as,x.crossOrigin);r.d.M(p,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(p)},_n.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,T=y(_,x.crossOrigin);r.d.L(p,_,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},_n.preloadModule=function(p,x){if(typeof p=="string")if(x){var _=y(x.as,x.crossOrigin);r.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(p)},_n.requestFormReset=function(p){r.d.r(p)},_n.unstable_batchedUpdates=function(p,x){return p(x)},_n.useFormState=function(p,x,_){return f.H.useFormState(p,x,_)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var Sx;function N2(){if(Sx)return um.exports;Sx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),um.exports=S2(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function A2(){if(Nx)return Go;Nx=1;var i=T2(),e=rp(),n=N2();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(r(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===o)return p(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,o=m;break}if(w===o){v=!0,o=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,o=h;break}if(w===o){v=!0,o=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case se:return"Profiler";case O:return"StrictMode";case xe:return"Suspense";case me:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case pe:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case fe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:le(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return le(t(s))}catch{}}return null}var Ie=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},be=[],je=-1;function E(t){return{current:t}}function P(t){0>je||(t.current=be[je],be[je]=null,je--)}function Z(t,s){je++,be[je]=t.current,t.current=s}var M=E(null),ie=E(null),ge=E(null),_e=E(null);function Ue(t,s){switch(Z(ge,s),Z(ie,t),Z(M,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?By(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=By(s),t=qy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(M),Z(M,t)}function Le(){P(M),P(ie),P(ge)}function re(t){t.memoizedState!==null&&Z(_e,t);var s=M.current,a=qy(s,t.type);s!==a&&(Z(ie,t),Z(M,a))}function we(t){ie.current===t&&(P(M),P(ie)),_e.current===t&&(P(_e),zo._currentValue=ee)}var Te,$;function ye(t){if(Te===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Te=s&&s[1]||"",$=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+t+$}var oe=!1;function Ce(t,s){if(!t||oe)return"";oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(J){var Y=J}Reflect.construct(t,[],de)}else{try{de.call()}catch(J){Y=J}t.call(de.prototype)}}else{try{throw Error()}catch(J){Y=J}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(J){if(J&&Y&&typeof J.stack=="string")return[J.stack,Y.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var D=v.split(`
`),G=w.split(`
`);for(h=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(o===D.length||h===G.length)for(o=D.length-1,h=G.length-1;1<=o&&0<=h&&D[o]!==G[h];)h--;for(;1<=o&&0<=h;o--,h--)if(D[o]!==G[h]){if(o!==1||h!==1)do if(o--,h--,0>h||D[o]!==G[h]){var ae=`
`+D[o].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=o&&0<=h);break}}}finally{oe=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ye(a):""}function Ye(t,s){switch(t.tag){case 26:case 27:case 5:return ye(t.type);case 16:return ye("Lazy");case 13:return t.child!==s&&s!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ce(t.type,!1);case 11:return Ce(t.type.render,!1);case 1:return Ce(t.type,!0);case 31:return ye("Activity");default:return""}}function Ee(t){try{var s="",a=null;do s+=Ye(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Xe=Object.prototype.hasOwnProperty,Je=i.unstable_scheduleCallback,te=i.unstable_cancelCallback,De=i.unstable_shouldYield,et=i.unstable_requestPaint,ut=i.unstable_now,vn=i.unstable_getCurrentPriorityLevel,He=i.unstable_ImmediatePriority,St=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,In=i.unstable_LowPriority,zi=i.unstable_IdlePriority,qr=i.log,ci=i.unstable_setDisableYieldValue,on=null,Mt=null;function cn(t){if(typeof qr=="function"&&ci(t),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(on,t)}catch{}}var wt=Math.clz32?Math.clz32:Rc,qn=Math.log,Bi=Math.LN2;function Rc(t){return t>>>=0,t===0?32:31-(qn(t)/Bi|0)|0}var ks=256,Hr=262144,Ft=4194304;function Ds(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ms(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~m,o!==0?h=Ds(o):(v&=w,v!==0?h=Ds(v):a||(a=w&~t,a!==0&&(h=Ds(a))))):(w=o&~m,w!==0?h=Ds(w):v!==0?h=Ds(v):a||(a=o&~t,a!==0&&(h=Ds(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function gs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function oh(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ic(){var t=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),t}function Os(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Fr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ch(t,s,a,o,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var ae=31-wt(a),de=1<<ae;w[ae]=0,D[ae]=-1;var Y=G[ae];if(Y!==null)for(G[ae]=null,ae=0;ae<Y.length;ae++){var J=Y[ae];J!==null&&(J.lane&=-536870913)}a&=~de}o!==0&&Gr(t,o,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Gr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-wt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Fl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-wt(a),h=1<<o;h&s|t[o]&s&&(t[o]|=s),a&=~h}}function Gl(t,s){var a=s&-s;return a=(a&42)!==0?1:Yr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Yr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ui(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function kc(){var t=B.p;return t!==0?t:(t=window.event,t===void 0?32:dx(t.type))}function ys(t,s){var a=B.p;try{return B.p=t,s()}finally{B.p=a}}var xs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+xs,sn="__reactProps$"+xs,Vs="__reactContainer$"+xs,ka="__reactEvents$"+xs,uh="__reactListeners$"+xs,Dc="__reactHandles$"+xs,Mc="__reactResources$"+xs,Ls="__reactMarker$"+xs;function Da(t){delete t[Gt],delete t[sn],delete t[ka],delete t[uh],delete t[Dc]}function Ps(t){var s=t[Gt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Vs]||a[Gt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Qy(t);t!==null;){if(a=t[Gt])return a;t=Qy(t)}return s}t=a,a=t.parentNode}return null}function ns(t){if(t=t[Gt]||t[Vs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Hn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Us(t){var s=t[Mc];return s||(s=t[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Yt(t){t[Ls]=!0}var Yl=new Set,Kl={};function zs(t,s){Bs(t,s),Bs(t+"Capture",s)}function Bs(t,s){for(Kl[t]=s,t=0;t<s.length;t++)Yl.add(s[t])}var $l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Xl={};function Oc(t){return Xe.call(Xl,t)?!0:Xe.call(Ql,t)?!1:$l.test(t)?Xl[t]=!0:(Ql[t]=!0,!1)}function Ma(t,s,a){if(Oc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Fn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Kt(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wl(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function mt(t){if(!t._valueTracker){var s=qi(t)?"checked":"value";t._valueTracker=Wl(t,s,""+t[s])}}function Kr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=qi(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $r=/[\n"\\]/g;function kn(t){return t.replace($r,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Oa(t,s,a,o,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+rn(s)):t.value!==""+rn(s)&&(t.value=""+rn(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Zl(t,v,rn(s)):a!=null?Zl(t,v,rn(a)):o!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+rn(w):t.removeAttribute("name")}function Vc(t,s,a,o,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){mt(t);return}a=a!=null?""+rn(a):"",s=s!=null?""+rn(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),mt(t)}function Zl(t,s,a){s==="number"&&qs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Hi(t,s,a,o){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+rn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Lc(t,s,a){if(s!=null&&(s=""+rn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+rn(a):""}function Fi(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(Ie(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=rn(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),mt(t)}function Dn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Pc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jl(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Pc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function eo(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&a[h]!==o&&Jl(t,h,o)}else for(var m in s)s.hasOwnProperty(m)&&Jl(t,m,s[m])}function Va(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(t){return Gi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vs(){}var to=null;function ss(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,Hs=null;function Qr(t){var s=ns(t);if(s&&(t=s.stateNode)){var a=t[sn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Oa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var h=o[sn]||null;if(!h)throw Error(r(90));Oa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&Kr(o)}break e;case"textarea":Lc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Hi(t,!!a.multiple,s,!1)}}}var Pa=!1;function Ki(t,s,a){if(Pa)return t(s,a);Pa=!0;try{var o=t(s);return o}finally{if(Pa=!1,(Yi!==null||Hs!==null)&&(ku(),Yi&&(s=Yi,t=Hs,Hs=Yi=null,Qr(s),t)))for(s=0;s<t.length;s++)Qr(t[s])}}function bs(t,s){var a=t.stateNode;if(a===null)return null;var o=a[sn]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(is)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Xr=!1}var Fs=null,no=null,Wr=null;function so(){if(Wr)return Wr;var t,s=no,a=s.length,o,h="value"in Fs?Fs.value:Fs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===h[m-o];o++);return Wr=h.slice(t,1<o?1-o:void 0)}function Zr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function di(){return!0}function _s(){return!1}function un(t){function s(a,o,h,m,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?di:_s,this.isPropagationStopped=_s,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),s}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=un(hi),$i=T({},hi,{view:0,detail:0}),io=un($i),Qi,Ua,Ys,za=T({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ys&&(Ys&&t.type==="mousemove"?(Qi=t.screenX-Ys.screenX,Ua=t.screenY-Ys.screenY):Ua=Qi=0,Ys=t),Qi)},movementY:function(t){return"movementY"in t?t.movementY:Ua}}),ro=un(za),Jr=T({},za,{dataTransfer:0}),zc=un(Jr),Bc=T({},$i,{relatedTarget:0}),ea=un(Bc),ao=T({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),qc=un(ao),Ba=T({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hc=un(Ba),Fc=T({},hi,{data:0}),Ks=un(Fc),Gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Kc[t])?!!s[t]:!1}function Xi(){return $c}var An=T({},$i,{key:function(t){if(t.key){var s=Gc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Zr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(t){return t.type==="keypress"?Zr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qc=un(An),Xc=T({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=un(Xc),d=T({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),g=un(d),b=T({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=un(b),q=T({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),X=un(q),ve=T({},hi,{newState:0,oldState:0}),Ke=un(ve),Pt=[9,13,27,32],dt=is&&"CompositionEvent"in window,kt=null;is&&"documentMode"in document&&(kt=document.documentMode);var rs=is&&"TextEvent"in window&&!kt,$s=is&&(!dt||kt&&8<kt&&11>=kt),ws=" ",Es=!1;function ta(t,s){switch(t){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function H1(t,s){switch(t){case"compositionend":return qa(s);case"keypress":return s.which!==32?null:(Es=!0,ws);case"textInput":return t=s.data,t===ws&&Es?null:t;default:return null}}function F1(t,s){if(Ha)return t==="compositionend"||!dt&&ta(t,s)?(t=so(),Wr=no=Fs=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $s&&s.locale!=="ko"?null:s.data;default:return null}}var G1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!G1[t.type]:s==="textarea"}function Jp(t,s,a,o){Yi?Hs?Hs.push(o):Hs=[o]:Yi=o,s=Uu(s,"onChange"),0<s.length&&(a=new Gs("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var lo=null,oo=null;function Y1(t){Oy(t,0)}function Wc(t){var s=Hn(t);if(Kr(s))return t}function eg(t,s){if(t==="change")return s}var tg=!1;if(is){var dh;if(is){var hh="oninput"in document;if(!hh){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),hh=typeof ng.oninput=="function"}dh=hh}else dh=!1;tg=dh&&(!document.documentMode||9<document.documentMode)}function sg(){lo&&(lo.detachEvent("onpropertychange",ig),oo=lo=null)}function ig(t){if(t.propertyName==="value"&&Wc(oo)){var s=[];Jp(s,oo,t,ss(t)),Ki(Y1,s)}}function K1(t,s,a){t==="focusin"?(sg(),lo=s,oo=a,lo.attachEvent("onpropertychange",ig)):t==="focusout"&&sg()}function $1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(oo)}function Q1(t,s){if(t==="click")return Wc(s)}function X1(t,s){if(t==="input"||t==="change")return Wc(s)}function W1(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Gn=typeof Object.is=="function"?Object.is:W1;function co(t,s){if(Gn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Xe.call(s,h)||!Gn(t[h],s[h]))return!1}return!0}function rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ag(t,s){var a=rg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rg(a)}}function lg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?lg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function og(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=qs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=qs(t.document)}return s}function fh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Z1=is&&"documentMode"in document&&11>=document.documentMode,Fa=null,mh=null,uo=null,ph=!1;function cg(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ph||Fa==null||Fa!==qs(o)||(o=Fa,"selectionStart"in o&&fh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),uo&&co(uo,o)||(uo=o,o=Uu(mh,"onSelect"),0<o.length&&(s=new Gs("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Fa)))}function na(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ga={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},gh={},ug={};is&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function sa(t){if(gh[t])return gh[t];if(!Ga[t])return t;var s=Ga[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in ug)return gh[t]=s[a];return t}var dg=sa("animationend"),hg=sa("animationiteration"),fg=sa("animationstart"),J1=sa("transitionrun"),ew=sa("transitionstart"),tw=sa("transitioncancel"),mg=sa("transitionend"),pg=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function Ts(t,s){pg.set(t,s),zs(s,[t])}var Zc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},as=[],Ya=0,xh=0;function Jc(){for(var t=Ya,s=xh=Ya=0;s<t;){var a=as[s];as[s++]=null;var o=as[s];as[s++]=null;var h=as[s];as[s++]=null;var m=as[s];if(as[s++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}m!==0&&gg(a,h,m)}}function eu(t,s,a,o){as[Ya++]=t,as[Ya++]=s,as[Ya++]=a,as[Ya++]=o,xh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function vh(t,s,a,o){return eu(t,s,a,o),tu(t)}function ia(t,s){return eu(t,null,null,s),tu(t)}function gg(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-wt(a),t=m.hiddenUpdates,o=t[h],o===null?t[h]=[s]:o.push(s),s.lane=a|536870912),m):null}function tu(t){if(50<Do)throw Do=0,Cf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ka={};function nw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,s,a,o){return new nw(t,s,a,o)}function bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mi(t,s){var a=t.alternate;return a===null?(a=Yn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function yg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function nu(t,s,a,o,h,m){var v=0;if(o=t,typeof t=="function")bh(t)&&(v=1);else if(typeof t=="string")v=l2(t,a,M.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Yn(31,a,s,h),t.elementType=j,t.lanes=m,t;case W:return ra(a.children,h,m,s);case O:v=8,h|=24;break;case se:return t=Yn(12,a,s,h|2),t.elementType=se,t.lanes=m,t;case xe:return t=Yn(13,a,s,h),t.elementType=xe,t.lanes=m,t;case me:return t=Yn(19,a,s,h),t.elementType=me,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:v=10;break e;case ne:v=9;break e;case fe:v=11;break e;case C:v=14;break e;case N:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Yn(v,a,s,h),s.elementType=t,s.type=o,s.lanes=m,s}function ra(t,s,a,o){return t=Yn(7,t,o,s),t.lanes=a,t}function _h(t,s,a){return t=Yn(6,t,null,s),t.lanes=a,t}function xg(t){var s=Yn(18,null,null,0);return s.stateNode=t,s}function wh(t,s,a){return s=Yn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var vg=new WeakMap;function ls(t,s){if(typeof t=="object"&&t!==null){var a=vg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ee(s)},vg.set(t,s),s)}return{value:t,source:s,stack:Ee(s)}}var $a=[],Qa=0,su=null,ho=0,os=[],cs=0,Wi=null,Qs=1,Xs="";function pi(t,s){$a[Qa++]=ho,$a[Qa++]=su,su=t,ho=s}function bg(t,s,a){os[cs++]=Qs,os[cs++]=Xs,os[cs++]=Wi,Wi=t;var o=Qs;t=Xs;var h=32-wt(o)-1;o&=~(1<<h),a+=1;var m=32-wt(s)+h;if(30<m){var v=h-h%5;m=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Qs=1<<32-wt(s)+h|a<<h|o,Xs=m+t}else Qs=1<<m|a<<h|o,Xs=t}function Eh(t){t.return!==null&&(pi(t,1),bg(t,1,0))}function Th(t){for(;t===su;)su=$a[--Qa],$a[Qa]=null,ho=$a[--Qa],$a[Qa]=null;for(;t===Wi;)Wi=os[--cs],os[cs]=null,Xs=os[--cs],os[cs]=null,Qs=os[--cs],os[cs]=null}function _g(t,s){os[cs++]=Qs,os[cs++]=Xs,os[cs++]=Wi,Qs=s.id,Xs=s.overflow,Wi=t}var dn=null,jt=null,at=!1,Zi=null,us=!1,Sh=Error(r(519));function Ji(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fo(ls(s,t)),Sh}function wg(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Gt]=t,s[sn]=o,a){case"dialog":Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":case"embed":Ze("load",s);break;case"video":case"audio":for(a=0;a<Oo.length;a++)Ze(Oo[a],s);break;case"source":Ze("error",s);break;case"img":case"image":case"link":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"input":Ze("invalid",s),Vc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ze("invalid",s);break;case"textarea":Ze("invalid",s),Fi(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||Uy(s.textContent,a)?(o.popover!=null&&(Ze("beforetoggle",s),Ze("toggle",s)),o.onScroll!=null&&Ze("scroll",s),o.onScrollEnd!=null&&Ze("scrollend",s),o.onClick!=null&&(s.onclick=vs),s=!0):s=!1,s||Ji(t,!0)}function Eg(t){for(dn=t.return;dn;)switch(dn.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:dn=dn.return}}function Xa(t){if(t!==dn)return!1;if(!at)return Eg(t),at=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ff(t.type,t.memoizedProps)),a=!a),a&&jt&&Ji(t),Eg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));jt=$y(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));jt=$y(t)}else s===27?(s=jt,fr(t.type)?(t=Qf,Qf=null,jt=t):jt=s):jt=dn?hs(t.stateNode.nextSibling):null;return!0}function aa(){jt=dn=null,at=!1}function Nh(){var t=Zi;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),Zi=null),t}function fo(t){Zi===null?Zi=[t]:Zi.push(t)}var Ah=E(null),la=null,gi=null;function er(t,s,a){Z(Ah,s._currentValue),s._currentValue=a}function yi(t){t._currentValue=Ah.current,P(Ah)}function jh(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Ch(t,s,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<s.length;D++)if(w.context===s[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),jh(m.return,a,t),o||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),jh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Wa(t,s,a,o){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;Gn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===_e.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(zo):t=[zo])}h=h.return}t!==null&&Ch(s,t,a,o),s.flags|=262144}function iu(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function oa(t){la=t,gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hn(t){return Tg(la,t)}function ru(t,s){return la===null&&oa(t),Tg(t,s)}function Tg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},gi===null){if(t===null)throw Error(r(308));gi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else gi=gi.next=s;return a}var sw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},iw=i.unstable_scheduleCallback,rw=i.unstable_NormalPriority,$t={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rh(){return{controller:new sw,data:new Map,refCount:0}}function mo(t){t.refCount--,t.refCount===0&&iw(rw,function(){t.controller.abort()})}var po=null,Ih=0,Za=0,Ja=null;function aw(t,s){if(po===null){var a=po=[];Ih=0,Za=Of(),Ja={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ih++,s.then(Sg,Sg),s}function Sg(){if(--Ih===0&&po!==null){Ja!==null&&(Ja.status="fulfilled");var t=po;po=null,Za=0,Ja=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function lw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Ng=H.S;H.S=function(t,s){cy=ut(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&aw(t,s),Ng!==null&&Ng(t,s)};var ca=E(null);function kh(){var t=ca.current;return t!==null?t:Et.pooledCache}function au(t,s){s===null?Z(ca,ca.current):Z(ca,s.pool)}function Ag(){var t=kh();return t===null?null:{parent:$t._currentValue,pool:t}}var el=Error(r(460)),Dh=Error(r(474)),lu=Error(r(542)),ou={then:function(){}};function jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(vs,vs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ig(t),t;default:if(typeof s.status=="string")s.then(vs,vs);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ig(t),t}throw da=s,el}}function ua(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(da=a,el):a}}var da=null;function Rg(){if(da===null)throw Error(r(459));var t=da;return da=null,t}function Ig(t){if(t===el||t===lu)throw Error(r(483))}var tl=null,go=0;function cu(t){var s=go;return go+=1,tl===null&&(tl=[]),Cg(tl,t,s)}function yo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function uu(t,s){throw s.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function kg(t){function s(z,L){if(t){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)s(z,L),L=L.sibling;return null}function o(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function h(z,L){return z=mi(z,L),z.index=0,z.sibling=null,z}function m(z,L,F){return z.index=F,t?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=67108866,L):F):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,F,ce){return L===null||L.tag!==6?(L=_h(F,z.mode,ce),L.return=z,L):(L=h(L,F),L.return=z,L)}function D(z,L,F,ce){var Me=F.type;return Me===W?ae(z,L,F.props.children,ce,F.key):L!==null&&(L.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&ua(Me)===L.type)?(L=h(L,F.props),yo(L,F),L.return=z,L):(L=nu(F.type,F.key,F.props,null,z.mode,ce),yo(L,F),L.return=z,L)}function G(z,L,F,ce){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=wh(F,z.mode,ce),L.return=z,L):(L=h(L,F.children||[]),L.return=z,L)}function ae(z,L,F,ce,Me){return L===null||L.tag!==7?(L=ra(F,z.mode,ce,Me),L.return=z,L):(L=h(L,F),L.return=z,L)}function de(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=_h(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case U:return F=nu(L.type,L.key,L.props,null,z.mode,F),yo(F,L),F.return=z,F;case K:return L=wh(L,z.mode,F),L.return=z,L;case N:return L=ua(L),de(z,L,F)}if(Ie(L)||V(L))return L=ra(L,z.mode,F,null),L.return=z,L;if(typeof L.then=="function")return de(z,cu(L),F);if(L.$$typeof===pe)return de(z,ru(z,L),F);uu(z,L)}return null}function Y(z,L,F,ce){var Me=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Me!==null?null:w(z,L,""+F,ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case U:return F.key===Me?D(z,L,F,ce):null;case K:return F.key===Me?G(z,L,F,ce):null;case N:return F=ua(F),Y(z,L,F,ce)}if(Ie(F)||V(F))return Me!==null?null:ae(z,L,F,ce,null);if(typeof F.then=="function")return Y(z,L,cu(F),ce);if(F.$$typeof===pe)return Y(z,L,ru(z,F),ce);uu(z,F)}return null}function J(z,L,F,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return z=z.get(F)||null,w(L,z,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case U:return z=z.get(ce.key===null?F:ce.key)||null,D(L,z,ce,Me);case K:return z=z.get(ce.key===null?F:ce.key)||null,G(L,z,ce,Me);case N:return ce=ua(ce),J(z,L,F,ce,Me)}if(Ie(ce)||V(ce))return z=z.get(F)||null,ae(L,z,ce,Me,null);if(typeof ce.then=="function")return J(z,L,F,cu(ce),Me);if(ce.$$typeof===pe)return J(z,L,F,ru(L,ce),Me);uu(L,ce)}return null}function Re(z,L,F,ce){for(var Me=null,ot=null,ke=L,Qe=L=0,nt=null;ke!==null&&Qe<F.length;Qe++){ke.index>Qe?(nt=ke,ke=null):nt=ke.sibling;var ct=Y(z,ke,F[Qe],ce);if(ct===null){ke===null&&(ke=nt);break}t&&ke&&ct.alternate===null&&s(z,ke),L=m(ct,L,Qe),ot===null?Me=ct:ot.sibling=ct,ot=ct,ke=nt}if(Qe===F.length)return a(z,ke),at&&pi(z,Qe),Me;if(ke===null){for(;Qe<F.length;Qe++)ke=de(z,F[Qe],ce),ke!==null&&(L=m(ke,L,Qe),ot===null?Me=ke:ot.sibling=ke,ot=ke);return at&&pi(z,Qe),Me}for(ke=o(ke);Qe<F.length;Qe++)nt=J(ke,z,Qe,F[Qe],ce),nt!==null&&(t&&nt.alternate!==null&&ke.delete(nt.key===null?Qe:nt.key),L=m(nt,L,Qe),ot===null?Me=nt:ot.sibling=nt,ot=nt);return t&&ke.forEach(function(xr){return s(z,xr)}),at&&pi(z,Qe),Me}function Pe(z,L,F,ce){if(F==null)throw Error(r(151));for(var Me=null,ot=null,ke=L,Qe=L=0,nt=null,ct=F.next();ke!==null&&!ct.done;Qe++,ct=F.next()){ke.index>Qe?(nt=ke,ke=null):nt=ke.sibling;var xr=Y(z,ke,ct.value,ce);if(xr===null){ke===null&&(ke=nt);break}t&&ke&&xr.alternate===null&&s(z,ke),L=m(xr,L,Qe),ot===null?Me=xr:ot.sibling=xr,ot=xr,ke=nt}if(ct.done)return a(z,ke),at&&pi(z,Qe),Me;if(ke===null){for(;!ct.done;Qe++,ct=F.next())ct=de(z,ct.value,ce),ct!==null&&(L=m(ct,L,Qe),ot===null?Me=ct:ot.sibling=ct,ot=ct);return at&&pi(z,Qe),Me}for(ke=o(ke);!ct.done;Qe++,ct=F.next())ct=J(ke,z,Qe,ct.value,ce),ct!==null&&(t&&ct.alternate!==null&&ke.delete(ct.key===null?Qe:ct.key),L=m(ct,L,Qe),ot===null?Me=ct:ot.sibling=ct,ot=ct);return t&&ke.forEach(function(x2){return s(z,x2)}),at&&pi(z,Qe),Me}function _t(z,L,F,ce){if(typeof F=="object"&&F!==null&&F.type===W&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case U:e:{for(var Me=F.key;L!==null;){if(L.key===Me){if(Me=F.type,Me===W){if(L.tag===7){a(z,L.sibling),ce=h(L,F.props.children),ce.return=z,z=ce;break e}}else if(L.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&ua(Me)===L.type){a(z,L.sibling),ce=h(L,F.props),yo(ce,F),ce.return=z,z=ce;break e}a(z,L);break}else s(z,L);L=L.sibling}F.type===W?(ce=ra(F.props.children,z.mode,ce,F.key),ce.return=z,z=ce):(ce=nu(F.type,F.key,F.props,null,z.mode,ce),yo(ce,F),ce.return=z,z=ce)}return v(z);case K:e:{for(Me=F.key;L!==null;){if(L.key===Me)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(z,L.sibling),ce=h(L,F.children||[]),ce.return=z,z=ce;break e}else{a(z,L);break}else s(z,L);L=L.sibling}ce=wh(F,z.mode,ce),ce.return=z,z=ce}return v(z);case N:return F=ua(F),_t(z,L,F,ce)}if(Ie(F))return Re(z,L,F,ce);if(V(F)){if(Me=V(F),typeof Me!="function")throw Error(r(150));return F=Me.call(F),Pe(z,L,F,ce)}if(typeof F.then=="function")return _t(z,L,cu(F),ce);if(F.$$typeof===pe)return _t(z,L,ru(z,F),ce);uu(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(z,L.sibling),ce=h(L,F),ce.return=z,z=ce):(a(z,L),ce=_h(F,z.mode,ce),ce.return=z,z=ce),v(z)):a(z,L)}return function(z,L,F,ce){try{go=0;var Me=_t(z,L,F,ce);return tl=null,Me}catch(ke){if(ke===el||ke===lu)throw ke;var ot=Yn(29,ke,null,z.mode);return ot.lanes=ce,ot.return=z,ot}finally{}}}var ha=kg(!0),Dg=kg(!1),tr=!1;function Mh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function sr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ht&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=tu(t),gg(t,null,a),s}return eu(t,o,s,a),tu(t)}function xo(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Fl(t,a)}}function Vh(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Lh=!1;function vo(){if(Lh){var t=Ja;if(t!==null)throw t}}function bo(t,s,a,o){Lh=!1;var h=t.updateQueue;tr=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,G=D.next;D.next=null,v===null?m=G:v.next=G,v=D;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==v&&(w===null?ae.firstBaseUpdate=G:w.next=G,ae.lastBaseUpdate=D))}if(m!==null){var de=h.baseState;v=0,ae=G=D=null,w=m;do{var Y=w.lane&-536870913,J=Y!==w.lane;if(J?(tt&Y)===Y:(o&Y)===Y){Y!==0&&Y===Za&&(Lh=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=t,Pe=w;Y=s;var _t=a;switch(Pe.tag){case 1:if(Re=Pe.payload,typeof Re=="function"){de=Re.call(_t,de,Y);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Pe.payload,Y=typeof Re=="function"?Re.call(_t,de,Y):Re,Y==null)break e;de=T({},de,Y);break e;case 2:tr=!0}}Y=w.callback,Y!==null&&(t.flags|=64,J&&(t.flags|=8192),J=h.callbacks,J===null?h.callbacks=[Y]:J.push(Y))}else J={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(G=ae=J,D=de):ae=ae.next=J,v|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;J=w,w=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);ae===null&&(D=de),h.baseState=D,h.firstBaseUpdate=G,h.lastBaseUpdate=ae,m===null&&(h.shared.lanes=0),or|=v,t.lanes=v,t.memoizedState=de}}function Mg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Og(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Mg(a[t],s)}var nl=E(null),du=E(0);function Vg(t,s){t=Ni,Z(du,t),Z(nl,s),Ni=t|s.baseLanes}function Ph(){Z(du,Ni),Z(nl,nl.current)}function Uh(){Ni=du.current,P(nl),P(du)}var Kn=E(null),ds=null;function ir(t){var s=t.alternate;Z(Ut,Ut.current&1),Z(Kn,t),ds===null&&(s===null||nl.current!==null||s.memoizedState!==null)&&(ds=t)}function zh(t){Z(Ut,Ut.current),Z(Kn,t),ds===null&&(ds=t)}function Lg(t){t.tag===22?(Z(Ut,Ut.current),Z(Kn,t),ds===null&&(ds=t)):rr()}function rr(){Z(Ut,Ut.current),Z(Kn,Kn.current)}function $n(t){P(Kn),ds===t&&(ds=null),P(Ut)}var Ut=E(0);function hu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kf(a)||$f(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,$e=null,vt=null,Qt=null,fu=!1,sl=!1,fa=!1,mu=0,_o=0,il=null,ow=0;function Vt(){throw Error(r(321))}function Bh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Gn(t[a],s[a]))return!1;return!0}function qh(t,s,a,o,h,m){return xi=m,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=t===null||t.memoizedState===null?b0:sf,fa=!1,m=a(o,h),fa=!1,sl&&(m=Ug(s,a,o,h)),Pg(t),m}function Pg(t){H.H=To;var s=vt!==null&&vt.next!==null;if(xi=0,Qt=vt=$e=null,fu=!1,_o=0,il=null,s)throw Error(r(300));t===null||Xt||(t=t.dependencies,t!==null&&iu(t)&&(Xt=!0))}function Ug(t,s,a,o){$e=t;var h=0;do{if(sl&&(il=null),_o=0,sl=!1,25<=h)throw Error(r(301));if(h+=1,Qt=vt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=_0,m=s(a,o)}while(sl);return m}function cw(){var t=H.H,s=t.useState()[0];return s=typeof s.then=="function"?wo(s):s,t=t.useState()[0],(vt!==null?vt.memoizedState:null)!==t&&($e.flags|=1024),s}function Hh(){var t=mu!==0;return mu=0,t}function Fh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Gh(t){if(fu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}fu=!1}xi=0,Qt=vt=$e=null,sl=!1,_o=mu=0,il=null}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?$e.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function zt(){if(vt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var s=Qt===null?$e.memoizedState:Qt.next;if(s!==null)Qt=s,vt=t;else{if(t===null)throw $e.alternate===null?Error(r(467)):Error(r(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Qt===null?$e.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(t){var s=_o;return _o+=1,il===null&&(il=[]),t=Cg(il,t,s),s=$e,(Qt===null?s.memoizedState:Qt.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?b0:sf),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wo(t);if(t.$$typeof===pe)return hn(t)}throw Error(r(438,String(t)))}function Yh(t){var s=null,a=$e.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=$e.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=pu(),$e.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=k;return s.index++,a}function vi(t,s){return typeof s=="function"?s(t):s}function yu(t){var s=zt();return Kh(s,vt,t)}function Kh(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,m=o.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,o.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=v=null,D=null,G=s,ae=!1;do{var de=G.lane&-536870913;if(de!==G.lane?(tt&de)===de:(xi&de)===de){var Y=G.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),de===Za&&(ae=!0);else if((xi&Y)===Y){G=G.next,Y===Za&&(ae=!0);continue}else de={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=de,v=m):D=D.next=de,$e.lanes|=Y,or|=Y;de=G.action,fa&&a(m,de),m=G.hasEagerState?G.eagerState:a(m,de)}else Y={lane:de,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=Y,v=m):D=D.next=Y,$e.lanes|=de,or|=de;G=G.next}while(G!==null&&G!==s);if(D===null?v=m:D.next=w,!Gn(m,t.memoizedState)&&(Xt=!0,ae&&(a=Ja,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=D,o.lastRenderedState=m}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function $h(t){var s=zt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Gn(m,s.memoizedState)||(Xt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function zg(t,s,a){var o=$e,h=zt(),m=at;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Gn((vt||h).memoizedState,a);if(v&&(h.memoizedState=a,Xt=!0),h=h.queue,Wh(Hg.bind(null,o,h,t),[t]),h.getSnapshot!==s||v||Qt!==null&&Qt.memoizedState.tag&1){if(o.flags|=2048,rl(9,{destroy:void 0},qg.bind(null,o,h,a,s),null),Et===null)throw Error(r(349));m||(xi&127)!==0||Bg(o,s,a)}return a}function Bg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=$e.updateQueue,s===null?(s=pu(),$e.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function qg(t,s,a,o){s.value=a,s.getSnapshot=o,Fg(s)&&Gg(t)}function Hg(t,s,a){return a(function(){Fg(s)&&Gg(t)})}function Fg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Gn(t,a)}catch{return!0}}function Gg(t){var s=ia(t,2);s!==null&&Pn(s,t,2)}function Qh(t){var s=jn();if(typeof t=="function"){var a=t;if(t=a(),fa){cn(!0);try{a()}finally{cn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},s}function Yg(t,s,a,o){return t.baseState=a,Kh(t,vt,typeof o=="function"?o:vi)}function uw(t,s,a,o,h){if(bu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};H.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,Kg(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Kg(t,s){var a=s.action,o=s.payload,h=t.state;if(s.isTransition){var m=H.T,v={};H.T=v;try{var w=a(h,o),D=H.S;D!==null&&D(v,w),$g(t,s,w)}catch(G){Xh(t,s,G)}finally{m!==null&&v.types!==null&&(m.types=v.types),H.T=m}}else try{m=a(h,o),$g(t,s,m)}catch(G){Xh(t,s,G)}}function $g(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Qg(t,s,o)},function(o){return Xh(t,s,o)}):Qg(t,s,a)}function Qg(t,s,a){s.status="fulfilled",s.value=a,Xg(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Kg(t,a)))}function Xh(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,Xg(s),s=s.next;while(s!==o)}t.action=null}function Xg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Wg(t,s){return s}function Zg(t,s){if(at){var a=Et.formState;if(a!==null){e:{var o=$e;if(at){if(jt){t:{for(var h=jt,m=us;h.nodeType!==8;){if(!m){h=null;break t}if(h=hs(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){jt=hs(h.nextSibling),o=h.data==="F!";break e}}Ji(o)}o=!1}o&&(s=a[0])}}return a=jn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:s},a.queue=o,a=y0.bind(null,$e,o),o.dispatch=a,o=Qh(!1),m=nf.bind(null,$e,!1,o.queue),o=jn(),h={state:s,dispatch:null,action:t,pending:null},o.queue=h,a=uw.bind(null,$e,h,m,a),h.dispatch=a,o.memoizedState=t,[s,a,!1]}function Jg(t){var s=zt();return e0(s,vt,t)}function e0(t,s,a){if(s=Kh(t,s,Wg)[0],t=yu(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=wo(s)}catch(v){throw v===el?lu:v}else o=s;s=zt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&($e.flags|=2048,rl(9,{destroy:void 0},dw.bind(null,h,a),null)),[o,m,t]}function dw(t,s){t.action=s}function t0(t){var s=zt(),a=vt;if(a!==null)return e0(s,a,t);zt(),s=s.memoizedState,a=zt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function rl(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=$e.updateQueue,s===null&&(s=pu(),$e.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function n0(){return zt().memoizedState}function xu(t,s,a,o){var h=jn();$e.flags|=t,h.memoizedState=rl(1|s,{destroy:void 0},a,o===void 0?null:o)}function vu(t,s,a,o){var h=zt();o=o===void 0?null:o;var m=h.memoizedState.inst;vt!==null&&o!==null&&Bh(o,vt.memoizedState.deps)?h.memoizedState=rl(s,m,a,o):($e.flags|=t,h.memoizedState=rl(1|s,m,a,o))}function s0(t,s){xu(8390656,8,t,s)}function Wh(t,s){vu(2048,8,t,s)}function hw(t){$e.flags|=4;var s=$e.updateQueue;if(s===null)s=pu(),$e.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function i0(t){var s=zt().memoizedState;return hw({ref:s,nextImpl:t}),function(){if((ht&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function r0(t,s){return vu(4,2,t,s)}function a0(t,s){return vu(4,4,t,s)}function l0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function o0(t,s,a){a=a!=null?a.concat([t]):null,vu(4,4,l0.bind(null,s,t),a)}function Zh(){}function c0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Bh(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function u0(t,s){var a=zt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Bh(s,o[1]))return o[0];if(o=t(),fa){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,s],o}function Jh(t,s,a){return a===void 0||(xi&1073741824)!==0&&(tt&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=dy(),$e.lanes|=t,or|=t,a)}function d0(t,s,a,o){return Gn(a,s)?a:nl.current!==null?(t=Jh(t,a,o),Gn(t,s)||(Xt=!0),t):(xi&42)===0||(xi&1073741824)!==0&&(tt&261930)===0?(Xt=!0,t.memoizedState=a):(t=dy(),$e.lanes|=t,or|=t,s)}function h0(t,s,a,o,h){var m=B.p;B.p=m!==0&&8>m?m:8;var v=H.T,w={};H.T=w,nf(t,!1,s,a);try{var D=h(),G=H.S;if(G!==null&&G(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ae=lw(D,o);Eo(t,s,ae,Wn(t))}else Eo(t,s,o,Wn(t))}catch(de){Eo(t,s,{then:function(){},status:"rejected",reason:de},Wn())}finally{B.p=m,v!==null&&w.types!==null&&(v.types=w.types),H.T=v}}function fw(){}function ef(t,s,a,o){if(t.tag!==5)throw Error(r(476));var h=f0(t).queue;h0(t,h,s,ee,a===null?fw:function(){return m0(t),a(o)})}function f0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function m0(t){var s=f0(t);s.next===null&&(s=t.alternate.memoizedState),Eo(t,s.next.queue,{},Wn())}function tf(){return hn(zo)}function p0(){return zt().memoizedState}function g0(){return zt().memoizedState}function mw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Wn();t=nr(a);var o=sr(s,t,a);o!==null&&(Pn(o,s,a),xo(o,s,a)),s={cache:Rh()},t.payload=s;return}s=s.return}}function pw(t,s,a){var o=Wn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bu(t)?x0(s,a):(a=vh(t,s,a,o),a!==null&&(Pn(a,t,o),v0(a,s,o)))}function y0(t,s,a){var o=Wn();Eo(t,s,a,o)}function Eo(t,s,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bu(t))x0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Gn(w,v))return eu(t,s,h,0),Et===null&&Jc(),!1}catch{}finally{}if(a=vh(t,s,h,o),a!==null)return Pn(a,t,o),v0(a,s,o),!0}return!1}function nf(t,s,a,o){if(o={lane:2,revertLane:Of(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(s)throw Error(r(479))}else s=vh(t,a,o,2),s!==null&&Pn(s,t,2)}function bu(t){var s=t.alternate;return t===$e||s!==null&&s===$e}function x0(t,s){sl=fu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function v0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Fl(t,a)}}var To={readContext:hn,use:gu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};To.useEffectEvent=Vt;var b0={readContext:hn,use:gu,useCallback:function(t,s){return jn().memoizedState=[t,s===void 0?null:s],t},useContext:hn,useEffect:s0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,xu(4194308,4,l0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return xu(4194308,4,t,s)},useInsertionEffect:function(t,s){xu(4,2,t,s)},useMemo:function(t,s){var a=jn();s=s===void 0?null:s;var o=t();if(fa){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=jn();if(a!==void 0){var h=a(s);if(fa){cn(!0);try{a(s)}finally{cn(!1)}}}else h=s;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=pw.bind(null,$e,t),[o.memoizedState,t]},useRef:function(t){var s=jn();return t={current:t},s.memoizedState=t},useState:function(t){t=Qh(t);var s=t.queue,a=y0.bind(null,$e,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Zh,useDeferredValue:function(t,s){var a=jn();return Jh(a,t,s)},useTransition:function(){var t=Qh(!1);return t=h0.bind(null,$e,t.queue,!0,!1),jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=$e,h=jn();if(at){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Et===null)throw Error(r(349));(tt&127)!==0||Bg(o,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,s0(Hg.bind(null,o,m,t),[t]),o.flags|=2048,rl(9,{destroy:void 0},qg.bind(null,o,m,a,s),null),a},useId:function(){var t=jn(),s=Et.identifierPrefix;if(at){var a=Xs,o=Qs;a=(o&~(1<<32-wt(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=mu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=ow++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:tf,useFormState:Zg,useActionState:Zg,useOptimistic:function(t){var s=jn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=nf.bind(null,$e,!0,a),a.dispatch=s,[t,s]},useMemoCache:Yh,useCacheRefresh:function(){return jn().memoizedState=mw.bind(null,$e)},useEffectEvent:function(t){var s=jn(),a={impl:t};return s.memoizedState=a,function(){if((ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},sf={readContext:hn,use:gu,useCallback:c0,useContext:hn,useEffect:Wh,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:a0,useMemo:u0,useReducer:yu,useRef:n0,useState:function(){return yu(vi)},useDebugValue:Zh,useDeferredValue:function(t,s){var a=zt();return d0(a,vt.memoizedState,t,s)},useTransition:function(){var t=yu(vi)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:wo(t),s]},useSyncExternalStore:zg,useId:p0,useHostTransitionStatus:tf,useFormState:Jg,useActionState:Jg,useOptimistic:function(t,s){var a=zt();return Yg(a,vt,t,s)},useMemoCache:Yh,useCacheRefresh:g0};sf.useEffectEvent=i0;var _0={readContext:hn,use:gu,useCallback:c0,useContext:hn,useEffect:Wh,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:a0,useMemo:u0,useReducer:$h,useRef:n0,useState:function(){return $h(vi)},useDebugValue:Zh,useDeferredValue:function(t,s){var a=zt();return vt===null?Jh(a,t,s):d0(a,vt.memoizedState,t,s)},useTransition:function(){var t=$h(vi)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:wo(t),s]},useSyncExternalStore:zg,useId:p0,useHostTransitionStatus:tf,useFormState:t0,useActionState:t0,useOptimistic:function(t,s){var a=zt();return vt!==null?Yg(a,vt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yh,useCacheRefresh:g0};_0.useEffectEvent=i0;function rf(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:T({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var af={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Wn(),h=nr(o);h.payload=s,a!=null&&(h.callback=a),s=sr(t,h,o),s!==null&&(Pn(s,t,o),xo(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Wn(),h=nr(o);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=sr(t,h,o),s!==null&&(Pn(s,t,o),xo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Wn(),o=nr(a);o.tag=2,s!=null&&(o.callback=s),s=sr(t,o,a),s!==null&&(Pn(s,t,a),xo(s,t,a))}};function w0(t,s,a,o,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!co(a,o)||!co(h,m):!0}function E0(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&af.enqueueReplaceState(s,s.state,null)}function ma(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function T0(t){Zc(t)}function S0(t){console.error(t)}function N0(t){Zc(t)}function _u(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function A0(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function lf(t,s,a){return a=nr(a),a.tag=3,a.payload={element:null},a.callback=function(){_u(t,s)},a}function j0(t){return t=nr(t),t.tag=3,t}function C0(t,s,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;t.payload=function(){return h(m)},t.callback=function(){A0(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){A0(s,a,o),typeof h!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function gw(t,s,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Wa(s,a,h,!0),a=Kn.current,a!==null){switch(a.tag){case 31:case 13:return ds===null?Du():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===ou?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),kf(t,o,h)),!1;case 22:return a.flags|=65536,o===ou?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),kf(t,o,h)),!1}throw Error(r(435,a.tag))}return kf(t,o,h),Du(),!1}if(at)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==Sh&&(t=Error(r(422),{cause:o}),fo(ls(t,a)))):(o!==Sh&&(s=Error(r(423),{cause:o}),fo(ls(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=ls(o,a),h=lf(t.stateNode,o,h),Vh(t,h),Lt!==4&&(Lt=2)),!1;var m=Error(r(520),{cause:o});if(m=ls(m,a),ko===null?ko=[m]:ko.push(m),Lt!==4&&(Lt=2),s===null)return!0;o=ls(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=lf(a.stateNode,o,t),Vh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cr===null||!cr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=j0(h),C0(h,t,a,o),Vh(a,h),!1}a=a.return}while(a!==null);return!1}var of=Error(r(461)),Xt=!1;function fn(t,s,a,o){s.child=t===null?Dg(s,null,a,o):ha(s,t.child,a,o)}function R0(t,s,a,o,h){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var w in o)w!=="ref"&&(v[w]=o[w])}else v=o;return oa(s),o=qh(t,s,a,v,m,h),w=Hh(),t!==null&&!Xt?(Fh(t,s,h),bi(t,s,h)):(at&&w&&Eh(s),s.flags|=1,fn(t,s,o,h),s.child)}function I0(t,s,a,o,h){if(t===null){var m=a.type;return typeof m=="function"&&!bh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,k0(t,s,m,o,h)):(t=nu(a.type,null,o,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!gf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:co,a(v,o)&&t.ref===s.ref)return bi(t,s,h)}return s.flags|=1,t=mi(m,o),t.ref=s.ref,t.return=s,s.child=t}function k0(t,s,a,o,h){if(t!==null){var m=t.memoizedProps;if(co(m,o)&&t.ref===s.ref)if(Xt=!1,s.pendingProps=o=m,gf(t,h))(t.flags&131072)!==0&&(Xt=!0);else return s.lanes=t.lanes,bi(t,s,h)}return cf(t,s,a,o,h)}function D0(t,s,a,o){var h=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~m}else o=0,s.child=null;return M0(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&au(s,m!==null?m.cachePool:null),m!==null?Vg(s,m):Ph(),Lg(s);else return o=s.lanes=536870912,M0(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(au(s,m.cachePool),Vg(s,m),rr(),s.memoizedState=null):(t!==null&&au(s,null),Ph(),rr());return fn(t,s,h,a),s.child}function So(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function M0(t,s,a,o,h){var m=kh();return m=m===null?null:{parent:$t._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&au(s,null),Ph(),Lg(s),t!==null&&Wa(t,s,o,!0),s.childLanes=h,null}function wu(t,s){return s=Tu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function O0(t,s,a){return ha(s,t.child,null,a),t=wu(s,s.pendingProps),t.flags|=2,$n(s),s.memoizedState=null,t}function yw(t,s,a){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(at){if(o.mode==="hidden")return t=wu(s,o),s.lanes=536870912,So(null,t);if(zh(s),(t=jt)?(t=Ky(t,us),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wi!==null?{id:Qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=xg(t),a.return=s,s.child=a,dn=s,jt=null)):t=null,t===null)throw Ji(s);return s.lanes=536870912,null}return wu(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(zh(s),h)if(s.flags&256)s.flags&=-257,s=O0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Xt||Wa(t,s,a,!1),h=(a&t.childLanes)!==0,Xt||h){if(o=Et,o!==null&&(v=Gl(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ia(t,v),Pn(o,t,v),of;Du(),s=O0(t,s,a)}else t=m.treeContext,jt=hs(v.nextSibling),dn=s,at=!0,Zi=null,us=!1,t!==null&&_g(s,t),s=wu(s,o),s.flags|=4096;return s}return t=mi(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Eu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function cf(t,s,a,o,h){return oa(s),a=qh(t,s,a,o,void 0,h),o=Hh(),t!==null&&!Xt?(Fh(t,s,h),bi(t,s,h)):(at&&o&&Eh(s),s.flags|=1,fn(t,s,a,h),s.child)}function V0(t,s,a,o,h,m){return oa(s),s.updateQueue=null,a=Ug(s,o,a,h),Pg(t),o=Hh(),t!==null&&!Xt?(Fh(t,s,m),bi(t,s,m)):(at&&o&&Eh(s),s.flags|=1,fn(t,s,a,m),s.child)}function L0(t,s,a,o,h){if(oa(s),s.stateNode===null){var m=Ka,v=a.contextType;typeof v=="object"&&v!==null&&(m=hn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=af,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Mh(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?hn(v):Ka,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(rf(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&af.enqueueReplaceState(m,m.state,null),bo(s,o,m,h),vo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,D=ma(a,w);m.props=D;var G=m.context,ae=a.contextType;v=Ka,typeof ae=="object"&&ae!==null&&(v=hn(ae));var de=a.getDerivedStateFromProps;ae=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||G!==v)&&E0(s,m,o,v),tr=!1;var Y=s.memoizedState;m.state=Y,bo(s,o,m,h),vo(),G=s.memoizedState,w||Y!==G||tr?(typeof de=="function"&&(rf(s,a,de,o),G=s.memoizedState),(D=tr||w0(s,a,D,o,Y,G,v))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=G),m.props=o,m.state=G,m.context=v,o=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Oh(t,s),v=s.memoizedProps,ae=ma(a,v),m.props=ae,de=s.pendingProps,Y=m.context,G=a.contextType,D=Ka,typeof G=="object"&&G!==null&&(D=hn(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==de||Y!==D)&&E0(s,m,o,D),tr=!1,Y=s.memoizedState,m.state=Y,bo(s,o,m,h),vo();var J=s.memoizedState;v!==de||Y!==J||tr||t!==null&&t.dependencies!==null&&iu(t.dependencies)?(typeof w=="function"&&(rf(s,a,w,o),J=s.memoizedState),(ae=tr||w0(s,a,ae,o,Y,J,D)||t!==null&&t.dependencies!==null&&iu(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,J,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,J,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=J),m.props=o,m.state=J,m.context=D,o=ae):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Eu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=ha(s,t.child,null,h),s.child=ha(s,null,a,h)):fn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=bi(t,s,h),t}function P0(t,s,a,o){return aa(),s.flags|=256,fn(t,s,a,o),s.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function df(t){return{baseLanes:t,cachePool:Ag()}}function hf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Xn),t}function U0(t,s,a){var o=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(at){if(h?ir(s):rr(),(t=jt)?(t=Ky(t,us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wi!==null?{id:Qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=xg(t),a.return=s,s.child=a,dn=s,jt=null)):t=null,t===null)throw Ji(s);return $f(t)?s.lanes=32:s.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(rr(),h=s.mode,w=Tu({mode:"hidden",children:w},h),o=ra(o,h,a,null),w.return=s,o.return=s,w.sibling=o,s.child=w,o=s.child,o.memoizedState=df(a),o.childLanes=hf(t,v,a),s.memoizedState=uf,So(null,o)):(ir(s),ff(s,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)s.flags&256?(ir(s),s.flags&=-257,s=mf(t,s,a)):s.memoizedState!==null?(rr(),s.child=t.child,s.flags|=128,s=null):(rr(),w=o.fallback,h=s.mode,o=Tu({mode:"visible",children:o.children},h),w=ra(w,h,a,null),w.flags|=2,o.return=s,w.return=s,o.sibling=w,s.child=o,ha(s,t.child,null,a),o=s.child,o.memoizedState=df(a),o.childLanes=hf(t,v,a),s.memoizedState=uf,s=So(null,o));else if(ir(s),$f(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var G=v.dgst;v=G,o=Error(r(419)),o.stack="",o.digest=v,fo({value:o,source:null,stack:null}),s=mf(t,s,a)}else if(Xt||Wa(t,s,a,!1),v=(a&t.childLanes)!==0,Xt||v){if(v=Et,v!==null&&(o=Gl(v,a),o!==0&&o!==D.retryLane))throw D.retryLane=o,ia(t,o),Pn(v,t,o),of;Kf(w)||Du(),s=mf(t,s,a)}else Kf(w)?(s.flags|=192,s.child=t.child,s=null):(t=D.treeContext,jt=hs(w.nextSibling),dn=s,at=!0,Zi=null,us=!1,t!==null&&_g(s,t),s=ff(s,o.children),s.flags|=4096);return s}return h?(rr(),w=o.fallback,h=s.mode,D=t.child,G=D.sibling,o=mi(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,G!==null?w=mi(G,w):(w=ra(w,h,a,null),w.flags|=2),w.return=s,o.return=s,o.sibling=w,s.child=o,So(null,o),o=s.child,w=t.child.memoizedState,w===null?w=df(a):(h=w.cachePool,h!==null?(D=$t._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Ag(),w={baseLanes:w.baseLanes|a,cachePool:h}),o.memoizedState=w,o.childLanes=hf(t,v,a),s.memoizedState=uf,So(t.child,o)):(ir(s),a=t.child,t=a.sibling,a=mi(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function ff(t,s){return s=Tu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Tu(t,s){return t=Yn(22,t,null,s),t.lanes=0,t}function mf(t,s,a){return ha(s,t.child,null,a),t=ff(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function z0(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),jh(t.return,s,a)}function pf(t,s,a,o,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function B0(t,s,a){var o=s.pendingProps,h=o.revealOrder,m=o.tail;o=o.children;var v=Ut.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,Z(Ut,v),fn(t,s,o,a),o=at?ho:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&z0(t,a,s);else if(t.tag===19)z0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&hu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),pf(s,!1,h,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&hu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}pf(s,!0,a,null,m,o);break;case"together":pf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function bi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),or|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Wa(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=mi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=mi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function gf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&iu(t)))}function xw(t,s,a){switch(s.tag){case 3:Ue(s,s.stateNode.containerInfo),er(s,$t,t.memoizedState.cache),aa();break;case 27:case 5:re(s);break;case 4:Ue(s,s.stateNode.containerInfo);break;case 10:er(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,zh(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ir(s),s.flags|=128,null):(a&s.child.childLanes)!==0?U0(t,s,a):(ir(s),t=bi(t,s,a),t!==null?t.sibling:null);ir(s);break;case 19:var h=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Wa(t,s,a,!1),o=(a&s.childLanes)!==0),h){if(o)return B0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(Ut,Ut.current),o)break;return null;case 22:return s.lanes=0,D0(t,s,a,s.pendingProps);case 24:er(s,$t,t.memoizedState.cache)}return bi(t,s,a)}function q0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Xt=!0;else{if(!gf(t,a)&&(s.flags&128)===0)return Xt=!1,xw(t,s,a);Xt=(t.flags&131072)!==0}else Xt=!1,at&&(s.flags&1048576)!==0&&bg(s,ho,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=ua(s.elementType),s.type=t,typeof t=="function")bh(t)?(o=ma(t,o),s.tag=1,s=L0(null,s,t,o,a)):(s.tag=0,s=cf(null,s,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===fe){s.tag=11,s=R0(null,s,t,o,a);break e}else if(h===C){s.tag=14,s=I0(null,s,t,o,a);break e}}throw s=le(t)||t,Error(r(306,s,""))}}return s;case 0:return cf(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,h=ma(o,s.pendingProps),L0(t,s,o,h,a);case 3:e:{if(Ue(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;h=m.element,Oh(t,s),bo(s,o,null,a);var v=s.memoizedState;if(o=v.cache,er(s,$t,o),o!==m.cache&&Ch(s,[$t],a,!0),vo(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=P0(t,s,o,a);break e}else if(o!==h){h=ls(Error(r(424)),s),fo(h),s=P0(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(jt=hs(t.firstChild),dn=s,at=!0,Zi=null,us=!0,a=Dg(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(aa(),o===h){s=bi(t,s,a);break e}fn(t,s,o,a)}s=s.child}return s;case 26:return Eu(t,s),t===null?(a=Jy(s.type,null,s.pendingProps,null))?s.memoizedState=a:at||(a=s.type,t=s.pendingProps,o=zu(ge.current).createElement(a),o[Gt]=s,o[sn]=t,mn(o,a,t),Yt(o),s.stateNode=o):s.memoizedState=Jy(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return re(s),t===null&&at&&(o=s.stateNode=Xy(s.type,s.pendingProps,ge.current),dn=s,us=!0,h=jt,fr(s.type)?(Qf=h,jt=hs(o.firstChild)):jt=h),fn(t,s,s.pendingProps.children,a),Eu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&at&&((h=o=jt)&&(o=$w(o,s.type,s.pendingProps,us),o!==null?(s.stateNode=o,dn=s,jt=hs(o.firstChild),us=!1,h=!0):h=!1),h||Ji(s)),re(s),h=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Ff(h,m)?o=null:v!==null&&Ff(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=qh(t,s,cw,null,null,a),zo._currentValue=h),Eu(t,s),fn(t,s,o,a),s.child;case 6:return t===null&&at&&((t=a=jt)&&(a=Qw(a,s.pendingProps,us),a!==null?(s.stateNode=a,dn=s,jt=null,t=!0):t=!1),t||Ji(s)),null;case 13:return U0(t,s,a);case 4:return Ue(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=ha(s,null,o,a):fn(t,s,o,a),s.child;case 11:return R0(t,s,s.type,s.pendingProps,a);case 7:return fn(t,s,s.pendingProps,a),s.child;case 8:return fn(t,s,s.pendingProps.children,a),s.child;case 12:return fn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,er(s,s.type,o.value),fn(t,s,o.children,a),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,oa(s),h=hn(h),o=o(h),s.flags|=1,fn(t,s,o,a),s.child;case 14:return I0(t,s,s.type,s.pendingProps,a);case 15:return k0(t,s,s.type,s.pendingProps,a);case 19:return B0(t,s,a);case 31:return yw(t,s,a);case 22:return D0(t,s,a,s.pendingProps);case 24:return oa(s),o=hn($t),t===null?(h=kh(),h===null&&(h=Et,m=Rh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:o,cache:h},Mh(s),er(s,$t,h)):((t.lanes&a)!==0&&(Oh(t,s),bo(s,null,null,a),vo()),h=t.memoizedState,m=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),er(s,$t,o)):(o=m.cache,er(s,$t,o),o!==h.cache&&Ch(s,[$t],a,!0))),fn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _i(t){t.flags|=4}function yf(t,s,a,o,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(py())t.flags|=8192;else throw da=ou,Dh}else t.flags&=-16777217}function H0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ix(s))if(py())t.flags|=8192;else throw da=ou,Dh}function Su(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ic():536870912,t.lanes|=s,cl|=s)}function No(t,s){if(!at)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ct(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function vw(t,s,a){var o=s.pendingProps;switch(Th(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return Ct(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),yi($t),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Xa(s)?_i(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nh())),Ct(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(_i(s),m!==null?(Ct(s),H0(s,m)):(Ct(s),yf(s,h,null,o,a))):m?m!==t.memoizedState?(_i(s),Ct(s),H0(s,m)):(Ct(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&_i(s),Ct(s),yf(s,h,t,o,a)),null;case 27:if(we(s),a=ge.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}t=M.current,Xa(s)?wg(s):(t=Xy(h,o,a),s.stateNode=t,_i(s))}return Ct(s),null;case 5:if(we(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}if(m=M.current,Xa(s))wg(s);else{var v=zu(ge.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}m[Gt]=s,m[sn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(mn(m,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&_i(s)}}return Ct(s),yf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&_i(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=ge.current,Xa(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,h=dn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Gt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Uy(t.nodeValue,a)),t||Ji(s,!0)}else t=zu(t).createTextNode(o),t[Gt]=s,s.stateNode=t}return Ct(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Xa(s),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Gt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),t=!1}else a=Nh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?($n(s),s):($n(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ct(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Xa(s),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Gt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),h=!1}else h=Nh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?($n(s),s):($n(s),null)}return $n(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Su(s,s.updateQueue),Ct(s),null);case 4:return Le(),t===null&&Uf(s.stateNode.containerInfo),Ct(s),null;case 10:return yi(s.type),Ct(s),null;case 19:if(P(Ut),o=s.memoizedState,o===null)return Ct(s),null;if(h=(s.flags&128)!==0,m=o.rendering,m===null)if(h)No(o,!1);else{if(Lt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=hu(t),m!==null){for(s.flags|=128,No(o,!1),t=m.updateQueue,s.updateQueue=t,Su(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)yg(a,t),a=a.sibling;return Z(Ut,Ut.current&1|2),at&&pi(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&ut()>Ru&&(s.flags|=128,h=!0,No(o,!1),s.lanes=4194304)}else{if(!h)if(t=hu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Su(s,t),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!at)return Ct(s),null}else 2*ut()-o.renderingStartTime>Ru&&a!==536870912&&(s.flags|=128,h=!0,No(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ut(),t.sibling=null,a=Ut.current,Z(Ut,h?a&1|2:a&1),at&&pi(s,o.treeForkCount),t):(Ct(s),null);case 22:case 23:return $n(s),Uh(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),a=s.updateQueue,a!==null&&Su(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&P(ca),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),yi($t),Ct(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function bw(t,s){switch(Th(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return yi($t),Le(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return we(s),null;case 31:if(s.memoizedState!==null){if($n(s),s.alternate===null)throw Error(r(340));aa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if($n(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));aa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(Ut),null;case 4:return Le(),null;case 10:return yi(s.type),null;case 22:case 23:return $n(s),Uh(),t!==null&&P(ca),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return yi($t),null;case 25:return null;default:return null}}function F0(t,s){switch(Th(s),s.tag){case 3:yi($t),Le();break;case 26:case 27:case 5:we(s);break;case 4:Le();break;case 31:s.memoizedState!==null&&$n(s);break;case 13:$n(s);break;case 19:P(Ut);break;case 10:yi(s.type);break;case 22:case 23:$n(s),Uh(),t!==null&&P(ca);break;case 24:yi($t)}}function Ao(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==h)}}catch(w){gt(s,s.return,w)}}function ar(t,s,a){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&t)===t){var v=o.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=s;var D=a,G=w;try{G()}catch(ae){gt(h,D,ae)}}}o=o.next}while(o!==m)}}catch(ae){gt(s,s.return,ae)}}function G0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Og(s,a)}catch(o){gt(t,t.return,o)}}}function Y0(t,s,a){a.props=ma(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){gt(t,s,o)}}function jo(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){gt(t,s,h)}}function Ws(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){gt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){gt(t,s,h)}else a.current=null}function K0(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){gt(t,t.return,h)}}function xf(t,s,a){try{var o=t.stateNode;qw(o,t.type,a,s),o[sn]=s}catch(h){gt(t,t.return,h)}}function $0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fr(t.type)||t.tag===4}function vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vs));else if(o!==4&&(o===27&&fr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(bf(t,s,a),t=t.sibling;t!==null;)bf(t,s,a),t=t.sibling}function Nu(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Nu(t,s,a),t=t.sibling;t!==null;)Nu(t,s,a),t=t.sibling}function Q0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);mn(s,o,a),s[Gt]=t,s[sn]=a}catch(m){gt(t,t.return,m)}}var wi=!1,Wt=!1,_f=!1,X0=typeof WeakSet=="function"?WeakSet:Set,an=null;function _w(t,s){if(t=t.containerInfo,qf=Ku,t=og(t),fh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,D=-1,G=0,ae=0,de=t,Y=null;t:for(;;){for(var J;de!==a||h!==0&&de.nodeType!==3||(w=v+h),de!==m||o!==0&&de.nodeType!==3||(D=v+o),de.nodeType===3&&(v+=de.nodeValue.length),(J=de.firstChild)!==null;)Y=de,de=J;for(;;){if(de===t)break t;if(Y===a&&++G===h&&(w=v),Y===m&&++ae===o&&(D=v),(J=de.nextSibling)!==null)break;de=Y,Y=de.parentNode}de=J}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hf={focusedElem:t,selectionRange:a},Ku=!1,an=s;an!==null;)if(s=an,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,an=t;else for(;an!==null;){switch(s=an,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var Re=ma(a.type,h);t=o.getSnapshotBeforeUpdate(Re,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Pe){gt(a,a.return,Pe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Yf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,an=t;break}an=s.return}}function W0(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(t,a),o&4&&Ao(5,a);break;case 1:if(Ti(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){gt(a,a.return,v)}else{var h=ma(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){gt(a,a.return,v)}}o&64&&G0(a),o&512&&jo(a,a.return);break;case 3:if(Ti(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Og(t,s)}catch(v){gt(a,a.return,v)}}break;case 27:s===null&&o&4&&Q0(a);case 26:case 5:Ti(t,a),s===null&&o&4&&K0(a),o&512&&jo(a,a.return);break;case 12:Ti(t,a);break;case 31:Ti(t,a),o&4&&ey(t,a);break;case 13:Ti(t,a),o&4&&ty(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Rw.bind(null,a),Xw(t,a))));break;case 22:if(o=a.memoizedState!==null||wi,!o){s=s!==null&&s.memoizedState!==null||Wt,h=wi;var m=Wt;wi=o,(Wt=s)&&!m?Si(t,a,(a.subtreeFlags&8772)!==0):Ti(t,a),wi=h,Wt=m}break;case 30:break;default:Ti(t,a)}}function Z0(t){var s=t.alternate;s!==null&&(t.alternate=null,Z0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Da(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Dt=null,Mn=!1;function Ei(t,s,a){for(a=a.child;a!==null;)J0(t,s,a),a=a.sibling}function J0(t,s,a){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(on,a)}catch{}switch(a.tag){case 26:Wt||Ws(a,s),Ei(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Wt||Ws(a,s);var o=Dt,h=Mn;fr(a.type)&&(Dt=a.stateNode,Mn=!1),Ei(t,s,a),Lo(a.stateNode),Dt=o,Mn=h;break;case 5:Wt||Ws(a,s);case 6:if(o=Dt,h=Mn,Dt=null,Ei(t,s,a),Dt=o,Mn=h,Dt!==null)if(Mn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(a.stateNode)}catch(m){gt(a,s,m)}else try{Dt.removeChild(a.stateNode)}catch(m){gt(a,s,m)}break;case 18:Dt!==null&&(Mn?(t=Dt,Gy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),yl(t)):Gy(Dt,a.stateNode));break;case 4:o=Dt,h=Mn,Dt=a.stateNode.containerInfo,Mn=!0,Ei(t,s,a),Dt=o,Mn=h;break;case 0:case 11:case 14:case 15:ar(2,a,s),Wt||ar(4,a,s),Ei(t,s,a);break;case 1:Wt||(Ws(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Y0(a,s,o)),Ei(t,s,a);break;case 21:Ei(t,s,a);break;case 22:Wt=(o=Wt)||a.memoizedState!==null,Ei(t,s,a),Wt=o;break;default:Ei(t,s,a)}}function ey(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{yl(t)}catch(a){gt(s,s.return,a)}}}function ty(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yl(t)}catch(a){gt(s,s.return,a)}}function ww(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new X0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new X0),s;default:throw Error(r(435,t.tag))}}function Au(t,s){var a=ww(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var h=Iw.bind(null,t,o);o.then(h,h)}})}function On(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],m=t,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(fr(w.type)){Dt=w.stateNode,Mn=!1;break e}break;case 5:Dt=w.stateNode,Mn=!1;break e;case 3:case 4:Dt=w.stateNode.containerInfo,Mn=!0;break e}w=w.return}if(Dt===null)throw Error(r(160));J0(m,v,h),Dt=null,Mn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ny(s,t),s=s.sibling}var Ss=null;function ny(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(s,t),Vn(t),o&4&&(ar(3,t,t.return),Ao(3,t),ar(5,t,t.return));break;case 1:On(s,t),Vn(t),o&512&&(Wt||a===null||Ws(a,a.return)),o&64&&wi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ss;if(On(s,t),Vn(t),o&512&&(Wt||a===null||Ws(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ls]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(o),h.head.insertBefore(m,h.querySelector("head > title"))),mn(m,o,a),m[Gt]=t,Yt(m),o=m;break e;case"link":var v=nx("link","href",h).get(o+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(o),mn(m,o,a),h.head.appendChild(m);break;case"meta":if(v=nx("meta","content",h).get(o+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(o),mn(m,o,a),h.head.appendChild(m);break;default:throw Error(r(468,o))}m[Gt]=t,Yt(m),o=m}t.stateNode=o}else sx(h,t.type,t.stateNode);else t.stateNode=tx(h,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?sx(h,t.type,t.stateNode):tx(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&xf(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(s,t),Vn(t),o&512&&(Wt||a===null||Ws(a,a.return)),a!==null&&o&4&&xf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(s,t),Vn(t),o&512&&(Wt||a===null||Ws(a,a.return)),t.flags&32){h=t.stateNode;try{Dn(h,"")}catch(Re){gt(t,t.return,Re)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,xf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(_f=!0);break;case 6:if(On(s,t),Vn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Re){gt(t,t.return,Re)}}break;case 3:if(Hu=null,h=Ss,Ss=Bu(s.containerInfo),On(s,t),Ss=h,Vn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{yl(s.containerInfo)}catch(Re){gt(t,t.return,Re)}_f&&(_f=!1,sy(t));break;case 4:o=Ss,Ss=Bu(t.stateNode.containerInfo),On(s,t),Vn(t),Ss=o;break;case 12:On(s,t),Vn(t);break;case 31:On(s,t),Vn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Au(t,o)));break;case 13:On(s,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cu=ut()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Au(t,o)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,G=wi,ae=Wt;if(wi=G||h,Wt=ae||D,On(s,t),Wt=ae,wi=G,Vn(t),o&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||D||wi||Wt||pa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(m=D.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var de=D.memoizedProps.style,Y=de!=null&&de.hasOwnProperty("display")?de.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Re){gt(D,D.return,Re)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Re){gt(D,D.return,Re)}}}else if(s.tag===18){if(a===null){D=s;try{var J=D.stateNode;h?Yy(J,!0):Yy(D.stateNode,!1)}catch(Re){gt(D,D.return,Re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Au(t,a))));break;case 19:On(s,t),Vn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Au(t,o)));break;case 30:break;case 21:break;default:On(s,t),Vn(t)}}function Vn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if($0(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=vf(t);Nu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(Dn(v,""),a.flags&=-33);var w=vf(t);Nu(t,w,v);break;case 3:case 4:var D=a.stateNode.containerInfo,G=vf(t);bf(t,G,D);break;default:throw Error(r(161))}}catch(ae){gt(t,t.return,ae)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function sy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;sy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ti(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)W0(t,s.alternate,s),s=s.sibling}function pa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ar(4,s,s.return),pa(s);break;case 1:Ws(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Y0(s,s.return,a),pa(s);break;case 27:Lo(s.stateNode);case 26:case 5:Ws(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}t=t.sibling}}function Si(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Si(h,m,a),Ao(4,m);break;case 1:if(Si(h,m,a),o=m,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){gt(o,o.return,G)}if(o=m,h=o.updateQueue,h!==null){var w=o.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Mg(D[h],w)}catch(G){gt(o,o.return,G)}}a&&v&64&&G0(m),jo(m,m.return);break;case 27:Q0(m);case 26:case 5:Si(h,m,a),a&&o===null&&v&4&&K0(m),jo(m,m.return);break;case 12:Si(h,m,a);break;case 31:Si(h,m,a),a&&v&4&&ey(h,m);break;case 13:Si(h,m,a),a&&v&4&&ty(h,m);break;case 22:m.memoizedState===null&&Si(h,m,a),jo(m,m.return);break;case 30:break;default:Si(h,m,a)}s=s.sibling}}function wf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&mo(a))}function Ef(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&mo(t))}function Ns(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)iy(t,s,a,o),s=s.sibling}function iy(t,s,a,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ns(t,s,a,o),h&2048&&Ao(9,s);break;case 1:Ns(t,s,a,o);break;case 3:Ns(t,s,a,o),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&mo(t)));break;case 12:if(h&2048){Ns(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){gt(s,s.return,D)}}else Ns(t,s,a,o);break;case 31:Ns(t,s,a,o);break;case 13:Ns(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?Ns(t,s,a,o):Co(t,s):m._visibility&2?Ns(t,s,a,o):(m._visibility|=2,al(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&wf(v,s);break;case 24:Ns(t,s,a,o),h&2048&&Ef(s.alternate,s);break;default:Ns(t,s,a,o)}}function al(t,s,a,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,w=a,D=o,G=v.flags;switch(v.tag){case 0:case 11:case 15:al(m,v,w,D,h),Ao(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&2?al(m,v,w,D,h):Co(m,v):(ae._visibility|=2,al(m,v,w,D,h)),h&&G&2048&&wf(v.alternate,v);break;case 24:al(m,v,w,D,h),h&&G&2048&&Ef(v.alternate,v);break;default:al(m,v,w,D,h)}s=s.sibling}}function Co(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,h=o.flags;switch(o.tag){case 22:Co(a,o),h&2048&&wf(o.alternate,o);break;case 24:Co(a,o),h&2048&&Ef(o.alternate,o);break;default:Co(a,o)}s=s.sibling}}var Ro=8192;function ll(t,s,a){if(t.subtreeFlags&Ro)for(t=t.child;t!==null;)ry(t,s,a),t=t.sibling}function ry(t,s,a){switch(t.tag){case 26:ll(t,s,a),t.flags&Ro&&t.memoizedState!==null&&o2(a,Ss,t.memoizedState,t.memoizedProps);break;case 5:ll(t,s,a);break;case 3:case 4:var o=Ss;Ss=Bu(t.stateNode.containerInfo),ll(t,s,a),Ss=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ro,Ro=16777216,ll(t,s,a),Ro=o):ll(t,s,a));break;default:ll(t,s,a)}}function ay(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Io(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];an=o,oy(o,t)}ay(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ly(t),t=t.sibling}function ly(t){switch(t.tag){case 0:case 11:case 15:Io(t),t.flags&2048&&ar(9,t,t.return);break;case 3:Io(t);break;case 12:Io(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ju(t)):Io(t);break;default:Io(t)}}function ju(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];an=o,oy(o,t)}ay(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ar(8,s,s.return),ju(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ju(s));break;default:ju(s)}t=t.sibling}}function oy(t,s){for(;an!==null;){var a=an;switch(a.tag){case 0:case 11:case 15:ar(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:mo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,an=o;else e:for(a=t;an!==null;){o=an;var h=o.sibling,m=o.return;if(Z0(o),o===a){an=null;break e}if(h!==null){h.return=m,an=h;break e}an=m}}}var Ew={getCacheForType:function(t){var s=hn($t),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return hn($t).controller.signal}},Tw=typeof WeakMap=="function"?WeakMap:Map,ht=0,Et=null,We=null,tt=0,pt=0,Qn=null,lr=!1,ol=!1,Tf=!1,Ni=0,Lt=0,or=0,ga=0,Sf=0,Xn=0,cl=0,ko=null,Ln=null,Nf=!1,Cu=0,cy=0,Ru=1/0,Iu=null,cr=null,tn=0,ur=null,ul=null,Ai=0,Af=0,jf=null,uy=null,Do=0,Cf=null;function Wn(){return(ht&2)!==0&&tt!==0?tt&-tt:H.T!==null?Of():kc()}function dy(){if(Xn===0)if((tt&536870912)===0||at){var t=Hr;Hr<<=1,(Hr&3932160)===0&&(Hr=262144),Xn=t}else Xn=536870912;return t=Kn.current,t!==null&&(t.flags|=32),Xn}function Pn(t,s,a){(t===Et&&(pt===2||pt===9)||t.cancelPendingCommit!==null)&&(dl(t,0),dr(t,tt,Xn,!1)),Fr(t,a),((ht&2)===0||t!==Et)&&(t===Et&&((ht&2)===0&&(ga|=a),Lt===4&&dr(t,tt,Xn,!1)),Zs(t))}function hy(t,s,a){if((ht&6)!==0)throw Error(r(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||gs(t,s),h=o?Aw(t,s):If(t,s,!0),m=o;do{if(h===0){ol&&!o&&dr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!Sw(a)){h=If(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=t;h=ko;var D=w.current.memoizedState.isDehydrated;if(D&&(dl(w,v).flags|=256),v=If(w,v,!1),v!==2){if(Tf&&!D){w.errorRecoveryDisabledLanes|=m,ga|=m,h=4;break e}m=Ln,Ln=h,m!==null&&(Ln===null?Ln=m:Ln.push.apply(Ln,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){dl(t,0),dr(t,s,0,!0);break}e:{switch(o=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:dr(o,s,Xn,!lr);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Cu+300-ut(),10<h)){if(dr(o,s,Xn,!lr),Ms(o,0,!0)!==0)break e;Ai=s,o.timeoutHandle=Hy(fy.bind(null,o,a,Ln,Iu,Nf,s,Xn,ga,cl,lr,m,"Throttled",-0,0),h);break e}fy(o,a,Ln,Iu,Nf,s,Xn,ga,cl,lr,m,null,-0,0)}}break}while(!0);Zs(t)}function fy(t,s,a,o,h,m,v,w,D,G,ae,de,Y,J){if(t.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vs},ry(s,m,de);var Re=(m&62914560)===m?Cu-ut():(m&4194048)===m?cy-ut():0;if(Re=c2(de,Re),Re!==null){Ai=m,t.cancelPendingCommit=Re(_y.bind(null,t,s,m,a,o,h,v,w,D,ae,de,null,Y,J)),dr(t,m,v,!G);return}}_y(t,s,m,a,o,h,v,w,D)}function Sw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],m=h.getSnapshot;h=h.value;try{if(!Gn(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function dr(t,s,a,o){s&=~Sf,s&=~ga,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var h=s;0<h;){var m=31-wt(h),v=1<<m;o[m]=-1,h&=~v}a!==0&&Gr(t,a,s)}function ku(){return(ht&6)===0?(Mo(0),!1):!0}function Rf(){if(We!==null){if(pt===0)var t=We.return;else t=We,gi=la=null,Gh(t),tl=null,go=0,t=We;for(;t!==null;)F0(t.alternate,t),t=t.return;We=null}}function dl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Gw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ai=0,Rf(),Et=t,We=a=mi(t.current,null),tt=s,pt=0,Qn=null,lr=!1,ol=gs(t,s),Tf=!1,cl=Xn=Sf=ga=or=Lt=0,Ln=ko=null,Nf=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var h=31-wt(o),m=1<<h;s|=t[h],o&=~m}return Ni=s,Jc(),a}function my(t,s){$e=null,H.H=To,s===el||s===lu?(s=Rg(),pt=3):s===Dh?(s=Rg(),pt=4):pt=s===of?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qn=s,We===null&&(Lt=1,_u(t,ls(s,t.current)))}function py(){var t=Kn.current;return t===null?!0:(tt&4194048)===tt?ds===null:(tt&62914560)===tt||(tt&536870912)!==0?t===ds:!1}function gy(){var t=H.H;return H.H=To,t===null?To:t}function yy(){var t=H.A;return H.A=Ew,t}function Du(){Lt=4,lr||(tt&4194048)!==tt&&Kn.current!==null||(ol=!0),(or&134217727)===0&&(ga&134217727)===0||Et===null||dr(Et,tt,Xn,!1)}function If(t,s,a){var o=ht;ht|=2;var h=gy(),m=yy();(Et!==t||tt!==s)&&(Iu=null,dl(t,s)),s=!1;var v=Lt;e:do try{if(pt!==0&&We!==null){var w=We,D=Qn;switch(pt){case 8:Rf(),v=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var G=pt;if(pt=0,Qn=null,hl(t,w,D,G),a&&ol){v=0;break e}break;default:G=pt,pt=0,Qn=null,hl(t,w,D,G)}}Nw(),v=Lt;break}catch(ae){my(t,ae)}while(!0);return s&&t.shellSuspendCounter++,gi=la=null,ht=o,H.H=h,H.A=m,We===null&&(Et=null,tt=0,Jc()),v}function Nw(){for(;We!==null;)xy(We)}function Aw(t,s){var a=ht;ht|=2;var o=gy(),h=yy();Et!==t||tt!==s?(Iu=null,Ru=ut()+500,dl(t,s)):ol=gs(t,s);e:do try{if(pt!==0&&We!==null){s=We;var m=Qn;t:switch(pt){case 1:pt=0,Qn=null,hl(t,s,m,1);break;case 2:case 9:if(jg(m)){pt=0,Qn=null,vy(s);break}s=function(){pt!==2&&pt!==9||Et!==t||(pt=7),Zs(t)},m.then(s,s);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:jg(m)?(pt=0,Qn=null,vy(s)):(pt=0,Qn=null,hl(t,s,m,7));break;case 5:var v=null;switch(We.tag){case 26:v=We.memoizedState;case 5:case 27:var w=We;if(v?ix(v):w.stateNode.complete){pt=0,Qn=null;var D=w.sibling;if(D!==null)We=D;else{var G=w.return;G!==null?(We=G,Mu(G)):We=null}break t}}pt=0,Qn=null,hl(t,s,m,5);break;case 6:pt=0,Qn=null,hl(t,s,m,6);break;case 8:Rf(),Lt=6;break e;default:throw Error(r(462))}}jw();break}catch(ae){my(t,ae)}while(!0);return gi=la=null,H.H=o,H.A=h,ht=a,We!==null?0:(Et=null,tt=0,Jc(),Lt)}function jw(){for(;We!==null&&!De();)xy(We)}function xy(t){var s=q0(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,s===null?Mu(t):We=s}function vy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=V0(a,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=V0(a,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:Gh(s);default:F0(a,s),s=We=yg(s,Ni),s=q0(a,s,Ni)}t.memoizedProps=t.pendingProps,s===null?Mu(t):We=s}function hl(t,s,a,o){gi=la=null,Gh(s),tl=null,go=0;var h=s.return;try{if(gw(t,h,s,a,tt)){Lt=1,_u(t,ls(a,t.current)),We=null;return}}catch(m){if(h!==null)throw We=h,m;Lt=1,_u(t,ls(a,t.current)),We=null;return}s.flags&32768?(at||o===1?t=!0:ol||(tt&536870912)!==0?t=!1:(lr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Kn.current,o!==null&&o.tag===13&&(o.flags|=16384))),by(s,t)):Mu(s)}function Mu(t){var s=t;do{if((s.flags&32768)!==0){by(s,lr);return}t=s.return;var a=vw(s.alternate,s,Ni);if(a!==null){We=a;return}if(s=s.sibling,s!==null){We=s;return}We=s=t}while(s!==null);Lt===0&&(Lt=5)}function by(t,s){do{var a=bw(t.alternate,t);if(a!==null){a.flags&=32767,We=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){We=t;return}We=t=a}while(t!==null);Lt=6,We=null}function _y(t,s,a,o,h,m,v,w,D){t.cancelPendingCommit=null;do Ou();while(tn!==0);if((ht&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=xh,ch(t,a,m,v,w,D),t===Et&&(We=Et=null,tt=0),ul=s,ur=t,Ai=a,Af=m,jf=h,uy=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,kw(bn,function(){return Ny(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=B.p,B.p=2,v=ht,ht|=4;try{_w(t,s,a)}finally{ht=v,B.p=h,H.T=o}}tn=1,wy(),Ey(),Ty()}}function wy(){if(tn===1){tn=0;var t=ur,s=ul,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=B.p;B.p=2;var h=ht;ht|=4;try{ny(s,t);var m=Hf,v=og(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&lg(w.ownerDocument.documentElement,w)){if(D!==null&&fh(w)){var G=D.start,ae=D.end;if(ae===void 0&&(ae=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(ae,w.value.length);else{var de=w.ownerDocument||document,Y=de&&de.defaultView||window;if(Y.getSelection){var J=Y.getSelection(),Re=w.textContent.length,Pe=Math.min(D.start,Re),_t=D.end===void 0?Pe:Math.min(D.end,Re);!J.extend&&Pe>_t&&(v=_t,_t=Pe,Pe=v);var z=ag(w,Pe),L=ag(w,_t);if(z&&L&&(J.rangeCount!==1||J.anchorNode!==z.node||J.anchorOffset!==z.offset||J.focusNode!==L.node||J.focusOffset!==L.offset)){var F=de.createRange();F.setStart(z.node,z.offset),J.removeAllRanges(),Pe>_t?(J.addRange(F),J.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),J.addRange(F))}}}}for(de=[],J=w;J=J.parentNode;)J.nodeType===1&&de.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<de.length;w++){var ce=de[w];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ku=!!qf,Hf=qf=null}finally{ht=h,B.p=o,H.T=a}}t.current=s,tn=2}}function Ey(){if(tn===2){tn=0;var t=ur,s=ul,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=B.p;B.p=2;var h=ht;ht|=4;try{W0(t,s.alternate,s)}finally{ht=h,B.p=o,H.T=a}}tn=3}}function Ty(){if(tn===4||tn===3){tn=0,et();var t=ur,s=ul,a=Ai,o=uy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,ul=ur=null,Sy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(cr=null),ui(a),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(on,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=H.T,h=B.p,B.p=2,H.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var w=o[v];m(w.value,{componentStack:w.stack})}}finally{H.T=s,B.p=h}}(Ai&3)!==0&&Ou(),Zs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Cf?Do++:(Do=0,Cf=t):Do=0,Mo(0)}}function Sy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,mo(s)))}function Ou(){return wy(),Ey(),Ty(),Ny()}function Ny(){if(tn!==5)return!1;var t=ur,s=Af;Af=0;var a=ui(Ai),o=H.T,h=B.p;try{B.p=32>a?32:a,H.T=null,a=jf,jf=null;var m=ur,v=Ai;if(tn=0,ul=ur=null,Ai=0,(ht&6)!==0)throw Error(r(331));var w=ht;if(ht|=4,ly(m.current),iy(m,m.current,v,a),ht=w,Mo(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(on,m)}catch{}return!0}finally{B.p=h,H.T=o,Sy(t,s)}}function Ay(t,s,a){s=ls(a,s),s=lf(t.stateNode,s,2),t=sr(t,s,2),t!==null&&(Fr(t,2),Zs(t))}function gt(t,s,a){if(t.tag===3)Ay(t,t,a);else for(;s!==null;){if(s.tag===3){Ay(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(cr===null||!cr.has(o))){t=ls(a,t),a=j0(2),o=sr(s,a,2),o!==null&&(C0(a,o,s,t),Fr(o,2),Zs(o));break}}s=s.return}}function kf(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Tw;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(a)||(Tf=!0,h.add(a),t=Cw.bind(null,t,s,a),s.then(t,t))}function Cw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(tt&a)===a&&(Lt===4||Lt===3&&(tt&62914560)===tt&&300>ut()-Cu?(ht&2)===0&&dl(t,0):Sf|=a,cl===tt&&(cl=0)),Zs(t)}function jy(t,s){s===0&&(s=Ic()),t=ia(t,s),t!==null&&(Fr(t,s),Zs(t))}function Rw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),jy(t,a)}function Iw(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),jy(t,a)}function kw(t,s){return Je(t,s)}var Vu=null,fl=null,Df=!1,Lu=!1,Mf=!1,hr=0;function Zs(t){t!==fl&&t.next===null&&(fl===null?Vu=fl=t:fl=fl.next=t),Lu=!0,Df||(Df=!0,Mw())}function Mo(t,s){if(!Mf&&Lu){Mf=!0;do for(var a=!1,o=Vu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var m=0;else{var v=o.suspendedLanes,w=o.pingedLanes;m=(1<<31-wt(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ky(o,m))}else m=tt,m=Ms(o,o===Et?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||gs(o,m)||(a=!0,ky(o,m));o=o.next}while(a);Mf=!1}}function Dw(){Cy()}function Cy(){Lu=Df=!1;var t=0;hr!==0&&Fw()&&(t=hr);for(var s=ut(),a=null,o=Vu;o!==null;){var h=o.next,m=Ry(o,s);m===0?(o.next=null,a===null?Vu=h:a.next=h,h===null&&(fl=a)):(a=o,(t!==0||(m&3)!==0)&&(Lu=!0)),o=h}tn!==0&&tn!==5||Mo(t),hr!==0&&(hr=0)}function Ry(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-wt(m),w=1<<v,D=h[v];D===-1?((w&a)===0||(w&o)!==0)&&(h[v]=oh(w,s)):D<=s&&(t.expiredLanes|=w),m&=~w}if(s=Et,a=tt,a=Ms(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(pt===2||pt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&te(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||gs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&te(o),ui(a)){case 2:case 8:a=St;break;case 32:a=bn;break;case 268435456:a=zi;break;default:a=bn}return o=Iy.bind(null,t),a=Je(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&te(o),t.callbackPriority=2,t.callbackNode=null,2}function Iy(t,s){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ou()&&t.callbackNode!==a)return null;var o=tt;return o=Ms(t,t===Et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(hy(t,o,s),Ry(t,ut()),t.callbackNode!=null&&t.callbackNode===a?Iy.bind(null,t):null)}function ky(t,s){if(Ou())return null;hy(t,s,!0)}function Mw(){Yw(function(){(ht&6)!==0?Je(He,Dw):Cy()})}function Of(){if(hr===0){var t=Za;t===0&&(t=ks,ks<<=1,(ks&261888)===0&&(ks=256)),hr=t}return hr}function Dy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:La(""+t)}function My(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Ow(t,s,a,o,h){if(s==="submit"&&a&&a.stateNode===h){var m=Dy((h[sn]||null).action),v=o.submitter;v&&(s=(s=v[sn]||null)?Dy(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Gs("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hr!==0){var D=v?My(h,v):new FormData(h);ef(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=v?My(h,v):new FormData(h),ef(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Vf=0;Vf<yh.length;Vf++){var Lf=yh[Vf],Vw=Lf.toLowerCase(),Lw=Lf[0].toUpperCase()+Lf.slice(1);Ts(Vw,"on"+Lw)}Ts(dg,"onAnimationEnd"),Ts(hg,"onAnimationIteration"),Ts(fg,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(J1,"onTransitionRun"),Ts(ew,"onTransitionStart"),Ts(tw,"onTransitionCancel"),Ts(mg,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oo));function Oy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var w=o[v],D=w.instance,G=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=G;try{m(h)}catch(ae){Zc(ae)}h.currentTarget=null,m=D}else for(v=0;v<o.length;v++){if(w=o[v],D=w.instance,G=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=G;try{m(h)}catch(ae){Zc(ae)}h.currentTarget=null,m=D}}}}function Ze(t,s){var a=s[ka];a===void 0&&(a=s[ka]=new Set);var o=t+"__bubble";a.has(o)||(Vy(s,t,2,!1),a.add(o))}function Pf(t,s,a){var o=0;s&&(o|=4),Vy(a,t,o,s)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Uf(t){if(!t[Pu]){t[Pu]=!0,Yl.forEach(function(a){a!=="selectionchange"&&(Pw.has(a)||Pf(a,!1,t),Pf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Pu]||(s[Pu]=!0,Pf("selectionchange",!1,s))}}function Vy(t,s,a,o){switch(dx(s)){case 2:var h=h2;break;case 8:h=f2;break;default:h=em}a=h.bind(null,s,a,t),h=void 0,!Xr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function zf(t,s,a,o,h){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var w=o.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Ps(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=m=v;continue e}w=w.parentNode}}o=o.return}Ki(function(){var G=m,ae=ss(a),de=[];e:{var Y=pg.get(t);if(Y!==void 0){var J=Gs,Re=t;switch(t){case"keypress":if(Zr(a)===0)break e;case"keydown":case"keyup":J=Qc;break;case"focusin":Re="focus",J=ea;break;case"focusout":Re="blur",J=ea;break;case"beforeblur":case"afterblur":J=ea;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=g;break;case dg:case hg:case fg:J=qc;break;case mg:J=S;break;case"scroll":case"scrollend":J=io;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=fi;break;case"toggle":case"beforetoggle":J=Ke}var Pe=(s&4)!==0,_t=!Pe&&(t==="scroll"||t==="scrollend"),z=Pe?Y!==null?Y+"Capture":null:Y;Pe=[];for(var L=G,F;L!==null;){var ce=L;if(F=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||F===null||z===null||(ce=bs(L,z),ce!=null&&Pe.push(Vo(L,ce,F))),_t)break;L=L.return}0<Pe.length&&(Y=new J(Y,Re,null,a,ae),de.push({event:Y,listeners:Pe}))}}if((s&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",Y&&a!==to&&(Re=a.relatedTarget||a.fromElement)&&(Ps(Re)||Re[Vs]))break e;if((J||Y)&&(Y=ae.window===ae?ae:(Y=ae.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(Re=a.relatedTarget||a.toElement,J=G,Re=Re?Ps(Re):null,Re!==null&&(_t=u(Re),Pe=Re.tag,Re!==_t||Pe!==5&&Pe!==27&&Pe!==6)&&(Re=null)):(J=null,Re=G),J!==Re)){if(Pe=ro,ce="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Pe=fi,ce="onPointerLeave",z="onPointerEnter",L="pointer"),_t=J==null?Y:Hn(J),F=Re==null?Y:Hn(Re),Y=new Pe(ce,L+"leave",J,a,ae),Y.target=_t,Y.relatedTarget=F,ce=null,Ps(ae)===G&&(Pe=new Pe(z,L+"enter",Re,a,ae),Pe.target=F,Pe.relatedTarget=_t,ce=Pe),_t=ce,J&&Re)t:{for(Pe=Uw,z=J,L=Re,F=0,ce=z;ce;ce=Pe(ce))F++;ce=0;for(var Me=L;Me;Me=Pe(Me))ce++;for(;0<F-ce;)z=Pe(z),F--;for(;0<ce-F;)L=Pe(L),ce--;for(;F--;){if(z===L||L!==null&&z===L.alternate){Pe=z;break t}z=Pe(z),L=Pe(L)}Pe=null}else Pe=null;J!==null&&Ly(de,Y,J,Pe,!1),Re!==null&&_t!==null&&Ly(de,_t,Re,Pe,!0)}}e:{if(Y=G?Hn(G):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var ot=eg;else if(Zp(Y))if(tg)ot=X1;else{ot=$1;var ke=K1}else J=Y.nodeName,!J||J.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Va(G.elementType)&&(ot=eg):ot=Q1;if(ot&&(ot=ot(t,G))){Jp(de,ot,a,ae);break e}ke&&ke(t,Y,G),t==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Zl(Y,"number",Y.value)}switch(ke=G?Hn(G):window,t){case"focusin":(Zp(ke)||ke.contentEditable==="true")&&(Fa=ke,mh=G,uo=null);break;case"focusout":uo=mh=Fa=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,cg(de,a,ae);break;case"selectionchange":if(Z1)break;case"keydown":case"keyup":cg(de,a,ae)}var Qe;if(dt)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Ha?ta(t,a)&&(nt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(nt="onCompositionStart");nt&&($s&&a.locale!=="ko"&&(Ha||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Ha&&(Qe=so()):(Fs=ae,no="value"in Fs?Fs.value:Fs.textContent,Ha=!0)),ke=Uu(G,nt),0<ke.length&&(nt=new Ks(nt,t,null,a,ae),de.push({event:nt,listeners:ke}),Qe?nt.data=Qe:(Qe=qa(a),Qe!==null&&(nt.data=Qe)))),(Qe=rs?H1(t,a):F1(t,a))&&(nt=Uu(G,"onBeforeInput"),0<nt.length&&(ke=new Ks("onBeforeInput","beforeinput",null,a,ae),de.push({event:ke,listeners:nt}),ke.data=Qe)),Ow(de,t,G,a,ae)}Oy(de,s)})}function Vo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Uu(t,s){for(var a=s+"Capture",o=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=bs(t,a),h!=null&&o.unshift(Vo(t,h,m)),h=bs(t,s),h!=null&&o.push(Vo(t,h,m))),t.tag===3)return o;t=t.return}return[]}function Uw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ly(t,s,a,o,h){for(var m=s._reactName,v=[];a!==null&&a!==o;){var w=a,D=w.alternate,G=w.stateNode;if(w=w.tag,D!==null&&D===o)break;w!==5&&w!==26&&w!==27||G===null||(D=G,h?(G=bs(a,m),G!=null&&v.unshift(Vo(a,G,D))):h||(G=bs(a,m),G!=null&&v.push(Vo(a,G,D)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var zw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function Py(t){return(typeof t=="string"?t:""+t).replace(zw,`
`).replace(Bw,"")}function Uy(t,s){return s=Py(s),Py(t)===s}function bt(t,s,a,o,h,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Dn(t,""+o);break;case"className":Fn(t,"class",o);break;case"tabIndex":Fn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Fn(t,a,o);break;case"style":eo(t,o,m);break;case"data":if(s!=="object"){Fn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&bt(t,s,"name",h.name,h,null),bt(t,s,"formEncType",h.formEncType,h,null),bt(t,s,"formMethod",h.formMethod,h,null),bt(t,s,"formTarget",h.formTarget,h,null)):(bt(t,s,"encType",h.encType,h,null),bt(t,s,"method",h.method,h,null),bt(t,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=vs);break;case"onScroll":o!=null&&Ze("scroll",t);break;case"onScrollEnd":o!=null&&Ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=La(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ze("beforetoggle",t),Ze("toggle",t),Ma(t,"popover",o);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ma(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uc.get(a)||a,Ma(t,a,o))}}function Bf(t,s,a,o,h,m){switch(a){case"style":eo(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&Dn(t,""+o);break;case"onScroll":o!=null&&Ze("scroll",t);break;case"onScrollEnd":o!=null&&Ze("scrollend",t);break;case"onClick":o!=null&&(t.onclick=vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[sn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ma(t,a,o)}}}function mn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",t),Ze("load",t);var o=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(t,s,m,v,a,null)}}h&&bt(t,s,"srcSet",a.srcSet,a,null),o&&bt(t,s,"src",a.src,a,null);return;case"input":Ze("invalid",t);var w=m=v=h=null,D=null,G=null;for(o in a)if(a.hasOwnProperty(o)){var ae=a[o];if(ae!=null)switch(o){case"name":h=ae;break;case"type":v=ae;break;case"checked":D=ae;break;case"defaultChecked":G=ae;break;case"value":m=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:bt(t,s,o,ae,a,null)}}Vc(t,m,w,D,G,v,h,!1);return;case"select":Ze("invalid",t),o=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":o=w;default:bt(t,s,h,w,a,null)}s=m,a=v,t.multiple=!!o,s!=null?Hi(t,!!o,s,!1):a!=null&&Hi(t,!!o,a,!0);return;case"textarea":Ze("invalid",t),m=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":o=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:bt(t,s,v,w,a,null)}Fi(t,o,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(o=a[D],o!=null))switch(D){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:bt(t,s,D,o,a,null)}return;case"dialog":Ze("beforetoggle",t),Ze("toggle",t),Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":Ze("load",t);break;case"video":case"audio":for(o=0;o<Oo.length;o++)Ze(Oo[o],t);break;case"image":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"embed":case"source":case"link":Ze("error",t),Ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(o=a[G],o!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(t,s,G,o,a,null)}return;default:if(Va(s)){for(ae in a)a.hasOwnProperty(ae)&&(o=a[ae],o!==void 0&&Bf(t,s,ae,o,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(o=a[w],o!=null&&bt(t,s,w,o,a,null))}function qw(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,D=null,G=null,ae=null;for(J in a){var de=a[J];if(a.hasOwnProperty(J)&&de!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=de;default:o.hasOwnProperty(J)||bt(t,s,J,null,o,de)}}for(var Y in o){var J=o[Y];if(de=a[Y],o.hasOwnProperty(Y)&&(J!=null||de!=null))switch(Y){case"type":m=J;break;case"name":h=J;break;case"checked":G=J;break;case"defaultChecked":ae=J;break;case"value":v=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==de&&bt(t,s,Y,J,o,de)}}Oa(t,v,w,D,G,ae,m,h);return;case"select":J=v=w=Y=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":J=D;default:o.hasOwnProperty(m)||bt(t,s,m,null,o,D)}for(h in o)if(m=o[h],D=a[h],o.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":Y=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==D&&bt(t,s,h,m,o,D)}s=w,a=v,o=J,Y!=null?Hi(t,!!a,Y,!1):!!o!=!!a&&(s!=null?Hi(t,!!a,s,!0):Hi(t,!!a,a?[]:"",!1));return;case"textarea":J=Y=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:bt(t,s,w,null,o,h)}for(v in o)if(h=o[v],m=a[v],o.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":Y=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&bt(t,s,v,h,o,m)}Lc(t,Y,J);return;case"option":for(var Re in a)if(Y=a[Re],a.hasOwnProperty(Re)&&Y!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:bt(t,s,Re,null,o,Y)}for(D in o)if(Y=o[D],J=a[D],o.hasOwnProperty(D)&&Y!==J&&(Y!=null||J!=null))switch(D){case"selected":t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:bt(t,s,D,Y,o,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in a)Y=a[Pe],a.hasOwnProperty(Pe)&&Y!=null&&!o.hasOwnProperty(Pe)&&bt(t,s,Pe,null,o,Y);for(G in o)if(Y=o[G],J=a[G],o.hasOwnProperty(G)&&Y!==J&&(Y!=null||J!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:bt(t,s,G,Y,o,J)}return;default:if(Va(s)){for(var _t in a)Y=a[_t],a.hasOwnProperty(_t)&&Y!==void 0&&!o.hasOwnProperty(_t)&&Bf(t,s,_t,void 0,o,Y);for(ae in o)Y=o[ae],J=a[ae],!o.hasOwnProperty(ae)||Y===J||Y===void 0&&J===void 0||Bf(t,s,ae,Y,o,J);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!o.hasOwnProperty(z)&&bt(t,s,z,null,o,Y);for(de in o)Y=o[de],J=a[de],!o.hasOwnProperty(de)||Y===J||Y==null&&J==null||bt(t,s,de,Y,o,J)}function zy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&zy(v)){for(v=0,w=h.responseEnd,o+=1;o<a.length;o++){var D=a[o],G=D.startTime;if(G>w)break;var ae=D.transferSize,de=D.initiatorType;ae&&zy(de)&&(D=D.responseEnd,v+=ae*(D<w?1:(w-G)/(D-G)))}if(--o,s+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qf=null,Hf=null;function zu(t){return t.nodeType===9?t:t.ownerDocument}function By(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Ff(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gf=null;function Fw(){var t=window.event;return t&&t.type==="popstate"?t===Gf?!1:(Gf=t,!0):(Gf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(t){return Fy.resolve(null).then(t).catch(Kw)}:Hy;function Kw(t){setTimeout(function(){throw t})}function fr(t){return t==="head"}function Gy(t,s){var a=s,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),yl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Lo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Lo(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Ls]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Lo(t.ownerDocument.body);a=h}while(a);yl(s)}function Yy(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Yf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yf(a),Da(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function $w(t,s,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ls])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=hs(t.nextSibling),t===null)break}return null}function Qw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=hs(t.nextSibling),t===null))return null;return t}function Ky(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=hs(t.nextSibling),t===null))return null;return t}function Kf(t){return t.data==="$?"||t.data==="$~"}function $f(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Xw(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function hs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Qf=null;function $y(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return hs(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Qy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Xy(t,s,a){switch(s=zu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Lo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Da(t)}var fs=new Map,Wy=new Set;function Bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ji=B.d;B.d={f:Ww,r:Zw,D:Jw,C:e2,L:t2,m:n2,X:i2,S:s2,M:r2};function Ww(){var t=ji.f(),s=ku();return t||s}function Zw(t){var s=ns(t);s!==null&&s.tag===5&&s.type==="form"?m0(s):ji.r(t)}var ml=typeof document>"u"?null:document;function Zy(t,s,a){var o=ml;if(o&&typeof s=="string"&&s){var h=kn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Wy.has(h)||(Wy.add(h),t={rel:t,crossOrigin:a,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),mn(s,"link",t),Yt(s),o.head.appendChild(s)))}}function Jw(t){ji.D(t),Zy("dns-prefetch",t,null)}function e2(t,s){ji.C(t,s),Zy("preconnect",t,s)}function t2(t,s,a){ji.L(t,s,a);var o=ml;if(o&&t&&s){var h='link[rel="preload"][as="'+kn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+kn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+kn(a.imageSizes)+'"]')):h+='[href="'+kn(t)+'"]';var m=h;switch(s){case"style":m=pl(t);break;case"script":m=gl(t)}fs.has(m)||(t=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),fs.set(m,t),o.querySelector(h)!==null||s==="style"&&o.querySelector(Po(m))||s==="script"&&o.querySelector(Uo(m))||(s=o.createElement("link"),mn(s,"link",t),Yt(s),o.head.appendChild(s)))}}function n2(t,s){ji.m(t,s);var a=ml;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+kn(o)+'"][href="'+kn(t)+'"]',m=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=gl(t)}if(!fs.has(m)&&(t=T({rel:"modulepreload",href:t},s),fs.set(m,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Uo(m)))return}o=a.createElement("link"),mn(o,"link",t),Yt(o),a.head.appendChild(o)}}}function s2(t,s,a){ji.S(t,s,a);var o=ml;if(o&&t){var h=Us(o).hoistableStyles,m=pl(t);s=s||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=o.querySelector(Po(m)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":s},a),(a=fs.get(m))&&Xf(t,a);var D=v=o.createElement("link");Yt(D),mn(D,"link",t),D._p=new Promise(function(G,ae){D.onload=G,D.onerror=ae}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,qu(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function i2(t,s){ji.X(t,s);var a=ml;if(a&&t){var o=Us(a).hoistableScripts,h=gl(t),m=o.get(h);m||(m=a.querySelector(Uo(h)),m||(t=T({src:t,async:!0},s),(s=fs.get(h))&&Wf(t,s),m=a.createElement("script"),Yt(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function r2(t,s){ji.M(t,s);var a=ml;if(a&&t){var o=Us(a).hoistableScripts,h=gl(t),m=o.get(h);m||(m=a.querySelector(Uo(h)),m||(t=T({src:t,async:!0,type:"module"},s),(s=fs.get(h))&&Wf(t,s),m=a.createElement("script"),Yt(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function Jy(t,s,a,o){var h=(h=ge.current)?Bu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=pl(a.href),a=Us(h).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=pl(a.href);var m=Us(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Po(t)))&&!m._p&&(v.instance=m,v.state.loading=5),fs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},fs.set(t,a),m||a2(h,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=gl(a),a=Us(h).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function pl(t){return'href="'+kn(t)+'"'}function Po(t){return'link[rel="stylesheet"]['+t+"]"}function ex(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function a2(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),mn(s,"link",a),Yt(s),t.head.appendChild(s))}function gl(t){return'[src="'+kn(t)+'"]'}function Uo(t){return"script[async]"+t}function tx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+kn(a.href)+'"]');if(o)return s.instance=o,Yt(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Yt(o),mn(o,"style",h),qu(o,a.precedence,t),s.instance=o;case"stylesheet":h=pl(a.href);var m=t.querySelector(Po(h));if(m)return s.state.loading|=4,s.instance=m,Yt(m),m;o=ex(a),(h=fs.get(h))&&Xf(o,h),m=(t.ownerDocument||t).createElement("link"),Yt(m);var v=m;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),mn(m,"link",o),s.state.loading|=4,qu(m,a.precedence,t),s.instance=m;case"script":return m=gl(a.src),(h=t.querySelector(Uo(m)))?(s.instance=h,Yt(h),h):(o=a,(h=fs.get(m))&&(o=T({},a),Wf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Yt(h),mn(h,"link",o),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,qu(o,a.precedence,t));return s.instance}function qu(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,m=h,v=0;v<o.length;v++){var w=o[v];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Xf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Wf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Hu=null;function nx(t,s,a){if(Hu===null){var o=new Map,h=Hu=new Map;h.set(a,o)}else h=Hu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Ls]||m[Gt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var w=o.get(v);w?w.push(m):o.set(v,[m])}}return o}function sx(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function l2(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ix(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function o2(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=pl(o.href),m=s.querySelector(Po(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Fu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Yt(m);return}m=s.ownerDocument||s,o=ex(o),(h=fs.get(h))&&Xf(o,h),m=m.createElement("link"),Yt(m);var v=m;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),mn(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Fu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Zf=0;function c2(t,s){return t.stylesheets&&t.count===0&&Yu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Zf===0&&(Zf=62500*Hw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Zf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Fu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Gu=null;function Yu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Gu=new Map,s.forEach(u2,t),Gu=null,Fu.call(t))}function u2(t,s){if(!(s.state.loading&4)){var a=Gu.get(t);if(a)var o=a.get(null);else{a=new Map,Gu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,h),a.set(v,h),this.count++,o=Fu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var zo={$$typeof:pe,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function d2(t,s,a,o,h,m,v,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function rx(t,s,a,o,h,m,v,w,D,G,ae,de){return t=new d2(t,s,a,v,D,G,ae,de,w),s=1,m===!0&&(s|=24),m=Yn(3,null,null,s),t.current=m,m.stateNode=t,s=Rh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Mh(m),t}function ax(t){return t?(t=Ka,t):Ka}function lx(t,s,a,o,h,m){h=ax(h),o.context===null?o.context=h:o.pendingContext=h,o=nr(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=sr(t,o,s),a!==null&&(Pn(a,t,s),xo(a,t,s))}function ox(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Jf(t,s){ox(t,s),(t=t.alternate)&&ox(t,s)}function cx(t){if(t.tag===13||t.tag===31){var s=ia(t,67108864);s!==null&&Pn(s,t,67108864),Jf(t,67108864)}}function ux(t){if(t.tag===13||t.tag===31){var s=Wn();s=Yr(s);var a=ia(t,s);a!==null&&Pn(a,t,s),Jf(t,s)}}var Ku=!0;function h2(t,s,a,o){var h=H.T;H.T=null;var m=B.p;try{B.p=2,em(t,s,a,o)}finally{B.p=m,H.T=h}}function f2(t,s,a,o){var h=H.T;H.T=null;var m=B.p;try{B.p=8,em(t,s,a,o)}finally{B.p=m,H.T=h}}function em(t,s,a,o){if(Ku){var h=tm(o);if(h===null)zf(t,s,o,$u,a),hx(t,o);else if(p2(h,t,s,a,o))o.stopPropagation();else if(hx(t,o),s&4&&-1<m2.indexOf(t)){for(;h!==null;){var m=ns(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ds(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-wt(v);w.entanglements[1]|=D,v&=~D}Zs(m),(ht&6)===0&&(Ru=ut()+500,Mo(0))}}break;case 31:case 13:w=ia(m,2),w!==null&&Pn(w,m,2),ku(),Jf(m,2)}if(m=tm(o),m===null&&zf(t,s,o,$u,a),m===h)break;h=m}h!==null&&o.stopPropagation()}else zf(t,s,o,null,a)}}function tm(t){return t=ss(t),nm(t)}var $u=null;function nm(t){if($u=null,t=Ps(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=y(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return $u=t,null}function dx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case He:return 2;case St:return 8;case bn:case In:return 32;case zi:return 268435456;default:return 32}default:return 32}}var sm=!1,mr=null,pr=null,gr=null,Bo=new Map,qo=new Map,yr=[],m2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hx(t,s){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Bo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(s.pointerId)}}function Ho(t,s,a,o,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ns(s),s!==null&&cx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function p2(t,s,a,o,h){switch(s){case"focusin":return mr=Ho(mr,t,s,a,o,h),!0;case"dragenter":return pr=Ho(pr,t,s,a,o,h),!0;case"mouseover":return gr=Ho(gr,t,s,a,o,h),!0;case"pointerover":var m=h.pointerId;return Bo.set(m,Ho(Bo.get(m)||null,t,s,a,o,h)),!0;case"gotpointercapture":return m=h.pointerId,qo.set(m,Ho(qo.get(m)||null,t,s,a,o,h)),!0}return!1}function fx(t){var s=Ps(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,ys(t.priority,function(){ux(a)});return}}else if(s===31){if(s=y(a),s!==null){t.blockedOn=s,ys(t.priority,function(){ux(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=tm(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);to=o,a.target.dispatchEvent(o),to=null}else return s=ns(a),s!==null&&cx(s),t.blockedOn=a,!1;s.shift()}return!0}function mx(t,s,a){Qu(t)&&a.delete(s)}function g2(){sm=!1,mr!==null&&Qu(mr)&&(mr=null),pr!==null&&Qu(pr)&&(pr=null),gr!==null&&Qu(gr)&&(gr=null),Bo.forEach(mx),qo.forEach(mx)}function Xu(t,s){t.blockedOn===s&&(t.blockedOn=null,sm||(sm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,g2)))}var Wu=null;function px(t){Wu!==t&&(Wu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],h=t[s+2];if(typeof o!="function"){if(nm(o||a)===null)continue;break}var m=ns(a);m!==null&&(t.splice(s,3),s-=3,ef(m,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function yl(t){function s(D){return Xu(D,t)}mr!==null&&Xu(mr,t),pr!==null&&Xu(pr,t),gr!==null&&Xu(gr,t),Bo.forEach(s),qo.forEach(s);for(var a=0;a<yr.length;a++){var o=yr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<yr.length&&(a=yr[0],a.blockedOn===null);)fx(a),a.blockedOn===null&&yr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],v=h[sn]||null;if(typeof m=="function")v||px(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[sn]||null)w=v.formAction;else if(nm(h)!==null)continue}else w=v.action;typeof w=="function"?a[o+1]=w:(a.splice(o,3),o-=3),px(a)}}}function gx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function im(t){this._internalRoot=t}Zu.prototype.render=im.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=Wn();lx(a,o,t,s,null,null)},Zu.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;lx(t.current,2,null,t,null,null),ku(),s[Vs]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var s=kc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<yr.length&&s!==0&&s<yr[a].priority;a++);yr.splice(a,0,t),a===0&&fx(t)}};var yx=e.version;if(yx!=="19.2.0")throw Error(r(527,yx,"19.2.0"));B.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var y2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{on=Ju.inject(y2),Mt=Ju}catch{}}return Go.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",h=T0,m=S0,v=N0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=rx(t,1,!1,null,null,a,o,null,h,m,v,gx),t[Vs]=s.current,Uf(t),new im(s)},Go.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,h="",m=T0,v=S0,w=N0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),s=rx(t,1,!0,s,a??null,o,h,D,m,v,w,gx),s.context=ax(null),a=s.current,o=Wn(),o=Yr(o),h=nr(o),h.callback=null,sr(a,h,o),a=o,s.current.lanes=a,Fr(s,a),Zs(s),t[Vs]=s.current,Uf(t),new Zu(s)},Go.version="19.2.0",Go}var Ax;function j2(){if(Ax)return lm.exports;Ax=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lm.exports=A2(),lm.exports}var C2=j2();const R2=()=>{};var jx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},I2=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const l=i[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],f=i[n++],y=i[n++],p=((l&7)<<18|(u&63)<<12|(f&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],f=l+1<i.length,y=f?i[l+1]:0,p=l+2<i.length,x=p?i[l+2]:0,_=u>>2,T=(u&3)<<4|y>>4;let A=(y&15)<<2|x>>6,U=x&63;p||(U=64,f||(A=64)),r.push(n[_],n[T],n[A],n[U])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):I2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],y=l<i.length?n[i.charAt(l)]:0;++l;const x=l<i.length?n[i.charAt(l)]:64;++l;const T=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||y==null||x==null||T==null)throw new k2;const A=u<<2|y>>4;if(r.push(A),x!==64){const U=y<<4&240|x>>2;if(r.push(U),T!==64){const K=x<<6&192|T;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class k2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D2=function(i){const e=hb(i);return fb.encodeByteArray(e,!0)},xd=function(i){return D2(i).replace(/\./g,"")},mb=function(i){try{return fb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=()=>M2().__FIREBASE_DEFAULTS__,V2=()=>{if(typeof process>"u"||typeof jx>"u")return;const i=jx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},L2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&mb(i[1]);return e&&JSON.parse(e)},Pd=()=>{try{return R2()||O2()||V2()||L2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},pb=i=>Pd()?.emulatorHosts?.[i],P2=i=>{const e=pb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gb=()=>Pd()?.config,yb=i=>Pd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[xd(JSON.stringify(n)),xd(JSON.stringify(f)),""].join(".")}const Zo={};function B2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zo))Zo[e]?i.emulator.push(e):i.prod.push(e);return i}function q2(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Cx=!1;function vb(i,e){if(typeof window>"u"||typeof document>"u"||!Vl(window.location.host)||Zo[i]===e||Zo[i]||Cx)return;Zo[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=B2().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function y(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,U){A.setAttribute("width","24"),A.setAttribute("id",U),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Cx=!0,f()},A}function _(A,U){A.setAttribute("id",U),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=q2(r),U=n("text"),K=document.getElementById(U)||document.createElement("span"),W=n("learnmore"),O=document.getElementById(W)||document.createElement("a"),se=n("preprendIcon"),ne=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const pe=A.element;y(pe),_(O,W);const fe=x();p(ne,se),pe.append(ne,K,O,fe),document.body.appendChild(pe)}u?(K.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function F2(){const i=Pd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function K2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $2(){const i=Nn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Q2(){return!F2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X2(){try{return typeof indexedDB=="object"}catch{return!1}}function W2(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Z2,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?J2(u,r):"Error",y=`${this.serviceName}: ${f} (${l}).`;return new Li(l,y,r)}}function J2(i,e){return i.replace(eE,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const eE=/\{\$([^}]+)}/g;function tE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ea(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=i[l],f=e[l];if(Rx(u)&&Rx(f)){if(!Ea(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Rx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Ko(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function nE(i,e){const n=new sE(i,e);return n.subscribe.bind(n)}class sE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iE(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=dm),l.error===void 0&&(l.error=dm),l.complete===void 0&&(l.complete=dm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iE(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(i){return i&&i._delegate?i._delegate:i}class Ta{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lE(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);r===y&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aE(i){return i===xa?void 0:i}function lE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(st||(st={}));const cE={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},uE=st.INFO,dE={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},hE=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=dE[e];if(l)console[l](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=uE,this._logHandler=hE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const fE=(i,e)=>e.some(n=>i instanceof n);let Ix,kx;function mE(){return Ix||(Ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pE(){return kx||(kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bb=new WeakMap,Im=new WeakMap,_b=new WeakMap,hm=new WeakMap,lp=new WeakMap;function gE(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Nr(i.result)),l()},f=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&bb.set(n,i)}).catch(()=>{}),lp.set(e,i),e}function yE(i){if(Im.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Im.set(i,e)}let km={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Im.get(i);if(e==="objectStoreNames")return i.objectStoreNames||_b.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function xE(i){km=i(km)}function vE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(fm(this),e,...n);return _b.set(r,e.sort?e.sort():[e]),Nr(r)}:pE().includes(i)?function(...e){return i.apply(fm(this),e),Nr(bb.get(this))}:function(...e){return Nr(i.apply(fm(this),e))}}function bE(i){return typeof i=="function"?vE(i):(i instanceof IDBTransaction&&yE(i),fE(i,mE())?new Proxy(i,km):i)}function Nr(i){if(i instanceof IDBRequest)return gE(i);if(hm.has(i))return hm.get(i);const e=bE(i);return e!==i&&(hm.set(i,e),lp.set(e,i)),e}const fm=i=>lp.get(i);function _E(i,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(i,e),y=Nr(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Nr(f.result),p.oldVersion,p.newVersion,Nr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),y.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),y}const wE=["get","getKey","getAll","getAllKeys","count"],EE=["put","add","delete","clear"],mm=new Map;function Dx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=EE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||wE.includes(n)))return;const u=async function(f,...y){const p=this.transaction(f,l?"readwrite":"readonly");let x=p.store;return r&&(x=x.index(y.shift())),(await Promise.all([x[n](...y),l&&p.done]))[0]};return mm.set(e,u),u}xE(i=>({...i,get:(e,n,r)=>Dx(e,n)||i.get(e,n,r),has:(e,n)=>!!Dx(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SE(i){return i.getComponent()?.type==="VERSION"}const Dm="@firebase/app",Mx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new ap("@firebase/app"),NE="@firebase/app-compat",AE="@firebase/analytics-compat",jE="@firebase/analytics",CE="@firebase/app-check-compat",RE="@firebase/app-check",IE="@firebase/auth",kE="@firebase/auth-compat",DE="@firebase/database",ME="@firebase/data-connect",OE="@firebase/database-compat",VE="@firebase/functions",LE="@firebase/functions-compat",PE="@firebase/installations",UE="@firebase/installations-compat",zE="@firebase/messaging",BE="@firebase/messaging-compat",qE="@firebase/performance",HE="@firebase/performance-compat",FE="@firebase/remote-config",GE="@firebase/remote-config-compat",YE="@firebase/storage",KE="@firebase/storage-compat",$E="@firebase/firestore",QE="@firebase/ai",XE="@firebase/firestore-compat",WE="firebase",ZE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",JE={[Dm]:"fire-core",[NE]:"fire-core-compat",[jE]:"fire-analytics",[AE]:"fire-analytics-compat",[RE]:"fire-app-check",[CE]:"fire-app-check-compat",[IE]:"fire-auth",[kE]:"fire-auth-compat",[DE]:"fire-rtdb",[ME]:"fire-data-connect",[OE]:"fire-rtdb-compat",[VE]:"fire-fn",[LE]:"fire-fn-compat",[PE]:"fire-iid",[UE]:"fire-iid-compat",[zE]:"fire-fcm",[BE]:"fire-fcm-compat",[qE]:"fire-perf",[HE]:"fire-perf-compat",[FE]:"fire-rc",[GE]:"fire-rc-compat",[YE]:"fire-gcs",[KE]:"fire-gcs-compat",[$E]:"fire-fst",[XE]:"fire-fst-compat",[QE]:"fire-vertex","fire-js":"fire-js",[WE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,eT=new Map,Om=new Map;function Ox(i,e){try{i.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function jl(i){const e=i.name;if(Om.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,i);for(const n of vd.values())Ox(n,i);for(const n of eT.values())Ox(n,i);return!0}function op(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ms(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new pc("app","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=ZE;function wb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Mm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Ar.create("bad-app-name",{appName:String(l)});if(n||(n=gb()),!n)throw Ar.create("no-options");const u=vd.get(l);if(u){if(Ea(n,u.options)&&Ea(r,u.config))return u;throw Ar.create("duplicate-app",{appName:l})}const f=new oE(l);for(const p of Om.values())f.addComponent(p);const y=new nT(n,r,f);return vd.set(l,y),y}function Eb(i=Mm){const e=vd.get(i);if(!e&&i===Mm&&gb())return wb();if(!e)throw Ar.create("no-app",{appName:i});return e}function jr(i,e,n){let r=JE[i]??i;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(f.join(" "));return}jl(new Ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firebase-heartbeat-database",iT=1,ic="firebase-heartbeat-store";let pm=null;function Tb(){return pm||(pm=_E(sT,iT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ar.create("idb-open",{originalErrorMessage:i.message})})),pm}async function rT(i){try{const n=(await Tb()).transaction(ic),r=await n.objectStore(ic).get(Sb(i));return await n.done,r}catch(e){if(e instanceof Li)ki.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e?.message});ki.warn(n.message)}}}async function Vx(i,e){try{const r=(await Tb()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,Sb(i)),await r.done}catch(n){if(n instanceof Li)ki.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n?.message});ki.warn(r.message)}}}function Sb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1024,lT=30;class oT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>lT){const l=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ki.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lx(),{heartbeatsToSend:n,unsentEntries:r}=cT(this._heartbeatsCache.heartbeats),l=xd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ki.warn(e),""}}}function Lx(){return new Date().toISOString().substring(0,10)}function cT(i,e=aT){const n=[];let r=i.slice();for(const l of i){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Px(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Px(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X2()?W2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Px(i){return xd(JSON.stringify({version:2,heartbeats:i})).length}function dT(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(i){jl(new Ta("platform-logger",e=>new TE(e),"PRIVATE")),jl(new Ta("heartbeat",e=>new oT(e),"PRIVATE")),jr(Dm,Mx,i),jr(Dm,Mx,"esm2020"),jr("fire-js","")}hT("");function Nb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fT=Nb,Ab=new pc("auth","Firebase",Nb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new ap("@firebase/auth");function mT(i,...e){bd.logLevel<=st.WARN&&bd.warn(`Auth (${Ll}): ${i}`,...e)}function od(i,...e){bd.logLevel<=st.ERROR&&bd.error(`Auth (${Ll}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i,...e){throw cp(i,...e)}function ti(i,...e){return cp(i,...e)}function jb(i,e,n){const r={...fT(),[e]:n};return new pc("auth","Firebase",r).create(e,{appName:i.name})}function Ii(i){return jb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Ab.create(i,...e)}function ze(i,e,...n){if(!i)throw cp(e,...n)}function Ci(i){const e="INTERNAL ASSERTION FAILED: "+i;throw od(e),new Error(e)}function Di(i,e){i||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){return typeof self<"u"&&self.location?.href||""}function pT(){return Ux()==="http:"||Ux()==="https:"}function Ux(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pT()||Y2()||"connection"in navigator)?navigator.onLine:!0}function yT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=H2()||K2()}get(){return gT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(i,e){Di(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bT=new yc(3e4,6e4);function Pi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ui(i,e,n,r,l={}){return Rb(i,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const y=gc({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:p,...u};return G2()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Vl(i.emulatorConfig.host)&&(x.credentials="include"),Cb.fetch()(await Ib(i,i.config.apiHost,n,y),x)})}async function Rb(i,e,n){i._canInitEmulator=!1;const r={...xT,...e};try{const l=new wT(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw ed(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const y=u.ok?f.errorMessage:f.error.message,[p,x]=y.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw ed(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw ed(i,"user-disabled",f);const _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw jb(i,_,x);Rs(i,_)}}catch(l){if(l instanceof Li)throw l;Rs(i,"network-request-failed",{message:String(l)})}}async function xc(i,e,n,r,l={}){const u=await Ui(i,e,n,r,l);return"mfaPendingCredential"in u&&Rs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ib(i,e,n,r){const l=`${e}${n}?${r}`,u=i,f=u.config.emulator?up(i.config,l):`${i.config.apiScheme}://${l}`;return vT.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function _T(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),bT.get())})}}function ed(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=ti(i,e,r);return l.customData._tokenResponse=n,l}function zx(i){return i!==void 0&&i.enterprise!==void 0}class ET{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _T(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TT(i,e){return Ui(i,"GET","/v2/recaptchaConfig",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(i,e){return Ui(i,"POST","/v1/accounts:delete",e)}async function _d(i,e){return Ui(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NT(i,e=!1){const n=Ht(i),r=await n.getIdToken(e),l=dp(r);ze(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Jo(gm(l.auth_time)),issuedAtTime:Jo(gm(l.iat)),expirationTime:Jo(gm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function gm(i){return Number(i)*1e3}function dp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return od("JWT malformed, contained fewer than 3 sections"),null;try{const l=mb(n);return l?JSON.parse(l):(od("Failed to decode base64 JWT payload"),null)}catch(l){return od("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Bx(i){const e=dp(i);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Li&&AT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function AT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jo(this.lastLoginAt),this.creationTime=Jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(i){const e=i.auth,n=await i.getIdToken(),r=await rc(i,_d(e,{idToken:n}));ze(r?.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=l.providerUserInfo?.length?kb(l.providerUserInfo):[],f=RT(i.providerData,u),y=i.isAnonymous,p=!(i.email&&l.passwordHash)&&!f?.length,x=y?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Lm(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(i,_)}async function CT(i){const e=Ht(i);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RT(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function kb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(i,e){const n=await Rb(i,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,f=await Ib(i,l,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:y,body:r};return i.emulatorConfig&&Vl(i.emulatorConfig.host)&&(p.credentials="include"),Cb.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kT(i,e){return Ui(i,"POST","/v2/accounts:revokeToken",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const n=Bx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await IT(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,f=new Tl;return r&&(ze(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(ze(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(ze(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(i,e){ze(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new jT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Lm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await rc(this,this.stsTokenManager.getToken(this.auth,e));return ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NT(this,e)}reload(){return CT(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await rc(this,ST(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,y=n.tenantId??void 0,p=n._redirectEventId??void 0,x=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:U,providerData:K,stsTokenManager:W}=n;ze(T&&W,e,"internal-error");const O=Tl.fromJSON(this.name,W);ze(typeof T=="string",e,"internal-error"),vr(r,e.name),vr(l,e.name),ze(typeof A=="boolean",e,"internal-error"),ze(typeof U=="boolean",e,"internal-error"),vr(u,e.name),vr(f,e.name),vr(y,e.name),vr(p,e.name),vr(x,e.name),vr(_,e.name);const se=new js({uid:T,auth:e,email:l,emailVerified:A,displayName:r,isAnonymous:U,photoURL:f,phoneNumber:u,tenantId:y,stsTokenManager:O,createdAt:x,lastLoginAt:_});return K&&Array.isArray(K)&&(se.providerData=K.map(ne=>({...ne}))),p&&(se._redirectEventId=p),se}static async _fromIdTokenResponse(e,n,r=!1){const l=new Tl;l.updateFromServerResponse(n);const u=new js({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await wd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];ze(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?kb(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,y=new Tl;y.updateFromIdToken(r);const p=new js({uid:l.localId,auth:e,stsTokenManager:y,isAnonymous:f}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Lm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(p,x),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;function Ri(i){Di(i instanceof Function,"Expected a class definition");let e=qx.get(i);return e?(Di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,qx.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const Hx=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(i,e,n){return`firebase:${i}:${e}:${n}`}class Sl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=cd(this.userKey,l.apiKey,u),this.fullPersistenceKey=cd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _d(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Sl(Ri(Hx),e,r);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Ri(Hx);const f=cd(r,e.config.apiKey,e.name);let y=null;for(const x of n)try{const _=await x._get(f);if(_){let T;if(typeof _=="string"){const A=await _d(e,{idToken:_}).catch(()=>{});if(!A)break;T=await js._fromGetAccountInfoResponse(e,A,_)}else T=js._fromJSON(e,_);x!==u&&(y=T),u=x;break}}catch{}const p=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Sl(u,e,r):(u=p[0],y&&await u._set(f,y.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(f)}catch{}})),new Sl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ub(e))return"Blackberry";if(zb(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Vb(e))&&!e.includes("edge/"))return"Chrome";if(Pb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function Mb(i=Nn()){return/firefox\//i.test(i)}function Ob(i=Nn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vb(i=Nn()){return/crios\//i.test(i)}function Lb(i=Nn()){return/iemobile/i.test(i)}function Pb(i=Nn()){return/android/i.test(i)}function Ub(i=Nn()){return/blackberry/i.test(i)}function zb(i=Nn()){return/webos/i.test(i)}function hp(i=Nn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function DT(i=Nn()){return hp(i)&&!!window.navigator?.standalone}function MT(){return $2()&&document.documentMode===10}function Bb(i=Nn()){return hp(i)||Pb(i)||zb(i)||Ub(i)||/windows phone/i.test(i)||Lb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i,e=[]){let n;switch(i){case"Browser":n=Fx(Nn());break;case"Worker":n=`${Fx(Nn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,y)=>{try{const p=e(u);f(p)}catch(p){y(p)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(i,e={}){return Ui(i,"GET","/v2/passwordPolicy",Pi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=6;class PT{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new OT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ab,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _d(this,{idToken:e}),r=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ms(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===f)&&y?.user&&(r=y.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ms(this.app))return Promise.reject(Ii(this));const n=e?Ht(e):null;return n&&ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ms(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VT(this),n=new PT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;ze(n,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(y,this,"internal-error"),y.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,l);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pr(i){return Ht(i)}class Gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=nE(n=>this.observer=n)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zT(i){Ud=i}function Hb(i){return Ud.loadJS(i)}function BT(){return Ud.recaptchaEnterpriseScript}function qT(){return Ud.gapiScript}function HT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class FT{constructor(){this.enterprise=new GT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YT="recaptcha-enterprise",Fb="NO_RECAPTCHA";class KT{constructor(e){this.type=YT,this.auth=Pr(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,y)=>{TT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const x=new ET(p);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,f(x.siteKey)}}).catch(p=>{y(p)})})}function l(u,f,y){const p=window.grecaptcha;zx(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(x=>{f(x)}).catch(()=>{f(Fb)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FT().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(y=>{if(!n&&zx(window.grecaptcha))l(y,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=BT();p.length!==0&&(p+=y),Hb(p).then(()=>{l(y,u,f)}).catch(x=>{f(x)})}}).catch(y=>{f(y)})})}}async function Yx(i,e,n,r=!1,l=!1){const u=new KT(i);let f;if(l)f=Fb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const y={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const p=y.phoneEnrollmentInfo.phoneNumber,x=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const p=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return r?Object.assign(y,{captchaResp:f}):Object.assign(y,{captchaResponse:f}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Ed(i,e,n,r,l){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Yx(i,e,n,n==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Yx(i,e,n,n==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(i,e){const n=op(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Ea(u,e??{}))return l;Rs(l,"already-initialized")}return n.initialize({options:e})}function QT(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ri);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function XT(i,e,n){const r=Pr(i);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=Gb(e),{host:f,port:y}=WT(e),p=y===null?"":`:${y}`,x={url:`${u}//${f}${p}/`},_=Object.freeze({host:f,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(Ea(x,r.config.emulator)&&Ea(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Vl(f)?(xb(`${u}//${f}${p}`),vb("Auth",!0)):ZT()}function Gb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function WT(i){const e=Gb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:Kx(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Kx(f)}}}function Kx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ZT(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function JT(i,e){return Ui(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i,e){return xc(i,"POST","/v1/accounts:signInWithPassword",Pi(i,e))}async function tS(i,e){return Ui(i,"POST","/v1/accounts:sendOobCode",Pi(i,e))}async function nS(i,e){return tS(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(i,e){return xc(i,"POST","/v1/accounts:signInWithEmailLink",Pi(i,e))}async function iS(i,e){return xc(i,"POST","/v1/accounts:signInWithEmailLink",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends fp{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new ac(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ac(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,n,"signInWithPassword",eS);case"emailLink":return sS(e,{email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,r,"signUpPassword",JT);case"emailLink":return iS(e,{idToken:n,email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(i,e){return xc(i,"POST","/v1/accounts:signInWithIdp",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="http://localhost";class Sa extends fp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const f=new Sa(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Nl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nl(e,n)}buildRequest(){const e={requestUri:rS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lS(i){const e=Yo(Ko(i)).link,n=e?Yo(Ko(e)).deep_link_id:null,r=Yo(Ko(i)).deep_link_id;return(r?Yo(Ko(r)).link:null)||r||n||e||i}class mp{constructor(e){const n=Yo(Ko(e)),r=n.apiKey??null,l=n.oobCode??null,u=aS(n.mode??null);ze(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=lS(e);try{return new mp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.providerId=Pl.PROVIDER_ID}static credential(e,n){return ac._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=mp.parseLink(n);return ze(r,"argument-error"),ac._fromEmailAndCode(e,r.code,r.tenantId)}}Pl.PROVIDER_ID="password";Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Yb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends vc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sa._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends vc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends vc{constructor(){super("twitter.com")}static credential(e,n){return Sa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(i,e){return xc(i,"POST","/v1/accounts:signUp",Pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await js._fromIdTokenResponse(e,r,l),f=$x(r);return new Na({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=$x(r);return new Na({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function $x(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends Li{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Td(e,n,r,l)}}function Kb(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(i,u,e,r):u})}async function cS(i,e,n=!1){const r=await rc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Na._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(i,e,n=!1){const{auth:r}=i;if(ms(r.app))return Promise.reject(Ii(r));const l="reauthenticate";try{const u=await rc(i,Kb(r,l,e,i),n);ze(u.idToken,r,"internal-error");const f=dp(u.idToken);ze(f,r,"internal-error");const{sub:y}=f;return ze(i.uid===y,r,"user-mismatch"),Na._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Rs(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(i,e,n=!1){if(ms(i.app))return Promise.reject(Ii(i));const r="signIn",l=await Kb(i,r,e),u=await Na._fromIdTokenResponse(i,r,l);return n||await i._updateCurrentUser(u.user),u}async function dS(i,e){return $b(Pr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(i){const e=Pr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hS(i,e,n){const r=Pr(i);await Ed(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nS)}async function fS(i,e,n){if(ms(i.app))return Promise.reject(Ii(i));const r=Pr(i),f=await Ed(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Qb(i),p}),y=await Na._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(y.user),y}function mS(i,e,n){return ms(i.app)?Promise.reject(Ii(i)):dS(Ht(i),Pl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Qb(i),r})}function pS(i,e,n,r){return Ht(i).onIdTokenChanged(e,n,r)}function gS(i,e,n){return Ht(i).beforeAuthStateChanged(e,n)}function yS(i,e,n,r){return Ht(i).onAuthStateChanged(e,n,r)}function xS(i){return Ht(i).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=1e3,bS=10;class Wb extends Xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,y,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);MT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,bS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wb.type="LOCAL";const _S=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zb.type="SESSION";const Jb=Zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new zd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const y=Array.from(f).map(async x=>x(n.origin,u)),p=await wS(y);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((y,p)=>{const x=pp("",20);l.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(T){const A=T;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(A.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function TS(i){ni().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function SS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NS(){return navigator?.serviceWorker?.controller||null}function AS(){return e_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="firebaseLocalStorageDb",jS=1,Nd="firebaseLocalStorage",n_="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bd(i,e){return i.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function CS(){const i=indexedDB.deleteDatabase(t_);return new bc(i).toPromise()}function Pm(){const i=indexedDB.open(t_,jS);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Nd,{keyPath:n_})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await CS(),e(await Pm()))})})}async function Qx(i,e,n){const r=Bd(i,!0).put({[n_]:e,value:n});return new bc(r).toPromise()}async function RS(i,e){const n=Bd(i,!1).get(e),r=await new bc(n).toPromise();return r===void 0?null:r.value}function Xx(i,e){const n=Bd(i,!0).delete(e);return new bc(n).toPromise()}const IS=800,kS=3;class s_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(AS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SS(),!this.activeServiceWorker)return;this.sender=new ES(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await Qx(e,Sd,"1"),await Xx(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Bd(l,!1).getAll();return new bc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}s_.type="LOCAL";const DS=s_;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(i,e){return e?Ri(e):(ze(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends fp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OS(i){return $b(i.auth,new gp(i),i.bypassAuthState)}function VS(i){const{auth:e,user:n}=i;return ze(n,e,"internal-error"),uS(n,new gp(i),i.bypassAuthState)}async function LS(i){const{auth:e,user:n}=i;return ze(n,e,"internal-error"),cS(n,new gp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:f,type:y}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OS;case"linkViaPopup":case"linkViaRedirect":return LS;case"reauthViaPopup":case"reauthViaRedirect":return VS;default:Rs(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new yc(2e3,1e4);class El extends i_{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,El.currentPopupAction&&El.currentPopupAction.cancel(),El.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,El.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PS.get())};e()}}El.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="pendingRedirect",ud=new Map;class zS extends i_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const r=await BS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BS(i,e){const n=FS(e),r=HS(i);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function qS(i,e){ud.set(i._key(),e)}function HS(i){return Ri(i._redirectPersistence)}function FS(i){return cd(US,i.config.apiKey,i.name)}async function GS(i,e,n=!1){if(ms(i.app))return Promise.reject(Ii(i));const r=Pr(i),l=MS(r,e),f=await new zS(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=600*1e3;class KS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$S(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ti(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}}function Wx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function r_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function $S(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(i,e={}){return Ui(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;async function ZS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await QS(i);for(const n of e)try{if(JS(n))return}catch{}Rs(i,"unauthorized-domain")}function JS(i){const e=Vm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!WS.test(n))return!1;if(XS.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new yc(3e4,6e4);function Zx(){const i=ni().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function tN(i){return new Promise((e,n)=>{function r(){Zx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zx(),n(ti(i,"network-request-failed"))},timeout:eN.get()})}if(ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ni().gapi?.load)r();else{const l=HT("iframefcb");return ni()[l]=()=>{gapi.load?r():n(ti(i,"network-request-failed"))},Hb(`${qT()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw dd=null,e})}let dd=null;function nN(i){return dd=dd||tN(i),dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new yc(5e3,15e3),iN="__/auth/iframe",rN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oN(i){const e=i.config;ze(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?up(e,rN):`https://${i.config.authDomain}/${iN}`,r={apiKey:e.apiKey,appName:i.name,v:Ll},l=lN.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${gc(r).slice(1)}`}async function cN(i){const e=await nN(i),n=ni().gapi;return ze(n,i,"internal-error"),e.open({where:document.body,url:oN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=ti(i,"network-request-failed"),y=ni().setTimeout(()=>{u(f)},sN.get());function p(){ni().clearTimeout(y),l(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dN=500,hN=600,fN="_blank",mN="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pN(i,e,n,r=dN,l=hN){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const p={...uN,width:r.toString(),height:l.toString(),top:u,left:f},x=Nn().toLowerCase();n&&(y=Vb(x)?fN:n),Mb(x)&&(e=e||mN,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[U,K])=>`${A}${U}=${K},`,"");if(DT(x)&&y!=="_self")return gN(e||"",y),new Jx(null);const T=window.open(e||"",y,_);ze(T,i,"popup-blocked");try{T.focus()}catch{}return new Jx(T)}function gN(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="__/auth/handler",xN="emulator/auth/handler",vN=encodeURIComponent("fac");async function ev(i,e,n,r,l,u){ze(i.config.authDomain,i,"auth-domain-config-required"),ze(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Ll,eventId:l};if(e instanceof Yb){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",tE(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))f[_]=T}if(e instanceof vc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const y=f;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const p=await i._getAppCheckToken(),x=p?`#${vN}=${encodeURIComponent(p)}`:"";return`${bN(i)}?${gc(y).slice(1)}${x}`}function bN({config:i}){return i.emulator?up(i,xN):`https://${i.authDomain}/${yN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class _N{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jb,this._completeRedirectFn=GS,this._overrideRedirectResult=qS}async _openPopup(e,n,r,l){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ev(e,n,r,Vm(),l);return pN(e,u,pp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await ev(e,n,r,Vm(),l);return TS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Di(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cN(e),r=new KS(e);return n.register("authEvent",l=>(ze(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},l=>{const u=l?.[0]?.[ym];u!==void 0&&n(!!u),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||Ob()||hp()}}const wN=_N;var tv="@firebase/auth",nv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SN(i){jl(new Ta("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:y}=r.options;ze(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qb(i)},x=new UT(r,l,u,p);return QT(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jl(new Ta("auth-internal",e=>{const n=Pr(e.getProvider("auth").getImmediate());return(r=>new EN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(tv,nv,TN(i)),jr(tv,nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=300,AN=yb("authIdTokenMaxAge")||NN;let sv=null;const jN=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AN)return;const l=n?.token;sv!==l&&(sv=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function CN(i=Eb()){const e=op(i,"auth");if(e.isInitialized())return e.getImmediate();const n=$T(i,{popupRedirectResolver:wN,persistence:[DS,_S,Jb]}),r=yb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=jN(u.toString());gS(n,f,()=>f(n.currentUser)),pS(n,y=>f(y))}}const l=pb("auth");return l&&XT(n,`http://${l}`),n}function RN(){return document.getElementsByTagName("head")?.[0]??document}zT({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=ti("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",RN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SN("Browser");var IN="firebase",kN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(IN,kN,"app");var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,a_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,N){function j(){}j.prototype=N.prototype,C.F=N.prototype,C.prototype=new j,C.prototype.constructor=C,C.D=function(k,R,V){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return N.prototype[R].apply(k,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,N,j){j||(j=0);const k=Array(16);if(typeof N=="string")for(var R=0;R<16;++R)k[R]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(R=0;R<16;++R)k[R]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=C.g[0],j=C.g[1],R=C.g[2];let V=C.g[3],I;I=N+(V^j&(R^V))+k[0]+3614090360&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[1]+3905402710&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[2]+606105819&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[3]+3250441966&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[4]+4118548399&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[5]+1200080426&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[6]+2821735955&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[7]+4249261313&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[8]+1770035416&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[9]+2336552879&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[10]+4294925233&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[11]+2304563134&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(V^j&(R^V))+k[12]+1804603682&4294967295,N=j+(I<<7&4294967295|I>>>25),I=V+(R^N&(j^R))+k[13]+4254626195&4294967295,V=N+(I<<12&4294967295|I>>>20),I=R+(j^V&(N^j))+k[14]+2792965006&4294967295,R=V+(I<<17&4294967295|I>>>15),I=j+(N^R&(V^N))+k[15]+1236535329&4294967295,j=R+(I<<22&4294967295|I>>>10),I=N+(R^V&(j^R))+k[1]+4129170786&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[6]+3225465664&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[11]+643717713&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[0]+3921069994&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[5]+3593408605&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[10]+38016083&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[15]+3634488961&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[4]+3889429448&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[9]+568446438&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[14]+3275163606&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[3]+4107603335&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[8]+1163531501&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(R^V&(j^R))+k[13]+2850285829&4294967295,N=j+(I<<5&4294967295|I>>>27),I=V+(j^R&(N^j))+k[2]+4243563512&4294967295,V=N+(I<<9&4294967295|I>>>23),I=R+(N^j&(V^N))+k[7]+1735328473&4294967295,R=V+(I<<14&4294967295|I>>>18),I=j+(V^N&(R^V))+k[12]+2368359562&4294967295,j=R+(I<<20&4294967295|I>>>12),I=N+(j^R^V)+k[5]+4294588738&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[8]+2272392833&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[11]+1839030562&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[14]+4259657740&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[1]+2763975236&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[4]+1272893353&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[7]+4139469664&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[10]+3200236656&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[13]+681279174&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[0]+3936430074&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[3]+3572445317&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[6]+76029189&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(j^R^V)+k[9]+3654602809&4294967295,N=j+(I<<4&4294967295|I>>>28),I=V+(N^j^R)+k[12]+3873151461&4294967295,V=N+(I<<11&4294967295|I>>>21),I=R+(V^N^j)+k[15]+530742520&4294967295,R=V+(I<<16&4294967295|I>>>16),I=j+(R^V^N)+k[2]+3299628645&4294967295,j=R+(I<<23&4294967295|I>>>9),I=N+(R^(j|~V))+k[0]+4096336452&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[7]+1126891415&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[14]+2878612391&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[5]+4237533241&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[12]+1700485571&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[3]+2399980690&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[10]+4293915773&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[1]+2240044497&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[8]+1873313359&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[15]+4264355552&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[6]+2734768916&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[13]+1309151649&4294967295,j=R+(I<<21&4294967295|I>>>11),I=N+(R^(j|~V))+k[4]+4149444226&4294967295,N=j+(I<<6&4294967295|I>>>26),I=V+(j^(N|~R))+k[11]+3174756917&4294967295,V=N+(I<<10&4294967295|I>>>22),I=R+(N^(V|~j))+k[2]+718787259&4294967295,R=V+(I<<15&4294967295|I>>>17),I=j+(V^(R|~N))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const j=N-this.blockSize,k=this.C;let R=this.h,V=0;for(;V<N;){if(R==0)for(;V<=j;)l(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<N;)if(k[R++]=C.charCodeAt(V++),R==this.blockSize){l(this,k),R=0;break}}else for(;V<N;)if(k[R++]=C[V++],R==this.blockSize){l(this,k),R=0;break}}this.h=R,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var j=C.length-8;j<C.length;++j)C[j]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)C[N++]=this.g[j]>>>k&255;return C};function u(C,N){var j=y;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=N(C)}function f(C,N){this.h=N;const j=[];let k=!0;for(let R=C.length-1;R>=0;R--){const V=C[R]|0;k&&V==N||(j[R]=V,k=!1)}this.g=j}var y={};function p(C){return-128<=C&&C<128?u(C,function(N){return new f([N|0],N<0?-1:0)}):new f([C|0],C<0?-1:0)}function x(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return O(x(-C));const N=[];let j=1;for(let k=0;C>=j;k++)N[k]=C/j|0,j*=4294967296;return new f(N,0)}function _(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return O(_(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=x(Math.pow(N,8));let k=T;for(let V=0;V<C.length;V+=8){var R=Math.min(8,C.length-V);const I=parseInt(C.substring(V,V+R),N);R<8?(R=x(Math.pow(N,R)),k=k.j(R).add(x(I))):(k=k.j(j),k=k.add(x(I)))}return k}var T=p(0),A=p(1),U=p(16777216);i=f.prototype,i.m=function(){if(W(this))return-O(this).m();let C=0,N=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);C+=(k>=0?k:4294967296+k)*N,N*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(K(this))return"0";if(W(this))return"-"+O(this).toString(C);const N=x(Math.pow(C,6));var j=this;let k="";for(;;){const R=fe(j,N).g;j=se(j,R.j(N));let V=((j.g.length>0?j.g[0]:j.h)>>>0).toString(C);if(j=R,K(j))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function K(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function W(C){return C.h==-1}i.l=function(C){return C=se(this,C),W(C)?-1:K(C)?0:1};function O(C){const N=C.g.length,j=[];for(let k=0;k<N;k++)j[k]=~C.g[k];return new f(j,~C.h).add(A)}i.abs=function(){return W(this)?O(this):this},i.add=function(C){const N=Math.max(this.g.length,C.g.length),j=[];let k=0;for(let R=0;R<=N;R++){let V=k+(this.i(R)&65535)+(C.i(R)&65535),I=(V>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);k=I>>>16,V&=65535,I&=65535,j[R]=I<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function se(C,N){return C.add(O(N))}i.j=function(C){if(K(this)||K(C))return T;if(W(this))return W(C)?O(this).j(O(C)):O(O(this).j(C));if(W(C))return O(this.j(O(C)));if(this.l(U)<0&&C.l(U)<0)return x(this.m()*C.m());const N=this.g.length+C.g.length,j=[];for(var k=0;k<2*N;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let R=0;R<C.g.length;R++){const V=this.i(k)>>>16,I=this.i(k)&65535,le=C.i(R)>>>16,Ie=C.i(R)&65535;j[2*k+2*R]+=I*Ie,ne(j,2*k+2*R),j[2*k+2*R+1]+=V*Ie,ne(j,2*k+2*R+1),j[2*k+2*R+1]+=I*le,ne(j,2*k+2*R+1),j[2*k+2*R+2]+=V*le,ne(j,2*k+2*R+2)}for(C=0;C<N;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=N;C<2*N;C++)j[C]=0;return new f(j,0)};function ne(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function pe(C,N){this.g=C,this.h=N}function fe(C,N){if(K(N))throw Error("division by zero");if(K(C))return new pe(T,T);if(W(C))return N=fe(O(C),N),new pe(O(N.g),O(N.h));if(W(N))return N=fe(C,O(N)),new pe(O(N.g),N.h);if(C.g.length>30){if(W(C)||W(N))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=N;k.l(C)<=0;)j=xe(j),k=xe(k);var R=me(j,1),V=me(k,1);for(k=me(k,2),j=me(j,2);!K(k);){var I=V.add(k);I.l(C)<=0&&(R=R.add(j),V=I),k=me(k,1),j=me(j,1)}return N=se(C,R.j(N)),new pe(R,N)}for(R=T;C.l(N)>=0;){for(j=Math.max(1,Math.floor(C.m()/N.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=x(j),I=V.j(N);W(I)||I.l(C)>0;)j-=k,V=x(j),I=V.j(N);K(V)&&(V=A),R=R.add(V),C=se(C,I)}return new pe(R,C)}i.B=function(C){return fe(this,C).h},i.and=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)&C.i(k);return new f(j,this.h&C.h)},i.or=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)|C.i(k);return new f(j,this.h|C.h)},i.xor=function(C){const N=Math.max(this.g.length,C.g.length),j=[];for(let k=0;k<N;k++)j[k]=this.i(k)^C.i(k);return new f(j,this.h^C.h)};function xe(C){const N=C.g.length+1,j=[];for(let k=0;k<N;k++)j[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(j,C.h)}function me(C,N){const j=N>>5;N%=32;const k=C.g.length-j,R=[];for(let V=0;V<k;V++)R[V]=N>0?C.i(V+j)>>>N|C.i(V+j+1)<<32-N:C.i(V+j);return new f(R,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=_,Cr=f}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l_,$o,o_,hd,Um,c_,u_,d_;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof td=="object"&&td];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(d,g){if(g)e:{var b=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var q=d[S];if(!(q in b))break e;b=b[q]}d=d[d.length-1],S=b[d],g=g(S),g!=S&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(g){var b=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.push([S,g[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function y(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,b){return d.call.apply(d.bind,arguments)}function x(d,g,b){return x=p,x.apply(null,arguments)}function _(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function T(d,g){function b(){}b.prototype=g.prototype,d.Z=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(S,q,X){for(var ve=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ve[Ke-2]=arguments[Ke];return g.prototype[q].apply(S,ve)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function U(d){const g=d.length;if(g>0){const b=Array(g);for(let S=0;S<g;S++)b[S]=d[S];return b}return[]}function K(d,g){for(let S=1;S<arguments.length;S++){const q=arguments[S];var b=typeof q;if(b=b!="object"?b:q?Array.isArray(q)?"array":b:"null",b=="array"||b=="object"&&typeof q.length=="number"){b=d.length||0;const X=q.length||0;d.length=b+X;for(let ve=0;ve<X;ve++)d[b+ve]=q[ve]}else d.push(q)}}class W{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function O(d){f.setTimeout(()=>{throw d},0)}function se(){var d=C;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,b){const S=pe.get();S.set(g,b),this.h?this.h.next=S:this.g=S,this.h=S}}var pe=new W(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,me=!1,C=new ne,N=()=>{const d=Promise.resolve(void 0);xe=()=>{d.then(j)}};function j(){for(var d;d=se();){try{d.h.call(d.g)}catch(b){O(b)}var g=pe;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}me=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function le(d,g){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}T(le,R),le.prototype.init=function(d,g){const b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),H=0;function B(d,g,b,S,q){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!S,this.ha=q,this.key=++H,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function be(d,g,b){for(const S in d)g.call(b,d[S],S,d)}function je(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function E(d){const g={};for(const b in d)g[b]=d[b];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(d,g){let b,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(b in S)d[b]=S[b];for(let X=0;X<P.length;X++)b=P[X],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function M(d){this.src=d,this.g={},this.h=0}M.prototype.add=function(d,g,b,S,q){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const ve=ge(d,g,S,q);return ve>-1?(g=d[ve],b||(g.fa=!1)):(g=new B(g,this.src,X,!!S,q),g.fa=b,d.push(g)),g};function ie(d,g){const b=g.type;if(b in d.g){var S=d.g[b],q=Array.prototype.indexOf.call(S,g,void 0),X;(X=q>=0)&&Array.prototype.splice.call(S,q,1),X&&(ee(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function ge(d,g,b,S){for(let q=0;q<d.length;++q){const X=d[q];if(!X.da&&X.listener==g&&X.capture==!!b&&X.ha==S)return q}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ue={};function Le(d,g,b,S,q){if(Array.isArray(g)){for(let X=0;X<g.length;X++)Le(d,g[X],b,S,q);return null}return b=Ee(b),d&&d[Ie]?d.J(g,b,y(S)?!!S.capture:!1,q):re(d,g,b,!1,S,q)}function re(d,g,b,S,q,X){if(!g)throw Error("Invalid event type");const ve=y(q)?!!q.capture:!!q;let Ke=Ce(d);if(Ke||(d[_e]=Ke=new M(d)),b=Ke.add(g,b,S,ve,X),b.proxy)return b;if(S=we(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)V||(q=ve),q===void 0&&(q=!1),d.addEventListener(g.toString(),S,q);else if(d.attachEvent)d.attachEvent(ye(g.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function we(){function d(b){return g.call(d.src,d.listener,b)}const g=oe;return d}function Te(d,g,b,S,q){if(Array.isArray(g))for(var X=0;X<g.length;X++)Te(d,g[X],b,S,q);else S=y(S)?!!S.capture:!!S,b=Ee(b),d&&d[Ie]?(d=d.i,X=String(g).toString(),X in d.g&&(g=d.g[X],b=ge(g,b,S,q),b>-1&&(ee(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete d.g[X],d.h--)))):d&&(d=Ce(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ge(g,b,S,q)),(b=d>-1?g[d]:null)&&$(b))}function $(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ie])ie(g.i,d);else{var b=d.type,S=d.proxy;g.removeEventListener?g.removeEventListener(b,S,d.capture):g.detachEvent?g.detachEvent(ye(b),S):g.addListener&&g.removeListener&&g.removeListener(S),(b=Ce(g))?(ie(b,d),b.h==0&&(b.src=null,g[_e]=null)):ee(d)}}}function ye(d){return d in Ue?Ue[d]:Ue[d]="on"+d}function oe(d,g){if(d.da)d=!0;else{g=new le(g,this);const b=d.listener,S=d.ha||d.src;d.fa&&$(d),d=b.call(S,g)}return d}function Ce(d){return d=d[_e],d instanceof M?d:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ee(d){return typeof d=="function"?d:(d[Ye]||(d[Ye]=function(g){return d.handleEvent(g)}),d[Ye])}function Xe(){k.call(this),this.i=new M(this),this.M=this,this.G=null}T(Xe,k),Xe.prototype[Ie]=!0,Xe.prototype.removeEventListener=function(d,g,b,S){Te(this,d,g,b,S)};function Je(d,g){var b,S=d.G;if(S)for(b=[];S;S=S.G)b.push(S);if(d=d.M,S=g.type||g,typeof g=="string")g=new R(g,d);else if(g instanceof R)g.target=g.target||d;else{var q=g;g=new R(S,d),Z(g,q)}q=!0;let X,ve;if(b)for(ve=b.length-1;ve>=0;ve--)X=g.g=b[ve],q=te(X,S,!0,g)&&q;if(X=g.g=d,q=te(X,S,!0,g)&&q,q=te(X,S,!1,g)&&q,b)for(ve=0;ve<b.length;ve++)X=g.g=b[ve],q=te(X,S,!1,g)&&q}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const b=d.g[g];for(let S=0;S<b.length;S++)ee(b[S]);delete d.g[g],d.h--}}this.G=null},Xe.prototype.J=function(d,g,b,S){return this.i.add(String(d),g,!1,b,S)},Xe.prototype.K=function(d,g,b,S){return this.i.add(String(d),g,!0,b,S)};function te(d,g,b,S){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let X=0;X<g.length;++X){const ve=g[X];if(ve&&!ve.da&&ve.capture==b){const Ke=ve.listener,Pt=ve.ha||ve.src;ve.fa&&ie(d.i,ve),q=Ke.call(Pt,S)!==!1&&q}}return q&&!S.defaultPrevented}function De(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(d,g||0)}function et(d){d.g=De(()=>{d.g=null,d.i&&(d.i=!1,et(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class ut extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:et(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(d){k.call(this),this.h=d,this.g={}}T(vn,k);var He=[];function St(d){be(d.g,function(g,b){this.g.hasOwnProperty(b)&&$(g)},d),d.g={}}vn.prototype.N=function(){vn.Z.N.call(this),St(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=f.JSON.stringify,In=f.JSON.parse,zi=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function qr(){}function ci(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){R.call(this,"d")}T(Mt,R);function cn(){R.call(this,"c")}T(cn,R);var wt={},qn=null;function Bi(){return qn=qn||new Xe}wt.Ia="serverreachability";function Rc(d){R.call(this,wt.Ia,d)}T(Rc,R);function ks(d){const g=Bi();Je(g,new Rc(g))}wt.STAT_EVENT="statevent";function Hr(d,g){R.call(this,wt.STAT_EVENT,d),this.stat=g}T(Hr,R);function Ft(d){const g=Bi();Je(g,new Hr(g,d))}wt.Ja="timingevent";function Ds(d,g){R.call(this,wt.Ja,d),this.size=g}T(Ds,R);function Ms(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},g)}function gs(){this.g=!0}gs.prototype.ua=function(){this.g=!1};function oh(d,g,b,S,q,X){d.info(function(){if(d.g)if(X){var ve="",Ke=X.split("&");for(let dt=0;dt<Ke.length;dt++){var Pt=Ke[dt].split("=");if(Pt.length>1){const kt=Pt[0];Pt=Pt[1];const rs=kt.split("_");ve=rs.length>=2&&rs[1]=="type"?ve+(kt+"="+Pt+"&"):ve+(kt+"=redacted&")}}}else ve=null;else ve=X;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+g+`
`+b+`
`+ve})}function Ic(d,g,b,S,q,X,ve){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+g+`
`+b+`
`+X+" "+ve})}function Os(d,g,b,S){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+ch(d,b)+(S?" "+S:"")})}function Fr(d,g){d.info(function(){return"TIMEOUT: "+g})}gs.prototype.info=function(){};function ch(d,g){if(!d.g)return g;if(!g)return null;try{const X=JSON.parse(g);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var b=X[d];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ve=1;ve<S.length;ve++)S[ve]=""}}}}return bn(X)}catch{return g}}var Gr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gl;function Yr(){}T(Yr,qr),Yr.prototype.g=function(){return new XMLHttpRequest},Gl=new Yr;function ui(d){return encodeURIComponent(String(d))}function kc(d){var g=1;d=d.split(":");const b=[];for(;g>0&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function ys(d,g,b,S){this.j=d,this.i=g,this.l=b,this.S=S||1,this.V=new vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xs}function xs(){this.i=null,this.g="",this.h=!1}var Gt={},sn={};function Vs(d,g,b){d.M=1,d.A=Kr(Kt(g)),d.u=b,d.R=!0,ka(d,null)}function ka(d,g){d.F=Date.now(),Ls(d),d.B=Kt(d.A);var b=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),Va(b.i,"t",S),d.C=0,b=d.j.L,d.h=new xs,d.g=Kc(d.j,b?g:null,!d.u),d.P>0&&(d.O=new ut(x(d.Y,d,d.g),d.P)),g=d.V,b=d.g,S=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(He[0]=q.toString()),q=He);for(let X=0;X<q.length;X++){const ve=Le(b,q[X],S||g.handleEvent,!1,g.h||g);if(!ve)break;g.g[ve.key]=ve}g=d.J?E(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),ks(),oh(d.i,d.v,d.B,d.l,d.S,d.u)}ys.prototype.ba=function(d){d=d.target;const g=this.O;g&&_s(d)==3?g.j():this.Y(d)},ys.prototype.Y=function(d){try{if(d==this.g)e:{const Ke=_s(this.g),Pt=this.g.ya(),dt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Ke!=4||Pt==7||(Pt==8||dt<=0?ks(3):ks(2)),Ps(this);var g=this.g.ca();this.X=g;var b=uh(this);if(this.o=g==200,Ic(this.i,this.v,this.B,this.l,this.S,Ke,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var X=S;break t}}X=null}if(d=X)Os(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Us(this,d);else{this.o=!1,this.m=3,Ft(12),Hn(this),ns(this);break e}}if(this.R){d=!0;let kt;for(;!this.K&&this.C<b.length;)if(kt=Mc(this,b),kt==sn){Ke==4&&(this.m=4,Ft(14),d=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Gt){this.m=4,Ft(15),Os(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Os(this.i,this.l,kt,null),Us(this,kt);if(Dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||b.length!=0||this.h.h||(this.m=1,Ft(16),d=!1),this.o=this.o&&d,!d)Os(this.i,this.l,b,"[Invalid Chunked Response]"),Hn(this),ns(this);else if(b.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ao(ve),ve.P=!0,Ft(11))}}else Os(this.i,this.l,b,null),Us(this,b);Ke==4&&Hn(this),this.o&&!this.K&&(Ke==4?Hc(this.j,this):(this.o=!1,Ls(this)))}else hi(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Hn(this),ns(this)}}}catch{}finally{}};function uh(d){if(!Dc(d))return d.g.la();const g=un(d.g);if(g==="")return"";let b="";const S=g.length,q=_s(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Hn(d),ns(d),"";d.h.i=new f.TextDecoder}for(let X=0;X<S;X++)d.h.h=!0,b+=d.h.i.decode(g[X],{stream:!(q&&X==S-1)});return g.length=0,d.h.g+=b,d.C=0,d.h.g}function Dc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Mc(d,g){var b=d.C,S=g.indexOf(`
`,b);return S==-1?sn:(b=Number(g.substring(b,S)),isNaN(b)?Gt:(S+=1,S+b>g.length?sn:(g=g.slice(S,S+b),d.C=S+b,g)))}ys.prototype.cancel=function(){this.K=!0,Hn(this)};function Ls(d){d.T=Date.now()+d.H,Da(d,d.H)}function Da(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ms(x(d.aa,d),g)}function Ps(d){d.D&&(f.clearTimeout(d.D),d.D=null)}ys.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Fr(this.i,this.B),this.M!=2&&(ks(),Ft(17)),Hn(this),this.m=2,ns(this)):Da(this,this.T-d)};function ns(d){d.j.I==0||d.K||Hc(d.j,d)}function Hn(d){Ps(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,St(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Us(d,g){try{var b=d.j;if(b.I!=0&&(b.g==d||Bs(b.h,d))){if(!d.L&&Bs(b.h,d)&&b.I==3){try{var S=b.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Ba(b),Qi(b);else break e;ea(b),Ft(18)}}else b.xa=q[1],0<b.xa-b.K&&q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ms(x(b.Va,b),6e3));zs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ks(b,11)}else if((d.L||b.g==d)&&Ba(b),!I(g))for(q=b.Ba.g.parse(g),g=0;g<q.length;g++){let dt=q[g];const kt=dt[0];if(!(kt<=b.K))if(b.K=kt,dt=dt[1],b.I==2)if(dt[0]=="c"){b.M=dt[1],b.ba=dt[2];const rs=dt[3];rs!=null&&(b.ka=rs,b.j.info("VER="+b.ka));const $s=dt[4];$s!=null&&(b.za=$s,b.j.info("SVER="+b.za));const ws=dt[5];ws!=null&&typeof ws=="number"&&ws>0&&(S=1.5*ws,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Es=d.g;if(Es){const ta=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var X=S.h;X.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&($l(X,X.h),X.h=null))}if(S.G){const qa=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(S.wa=qa,mt(S.J,S.G,qa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ve=d;if(S.na=Yc(S,S.L?S.ba:null,S.W),ve.L){Ql(S.h,ve);var Ke=ve,Pt=S.O;Pt&&(Ke.H=Pt),Ke.D&&(Ps(Ke),Ls(Ke)),S.g=ve}else Bc(S);b.i.length>0&&Ys(b)}else dt[0]!="stop"&&dt[0]!="close"||Ks(b,7);else b.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Ks(b,7):io(b):dt[0]!="noop"&&b.l&&b.l.qa(dt),b.A=0)}}ks(4)}catch{}}var Yt=class{constructor(d,g){this.g=d,this.map=g}};function Yl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function zs(d){return d.h?1:d.g?d.g.size:0}function Bs(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function $l(d,g){d.g?d.g.add(g):d.h=g}function Ql(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Yl.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Xl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.G);return g}return U(d.i)}var Oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(d,g){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const S=d[b].indexOf("=");let q,X=null;S>=0?(q=d[b].substring(0,S),X=d[b].substring(S+1)):q=d[b],g(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Fn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Fn?(this.l=d.l,rn(this,d.j),this.o=d.o,this.g=d.g,qi(this,d.u),this.h=d.h,Wl(this,Uc(d.i)),this.m=d.m):d&&(g=String(d).match(Oc))?(this.l=!1,rn(this,g[1]||"",!0),this.o=qs(g[2]||""),this.g=qs(g[3]||"",!0),qi(this,g[4]),this.h=qs(g[5]||"",!0),Wl(this,g[6]||"",!0),this.m=qs(g[7]||"")):(this.l=!1,this.i=new Fi(null,this.l))}Fn.prototype.toString=function(){const d=[];var g=this.j;g&&d.push($r(g,Oa,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push($r(g,Oa,!0),"@"),d.push(ui(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push($r(b,b.charAt(0)=="/"?Zl:Vc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",$r(b,Lc)),d.join("")},Fn.prototype.resolve=function(d){const g=Kt(this);let b=!!d.j;b?rn(g,d.j):b=!!d.o,b?g.o=d.o:b=!!d.g,b?g.g=d.g:b=d.u!=null;var S=d.h;if(b)qi(g,d.u);else if(b=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=g.h.lastIndexOf("/");q!=-1&&(S=g.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let ve=0;ve<q.length;){const Ke=q[ve++];Ke=="."?S&&ve==q.length&&X.push(""):Ke==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),S&&ve==q.length&&X.push("")):(X.push(Ke),S=!0)}S=X.join("/")}else S=q}return b?g.h=S:b=d.i.toString()!=="",b?Wl(g,Uc(d.i)):b=!!d.m,b&&(g.m=d.m),g};function Kt(d){return new Fn(d)}function rn(d,g,b){d.j=b?qs(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function qi(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Wl(d,g,b){g instanceof Fi?(d.i=g,La(d.i,d.l)):(b||(g=$r(g,Hi)),d.i=new Fi(g,d.l))}function mt(d,g,b){d.i.set(g,b)}function Kr(d){return mt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qs(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function $r(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,kn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Oa=/[#\/\?@]/g,Vc=/[#\?:]/g,Zl=/[#\?]/g,Hi=/[#\?@]/g,Lc=/#/g;function Fi(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Dn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ma(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=Fi.prototype,i.add=function(d,g){Dn(this),this.i=null,d=Gi(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Pc(d,g){Dn(d),g=Gi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Jl(d,g){return Dn(d),g=Gi(d,g),d.g.has(g)}i.forEach=function(d,g){Dn(this),this.g.forEach(function(b,S){b.forEach(function(q){d.call(g,q,S,this)},this)},this)};function eo(d,g){Dn(d);let b=[];if(typeof g=="string")Jl(d,g)&&(b=b.concat(d.g.get(Gi(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)b=b.concat(d[g]);return b}i.set=function(d,g){return Dn(this),this.i=null,d=Gi(this,d),Jl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},i.get=function(d,g){return d?(d=eo(this,d),d.length>0?String(d[0]):g):g};function Va(d,g,b){Pc(d,g),b.length>0&&(d.i=null,d.g.set(Gi(d,g),U(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var b=g[S];const q=ui(b);b=eo(this,b);for(let X=0;X<b.length;X++){let ve=q;b[X]!==""&&(ve+="="+ui(b[X])),d.push(ve)}}return this.i=d.join("&")};function Uc(d){const g=new Fi;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Gi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function La(d,g){g&&!d.j&&(Dn(d),d.i=null,d.g.forEach(function(b,S){const q=S.toLowerCase();S!=q&&(Pc(this,S),Va(this,q,b))},d)),d.j=g}function vs(d,g){const b=new gs;if(f.Image){const S=new Image;S.onload=_(ss,b,"TestLoadImage: loaded",!0,g,S),S.onerror=_(ss,b,"TestLoadImage: error",!1,g,S),S.onabort=_(ss,b,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(ss,b,"TestLoadImage: timeout",!1,g,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else g(!1)}function to(d,g){const b=new gs,S=new AbortController,q=setTimeout(()=>{S.abort(),ss(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:S.signal}).then(X=>{clearTimeout(q),X.ok?ss(b,"TestPingServer: ok",!0,g):ss(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),ss(b,"TestPingServer: error",!1,g)})}function ss(d,g,b,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(b)}catch{}}function Yi(){this.g=new zi}function Hs(d){this.i=d.Sb||null,this.h=d.ab||!1}T(Hs,qr),Hs.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(d,g){Xe.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Qr,Xe),i=Qr.prototype,i.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,bs(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pa(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pa(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Ki(this):bs(this),this.readyState==3&&Pa(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Ki(this))},i.Na=function(d){this.g&&(this.response=d,Ki(this))},i.ga=function(){this.g&&Ki(this)};function Ki(d){d.readyState=4,d.l=null,d.j=null,d.B=null,bs(d)}i.setRequestHeader=function(d,g){this.A.append(d,g)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function bs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function is(d){let g="";return be(d,function(b,S){g+=S,g+=":",g+=b,g+=`\r
`}),g}function Xr(d,g,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=is(b),typeof d=="string"?b!=null&&ui(b):mt(d,g,b))}function xt(d){Xe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(xt,Xe);var Fs=/^https?$/i,no=["POST","PUT"];i=xt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,g,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gl.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(X){Wr(this,X);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)b.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())b.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),q=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(no,g,void 0)>=0)||S||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ve]of b)this.g.setRequestHeader(X,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Wr(this,X)}};function Wr(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,so(d),di(d)}function so(d){d.A||(d.A=!0,Je(d,"complete"),Je(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Je(this,"complete"),Je(this,"abort"),di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),xt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},i.Xa=function(){Zr(this)};function Zr(d){if(d.h&&typeof u<"u"){if(d.v&&_s(d)==4)setTimeout(d.Ca.bind(d),0);else if(Je(d,"readystatechange"),_s(d)==4){d.h=!1;try{const X=d.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var S;if(S=X===0){let ve=String(d.D).match(Oc)[1]||null;!ve&&f.self&&f.self.location&&(ve=f.self.location.protocol.slice(0,-1)),S=!Fs.test(ve?ve.toLowerCase():"")}b=S}if(b)Je(d,"complete"),Je(d,"success");else{d.o=6;try{var q=_s(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",so(d)}}finally{di(d)}}}}function di(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,g||Je(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function _s(d){return d.g?d.g.readyState:0}i.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),In(g)}};function un(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hi(d){const g={};d=(d.g&&_s(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(I(d[S]))continue;var b=kc(d[S]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=g[q]||[];g[q]=X,X.push(b)}je(g,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function $i(d){this.za=0,this.i=[],this.j=new gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gs("baseRetryDelayMs",5e3,d),this.Za=Gs("retryDelaySeedMs",1e4,d),this.Ta=Gs("forwardChannelMaxRetries",2,d),this.va=Gs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Yl(d&&d.concurrentRequestLimit),this.Ba=new Yi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=$i.prototype,i.ka=8,i.I=1,i.connect=function(d,g,b,S){Ft(0),this.W=d,this.H=g||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Yc(this,null,this.W),Ys(this)};function io(d){if(Ua(d),d.I==3){var g=d.V++,b=Kt(d.J);if(mt(b,"SID",d.M),mt(b,"RID",g),mt(b,"TYPE","terminate"),Jr(d,b),g=new ys(d,d.j,g),g.M=2,g.A=Kr(Kt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Kc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ls(g)}Gc(d)}function Qi(d){d.g&&(ao(d),d.g.cancel(),d.g=null)}function Ua(d){Qi(d),d.v&&(f.clearTimeout(d.v),d.v=null),Ba(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ys(d){if(!Kl(d.h)&&!d.m){d.m=!0;var g=d.Ea;xe||N(),me||(xe(),me=!0),C.add(g,d),d.D=0}}function za(d,g){return zs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ms(x(d.Ea,d,g),Fc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new ys(this,this.j,d);let X=this.o;if(this.U&&(X?(X=E(X),Z(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=zc(this,q,g),b=Kt(this.J),mt(b,"RID",d),mt(b,"CVER",22),this.G&&mt(b,"X-HTTP-Session-Id",this.G),Jr(this,b),X&&(this.R?g="headers="+ui(is(X))+"&"+g:this.u&&Xr(b,this.u,X)),$l(this.h,q),this.Ra&&mt(b,"TYPE","init"),this.S?(mt(b,"$req",g),mt(b,"SID","null"),q.U=!0,Vs(q,b,null)):Vs(q,b,g),this.I=2}}else this.I==3&&(d?ro(this,d):this.i.length==0||Kl(this.h)||ro(this))};function ro(d,g){var b;g?b=g.l:b=d.V++;const S=Kt(d.J);mt(S,"SID",d.M),mt(S,"RID",b),mt(S,"AID",d.K),Jr(d,S),d.u&&d.o&&Xr(S,d.u,d.o),b=new ys(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),g&&(d.i=g.G.concat(d.i)),g=zc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),$l(d.h,b),Vs(b,S,g)}function Jr(d,g){d.H&&be(d.H,function(b,S){mt(g,S,b)}),d.l&&be({},function(b,S){mt(g,S,b)})}function zc(d,g,b){b=Math.min(d.i.length,b);const S=d.l?x(d.l.Ka,d.l,d):null;e:{var q=d.i;let Ke=-1;for(;;){const Pt=["count="+b];Ke==-1?b>0?(Ke=q[0].g,Pt.push("ofs="+Ke)):Ke=0:Pt.push("ofs="+Ke);let dt=!0;for(let kt=0;kt<b;kt++){var X=q[kt].g;const rs=q[kt].map;if(X-=Ke,X<0)Ke=Math.max(0,q[kt].g-100),dt=!1;else try{X="req"+X+"_"||"";try{var ve=rs instanceof Map?rs:Object.entries(rs);for(const[$s,ws]of ve){let Es=ws;y(ws)&&(Es=bn(ws)),Pt.push(X+$s+"="+encodeURIComponent(Es))}}catch($s){throw Pt.push(X+"type="+encodeURIComponent("_badmap")),$s}}catch{S&&S(rs)}}if(dt){ve=Pt.join("&");break e}}ve=void 0}return d=d.i.splice(0,b),g.G=d,ve}function Bc(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;xe||N(),me||(xe(),me=!0),C.add(g,d),d.A=0}}function ea(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ms(x(d.Da,d),Fc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,qc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ms(x(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Qi(this),qc(this))};function ao(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function qc(d){d.g=new ys(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Kt(d.na);mt(g,"RID","rpc"),mt(g,"SID",d.M),mt(g,"AID",d.K),mt(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&mt(g,"TO",d.ia),mt(g,"TYPE","xmlhttp"),Jr(d,g),d.u&&d.o&&Xr(g,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Kr(Kt(g)),b.u=null,b.R=!0,ka(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Qi(this),ea(this),Ft(19))};function Ba(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Hc(d,g){var b=null;if(d.g==g){Ba(d),ao(d),d.g=null;var S=2}else if(Bs(d.h,g))b=g.G,Ql(d.h,g),S=1;else return;if(d.I!=0){if(g.o)if(S==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var q=d.D;S=Bi(),Je(S,new Ds(S,b)),Ys(d)}else Bc(d);else if(q=g.m,q==3||q==0&&g.X>0||!(S==1&&za(d,g)||S==2&&ea(d)))switch(b&&b.length>0&&(g=d.h,g.i=g.i.concat(b)),q){case 1:Ks(d,5);break;case 4:Ks(d,10);break;case 3:Ks(d,6);break;default:Ks(d,2)}}}function Fc(d,g){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*g}function Ks(d,g){if(d.j.info("Error code "+g),g==2){var b=x(d.bb,d),S=d.Ua;const q=!S;S=new Fn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||rn(S,"https"),Kr(S),q?vs(S.toString(),b):to(S.toString(),b)}else Ft(2);d.I=0,d.l&&d.l.pa(g),Gc(d),Ua(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Gc(d){if(d.I=0,d.ja=[],d.l){const g=Xl(d.h);(g.length!=0||d.i.length!=0)&&(K(d.ja,g),K(d.ja,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.oa()}}function Yc(d,g,b){var S=b instanceof Fn?Kt(b):new Fn(b);if(S.g!="")g&&(S.g=g+"."+S.g),qi(S,S.u);else{var q=f.location;S=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const X=new Fn(null);S&&rn(X,S),g&&(X.g=g),q&&qi(X,q),b&&(X.h=b),S=X}return b=d.G,g=d.wa,b&&g&&mt(S,b,g),mt(S,"VER",d.ka),Jr(d,S),S}function Kc(d,g,b){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new xt(new Hs({ab:b})):new xt(d.ma),g.Fa(d.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}i=$c.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Xi(){}Xi.prototype.g=function(d,g){return new An(d,g)};function An(d,g){Xe.call(this),this.g=new $i(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!I(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new fi(this)}T(An,Xe),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){io(this.g)},An.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=bn(d),d=b);g.i.push(new Yt(g.Ya++,d)),g.I==3&&Ys(g)},An.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,An.Z.N.call(this)};function Qc(d){Mt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}T(Qc,Mt);function Xc(){cn.call(this),this.status=1}T(Xc,cn);function fi(d){this.g=d}T(fi,$c),fi.prototype.ra=function(){Je(this.g,"a")},fi.prototype.qa=function(d){Je(this.g,new Qc(d))},fi.prototype.pa=function(d){Je(this.g,new Xc)},fi.prototype.oa=function(){Je(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,d_=function(){return new Xi},u_=function(){return Bi()},c_=wt,Um={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,hd=Gr,Fl.COMPLETE="complete",o_=Fl,ci.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,$o=ci,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,l_=xt}).apply(typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",av="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new ap("@firebase/firestore");function vl(){return Aa.logLevel}function Ae(i,...e){if(Aa.logLevel<=st.DEBUG){const n=e.map(yp);Aa.debug(`Firestore (${Ul}): ${i}`,...n)}}function Mi(i,...e){if(Aa.logLevel<=st.ERROR){const n=e.map(yp);Aa.error(`Firestore (${Ul}): ${i}`,...n)}}function Cl(i,...e){if(Aa.logLevel<=st.WARN){const n=e.map(yp);Aa.warn(`Firestore (${Ul}): ${i}`,...n)}}function yp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,h_(i,r,n)}function h_(i,e,n){let r=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mi(r),new Error(r)}function ft(i,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,i||h_(e,l,r)}function Ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class MN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let r=this.i;const l=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Rr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},y=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>y(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Rr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new f_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class VN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new VN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const r=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=UN(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function it(i,e){return i<e?-1:i>e?1:0}function zm(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return xm(l)===xm(u)?it(l,u):xm(l)?1:-1}return it(i.length,e.length)}const zN=55296,BN=57343;function xm(i){const e=i.charCodeAt(0);return e>=zN&&e<=BN}function Rl(i,e,n){return i.length===e.length&&i.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=ei.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return it(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),l=ei.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?ei.extractNumericId(e).compare(ei.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class At extends ei{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new At(n)}static emptyPath(){return new At([])}}const qN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends ei{construct(e,n,r){return new gn(e,n,r)}static isValidIdentifier(e){return qN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new gn([ov])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,l+=2}else y==="`"?(f=!f,l++):y!=="."||f?(r+=y,l++):(u(),l++)}if(u(),f)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(At.fromString(e))}static fromName(e){return new Oe(At.fromString(e).popFirst(5))}static empty(){return new Oe(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(i,e,n){if(!n)throw new Ne(ue.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function HN(i,e,n,r){if(e===!0&&r===!0)throw new Ne(ue.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function cv(i){if(!Oe.isDocumentKey(i))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function uv(i){if(Oe.isDocumentKey(i))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function p_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function qd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Be(12329,{type:typeof i})}function Jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qd(i);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(i,e){const n={typeString:i};return e&&(n.value=e),n}function _c(i,e){if(!p_(i))throw new Ne(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new Ne(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,hv=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hv);return new Rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dv)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:en("string",Rt._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Rt(0,0))}static max(){return new qe(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=-1;function FN(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=qe.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new kr(l,Oe.empty(),e)}function GN(i){return new kr(i.readTime,i.key,lc)}class kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kr(qe.min(),Oe.empty(),lc)}static max(){return new kr(qe.max(),Oe.empty(),lc)}}function YN(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(i.documentKey,e.documentKey),n!==0?n:it(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $N{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(i){if(i.code!==ue.FAILED_PRECONDITION||i.message!==KN)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,r)=>{n(e)}))}static reject(e){return new he(((n,r)=>{r(e)}))}static waitFor(e){return new he(((n,r)=>{let l=0,u=0,f=!1;e.forEach((y=>{++l,y.next((()=>{++u,f&&u===l&&n()}),(p=>r(p)))})),f=!0,u===l&&n()}))}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next((l=>l?he.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new he(((r,l)=>{const u=e.length,f=new Array(u);let y=0;for(let p=0;p<u;p++){const x=p;n(e[x]).next((_=>{f[x]=_,++y,y===u&&r(f)}),(_=>l(_)))}}))}static doWhile(e,n){return new he(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function QN(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=-1;function Fd(i){return i==null}function Ad(i){return i===0&&1/i==-1/0}function XN(i){return typeof i=="number"&&Number.isInteger(i)&&!Ad(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="";function WN(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=fv(e)),e=ZN(i.get(n),e);return fv(e)}function ZN(i,e){let n=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":n+="";break;case g_:n+="";break;default:n+=u}}return n}function fv(i){return i+g_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ur(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function y_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}}class nd{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??pn.RED,this.left=l??pn.EMPTY,this.right=u??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new pn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return pn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new nn(gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new x_("Invalid base64 string: "+u):u}})(e);return new xn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const JN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(i){if(ft(!!i,39018),typeof i=="string"){let e=0;const n=JN.exec(i);if(ft(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(i.seconds),nanos:Bt(i.nanos)}}function Bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Mr(i){return typeof i=="string"?xn.fromBase64String(i):xn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="server_timestamp",b_="__type__",__="__previous_value__",w_="__local_write_time__";function bp(i){return(i?.mapValue?.fields||{})[b_]?.stringValue===v_}function Gd(i){const e=i.mapValue.fields[__];return bp(e)?Gd(e):e}function oc(i){const e=Dr(i.mapValue.fields[w_].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,l,u,f,y,p,x,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=_}}const jd="(default)";class cc{constructor(e,n){this.projectId=e,this.database=n||jd}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__type__",tA="__max__",sd={mapValue:{}},T_="__vector__",Cd="value";function Or(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?bp(i)?4:sA(i)?9007199254740991:nA(i)?10:11:Be(28295,{value:i})}function li(i,e){if(i===e)return!0;const n=Or(i);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return oc(i).isEqual(oc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Dr(l.timestampValue),y=Dr(u.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return Mr(l.bytesValue).isEqual(Mr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return Bt(l.geoPointValue.latitude)===Bt(u.geoPointValue.latitude)&&Bt(l.geoPointValue.longitude)===Bt(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Bt(l.integerValue)===Bt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Bt(l.doubleValue),y=Bt(u.doubleValue);return f===y?Ad(f)===Ad(y):isNaN(f)&&isNaN(y)}return!1})(i,e);case 9:return Rl(i.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},y=u.mapValue.fields||{};if(mv(f)!==mv(y))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(y[p]===void 0||!li(f[p],y[p])))return!1;return!0})(i,e);default:return Be(52216,{left:i})}}function uc(i,e){return(i.values||[]).find((n=>li(n,e)))!==void 0}function Il(i,e){if(i===e)return 0;const n=Or(i),r=Or(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const y=Bt(u.integerValue||u.doubleValue),p=Bt(f.integerValue||f.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1})(i,e);case 3:return gv(i.timestampValue,e.timestampValue);case 4:return gv(oc(i),oc(e));case 5:return zm(i.stringValue,e.stringValue);case 6:return(function(u,f){const y=Mr(u),p=Mr(f);return y.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const y=u.split("/"),p=f.split("/");for(let x=0;x<y.length&&x<p.length;x++){const _=it(y[x],p[x]);if(_!==0)return _}return it(y.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const y=it(Bt(u.latitude),Bt(f.latitude));return y!==0?y:it(Bt(u.longitude),Bt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return yv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const y=u.fields||{},p=f.fields||{},x=y[Cd]?.arrayValue,_=p[Cd]?.arrayValue,T=it(x?.values?.length||0,_?.values?.length||0);return T!==0?T:yv(x,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===sd.mapValue&&f===sd.mapValue)return 0;if(u===sd.mapValue)return 1;if(f===sd.mapValue)return-1;const y=u.fields||{},p=Object.keys(y),x=f.fields||{},_=Object.keys(x);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const A=zm(p[T],_[T]);if(A!==0)return A;const U=Il(y[p[T]],x[_[T]]);if(U!==0)return U}return it(p.length,_.length)})(i.mapValue,e.mapValue);default:throw Be(23264,{he:n})}}function gv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return it(i,e);const n=Dr(i),r=Dr(e),l=it(n.seconds,r.seconds);return l!==0?l:it(n.nanos,r.nanos)}function yv(i,e){const n=i.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=Il(n[l],r[l]);if(u)return u}return it(n.length,r.length)}function kl(i){return Bm(i)}function Bm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Mr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Oe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=Bm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Bm(n.fields[f])}`;return l+"}"})(i.mapValue):Be(61005,{value:i})}function fd(i){switch(Or(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(i);return e?16+fd(e):16;case 5:return 2*i.stringValue.length;case 6:return Mr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+fd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return Ur(r.fields,((u,f)=>{l+=u.length+fd(f)})),l})(i.mapValue);default:throw Be(13486,{value:i})}}function xv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function qm(i){return!!i&&"integerValue"in i}function _p(i){return!!i&&"arrayValue"in i}function vv(i){return!!i&&"nullValue"in i}function bv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function md(i){return!!i&&"mapValue"in i}function nA(i){return(i?.mapValue?.fields||{})[E_]?.stringValue===T_}function ec(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ur(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ec(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ec(i.arrayValue.values[n]);return e}return{...i}}function sA(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===tA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(n)}setAll(e){let n=gn.emptyPath(),r={},l=[];e.forEach(((f,y)=>{if(!n.isImmediateParentOf(y)){const p=this.getFieldsMap(n);this.applyChanges(p,r,l),r={},l=[],n=y.popLast()}f?r[y.lastSegment()]=ec(f):l.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];md(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new zn(ec(this.value))}}function S_(i){const e=[];return Ur(i.fields,((n,r)=>{const l=new gn([n]);if(md(r)){const u=S_(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,r,l,u,f,y){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=y}static newInvalidDocument(e){return new Sn(e,0,qe.min(),qe.min(),qe.min(),zn.empty(),0)}static newFoundDocument(e,n,r,l){return new Sn(e,1,n,qe.min(),r,l,0)}static newNoDocument(e,n){return new Sn(e,2,n,qe.min(),qe.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,qe.min(),qe.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.position=e,this.inclusive=n}}function _v(i,e,n){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],f=i.position[l];if(u.field.isKeyField()?r=Oe.comparator(Oe.fromName(f.referenceValue),n.key):r=Il(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!li(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n="asc"){this.field=e,this.dir=n}}function iA(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class Jt extends N_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aA(e,n,r):n==="array-contains"?new cA(e,r):n==="in"?new uA(e,r):n==="not-in"?new dA(e,r):n==="array-contains-any"?new hA(e,r):new Jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lA(e,r):new oA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Il(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(Il(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends N_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Is(e,n)}matches(e){return A_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A_(i){return i.op==="and"}function j_(i){return rA(i)&&A_(i)}function rA(i){for(const e of i.filters)if(e instanceof Is)return!1;return!0}function Hm(i){if(i instanceof Jt)return i.field.canonicalString()+i.op.toString()+kl(i.value);if(j_(i))return i.filters.map((e=>Hm(e))).join(",");{const e=i.filters.map((n=>Hm(n))).join(",");return`${i.op}(${e})`}}function C_(i,e){return i instanceof Jt?(function(r,l){return l instanceof Jt&&r.op===l.op&&r.field.isEqual(l.field)&&li(r.value,l.value)})(i,e):i instanceof Is?(function(r,l){return l instanceof Is&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,y)=>u&&C_(f,l.filters[y])),!0):!1})(i,e):void Be(19439)}function R_(i){return i instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${kl(n.value)}`})(i):i instanceof Is?(function(n){return n.op.toString()+" {"+n.getFilters().map(R_).join(" ,")+"}"})(i):"Filter"}class aA extends Jt{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class lA extends Jt{constructor(e,n){super(e,"in",n),this.keys=I_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class oA extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=I_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function I_(i,e){return(e.arrayValue?.values||[]).map((n=>Oe.fromName(n.referenceValue)))}class cA extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&uc(n.arrayValue,this.value)}}class uA extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uc(this.value.arrayValue,n)}}class dA extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uc(this.value.arrayValue,n)}}class hA extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n=null,r=[],l=[],u=null,f=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=y,this.Te=null}}function Ev(i,e=null,n=[],r=[],l=null,u=null,f=null){return new fA(i,e,n,r,l,u,f)}function wp(i){const e=Ge(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Hm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>kl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>kl(r))).join(",")),e.Te=n}return e.Te}function Ep(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!iA(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!C_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!wv(i.startAt,e.startAt)&&wv(i.endAt,e.endAt)}function Fm(i){return Oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,r=[],l=[],u=null,f="F",y=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mA(i,e,n,r,l,u,f,y){return new ql(i,e,n,r,l,u,f,y)}function Tp(i){return new ql(i)}function Tv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function k_(i){return i.collectionGroup!==null}function tc(i){const e=Ge(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new nn(gn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(y=y.add(x.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new dc(u,r))})),n.has(gn.keyField().canonicalString())||e.Ie.push(new dc(gn.keyField(),r))}return e.Ie}function si(i){const e=Ge(i);return e.Ee||(e.Ee=pA(e,tc(i))),e.Ee}function pA(i,e){if(i.limitType==="F")return Ev(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new dc(l.field,u)}));const n=i.endAt?new Rd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Rd(i.startAt.position,i.startAt.inclusive):null;return Ev(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Gm(i,e){const n=i.filters.concat([e]);return new ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Ym(i,e,n){return new ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Yd(i,e){return Ep(si(i),si(e))&&i.limitType===e.limitType}function D_(i){return`${wp(si(i))}|lt:${i.limitType}`}function bl(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>R_(l))).join(", ")}]`),Fd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>kl(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>kl(l))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function Kd(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of tc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(f,y,p){const x=_v(f,y,p);return f.inclusive?x<=0:x<0})(r.startAt,tc(r),l)||r.endAt&&!(function(f,y,p){const x=_v(f,y,p);return f.inclusive?x>=0:x>0})(r.endAt,tc(r),l))})(i,e)}function gA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function M_(i){return(e,n)=>{let r=!1;for(const l of tc(i)){const u=yA(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function yA(i,e,n){const r=i.field.isKeyField()?Oe.comparator(e.key,n.key):(function(u,f,y){const p=f.data.field(u),x=y.data.field(u);return p!==null&&x!==null?Il(p,x):Be(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Ot(Oe.comparator);function Oi(){return xA}const O_=new Ot(Oe.comparator);function Qo(...i){let e=O_;for(const n of i)e=e.insert(n.key,n);return e}function V_(i){let e=O_;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function va(){return nc()}function L_(){return nc()}function nc(){return new Ra((i=>i.toString()),((i,e)=>i.isEqual(e)))}const vA=new Ot(Oe.comparator),bA=new nn(Oe.comparator);function rt(...i){let e=bA;for(const n of i)e=e.add(n);return e}const _A=new nn(it);function wA(){return _A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function P_(i){return{integerValue:""+i}}function EA(i,e){return XN(e)?P_(e):Sp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function TA(i,e,n){return i instanceof Id?(function(l,u){const f={fields:{[b_]:{stringValue:v_},[w_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&bp(u)&&(u=Gd(u)),u&&(f.fields[__]=u),{mapValue:f}})(n,e):i instanceof hc?z_(i,e):i instanceof fc?B_(i,e):(function(l,u){const f=U_(l,u),y=Sv(f)+Sv(l.Ae);return qm(f)&&qm(l.Ae)?P_(y):Sp(l.serializer,y)})(i,e)}function SA(i,e,n){return i instanceof hc?z_(i,e):i instanceof fc?B_(i,e):n}function U_(i,e){return i instanceof kd?(function(r){return qm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Id extends $d{}class hc extends $d{constructor(e){super(),this.elements=e}}function z_(i,e){const n=q_(e);for(const r of i.elements)n.some((l=>li(l,r)))||n.push(r);return{arrayValue:{values:n}}}class fc extends $d{constructor(e){super(),this.elements=e}}function B_(i,e){let n=q_(e);for(const r of i.elements)n=n.filter((l=>!li(l,r)));return{arrayValue:{values:n}}}class kd extends $d{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sv(i){return Bt(i.integerValue||i.doubleValue)}function q_(i){return _p(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function NA(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof hc&&l instanceof hc||r instanceof fc&&l instanceof fc?Rl(r.elements,l.elements,li):r instanceof kd&&l instanceof kd?li(r.Ae,l.Ae):r instanceof Id&&l instanceof Id})(i.transform,e.transform)}class AA{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Qd{}function H_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Xd(i.key,Cn.none()):new wc(i.key,i.data,Cn.none());{const n=i.data,r=zn.empty();let l=new nn(gn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new zr(i.key,r,new Zn(l.toArray()),Cn.none())}}function jA(i,e,n){i instanceof wc?(function(l,u,f){const y=l.value.clone(),p=Av(l.fieldTransforms,u,f.transformResults);y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,n):i instanceof zr?(function(l,u,f){if(!pd(l.precondition,u))return void u.convertToUnknownDocument(f.version);const y=Av(l.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(F_(l)),p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function sc(i,e,n,r){return i instanceof wc?(function(u,f,y,p){if(!pd(u.precondition,f))return y;const x=u.value.clone(),_=jv(u.fieldTransforms,p,f);return x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null})(i,e,n,r):i instanceof zr?(function(u,f,y,p){if(!pd(u.precondition,f))return y;const x=jv(u.fieldTransforms,p,f),_=f.data;return _.setAll(F_(u)),_.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,r):(function(u,f,y){return pd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y})(i,e,n)}function CA(i,e){let n=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=U_(r.transform,l||null);u!=null&&(n===null&&(n=zn.empty()),n.set(r.field,u))}return n||null}function Nv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Rl(r,l,((u,f)=>NA(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class wc extends Qd{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class zr extends Qd{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function F_(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Av(i,e,n){const r=new Map;ft(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let l=0;l<n.length;l++){const u=i[l],f=u.transform,y=e.data.field(u.field);r.set(u.field,SA(f,y,n[l]))}return r}function jv(i,e,n){const r=new Map;for(const l of i){const u=l.transform,f=n.data.field(l.field);r.set(l.field,TA(u,f,e))}return r}class Xd extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RA extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&jA(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L_();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let y=this.applyToLocalView(f,u.mutatedFields);y=n.has(l.key)?null:y;const p=H_(f,y);p!==null&&r.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),rt())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((n,r)=>Nv(n,r)))&&Rl(this.baseMutations,e.baseMutations,((n,r)=>Nv(n,r)))}}class Np{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return vA})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new Np(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,lt;function MA(i){switch(i){case ue.OK:return Be(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Be(15467,{code:i})}}function G_(i){if(i===void 0)return Mi("GRPC error has no .code"),ue.UNKNOWN;switch(i){case Zt.OK:return ue.OK;case Zt.CANCELLED:return ue.CANCELLED;case Zt.UNKNOWN:return ue.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ue.INTERNAL;case Zt.UNAVAILABLE:return ue.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ue.NOT_FOUND;case Zt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Zt.ABORTED:return ue.ABORTED;case Zt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Zt.DATA_LOSS:return ue.DATA_LOSS;default:return Be(39323,{code:i})}}(lt=Zt||(Zt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Cr([4294967295,4294967295],0);function Cv(i){const e=OA().encode(i),n=new a_;return n.update(e),new Uint8Array(n.digest())}function Rv(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Cr([n,r],0),new Cr([l,u],0)]}class Ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Cr.fromNumber(r)));return l.compare(VA)===1&&(l=new Cr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cv(e),[r,l]=Rv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ap(u,l,n);return r.forEach((y=>f.insert(y))),f}insert(e){if(this.ge===0)return;const n=Cv(e),[r,l]=Rv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wd(qe.min(),l,new Ot(it),Oi(),rt())}}class Ec{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class Y_{constructor(e,n){this.targetId=e,this.Ce=n}}class K_{constructor(e,n,r=xn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Iv{constructor(){this.ve=0,this.Fe=kv(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),n=rt(),r=rt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Be(38017,{changeType:u})}})),new Ec(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=kv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=id(),this.He=id(),this.Ye=new Ot(it)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Fm(u))if(r===0){const f=new Oe(u.path);this.et(n,f,Sn.newNoDocument(f,qe.min()))}else ft(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const y=this.ut(e),p=y?this.ct(y,e,f):1;if(p!==0){this.it(n);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let f,y;try{f=Mr(r).toUint8Array()}catch(p){if(p instanceof x_)return Cl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new Ap(f,l,u)}catch(p){return Cl(p instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const y=this.ot(f);if(y){if(u.current&&Fm(y.target)){const p=new Oe(y.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Sn.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=rt();this.He.forEach(((u,f)=>{let y=!0;f.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new Wd(e,n,this.Ye,this.je,r);return this.je=Oi(),this.Je=id(),this.He=id(),this.Ye=new Ot(it),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Iv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(it),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(it),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function id(){return new Ot(Oe.comparator)}function kv(){return new Ot(Oe.comparator)}const PA={asc:"ASCENDING",desc:"DESCENDING"},UA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zA={and:"AND",or:"OR"};class BA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Km(i,e){return i.useProto3Json||Fd(e)?e:{value:e}}function Dd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function qA(i,e){return Dd(i,e.toTimestamp())}function ii(i){return ft(!!i,49232),qe.fromTimestamp((function(n){const r=Dr(n);return new Rt(r.seconds,r.nanos)})(i))}function jp(i,e){return $m(i,e).canonicalString()}function $m(i,e){const n=(function(l){return new At(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Q_(i){const e=At.fromString(i);return ft(e1(e),10190,{key:e.toString()}),e}function Qm(i,e){return jp(i.databaseId,e.path)}function vm(i,e){const n=Q_(e);if(n.get(1)!==i.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Oe(W_(n))}function X_(i,e){return jp(i.databaseId,e)}function HA(i){const e=Q_(i);return e.length===4?At.emptyPath():W_(e)}function Xm(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function W_(i){return ft(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Dv(i,e,n){return{name:Qm(i,e),fields:n.value.mapValue.fields}}function FA(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Be(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(ft(_===void 0||typeof _=="string",58123),xn.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),xn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&(function(x){const _=x.code===void 0?ue.UNKNOWN:G_(x.code);return new Ne(_,x.message||"")})(f);n=new K_(r,l,u,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=vm(i,r.document.name),u=ii(r.document.updateTime),f=r.document.createTime?ii(r.document.createTime):qe.min(),y=new zn({mapValue:{fields:r.document.fields}}),p=Sn.newFoundDocument(l,u,f,y),x=r.targetIds||[],_=r.removedTargetIds||[];n=new gd(x,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=vm(i,r.document),u=r.readTime?ii(r.readTime):qe.min(),f=Sn.newNoDocument(l,u),y=r.removedTargetIds||[];n=new gd([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=vm(i,r.document),u=r.removedTargetIds||[];n=new gd([],u,l,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new DA(l,u),y=r.targetId;n=new Y_(y,f)}}return n}function GA(i,e){let n;if(e instanceof wc)n={update:Dv(i,e.key,e.value)};else if(e instanceof Xd)n={delete:Qm(i,e.key)};else if(e instanceof zr)n={update:Dv(i,e.key,e.data),updateMask:ej(e.fieldMask)};else{if(!(e instanceof RA))return Be(16599,{Vt:e.type});n={verify:Qm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const y=f.transform;if(y instanceof Id)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof hc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof fc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof kd)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Be(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:qA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Be(27497)})(i,e.precondition)),n}function YA(i,e){return i&&i.length>0?(ft(e!==void 0,14353),i.map((n=>(function(l,u){let f=l.updateTime?ii(l.updateTime):ii(u);return f.isEqual(qe.min())&&(f=ii(u)),new AA(f,l.transformResults||[])})(n,e)))):[]}function KA(i,e){return{documents:[X_(i,e.path)]}}function $A(i,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X_(i,l);const u=(function(x){if(x.length!==0)return J_(Is.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(x){if(x.length!==0)return x.map((_=>(function(A){return{field:_l(A.field),direction:WA(A.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const y=Km(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function QA(i){let e=HA(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){ft(r===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const A=Z_(T);return A instanceof Is&&j_(A)?A.getFilters():[A]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((A=>(function(K){return new dc(wl(K.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(A)))})(n.orderBy));let y=null;n.limit&&(y=(function(T){let A;return A=typeof T=="object"?T.value:T,Fd(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(T){const A=!!T.before,U=T.values||[];return new Rd(U,A)})(n.startAt));let x=null;return n.endAt&&(x=(function(T){const A=!T.before,U=T.values||[];return new Rd(U,A)})(n.endAt)),mA(e,l,f,u,y,"F",p,x)}function XA(i,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z_(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wl(n.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=wl(n.unaryFilter.field);return Jt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=wl(n.unaryFilter.field);return Jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=wl(n.unaryFilter.field);return Jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Jt.create(wl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Is.create(n.compositeFilter.filters.map((r=>Z_(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(i):Be(30097,{filter:i})}function WA(i){return PA[i]}function ZA(i){return UA[i]}function JA(i){return zA[i]}function _l(i){return{fieldPath:i.canonicalString()}}function wl(i){return gn.fromServerFormat(i.fieldPath)}function J_(i){return i instanceof Jt?(function(n){if(n.op==="=="){if(bv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NAN"}};if(vv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NAN"}};if(vv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(n.field),op:ZA(n.op),value:n.value}}})(i):i instanceof Is?(function(n){const r=n.getFilters().map((l=>J_(l)));return r.length===1?r[0]:{compositeFilter:{op:JA(n.op),filters:r}}})(i):Be(54877,{filter:i})}function ej(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function e1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,l,u=qe.min(),f=qe.min(),y=xn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.yt=e}}function nj(i){const e=QA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.Cn=new ij}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(kr.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class ij{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new nn(At.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new nn(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},t1=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(t1,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",rj=1048576;function Vv([i,e],[n,r]){const l=it(i,n);return l===0?it(e,r):l}class aj{constructor(e){this.Ir=e,this.buffer=new nn(Vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bl(n)?Ae(Ov,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.Vr(3e5)}))}}class oj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Hd.ce);const r=new aj(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Mv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,f,y,p,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,f=Date.now(),this.nthSequenceNumber(e,l)))).next((T=>(r=T,y=Date.now(),this.removeTargets(e,r,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(x=Date.now(),vl()<=st.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${l} in `+(y-f)+`ms
	Removed ${u} targets in `+(p-y)+`ms
	Removed ${T} documents in `+(x-p)+`ms
Total Duration: ${x-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function cj(i,e){return new oj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.changes=new Ra((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&sc(r.mutation,l,Zn.empty(),Rt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,rt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=rt()){const l=va();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let f=Qo();return u.forEach(((y,p)=>{f=f.insert(y,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=va();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,rt())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,y)=>{n.set(f,y)}))}))}computeViews(e,n,r,l){let u=Oi();const f=nc(),y=(function(){return nc()})();return n.forEach(((p,x)=>{const _=r.get(x.key);l.has(x.key)&&(_===void 0||_.mutation instanceof zr)?u=u.insert(x.key,x):_!==void 0?(f.set(x.key,_.mutation.getFieldMask()),sc(_.mutation,x,_.mutation.getFieldMask(),Rt.now())):f.set(x.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((x,_)=>f.set(x,_))),n.forEach(((x,_)=>y.set(x,new dj(_,f.get(x)??null)))),y)))}recalculateAndSaveOverlays(e,n){const r=nc();let l=new Ot(((f,y)=>f-y)),u=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const y of f)y.keys().forEach((p=>{const x=n.get(p);if(x===null)return;let _=r.get(p)||Zn.empty();_=y.applyToLocalView(x,_),r.set(p,_);const T=(l.get(y.batchId)||rt()).add(p);l=l.insert(y.batchId,T)}))})).next((()=>{const f=[],y=l.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),x=p.key,_=p.value,T=L_();_.forEach((A=>{if(!u.has(A)){const U=H_(n.get(A),r.get(A));U!==null&&T.set(A,U),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,x,T))}return he.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return Oe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):k_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):he.resolve(va());let y=lc,p=u;return f.next((x=>he.forEach(x,((_,T)=>(y<T.largestBatchId&&(y=T.largestBatchId),u.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,p,x,rt()))).next((_=>({batchId:y,changes:V_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next((r=>{let l=Qo();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let f=Qo();return this.indexManager.getCollectionParents(e,u).next((y=>he.forEach(y,(p=>{const x=(function(T,A){return new ql(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,l).next((_=>{_.forEach(((T,A)=>{f=f.insert(T,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((f=>{u.forEach(((p,x)=>{const _=x.getKey();f.get(_)===null&&(f=f.insert(_,Sn.newInvalidDocument(_)))}));let y=Qo();return f.forEach(((p,x)=>{const _=u.get(p);_!==void 0&&sc(_.mutation,x,Zn.empty(),Rt.now()),Kd(n,x)&&(y=y.insert(p,x))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return he.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ii(l.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:nj(l.bundledQuery),readTime:ii(l.readTime)}})(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.overlays=new Ot(Oe.comparator),this.qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=va();return he.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),he.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const l=va(),u=n.length+1,f=new Oe(n.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const p=y.getNext().value,x=p.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&p.largestBatchId>r&&l.set(p.getKey(),p)}return he.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Ot(((x,_)=>x-_));const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=va(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const y=va(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,_)=>y.set(x,_))),!(y.size()>=l)););return he.resolve(y)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new kA(n,r));let u=this.qr.get(n);u===void 0&&(u=rt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.Qr=new nn(ln.$r),this.Ur=new nn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ln(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ln(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Oe(new At([])),r=new ln(n,e),l=new ln(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Oe(new At([])),r=new ln(n,e),l=new ln(n,e+1);let u=rt();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new ln(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Oe.comparator(e.key,n.key)||it(e.Yr,n.Yr)}static Kr(e,n){return it(e.Yr,n.Yr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(ln.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new IA(u,n,r,l);this.mutationQueue.push(f);for(const y of l)this.Zr=this.Zr.add(new ln(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return he.resolve(f)}lookupMutationBatch(e,n){return he.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return he.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?vp:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ln(n,0),l=new ln(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const y=this.Xr(f.Yr);u.push(y)})),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nn(it);return n.forEach((l=>{const u=new ln(l,0),f=new ln(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(y=>{r=r.add(y.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;Oe.isDocumentKey(u)||(u=u.child(""));const f=new ln(new Oe(u),0);let y=new nn(it);return this.Zr.forEachWhile((p=>{const x=p.key.path;return!!r.isPrefixOf(x)&&(x.length===l&&(y=y.add(p.Yr)),!0)}),f),he.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(n.mutations,(l=>{const u=new ln(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ln(n,0),l=this.Zr.firstAfterOrEqual(r);return he.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.ri=e,this.docs=(function(){return new Ot(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let r=Oi();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():Sn.newInvalidDocument(l))})),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=Oi();const f=n.path,y=new Oe(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:x,value:{document:_}}=p.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||YN(GN(_),r)<=0||(l.has(_.key)||Kd(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return he.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Be(9500)}ii(e,n){return he.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new xj(this)}getSize(e){return he.resolve(this.size)}}class xj extends uj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),he.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.persistence=e,this.si=new Ra((n=>wp(n)),Ep),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new Cp,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),he.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Dl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Pr(n),he.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((f,y)=>{y.sequenceNumber<=n&&r.get(y.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),he.waitFor(u).next((()=>l))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),he.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Hd(0),this.li=!1,this.li=!0,this.hi=new pj,this.referenceDelegate=e(this),this.Pi=new vj(this),this.indexManager=new sj,this.remoteDocumentCache=(function(l){return new yj(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new tj(n),this.Ii=new fj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new gj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const l=new bj(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class bj extends $N{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.Ri=new Cp,this.Vi=null}static mi(e){return new Rp(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const l=Oe.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,qe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.pi=new Ra((r=>WN(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=cj(this,n)}static mi(e,n){return new Md(e,n)}Ei(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return he.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?he.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((y=>{y||(r++,u.removeEntry(f,qe.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fd(e.data.value)),n}br(e,n,r){return he.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return he.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=rt(),l=rt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ip(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Q2()?8:QN(Nn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new _j;return this.Ss(e,n,f).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,f,y.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(vl()<=st.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(vl()<=st.DEBUG&&Ae("QueryEngine","Query:",bl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(vl()<=st.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):he.resolve())}ys(e,n){if(Tv(n))return he.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Ym(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=rt(...u);return this.ps.getDocuments(e,f).next((y=>this.indexManager.getMinOffset(e,r).next((p=>{const x=this.Ds(n,y);return this.Cs(n,x,f,p.readTime)?this.ys(e,Ym(n,null,"F")):this.vs(e,x,n,p)}))))})))))}ws(e,n,r,l){return Tv(n)||l.isEqual(qe.min())?he.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,l)?he.resolve(null):(vl()<=st.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),bl(n)),this.vs(e,f,n,FN(l,lc)).next((y=>y)))}))}Ds(e,n){let r=new nn(M_(e));return n.forEach(((l,u)=>{Kd(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return vl()<=st.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",bl(n)),this.ps.getDocumentsMatchingQuery(e,n,kr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="LocalStore",Ej=3e8;class Tj{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Ot(it),this.xs=new Ra((u=>wp(u)),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Sj(i,e,n,r){return new Tj(i,e,n,r)}async function s1(i,e){const n=Ge(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],y=[];let p=rt();for(const x of l){f.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}for(const x of u){y.push(x.batchId);for(const _ of x.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(r,p).next((x=>({Ls:x,removedBatchIds:f,addedBatchIds:y})))}))}))}function Nj(i,e){const n=Ge(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,p,x,_){const T=x.batch,A=T.keys();let U=he.resolve();return A.forEach((K=>{U=U.next((()=>_.getEntry(p,K))).next((W=>{const O=x.docVersions.get(K);ft(O!==null,48541),W.version.compareTo(O)<0&&(T.applyToRemoteDocument(W,x),W.isValidDocument()&&(W.setReadTime(x.commitVersion),_.addEntry(W)))}))})),U.next((()=>y.mutationQueue.removeMutationBatch(p,T)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(y){let p=rt();for(let x=0;x<y.mutationResults.length;++x)y.mutationResults[x].transformResults.length>0&&(p=p.add(y.batch.mutations[x].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function i1(i){const e=Ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Aj(i,e){const n=Ge(i),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];e.targetChanges.forEach(((_,T)=>{const A=l.get(T);if(!A)return;y.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let U=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?U=U.withResumeToken(xn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(_.resumeToken,r)),l=l.insert(T,U),(function(W,O,se){return W.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=Ej?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(A,U,_)&&y.push(n.Pi.updateTargetData(u,U))}));let p=Oi(),x=rt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),y.push(jj(u,f,e.documentUpdates).next((_=>{p=_.ks,x=_.qs}))),!r.isEqual(qe.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));y.push(_)}return he.waitFor(y).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,x))).next((()=>p))})).then((u=>(n.Ms=l,u)))}function jj(i,e,n){let r=rt(),l=rt();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Oi();return n.forEach(((y,p)=>{const x=u.get(y);p.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(y)),p.isNoDocument()&&p.version.isEqual(qe.min())?(e.removeEntry(y,p.readTime),f=f.insert(y,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),f=f.insert(y,p)):Ae(kp,"Ignoring outdated watch update for ",y,". Current version:",x.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function Cj(i,e){const n=Ge(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Rj(i,e){const n=Ge(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,he.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new Sr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Wm(i,e,n){const r=Ge(i),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Bl(f))throw f;Ae(kp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Lv(i,e,n){const r=Ge(i);let l=qe.min(),u=rt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,x,_){const T=Ge(p),A=T.xs.get(_);return A!==void 0?he.resolve(T.Ms.get(A)):T.Pi.getTargetData(x,_)})(r,f,si(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,y.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:qe.min(),n?u:rt()))).next((y=>(Ij(r,gA(e),y),{documents:y,Qs:u})))))}function Ij(i,e,n){let r=i.Os.get(e)||qe.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class Pv{constructor(){this.activeTargetIds=wA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kj{constructor(){this.Mo=new Pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd=null;function Zm(){return rd===null?rd=(function(){return 268435456+Math.round(2147483648*Math.random())})():rd++,"0x"+rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="RestConnection",Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Oj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===jd?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const f=Zm(),y=this.zo(e,n.toUriEncodedString());Ae(bm,`Sending RPC '${e}' ${f}:`,y,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,u);const{host:x}=new URL(y),_=Vl(x);return this.Jo(e,y,p,r,_).then((T=>(Ae(bm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw Cl(bm,`RPC '${e}' ${f} failed with error: `,T,"url: ",y,"request:",r),T}))}Ho(e,n,r,l,u,f){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=Mj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class Lj extends Oj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const f=Zm();return new Promise(((y,p)=>{const x=new l_;x.setWithCredentials(!0),x.listenOnce(o_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case hd.NO_ERROR:const T=x.getResponseJson();Ae(wn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),y(T);break;case hd.TIMEOUT:Ae(wn,`RPC '${e}' ${f} timed out`),p(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:const A=x.getStatus();if(Ae(wn,`RPC '${e}' ${f} failed with status:`,A,"response text:",x.getResponseText()),A>0){let U=x.getResponseJson();Array.isArray(U)&&(U=U[0]);const K=U?.error;if(K&&K.status&&K.message){const W=(function(se){const ne=se.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(ne)>=0?ne:ue.UNKNOWN})(K.status);p(new Ne(W,K.message))}else p(new Ne(ue.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:f,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ae(wn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(l);Ae(wn,`RPC '${e}' ${f} sending request:`,l),x.send(n,"POST",_,r,15)}))}T_(e,n,r){const l=Zm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=d_(),y=u_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const _=u.join("");Ae(wn,`Creating RPC '${e}' stream ${l}: ${_}`,p);const T=f.createWebChannel(_,p);this.I_(T);let A=!1,U=!1;const K=new Vj({Yo:O=>{U?Ae(wn,`Not sending because RPC '${e}' stream ${l} is closed:`,O):(A||(Ae(wn,`Opening RPC '${e}' stream ${l} transport.`),T.open(),A=!0),Ae(wn,`RPC '${e}' stream ${l} sending:`,O),T.send(O))},Zo:()=>T.close()}),W=(O,se,ne)=>{O.listen(se,(pe=>{try{ne(pe)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return W(T,$o.EventType.OPEN,(()=>{U||(Ae(wn,`RPC '${e}' stream ${l} transport opened.`),K.o_())})),W(T,$o.EventType.CLOSE,(()=>{U||(U=!0,Ae(wn,`RPC '${e}' stream ${l} transport closed`),K.a_(),this.E_(T))})),W(T,$o.EventType.ERROR,(O=>{U||(U=!0,Cl(wn,`RPC '${e}' stream ${l} transport errored. Name:`,O.name,"Message:",O.message),K.a_(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))})),W(T,$o.EventType.MESSAGE,(O=>{if(!U){const se=O.data[0];ft(!!se,16349);const ne=se,pe=ne?.error||ne[0]?.error;if(pe){Ae(wn,`RPC '${e}' stream ${l} received error:`,pe);const fe=pe.status;let xe=(function(N){const j=Zt[N];if(j!==void 0)return G_(j)})(fe),me=pe.message;xe===void 0&&(xe=ue.INTERNAL,me="Unknown error status: "+fe+" with message "+pe.message),U=!0,K.a_(new Ne(xe,me)),T.close()}else Ae(wn,`RPC '${e}' stream ${l} received:`,se),K.u_(se)}})),W(y,c_.STAT_EVENT,(O=>{O.stat===Um.PROXY?Ae(wn,`RPC '${e}' stream ${l} detected buffering proxy`):O.stat===Um.NOPROXY&&Ae(wn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(i){return new BA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&Ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class a1{constructor(e,n,r,l,u,f,y,p){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(Bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pj extends a1{constructor(e,n,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=FA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return qe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?qe.min():f.readTime?ii(f.readTime):qe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(u,f){let y;const p=f.target;if(y=Fm(p)?{documents:KA(u,p)}:{query:$A(u,p).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=$_(u,f.resumeToken);const x=Km(u,f.expectedCount);x!==null&&(y.expectedCount=x)}else if(f.snapshotVersion.compareTo(qe.min())>0){y.readTime=Dd(u,f.snapshotVersion.toTimestamp());const x=Km(u,f.expectedCount);x!==null&&(y.expectedCount=x)}return y})(this.serializer,e);const r=XA(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.q_(n)}}class Uj extends a1{constructor(e,n,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YA(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Xm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>GA(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{}class Bj extends zj{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,$m(n,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ue.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Ho(e,$m(n,r),l,f,y,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ne(ue.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class Hj{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Ia(this)&&(Ae(ja,"Restarting streams for network reachability change."),await(async function(p){const x=Ge(p);x.Ea.add(4),await Tc(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Jd(x)})(this))}))})),this.Ra=new qj(r,l)}}async function Jd(i){if(Ia(i))for(const e of i.da)await e(!0)}async function Tc(i){for(const e of i.da)await e(!1)}function l1(i,e){const n=Ge(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vp(n)?Op(n):Hl(n).O_()&&Mp(n,e))}function Dp(i,e){const n=Ge(i),r=Hl(n);n.Ia.delete(e),r.O_()&&o1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ia(n)&&n.Ra.set("Unknown"))}function Mp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(i).Y_(e)}function o1(i,e){i.Va.Ue(e),Hl(i).Z_(e)}function Op(i){i.Va=new LA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Hl(i).start(),i.Ra.ua()}function Vp(i){return Ia(i)&&!Hl(i).x_()&&i.Ia.size>0}function Ia(i){return Ge(i).Ea.size===0}function c1(i){i.Va=void 0}async function Fj(i){i.Ra.set("Online")}async function Gj(i){i.Ia.forEach(((e,n)=>{Mp(i,e)}))}async function Yj(i,e){c1(i),Vp(i)?(i.Ra.ha(e),Op(i)):i.Ra.set("Unknown")}async function Kj(i,e,n){if(i.Ra.set("Online"),e instanceof K_&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const y of u.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,f),l.Ia.delete(y),l.Va.removeTarget(y))})(i,e)}catch(r){Ae(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Od(i,r)}else if(e instanceof gd?i.Va.Ze(e):e instanceof Y_?i.Va.st(e):i.Va.tt(e),!n.isEqual(qe.min()))try{const r=await i1(i.localStore);n.compareTo(r)>=0&&await(function(u,f){const y=u.Va.Tt(f);return y.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(p.resumeToken,f))}})),y.targetMismatches.forEach(((p,x)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(xn.EMPTY_BYTE_STRING,_.snapshotVersion)),o1(u,p);const T=new Sr(_.target,p,x,_.sequenceNumber);Mp(u,T)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(r){Ae(ja,"Failed to raise snapshot:",r),await Od(i,r)}}async function Od(i,e,n){if(!Bl(e))throw e;i.Ea.add(1),await Tc(i),i.Ra.set("Offline"),n||(n=()=>i1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ae(ja,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Jd(i)}))}function u1(i,e){return e().catch((n=>Od(i,n,e)))}async function eh(i){const e=Ge(i),n=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vp;for(;$j(e);)try{const l=await Cj(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,Qj(e,l)}catch(l){await Od(e,l)}d1(e)&&h1(e)}function $j(i){return Ia(i)&&i.Ta.length<10}function Qj(i,e){i.Ta.push(e);const n=Vr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function d1(i){return Ia(i)&&!Vr(i).x_()&&i.Ta.length>0}function h1(i){Vr(i).start()}async function Xj(i){Vr(i).ra()}async function Wj(i){const e=Vr(i);for(const n of i.Ta)e.ea(n.mutations)}async function Zj(i,e,n){const r=i.Ta.shift(),l=Np.from(r,e,n);await u1(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await eh(i)}async function Jj(i,e){e&&Vr(i).X_&&await(async function(r,l){if((function(f){return MA(f)&&f!==ue.ABORTED})(l.code)){const u=r.Ta.shift();Vr(r).B_(),await u1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await eh(r)}})(i,e),d1(i)&&h1(i)}async function qv(i,e){const n=Ge(i);n.asyncQueue.verifyOperationInProgress(),Ae(ja,"RemoteStore received new credentials");const r=Ia(n);n.Ea.add(3),await Tc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jd(n)}async function e4(i,e){const n=Ge(i);e?(n.Ea.delete(2),await Jd(n)):e||(n.Ea.add(2),await Tc(n),n.Ra.set("Unknown"))}function Hl(i){return i.ma||(i.ma=(function(n,r,l){const u=Ge(n);return u.sa(),new Pj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:Fj.bind(null,i),t_:Gj.bind(null,i),r_:Yj.bind(null,i),H_:Kj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Vp(i)?Op(i):i.Ra.set("Unknown")):(await i.ma.stop(),c1(i))}))),i.ma}function Vr(i){return i.fa||(i.fa=(function(n,r,l){const u=Ge(n);return u.sa(),new Uj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xj.bind(null,i),r_:Jj.bind(null,i),ta:Wj.bind(null,i),na:Zj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await eh(i)):(await i.fa.stop(),i.Ta.length>0&&(Ae(ja,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const f=Date.now()+r,y=new Lp(e,n,f,l,u);return y.start(r),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(i,e){if(Mi("AsyncQueue",`${e}: ${i}`),Bl(i))return new Ne(ue.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new Ot(Oe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ml{constructor(e,n,r,l,u,f,y,p,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,l,u){const f=[];return n.forEach((y=>{f.push({type:0,doc:y})})),new Ml(e,n,Al.emptySet(n),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class n4{constructor(){this.queries=Fv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Ge(n),u=l.queries;l.queries=Fv(),u.forEach(((f,y)=>{for(const p of y.Sa)p.onError(r)}))})(this,new Ne(ue.ABORTED,"Firestore shutting down"))}}function Fv(){return new Ra((i=>D_(i)),Yd)}async function f1(i,e){const n=Ge(i);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new t4,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const y=Pp(f,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(y)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Up(n)}async function m1(i,e){const n=Ge(i),r=e.query;let l=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s4(i,e){const n=Ge(i);let r=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const y of f.Sa)y.Fa(l)&&(r=!0);f.wa=l}}r&&Up(n)}function i4(i,e,n){const r=Ge(i),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function Up(i){i.Ca.forEach((e=>{e.next()}))}var Jm,Gv;(Gv=Jm||(Jm={})).Ma="default",Gv.Cache="cache";class p1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.key=e}}class y1{constructor(e){this.key=e}}class r4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=M_(e),this.tu=new Al(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,y=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((_,T)=>{const A=l.get(_),U=Kd(this.query,T)?T:null,K=!!A&&this.mutatedKeys.has(A.key),W=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let O=!1;A&&U?A.data.isEqual(U.data)?K!==W&&(r.track({type:3,doc:U}),O=!0):this.su(A,U)||(r.track({type:2,doc:U}),O=!0,(p&&this.eu(U,p)>0||x&&this.eu(U,x)<0)&&(y=!0)):!A&&U?(r.track({type:0,doc:U}),O=!0):A&&!U&&(r.track({type:1,doc:A}),O=!0,(p||x)&&(y=!0)),O&&(U?(f=f.add(U),u=W?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,T)=>(function(U,K){const W=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:O})}};return W(U)-W(K)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(r),l=l??!1;const y=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,x=p!==this.Za;return this.Za=p,f.length!==0||x?{snapshot:new Ml(this.query,e.tu,u,f,e.mutatedKeys,p===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new y1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new g1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zp="SyncEngine";class a4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class l4{constructor(e){this.key=e,this.hu=!1}}class o4{constructor(e,n,r,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ra((y=>D_(y)),Yd),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Oe.comparator),this.Au=new Map,this.Ru=new Cp,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function c4(i,e,n=!0){const r=E1(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await x1(r,e,n,!0),l}async function u4(i,e){const n=E1(i);await x1(n,e,!0,!1)}async function x1(i,e,n,r){const l=await Rj(i.localStore,si(e)),u=l.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let y;return r&&(y=await d4(i,e,u,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&l1(i.remoteStore,l),y}async function d4(i,e,n,r,l){i.pu=(T,A,U)=>(async function(W,O,se,ne){let pe=O.view.ru(se);pe.Cs&&(pe=await Lv(W.localStore,O.query,!1).then((({documents:C})=>O.view.ru(C,pe))));const fe=ne&&ne.targetChanges.get(O.targetId),xe=ne&&ne.targetMismatches.get(O.targetId)!=null,me=O.view.applyChanges(pe,W.isPrimaryClient,fe,xe);return Kv(W,O.targetId,me.au),me.snapshot})(i,T,A,U);const u=await Lv(i.localStore,e,!0),f=new r4(e,u.Qs),y=f.ru(u.documents),p=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",l),x=f.applyChanges(y,i.isPrimaryClient,p);Kv(i,n,x.au);const _=new a4(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),x.snapshot}async function h4(i,e,n){const r=Ge(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Yd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Wm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Dp(r.remoteStore,l.targetId),ep(r,l.targetId)})).catch(zl)):(ep(r,l.targetId),await Wm(r.localStore,l.targetId,!0))}async function f4(i,e){const n=Ge(i),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dp(n.remoteStore,r.targetId))}async function m4(i,e,n){const r=_4(i);try{const l=await(function(f,y){const p=Ge(f),x=Rt.now(),_=y.reduce(((U,K)=>U.add(K.key)),rt());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let K=Oi(),W=rt();return p.Ns.getEntries(U,_).next((O=>{K=O,K.forEach(((se,ne)=>{ne.isValidDocument()||(W=W.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(U,K))).next((O=>{T=O;const se=[];for(const ne of y){const pe=CA(ne,T.get(ne.key).overlayedDocument);pe!=null&&se.push(new zr(ne.key,pe,S_(pe.value.mapValue),Cn.exists(!0)))}return p.mutationQueue.addMutationBatch(U,x,se,y)})).next((O=>{A=O;const se=O.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(U,O.batchId,se)}))})).then((()=>({batchId:A.batchId,changes:V_(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,y,p){let x=f.Vu[f.currentUser.toKey()];x||(x=new Ot(it)),x=x.insert(y,p),f.Vu[f.currentUser.toKey()]=x})(r,l.batchId,n),await Sc(r,l.changes),await eh(r.remoteStore)}catch(l){const u=Pp(l,"Failed to persist write");n.reject(u)}}async function v1(i,e){const n=Ge(i);try{const r=await Aj(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(ft(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ft(f.hu,14607):l.removedDocuments.size>0&&(ft(f.hu,42227),f.hu=!1))})),await Sc(n,r,e)}catch(r){await zl(r)}}function Yv(i,e,n){const r=Ge(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,f)=>{const y=f.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(f,y){const p=Ge(f);p.onlineState=y;let x=!1;p.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(y)&&(x=!0)})),x&&Up(p)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p4(i,e,n){const r=Ge(i);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new Ot(Oe.comparator);f=f.insert(u,Sn.newNoDocument(u,qe.min()));const y=rt().add(u),p=new Wd(qe.min(),new Map,new Ot(it),f,y);await v1(r,p),r.du=r.du.remove(u),r.Au.delete(e),Bp(r)}else await Wm(r.localStore,e,!1).then((()=>ep(r,e,n))).catch(zl)}async function g4(i,e){const n=Ge(i),r=e.batch.batchId;try{const l=await Nj(n.localStore,e);_1(n,r,null),b1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sc(n,l)}catch(l){await zl(l)}}async function y4(i,e,n){const r=Ge(i);try{const l=await(function(f,y){const p=Ge(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return p.mutationQueue.lookupMutationBatch(x,y).next((T=>(ft(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(x,T)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,_,y))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>p.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);_1(r,e,n),b1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sc(r,l)}catch(l){await zl(l)}}function b1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function _1(i,e,n){const r=Ge(i);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function ep(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||w1(i,r)}))}function w1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Dp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Bp(i))}function Kv(i,e,n){for(const r of n)r instanceof g1?(i.Ru.addReference(r.key,e),x4(i,r)):r instanceof y1?(Ae(zp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||w1(i,r.key)):Be(19791,{wu:r})}function x4(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(Ae(zp,"New document in limbo: "+n),i.Eu.add(r),Bp(i))}function Bp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Oe(At.fromString(e)),r=i.fu.next();i.Au.set(r,new l4(n)),i.du=i.du.insert(n,r),l1(i.remoteStore,new Sr(si(Tp(n.path)),r,"TargetPurposeLimboResolution",Hd.ce))}}async function Sc(i,e,n){const r=Ge(i),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((y,p)=>{f.push(r.pu(p,e,n).then((x=>{if((x||n)&&r.isPrimaryClient){const _=x?!x.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(x){l.push(x);const _=Ip.As(p.targetId,x);u.push(_)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(p,x){const _=Ge(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>he.forEach(x,(A=>he.forEach(A.Es,(U=>_.persistence.referenceDelegate.addReference(T,A.targetId,U))).next((()=>he.forEach(A.ds,(U=>_.persistence.referenceDelegate.removeReference(T,A.targetId,U)))))))))}catch(T){if(!Bl(T))throw T;Ae(kp,"Failed to update sequence numbers: "+T)}for(const T of x){const A=T.targetId;if(!T.fromCache){const U=_.Ms.get(A),K=U.snapshotVersion,W=U.withLastLimboFreeSnapshotVersion(K);_.Ms=_.Ms.insert(A,W)}}})(r.localStore,u))}async function v4(i,e){const n=Ge(i);if(!n.currentUser.isEqual(e)){Ae(zp,"User change. New user:",e.toKey());const r=await s1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((y=>{y.forEach((p=>{p.reject(new Ne(ue.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sc(n,r.Ls)}}function b4(i,e){const n=Ge(i),r=n.Au.get(e);if(r&&r.hu)return rt().add(r.key);{let l=rt();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const y=n.Tu.get(f);l=l.unionWith(y.view.nu)}return l}}function E1(i){const e=Ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=v1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p4.bind(null,e),e.Pu.H_=s4.bind(null,e.eventManager),e.Pu.yu=i4.bind(null,e.eventManager),e}function _4(i){const e=Ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y4.bind(null,e),e}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Sj(this.persistence,new wj,e.initialUser,this.serializer)}Cu(e){return new n1(Rp.mi,this.serializer)}Du(e){return new kj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class w4 extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ft(this.persistence.referenceDelegate instanceof Md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new n1((r=>Md.mi(r,n)),this.serializer)}}class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v4.bind(null,this.syncEngine),await e4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new n4})()}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),r=(function(u){return new Lj(u)})(e.databaseInfo);return(function(u,f,y,p){return new Bj(u,f,y,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,f,y){return new Hj(r,l,u,f,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yv(this.syncEngine,n,0)),(function(){return zv.v()?new zv:new Dj})())}createSyncEngine(e,n){return(function(l,u,f,y,p,x,_){const T=new o4(l,u,f,y,p,x);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ge(n);Ae(ja,"RemoteStore shutting down."),r.Ea.add(5),await Tc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="FirestoreClient";class E4{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Ae(Lr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Ae(Lr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wm(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(Lr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await s1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function $v(i,e){i.asyncQueue.verifyOperationInProgress();const n=await T4(i);Ae(Lr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>qv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>qv(e.remoteStore,l))),i._onlineComponents=e}async function T4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(Lr,"Using user provided OfflineComponentProvider");try{await wm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Cl("Error using user provided cache. Falling back to memory cache: "+n),await wm(i,new Vd)}}else Ae(Lr,"Using default OfflineComponentProvider"),await wm(i,new w4(void 0));return i._offlineComponents}async function S1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(Lr,"Using user provided OnlineComponentProvider"),await $v(i,i._uninitializedComponentsProvider._online)):(Ae(Lr,"Using default OnlineComponentProvider"),await $v(i,new tp))),i._onlineComponents}function S4(i){return S1(i).then((e=>e.syncEngine))}async function np(i){const e=await S1(i),n=e.eventManager;return n.onListen=c4.bind(null,e.syncEngine),n.onUnlisten=h4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f4.bind(null,e.syncEngine),n}function N4(i,e,n={}){const r=new Rr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,y,p,x){const _=new T1({next:A=>{_.Nu(),f.enqueueAndForget((()=>m1(u,T))),A.fromCache&&p.source==="server"?x.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),T=new p1(y,_,{includeMetadataChanges:!0,qa:!0});return f1(u,T)})(await np(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firestore.googleapis.com",Xv=!0;class Wv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A1,this.ssl=Xv}else this.host=e.host,this.ssl=e.ssl??Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rj)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new DN;switch(r.type){case"firstParty":return new LN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Qv.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),Qv.delete(n),r.terminate())})(this),Promise.resolve()}}function A4(i,e,n,r={}){i=Jn(i,th);const l=Vl(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;l&&(xb(`https://${y}`),vb("Firestore",!0)),u.host!==A1&&u.host!==y&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:y,ssl:l,emulatorOptions:r};if(!Ea(p,f)&&(i._setSettings(p),r.mockUserToken)){let x,_;if(typeof r.mockUserToken=="string")x=r.mockUserToken,_=En.MOCK_USER;else{x=z2(r.mockUserToken,i._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new En(T)}i._authCredentials=new MN(new f_(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_c(n,qt._jsonSchema))return new qt(e,r||null,new Oe(At.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:en("string",qt._jsonSchemaVersion),referencePath:en("string")};class Ir extends Br{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Oe(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function yt(i,e,...n){if(i=Ht(i),m_("collection","path",e),i instanceof th){const r=At.fromString(e,...n);return uv(r),new Ir(i,null,r)}{if(!(i instanceof qt||i instanceof Ir))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(At.fromString(e,...n));return uv(r),new Ir(i.firestore,null,r)}}function It(i,e,...n){if(i=Ht(i),arguments.length===1&&(e=xp.newId()),m_("doc","path",e),i instanceof th){const r=At.fromString(e,...n);return cv(r),new qt(i,null,new Oe(r))}{if(!(i instanceof qt||i instanceof Ir))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(At.fromString(e,...n));return cv(r),new qt(i.firestore,i instanceof Ir?i.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class Jv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r1(this,"async_queue_retry"),this._c=()=>{const r=_m();r&&Ae(Zv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;Ae(Zv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",eb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Lp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Be(47125,{Pc:eb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Vi extends th{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new Jv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jv(e),this._firestoreClient=void 0,await e}}}function j4(i,e){const n=typeof i=="object"?i:Eb(),r=typeof i=="string"?i:jd,l=op(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=P2("firestore");u&&A4(l,...u)}return l}function nh(i){if(i._terminated)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||C4(i),i._firestoreClient}function C4(i){const e=i._freezeSettings(),n=(function(l,u,f,y){return new eA(l,u,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,N1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new E4(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(xn.fromBase64String(e))}catch(n){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,ps._jsonSchema))return ps.fromBase64String(e.bytes)}}ps._jsonSchemaVersion="firestore/bytes/1.0",ps._jsonSchema={type:en("string",ps._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(_c(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:en("string",ri._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ai(e.vectorValues);throw new Ne(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ai._jsonSchemaVersion="firestore/vectorValue/1.0",ai._jsonSchema={type:en("string",ai._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^__.*__$/;class I4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new wc(e,this.data,n,this.fieldTransforms)}}class j1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:i})}}class Hp{constructor(e,n,r,l,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ld(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(C1(this.Ac)&&R4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class k4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zd(e)}Cc(e,n,r,l=!1){return new Hp({Ac:e,methodName:n,Dc:r,path:gn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ac(i){const e=i._freezeSettings(),n=Zd(i._databaseId);return new k4(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Fp(i,e,n,r,l,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,l);Gp("Data must be an object, but it was:",f,r);const y=k1(r,f);let p,x;if(u.merge)p=new Zn(f.fieldMask),x=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const A=sp(e,T,n);if(!f.contains(A))throw new Ne(ue.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);M1(_,A)||_.push(A)}p=new Zn(_),x=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,x=f.fieldTransforms;return new I4(new zn(y),p,x)}class sh extends qp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function R1(i,e,n,r){const l=i.Cc(1,e,n);Gp("Data must be an object, but it was:",l,r);const u=[],f=zn.empty();Ur(r,((p,x)=>{const _=Yp(e,p,n);x=Ht(x);const T=l.yc(_);if(x instanceof sh)u.push(_);else{const A=jc(x,T);A!=null&&(u.push(_),f.set(_,A))}}));const y=new Zn(u);return new j1(f,y,l.fieldTransforms)}function I1(i,e,n,r,l,u){const f=i.Cc(1,e,n),y=[sp(e,r,n)],p=[l];if(u.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)y.push(sp(e,u[A])),p.push(u[A+1]);const x=[],_=zn.empty();for(let A=y.length-1;A>=0;--A)if(!M1(x,y[A])){const U=y[A];let K=p[A];K=Ht(K);const W=f.yc(U);if(K instanceof sh)x.push(U);else{const O=jc(K,W);O!=null&&(x.push(U),_.set(U,O))}}const T=new Zn(x);return new j1(_,T,f.fieldTransforms)}function D4(i,e,n,r=!1){return jc(n,i.Cc(r?4:3,e))}function jc(i,e){if(D1(i=Ht(i)))return Gp("Unsupported field value:",e,i),k1(i,e);if(i instanceof qp)return(function(r,l){if(!C1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const y of r){let p=jc(y,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EA(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Rt.fromDate(r);return{timestampValue:Dd(l.serializer,u)}}if(r instanceof Rt){const u=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dd(l.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:$_(l.serializer,r._byteString)};if(r instanceof qt){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:jp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof ai)return(function(f,y){return{mapValue:{fields:{[E_]:{stringValue:T_},[Cd]:{arrayValue:{values:f.toArray().map((x=>{if(typeof x!="number")throw y.Sc("VectorValues must only contain numeric values.");return Sp(y.serializer,x)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${qd(r)}`)})(i,e)}function k1(i,e){const n={};return y_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(i,((r,l)=>{const u=jc(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function D1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Rt||i instanceof ri||i instanceof ps||i instanceof qt||i instanceof qp||i instanceof ai)}function Gp(i,e,n){if(!D1(n)||!p_(n)){const r=qd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function sp(i,e,n){if((e=Ht(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return Yp(i,e);throw Ld("Field path arguments must be of type string or ",i,!1,void 0,n)}const M4=new RegExp("[~\\*/\\[\\]]");function Yp(i,e,n){if(e.search(M4)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Nc(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ld(i,e,n,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${l}`),p+=")"),new Ne(ue.INVALID_ARGUMENT,y+i+p)}function M1(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ih("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O4 extends O1{data(){return super.data()}}function ih(i,e){return typeof e=="string"?Yp(i,e):e instanceof Nc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kp{}class L1 extends Kp{}function Rn(i,e,...n){let r=[];e instanceof Kp&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((p=>p instanceof $p)).length,y=u.filter((p=>p instanceof rh)).length;if(f>1||f>0&&y>0)throw new Ne(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class rh extends L1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rh(e,n,r)}_apply(e){const n=this._parse(e);return P1(e._query,n),new Br(e.firestore,e.converter,Gm(e._query,n))}_parse(e){const n=Ac(e.firestore);return(function(u,f,y,p,x,_,T){let A;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){sb(T,_);const K=[];for(const W of T)K.push(nb(p,u,W));A={arrayValue:{values:K}}}else A=nb(p,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||sb(T,_),A=D4(y,f,T,_==="in"||_==="not-in");return Jt.create(x,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function V4(i,e,n){const r=e,l=ih("where",i);return rh._create(l,r,n)}class $p extends Kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $p(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Is.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const y=u.getFlattenedFilters();for(const p of y)P1(f,p),f=Gm(f,p)})(e._query,n),new Br(e.firestore,e.converter,Gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qp extends L1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qp(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dc(u,f)})(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new ql(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function Bn(i,e="asc"){const n=e,r=ih("orderBy",i);return Qp._create(r,n)}function nb(i,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k_(e)&&n.indexOf("/")!==-1)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!Oe.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xv(i,new Oe(r))}if(n instanceof qt)return xv(i,n._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(n)}.`)}function sb(i,e){if(!Array.isArray(i)||i.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function P1(i,e){const n=(function(l,u){for(const f of l)for(const y of f.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class L4{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[Cd].arrayValue?.values?.map((r=>Bt(r.doubleValue)));return new ai(n)}convertGeoPoint(e){return new ri(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);ft(e1(r),9688,{name:e});const l=new cc(r.get(1),r.get(3)),u=new Oe(r.popFirst(5));return l.isEqual(n)||Mi(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends O1{constructor(e,n,r,l,u,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ih("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ba._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:en("string",ba._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class yd extends ba{data(e={}){return super.data(e)}}class _a{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Wo(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new yd(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((y=>{const p=new yd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Wo(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const p=new yd(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Wo(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,_=-1;return y.type!==0&&(x=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),_=f.indexOf(y.doc.key)),{type:P4(y.type),doc:p,oldIndex:x,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:i})}}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:en("string",_a._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class Wp extends L4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function U4(i){i=Jn(i,Br);const e=Jn(i.firestore,Vi),n=nh(e),r=new Wp(e);return V1(i._query),N4(n,i._query).then((l=>new _a(e,r,i,l)))}function z4(i,e,n){i=Jn(i,qt);const r=Jn(i.firestore,Vi),l=Xp(i.converter,e,n);return Cc(r,[Fp(Ac(r),"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,Cn.none())])}function es(i,e,n,...r){i=Jn(i,qt);const l=Jn(i.firestore,Vi),u=Ac(l);let f;return f=typeof(e=Ht(e))=="string"||e instanceof Nc?I1(u,"updateDoc",i._key,e,n,r):R1(u,"updateDoc",i._key,e),Cc(l,[f.toMutation(i._key,Cn.exists(!0))])}function oi(i){return Cc(Jn(i.firestore,Vi),[new Xd(i._key,Cn.none())])}function Cs(i,e){const n=Jn(i.firestore,Vi),r=It(i),l=Xp(i.converter,e);return Cc(n,[Fp(Ac(i.firestore),"addDoc",r._key,l,i.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then((()=>r))}function yn(i,...e){i=Ht(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tb(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tb(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let u,f,y;if(i instanceof qt)f=Jn(i.firestore,Vi),y=Tp(i._key.path),u={next:p=>{e[r]&&e[r](B4(f,i,p))},error:e[r+1],complete:e[r+2]};else{const p=Jn(i,Br);f=Jn(p.firestore,Vi),y=p._query;const x=new Wp(f);u={next:_=>{e[r]&&e[r](new _a(f,x,p,_))},error:e[r+1],complete:e[r+2]},V1(i._query)}return(function(x,_,T,A){const U=new T1(A),K=new p1(_,U,T);return x.asyncQueue.enqueueAndForget((async()=>f1(await np(x),K))),()=>{U.Nu(),x.asyncQueue.enqueueAndForget((async()=>m1(await np(x),K)))}})(nh(f),y,l,u)}function Cc(i,e){return(function(r,l){const u=new Rr;return r.asyncQueue.enqueueAndForget((async()=>m4(await S4(r),l,u))),u.promise})(nh(i),e)}function B4(i,e,n){const r=n.docs.get(e._key),l=new Wp(i);return new ba(i,l,e._key,r,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,n,r){this._verifyNotCommitted();const l=Em(e,this._firestore),u=Xp(l.converter,n,r),f=Fp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,Cn.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const u=Em(e,this._firestore);let f;return f=typeof(n=Ht(n))=="string"||n instanceof Nc?I1(this._dataReader,"WriteBatch.update",u._key,n,r,l):R1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Em(e,this._firestore);return this._mutations=this._mutations.concat(new Xd(n._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Em(i,e){if((i=Ht(i)).firestore!==e)throw new Ne(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(i){return nh(i=Jn(i,Vi)),new q4(i,(e=>Cc(i,e)))}(function(e,n=!0){(function(l){Ul=l})(Ll),jl(new Ta("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),y=new Vi(new ON(r.getProvider("auth-internal")),new PN(f,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(x.options.projectId,_)})(f,l),f);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),jr(rv,av,e),jr(rv,av,"esm2020")})();const F4={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},U1=wb(F4),ts=CN(U1),Ve=j4(U1),Tm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function G4(){const[i,e]=Q.useState(!0),[n,r]=Q.useState(""),[l,u]=Q.useState(""),[f,y]=Q.useState(""),[p,x]=Q.useState(""),[_,T]=Q.useState(!1),A=async W=>{W.preventDefault(),y(""),x(""),T(!0);try{if(i)await mS(ts,n,l);else{const se=(await fS(ts,n,l)).user;await z4(It(Ve,"users",se.uid),{email:se.email,role:"user",createdAt:new Date().toISOString()}),x("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(O){y(K(O.code))}finally{T(!1)}},U=async()=>{if(!n){y("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await hS(ts,n),x("ifre sfrlama balants e-posta adresinize gnderildi."),y("")}catch(W){y(K(W.code))}},K=W=>{switch(W){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+W}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),p&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:p}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Tm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:n,onChange:W=>r(W.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(Tm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:l,onChange:W=>u(W.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:U,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(Tm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const br={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},Y4=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,n=600,r=20,l=Math.max(...i.map(y=>y.value))||100,u=i.map((y,p)=>{const x=i.length>1?p/(i.length-1)*(n-r*2)+r:n/2,_=e-r-y.value/l*(e-r*2),T=isNaN(x)?r:x,A=isNaN(_)?e-r:_;return`${T},${A}`}).join(" "),f=`${u} ${n-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:u,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((y,p)=>{const x=i.length>1?p/(i.length-1)*(n-r*2)+r:n/2,_=e-r-y.value/l*(e-r*2),T=isNaN(x)?r:x,A=isNaN(_)?e-r:_;return c.jsx("circle",{cx:T,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},p)})]})},ad=({title:i,value:e,subtext:n,icon:r,color:l})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(br.TrendingUp,{})," ",n]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${l}`,children:c.jsx(r,{})})]});function ib({onNavigate:i=()=>{}}){const[e,n]=Q.useState(null),[r,l]=Q.useState(!0),[u,f]=Q.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[y,p]=Q.useState([]),[x,_]=Q.useState([]),[T,A]=Q.useState([]),[U,K]=Q.useState([]);return Q.useEffect(()=>{const W=ts.onAuthStateChanged(fe=>{n(fe),l(!1)}),O=yn(Rn(yt(Ve,"siparisler"),Bn("createdAt","desc")),fe=>{const xe=fe.docs.map(N=>N.data());_(xe.slice(0,5));const me={};xe.forEach(N=>{const j=N.date?N.date.slice(0,7):"N/A";me[j]=(me[j]||0)+1});const C=Object.entries(me).map(([N,j])=>({label:N,value:j})).sort((N,j)=>N.label.localeCompare(j.label));K(C),f(N=>({...N,activeOrders:xe.length}))}),se=yn(yt(Ve,"teklifler"),fe=>{f(xe=>({...xe,pendingProposals:fe.size}))}),ne=yn(yt(Ve,"employees"),fe=>{const xe=fe.docs.map(N=>N.data());f(N=>({...N,totalWorkers:xe.length}));const me=new Date().toISOString().split("T")[0],C=xe.filter(N=>{const j=N.attendance?.[me];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});p(C)}),pe=yn(yt(Ve,"inventory_movements"),fe=>{const xe=fe.docs.map(N=>N.data()),me={};xe.forEach(N=>{const j=Number(N.quantity)||0,k=N.action==="add"?j:-j;me[N.productName]||(me[N.productName]=0),me[N.productName]+=k});const C=Object.entries(me).filter(([N,j])=>j<100).map(([N,j])=>({name:N,qty:j}));A(C.slice(0,5)),f(N=>({...N,inventoryCount:Object.keys(me).length}))});return()=>{W(),O(),se(),ne(),pe()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(br.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(ad,{title:"Aktif Sipariler",value:u.activeOrders,subtext:"Geen aya gre art",icon:br.Cart,color:"bg-indigo-600"}),c.jsx(ad,{title:"Bekleyen Teklifler",value:u.pendingProposals,subtext:"Onay bekleyen",icon:br.Document,color:"bg-purple-600"}),c.jsx(ad,{title:"Toplam Stok Kalemi",value:u.inventoryCount,subtext:"Kritik seviye kontrol",icon:br.Box,color:"bg-emerald-600"}),c.jsx(ad,{title:"Toplam Personel",value:u.totalWorkers,subtext:"Aktif alan",icon:br.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(Y4,{data:U})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((W,O)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",W.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",W.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:W.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},O)),x.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(br.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:y.length>0?y.map((W,O)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:W.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:W.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:W.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},O)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(br.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:T.length>0?T.map((W,O)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:W.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[W.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},O)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Se={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Tt=db.forwardRef(({className:i="",...e},n)=>c.jsx("input",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),K4=db.forwardRef(({className:i="",...e},n)=>c.jsx("textarea",{ref:n,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),Nt=({children:i,variant:e="primary",className:n="",...r})=>{const l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${l[e]}
        ${n}
      `,...r,children:i})},z1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),wa=({options:i,selected:e,onChange:n,placeholder:r="Seiniz...",isMulti:l=!1,onDeleteItem:u=null,allowNew:f=!1})=>{const[y,p]=Q.useState(!1),[x,_]=Q.useState(""),T=Q.useRef(null);Q.useEffect(()=>{const O=se=>{T.current&&!T.current.contains(se.target)&&p(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const A=O=>{if(l){const se=e.includes(O)?e.filter(ne=>ne!==O):[...e,O];n(se)}else n(O),p(!1),_("")},U=O=>{_(O.target.value),f&&n(O.target.value)},K=l?e.length>0?`(${e.length})`:"":e||r,W=i.filter(O=>O.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":x.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:T,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Tt,{placeholder:r,value:e,onChange:U,onFocus:()=>p(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>p(!y),children:c.jsx(Se.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>p(!y),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${l&&e.length>0||!l&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[l&&c.jsx(Se.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:l?`${r} ${K}`:K})]}),c.jsx(Se.ChevronDown,{})]}),y&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:x,onChange:O=>_(O.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[W.map(O=>{const se=l?e.includes(O):e===O;return c.jsxs("div",{onClick:()=>f?n(O):A(O),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${se?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[l&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${se?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:se&&c.jsx(Se.Check,{})}),c.jsx("span",{className:"truncate",children:O})]}),u&&c.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),u(O)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Se.Trash,{})})]},O)}),W.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),l&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>n([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Ca=({isOpen:i,onClose:e,title:n,children:r,maxWidth:l="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${l} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,Ol=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),ah=({startDate:i,endDate:e,onStartChange:n,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:l=>n(l.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:l=>r(l.target.value)})]}),lh=i=>i==="USD"?"$":i==="EUR"?"":"",Tn=(i,e="TRY")=>{const n=lh(e);return new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" "+n},Sm=i=>i===""?"":new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),$4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",Nm=i=>{if(!i)return"-";const e=new Date(i);return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear()).slice(2)}`},mc=i=>{const e=parseFloat(i.qty)||0,n=parseFloat(i.unitPrice)||0,r=parseFloat(i.vatRate)||0,l=e*n,u=l*(r/100);return l+u},Am=i=>{if(!i)return{subtotal:0,totalVAT:0,grandTotal:0};const e=i.reduce((r,l)=>r+(parseFloat(l.qty)||0)*(parseFloat(l.unitPrice)||0),0),n=i.reduce((r,l)=>r+mc(l),0);return{subtotal:e,totalVAT:n-e,grandTotal:n}},B1=i=>i?i.reduce((e,n)=>e+mc(n),0):0,Q4=(i,e)=>{const n=e.filter(l=>l.customerId===i);let r=0;return n.forEach(l=>{if(l.type==="payment"){const u=parseFloat(l.amount)||0;l.direction==="in"?r-=u:r+=u}else{const u=B1(l.items);l.transactionType==="purchase"?r-=u:r+=u}}),r},q1=(i,e)=>{let n=e.filter(u=>u.customerId===i);n.sort((u,f)=>new Date(u.date)-new Date(f.date));let r=0;const l=[];return n.forEach(u=>{if(u.type==="payment"){const f=parseFloat(u.amount)||0,y=u.direction==="out";y?r+=f:r-=f;let p=u.paymentMethod||"-";p==="Kredi Kart"&&(p="KrediK"),l.push({docNo:u.docNo||"-",date:u.date,action:y?"DEME":"TAHSLAT",type:p,note:u.note||"",ek:"-",desc:"",qty:"-",unitPrice:"-",borc:y?f:0,alacak:y?0:f,balance:r})}else{const f=u.transactionType==="purchase",y=f?"ALI":"SATI";u.items?.forEach(p=>{const x=mc(p);f?r-=x:r+=x,l.push({docNo:u.docNo,date:u.date,action:y,type:"-",note:u.note||"",ek:p.ek||"",desc:p.name,qty:p.qty,unitPrice:p.unitPrice,borc:f?0:x,alacak:f?x:0,balance:r})})}}),l},X4=(i,e)=>{const n=q1(i.id,e),r=i.currency||"TRY",l=lh(r);let u="data:text/csv;charset=utf-8,\uFEFF";u+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (A),Tutar (B),Bakiye
`,n.forEach(p=>{const x=A=>Tn(Math.abs(A),r).replace(l,"").trim(),_=(p.balance<0?"-":"")+x(p.balance),T=[`"${p.date}"`,`"${p.docNo}"`,`"${p.action}"`,`"${p.type}"`,`"${p.note}"`,`"${p.ek}"`,`"${p.desc}"`,`"${p.qty}"`,`"${p.unitPrice!=="-"?x(parseFloat(p.unitPrice)):"-"}"`,`"${x(p.borc)}"`,`"${x(p.alacak)}"`,`"${_}"`].join(",");u+=T+`
`});const f=encodeURI(u),y=document.createElement("a");y.setAttribute("href",f),y.setAttribute("download",`${i.name}_Ekstre.csv`),document.body.appendChild(y),y.click(),document.body.removeChild(y)},rb=(i,e,n,r=null)=>{const l=q1(i.id,e),u=i.currency||"TRY",f=l.filter(U=>r?U.docNo===r:!(n.start&&U.date<n.start||n.end&&U.date>n.end)),y=[];let p=null;f.forEach(U=>{(!p||p.docNo!==U.docNo||p.action!==U.action)&&(p&&y.push(p),p={docNo:U.docNo,date:U.date,action:U.action,type:U.type,items:[]}),p.items.push(U)}),p&&y.push(p);const x=window.open("","","height=800,width=1000");if(!x)return;const _=f.length>0?f[f.length-1].balance:0,T=r?f.reduce((U,K)=>U+(K.borc||0)+(K.alacak||0),0):0,A=`
    <html><head><title>Ekstre - ${i.name}</title>
    <style>
      @page { size: A4; margin: 5mm; }
        body { 
          font-family: 'Helvetica', sans-serif; 
          color: #000; 
          font-size: 10px;
          margin-top: 100px;
        }        
      /* Header */
      .header { position: absolute; top: 0; left: 0; right: 0; height: 90px; display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 5px; }
      .company-info h1 { font-size: 16pt; font-weight: bold; margin: 0 0 5px 0; }
      .company-info p { margin: 0; font-size: 9pt; color: #333; }
      .report-info { text-align: right; }
      .report-info h2 { font-size: 14pt; margin: 0 0 5px 0; color: #4f46e5; }
      
      /* Transaction Group Styling */
      .osman {margin-top: 100px;}
      
      .transaction-block { margin-bottom: 20px; }
      
      .transaction-header {
          background-color: #e5e7eb;
          border: 1px solid #999;
          border-bottom: none;
          padding: 8px;
          font-size: 11pt;
          font-weight: bold;
          display: flex;
          gap: 30px;
          page-break-after: avoid;
      }

      /* Table Styling */
      table { width: 100%; border-collapse: collapse; table-layout: fixed; border: 1px solid #999; }
      
      /* THEAD repetition */
      thead { display: table-header-group; }
      tr { page-break-inside: avoid; }
      
      th { 
          background-color: #f3f4f6; 
          border-bottom: 1px solid #999; 
          padding: 5px; 
          text-align: left; 
          font-weight: bold; 
          font-size: 9pt;
      }
      
      td { 
          border-bottom: 1px solid #ccc; 
          padding: 5px; 
          vertical-align: top; 
          font-size: 9pt;
      }

      .right { text-align: right; }
      .bold { font-weight: bold; }
      .col-desc { white-space: normal; overflow-wrap: break-word; }
      
      /* Footer Balance */
      .balance-container {
         margin-top: 20px; 
         text-align: right; 
         font-size: 12pt;
         border-top: 2px solid #000;
         padding-top: 10px;
         page-break-inside: avoid;
      }
    </style>
    </head><body>
      <div class="header">
        <div class="company-info">
          <h1>ERCELEBILER AHSAP</h1>
          <p>YAVUZ SELM MAH. YUSUF GUNAY CAD. NO:14 TOSYA/KASTAMONU</p>
          <p>0 (533) 375 9293 - 0 (534) 406 5959</p>
        </div>
        <div class="report-info">
          <h2>${r?"LEM DETAYI":"HESAP EKSTRES"}</h2>
          <p>Sayn: <strong>${i.name}</strong></p>
          <p>${r?`Belge: #${r}`:(n.start?`${Nm(n.start)} - `:"")+(n.end?Nm(n.end):"Tm")}</p>
        </div>
      </div>

      <!-- LOOP THROUGH GROUPS -->
        ${y.map(U=>{const K=U.action.includes("DEME")||U.action.includes("TAHSLAT");return`
            <div class="transaction-block">
                <!-- 1. GRUP BALII -->
                <div class="transaction-header">
                    ${`TARIH : ${Nm(U.date)} <span style="color:#999; margin:0 5px;">|</span> BELGE : #${U.docNo} <span style="color:#999; margin:0 5px;">|</span> LEM : ${U.action}`}
                </div>

              <!-- CONTENT TABLE -->
              <table>
                  <colgroup>
                      <col style="width: 9%;"> <!-- Tip / Ek -->
                      <col style="width: auto;"> <!-- Aklama -->
                      <col style="width: 4%;"> <!-- Miktar -->
                      <col style="width: 10%;"> <!-- B.Fiyat -->
                      ${r?"":'<col style="width: 15%;">'} <!-- deme (Hidden in single) -->
                      <col style="width: 15%;"> <!-- Tutar -->
                      ${r?"":'<col style="width: 18%;">'} <!-- Bakiye (Hidden in single) -->
                  </colgroup>
                  <thead>
                      <tr>
                          <th>TP / EK</th>
                          <th>AIKLAMA</th>
                          <th class="right">MK.</th>
                          <th class="right">B.FYAT</th>
                          ${r?"":'<th class="right">DEME (A)</th>'}
                          <th class="right">TUTAR (B)</th>
                          ${r?"":'<th class="right">BAKYE</th>'}
                      </tr>
                  </thead>
<tbody>
                        ${U.items.map(O=>{const se=O.borc>0?O.borc:O.alacak,ne=K?O.note||"":O.desc+(O.note?` - ${O.note}`:"");return`
                            <tr>
                                <td>${K?O.type:O.ek||"-"}</td>
                                <td class="col-desc">${ne}</td>
                              <td class="right">${O.qty!=="-"?O.qty:"-"}</td>
                              <td class="right">${O.unitPrice!=="-"?Tn(O.unitPrice,u).replace(lh(u),""):"-"}</td>
                              
                              ${r?"":`<td class="right" style="color:#059669">${O.alacak>0?Tn(O.alacak,u):"-"}</td>`}
                              
                              <td class="right" style="color:#dc2626">
                                 ${r?Tn(se,u):O.borc>0?Tn(O.borc,u):"-"}
                              </td>
                              
                              ${r?"":`
                                  <td class="right bold" style="color:${O.balance>0?"#dc2626":"#059669"}">
                                      ${Tn(Math.abs(O.balance),u)} ${O.balance>0?"(B)":"(A)"}
                                  </td>
                              `}
                          </tr>
                          `}).join("")}
                  </tbody>
              </table>
          </div>
          `}).join("")}

      <div class="balance-container">
         <strong>${r?"TOPLAM LEM TUTARI":"GENEL BAKYE"}: </strong> 
         <span style="font-weight: bold; margin-left: 10px; color:${(r?T:_)>0?"#dc2626":"#059669"}">
           ${r?Tn(T,u):(_<0?"-":"")+Tn(Math.abs(_),u)+(_>0?" (Bor)":" (Alacak)")}
         </span>
      </div>
    </body></html>
  `;x.document.write(A),setTimeout(()=>{x.document.close(),x.print()},500)};function W4(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState([]),[p,x]=Q.useState(!1),[_,T]=Q.useState({start:"",end:""}),[A,U]=Q.useState({}),[K,W]=Q.useState({}),[O,se]=Q.useState(!1),[ne,pe]=Q.useState(!1),[fe,xe]=Q.useState(!1),[me,C]=Q.useState(null),[N,j]=Q.useState(null),[k,R]=Q.useState(null),[V,I]=Q.useState(null),[le,Ie]=Q.useState({docNo:"",transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[H,B]=Q.useState({name:"",company:"",phone:"",email:"",currency:"TRY"}),[ee,be]=Q.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),[je,E]=Q.useState(null);if(Q.useEffect(()=>{const te=ts.onAuthStateChanged(He=>{e(He),r(!1)}),De=Rn(yt(Ve,"customers"),Bn("createdAt","desc")),et=yn(De,He=>{u(He.docs.map(St=>({id:St.id,...St.data()})))}),ut=Rn(yt(Ve,"sales"),Bn("createdAt","desc")),vn=yn(ut,He=>{y(He.docs.map(St=>({id:St.id,...St.data()})))});return()=>{te(),et(),vn()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Se.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const P=te=>{U(De=>({...De,[te]:!De[te]}))},Z=te=>E(te),M=te=>te.preventDefault(),ie=te=>{if(je===null)return;const De=[...le.items],et=De[je];De.splice(je,1),De.splice(te,0,et),Ie({...le,items:De}),E(null)},ge=()=>{R(null),B({name:"",company:"",phone:"",email:"",currency:"TRY"}),pe(!0)},_e=te=>{R(te),B({name:te.name,company:te.company,phone:te.phone,email:te.email,currency:te.currency||"TRY"}),pe(!0)},Ue=async te=>{te.preventDefault();try{const De={...H,updatedAt:new Date().toISOString()};k?await es(It(Ve,"customers",k.id),De):await Cs(yt(Ve,"customers"),{...De,createdAt:new Date().toISOString()}),pe(!1)}catch(De){alert("Hata: "+De.message)}},Le=async te=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await oi(It(Ve,"customers",te))},re=te=>{C(te),I(null);const De="TH-"+Date.now().toString().slice(-6);be({docNo:De,amount:0,formattedAmount:Sm(0),type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),xe(!0)},we=(te,De)=>{C(De),I(te),be({docNo:te.docNo||"",amount:te.amount,formattedAmount:Sm(te.amount),type:te.paymentMethod,direction:te.direction||"in",note:te.note,date:te.date}),xe(!0)},Te=te=>{const De=te.target.value.replace(/\D/g,""),et=De===""?0:parseInt(De,10)/100;be({...ee,amount:et,formattedAmount:Sm(et)})},$=async te=>{if(te.preventDefault(),!!me)try{const De={customerId:me.id,type:"payment",docNo:ee.docNo,amount:parseFloat(ee.amount),paymentMethod:ee.type,direction:ee.direction,note:ee.note,date:ee.date,createdAt:V?V.createdAt:new Date().toISOString()};V?await es(It(Ve,"sales",V.id),De):await Cs(yt(Ve,"sales"),De),xe(!1)}catch(De){alert("Hata: "+De.message)}},ye=te=>{C(te),j(null);const De="DOC-"+Date.now().toString().slice(-6);Ie({docNo:De,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),se(!0)},oe=(te,De)=>{C(De),j(te);const et=(te.items||[]).map(ut=>({...ut,ek:ut.ek||""}));Ie({docNo:te.docNo,transactionType:te.transactionType||"sale",date:te.date,description:te.description,status:te.status,items:et}),se(!0)},Ce=async te=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await oi(It(Ve,"sales",te))}catch(De){alert("Hata: "+De.message)}},Ye=async te=>{te.preventDefault();try{const De={customerId:me.id,...le,type:"sale",createdAt:N?N.createdAt:new Date().toISOString()};N?await es(It(Ve,"sales",N.id),De):await Cs(yt(Ve,"sales"),De),se(!1)}catch(De){alert("Hata: "+De.message)}},Ee=(te,De,et)=>{const ut=[...le.items];ut[te][De]=et,Ie({...le,items:ut})},Xe=()=>Ie({...le,items:[...le.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Je=te=>Ie({...le,items:le.items.filter((De,et)=>et!==te)});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(ah,{startDate:_.start,endDate:_.end,onStartChange:te=>T({..._,start:te}),onEndChange:te=>T({..._,end:te})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(z1,{checked:p,onChange:x,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:ge,className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Se.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:l.map(te=>{const De=f.filter(He=>{const St=He.customerId===te.id;let bn=!0;return _.start&&He.date<_.start&&(bn=!1),_.end&&He.date>_.end&&(bn=!1),St&&bn}).sort((He,St)=>new Date(St.date)-new Date(He.date)),et=Q4(te.id,f),ut=A[te.id],vn=te.currency||"TRY";return c.jsxs(Ol,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>P(te.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Se.User,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:te.name}),c.jsx("button",{onClick:He=>{He.stopPropagation(),_e(te)},className:"text-gray-400 hover:text-indigo-500 transition-colors",children:c.jsx(Se.Edit,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:te.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:ut?c.jsx(Se.ChevronDown,{className:"transform rotate-180"}):c.jsx(Se.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${et>0?"text-emerald-600":"text-red-500"}`,children:Tn(et,vn)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:et>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Nt,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>re(te),children:[c.jsx(Se.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(Nt,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>ye(te),children:[c.jsx(Se.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>rb(te,f,_),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Se.Printer,{})}),c.jsx("button",{onClick:()=>X4(te,f),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Se.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Le(te.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Se.Trash,{})})]})]})]})]}),ut&&c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:De.map(He=>{const St=He.type==="payment",bn=He.transactionType==="purchase",In=He.direction==="out",zi=St?He.amount:B1(He.items),qr=K[He.id];let ci="",on="",Mt="bg-indigo-400",cn=`SATI #${He.docNo}`,wt="+";return St?In?(cn="DEME YAPILDI",ci="bg-red-50/30",on="text-red-500",Mt="bg-red-400",wt="+"):(cn="DEME ALINDI",ci="bg-emerald-50/30",on="text-emerald-600",Mt="bg-emerald-400",wt="-"):bn?(ci="bg-red-50/30",on="text-red-500",Mt="bg-red-400",cn=`ALI #${He.docNo}`,wt="-"):(on="text-emerald-600",Mt="bg-emerald-400",wt="+"),c.jsxs("div",{className:`border-b border-gray-50 hover:bg-white transition-colors group ${ci}`,children:[c.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Mt}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:cn}),St&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:He.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:$4(He.date)})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[c.jsx("p",{className:"text-xs text-gray-500 truncate",children:St?He.note||"-":`${He.items?.length||0} Kalem rn`}),!St&&c.jsxs("button",{onClick:()=>W(qn=>({...qn,[He.id]:!qn[He.id]})),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-0.5 bg-indigo-50 px-1.5 rounded cursor-pointer transition-colors ml-2",children:[qr?c.jsx(Se.ChevronDown,{className:"w-3 h-3 transform rotate-180"}):c.jsx(Se.ChevronDown,{className:"w-3 h-3"})," erik"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${on}`,children:[wt,Tn(zi,vn)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>rb(te,f,_,He.docNo),className:"p-1.5 text-gray-400 hover:text-indigo-600",children:c.jsx(Se.Printer,{})}),St?c.jsx("button",{onClick:()=>we(He,te),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Se.Edit,{})}):c.jsx("button",{onClick:()=>oe(He,te),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Se.Edit,{})}),c.jsx("button",{onClick:()=>Ce(He.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Se.Trash,{})})]})]})]}),qr&&!St&&c.jsx("div",{className:"px-12 pb-4 pt-1 bg-white/50",children:c.jsx("div",{className:"bg-white border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-400 border-b border-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-1.5 px-3 font-semibold w-24",children:"Ek"}),c.jsx("th",{className:"py-1.5 px-3 font-semibold",children:"rn"}),c.jsx("th",{className:"py-1.5 px-3 text-center font-semibold",children:"Miktar"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Fiyat"}),c.jsx("th",{className:"py-1.5 px-3 text-right font-semibold",children:"Toplam"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:He.items?.map((qn,Bi)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"py-1.5 px-3 text-gray-400",children:qn.ek||"-"}),c.jsx("td",{className:"py-1.5 px-3 font-medium text-gray-700",children:qn.name}),c.jsx("td",{className:"py-1.5 px-3 text-center",children:qn.qty}),c.jsx("td",{className:"py-1.5 px-3 text-right",children:Tn(qn.unitPrice,vn)}),c.jsx("td",{className:"py-1.5 px-3 text-right font-bold text-indigo-600",children:Tn(mc(qn),vn)})]},Bi))})]})})})]},He.id)})})]},te.id)})}),ne&&c.jsx(Ca,{isOpen:ne,onClose:()=>pe(!1),title:k?"Mteri Dzenle":"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:Ue,className:"space-y-4",children:[c.jsx(Tt,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:H.name,onChange:te=>B({...H,name:te.target.value})}),c.jsx(Tt,{placeholder:"Firma (Opsiyonel)",value:H.company,onChange:te=>B({...H,company:te.target.value})}),c.jsx(Tt,{placeholder:"Telefon",value:H.phone,onChange:te=>B({...H,phone:te.target.value})}),c.jsx(Tt,{placeholder:"E-Posta",value:H.email,onChange:te=>B({...H,email:te.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Para Birimi"}),c.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl gap-1",children:["TRY","USD","EUR"].map(te=>c.jsx("button",{type:"button",onClick:()=>B({...H,currency:te}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${H.currency===te?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:te},te))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(Nt,{variant:"secondary",type:"button",onClick:()=>pe(!1),children:"ptal"}),c.jsx(Nt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),fe&&c.jsxs(Ca,{isOpen:fe,onClose:()=>xe(!1),title:V?"deme Dzenle":"Tahsilat / deme",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:me?.name}),c.jsxs("form",{onSubmit:$,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>be({...ee,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${ee.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri -)"}),c.jsx("button",{type:"button",onClick:()=>be({...ee,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${ee.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k +)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(te=>c.jsx("button",{type:"button",onClick:()=>be({...ee,type:te}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${ee.type===te?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:te},te))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${ee.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00",value:ee.formattedAmount,onChange:Te}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:lh(me?.currency||"TRY")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(Tt,{placeholder:"Belge No",value:ee.docNo,onChange:te=>be({...ee,docNo:te.target.value})}),c.jsx(Tt,{type:"date",required:!0,value:ee.date,onChange:te=>be({...ee,date:te.target.value})})]}),c.jsx(Tt,{placeholder:"Not (Opsiyonel)",value:ee.note,onChange:te=>be({...ee,note:te.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(Nt,{variant:"secondary",type:"button",onClick:()=>xe(!1),children:"ptal"}),c.jsx(Nt,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),O&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:Ye,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:N?"lemi Dzenle":"Yeni lem"}),c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>Ie({...le,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${le.transactionType==="sale"?"bg-emerald-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP (+)"}),c.jsx("button",{type:"button",onClick:()=>Ie({...le,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${le.transactionType==="purchase"?"bg-red-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP (-)"})]})]}),c.jsx("button",{type:"button",onClick:()=>se(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Tt,{value:le.docNo,onChange:te=>Ie({...le,docNo:te.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Tt,{type:"date",required:!0,value:le.date,onChange:te=>Ie({...le,date:te.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Tt,{value:le.description,onChange:te=>Ie({...le,description:te.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"30px"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"auto"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"10%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{}),c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2 whitespace-nowrap",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:le.items.map((te,De)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl transition-transform duration-200",draggable:!0,onDragStart:()=>Z(De),onDragOver:M,onDrop:()=>ie(De),style:{opacity:je===De?.5:1,cursor:"move"},children:[c.jsx("td",{className:"p-2 text-center text-gray-400 hover:text-indigo-500 cursor-grab active:cursor-grabbing",children:c.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:te.ek,onChange:et=>Ee(De,"ek",et.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:te.name,onChange:et=>Ee(De,"name",et.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:te.qty,onChange:et=>Ee(De,"qty",et.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:te.unitPrice,onChange:et=>Ee(De,"unitPrice",et.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:te.vatRate,onChange:et=>Ee(De,"vatRate",et.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3 whitespace-nowrap",children:Tn(mc(te),me?.currency)}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Je(De),className:"text-gray-400 hover:text-red-500",children:c.jsx(Se.Trash,{})})})]},De))})]}),c.jsxs("button",{type:"button",onClick:()=>{if(le.items.length===0)return;const te=le.items[le.items.length-1];Ie({...le,items:[...le.items,{...te}]})},className:"w-full py-2 bg-indigo-50/50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Xe,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Tn(Am(le.items).subtotal,me?.currency)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:Tn(Am(le.items).totalVAT,me?.currency)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:Tn(Am(le.items).grandTotal,me?.currency)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>se(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const ab={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},lb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function Z4(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState([]),[p,x]=Q.useState({start:"",end:""}),[_,T]=Q.useState(!1),[A,U]=Q.useState(!1),[K,W]=Q.useState(!1),[O,se]=Q.useState({}),[ne,pe]=Q.useState({}),fe=Q.useRef(null),[xe,me]=Q.useState(null),[C,N]=Q.useState(null),[j,k]=Q.useState({en:6,boy:4}),[R,V]=Q.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=Q.useMemo(()=>f.map($=>$.name).sort(),[f]);Q.useEffect(()=>{const $=ts.onAuthStateChanged(Ee=>{e(Ee),r(!1)}),ye=Rn(yt(Ve,"customers"),Bn("name","asc")),oe=yn(ye,Ee=>{y(Ee.docs.map(Xe=>({id:Xe.id,...Xe.data()})))}),Ce=Rn(yt(Ve,"siparisler"),Bn("createdAt","desc")),Ye=yn(Ce,Ee=>{u(Ee.docs.map(Xe=>({id:Xe.id,...Xe.data()})))});return()=>{$(),oe(),Ye()}},[]);const le=Q.useMemo(()=>{const $=[...f],ye=new Set(f.map(oe=>oe.id));return l.forEach(oe=>{oe.customerId&&!ye.has(oe.customerId)&&($.find(Ce=>Ce.id===oe.customerId)||$.push({id:oe.customerId,name:oe.customerId,company:"Kaytsz (Manuel)"}))}),$.sort((oe,Ce)=>oe.name.localeCompare(Ce.name))},[l,f]);if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const Ie=i?.email==="furkan@avci.jp",H=$=>{if(!$)return;const ye=new FileReader;ye.onload=oe=>{const Ce=new Image;Ce.onload=()=>{const Ye=document.createElement("canvas"),Ee=800,Xe=800;let Je=Ce.width,te=Ce.height;Je>te?Je>Ee&&(te*=Ee/Je,Je=Ee):te>Xe&&(Je*=Xe/te,te=Xe),Ye.width=Je,Ye.height=te,Ye.getContext("2d").drawImage(Ce,0,0,Je,te);const et=Ye.toDataURL("image/jpeg",.8);V(ut=>({...ut,image:et}))},Ce.src=oe.target.result},ye.readAsDataURL($)},B=$=>{$.preventDefault(),W(!0)},ee=()=>W(!1),be=$=>{$.preventDefault(),W(!1),$.dataTransfer.files&&$.dataTransfer.files[0]&&H($.dataTransfer.files[0])},je=$=>{$.clipboardData.files&&$.clipboardData.files[0]&&H($.clipboardData.files[0])},E=()=>{me(null);const $="SP-"+Date.now().toString().slice(-6);V({siparisNo:$,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),T(!0)},P=$=>{me($);const ye=f.find(Ce=>Ce.id===$.customerId),oe=ye?ye.name:$.customerId;V({siparisNo:$.siparisNo,customerId:oe,date:$.date,note:$.note||"",image:$.image,items:$.items||[]}),T(!0)},Z=async $=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await oi(It(Ve,"siparisler",$))}catch(ye){alert(ye.message)}},M=async $=>{if($.preventDefault(),!R.customerId){alert("Ltfen mteri giriniz.");return}try{const ye=f.find(Ye=>Ye.name===R.customerId),oe=ye?ye.id:R.customerId,Ce={...R,customerId:oe,createdAt:xe?xe.createdAt:new Date().toISOString()};xe?await es(It(Ve,"siparisler",xe.id),Ce):await Cs(yt(Ve,"siparisler"),{...Ce,productionStatus:{}}),T(!1)}catch(ye){alert(ye.message)}},ie=($,ye,oe)=>{const Ce=[...R.items],Ye=Ce[$];if(Ye[ye]=oe,ye==="en1"){const Ee=parseFloat(oe);isNaN(Ee)?oe===""&&(Ye.en2=""):Ye.en2=Ee-j.en}if(ye==="boy1"){const Ee=parseFloat(oe);isNaN(Ee)?oe===""&&(Ye.boy2=""):Ye.boy2=Ee-j.boy}V({...R,items:Ce})},ge=()=>{V({...R,items:[...R.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},_e=()=>{if(R.items.length===0)return;const ye={...R.items[R.items.length-1]};V({...R,items:[...R.items,ye]})},Ue=$=>{const ye=R.items.filter((oe,Ce)=>Ce!==$);V({...R,items:ye})},Le=($,ye)=>{const oe=parseFloat(ye)||0,Ce={...j,[$]:oe};k(Ce);const Ye=R.items.map(Ee=>({...Ee,en2:Ee.en1?parseFloat(Ee.en1)-Ce.en:Ee.en2,boy2:Ee.boy1?parseFloat(Ee.boy1)-Ce.boy:Ee.boy2}));V({...R,items:Ye})},re=$=>{N($),U(!0)},we=async($,ye)=>{if(!C)return;const oe=C.productionStatus||{},Ce=oe[$]||{},Ye={...oe,[$]:{...Ce,[ye]:!Ce[ye]}};N({...C,productionStatus:Ye}),await es(It(Ve,"siparisler",C.id),{productionStatus:Ye})},Te=$=>{const ye=f.find(Ee=>Ee.id===$.customerId),oe=ye?ye.name:$.customerId||"simsiz";f.find(Ee=>Ee.id===$.customerId);const Ce=window.open("","","height=800,width=1000");if(!Ce){alert("Pop-up engelleyiciyi kapatn.");return}const Ye=`
      <html><head><title>Sipari - ${$.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 16px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: normal; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 10px; font-size: 16px; word-wrap: break-word; border: 5px solid #eee; padding: 1px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${oe}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${$.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${lb($.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${$.items.map(Ee=>`
              <tr>
                <td class="group-kasa">${Ee.en1||"-"}</td>
                <td class="group-kasa">${Ee.boy1||"-"}</td>
                <td class="group-kasa">${Ee.genislik||"-"}</td>
                <td>${Ee.takim||""}</td>
                <td class="col-desc">${Ee.aciklama||""}</td>
                <td class="group-net"><strong>${Ee.en2||""}</strong></td>
                <td class="group-net"><strong>${Ee.boy2||""}</strong></td>
                <td>${Ee.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${$.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${$.note}
          </div>
        `:""}

        ${$.image?`
          <div class="door-image-container">
            <img src="${$.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ce.document.write(Ye),Ce.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:je,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(ah,{startDate:p.start,endDate:p.end,onStartChange:$=>x({...p,start:$}),onEndChange:$=>x({...p,end:$})}),Ie&&c.jsxs("button",{onClick:E,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Se.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:le.map($=>{const ye=l.filter(oe=>{const Ce=oe.customerId===$.id;let Ye=!0;return p.start&&(Ye=Ye&&oe.date>=p.start),p.end&&(Ye=Ye&&oe.date<=p.end),Ce&&Ye});return ye.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Se.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:$.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[ye.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:ye.map(oe=>{const Ce=O[oe.id],Ye=ne[oe.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:oe.image?c.jsx("img",{src:oe.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",oe.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:lb(oe.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[oe.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>se(Ee=>({...Ee,[oe.id]:!Ee[oe.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ce?c.jsx(Se.ChevronUp,{}):c.jsx(Se.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>pe(Ee=>({...Ee,[oe.id]:!Ee[oe.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Ye?c.jsx(Se.ChevronUp,{}):c.jsx(Se.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>re(oe),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Se.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Te(oe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Se.Printer,{})}),Ie&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>P(oe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Se.Edit,{})}),c.jsx("button",{onClick:()=>Z(oe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Se.Trash,{})})]})]})]}),Ce&&c.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:[oe.note&&c.jsxs("div",{className:"mb-4 p-3 bg-white border border-gray-200 rounded-lg text-xs text-gray-600 shadow-sm",children:[c.jsx("span",{className:"font-bold text-indigo-600 block mb-1 uppercase tracking-wider",children:"Sipari Notu"}),c.jsx("p",{className:"whitespace-pre-wrap",children:oe.note})]}),c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:oe.items?.map((Ee,Xe)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Ee.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Ee.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Ee.en1||"-"," x ",Ee.boy1||"-"," x ",Ee.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Ee.en2," x ",Ee.boy2]}),c.jsx("td",{className:"py-2",children:Ee.sekil||"-"})]},Xe))})]})]}),Ye&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(ab).map(([Ee,Xe])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:Xe.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:Xe.steps.map(Je=>{const te=oe.productionStatus?.[Ee]?.[Je.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:te?"text-purple-700 font-medium":"text-gray-400",children:Je.label}),te?c.jsx(Se.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Se.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},Je.id)})})]},Ee))})})]},oe.id)})})]},$.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:M,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:xe?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:R.siparisNo,onChange:$=>V({...R,siparisNo:$.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(wa,{options:I,selected:R.customerId,onChange:$=>V({...R,customerId:$}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:$=>V({...R,date:$.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${K?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:B,onDragLeave:ee,onDrop:be,children:[c.jsx("input",{ref:fe,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:$=>H($.target.files[0])}),R.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:R.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Se.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:K?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:R.note,onChange:$=>V({...R,note:$.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:$=>Le("en",$.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:$=>Le("boy",$.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map(($,ye)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:$.en1,onChange:oe=>ie(ye,"en1",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:$.boy1,onChange:oe=>ie(ye,"boy1",oe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:$.genislik,onChange:oe=>ie(ye,"genislik",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:$.takim,onChange:oe=>ie(ye,"takim",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:$.aciklama,onChange:oe=>ie(ye,"aciklama",oe.target.value),onInput:oe=>{oe.target.style.height="auto",oe.target.style.height=oe.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${ye}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:$.sekil,onChange:oe=>ie(ye,"sekil",oe.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${ye}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:$.en2,onChange:oe=>ie(ye,"en2",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:$.boy2,onChange:oe=>ie(ye,"boy2",oe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Ue(ye),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},ye))})]}),c.jsxs("button",{type:"button",onClick:_e,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Se.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:ge,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:xe?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&C&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",C.siparisNo]})]}),c.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(ab).map(([$,ye])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:ye.title}),c.jsx("div",{className:"space-y-2",children:ye.steps.map(oe=>{const Ce=C.productionStatus?.[$]?.[oe.id];return c.jsxs("button",{onClick:()=>we($,oe.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ce?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:oe.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ce?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ce&&c.jsx(Se.Check,{})})]},oe.id)})})]},$))})]})})]})}const J4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",eC=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),ob=({item:i,isAdd:e,onEdit:n,onDelete:r})=>c.jsxs(Ol,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:J4(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>n(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Se.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Se.Trash,{})})]})]})]});function tC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState({start:"",end:""}),[p,x]=Q.useState(!1),[_,T]=Q.useState([]),[A,U]=Q.useState(!0),[K,W]=Q.useState(!0),[O,se]=Q.useState(null),[ne,pe]=Q.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),fe=Q.useMemo(()=>[...new Set(l.map(le=>le.productName))].sort(),[l]),xe=Q.useMemo(()=>{const le=l.map(H=>H.unit).filter(Boolean),Ie=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Ie,...le])].sort()},[l]);Q.useEffect(()=>{const le=ts.onAuthStateChanged(B=>{e(B),r(!1)}),Ie=Rn(yt(Ve,"inventory_movements"),Bn("date","desc")),H=yn(Ie,B=>{u(B.docs.map(ee=>({id:ee.id,...ee.data()})))});return()=>{le(),H()}},[]);const me=Q.useMemo(()=>l.filter(le=>{let Ie=!0;if(f.start&&(Ie=Ie&&le.date>=f.start),f.end&&(Ie=Ie&&le.date<=f.end),le.productType==="raw"&&!A||(le.productType==="manufactured"||le.productType==="uretilmis")&&!K)return!1;let H=!0;return _.length>0&&(H=_.includes(le.productName)),Ie&&H}),[l,f,A,K,_]),C=me.filter(le=>le.action==="add"),N=me.filter(le=>le.action==="remove"),j=async le=>{le.preventDefault();try{const Ie={...ne,quantity:Number(ne.quantity),createdAt:new Date().toISOString()};O?await es(It(Ve,"inventory_movements",O),Ie):await Cs(yt(Ve,"inventory_movements"),Ie),I()}catch(Ie){alert("Hata: "+Ie.message)}},k=async le=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await oi(It(Ve,"inventory_movements",le))},R=async le=>{if(window.confirm(`"${le}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Ie=Rn(yt(Ve,"inventory_movements"),V4("productName","==",le)),H=await U4(Ie),B=H4(Ve);H.forEach(ee=>{B.delete(ee.ref)}),await B.commit(),_.includes(le)&&T(ee=>ee.filter(be=>be!==le)),ne.productName===le&&pe(ee=>({...ee,productName:""}))}catch(Ie){alert("Silme hatas: "+Ie.message)}},V=le=>{se(le.id),pe({productType:le.productType,productName:le.productName,action:le.action,quantity:le.quantity,unit:le.unit,date:le.date}),x(!0)},I=()=>{x(!1),se(null),pe({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return n?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(ah,{startDate:f.start,endDate:f.end,onStartChange:le=>y({...f,start:le}),onEndChange:le=>y({...f,end:le})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(eC,{showRaw:A,setShowRaw:U,showManufactured:K,setShowManufactured:W}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(wa,{options:fe,selected:_,onChange:T,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>x(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Se.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[C.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[C.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),C.map(le=>c.jsx(ob,{item:le,isAdd:!0,onEdit:V,onDelete:k},le.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[N.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[N.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),N.map(le=>c.jsx(ob,{item:le,isAdd:!1,onEdit:V,onDelete:k},le.id))]})]})]}),c.jsx(Ca,{isOpen:p,onClose:I,title:O?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${ne.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:ne.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(z1,{checked:ne.productType==="manufactured",onChange:le=>pe({...ne,productType:le?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(wa,{options:fe,selected:ne.productName,onChange:le=>pe({...ne,productName:le}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>pe({...ne,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>pe({...ne,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${ne.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Tt,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:ne.quantity,onChange:le=>pe({...ne,quantity:le.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(wa,{options:xe,selected:ne.unit,onChange:le=>pe({...ne,unit:le}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Tt,{type:"date",required:!0,value:ne.date,onChange:le=>pe({...ne,date:le.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Nt,{type:"submit",variant:"primary",children:O?"Gncelle":"Kaydet"}),c.jsx(Nt,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const nC=({showRaw:i,setShowRaw:e,showManufactured:n,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${n?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),sC=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const n=300,r=800,l=40,u=r-l*2,f=n-l*2,y=i.flatMap(_=>e.map(T=>_[T]||0)),p=Math.max(...y,10)*1.1,x=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const T=n-l-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:l,y1:T,x2:r-l,y2:T,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:l-10,y:T+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(p/4*_)})]},_)}),e.map((_,T)=>{const A=x[T%x.length],U=i.map((K,W)=>{const O=l+W*(u/(i.length-1||1)),se=K[_]||0,ne=n-l-se/p*f,pe=isNaN(O)?l:O,fe=isNaN(ne)?n-l:ne;return`${pe},${fe}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:U,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((K,W)=>{const O=l+W*(u/(i.length-1||1)),se=K[_]||0,ne=n-l-se/p*f,pe=isNaN(O)?l:O,fe=isNaN(ne)?n-l:ne;return c.jsx("circle",{cx:pe,cy:fe,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${K.month} - ${_}: ${se}`})},W)})]},_)}),i.map((_,T)=>{const A=l+T*(u/(i.length-1||1));return c.jsx("text",{x:A,y:n-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},T)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,T)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:x[T%x.length]}}),_]},_))})]})},iC=({name:i,qty:e,unit:n,type:r,change:l,changePercent:u})=>{const f=r==="raw",y=e<0,p=u>10;let x="text-gray-400",_="bg-gray-100",T=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});u>10?(x="text-emerald-600",_="bg-emerald-100/50",T=c.jsx(Se.TrendingUp,{})):u<-10&&(x="text-red-600",_="bg-red-100/50",T=c.jsx(Se.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",U=f?"text-pink-900":"text-purple-900",K=f?"text-pink-700/70":"text-purple-700/70";y?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",U="text-red-700",K="text-red-500"):p&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",U="text-emerald-800",K="text-emerald-600");const W=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:W}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${U}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${K} uppercase`,children:n})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${x} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:T}),c.jsxs("span",{children:["%",Math.abs(u).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[l>0?"+":"",l.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function rC(){const[i,e]=Q.useState([]),[n,r]=Q.useState(!0),[l,u]=Q.useState(!0),[f,y]=Q.useState(!0),[p,x]=Q.useState([]),[_,T]=Q.useState("year");Q.useEffect(()=>{const O=Rn(yt(Ve,"inventory_movements"),Bn("date","asc")),se=yn(O,ne=>{const pe=ne.docs.map(fe=>fe.data());e(pe),r(!1)});return()=>se()},[]);const A=Q.useMemo(()=>{const O={},se=new Date;return se.setDate(se.getDate()-30),i.forEach(ne=>{const pe=Number(ne.quantity)||0,fe=ne.action==="add"?pe:-pe,xe=new Date(ne.date);O[ne.productName]||(O[ne.productName]={name:ne.productName,qty:0,unit:ne.unit,type:ne.productType||"raw",change30Days:0}),O[ne.productName].qty+=fe,O[ne.productName].type=ne.productType||O[ne.productName].type,xe>=se&&(O[ne.productName].change30Days+=fe)}),Object.values(O).map(ne=>{const pe=ne.qty-ne.change30Days;let fe=0;return pe!==0?fe=ne.change30Days/Math.abs(pe)*100:ne.change30Days!==0&&(fe=100),{...ne,changePercent:fe}})},[i]),U=Q.useMemo(()=>A.filter(O=>!(O.type==="raw"&&!l||(O.type==="manufactured"||O.type==="uretilmis")&&!f||p.length>0&&!p.includes(O.name))),[A,l,f,p]),K=Q.useMemo(()=>A.map(O=>O.name).sort(),[A]),W=Q.useMemo(()=>{const O=U.sort((fe,xe)=>Math.abs(xe.qty)-Math.abs(fe.qty)).slice(0,5).map(fe=>fe.name);if(O.length===0)return{data:[],keys:[]};const se={},ne={};return O.forEach(fe=>ne[fe]=0),i.forEach(fe=>{if(!O.includes(fe.productName))return;const xe=fe.date?fe.date.slice(0,7):"N/A";if(xe==="N/A")return;if(_==="year"){const N=new Date().getFullYear();if(new Date(fe.date).getFullYear()!==N)return}const me=Number(fe.quantity)||0,C=fe.action==="add"?me:-me;ne[fe.productName]||(ne[fe.productName]=0),ne[fe.productName]+=C,se[xe]={...ne,month:xe}}),{data:Object.values(se).sort((fe,xe)=>fe.month.localeCompare(xe.month)),keys:O}},[i,U,_]);return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(nC,{showRaw:l,setShowRaw:u,showManufactured:f,setShowManufactured:y}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(wa,{options:K,selected:p,onChange:x,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:U.length>0?U.map((O,se)=>c.jsx(iC,{name:O.name,qty:O.qty,unit:O.unit,type:O.type,change:O.change30Days,changePercent:O.changePercent},se)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Se.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),W.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Se.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:O=>T(O.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(sC,{data:W.data,keys:W.keys})]})]})]})}const jm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Js=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",ld=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function aC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState([]),[p,x]=Q.useState({start:"",end:""}),[_,T]=Q.useState(!1),[A,U]=Q.useState(!1),K=Q.useRef(null),[W,O]=Q.useState(null),[se,ne]=Q.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:jm,images:[],items:[]}),pe=Q.useMemo(()=>f.map(E=>E.name).sort(),[f]);if(Q.useEffect(()=>{const E=ts.onAuthStateChanged(ge=>{e(ge),r(!1)}),P=Rn(yt(Ve,"teklifler"),Bn("createdAt","desc")),Z=yn(P,ge=>{u(ge.docs.map(_e=>({id:_e.id,..._e.data()})))}),M=Rn(yt(Ve,"customers"),Bn("name","asc")),ie=yn(M,ge=>{y(ge.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{E(),Z(),ie()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Se.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const fe=(E,P,Z)=>{const M=E*P,ie=M*(Z/100);return M+ie},xe=E=>{if(!E)return{subtotal:0,totalVAT:0,grandTotal:0};const P=E.reduce((M,ie)=>M+Number(ie.quantity)*Number(ie.price),0),Z=E.reduce((M,ie)=>M+Number(ie.quantity)*Number(ie.price)*(Number(ie.vat)/100),0);return{subtotal:P,totalVAT:Z,grandTotal:P+Z}},me=E=>{const P=Array.from(E.target.files||E.dataTransfer.files);P.length&&P.forEach(Z=>{if(!Z.type.startsWith("image/"))return;const M=new FileReader;M.onload=ie=>{const ge=new Image;ge.onload=()=>{const _e=document.createElement("canvas"),Ue=1e3;let Le=ge.width,re=ge.height;Le>re?Le>Ue&&(re*=Ue/Le,Le=Ue):re>Ue&&(Le*=Ue/re,re=Ue),_e.width=Le,_e.height=re,_e.getContext("2d").drawImage(ge,0,0,Le,re);const Te=_e.toDataURL("image/jpeg",.7);ne($=>({...$,images:[...$.images,Te]}))},ge.src=ie.target.result},M.readAsDataURL(Z)})},C=E=>{ne(P=>({...P,images:P.images.filter((Z,M)=>M!==E)}))},N=(E,P)=>{const Z=[...se.images];P===-1&&E>0?[Z[E],Z[E-1]]=[Z[E-1],Z[E]]:P===1&&E<Z.length-1&&([Z[E],Z[E+1]]=[Z[E+1],Z[E]]),ne({...se,images:Z})},j=E=>{E.preventDefault(),U(!0)},k=()=>U(!1),R=E=>{E.preventDefault(),U(!1),me(E)},V=E=>{E.clipboardData.files&&E.clipboardData.files.length>0&&(E.preventDefault(),me({target:{files:E.clipboardData.files}}))},I=()=>{O(null);const E="TK-"+Date.now().toString().slice(-6),P=new Date;P.setDate(P.getDate()+7),ne({teklifNo:E,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:P.toISOString().split("T")[0],note:jm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),T(!0)},le=E=>{O(E.id),ne({teklifNo:E.teklifNo,teklifName:E.teklifName||"",customerName:E.customerName,date:E.date,validityDate:E.validityDate||"",note:E.note||jm,images:E.images||[],items:E.items||[]}),T(!0)},Ie=async E=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await oi(It(Ve,"teklifler",E))}catch(P){alert(P.message)}},H=async E=>{if(E.preventDefault(),!se.customerName){alert("Ltfen mteri ad giriniz.");return}try{const P={...se,createdAt:new Date().toISOString()};W?await es(It(Ve,"teklifler",W),P):await Cs(yt(Ve,"teklifler"),P),T(!1)}catch(P){alert(P.message)}},B=(E,P,Z)=>{const M=[...se.items],ie=M[E];ie[P]=Z;const ge=parseFloat(P==="quantity"?Z:ie.quantity),_e=parseFloat(P==="price"?Z:ie.price),Ue=parseFloat(P==="vat"?Z:ie.vat);!isNaN(ge)&&!isNaN(_e)&&!isNaN(Ue)&&(ie.total=fe(ge,_e,Ue)),ne({...se,items:M})},ee=()=>{ne({...se,items:[...se.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},be=E=>{ne({...se,items:se.items.filter((P,Z)=>Z!==E)})},je=E=>{const P=window.open("","","height=800,width=1000");if(!P){alert("Pop-up engelleyiciyi kapatn.");return}const Z=xe(E.items||[]),M=E.images||[],ie=`
      <html><head><title>Teklif - ${E.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${E.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${ld(E.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${ld(E.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${E.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${E.items.map(ge=>`
                <tr>
                  <td>${ge.description}</td>
                  <td class="text-center">${ge.quantity}</td>
                  <td class="text-right">${Js(ge.price)}</td>
                  <td class="text-center">%${ge.vat}</td>
                  <td class="text-right"><strong>${Js(ge.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Js(Z.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Js(Z.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Js(Z.grandTotal)}</span></div>
            </div>
          </div>

          ${E.note?`<div class="notes-section"><strong>NOT:</strong><br/>${E.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${M.map(ge=>`<img src="${ge}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;P.document.write(ie),P.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?V:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(ah,{startDate:p.start,endDate:p.end,onStartChange:E=>x({...p,start:E}),onEndChange:E=>x({...p,end:E})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Se.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[l.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),l.filter(E=>{let P=!0;return p.start&&E.date<p.start&&(P=!1),p.end&&E.date>p.end&&(P=!1),P}).map(E=>{const P=xe(E.items);return c.jsxs(Ol,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Se.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:E.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",E.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:E.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",ld(E.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",ld(E.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Js(P.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Nt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>je(E),children:c.jsx(Se.Printer,{})}),c.jsx(Nt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>le(E),children:c.jsx(Se.Edit,{})}),c.jsx(Nt,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Ie(E.id),children:c.jsx(Se.Trash,{})})]})]})]},E.id)})]}),c.jsx(Ca,{isOpen:_,onClose:()=>T(!1),title:W?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:H,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(Tt,{value:se.teklifNo,onChange:E=>ne({...se,teklifNo:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(Tt,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:se.teklifName,onChange:E=>ne({...se,teklifName:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(wa,{options:pe,selected:se.customerName,onChange:E=>ne({...se,customerName:E}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(Tt,{type:"date",required:!0,value:se.date,onChange:E=>ne({...se,date:E.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(Tt,{type:"date",required:!0,value:se.validityDate,onChange:E=>ne({...se,validityDate:E.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(K4,{rows:"4",value:se.note,onChange:E=>ne({...se,note:E.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:R,children:[c.jsx("input",{ref:K,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:me}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Se.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:se.images.map((E,P)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:E,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>C(P),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>N(P,-1),disabled:P===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>N(P,1),disabled:P===se.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},P))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:se.items.map((E,P)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(Tt,{placeholder:"rn/Hizmet aklamas",value:E.description,onChange:Z=>B(P,"description",Z.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(Tt,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.quantity,onChange:Z=>B(P,"quantity",Z.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(Tt,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:E.price,onChange:Z=>B(P,"price",Z.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:E.vat,onChange:Z=>B(P,"vat",Z.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Js(E.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>be(P),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Se.Trash,{})})})]},P))})]}),c.jsx("button",{type:"button",onClick:ee,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Js(xe(se.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Js(xe(se.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Js(xe(se.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(Nt,{type:"submit",variant:"primary",children:W?"Kaydet":"Olutur"}),c.jsx(Nt,{type:"button",variant:"secondary",onClick:()=>T(!1),children:"ptal"})]})]})})]})}const lC="86715dfc9d1046e7e8a0d95a",oC=`https://v6.exchangerate-api.com/v6/${lC}/latest/USD`,Cm=({ops:i,onChange:e,allowRefs:n=!1,rows:r=[],constants:l=[]})=>{const u=(p,x,_)=>{const T=[...i];T[p]={...T[p],[x]:_},x==="type"&&_!=="op"&&(T[p].value=""),e(T)},f=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},y=p=>{if(p===0)return;const x=[...i];x.splice(p,2),e(x)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2",children:[i.map((p,x)=>x%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-indigo-50 border-none rounded-lg text-center font-bold text-indigo-700 w-10 py-2 cursor-pointer hover:bg-indigo-100 transition-colors appearance-none text-lg",value:p.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>y(x),className:"absolute -top-3 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs hidden group-hover:flex items-center justify-center shadow-md z-20 hover:bg-red-600",title:"Sil",children:""})]},x):c.jsxs("div",{className:"flex bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg overflow-hidden shadow-sm items-center h-10",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-200 text-[10px] uppercase font-bold text-gray-500 px-2 h-full cursor-pointer focus:outline-none hover:bg-gray-100",value:p.type,onChange:_=>u(x,"type",_.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),n&&c.jsx("option",{value:"ref",children:"Satr"})]}),p.type==="num"&&c.jsx("input",{type:"number",className:"w-20 border-none text-sm px-2 h-full focus:ring-0 text-gray-900 bg-transparent [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:p.value,onChange:_=>u(x,"value",_.target.value)}),p.type==="const"&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-transparent cursor-pointer text-gray-900 truncate",value:p.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),l.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]}),p.type==="ref"&&n&&c.jsxs("select",{className:"w-32 border-none text-xs px-2 h-full focus:ring-0 bg-indigo-50 text-indigo-700 font-bold cursor-pointer truncate",value:p.value,onChange:_=>u(x,"value",_.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(_=>c.jsx("option",{value:_.id,children:_.name||"simsiz"},_.id))]})]},x)),c.jsx("button",{type:"button",onClick:f,className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 hover:shadow-lg transition-all z-10",children:c.jsx(Se.Plus,{})})]})};function cC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState([]),[p,x]=Q.useState({TRY:1,USD:1,EUR:1}),[_,T]=Q.useState(null),[A,U]=Q.useState(!1),[K,W]=Q.useState(!1),[O,se]=Q.useState(null),[ne,pe]=Q.useState({}),[fe,xe]=Q.useState({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[me,C]=Q.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});Q.useEffect(()=>{const re=ts.onAuthStateChanged(oe=>{e(oe),r(!1)}),we=Rn(yt(Ve,"pricing_constants"),Bn("name","asc")),Te=yn(we,oe=>{u(oe.docs.map(Ce=>({id:Ce.id,...Ce.data()})))}),$=Rn(yt(Ve,"pricing_items"),Bn("updatedAt","desc")),ye=yn($,oe=>{y(oe.docs.map(Ce=>({id:Ce.id,...Ce.data()})))});return N(),()=>{re(),Te(),ye()}},[]);const N=async()=>{try{const we=await(await fetch(oC)).json();if(we&&we.conversion_rates){const Te=we.conversion_rates.TRY,$=we.conversion_rates.EUR,ye=Te/$;x({TRY:1,USD:Te,EUR:ye}),T(new Date().toLocaleTimeString())}}catch(re){console.error("Rate error",re)}},j=(re,we)=>{if(!we||we==="None"||we==="TRY")return parseFloat(re)||0;const Te=p[we]||1;return parseFloat(re)*Te},k=(re,we)=>{if(we==="TRY")return re;const Te=p[we]||1;return re/Te},R=(re,we={})=>{if(re.type==="num")return parseFloat(re.value)||0;if(re.type==="const"){const Te=l.find($=>$.id===re.value);return Te?j(Te.value,Te.currency):0}return re.type==="ref"&&we[re.value]||0},V=(re,we={})=>{if(!re||re.length===0)return 0;let Te=R(re[0],we);for(let $=1;$<re.length;$+=2){const ye=re[$].value,oe=R(re[$+1],we);switch(ye){case"+":Te+=oe;break;case"-":Te-=oe;break;case"*":Te*=oe;break;case"/":Te=oe!==0?Te/oe:0;break}}return Te},I=re=>{const we={};(re.rows||[]).forEach($=>{we[$.id]=V($.ops,we)});const Te=V(re.finalFormula?.ops,we);return k(Te,re.finalCurrency||"TRY")},le=re=>V(re,{}),Ie=Q.useMemo(()=>I(me),[me,l,p]),H=Q.useMemo(()=>le(fe.ops),[fe.ops,l,p]),B=Q.useMemo(()=>[...new Set(l.map(we=>we.category||"Kategorisiz"))].sort(),[l]),ee=Q.useMemo(()=>{const re={};return l.forEach(we=>{const Te=we.category||"Kategorisiz";re[Te]||(re[Te]=[]),re[Te].push(we)}),re},[l]),be=async re=>{re.preventDefault();const we=le(fe.ops),Te={...fe,value:we,category:fe.category||"Kategorisiz"};O?await es(It(Ve,"pricing_constants",O),Te):await Cs(yt(Ve,"pricing_constants"),Te),xe({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),se(null)},je=re=>{xe({...re,ops:re.ops||[{type:"num",value:re.value}]}),se(re.id)},E=async re=>{window.confirm("Silmek istediinize emin misiniz?")&&await oi(It(Ve,"pricing_constants",re))},P=re=>{pe(we=>({...we,[re]:!we[re]}))},Z=()=>{const re="row_"+Date.now();C({...me,rows:[...me.rows,{id:re,name:"",ops:[{type:"num",value:0}]}]})},M=re=>{const we=[...me.rows];we.splice(re,1),C({...me,rows:we})},ie=(re,we)=>{const Te=[...me.rows];Te[re].name=we,C({...me,rows:Te})},ge=(re,we)=>{const Te=[...me.rows];Te[re].ops=we,C({...me,rows:Te})},_e=async re=>{re.preventDefault();const we={...me,updatedAt:new Date().toISOString()};O?await es(It(Ve,"pricing_items",O),we):await Cs(yt(Ve,"pricing_items"),we),W(!1),se(null),C({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"})},Ue=re=>{C(re),se(re.id),W(!0)},Le=async re=>{window.confirm("Silmek istediinize emin misiniz?")&&await oi(It(Ve,"pricing_items",re))};return n?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):!i||i.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Se.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve esnek hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white/80 backdrop-blur-md px-5 py-3 rounded-xl shadow-sm border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[p.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[p.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Se.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs(Nt,{variant:"secondary",onClick:()=>U(!0),children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Se.Variable,{})})," Sabit Deerler"]}),c.jsxs(Nt,{variant:"primary",onClick:()=>{se(null),C({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),W(!0)},children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Se.Calculator,{})})," Fiyatlandrma"]})]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center bg-white/40 backdrop-blur-sm rounded-3xl border border-dashed border-gray-300 text-gray-400",children:"Henz fiyatlandrma oluturulmad."}),f.map(re=>{const we=I(re),Te=re.finalCurrency||"TRY",$=Math.random()>.5?"up":"down",ye=(Math.random()*5).toFixed(1);return c.jsxs(Ol,{className:"p-6 hover:scale-[1.02] transition-transform relative group",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-100/50 px-3 py-1 rounded-bl-xl text-[10px] font-bold text-gray-400",children:new Date(re.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1 pr-12 truncate",title:re.title,children:re.title}),c.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider mb-4",children:re.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-6",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[we.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-sm ml-1 font-medium text-indigo-400",children:Te})]}),c.jsxs("div",{className:`flex items-center text-xs font-bold ${$==="up"?"text-emerald-500":"text-red-500"}`,children:[$==="up"?c.jsx(Se.TrendingUp,{}):c.jsx(Se.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",ye]})]})]}),c.jsxs("div",{className:"flex gap-2 border-t border-gray-100 pt-4 opacity-80 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Ue(re),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 rounded-lg font-bold transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>Le(re.id),className:"flex-1 py-2 text-xs bg-gray-50 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-lg font-bold transition-colors",children:"Sil"})]})]},re.id)})]})}),A&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-0 sm:p-4 bg-gray-900/40 backdrop-blur-sm overflow-y-auto",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl w-full max-w-6xl min-h-full sm:min-h-0 sm:rounded-3xl shadow-2xl border border-white/50 flex flex-col my-0 sm:my-8 relative",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 sticky top-0 z-10 backdrop-blur-xl rounded-t-3xl",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sabit Deer Ynetimi"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maliyet hesaplamalarnda kullanlacak temel deerler"})]}),c.jsx("button",{onClick:()=>U(!1),className:"bg-gray-100 hover:bg-gray-200 p-2 rounded-full transition-colors",children:c.jsx("span",{className:"text-xl font-bold text-gray-600",children:""})})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row flex-grow overflow-hidden h-full",children:[c.jsxs("div",{className:"lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-gray-200 overflow-y-auto bg-gray-50/30",children:[c.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center",children:c.jsx(Se.Plus,{})}),O?"Sabiti Dzenle":"Yeni Sabit Ekle"]}),c.jsxs("form",{onSubmit:be,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Tanmlama"}),c.jsx(Tt,{required:!0,placeholder:"Sabit Ad (rn: Elektrik Kw/s)",value:fe.name,onChange:re=>xe({...fe,name:re.target.value})}),c.jsxs("div",{className:"relative",children:[c.jsx(Tt,{list:"cat-options",placeholder:"Kategori (rn: Enerji, Hammadde)",value:fe.category,onChange:re=>xe({...fe,category:re.target.value})}),c.jsx("datalist",{id:"cat-options",children:B.map((re,we)=>c.jsx("option",{value:re},we))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Tt,{placeholder:"Birim (kg, saat...)",value:fe.unit,onChange:re=>xe({...fe,unit:re.target.value})}),c.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 text-sm",value:fe.currency,onChange:re=>xe({...fe,currency:re.target.value}),children:[c.jsx("option",{value:"None",children:"Para Birimi Yok"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Deer Hesaplama"}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[c.jsx(Cm,{ops:fe.ops,onChange:re=>xe({...fe,ops:re}),constants:l}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Sonu"}),c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:H.toLocaleString("tr-TR",{maximumFractionDigits:4})})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[O&&c.jsx(Nt,{type:"button",variant:"ghost",onClick:()=>{se(null),xe({name:"",category:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]})},children:"ptal"}),c.jsx(Nt,{type:"submit",variant:"primary",children:O?"Gncelle":"Ekle"})]})]})]}),c.jsx("div",{className:"lg:w-2/3 p-8 overflow-y-auto bg-white/40",children:c.jsxs("div",{className:"space-y-6",children:[Object.entries(ee).map(([re,we])=>{const Te=ne[re]??!1;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[c.jsx("div",{onClick:()=>P(re),className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Te?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:Te?c.jsx(Se.ChevronDown,{className:"transform rotate-180"}):c.jsx(Se.ChevronDown,{})}),c.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:re}),c.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs font-bold px-2 py-0.5 rounded-md",children:we.length})]})}),Te&&c.jsx("div",{className:"p-6 bg-gray-50/50 border-t border-gray-100 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-fadeIn",children:we.map($=>{const ye=j($.value,$.currency);return c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-1 truncate",title:$.name,children:$.name}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[c.jsx("span",{className:"text-xl font-bold text-indigo-600",children:$.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})}),c.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[$.currency!=="None"?$.currency:""," ",$.unit?`/ ${$.unit}`:""]})]}),$.currency!=="TRY"&&$.currency!=="None"&&c.jsxs("div",{className:"text-[10px] text-emerald-600 font-bold bg-emerald-50 inline-block px-2 py-0.5 rounded",children:["~ ",ye.toFixed(2)," "]}),c.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 backdrop-blur p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>je($),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Se.Edit,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>E($.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Se.Trash,{className:"w-3 h-3"})})]})]},$.id)})})]},re)}),l.length===0&&c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Se.Variable,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Henz sabit deer eklenmemi."})]})]})})]})]})}),c.jsx(Ca,{isOpen:K,onClose:()=>W(!1),title:O?"Fiyatlandrmay Dzenle":"Yeni Fiyatlandrma",maxWidth:"max-w-7xl",children:c.jsxs("form",{id:"pricingForm",onSubmit:_e,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx(Tt,{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",value:me.title,onChange:re=>C({...me,title:re.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx(Tt,{placeholder:"adet, m3, kg...",value:me.unitType,onChange:re=>C({...me,unitType:re.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Maliyet Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:Z,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),me.rows.map((re,we)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsx("div",{className:"w-full xl:w-64 shrink-0",children:c.jsx("input",{placeholder:"Adm Ad (rn: Ham Madde)",className:"w-full text-sm font-medium border-0 border-b border-gray-200 focus:ring-0 px-0 bg-transparent",value:re.name,onChange:Te=>ie(we,Te.target.value)})}),c.jsx("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:c.jsx(Cm,{ops:re.ops,onChange:Te=>ge(we,Te),allowRefs:!0,rows:me.rows.slice(0,we),constants:l})}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:V(re.ops,I({...me,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>M(we),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Se.Trash,{})})]})]},re.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Se.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:me.finalCurrency,onChange:re=>C({...me,finalCurrency:re.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Cm,{ops:me.finalFormula.ops,onChange:re=>C({...me,finalFormula:{...me.finalFormula,ops:re}}),allowRefs:!0,rows:me.rows,constants:l})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[Ie.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:me.finalCurrency})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Nt,{type:"button",variant:"secondary",onClick:()=>W(!1),children:"ptal"}),c.jsx(Nt,{type:"submit",variant:"primary",children:"Kaydet"})]})]})})]})}const ya={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},xl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},cb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],uC=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Rm=2.5,As=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function dC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState(new Date),[p,x]=Q.useState(!1),[_,T]=Q.useState(!1),[A,U]=Q.useState(null),[K,W]=Q.useState(new Date),[O,se]=Q.useState(!1),[ne,pe]=Q.useState(new Date().getFullYear()),[fe,xe]=Q.useState(!1),[me,C]=Q.useState(null),[N,j]=Q.useState({type:"work",overtimeSlots:0,lateness:0}),[k,R]=Q.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});Q.useEffect(()=>{const M=ts.onAuthStateChanged(Ue=>{e(Ue),r(!1)}),ie=Rn(yt(Ve,"employees"),Bn("name","asc")),ge=yn(ie,Ue=>{u(Ue.docs.map(Le=>({id:Le.id,...Le.data()})))}),_e=setInterval(()=>y(new Date),6e4);return()=>{M(),ge(),clearInterval(_e)}},[]);const V=M=>{const ie=f.toISOString().split("T")[0],ge=f.getDay(),_e=f.getHours(),Ue=f.getMinutes(),Le=_e*60+Ue,re=M.attendance?.[ie];if(re){if(["paid_leave","unpaid_leave"].includes(re.type))return xl.LEAVE;if(re.overtimeSlots>0)return xl.OVERTIME}const[we,Te]=M.startHour.split(":").map(Number),[$,ye]=M.endHour.split(":").map(Number),oe=we*60+Te,Ce=$*60+ye;return M.workDays.includes(ge)?Le>=oe&&Le<Ce?xl.ONLINE:Le>=Ce&&re?.overtimeSlots>0?xl.OVERTIME:xl.OFFLINE:xl.OFFLINE},I=M=>{if(!M.attendance)return{used:0,remaining:M.vacationTotal};let ie=0;return Object.values(M.attendance).forEach(ge=>{ge.type==="paid_leave"&&ie++}),{used:ie,remaining:M.vacationTotal-ie}},le=(M,ie)=>{const ge=ie.getFullYear(),_e=ie.getMonth(),Ue=new Date(ge,_e+1,0).getDate();let Le=0,re=0,we=0,Te=0,$=0;for(let He=1;He<=Ue;He++){const St=`${ge}-${String(_e+1).padStart(2,"0")}-${String(He).padStart(2,"0")}`,bn=new Date(St).getDay(),In=M.attendance?.[St],zi=M.workDays.includes(bn);In?(In.type==="work"&&Le++,In.type==="paid_leave"&&$++,In.type==="unpaid_leave"&&Te++,In.overtimeSlots&&(re+=parseInt(In.overtimeSlots)),In.lateness&&(we+=parseFloat(In.lateness))):zi&&Le++}const ye=parseFloat(M.salaryAmount)||0,oe=M.customDailyRate&&parseFloat(M.customDailyRate)>0?parseFloat(M.customDailyRate):ye/30,Ce=parseFloat(M.customDeductionRate),Ye=!isNaN(Ce)&&Ce>0?Ce:oe,Ee=oe/9,Xe=M.customOvertimeMultiplier?parseFloat(M.customOvertimeMultiplier):1.5,Je=re*Rm,te=Je*(Ee*Xe),De=Te*Ye,et=we*Ee,ut=De+et,vn=ye+te-ut+(parseFloat(M.insurance)||0)+(parseFloat(M.allowance)||0);return{workedDays:Le,totalOvertimeSlots:re,totalOvertimeHours:Je,unpaidLeaveDays:Te,paidLeaveDays:$,overtimePay:te,totalLatenessHours:we,latenessDeduction:et,totalDeduction:ut,totalSalary:vn,dailyRate:oe,hourlyRate:Ee,deductionRate:Ye}},Ie=(M,ie)=>{const ge=new Date(M,ie,1);let _e=0;return l.forEach(Ue=>{_e+=le(Ue,ge).totalSalary}),_e},H=Q.useMemo(()=>{let M=0,ie=0;const ge=new Date(K);return ge.setMonth(K.getMonth()-1),l.forEach(_e=>{M+=le(_e,K).totalSalary,ie+=le(_e,ge).totalSalary}),{thisMonthTotal:M,lastMonthTotal:ie}},[l,K]),B=()=>{T(!1),R({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),x(!0)},ee=()=>{A&&(T(!0),R({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),U(null),x(!0))},be=async M=>{M.preventDefault();try{const ie={...k,updatedAt:new Date().toISOString()};_&&A?await es(It(Ve,"employees",A.id),ie):await Cs(yt(Ve,"employees"),{...ie,createdAt:new Date().toISOString()}),x(!1)}catch(ie){alert("Hata: "+ie.message)}},je=async M=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await oi(It(Ve,"employees",M)),U(null))},E=(M,ie)=>{C(M),j({type:ie?.type||"work",overtimeSlots:ie?.overtimeSlots||0,lateness:ie?.lateness||0}),xe(!0)},P=async M=>{if(M.preventDefault(),!A||!me)return;const ie={...A.attendance};ie[me]={type:N.type,overtimeSlots:parseInt(N.overtimeSlots)||0,lateness:parseFloat(N.lateness)||0},await es(It(Ve,"employees",A.id),{attendance:ie}),U({...A,attendance:ie}),xe(!1)};if(n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(ya.Lock,{})," Yetkisiz Eriim"]});const Z=({employee:M,date:ie,onDateClick:ge})=>{const _e=ie.getFullYear(),Ue=ie.getMonth(),Le=new Date(_e,Ue+1,0).getDate(),re=new Date(_e,Ue,1).getDay(),we=[];for(let Te=0;Te<re;Te++)we.push(null);for(let Te=1;Te<=Le;Te++)we.push(Te);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:cb.map((Te,$)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:Te.slice(0,3)},$))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.map((Te,$)=>{if(!Te)return c.jsx("div",{},$);const ye=`${_e}-${String(Ue+1).padStart(2,"0")}-${String(Te).padStart(2,"0")}`,oe=M.attendance?.[ye],Ce=new Date(ye).getDay(),Ye=M.workDays.includes(Ce);let Ee="bg-gray-50 text-gray-400 border-gray-100";return Ye&&(Ee="bg-white border-emerald-200 text-gray-700 shadow-sm"),oe&&(oe.type==="paid_leave"&&(Ee="bg-yellow-50 border-yellow-200 text-yellow-700"),oe.type==="unpaid_leave"&&(Ee="bg-red-50 border-red-200 text-red-700"),oe.type==="work"&&(oe.overtimeSlots>0||oe.lateness>0)&&(Ee="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),oe.type==="off"&&(Ee="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>ge(ye,oe),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${Ee}`,children:[c.jsx("span",{className:"text-sm",children:Te}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[oe?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",oe.overtimeSlots,"M"]}),oe?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",oe.lateness,"s"]})]})]},$)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>se(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",K.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:As(H.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(ya.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>se(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:As(H.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:B,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(ya.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(M=>{const ie=V(M),ge=I(M);return c.jsxs("div",{onClick:()=>U(M),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${ie.color} ${ie.ring} ring-offset-2 ring-2`,children:ie.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(ya.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:M.name}),c.jsx("p",{className:"text-sm text-gray-500",children:M.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[M.startHour," - ",M.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[ge.remaining," gn kald"]})]})]})]},M.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:ee,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(ya.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>je(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(ya.Trash,{})}),c.jsx("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",K.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const M=le(A,K);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:As(M.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:As(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",M.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",As(M.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",M.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",As(M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",M.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",As(M.totalDeduction-M.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",As(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Rm," Saat",c.jsx("br",{}),"Saatlik cret = ",As(M.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",As(M.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>W(new Date(K.setMonth(K.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:K.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>W(new Date(K.setMonth(K.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(Z,{employee:A,date:K,onDateClick:E})]})]})]})}),O&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>se(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(ya.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>pe(M=>M-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:ne}),c.jsx("button",{onClick:()=>pe(M=>M+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:uC.map((M,ie)=>{const ge=Ie(ne,ie),_e=new Date().getMonth()===ie&&new Date().getFullYear()===ne;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${_e?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${_e?"text-indigo-200":"text-gray-400"}`,children:M}),c.jsx("div",{className:`text-lg font-bold ${_e?"text-white":"text-gray-800"}`,children:ge>0?As(ge):"-"})]},M)})})]})}),p&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:be,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:M=>R({...k,name:M.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:M=>R({...k,role:M.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:M=>R({...k,salaryType:M.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:M=>R({...k,salaryAmount:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:M=>R({...k,insurance:M.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:M=>R({...k,allowance:M.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:M=>R({...k,customDailyRate:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:M=>R({...k,customOvertimeMultiplier:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:M=>R({...k,customDeductionRate:M.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:M=>R({...k,vacationTotal:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:M=>R({...k,startHour:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:M=>R({...k,endHour:M.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:cb.map((M,ie)=>c.jsx("button",{type:"button",onClick:()=>{const ge=k.workDays.includes(ie)?k.workDays.filter(_e=>_e!==ie):[...k.workDays,ie];R({...k,workDays:ge})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(ie)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:M.slice(0,3)},M))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),fe&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:me}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(M=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:M.id,checked:N.type===M.id,onChange:ie=>j({...N,type:ie.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:M.label})]},M.id))})]}),N.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Rm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(M=>c.jsx("button",{type:"button",onClick:()=>j({...N,overtimeSlots:N.overtimeSlots===M?0:M}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${N.overtimeSlots===M?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:N.lateness,onChange:M=>j({...N,lateness:M.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>xe(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}const ip={leftImage:null,topImage:null,kod:"",size:"",color:""},ub=Array(14).fill(null).map(()=>({...ip}));function hC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState([]),[f,y]=Q.useState([]),[p,x]=Q.useState(!1),[_,T]=Q.useState(!1),[A,U]=Q.useState("batches"),[K,W]=Q.useState({title:"",labels:ub}),[O,se]=Q.useState({name:"",...ip}),[ne,pe]=Q.useState(null),fe=Q.useRef({});if(Q.useEffect(()=>{const B=ts.onAuthStateChanged(P=>{e(P),r(!1)}),ee=Rn(yt(Ve,"label_batches"),Bn("createdAt","desc")),be=yn(ee,P=>{u(P.docs.map(Z=>({id:Z.id,...Z.data()})))}),je=Rn(yt(Ve,"label_templates"),Bn("name","asc")),E=yn(je,P=>{y(P.docs.map(Z=>({id:Z.id,...Z.data()})))});return()=>{B(),be(),E()}},[]),n)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const xe=(B,ee)=>{if(!B)return;const be=new FileReader;be.onload=je=>{const E=new Image;E.onload=()=>{const P=document.createElement("canvas"),Z=400;let M=E.width,ie=E.height;M>ie?M>Z&&(ie*=Z/M,M=Z):ie>Z&&(M*=Z/ie,ie=Z),P.width=M,P.height=ie,P.getContext("2d").drawImage(E,0,0,M,ie),ee(P.toDataURL("image/jpeg",.6))},E.src=je.target.result},be.readAsDataURL(B)},me=(B=null)=>{B?(pe(B.id),W({title:B.title,labels:B.labels})):(pe(null),W({title:"",labels:ub.map(ee=>({...ee}))})),x(!0)},C=(B,ee,be)=>{const je=[...K.labels];je[B]={...je[B],[ee]:be},W({...K,labels:je})},N=()=>{if(window.confirm("lk etiketteki veriler dier tm etiketlere kopyalanacak. Onaylyor musunuz?")){const B=K.labels[0],ee=K.labels.map(()=>({...B}));W({...K,labels:ee})}},j=(B,ee)=>{const be=f.find(je=>je.id===ee);if(be){const je=[...K.labels];je[B]={leftImage:be.leftImage,topImage:be.topImage,kod:be.kod,size:be.size,color:be.color},W({...K,labels:je})}},k=async B=>{B.preventDefault();try{const ee={...K,createdAt:new Date().toISOString()};ne?await es(It(Ve,"label_batches",ne),ee):await Cs(yt(Ve,"label_batches"),ee),x(!1)}catch(ee){alert("Hata: "+ee.message)}},R=async B=>{window.confirm("Bu etiket sayfasn silmek istiyor musunuz?")&&await oi(It(Ve,"label_batches",B))},V=(B=null)=>{B?(pe(B.id),se(B)):(pe(null),se({name:"",...ip})),T(!0)},I=async B=>{B.preventDefault();try{ne?await es(It(Ve,"label_templates",ne),O):await Cs(yt(Ve,"label_templates"),O),T(!1)}catch(ee){alert("Hata: "+ee.message)}},le=async B=>{window.confirm("Bu ablonu silmek istiyor musunuz?")&&await oi(It(Ve,"label_templates",B))},Ie=B=>{const ee=window.open("","","height=800,width=1000");if(!ee)return;const be=`
      <html><head><title>Etiketler - ${B.title}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        
        body { 
          font-family: 'Arial', sans-serif; 
          color: #000;
          box-sizing: border-box;
          padding-top: 10mm;
          padding-bottom: 10mm;
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: repeat(7, 1fr);
          height: 100%;
        }

        .label-container {
          border: 1px dashed #ccc;
          box-sizing: border-box;
          padding: 2px;
          display: flex;
          overflow: hidden;
          height: 100%;
          page-break-inside: avoid; 
        }

        .left-section {
          width: 25%;
          height: 100%;
          border-right: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-right: 2px;
        }
        /* PDF Fix: Use CONTAIN to show full image without cropping */
        .left-img {
          width: 100%;
          height: 100%;
          object-fit: contain; 
        }

        .right-section {
          width: 75%;
          display: flex;
          flex-direction: column;
          padding-left: 5px;
        }

        .top-section {
          height: 33%;
          border-bottom: 1px solid #eee;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          margin-bottom: 2px;
        }
        .logo-img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        .info-section {
          height: 66%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          font-size: 11pt;
          font-weight: bold;
          line-height: 1.4;
        }

        .info-row { display: flex; align-items: baseline; }
        .label-key { width: 60px; font-weight: bold; }
        .label-val { font-weight: normal; }

        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        ${B.labels.map(je=>`
          <div class="label-container">
            <div class="left-section">
              ${je.leftImage?`<img src="${je.leftImage}" class="left-img" />`:""}
            </div>
            <div class="right-section">
              <div class="top-section">
                ${je.topImage?`<img src="${je.topImage}" class="logo-img" />`:""}
              </div>
              <div class="info-section">
                <div class="info-row"><span class="label-key">KOD:</span> <span class="label-val">${je.kod||""}</span></div>
                <div class="info-row"><span class="label-key">SIZE:</span> <span class="label-val">${je.size||""}</span></div>
                <div class="info-row"><span class="label-key">COLOR:</span> <span class="label-val">${je.color||""}</span></div>
              </div>
            </div>
          </div>
        `).join("")}
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;ee.document.write(be),ee.document.close()},H=(B,ee,be,je=!1)=>c.jsxs("div",{className:`grid grid-cols-4 gap-0 bg-white border border-gray-300 rounded-xl shadow-sm relative group hover:z-20 transition-all ${je?"":"h-36"}`,children:[c.jsx("div",{className:"col-span-1 border-r border-gray-300 bg-gray-50 relative h-full rounded-l-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>fe.current[`left-${ee}`]?.click(),children:[B.leftImage?c.jsx("img",{src:B.leftImage,className:"w-full h-full object-contain",alt:"Sol"}):c.jsx("span",{className:"text-2xl text-gray-300 font-light",children:"+"}),c.jsx("input",{type:"file",className:"hidden",ref:E=>fe.current[`left-${ee}`]=E,onChange:E=>xe(E.target.files[0],P=>be(ee,"leftImage",P))}),B.leftImage&&c.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),be(ee,"leftImage",null)},className:"absolute top-1 right-1 bg-white/80 rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""})]})}),c.jsxs("div",{className:"col-span-3 flex flex-col h-full relative",children:[c.jsx("div",{className:"h-1/3 border-b border-gray-200 relative group bg-white rounded-tr-xl overflow-hidden",children:c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>fe.current[`top-${ee}`]?.click(),children:[B.topImage?c.jsx("img",{src:B.topImage,className:"w-full h-full object-contain",alt:"Logo"}):c.jsx("span",{className:"text-[9px] text-gray-400 font-bold tracking-widest",children:"LOGO"}),c.jsx("input",{type:"file",className:"hidden",ref:E=>fe.current[`top-${ee}`]=E,onChange:E=>xe(E.target.files[0],P=>be(ee,"topImage",P))}),B.topImage&&c.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),be(ee,"topImage",null)},className:"absolute top-1 right-1 bg-white/80 text-red-500 w-4 h-4 text-[10px] flex items-center justify-center rounded hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:""})]})}),c.jsxs("div",{className:"h-2/3 flex flex-col justify-center p-2 gap-1.5 bg-white rounded-br-xl",children:[c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"KOD"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:B.kod,onChange:E=>be(ee,"kod",E.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"SIZE"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:B.size,onChange:E=>be(ee,"size",E.target.value)})]}),c.jsxs("div",{className:"flex items-center gap-1 w-3/4",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-400 w-8 text-right",children:"CLR"}),c.jsx("input",{className:"flex-grow text-xs font-bold border-b border-gray-200 focus:border-indigo-500 outline-none bg-transparent px-1 py-0.5",value:B.color,onChange:E=>be(ee,"color",E.target.value)})]})]})]}),!je&&c.jsx("div",{className:"absolute top-1 left-1 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-24 scale-75 origin-bottom shadow-md bg-white rounded",children:c.jsx(wa,{options:f.map(E=>E.name),placeholder:"ablon",onChange:E=>{const P=f.find(Z=>Z.name===E);P&&j(ee,P.id)},selected:""})})})]});return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Etiket Basm"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"A4 etiket tasarm ve yazdrma"})]}),c.jsxs("div",{className:"flex gap-2 bg-white/60 backdrop-blur-md p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("button",{onClick:()=>U("batches"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="batches"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"Etiket Sayfalar"}),c.jsx("button",{onClick:()=>U("templates"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="templates"?"bg-indigo-600 text-white shadow":"text-gray-500 hover:bg-white"}`,children:"ablonlar"})]}),c.jsxs("button",{onClick:()=>A==="batches"?me():V(),className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Se.Plus,{})," ",c.jsx("span",{className:"ml-2",children:A==="batches"?"Etiket Sayfas Olutur":"ablon Ekle"})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10",children:A==="batches"?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.map(B=>c.jsx(Ol,{className:"p-0 hover:shadow-xl transition-all group overflow-hidden",children:c.jsxs("div",{className:"flex h-40",children:[c.jsx("div",{className:"w-32 bg-gray-100 border-r border-gray-200 p-2 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full bg-white border border-gray-300 shadow-sm grid grid-cols-2 grid-rows-7 gap-[1px] p-[2px]",children:B.labels.map((ee,be)=>c.jsxs("div",{className:"bg-gray-50 border border-gray-100 relative overflow-hidden",children:[ee.leftImage&&c.jsx("img",{src:ee.leftImage,className:"absolute left-0 top-0 h-full w-1/3 object-cover opacity-50"}),ee.topImage&&c.jsx("img",{src:ee.topImage,className:"absolute right-0 top-0 h-1/2 w-2/3 object-contain opacity-50"})]},be))})}),c.jsxs("div",{className:"flex-grow p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:B.title}),c.jsx("p",{className:"text-xs text-gray-500 font-medium bg-gray-100 inline-block px-2 py-0.5 rounded",children:new Date(B.createdAt).toLocaleDateString("tr-TR")})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(Nt,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>Ie(B),children:[c.jsx(Se.Printer,{})," Yazdr"]}),c.jsx(Nt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-blue-600",onClick:()=>me(B),children:c.jsx(Se.Edit,{})}),c.jsx(Nt,{variant:"secondary",className:"px-3 py-1.5 text-xs text-red-600",onClick:()=>R(B.id),children:c.jsx(Se.Trash,{})})]})]})]})},B.id)),l.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"Kaytl etiket sayfas yok."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.map(B=>c.jsxs(Ol,{className:"p-4 hover:shadow-xl transition-all group relative",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3 truncate border-b border-gray-100 pb-2",children:B.name}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white text-[9px] h-32 flex gap-2",children:[c.jsx("div",{className:"w-1/3 h-full bg-gray-50 flex items-center justify-center text-gray-300 overflow-hidden rounded relative",children:B.leftImage?c.jsx("img",{src:B.leftImage,className:"absolute inset-0 w-full h-full object-cover"}):"IMG"}),c.jsxs("div",{className:"w-2/3 flex flex-col h-full",children:[c.jsx("div",{className:"h-1/3 bg-gray-50 mb-2 flex items-center justify-center overflow-hidden border border-gray-100 relative rounded",children:B.topImage?c.jsx("img",{src:B.topImage,className:"absolute inset-0 w-full h-full object-cover"}):"LOGO"}),c.jsxs("div",{className:"space-y-1 mt-auto",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"KOD:"}),c.jsx("span",{className:"truncate w-16 text-right",children:B.kod})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"SIZE:"}),c.jsx("span",{className:"truncate w-16 text-right",children:B.size})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"CLR:"}),c.jsx("span",{className:"truncate w-16 text-right",children:B.color})]})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>V(B),className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",children:c.jsx(Se.Edit,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>le(B.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Se.Trash,{className:"w-4 h-4"})})]})]},B.id)),f.length===0&&c.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"ablon bulunamad."})]})}),c.jsx(Ca,{isOpen:p,onClose:()=>x(!1),title:ne?"Etiket Sayfasn Dzenle":"Yeni Etiket Sayfas",maxWidth:"max-w-7xl",children:c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sayfa Bal"}),c.jsx(Tt,{required:!0,placeholder:"rn: 2025 Kap Siparileri",value:K.title,onChange:B=>W({...K,title:B.target.value})})]}),c.jsx("button",{type:"button",onClick:N,className:"px-5 py-3 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold hover:bg-purple-200 transition-colors shadow-sm",children:"lkini Hepsine Uygula"})]}),c.jsx("div",{className:"bg-gray-100 p-4 rounded-2xl border border-gray-200 h-[60vh] overflow-y-auto custom-scrollbar",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:K.labels.map((B,ee)=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md z-30 pointer-events-none",children:ee+1}),H(B,ee,C)]},ee))})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Nt,{variant:"secondary",type:"button",onClick:()=>x(!1),children:"ptal"}),c.jsx(Nt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsx(Ca,{isOpen:_,onClose:()=>T(!1),title:ne?"ablonu Dzenle":"Yeni ablon",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ablon Ad"}),c.jsx(Tt,{required:!0,placeholder:"rn: Beyaz Panel Kap",value:O.name,onChange:B=>se({...O,name:B.target.value})})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:H(O,-1,(B,ee,be)=>se({...O,[ee]:be}),!0)}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/50",children:[c.jsx(Nt,{variant:"secondary",type:"button",onClick:()=>T(!1),children:"ptal"}),c.jsx(Nt,{variant:"primary",type:"submit",children:"Kaydet"})]})]})})]})}function fC(){const[i,e]=Q.useState(null),[n,r]=Q.useState(!0),[l,u]=Q.useState("dashboard"),[f,y]=Q.useState(!1);Q.useEffect(()=>{const A=yS(ts,U=>{e(U),r(!1)});return()=>A()},[]);const p=async()=>{try{await xS(ts)}catch(A){console.error("k yaplrken hata:",A)}},x={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Tag:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},_=[{id:"dashboard",label:"Dashboard",icon:x.Home},{id:"musteriler",label:"Mteriler",icon:x.Users},{id:"urunler",label:"rnler",icon:x.Box},{id:"stok",label:"Stok Durumu",icon:x.Chart},{id:"siparis",label:"Sipari Formu",icon:x.Cart},{id:"teklif",label:"Teklif Formu",icon:x.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:x.Calculator},{id:"calisan",label:"alanlar",icon:x.Briefcase},{id:"etiket",label:"Etiket Basm",icon:x.Tag}],T=()=>{switch(l){case"dashboard":return c.jsx(ib,{onNavigate:u});case"musteriler":return c.jsx(W4,{});case"urunler":return c.jsx(tC,{});case"stok":return c.jsx(rC,{});case"siparis":return c.jsx(Z4,{});case"teklif":return c.jsx(aC,{});case"fiyatlandirma":return c.jsx(cC,{});case"calisan":return c.jsx(dC,{});case"etiket":return c.jsx(hC,{});default:return c.jsx(ib,{onNavigate:u})}};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>y(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>y(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(x.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{u(A.id),y(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${l===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${l===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(x.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>y(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(x.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:T()})})]})]}):c.jsx(G4,{})}C2.createRoot(document.getElementById("root")).render(c.jsx(Q.StrictMode,{children:c.jsx(fC,{})}));
