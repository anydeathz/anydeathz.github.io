(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function dw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nm={exports:{}},zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function hw(){if(hx)return zo;hx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:d}}return zo.Fragment=e,zo.jsx=s,zo.jsxs=s,zo}var fx;function fw(){return fx||(fx=1,nm.exports=hw()),nm.exports}var c=fw(),sm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function mw(){if(mx)return qe;mx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function q(S){return S===null||typeof S!="object"?null:(S=A&&S[A]||S["@@iterator"],typeof S=="function"?S:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,z={};function te(S,P,re){this.props=S,this.context=P,this.refs=z,this.updater=re||J}te.prototype.isReactComponent={},te.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},te.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function W(){}W.prototype=te.prototype;function pe(S,P,re){this.props=S,this.context=P,this.refs=z,this.updater=re||J}var he=pe.prototype=new W;he.constructor=pe,X(he,te.prototype),he.isPureReactComponent=!0;var ve=Array.isArray;function Ee(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function j(S,P,re){var L=re.ref;return{$$typeof:r,type:S,key:P,ref:L!==void 0?L:null,props:re}}function k(S,P){return j(S.type,P,S.props)}function C(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function V(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(re){return P[re]})}var I=/\/+/g;function ce(S,P){return typeof S=="object"&&S!==null&&S.key!=null?V(""+S.key):P.toString(36)}function Ie(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Ee,Ee):(S.status="pending",S.then(function(P){S.status==="pending"&&(S.status="fulfilled",S.value=P)},function(P){S.status==="pending"&&(S.status="rejected",S.reason=P)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function K(S,P,re,L,M){var Z=typeof S;(Z==="undefined"||Z==="boolean")&&(S=null);var ue=!1;if(S===null)ue=!0;else switch(Z){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(S.$$typeof){case r:case e:ue=!0;break;case _:return ue=S._init,K(ue(S._payload),P,re,L,M)}}if(ue)return M=M(S),ue=L===""?"."+ce(S,0):L,ve(M)?(re="",ue!=null&&(re=ue.replace(I,"$&/")+"/"),K(M,P,re,"",function(Fe){return Fe})):M!=null&&(C(M)&&(M=k(M,re+(M.key==null||S&&S.key===M.key?"":(""+M.key).replace(I,"$&/")+"/")+ue)),P.push(M)),1;ue=0;var Ne=L===""?".":L+":";if(ve(S))for(var Re=0;Re<S.length;Re++)L=S[Re],Z=Ne+ce(L,Re),ue+=K(L,P,re,Z,M);else if(Re=q(S),typeof Re=="function")for(S=Re.call(S),Re=0;!(L=S.next()).done;)L=L.value,Z=Ne+ce(L,Re++),ue+=K(L,P,re,Z,M);else if(Z==="object"){if(typeof S.then=="function")return K(Ie(S),P,re,L,M);throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ge(S,P,re){if(S==null)return S;var L=[],M=0;return K(S,L,"","",function(Z){return P.call(re,Z,M++)}),L}function _e(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(re){(S._status===0||S._status===-1)&&(S._status=1,S._result=re)},function(re){(S._status===0||S._status===-1)&&(S._status=2,S._result=re)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var Ue=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},Qe={map:ge,forEach:function(S,P,re){ge(S,function(){P.apply(this,arguments)},re)},count:function(S){var P=0;return ge(S,function(){P++}),P},toArray:function(S){return ge(S,function(P){return P})||[]},only:function(S){if(!C(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return qe.Activity=E,qe.Children=Qe,qe.Component=te,qe.Fragment=s,qe.Profiler=o,qe.PureComponent=pe,qe.StrictMode=i,qe.Suspense=x,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return R.H.useMemoCache(S)}},qe.cache=function(S){return function(){return S.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(S,P,re){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var L=X({},S.props),M=S.key;if(P!=null)for(Z in P.key!==void 0&&(M=""+P.key),P)!T.call(P,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&P.ref===void 0||(L[Z]=P[Z]);var Z=arguments.length-2;if(Z===1)L.children=re;else if(1<Z){for(var ue=Array(Z),Ne=0;Ne<Z;Ne++)ue[Ne]=arguments[Ne+2];L.children=ue}return j(S.type,M,L)},qe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:d,_context:S},S},qe.createElement=function(S,P,re){var L,M={},Z=null;if(P!=null)for(L in P.key!==void 0&&(Z=""+P.key),P)T.call(P,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(M[L]=P[L]);var ue=arguments.length-2;if(ue===1)M.children=re;else if(1<ue){for(var Ne=Array(ue),Re=0;Re<ue;Re++)Ne[Re]=arguments[Re+2];M.children=Ne}if(S&&S.defaultProps)for(L in ue=S.defaultProps,ue)M[L]===void 0&&(M[L]=ue[L]);return j(S,Z,M)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(S){return{$$typeof:p,render:S}},qe.isValidElement=C,qe.lazy=function(S){return{$$typeof:_,_payload:{_status:-1,_result:S},_init:_e}},qe.memo=function(S,P){return{$$typeof:y,type:S,compare:P===void 0?null:P}},qe.startTransition=function(S){var P=R.T,re={};R.T=re;try{var L=S(),M=R.S;M!==null&&M(re,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(Ee,Ue)}catch(Z){Ue(Z)}finally{P!==null&&re.types!==null&&(P.types=re.types),R.T=P}},qe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qe.use=function(S){return R.H.use(S)},qe.useActionState=function(S,P,re){return R.H.useActionState(S,P,re)},qe.useCallback=function(S,P){return R.H.useCallback(S,P)},qe.useContext=function(S){return R.H.useContext(S)},qe.useDebugValue=function(){},qe.useDeferredValue=function(S,P){return R.H.useDeferredValue(S,P)},qe.useEffect=function(S,P){return R.H.useEffect(S,P)},qe.useEffectEvent=function(S){return R.H.useEffectEvent(S)},qe.useId=function(){return R.H.useId()},qe.useImperativeHandle=function(S,P,re){return R.H.useImperativeHandle(S,P,re)},qe.useInsertionEffect=function(S,P){return R.H.useInsertionEffect(S,P)},qe.useLayoutEffect=function(S,P){return R.H.useLayoutEffect(S,P)},qe.useMemo=function(S,P){return R.H.useMemo(S,P)},qe.useOptimistic=function(S,P){return R.H.useOptimistic(S,P)},qe.useReducer=function(S,P,re){return R.H.useReducer(S,P,re)},qe.useRef=function(S){return R.H.useRef(S)},qe.useState=function(S){return R.H.useState(S)},qe.useSyncExternalStore=function(S,P,re){return R.H.useSyncExternalStore(S,P,re)},qe.useTransition=function(){return R.H.useTransition()},qe.version="19.2.0",qe}var gx;function Zm(){return gx||(gx=1,sm.exports=mw()),sm.exports}var ne=Zm();const rb=dw(ne);var rm={exports:{}},Bo={},im={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function gw(){return px||(px=1,(function(r){function e(K,ge){var _e=K.length;K.push(ge);e:for(;0<_e;){var Ue=_e-1>>>1,Qe=K[Ue];if(0<o(Qe,ge))K[Ue]=ge,K[_e]=Qe,_e=Ue;else break e}}function s(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ge=K[0],_e=K.pop();if(_e!==ge){K[0]=_e;e:for(var Ue=0,Qe=K.length,S=Qe>>>1;Ue<S;){var P=2*(Ue+1)-1,re=K[P],L=P+1,M=K[L];if(0>o(re,_e))L<Qe&&0>o(M,re)?(K[Ue]=M,K[L]=_e,Ue=L):(K[Ue]=re,K[P]=_e,Ue=P);else if(L<Qe&&0>o(M,_e))K[Ue]=M,K[L]=_e,Ue=L;else break e}}return ge}function o(K,ge){var _e=K.sortIndex-ge.sortIndex;return _e!==0?_e:K.id-ge.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var x=[],y=[],_=1,E=null,A=3,q=!1,J=!1,X=!1,z=!1,te=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function he(K){for(var ge=s(y);ge!==null;){if(ge.callback===null)i(y);else if(ge.startTime<=K)i(y),ge.sortIndex=ge.expirationTime,e(x,ge);else break;ge=s(y)}}function ve(K){if(X=!1,he(K),!J)if(s(x)!==null)J=!0,Ee||(Ee=!0,V());else{var ge=s(y);ge!==null&&Ie(ve,ge.startTime-K)}}var Ee=!1,R=-1,T=5,j=-1;function k(){return z?!0:!(r.unstable_now()-j<T)}function C(){if(z=!1,Ee){var K=r.unstable_now();j=K;var ge=!0;try{e:{J=!1,X&&(X=!1,W(R),R=-1),q=!0;var _e=A;try{t:{for(he(K),E=s(x);E!==null&&!(E.expirationTime>K&&k());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,A=E.priorityLevel;var Qe=Ue(E.expirationTime<=K);if(K=r.unstable_now(),typeof Qe=="function"){E.callback=Qe,he(K),ge=!0;break t}E===s(x)&&i(x),he(K)}else i(x);E=s(x)}if(E!==null)ge=!0;else{var S=s(y);S!==null&&Ie(ve,S.startTime-K),ge=!1}}break e}finally{E=null,A=_e,q=!1}ge=void 0}}finally{ge?V():Ee=!1}}}var V;if(typeof pe=="function")V=function(){pe(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ce=I.port2;I.port1.onmessage=C,V=function(){ce.postMessage(null)}}else V=function(){te(C,0)};function Ie(K,ge){R=te(function(){K(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var ge=3;break;default:ge=A}var _e=A;A=ge;try{return K()}finally{A=_e}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(K,ge){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var _e=A;A=K;try{return ge()}finally{A=_e}},r.unstable_scheduleCallback=function(K,ge,_e){var Ue=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ue+_e:Ue):_e=Ue,K){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=_e+Qe,K={id:_++,callback:ge,priorityLevel:K,startTime:_e,expirationTime:Qe,sortIndex:-1},_e>Ue?(K.sortIndex=_e,e(y,K),s(x)===null&&K===s(y)&&(X?(W(R),R=-1):X=!0,Ie(ve,_e-Ue))):(K.sortIndex=Qe,e(x,K),J||q||(J=!0,Ee||(Ee=!0,V()))),K},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(K){var ge=A;return function(){var _e=A;A=ge;try{return K.apply(this,arguments)}finally{A=_e}}}})(am)),am}var yx;function pw(){return yx||(yx=1,im.exports=gw()),im.exports}var lm={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function yw(){if(xx)return pn;xx=1;var r=Zm();function e(x){var y="https://react.dev/errors/"+x;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(x,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:x,containerInfo:y,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,y){if(x==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(x,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(x,y,null,_)},pn.flushSync=function(x){var y=f.T,_=i.p;try{if(f.T=null,i.p=2,x)return x()}finally{f.T=y,i.p=_,i.d.f()}},pn.preconnect=function(x,y){typeof x=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(x,y))},pn.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},pn.preinit=function(x,y){if(typeof x=="string"&&y&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(x,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:q}):_==="script"&&i.d.X(x,{crossOrigin:E,integrity:A,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},pn.preinitModule=function(x,y){if(typeof x=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);i.d.M(x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(x)},pn.preload=function(x,y){if(typeof x=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin);i.d.L(x,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},pn.preloadModule=function(x,y){if(typeof x=="string")if(y){var _=p(y.as,y.crossOrigin);i.d.m(x,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(x)},pn.requestFormReset=function(x){i.d.r(x)},pn.unstable_batchedUpdates=function(x,y){return x(y)},pn.useFormState=function(x,y,_){return f.H.useFormState(x,y,_)},pn.useFormStatus=function(){return f.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var vx;function xw(){if(vx)return lm.exports;vx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=yw(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function vw(){if(bx)return Bo;bx=1;var r=pw(),e=Zm(),s=xw();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function x(t){if(d(t)!==t)throw Error(i(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return x(h),t;if(m===l)return x(h),n;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=m;break}if(w===l){v=!0,l=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,l=h;break}if(w===l){v=!0,l=m,a=h;break}w=w.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case te:return"Profiler";case z:return"StrictMode";case ve:return"Suspense";case Ee:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case J:return"Portal";case pe:return t.displayName||"Context";case W:return(t._context.displayName||"Context")+".Consumer";case he:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:ce(t.type)||"Memo";case T:n=t._payload,t=t._init;try{return ce(t(n))}catch{}}return null}var Ie=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ue=[],Qe=-1;function S(t){return{current:t}}function P(t){0>Qe||(t.current=Ue[Qe],Ue[Qe]=null,Qe--)}function re(t,n){Qe++,Ue[Qe]=t.current,t.current=n}var L=S(null),M=S(null),Z=S(null),ue=S(null);function Ne(t,n){switch(re(Z,n),re(M,t),re(L,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Oy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Oy(n),t=Vy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(L),re(L,t)}function Re(){P(L),P(M),P(Z)}function Fe(t){t.memoizedState!==null&&re(ue,t);var n=L.current,a=Vy(n,t.type);n!==a&&(re(M,t),re(L,a))}function vt(t){M.current===t&&(P(L),P(M)),ue.current===t&&(P(ue),Vo._currentValue=_e)}var nt,ae;function be(t){if(nt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);nt=n&&n[1]||"",ae=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+t+ae}var fe=!1;function Ce(t,n){if(!t||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch($){var Y=$}Reflect.construct(t,[],oe)}else{try{oe.call()}catch($){Y=$}t.call(oe.prototype)}}else{try{throw Error()}catch($){Y=$}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var D=v.split(`
`),F=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var se=`
`+D[l].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=l&&0<=h);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?be(a):""}function G(t,n){switch(t.tag){case 26:case 27:case 5:return be(t.type);case 16:return be("Lazy");case 13:return t.child!==n&&n!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Ce(t.type,!1);case 11:return Ce(t.type.render,!1);case 1:return Ce(t.type,!0);case 31:return be("Activity");default:return""}}function ee(t){try{var n="",a=null;do n+=G(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ye=Object.prototype.hasOwnProperty,Ae=r.unstable_scheduleCallback,me=r.unstable_cancelCallback,ke=r.unstable_shouldYield,it=r.unstable_requestPaint,at=r.unstable_now,Xt=r.unstable_getCurrentPriorityLevel,sn=r.unstable_ImmediatePriority,rn=r.unstable_UserBlockingPriority,_n=r.unstable_NormalPriority,an=r.unstable_LowPriority,hs=r.unstable_IdlePriority,Sc=r.log,Nc=r.unstable_setDisableYieldValue,fs=null,ln=null;function Qn(t){if(typeof Sc=="function"&&Nc(t),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(fs,t)}catch{}}var It=Math.clz32?Math.clz32:jc,Ac=Math.log,Aa=Math.LN2;function jc(t){return t>>>=0,t===0?32:31-(Ac(t)/Aa|0)|0}var Rs=256,zi=262144,Pt=4194304;function Is(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ks(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=Is(l):(v&=w,v!==0?h=Is(v):a||(a=w&~t,a!==0&&(h=Is(a))))):(w=l&~m,w!==0?h=Is(w):v!==0?h=Is(v):a||(a=l&~t,a!==0&&(h=Is(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function ms(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ih(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var t=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),t}function Ds(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Bi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ah(t,n,a,l,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=v&~a;0<a;){var se=31-It(a),oe=1<<se;w[se]=0,D[se]=-1;var Y=F[se];if(Y!==null)for(F[se]=null,se=0;se<Y.length;se++){var $=Y[se];$!==null&&($.lane&=-536870913)}a&=~oe}l!==0&&qi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~n))}function qi(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-It(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function zl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-It(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function Bl(t,n){var a=n&-n;return a=(a&42)!==0?1:Hi(a),(a&(t.suspendedLanes|n))!==0?0:a}function Hi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function lr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rc(){var t=ge.p;return t!==0?t:(t=window.event,t===void 0?32:ix(t.type))}function gs(t,n){var a=ge.p;try{return ge.p=t,n()}finally{ge.p=a}}var ps=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ps,Jt="__reactProps$"+ps,Ms="__reactContainer$"+ps,ja="__reactEvents$"+ps,lh="__reactListeners$"+ps,Ic="__reactHandles$"+ps,kc="__reactResources$"+ps,Os="__reactMarker$"+ps;function Ca(t){delete t[Ut],delete t[Jt],delete t[ja],delete t[lh],delete t[Ic]}function Vs(t){var n=t[Ut];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Ms]||a[Ut]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Hy(t);t!==null;){if(a=t[Ut])return a;t=Hy(t)}return n}t=a,a=t.parentNode}return null}function $n(t){if(t=t[Ut]||t[Ms]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function On(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Ls(t){var n=t[kc];return n||(n=t[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function zt(t){t[Os]=!0}var ql=new Set,Hl={};function Ps(t,n){Us(t,n),Us(t+"Capture",n)}function Us(t,n){for(Hl[t]=n,t=0;t<n.length;t++)ql.add(n[t])}var Fl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gl={},Yl={};function Dc(t){return ye.call(Yl,t)?!0:ye.call(Gl,t)?!1:Fl.test(t)?Yl[t]=!0:(Gl[t]=!0,!1)}function Ra(t,n,a){if(Dc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Vn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Bt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ur(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Kl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ht(t){if(!t._valueTracker){var n=Ur(t)?"checked":"value";t._valueTracker=Kl(t,n,""+t[n])}}function Fi(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Ur(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gi=/[\n"\\]/g;function Nn(t){return t.replace(Gi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ia(t,n,a,l,h,m,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+en(n)):t.value!==""+en(n)&&(t.value=""+en(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?Ql(t,v,en(n)):a!=null?Ql(t,v,en(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+en(w):t.removeAttribute("name")}function Mc(t,n,a,l,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ht(t);return}a=a!=null?""+en(a):"",n=n!=null?""+en(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ht(t)}function Ql(t,n,a){n==="number"&&zs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function zr(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Oc(t,n,a){if(n!=null&&(n=""+en(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+en(a):""}function Br(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(Ie(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=en(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ht(t)}function An(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $l(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Vc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Xl(t,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&$l(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&$l(t,m,n[m])}function ka(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(t){return qr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ys(){}var Wl=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hr=null,Bs=null;function Yi(t){var n=$n(t);if(n&&(t=n.stateNode)){var a=t[Jt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ia(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[Jt]||null;if(!h)throw Error(i(90));Ia(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Fi(l)}break e;case"textarea":Oc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&zr(t,!!a.multiple,n,!1)}}}var Ma=!1;function Fr(t,n,a){if(Ma)return t(n,a);Ma=!0;try{var l=t(n);return l}finally{if(Ma=!1,(Hr!==null||Bs!==null)&&(Ru(),Hr&&(n=Hr,t=Bs,Bs=Hr=null,Yi(n),t)))for(n=0;n<t.length;n++)Yi(t[n])}}function xs(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Jt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ki=!1;if(Wn)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Ki=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Ki=!1}var qs=null,Zl=null,Qi=null;function Jl(){if(Qi)return Qi;var t,n=Zl,a=n.length,l,h="value"in qs?qs.value:qs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&n[a-l]===h[m-l];l++);return Qi=h.slice(t,1<l?1-l:void 0)}function $i(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function or(){return!0}function vs(){return!1}function on(t){function n(a,l,h,m,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?or:vs,this.isPropagationStopped=vs,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),n}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=on(cr),Gr=E({},cr,{view:0,detail:0}),eo=on(Gr),Yr,Oa,Fs,Va=E({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fs&&(Fs&&t.type==="mousemove"?(Yr=t.screenX-Fs.screenX,Oa=t.screenY-Fs.screenY):Oa=Yr=0,Fs=t),Yr)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),to=on(Va),Xi=E({},Va,{dataTransfer:0}),Pc=on(Xi),Uc=E({},Gr,{relatedTarget:0}),Wi=on(Uc),no=E({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=on(no),La=E({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bc=on(La),qc=E({},cr,{data:0}),Gs=on(qc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Gc[t])?!!n[t]:!1}function Kr(){return Yc}var wn=E({},Gr,{key:function(t){if(t.key){var n=Hc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=$i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(t){return t.type==="keypress"?$i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kc=on(wn),Qc=E({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ur=on(Qc),u=E({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),g=on(u),b=E({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=on(b),B=E({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=on(B),xe=E({},cr,{newState:0,oldState:0}),Ge=on(xe),kt=[9,13,27,32],ct=Wn&&"CompositionEvent"in window,Nt=null;Wn&&"documentMode"in document&&(Nt=document.documentMode);var Zn=Wn&&"TextEvent"in window&&!Nt,Ys=Wn&&(!ct||Nt&&8<Nt&&11>=Nt),bs=" ",_s=!1;function Zi(t,n){switch(t){case"keyup":return kt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function O1(t,n){switch(t){case"compositionend":return Pa(n);case"keypress":return n.which!==32?null:(_s=!0,bs);case"textInput":return t=n.data,t===bs&&_s?null:t;default:return null}}function V1(t,n){if(Ua)return t==="compositionend"||!ct&&Zi(t,n)?(t=Jl(),Qi=Zl=qs=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ys&&n.locale!=="ko"?null:n.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!L1[t.type]:n==="textarea"}function Kg(t,n,a,l){Hr?Bs?Bs.push(l):Bs=[l]:Hr=l,n=Lu(n,"onChange"),0<n.length&&(a=new Hs("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var so=null,ro=null;function P1(t){Cy(t,0)}function $c(t){var n=On(t);if(Fi(n))return t}function Qg(t,n){if(t==="change")return n}var $g=!1;if(Wn){var oh;if(Wn){var ch="oninput"in document;if(!ch){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),ch=typeof Xg.oninput=="function"}oh=ch}else oh=!1;$g=oh&&(!document.documentMode||9<document.documentMode)}function Wg(){so&&(so.detachEvent("onpropertychange",Zg),ro=so=null)}function Zg(t){if(t.propertyName==="value"&&$c(ro)){var n=[];Kg(n,ro,t,Xn(t)),Fr(P1,n)}}function U1(t,n,a){t==="focusin"?(Wg(),so=n,ro=a,so.attachEvent("onpropertychange",Zg)):t==="focusout"&&Wg()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(ro)}function B1(t,n){if(t==="click")return $c(n)}function q1(t,n){if(t==="input"||t==="change")return $c(n)}function H1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ln=typeof Object.is=="function"?Object.is:H1;function io(t,n){if(Ln(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ye.call(n,h)||!Ln(t[h],n[h]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,n){var a=Jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jg(a)}}function tp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?tp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function np(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=zs(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=zs(t.document)}return n}function uh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var F1=Wn&&"documentMode"in document&&11>=document.documentMode,za=null,dh=null,ao=null,hh=!1;function sp(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hh||za==null||za!==zs(l)||(l=za,"selectionStart"in l&&uh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ao&&io(ao,l)||(ao=l,l=Lu(dh,"onSelect"),0<l.length&&(n=new Hs("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=za)))}function Ji(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ba={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},fh={},rp={};Wn&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function ea(t){if(fh[t])return fh[t];if(!Ba[t])return t;var n=Ba[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in rp)return fh[t]=n[a];return t}var ip=ea("animationend"),ap=ea("animationiteration"),lp=ea("animationstart"),G1=ea("transitionrun"),Y1=ea("transitionstart"),K1=ea("transitioncancel"),op=ea("transitionend"),cp=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function ws(t,n){cp.set(t,n),Ps(n,[t])}var Xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],qa=0,gh=0;function Wc(){for(var t=qa,n=gh=qa=0;n<t;){var a=Jn[n];Jn[n++]=null;var l=Jn[n];Jn[n++]=null;var h=Jn[n];Jn[n++]=null;var m=Jn[n];if(Jn[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}m!==0&&up(a,h,m)}}function Zc(t,n,a,l){Jn[qa++]=t,Jn[qa++]=n,Jn[qa++]=a,Jn[qa++]=l,gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ph(t,n,a,l){return Zc(t,n,a,l),Jc(t)}function ta(t,n){return Zc(t,null,null,n),Jc(t)}function up(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-It(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Jc(t){if(50<Co)throw Co=0,Nf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ha={};function Q1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,n,a,l){return new Q1(t,n,a,l)}function yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,n){var a=t.alternate;return a===null?(a=Pn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function eu(t,n,a,l,h,m){var v=0;if(l=t,typeof t=="function")yh(t)&&(v=1);else if(typeof t=="string")v=J2(t,a,L.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Pn(31,a,n,h),t.elementType=j,t.lanes=m,t;case X:return na(a.children,h,m,n);case z:v=8,h|=24;break;case te:return t=Pn(12,a,n,h|2),t.elementType=te,t.lanes=m,t;case ve:return t=Pn(13,a,n,h),t.elementType=ve,t.lanes=m,t;case Ee:return t=Pn(19,a,n,h),t.elementType=Ee,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:v=10;break e;case W:v=9;break e;case he:v=11;break e;case R:v=14;break e;case T:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return n=Pn(v,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function na(t,n,a,l){return t=Pn(7,t,l,n),t.lanes=a,t}function xh(t,n,a){return t=Pn(6,t,null,n),t.lanes=a,t}function hp(t){var n=Pn(18,null,null,0);return n.stateNode=t,n}function vh(t,n,a){return n=Pn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var fp=new WeakMap;function es(t,n){if(typeof t=="object"&&t!==null){var a=fp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:ee(n)},fp.set(t,n),n)}return{value:t,source:n,stack:ee(n)}}var Fa=[],Ga=0,tu=null,lo=0,ts=[],ns=0,Qr=null,Ks=1,Qs="";function hr(t,n){Fa[Ga++]=lo,Fa[Ga++]=tu,tu=t,lo=n}function mp(t,n,a){ts[ns++]=Ks,ts[ns++]=Qs,ts[ns++]=Qr,Qr=t;var l=Ks;t=Qs;var h=32-It(l)-1;l&=~(1<<h),a+=1;var m=32-It(n)+h;if(30<m){var v=h-h%5;m=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ks=1<<32-It(n)+h|a<<h|l,Qs=m+t}else Ks=1<<m|a<<h|l,Qs=t}function bh(t){t.return!==null&&(hr(t,1),mp(t,1,0))}function _h(t){for(;t===tu;)tu=Fa[--Ga],Fa[Ga]=null,lo=Fa[--Ga],Fa[Ga]=null;for(;t===Qr;)Qr=ts[--ns],ts[ns]=null,Qs=ts[--ns],ts[ns]=null,Ks=ts[--ns],ts[ns]=null}function gp(t,n){ts[ns++]=Ks,ts[ns++]=Qs,ts[ns++]=Qr,Ks=n.id,Qs=n.overflow,Qr=t}var cn=null,wt=null,st=!1,$r=null,ss=!1,wh=Error(i(519));function Xr(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oo(es(n,t)),wh}function pp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Ut]=t,n[Jt]=l,a){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(a=0;a<Io.length;a++)Xe(Io[a],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":Xe("invalid",n),Mc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Xe("invalid",n);break;case"textarea":Xe("invalid",n),Br(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Dy(n.textContent,a)?(l.popover!=null&&(Xe("beforetoggle",n),Xe("toggle",n)),l.onScroll!=null&&Xe("scroll",n),l.onScrollEnd!=null&&Xe("scrollend",n),l.onClick!=null&&(n.onclick=ys),n=!0):n=!1,n||Xr(t,!0)}function yp(t){for(cn=t.return;cn;)switch(cn.tag){case 5:case 31:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:cn=cn.return}}function Ya(t){if(t!==cn)return!1;if(!st)return yp(t),st=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Bf(t.type,t.memoizedProps)),a=!a),a&&wt&&Xr(t),yp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));wt=qy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));wt=qy(t)}else n===27?(n=wt,ui(t.type)?(t=Yf,Yf=null,wt=t):wt=n):wt=cn?is(t.stateNode.nextSibling):null;return!0}function sa(){wt=cn=null,st=!1}function Eh(){var t=$r;return t!==null&&(In===null?In=t:In.push.apply(In,t),$r=null),t}function oo(t){$r===null?$r=[t]:$r.push(t)}var Th=S(null),ra=null,fr=null;function Wr(t,n,a){re(Th,n._currentValue),n._currentValue=a}function mr(t){t._currentValue=Th.current,P(Th)}function Sh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Nh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Sh(m.return,a,t),l||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(i(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Sh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ka(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var w=h.type;Ln(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===ue.current){if(v=h.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Vo):t=[Vo])}h=h.return}t!==null&&Nh(n,t,a,l),n.flags|=262144}function nu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){ra=t,fr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return xp(ra,t)}function su(t,n){return ra===null&&ia(t),xp(t,n)}function xp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},fr===null){if(t===null)throw Error(i(308));fr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else fr=fr.next=n;return a}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},X1=r.unstable_scheduleCallback,W1=r.unstable_NormalPriority,qt={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new $1,data:new Map,refCount:0}}function co(t){t.refCount--,t.refCount===0&&X1(W1,function(){t.controller.abort()})}var uo=null,jh=0,Qa=0,$a=null;function Z1(t,n){if(uo===null){var a=uo=[];jh=0,Qa=kf(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jh++,n.then(vp,vp),n}function vp(){if(--jh===0&&uo!==null){$a!==null&&($a.status="fulfilled");var t=uo;uo=null,Qa=0,$a=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function J1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var bp=K.S;K.S=function(t,n){sy=at(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Z1(t,n),bp!==null&&bp(t,n)};var aa=S(null);function Ch(){var t=aa.current;return t!==null?t:bt.pooledCache}function ru(t,n){n===null?re(aa,aa.current):re(aa,n.pool)}function _p(){var t=Ch();return t===null?null:{parent:qt._currentValue,pool:t}}var Xa=Error(i(460)),Rh=Error(i(474)),iu=Error(i(542)),au={then:function(){}};function wp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ep(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(ys,ys),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(ys,ys);else{if(t=bt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw oa=n,Xa}}function la(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oa=a,Xa):a}}var oa=null;function Tp(){if(oa===null)throw Error(i(459));var t=oa;return oa=null,t}function Sp(t){if(t===Xa||t===iu)throw Error(i(483))}var Wa=null,ho=0;function lu(t){var n=ho;return ho+=1,Wa===null&&(Wa=[]),Ep(Wa,t,n)}function fo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ou(t,n){throw n.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Np(t){function n(U,O){if(t){var H=U.deletions;H===null?(U.deletions=[O],U.flags|=16):H.push(O)}}function a(U,O){if(!t)return null;for(;O!==null;)n(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=dr(U,O),U.index=0,U.sibling=null,U}function m(U,O,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<O?(U.flags|=67108866,O):H):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,O,H,ie){return O===null||O.tag!==6?(O=xh(H,U.mode,ie),O.return=U,O):(O=h(O,H),O.return=U,O)}function D(U,O,H,ie){var De=H.type;return De===X?se(U,O,H.props.children,ie,H.key):O!==null&&(O.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&la(De)===O.type)?(O=h(O,H.props),fo(O,H),O.return=U,O):(O=eu(H.type,H.key,H.props,null,U.mode,ie),fo(O,H),O.return=U,O)}function F(U,O,H,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=vh(H,U.mode,ie),O.return=U,O):(O=h(O,H.children||[]),O.return=U,O)}function se(U,O,H,ie,De){return O===null||O.tag!==7?(O=na(H,U.mode,ie,De),O.return=U,O):(O=h(O,H),O.return=U,O)}function oe(U,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=xh(""+O,U.mode,H),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case q:return H=eu(O.type,O.key,O.props,null,U.mode,H),fo(H,O),H.return=U,H;case J:return O=vh(O,U.mode,H),O.return=U,O;case T:return O=la(O),oe(U,O,H)}if(Ie(O)||V(O))return O=na(O,U.mode,H,null),O.return=U,O;if(typeof O.then=="function")return oe(U,lu(O),H);if(O.$$typeof===pe)return oe(U,su(U,O),H);ou(U,O)}return null}function Y(U,O,H,ie){var De=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return De!==null?null:w(U,O,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case q:return H.key===De?D(U,O,H,ie):null;case J:return H.key===De?F(U,O,H,ie):null;case T:return H=la(H),Y(U,O,H,ie)}if(Ie(H)||V(H))return De!==null?null:se(U,O,H,ie,null);if(typeof H.then=="function")return Y(U,O,lu(H),ie);if(H.$$typeof===pe)return Y(U,O,su(U,H),ie);ou(U,H)}return null}function $(U,O,H,ie,De){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(H)||null,w(O,U,""+ie,De);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case q:return U=U.get(ie.key===null?H:ie.key)||null,D(O,U,ie,De);case J:return U=U.get(ie.key===null?H:ie.key)||null,F(O,U,ie,De);case T:return ie=la(ie),$(U,O,H,ie,De)}if(Ie(ie)||V(ie))return U=U.get(H)||null,se(O,U,ie,De,null);if(typeof ie.then=="function")return $(U,O,H,lu(ie),De);if(ie.$$typeof===pe)return $(U,O,H,su(O,ie),De);ou(O,ie)}return null}function Se(U,O,H,ie){for(var De=null,lt=null,je=O,Ke=O=0,Ze=null;je!==null&&Ke<H.length;Ke++){je.index>Ke?(Ze=je,je=null):Ze=je.sibling;var ot=Y(U,je,H[Ke],ie);if(ot===null){je===null&&(je=Ze);break}t&&je&&ot.alternate===null&&n(U,je),O=m(ot,O,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot,je=Ze}if(Ke===H.length)return a(U,je),st&&hr(U,Ke),De;if(je===null){for(;Ke<H.length;Ke++)je=oe(U,H[Ke],ie),je!==null&&(O=m(je,O,Ke),lt===null?De=je:lt.sibling=je,lt=je);return st&&hr(U,Ke),De}for(je=l(je);Ke<H.length;Ke++)Ze=$(je,U,Ke,H[Ke],ie),Ze!==null&&(t&&Ze.alternate!==null&&je.delete(Ze.key===null?Ke:Ze.key),O=m(Ze,O,Ke),lt===null?De=Ze:lt.sibling=Ze,lt=Ze);return t&&je.forEach(function(gi){return n(U,gi)}),st&&hr(U,Ke),De}function Oe(U,O,H,ie){if(H==null)throw Error(i(151));for(var De=null,lt=null,je=O,Ke=O=0,Ze=null,ot=H.next();je!==null&&!ot.done;Ke++,ot=H.next()){je.index>Ke?(Ze=je,je=null):Ze=je.sibling;var gi=Y(U,je,ot.value,ie);if(gi===null){je===null&&(je=Ze);break}t&&je&&gi.alternate===null&&n(U,je),O=m(gi,O,Ke),lt===null?De=gi:lt.sibling=gi,lt=gi,je=Ze}if(ot.done)return a(U,je),st&&hr(U,Ke),De;if(je===null){for(;!ot.done;Ke++,ot=H.next())ot=oe(U,ot.value,ie),ot!==null&&(O=m(ot,O,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot);return st&&hr(U,Ke),De}for(je=l(je);!ot.done;Ke++,ot=H.next())ot=$(je,U,Ke,ot.value,ie),ot!==null&&(t&&ot.alternate!==null&&je.delete(ot.key===null?Ke:ot.key),O=m(ot,O,Ke),lt===null?De=ot:lt.sibling=ot,lt=ot);return t&&je.forEach(function(uw){return n(U,uw)}),st&&hr(U,Ke),De}function xt(U,O,H,ie){if(typeof H=="object"&&H!==null&&H.type===X&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case q:e:{for(var De=H.key;O!==null;){if(O.key===De){if(De=H.type,De===X){if(O.tag===7){a(U,O.sibling),ie=h(O,H.props.children),ie.return=U,U=ie;break e}}else if(O.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&la(De)===O.type){a(U,O.sibling),ie=h(O,H.props),fo(ie,H),ie.return=U,U=ie;break e}a(U,O);break}else n(U,O);O=O.sibling}H.type===X?(ie=na(H.props.children,U.mode,ie,H.key),ie.return=U,U=ie):(ie=eu(H.type,H.key,H.props,null,U.mode,ie),fo(ie,H),ie.return=U,U=ie)}return v(U);case J:e:{for(De=H.key;O!==null;){if(O.key===De)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){a(U,O.sibling),ie=h(O,H.children||[]),ie.return=U,U=ie;break e}else{a(U,O);break}else n(U,O);O=O.sibling}ie=vh(H,U.mode,ie),ie.return=U,U=ie}return v(U);case T:return H=la(H),xt(U,O,H,ie)}if(Ie(H))return Se(U,O,H,ie);if(V(H)){if(De=V(H),typeof De!="function")throw Error(i(150));return H=De.call(H),Oe(U,O,H,ie)}if(typeof H.then=="function")return xt(U,O,lu(H),ie);if(H.$$typeof===pe)return xt(U,O,su(U,H),ie);ou(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(a(U,O.sibling),ie=h(O,H),ie.return=U,U=ie):(a(U,O),ie=xh(H,U.mode,ie),ie.return=U,U=ie),v(U)):a(U,O)}return function(U,O,H,ie){try{ho=0;var De=xt(U,O,H,ie);return Wa=null,De}catch(je){if(je===Xa||je===iu)throw je;var lt=Pn(29,je,null,U.mode);return lt.lanes=ie,lt.return=U,lt}finally{}}}var ca=Np(!0),Ap=Np(!1),Zr=!1;function Ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Jr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ei(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Jc(t),up(t,null,a),n}return Zc(t,l,n,a),Jc(t)}function mo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,zl(t,a)}}function Dh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Mh=!1;function go(){if(Mh){var t=$a;if(t!==null)throw t}}function po(t,n,a,l){Mh=!1;var h=t.updateQueue;Zr=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,F=D.next;D.next=null,v===null?m=F:v.next=F,v=D;var se=t.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==v&&(w===null?se.firstBaseUpdate=F:w.next=F,se.lastBaseUpdate=D))}if(m!==null){var oe=h.baseState;v=0,se=F=D=null,w=m;do{var Y=w.lane&-536870913,$=Y!==w.lane;if($?(We&Y)===Y:(l&Y)===Y){Y!==0&&Y===Qa&&(Mh=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,Oe=w;Y=n;var xt=a;switch(Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){oe=Se.call(xt,oe,Y);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Oe.payload,Y=typeof Se=="function"?Se.call(xt,oe,Y):Se,Y==null)break e;oe=E({},oe,Y);break e;case 2:Zr=!0}}Y=w.callback,Y!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(F=se=$,D=oe):se=se.next=$,v|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);se===null&&(D=oe),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=se,m===null&&(h.shared.lanes=0),ii|=v,t.lanes=v,t.memoizedState=oe}}function jp(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Cp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)jp(a[t],n)}var Za=S(null),cu=S(0);function Rp(t,n){t=Er,re(cu,t),re(Za,n),Er=t|n.baseLanes}function Oh(){re(cu,Er),re(Za,Za.current)}function Vh(){Er=cu.current,P(Za),P(cu)}var Un=S(null),rs=null;function ti(t){var n=t.alternate;re(Dt,Dt.current&1),re(Un,t),rs===null&&(n===null||Za.current!==null||n.memoizedState!==null)&&(rs=t)}function Lh(t){re(Dt,Dt.current),re(Un,t),rs===null&&(rs=t)}function Ip(t){t.tag===22?(re(Dt,Dt.current),re(Un,t),rs===null&&(rs=t)):ni()}function ni(){re(Dt,Dt.current),re(Un,Un.current)}function zn(t){P(Un),rs===t&&(rs=null),P(Dt)}var Dt=S(0);function uu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ff(a)||Gf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var gr=0,Ye=null,pt=null,Ht=null,du=!1,Ja=!1,ua=!1,hu=0,yo=0,el=null,e2=0;function Ct(){throw Error(i(321))}function Ph(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Ln(t[a],n[a]))return!1;return!0}function Uh(t,n,a,l,h,m){return gr=m,Ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?m0:ef,ua=!1,m=a(l,h),ua=!1,Ja&&(m=Dp(n,a,l,h)),kp(t),m}function kp(t){K.H=bo;var n=pt!==null&&pt.next!==null;if(gr=0,Ht=pt=Ye=null,du=!1,yo=0,el=null,n)throw Error(i(300));t===null||Ft||(t=t.dependencies,t!==null&&nu(t)&&(Ft=!0))}function Dp(t,n,a,l){Ye=t;var h=0;do{if(Ja&&(el=null),yo=0,Ja=!1,25<=h)throw Error(i(301));if(h+=1,Ht=pt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=g0,m=n(a,l)}while(Ja);return m}function t2(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?xo(n):n,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(Ye.flags|=1024),n}function zh(){var t=hu!==0;return hu=0,t}function Bh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function qh(t){if(du){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}du=!1}gr=0,Ht=pt=Ye=null,Ja=!1,yo=hu=0,el=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ye.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Mt(){if(pt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var n=Ht===null?Ye.memoizedState:Ht.next;if(n!==null)Ht=n,pt=t;else{if(t===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ht===null?Ye.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xo(t){var n=yo;return yo+=1,el===null&&(el=[]),t=Ep(el,t,n),n=Ye,(Ht===null?n.memoizedState:Ht.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?m0:ef),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xo(t);if(t.$$typeof===pe)return un(t)}throw Error(i(438,String(t)))}function Hh(t){var n=null,a=Ye.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=fu(),Ye.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function pr(t,n){return typeof n=="function"?n(t):n}function gu(t){var n=Mt();return Fh(n,pt,t)}function Fh(t,n,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=v=null,D=null,F=n,se=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(We&oe)===oe:(gr&oe)===oe){var Y=F.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===Qa&&(se=!0);else if((gr&Y)===Y){F=F.next,Y===Qa&&(se=!0);continue}else oe={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=oe,v=m):D=D.next=oe,Ye.lanes|=Y,ii|=Y;oe=F.action,ua&&a(m,oe),m=F.hasEagerState?F.eagerState:a(m,oe)}else Y={lane:oe,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=Y,v=m):D=D.next=Y,Ye.lanes|=oe,ii|=oe;F=F.next}while(F!==null&&F!==n);if(D===null?v=m:D.next=w,!Ln(m,t.memoizedState)&&(Ft=!0,se&&(a=$a,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gh(t){var n=Mt(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Ln(m,n.memoizedState)||(Ft=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Mp(t,n,a){var l=Ye,h=Mt(),m=st;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=n();var v=!Ln((pt||h).memoizedState,a);if(v&&(h.memoizedState=a,Ft=!0),h=h.queue,Qh(Lp.bind(null,l,h,t),[t]),h.getSnapshot!==n||v||Ht!==null&&Ht.memoizedState.tag&1){if(l.flags|=2048,tl(9,{destroy:void 0},Vp.bind(null,l,h,a,n),null),bt===null)throw Error(i(349));m||(gr&127)!==0||Op(l,n,a)}return a}function Op(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ye.updateQueue,n===null?(n=fu(),Ye.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Vp(t,n,a,l){n.value=a,n.getSnapshot=l,Pp(n)&&Up(t)}function Lp(t,n,a){return a(function(){Pp(n)&&Up(t)})}function Pp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Ln(t,a)}catch{return!0}}function Up(t){var n=ta(t,2);n!==null&&kn(n,t,2)}function Yh(t){var n=En();if(typeof t=="function"){var a=t;if(t=a(),ua){Qn(!0);try{a()}finally{Qn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:t},n}function zp(t,n,a,l){return t.baseState=a,Fh(t,pt,typeof l=="function"?l:pr)}function n2(t,n,a,l,h){if(xu(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Bp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Bp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=K.T,v={};K.T=v;try{var w=a(h,l),D=K.S;D!==null&&D(v,w),qp(t,n,w)}catch(F){Kh(t,n,F)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,l),qp(t,n,m)}catch(F){Kh(t,n,F)}}function qp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hp(t,n,l)},function(l){return Kh(t,n,l)}):Hp(t,n,a)}function Hp(t,n,a){n.status="fulfilled",n.value=a,Fp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Bp(t,a)))}function Kh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Fp(n),n=n.next;while(n!==l)}t.action=null}function Fp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Gp(t,n){return n}function Yp(t,n){if(st){var a=bt.formState;if(a!==null){e:{var l=Ye;if(st){if(wt){t:{for(var h=wt,m=ss;h.nodeType!==8;){if(!m){h=null;break t}if(h=is(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){wt=is(h.nextSibling),l=h.data==="F!";break e}}Xr(l)}l=!1}l&&(n=a[0])}}return a=En(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:n},a.queue=l,a=d0.bind(null,Ye,l),l.dispatch=a,l=Yh(!1),m=Jh.bind(null,Ye,!1,l.queue),l=En(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=n2.bind(null,Ye,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Kp(t){var n=Mt();return Qp(n,pt,t)}function Qp(t,n,a){if(n=Fh(t,n,Gp)[0],t=gu(pr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=xo(n)}catch(v){throw v===Xa?iu:v}else l=n;n=Mt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Ye.flags|=2048,tl(9,{destroy:void 0},s2.bind(null,h,a),null)),[l,m,t]}function s2(t,n){t.action=n}function $p(t){var n=Mt(),a=pt;if(a!==null)return Qp(n,a,t);Mt(),n=n.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function tl(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Ye.updateQueue,n===null&&(n=fu(),Ye.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Xp(){return Mt().memoizedState}function pu(t,n,a,l){var h=En();Ye.flags|=t,h.memoizedState=tl(1|n,{destroy:void 0},a,l===void 0?null:l)}function yu(t,n,a,l){var h=Mt();l=l===void 0?null:l;var m=h.memoizedState.inst;pt!==null&&l!==null&&Ph(l,pt.memoizedState.deps)?h.memoizedState=tl(n,m,a,l):(Ye.flags|=t,h.memoizedState=tl(1|n,m,a,l))}function Wp(t,n){pu(8390656,8,t,n)}function Qh(t,n){yu(2048,8,t,n)}function r2(t){Ye.flags|=4;var n=Ye.updateQueue;if(n===null)n=fu(),Ye.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Zp(t){var n=Mt().memoizedState;return r2({ref:n,nextImpl:t}),function(){if((ut&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Jp(t,n){return yu(4,2,t,n)}function e0(t,n){return yu(4,4,t,n)}function t0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function n0(t,n,a){a=a!=null?a.concat([t]):null,yu(4,4,t0.bind(null,n,t),a)}function $h(){}function s0(t,n){var a=Mt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Ph(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function r0(t,n){var a=Mt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Ph(n,l[1]))return l[0];if(l=t(),ua){Qn(!0);try{t()}finally{Qn(!1)}}return a.memoizedState=[l,n],l}function Xh(t,n,a){return a===void 0||(gr&1073741824)!==0&&(We&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=iy(),Ye.lanes|=t,ii|=t,a)}function i0(t,n,a,l){return Ln(a,n)?a:Za.current!==null?(t=Xh(t,a,l),Ln(t,n)||(Ft=!0),t):(gr&42)===0||(gr&1073741824)!==0&&(We&261930)===0?(Ft=!0,t.memoizedState=a):(t=iy(),Ye.lanes|=t,ii|=t,n)}function a0(t,n,a,l,h){var m=ge.p;ge.p=m!==0&&8>m?m:8;var v=K.T,w={};K.T=w,Jh(t,!1,n,a);try{var D=h(),F=K.S;if(F!==null&&F(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var se=J1(D,l);vo(t,n,se,Hn(t))}else vo(t,n,l,Hn(t))}catch(oe){vo(t,n,{then:function(){},status:"rejected",reason:oe},Hn())}finally{ge.p=m,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function i2(){}function Wh(t,n,a,l){if(t.tag!==5)throw Error(i(476));var h=l0(t).queue;a0(t,h,n,_e,a===null?i2:function(){return o0(t),a(l)})}function l0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:_e},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function o0(t){var n=l0(t);n.next===null&&(n=t.alternate.memoizedState),vo(t,n.next.queue,{},Hn())}function Zh(){return un(Vo)}function c0(){return Mt().memoizedState}function u0(){return Mt().memoizedState}function a2(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Hn();t=Jr(a);var l=ei(n,t,a);l!==null&&(kn(l,n,a),mo(l,n,a)),n={cache:Ah()},t.payload=n;return}n=n.return}}function l2(t,n,a){var l=Hn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xu(t)?h0(n,a):(a=ph(t,n,a,l),a!==null&&(kn(a,t,l),f0(a,n,l)))}function d0(t,n,a){var l=Hn();vo(t,n,a,l)}function vo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(t))h0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Ln(w,v))return Zc(t,n,h,0),bt===null&&Wc(),!1}catch{}finally{}if(a=ph(t,n,h,l),a!==null)return kn(a,t,l),f0(a,n,l),!0}return!1}function Jh(t,n,a,l){if(l={lane:2,revertLane:kf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(n)throw Error(i(479))}else n=ph(t,a,l,2),n!==null&&kn(n,t,2)}function xu(t){var n=t.alternate;return t===Ye||n!==null&&n===Ye}function h0(t,n){Ja=du=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function f0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,zl(t,a)}}var bo={readContext:un,use:mu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};bo.useEffectEvent=Ct;var m0={readContext:un,use:mu,useCallback:function(t,n){return En().memoizedState=[t,n===void 0?null:n],t},useContext:un,useEffect:Wp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,pu(4194308,4,t0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return pu(4194308,4,t,n)},useInsertionEffect:function(t,n){pu(4,2,t,n)},useMemo:function(t,n){var a=En();n=n===void 0?null:n;var l=t();if(ua){Qn(!0);try{t()}finally{Qn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=En();if(a!==void 0){var h=a(n);if(ua){Qn(!0);try{a(n)}finally{Qn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=l2.bind(null,Ye,t),[l.memoizedState,t]},useRef:function(t){var n=En();return t={current:t},n.memoizedState=t},useState:function(t){t=Yh(t);var n=t.queue,a=d0.bind(null,Ye,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:$h,useDeferredValue:function(t,n){var a=En();return Xh(a,t,n)},useTransition:function(){var t=Yh(!1);return t=a0.bind(null,Ye,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Ye,h=En();if(st){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),bt===null)throw Error(i(349));(We&127)!==0||Op(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Wp(Lp.bind(null,l,m,t),[t]),l.flags|=2048,tl(9,{destroy:void 0},Vp.bind(null,l,m,a,n),null),a},useId:function(){var t=En(),n=bt.identifierPrefix;if(st){var a=Qs,l=Ks;a=(l&~(1<<32-It(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=hu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=e2++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Zh,useFormState:Yp,useActionState:Yp,useOptimistic:function(t){var n=En();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Jh.bind(null,Ye,!0,a),a.dispatch=n,[t,n]},useMemoCache:Hh,useCacheRefresh:function(){return En().memoizedState=a2.bind(null,Ye)},useEffectEvent:function(t){var n=En(),a={impl:t};return n.memoizedState=a,function(){if((ut&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},ef={readContext:un,use:mu,useCallback:s0,useContext:un,useEffect:Qh,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:r0,useReducer:gu,useRef:Xp,useState:function(){return gu(pr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Mt();return i0(a,pt.memoizedState,t,n)},useTransition:function(){var t=gu(pr)[0],n=Mt().memoizedState;return[typeof t=="boolean"?t:xo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var a=Mt();return zp(a,pt,t,n)},useMemoCache:Hh,useCacheRefresh:u0};ef.useEffectEvent=Zp;var g0={readContext:un,use:mu,useCallback:s0,useContext:un,useEffect:Qh,useImperativeHandle:n0,useInsertionEffect:Jp,useLayoutEffect:e0,useMemo:r0,useReducer:Gh,useRef:Xp,useState:function(){return Gh(pr)},useDebugValue:$h,useDeferredValue:function(t,n){var a=Mt();return pt===null?Xh(a,t,n):i0(a,pt.memoizedState,t,n)},useTransition:function(){var t=Gh(pr)[0],n=Mt().memoizedState;return[typeof t=="boolean"?t:xo(t),n]},useSyncExternalStore:Mp,useId:c0,useHostTransitionStatus:Zh,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var a=Mt();return pt!==null?zp(a,pt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:u0};g0.useEffectEvent=Zp;function tf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:E({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var nf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Hn(),h=Jr(l);h.payload=n,a!=null&&(h.callback=a),n=ei(t,h,l),n!==null&&(kn(n,t,l),mo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Hn(),h=Jr(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=ei(t,h,l),n!==null&&(kn(n,t,l),mo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Hn(),l=Jr(a);l.tag=2,n!=null&&(l.callback=n),n=ei(t,l,a),n!==null&&(kn(n,t,a),mo(n,t,a))}};function p0(t,n,a,l,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!io(a,l)||!io(h,m):!0}function y0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&nf.enqueueReplaceState(n,n.state,null)}function da(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function x0(t){Xc(t)}function v0(t){console.error(t)}function b0(t){Xc(t)}function vu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sf(t,n,a){return a=Jr(a),a.tag=3,a.payload={element:null},a.callback=function(){vu(t,n)},a}function w0(t){return t=Jr(t),t.tag=3,t}function E0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){_0(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){_0(n,a,l),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function o2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ka(n,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 31:case 13:return rs===null?Iu():a.alternate===null&&Rt===0&&(Rt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===au?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Cf(t,l,h)),!1;case 22:return a.flags|=65536,l===au?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Cf(t,l,h)),!1}throw Error(i(435,a.tag))}return Cf(t,l,h),Iu(),!1}if(st)return n=Un.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==wh&&(t=Error(i(422),{cause:l}),oo(es(t,a)))):(l!==wh&&(n=Error(i(423),{cause:l}),oo(es(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=es(l,a),h=sf(t.stateNode,l,h),Dh(t,h),Rt!==4&&(Rt=2)),!1;var m=Error(i(520),{cause:l});if(m=es(m,a),jo===null?jo=[m]:jo.push(m),Rt!==4&&(Rt=2),n===null)return!0;l=es(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=sf(a.stateNode,l,t),Dh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ai===null||!ai.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=w0(h),E0(h,t,a,l),Dh(a,h),!1}a=a.return}while(a!==null);return!1}var rf=Error(i(461)),Ft=!1;function dn(t,n,a,l){n.child=t===null?Ap(n,null,a,l):ca(n,t.child,a,l)}function T0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return ia(n),l=Uh(t,n,a,v,m,h),w=zh(),t!==null&&!Ft?(Bh(t,n,h),yr(t,n,h)):(st&&w&&bh(n),n.flags|=1,dn(t,n,l,h),n.child)}function S0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!yh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,N0(t,n,m,l,h)):(t=eu(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!ff(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:io,a(v,l)&&t.ref===n.ref)return yr(t,n,h)}return n.flags|=1,t=dr(m,l),t.ref=n.ref,t.return=n,n.child=t}function N0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(io(m,l)&&t.ref===n.ref)if(Ft=!1,n.pendingProps=l=m,ff(t,h))(t.flags&131072)!==0&&(Ft=!0);else return n.lanes=t.lanes,yr(t,n,h)}return af(t,n,a,l,h)}function A0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return j0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(n,m!==null?m.cachePool:null),m!==null?Rp(n,m):Oh(),Ip(n);else return l=n.lanes=536870912,j0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ru(n,m.cachePool),Rp(n,m),ni(),n.memoizedState=null):(t!==null&&ru(n,null),Oh(),ni());return dn(t,n,h,a),n.child}function _o(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function j0(t,n,a,l,h){var m=Ch();return m=m===null?null:{parent:qt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&ru(n,null),Oh(),Ip(n),t!==null&&Ka(t,n,l,!0),n.childLanes=h,null}function bu(t,n){return n=wu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function C0(t,n,a){return ca(n,t.child,null,a),t=bu(n,n.pendingProps),t.flags|=2,zn(n),n.memoizedState=null,t}function c2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(st){if(l.mode==="hidden")return t=bu(n,l),n.lanes=536870912,_o(null,t);if(Lh(n),(t=wt)?(t=By(t,ss),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qr!==null?{id:Ks,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,cn=n,wt=null)):t=null,t===null)throw Xr(n);return n.lanes=536870912,null}return bu(n,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Lh(n),h)if(n.flags&256)n.flags&=-257,n=C0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(Ft||Ka(t,n,a,!1),h=(a&t.childLanes)!==0,Ft||h){if(l=bt,l!==null&&(v=Bl(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ta(t,v),kn(l,t,v),rf;Iu(),n=C0(t,n,a)}else t=m.treeContext,wt=is(v.nextSibling),cn=n,st=!0,$r=null,ss=!1,t!==null&&gp(n,t),n=bu(n,l),n.flags|=4096;return n}return t=dr(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function _u(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function af(t,n,a,l,h){return ia(n),a=Uh(t,n,a,l,void 0,h),l=zh(),t!==null&&!Ft?(Bh(t,n,h),yr(t,n,h)):(st&&l&&bh(n),n.flags|=1,dn(t,n,a,h),n.child)}function R0(t,n,a,l,h,m){return ia(n),n.updateQueue=null,a=Dp(n,l,a,h),kp(t),l=zh(),t!==null&&!Ft?(Bh(t,n,m),yr(t,n,m)):(st&&l&&bh(n),n.flags|=1,dn(t,n,a,m),n.child)}function I0(t,n,a,l,h){if(ia(n),n.stateNode===null){var m=Ha,v=a.contextType;typeof v=="object"&&v!==null&&(m=un(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=nf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Ih(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?un(v):Ha,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(tf(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&nf.enqueueReplaceState(m,m.state,null),po(n,l,m,h),go(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=da(a,w);m.props=D;var F=m.context,se=a.contextType;v=Ha,typeof se=="object"&&se!==null&&(v=un(se));var oe=a.getDerivedStateFromProps;se=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==v)&&y0(n,m,l,v),Zr=!1;var Y=n.memoizedState;m.state=Y,po(n,l,m,h),go(),F=n.memoizedState,w||Y!==F||Zr?(typeof oe=="function"&&(tf(n,a,oe,l),F=n.memoizedState),(D=Zr||p0(n,a,D,l,Y,F,v))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),m.props=l,m.state=F,m.context=v,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,kh(t,n),v=n.memoizedProps,se=da(a,v),m.props=se,oe=n.pendingProps,Y=m.context,F=a.contextType,D=Ha,typeof F=="object"&&F!==null&&(D=un(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==oe||Y!==D)&&y0(n,m,l,D),Zr=!1,Y=n.memoizedState,m.state=Y,po(n,l,m,h),go();var $=n.memoizedState;v!==oe||Y!==$||Zr||t!==null&&t.dependencies!==null&&nu(t.dependencies)?(typeof w=="function"&&(tf(n,a,w,l),$=n.memoizedState),(se=Zr||p0(n,a,se,l,Y,$,D)||t!==null&&t.dependencies!==null&&nu(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),m.props=l,m.state=$,m.context=D,l=se):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Y===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,_u(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=ca(n,t.child,null,h),n.child=ca(n,null,a,h)):dn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=yr(t,n,h),t}function k0(t,n,a,l){return sa(),n.flags|=256,dn(t,n,a,l),n.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function of(t){return{baseLanes:t,cachePool:_p()}}function cf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=qn),t}function D0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(st){if(h?ti(n):ni(),(t=wt)?(t=By(t,ss),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qr!==null?{id:Ks,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=hp(t),a.return=n,n.child=a,cn=n,wt=null)):t=null,t===null)throw Xr(n);return Gf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(ni(),h=n.mode,w=wu({mode:"hidden",children:w},h),l=na(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,v,a),n.memoizedState=lf,_o(null,l)):(ti(n),uf(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(ti(n),n.flags&=-257,n=df(t,n,a)):n.memoizedState!==null?(ni(),n.child=t.child,n.flags|=128,n=null):(ni(),w=l.fallback,h=n.mode,l=wu({mode:"visible",children:l.children},h),w=na(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,ca(n,t.child,null,a),l=n.child,l.memoizedState=of(a),l.childLanes=cf(t,v,a),n.memoizedState=lf,n=_o(null,l));else if(ti(n),Gf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(i(419)),l.stack="",l.digest=v,oo({value:l,source:null,stack:null}),n=df(t,n,a)}else if(Ft||Ka(t,n,a,!1),v=(a&t.childLanes)!==0,Ft||v){if(v=bt,v!==null&&(l=Bl(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ta(t,l),kn(v,t,l),rf;Ff(w)||Iu(),n=df(t,n,a)}else Ff(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,wt=is(w.nextSibling),cn=n,st=!0,$r=null,ss=!1,t!==null&&gp(n,t),n=uf(n,l.children),n.flags|=4096);return n}return h?(ni(),w=l.fallback,h=n.mode,D=t.child,F=D.sibling,l=dr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?w=dr(F,w):(w=na(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,_o(null,l),l=n.child,w=t.child.memoizedState,w===null?w=of(a):(h=w.cachePool,h!==null?(D=qt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=_p(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=cf(t,v,a),n.memoizedState=lf,_o(t.child,l)):(ti(n),a=t.child,t=a.sibling,a=dr(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function uf(t,n){return n=wu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function wu(t,n){return t=Pn(22,t,null,n),t.lanes=0,t}function df(t,n,a){return ca(n,t.child,null,a),t=uf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function M0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Sh(t.return,n,a)}function hf(t,n,a,l,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function O0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var v=Dt.current,w=(v&2)!==0;if(w?(v=v&1|2,n.flags|=128):v&=1,re(Dt,v),dn(t,n,l,a),l=st?lo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,a,n);else if(t.tag===19)M0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),hf(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&uu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}hf(n,!0,a,null,m,l);break;case"together":hf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function yr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ii|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ka(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,a=dr(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=dr(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function ff(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&nu(t)))}function u2(t,n,a){switch(n.tag){case 3:Ne(n,n.stateNode.containerInfo),Wr(n,qt,t.memoizedState.cache),sa();break;case 27:case 5:Fe(n);break;case 4:Ne(n,n.stateNode.containerInfo);break;case 10:Wr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Lh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ti(n),n.flags|=128,null):(a&n.child.childLanes)!==0?D0(t,n,a):(ti(n),t=yr(t,n,a),t!==null?t.sibling:null);ti(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ka(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return O0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Dt,Dt.current),l)break;return null;case 22:return n.lanes=0,A0(t,n,a,n.pendingProps);case 24:Wr(n,qt,t.memoizedState.cache)}return yr(t,n,a)}function V0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ft=!0;else{if(!ff(t,a)&&(n.flags&128)===0)return Ft=!1,u2(t,n,a);Ft=(t.flags&131072)!==0}else Ft=!1,st&&(n.flags&1048576)!==0&&mp(n,lo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=la(n.elementType),n.type=t,typeof t=="function")yh(t)?(l=da(t,l),n.tag=1,n=I0(null,n,t,l,a)):(n.tag=0,n=af(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===he){n.tag=11,n=T0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=S0(null,n,t,l,a);break e}}throw n=ce(t)||t,Error(i(306,n,""))}}return n;case 0:return af(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=da(l,n.pendingProps),I0(t,n,l,h,a);case 3:e:{if(Ne(n,n.stateNode.containerInfo),t===null)throw Error(i(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,kh(t,n),po(n,l,null,a);var v=n.memoizedState;if(l=v.cache,Wr(n,qt,l),l!==m.cache&&Nh(n,[qt],a,!0),go(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=k0(t,n,l,a);break e}else if(l!==h){h=es(Error(i(424)),n),oo(h),n=k0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(wt=is(t.firstChild),cn=n,st=!0,$r=null,ss=!0,a=Ap(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(sa(),l===h){n=yr(t,n,a);break e}dn(t,n,l,a)}n=n.child}return n;case 26:return _u(t,n),t===null?(a=Ky(n.type,null,n.pendingProps,null))?n.memoizedState=a:st||(a=n.type,t=n.pendingProps,l=Pu(Z.current).createElement(a),l[Ut]=n,l[Jt]=t,hn(l,a,t),zt(l),n.stateNode=l):n.memoizedState=Ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Fe(n),t===null&&st&&(l=n.stateNode=Fy(n.type,n.pendingProps,Z.current),cn=n,ss=!0,h=wt,ui(n.type)?(Yf=h,wt=is(l.firstChild)):wt=h),dn(t,n,n.pendingProps.children,a),_u(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&st&&((h=l=wt)&&(l=z2(l,n.type,n.pendingProps,ss),l!==null?(n.stateNode=l,cn=n,wt=is(l.firstChild),ss=!1,h=!0):h=!1),h||Xr(n)),Fe(n),h=n.type,m=n.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,Bf(h,m)?l=null:v!==null&&Bf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Uh(t,n,t2,null,null,a),Vo._currentValue=h),_u(t,n),dn(t,n,l,a),n.child;case 6:return t===null&&st&&((t=a=wt)&&(a=B2(a,n.pendingProps,ss),a!==null?(n.stateNode=a,cn=n,wt=null,t=!0):t=!1),t||Xr(n)),null;case 13:return D0(t,n,a);case 4:return Ne(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ca(n,null,l,a):dn(t,n,l,a),n.child;case 11:return T0(t,n,n.type,n.pendingProps,a);case 7:return dn(t,n,n.pendingProps,a),n.child;case 8:return dn(t,n,n.pendingProps.children,a),n.child;case 12:return dn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Wr(n,n.type,l.value),dn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ia(n),h=un(h),l=l(h),n.flags|=1,dn(t,n,l,a),n.child;case 14:return S0(t,n,n.type,n.pendingProps,a);case 15:return N0(t,n,n.type,n.pendingProps,a);case 19:return O0(t,n,a);case 31:return c2(t,n,a);case 22:return A0(t,n,a,n.pendingProps);case 24:return ia(n),l=un(qt),t===null?(h=Ch(),h===null&&(h=bt,m=Ah(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},Ih(n),Wr(n,qt,h)):((t.lanes&a)!==0&&(kh(t,n),po(n,null,null,a),go()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Wr(n,qt,l)):(l=m.cache,Wr(n,qt,l),l!==h.cache&&Nh(n,[qt],a,!0))),dn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function xr(t){t.flags|=4}function mf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(cy())t.flags|=8192;else throw oa=au,Rh}else t.flags&=-16777217}function L0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zy(n))if(cy())t.flags|=8192;else throw oa=au,Rh}function Eu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Cc():536870912,t.lanes|=n,il|=n)}function wo(t,n){if(!st)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Et(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function d2(t,n,a){var l=n.pendingProps;switch(_h(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(n),null;case 1:return Et(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),mr(qt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ya(n)?xr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Eh())),Et(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(xr(n),m!==null?(Et(n),L0(n,m)):(Et(n),mf(n,h,null,l,a))):m?m!==t.memoizedState?(xr(n),Et(n),L0(n,m)):(Et(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&xr(n),Et(n),mf(n,h,t,l,a)),null;case 27:if(vt(n),a=Z.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&xr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Et(n),null}t=L.current,Ya(n)?pp(n):(t=Fy(h,l,a),n.stateNode=t,xr(n))}return Et(n),null;case 5:if(vt(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&xr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Et(n),null}if(m=L.current,Ya(n))pp(n);else{var v=Pu(Z.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}m[Ut]=n,m[Jt]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;e:switch(hn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xr(n)}}return Et(n),mf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&xr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(t=Z.current,Ya(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=cn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ut]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dy(t.nodeValue,a)),t||Xr(n,!0)}else t=Pu(t).createTextNode(l),t[Ut]=n,n.stateNode=t}return Et(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ya(n),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ut]=n}else sa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),t=!1}else a=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(zn(n),n):(zn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return Et(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ya(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ut]=n}else sa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),h=!1}else h=Eh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(zn(n),n):(zn(n),null)}return zn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Eu(n,n.updateQueue),Et(n),null);case 4:return Re(),t===null&&Vf(n.stateNode.containerInfo),Et(n),null;case 10:return mr(n.type),Et(n),null;case 19:if(P(Dt),l=n.memoizedState,l===null)return Et(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)wo(l,!1);else{if(Rt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=uu(t),m!==null){for(n.flags|=128,wo(l,!1),t=m.updateQueue,n.updateQueue=t,Eu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)dp(a,t),a=a.sibling;return re(Dt,Dt.current&1|2),st&&hr(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&at()>ju&&(n.flags|=128,h=!0,wo(l,!1),n.lanes=4194304)}else{if(!h)if(t=uu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Eu(n,t),wo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!st)return Et(n),null}else 2*at()-l.renderingStartTime>ju&&a!==536870912&&(n.flags|=128,h=!0,wo(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=at(),t.sibling=null,a=Dt.current,re(Dt,h?a&1|2:a&1),st&&hr(n,l.treeForkCount),t):(Et(n),null);case 22:case 23:return zn(n),Vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Et(n),n.subtreeFlags&6&&(n.flags|=8192)):Et(n),a=n.updateQueue,a!==null&&Eu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&P(aa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),mr(qt),Et(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function h2(t,n){switch(_h(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return mr(qt),Re(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return vt(n),null;case 31:if(n.memoizedState!==null){if(zn(n),n.alternate===null)throw Error(i(340));sa()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(zn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));sa()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(Dt),null;case 4:return Re(),null;case 10:return mr(n.type),null;case 22:case 23:return zn(n),Vh(),t!==null&&P(aa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return mr(qt),null;case 25:return null;default:return null}}function P0(t,n){switch(_h(n),n.tag){case 3:mr(qt),Re();break;case 26:case 27:case 5:vt(n);break;case 4:Re();break;case 31:n.memoizedState!==null&&zn(n);break;case 13:zn(n);break;case 19:P(Dt);break;case 10:mr(n.type);break;case 22:case 23:zn(n),Vh(),t!==null&&P(aa);break;case 24:mr(qt)}}function Eo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){mt(n,n.return,w)}}function si(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=n;var D=a,F=w;try{F()}catch(se){mt(h,D,se)}}}l=l.next}while(l!==m)}}catch(se){mt(n,n.return,se)}}function U0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Cp(n,a)}catch(l){mt(t,t.return,l)}}}function z0(t,n,a){a.props=da(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){mt(t,n,l)}}function To(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){mt(t,n,h)}}function $s(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){mt(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){mt(t,n,h)}else a.current=null}function B0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){mt(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;M2(l,t.type,a,n),l[Jt]=n}catch(h){mt(t,t.return,h)}}function q0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ui(t.type)||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ui(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ys));else if(l!==4&&(l===27&&ui(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(yf(t,n,a),t=t.sibling;t!==null;)yf(t,n,a),t=t.sibling}function Tu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ui(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tu(t,n,a),t=t.sibling;t!==null;)Tu(t,n,a),t=t.sibling}function H0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);hn(n,l,a),n[Ut]=t,n[Jt]=a}catch(m){mt(t,t.return,m)}}var vr=!1,Gt=!1,xf=!1,F0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function f2(t,n){if(t=t.containerInfo,Uf=Gu,t=np(t),uh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,D=-1,F=0,se=0,oe=t,Y=null;t:for(;;){for(var $;oe!==a||h!==0&&oe.nodeType!==3||(w=v+h),oe!==m||l!==0&&oe.nodeType!==3||(D=v+l),oe.nodeType===3&&(v+=oe.nodeValue.length),($=oe.firstChild)!==null;)Y=oe,oe=$;for(;;){if(oe===t)break t;if(Y===a&&++F===h&&(w=v),Y===m&&++se===l&&(D=v),($=oe.nextSibling)!==null)break;oe=Y,Y=oe.parentNode}oe=$}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(zf={focusedElem:t,selectionRange:a},Gu=!1,tn=n;tn!==null;)if(n=tn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,tn=t;else for(;tn!==null;){switch(n=tn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Se=da(a.type,h);t=l.getSnapshotBeforeUpdate(Se,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Oe){mt(a,a.return,Oe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Hf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,tn=t;break}tn=n.return}}function G0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:_r(t,a),l&4&&Eo(5,a);break;case 1:if(_r(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){mt(a,a.return,v)}else{var h=da(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){mt(a,a.return,v)}}l&64&&U0(a),l&512&&To(a,a.return);break;case 3:if(_r(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Cp(t,n)}catch(v){mt(a,a.return,v)}}break;case 27:n===null&&l&4&&H0(a);case 26:case 5:_r(t,a),n===null&&l&4&&B0(a),l&512&&To(a,a.return);break;case 12:_r(t,a);break;case 31:_r(t,a),l&4&&Q0(t,a);break;case 13:_r(t,a),l&4&&$0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=w2.bind(null,a),q2(t,a))));break;case 22:if(l=a.memoizedState!==null||vr,!l){n=n!==null&&n.memoizedState!==null||Gt,h=vr;var m=Gt;vr=l,(Gt=n)&&!m?wr(t,a,(a.subtreeFlags&8772)!==0):_r(t,a),vr=h,Gt=m}break;case 30:break;default:_r(t,a)}}function Y0(t){var n=t.alternate;n!==null&&(t.alternate=null,Y0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ca(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var At=null,jn=!1;function br(t,n,a){for(a=a.child;a!==null;)K0(t,n,a),a=a.sibling}function K0(t,n,a){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(fs,a)}catch{}switch(a.tag){case 26:Gt||$s(a,n),br(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||$s(a,n);var l=At,h=jn;ui(a.type)&&(At=a.stateNode,jn=!1),br(t,n,a),Do(a.stateNode),At=l,jn=h;break;case 5:Gt||$s(a,n);case 6:if(l=At,h=jn,At=null,br(t,n,a),At=l,jn=h,At!==null)if(jn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(a.stateNode)}catch(m){mt(a,n,m)}else try{At.removeChild(a.stateNode)}catch(m){mt(a,n,m)}break;case 18:At!==null&&(jn?(t=At,Uy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fl(t)):Uy(At,a.stateNode));break;case 4:l=At,h=jn,At=a.stateNode.containerInfo,jn=!0,br(t,n,a),At=l,jn=h;break;case 0:case 11:case 14:case 15:si(2,a,n),Gt||si(4,a,n),br(t,n,a);break;case 1:Gt||($s(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&z0(a,n,l)),br(t,n,a);break;case 21:br(t,n,a);break;case 22:Gt=(l=Gt)||a.memoizedState!==null,br(t,n,a),Gt=l;break;default:br(t,n,a)}}function Q0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fl(t)}catch(a){mt(n,n.return,a)}}}function $0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(a){mt(n,n.return,a)}}function m2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new F0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new F0),n;default:throw Error(i(435,t.tag))}}function Su(t,n){var a=m2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=E2.bind(null,t,l);l.then(h,h)}})}function Cn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,v=n,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(ui(w.type)){At=w.stateNode,jn=!1;break e}break;case 5:At=w.stateNode,jn=!1;break e;case 3:case 4:At=w.stateNode.containerInfo,jn=!0;break e}w=w.return}if(At===null)throw Error(i(160));K0(m,v,h),At=null,jn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)X0(n,t),n=n.sibling}var Es=null;function X0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(n,t),Rn(t),l&4&&(si(3,t,t.return),Eo(3,t),si(5,t,t.return));break;case 1:Cn(n,t),Rn(t),l&512&&(Gt||a===null||$s(a,a.return)),l&64&&vr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Es;if(Cn(n,t),Rn(t),l&512&&(Gt||a===null||$s(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Os]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),hn(m,l,a),m[Ut]=t,zt(m),l=m;break e;case"link":var v=Xy("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(l),hn(m,l,a),h.head.appendChild(m);break;case"meta":if(v=Xy("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(l),hn(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ut]=t,zt(m),l=m}t.stateNode=l}else Wy(h,t.type,t.stateNode);else t.stateNode=$y(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Wy(h,t.type,t.stateNode):$y(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(n,t),Rn(t),l&512&&(Gt||a===null||$s(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(n,t),Rn(t),l&512&&(Gt||a===null||$s(a,a.return)),t.flags&32){h=t.stateNode;try{An(h,"")}catch(Se){mt(t,t.return,Se)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(xf=!0);break;case 6:if(Cn(n,t),Rn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Se){mt(t,t.return,Se)}}break;case 3:if(Bu=null,h=Es,Es=Uu(n.containerInfo),Cn(n,t),Es=h,Rn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fl(n.containerInfo)}catch(Se){mt(t,t.return,Se)}xf&&(xf=!1,W0(t));break;case 4:l=Es,Es=Uu(t.stateNode.containerInfo),Cn(n,t),Rn(t),Es=l;break;case 12:Cn(n,t),Rn(t);break;case 31:Cn(n,t),Rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Cn(n,t),Rn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Au=at()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=vr,se=Gt;if(vr=F||h,Gt=se||D,Cn(n,t),Gt=se,vr=F,Rn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||vr||Gt||ha(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var oe=D.memoizedProps.style,Y=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Se){mt(D,D.return,Se)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Se){mt(D,D.return,Se)}}}else if(n.tag===18){if(a===null){D=n;try{var $=D.stateNode;h?zy($,!0):zy(D.stateNode,!1)}catch(Se){mt(D,D.return,Se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Su(t,a))));break;case 19:Cn(n,t),Rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Cn(n,t),Rn(t)}}function Rn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(q0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=pf(t);Tu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(An(v,""),a.flags&=-33);var w=pf(t);Tu(t,w,v);break;case 3:case 4:var D=a.stateNode.containerInfo,F=pf(t);yf(t,F,D);break;default:throw Error(i(161))}}catch(se){mt(t,t.return,se)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function W0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;W0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function _r(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)G0(t,n.alternate,n),n=n.sibling}function ha(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:si(4,n,n.return),ha(n);break;case 1:$s(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&z0(n,n.return,a),ha(n);break;case 27:Do(n.stateNode);case 26:case 5:$s(n,n.return),ha(n);break;case 22:n.memoizedState===null&&ha(n);break;case 30:ha(n);break;default:ha(n)}t=t.sibling}}function wr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:wr(h,m,a),Eo(4,m);break;case 1:if(wr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){mt(l,l.return,F)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)jp(D[h],w)}catch(F){mt(l,l.return,F)}}a&&v&64&&U0(m),To(m,m.return);break;case 27:H0(m);case 26:case 5:wr(h,m,a),a&&l===null&&v&4&&B0(m),To(m,m.return);break;case 12:wr(h,m,a);break;case 31:wr(h,m,a),a&&v&4&&Q0(h,m);break;case 13:wr(h,m,a),a&&v&4&&$0(h,m);break;case 22:m.memoizedState===null&&wr(h,m,a),To(m,m.return);break;case 30:break;default:wr(h,m,a)}n=n.sibling}}function vf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&co(a))}function bf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&co(t))}function Ts(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Z0(t,n,a,l),n=n.sibling}function Z0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Ts(t,n,a,l),h&2048&&Eo(9,n);break;case 1:Ts(t,n,a,l);break;case 3:Ts(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&co(t)));break;case 12:if(h&2048){Ts(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){mt(n,n.return,D)}}else Ts(t,n,a,l);break;case 31:Ts(t,n,a,l);break;case 13:Ts(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?Ts(t,n,a,l):So(t,n):m._visibility&2?Ts(t,n,a,l):(m._visibility|=2,nl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&vf(v,n);break;case 24:Ts(t,n,a,l),h&2048&&bf(n.alternate,n);break;default:Ts(t,n,a,l)}}function nl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,v=n,w=a,D=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:nl(m,v,w,D,h),Eo(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?nl(m,v,w,D,h):So(m,v):(se._visibility|=2,nl(m,v,w,D,h)),h&&F&2048&&vf(v.alternate,v);break;case 24:nl(m,v,w,D,h),h&&F&2048&&bf(v.alternate,v);break;default:nl(m,v,w,D,h)}n=n.sibling}}function So(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:So(a,l),h&2048&&vf(l.alternate,l);break;case 24:So(a,l),h&2048&&bf(l.alternate,l);break;default:So(a,l)}n=n.sibling}}var No=8192;function sl(t,n,a){if(t.subtreeFlags&No)for(t=t.child;t!==null;)J0(t,n,a),t=t.sibling}function J0(t,n,a){switch(t.tag){case 26:sl(t,n,a),t.flags&No&&t.memoizedState!==null&&ew(a,Es,t.memoizedState,t.memoizedProps);break;case 5:sl(t,n,a);break;case 3:case 4:var l=Es;Es=Uu(t.stateNode.containerInfo),sl(t,n,a),Es=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=No,No=16777216,sl(t,n,a),No=l):sl(t,n,a));break;default:sl(t,n,a)}}function ey(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ao(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];tn=l,ny(l,t)}ey(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ty(t),t=t.sibling}function ty(t){switch(t.tag){case 0:case 11:case 15:Ao(t),t.flags&2048&&si(9,t,t.return);break;case 3:Ao(t);break;case 12:Ao(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Nu(t)):Ao(t);break;default:Ao(t)}}function Nu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];tn=l,ny(l,t)}ey(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:si(8,n,n.return),Nu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(n));break;default:Nu(n)}t=t.sibling}}function ny(t,n){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:si(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:co(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,tn=l;else e:for(a=t;tn!==null;){l=tn;var h=l.sibling,m=l.return;if(Y0(l),l===a){tn=null;break e}if(h!==null){h.return=m,tn=h;break e}tn=m}}}var g2={getCacheForType:function(t){var n=un(qt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return un(qt).controller.signal}},p2=typeof WeakMap=="function"?WeakMap:Map,ut=0,bt=null,$e=null,We=0,ft=0,Bn=null,ri=!1,rl=!1,_f=!1,Er=0,Rt=0,ii=0,fa=0,wf=0,qn=0,il=0,jo=null,In=null,Ef=!1,Au=0,sy=0,ju=1/0,Cu=null,ai=null,Wt=0,li=null,al=null,Tr=0,Tf=0,Sf=null,ry=null,Co=0,Nf=null;function Hn(){return(ut&2)!==0&&We!==0?We&-We:K.T!==null?kf():Rc()}function iy(){if(qn===0)if((We&536870912)===0||st){var t=zi;zi<<=1,(zi&3932160)===0&&(zi=262144),qn=t}else qn=536870912;return t=Un.current,t!==null&&(t.flags|=32),qn}function kn(t,n,a){(t===bt&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(ll(t,0),oi(t,We,qn,!1)),Bi(t,a),((ut&2)===0||t!==bt)&&(t===bt&&((ut&2)===0&&(fa|=a),Rt===4&&oi(t,We,qn,!1)),Xs(t))}function ay(t,n,a){if((ut&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||ms(t,n),h=l?v2(t,n):jf(t,n,!0),m=l;do{if(h===0){rl&&!l&&oi(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!y2(a)){h=jf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var w=t;h=jo;var D=w.current.memoizedState.isDehydrated;if(D&&(ll(w,v).flags|=256),v=jf(w,v,!1),v!==2){if(_f&&!D){w.errorRecoveryDisabledLanes|=m,fa|=m,h=4;break e}m=In,In=h,m!==null&&(In===null?In=m:In.push.apply(In,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){ll(t,0),oi(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:oi(l,n,qn,!ri);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Au+300-at(),10<h)){if(oi(l,n,qn,!ri),ks(l,0,!0)!==0)break e;Tr=n,l.timeoutHandle=Ly(ly.bind(null,l,a,In,Cu,Ef,n,qn,fa,il,ri,m,"Throttled",-0,0),h);break e}ly(l,a,In,Cu,Ef,n,qn,fa,il,ri,m,null,-0,0)}}break}while(!0);Xs(t)}function ly(t,n,a,l,h,m,v,w,D,F,se,oe,Y,$){if(t.timeoutHandle=-1,oe=n.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ys},J0(n,m,oe);var Se=(m&62914560)===m?Au-at():(m&4194048)===m?sy-at():0;if(Se=tw(oe,Se),Se!==null){Tr=m,t.cancelPendingCommit=Se(gy.bind(null,t,n,m,a,l,h,v,w,D,se,oe,null,Y,$)),oi(t,m,v,!F);return}}gy(t,n,m,a,l,h,v,w,D)}function y2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Ln(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function oi(t,n,a,l){n&=~wf,n&=~fa,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-It(h),v=1<<m;l[m]=-1,h&=~v}a!==0&&qi(t,a,n)}function Ru(){return(ut&6)===0?(Ro(0),!1):!0}function Af(){if($e!==null){if(ft===0)var t=$e.return;else t=$e,fr=ra=null,qh(t),Wa=null,ho=0,t=$e;for(;t!==null;)P0(t.alternate,t),t=t.return;$e=null}}function ll(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,L2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tr=0,Af(),bt=t,$e=a=dr(t.current,null),We=n,ft=0,Bn=null,ri=!1,rl=ms(t,n),_f=!1,il=qn=wf=fa=ii=Rt=0,In=jo=null,Ef=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-It(l),m=1<<h;n|=t[h],l&=~m}return Er=n,Wc(),a}function oy(t,n){Ye=null,K.H=bo,n===Xa||n===iu?(n=Tp(),ft=3):n===Rh?(n=Tp(),ft=4):ft=n===rf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Bn=n,$e===null&&(Rt=1,vu(t,es(n,t.current)))}function cy(){var t=Un.current;return t===null?!0:(We&4194048)===We?rs===null:(We&62914560)===We||(We&536870912)!==0?t===rs:!1}function uy(){var t=K.H;return K.H=bo,t===null?bo:t}function dy(){var t=K.A;return K.A=g2,t}function Iu(){Rt=4,ri||(We&4194048)!==We&&Un.current!==null||(rl=!0),(ii&134217727)===0&&(fa&134217727)===0||bt===null||oi(bt,We,qn,!1)}function jf(t,n,a){var l=ut;ut|=2;var h=uy(),m=dy();(bt!==t||We!==n)&&(Cu=null,ll(t,n)),n=!1;var v=Rt;e:do try{if(ft!==0&&$e!==null){var w=$e,D=Bn;switch(ft){case 8:Af(),v=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(n=!0);var F=ft;if(ft=0,Bn=null,ol(t,w,D,F),a&&rl){v=0;break e}break;default:F=ft,ft=0,Bn=null,ol(t,w,D,F)}}x2(),v=Rt;break}catch(se){oy(t,se)}while(!0);return n&&t.shellSuspendCounter++,fr=ra=null,ut=l,K.H=h,K.A=m,$e===null&&(bt=null,We=0,Wc()),v}function x2(){for(;$e!==null;)hy($e)}function v2(t,n){var a=ut;ut|=2;var l=uy(),h=dy();bt!==t||We!==n?(Cu=null,ju=at()+500,ll(t,n)):rl=ms(t,n);e:do try{if(ft!==0&&$e!==null){n=$e;var m=Bn;t:switch(ft){case 1:ft=0,Bn=null,ol(t,n,m,1);break;case 2:case 9:if(wp(m)){ft=0,Bn=null,fy(n);break}n=function(){ft!==2&&ft!==9||bt!==t||(ft=7),Xs(t)},m.then(n,n);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:wp(m)?(ft=0,Bn=null,fy(n)):(ft=0,Bn=null,ol(t,n,m,7));break;case 5:var v=null;switch($e.tag){case 26:v=$e.memoizedState;case 5:case 27:var w=$e;if(v?Zy(v):w.stateNode.complete){ft=0,Bn=null;var D=w.sibling;if(D!==null)$e=D;else{var F=w.return;F!==null?($e=F,ku(F)):$e=null}break t}}ft=0,Bn=null,ol(t,n,m,5);break;case 6:ft=0,Bn=null,ol(t,n,m,6);break;case 8:Af(),Rt=6;break e;default:throw Error(i(462))}}b2();break}catch(se){oy(t,se)}while(!0);return fr=ra=null,K.H=l,K.A=h,ut=a,$e!==null?0:(bt=null,We=0,Wc(),Rt)}function b2(){for(;$e!==null&&!ke();)hy($e)}function hy(t){var n=V0(t.alternate,t,Er);t.memoizedProps=t.pendingProps,n===null?ku(t):$e=n}function fy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=R0(a,n,n.pendingProps,n.type,void 0,We);break;case 11:n=R0(a,n,n.pendingProps,n.type.render,n.ref,We);break;case 5:qh(n);default:P0(a,n),n=$e=dp(n,Er),n=V0(a,n,Er)}t.memoizedProps=t.pendingProps,n===null?ku(t):$e=n}function ol(t,n,a,l){fr=ra=null,qh(n),Wa=null,ho=0;var h=n.return;try{if(o2(t,h,n,a,We)){Rt=1,vu(t,es(a,t.current)),$e=null;return}}catch(m){if(h!==null)throw $e=h,m;Rt=1,vu(t,es(a,t.current)),$e=null;return}n.flags&32768?(st||l===1?t=!0:rl||(We&536870912)!==0?t=!1:(ri=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),my(n,t)):ku(n)}function ku(t){var n=t;do{if((n.flags&32768)!==0){my(n,ri);return}t=n.return;var a=d2(n.alternate,n,Er);if(a!==null){$e=a;return}if(n=n.sibling,n!==null){$e=n;return}$e=n=t}while(n!==null);Rt===0&&(Rt=5)}function my(t,n){do{var a=h2(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);Rt=6,$e=null}function gy(t,n,a,l,h,m,v,w,D){t.cancelPendingCommit=null;do Du();while(Wt!==0);if((ut&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=gh,ah(t,a,m,v,w,D),t===bt&&($e=bt=null,We=0),al=n,li=t,Tr=a,Tf=m,Sf=h,ry=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T2(_n,function(){return by(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=ge.p,ge.p=2,v=ut,ut|=4;try{f2(t,n,a)}finally{ut=v,ge.p=h,K.T=l}}Wt=1,py(),yy(),xy()}}function py(){if(Wt===1){Wt=0;var t=li,n=al,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ge.p;ge.p=2;var h=ut;ut|=4;try{X0(n,t);var m=zf,v=np(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&tp(w.ownerDocument.documentElement,w)){if(D!==null&&uh(w)){var F=D.start,se=D.end;if(se===void 0&&(se=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(se,w.value.length);else{var oe=w.ownerDocument||document,Y=oe&&oe.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),Se=w.textContent.length,Oe=Math.min(D.start,Se),xt=D.end===void 0?Oe:Math.min(D.end,Se);!$.extend&&Oe>xt&&(v=xt,xt=Oe,Oe=v);var U=ep(w,Oe),O=ep(w,xt);if(U&&O&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var H=oe.createRange();H.setStart(U.node,U.offset),$.removeAllRanges(),Oe>xt?($.addRange(H),$.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),$.addRange(H))}}}}for(oe=[],$=w;$=$.parentNode;)$.nodeType===1&&oe.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ie=oe[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Gu=!!Uf,zf=Uf=null}finally{ut=h,ge.p=l,K.T=a}}t.current=n,Wt=2}}function yy(){if(Wt===2){Wt=0;var t=li,n=al,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ge.p;ge.p=2;var h=ut;ut|=4;try{G0(t,n.alternate,n)}finally{ut=h,ge.p=l,K.T=a}}Wt=3}}function xy(){if(Wt===4||Wt===3){Wt=0,it();var t=li,n=al,a=Tr,l=ry;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Wt=5:(Wt=0,al=li=null,vy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ai=null),lr(a),n=n.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(fs,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=ge.p,ge.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];m(w.value,{componentStack:w.stack})}}finally{K.T=n,ge.p=h}}(Tr&3)!==0&&Du(),Xs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Nf?Co++:(Co=0,Nf=t):Co=0,Ro(0)}}function vy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,co(n)))}function Du(){return py(),yy(),xy(),by()}function by(){if(Wt!==5)return!1;var t=li,n=Tf;Tf=0;var a=lr(Tr),l=K.T,h=ge.p;try{ge.p=32>a?32:a,K.T=null,a=Sf,Sf=null;var m=li,v=Tr;if(Wt=0,al=li=null,Tr=0,(ut&6)!==0)throw Error(i(331));var w=ut;if(ut|=4,ty(m.current),Z0(m,m.current,v,a),ut=w,Ro(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(fs,m)}catch{}return!0}finally{ge.p=h,K.T=l,vy(t,n)}}function _y(t,n,a){n=es(a,n),n=sf(t.stateNode,n,2),t=ei(t,n,2),t!==null&&(Bi(t,2),Xs(t))}function mt(t,n,a){if(t.tag===3)_y(t,t,a);else for(;n!==null;){if(n.tag===3){_y(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ai===null||!ai.has(l))){t=es(a,t),a=w0(2),l=ei(n,a,2),l!==null&&(E0(a,l,n,t),Bi(l,2),Xs(l));break}}n=n.return}}function Cf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new p2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(_f=!0,h.add(a),t=_2.bind(null,t,n,a),n.then(t,t))}function _2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,bt===t&&(We&a)===a&&(Rt===4||Rt===3&&(We&62914560)===We&&300>at()-Au?(ut&2)===0&&ll(t,0):wf|=a,il===We&&(il=0)),Xs(t)}function wy(t,n){n===0&&(n=Cc()),t=ta(t,n),t!==null&&(Bi(t,n),Xs(t))}function w2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),wy(t,a)}function E2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),wy(t,a)}function T2(t,n){return Ae(t,n)}var Mu=null,cl=null,Rf=!1,Ou=!1,If=!1,ci=0;function Xs(t){t!==cl&&t.next===null&&(cl===null?Mu=cl=t:cl=cl.next=t),Ou=!0,Rf||(Rf=!0,N2())}function Ro(t,n){if(!If&&Ou){If=!0;do for(var a=!1,l=Mu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var v=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-It(42|t)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ny(l,m))}else m=We,m=ks(l,l===bt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ms(l,m)||(a=!0,Ny(l,m));l=l.next}while(a);If=!1}}function S2(){Ey()}function Ey(){Ou=Rf=!1;var t=0;ci!==0&&V2()&&(t=ci);for(var n=at(),a=null,l=Mu;l!==null;){var h=l.next,m=Ty(l,n);m===0?(l.next=null,a===null?Mu=h:a.next=h,h===null&&(cl=a)):(a=l,(t!==0||(m&3)!==0)&&(Ou=!0)),l=h}Wt!==0&&Wt!==5||Ro(t),ci!==0&&(ci=0)}function Ty(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-It(m),w=1<<v,D=h[v];D===-1?((w&a)===0||(w&l)!==0)&&(h[v]=ih(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=bt,a=We,a=ks(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&me(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ms(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&me(l),lr(a)){case 2:case 8:a=rn;break;case 32:a=_n;break;case 268435456:a=hs;break;default:a=_n}return l=Sy.bind(null,t),a=Ae(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&me(l),t.callbackPriority=2,t.callbackNode=null,2}function Sy(t,n){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Du()&&t.callbackNode!==a)return null;var l=We;return l=ks(t,t===bt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ay(t,l,n),Ty(t,at()),t.callbackNode!=null&&t.callbackNode===a?Sy.bind(null,t):null)}function Ny(t,n){if(Du())return null;ay(t,n,!0)}function N2(){P2(function(){(ut&6)!==0?Ae(sn,S2):Ey()})}function kf(){if(ci===0){var t=Qa;t===0&&(t=Rs,Rs<<=1,(Rs&261888)===0&&(Rs=256)),ci=t}return ci}function Ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Da(""+t)}function jy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function A2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ay((h[Jt]||null).action),v=l.submitter;v&&(n=(n=v[Jt]||null)?Ay(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var w=new Hs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ci!==0){var D=v?jy(h,v):new FormData(h);Wh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=v?jy(h,v):new FormData(h),Wh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],j2=Mf.toLowerCase(),C2=Mf[0].toUpperCase()+Mf.slice(1);ws(j2,"on"+C2)}ws(ip,"onAnimationEnd"),ws(ap,"onAnimationIteration"),ws(lp,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(G1,"onTransitionRun"),ws(Y1,"onTransitionStart"),ws(K1,"onTransitionCancel"),ws(op,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function Cy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var w=l[v],D=w.instance,F=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(se){Xc(se)}h.currentTarget=null,m=D}else for(v=0;v<l.length;v++){if(w=l[v],D=w.instance,F=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(se){Xc(se)}h.currentTarget=null,m=D}}}}function Xe(t,n){var a=n[ja];a===void 0&&(a=n[ja]=new Set);var l=t+"__bubble";a.has(l)||(Ry(n,t,2,!1),a.add(l))}function Of(t,n,a){var l=0;n&&(l|=4),Ry(a,t,l,n)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Vu]){t[Vu]=!0,ql.forEach(function(a){a!=="selectionchange"&&(R2.has(a)||Of(a,!1,t),Of(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Vu]||(n[Vu]=!0,Of("selectionchange",!1,n))}}function Ry(t,n,a,l){switch(ix(n)){case 2:var h=rw;break;case 8:h=iw;break;default:h=Wf}a=h.bind(null,n,a,t),h=void 0,!Ki||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Lf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Vs(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=m=v;continue e}w=w.parentNode}}l=l.return}Fr(function(){var F=m,se=Xn(a),oe=[];e:{var Y=cp.get(t);if(Y!==void 0){var $=Hs,Se=t;switch(t){case"keypress":if($i(a)===0)break e;case"keydown":case"keyup":$=Kc;break;case"focusin":Se="focus",$=Wi;break;case"focusout":Se="blur",$=Wi;break;case"beforeblur":case"afterblur":$=Wi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=g;break;case ip:case ap:case lp:$=zc;break;case op:$=N;break;case"scroll":case"scrollend":$=eo;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ur;break;case"toggle":case"beforetoggle":$=Ge}var Oe=(n&4)!==0,xt=!Oe&&(t==="scroll"||t==="scrollend"),U=Oe?Y!==null?Y+"Capture":null:Y;Oe=[];for(var O=F,H;O!==null;){var ie=O;if(H=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||H===null||U===null||(ie=xs(O,U),ie!=null&&Oe.push(ko(O,ie,H))),xt)break;O=O.return}0<Oe.length&&(Y=new $(Y,Se,null,a,se),oe.push({event:Y,listeners:Oe}))}}if((n&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",Y&&a!==Wl&&(Se=a.relatedTarget||a.fromElement)&&(Vs(Se)||Se[Ms]))break e;if(($||Y)&&(Y=se.window===se?se:(Y=se.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(Se=a.relatedTarget||a.toElement,$=F,Se=Se?Vs(Se):null,Se!==null&&(xt=d(Se),Oe=Se.tag,Se!==xt||Oe!==5&&Oe!==27&&Oe!==6)&&(Se=null)):($=null,Se=F),$!==Se)){if(Oe=to,ie="onMouseLeave",U="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=ur,ie="onPointerLeave",U="onPointerEnter",O="pointer"),xt=$==null?Y:On($),H=Se==null?Y:On(Se),Y=new Oe(ie,O+"leave",$,a,se),Y.target=xt,Y.relatedTarget=H,ie=null,Vs(se)===F&&(Oe=new Oe(U,O+"enter",Se,a,se),Oe.target=H,Oe.relatedTarget=xt,ie=Oe),xt=ie,$&&Se)t:{for(Oe=I2,U=$,O=Se,H=0,ie=U;ie;ie=Oe(ie))H++;ie=0;for(var De=O;De;De=Oe(De))ie++;for(;0<H-ie;)U=Oe(U),H--;for(;0<ie-H;)O=Oe(O),ie--;for(;H--;){if(U===O||O!==null&&U===O.alternate){Oe=U;break t}U=Oe(U),O=Oe(O)}Oe=null}else Oe=null;$!==null&&Iy(oe,Y,$,Oe,!1),Se!==null&&xt!==null&&Iy(oe,xt,Se,Oe,!0)}}e:{if(Y=F?On(F):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var lt=Qg;else if(Yg(Y))if($g)lt=q1;else{lt=z1;var je=U1}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&ka(F.elementType)&&(lt=Qg):lt=B1;if(lt&&(lt=lt(t,F))){Kg(oe,lt,a,se);break e}je&&je(t,Y,F),t==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&Ql(Y,"number",Y.value)}switch(je=F?On(F):window,t){case"focusin":(Yg(je)||je.contentEditable==="true")&&(za=je,dh=F,ao=null);break;case"focusout":ao=dh=za=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,sp(oe,a,se);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":sp(oe,a,se)}var Ke;if(ct)e:{switch(t){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Ua?Zi(t,a)&&(Ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ze="onCompositionStart");Ze&&(Ys&&a.locale!=="ko"&&(Ua||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Ua&&(Ke=Jl()):(qs=se,Zl="value"in qs?qs.value:qs.textContent,Ua=!0)),je=Lu(F,Ze),0<je.length&&(Ze=new Gs(Ze,t,null,a,se),oe.push({event:Ze,listeners:je}),Ke?Ze.data=Ke:(Ke=Pa(a),Ke!==null&&(Ze.data=Ke)))),(Ke=Zn?O1(t,a):V1(t,a))&&(Ze=Lu(F,"onBeforeInput"),0<Ze.length&&(je=new Gs("onBeforeInput","beforeinput",null,a,se),oe.push({event:je,listeners:Ze}),je.data=Ke)),A2(oe,t,F,a,se)}Cy(oe,n)})}function ko(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Lu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=xs(t,a),h!=null&&l.unshift(ko(t,h,m)),h=xs(t,n),h!=null&&l.push(ko(t,h,m))),t.tag===3)return l;t=t.return}return[]}function I2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Iy(t,n,a,l,h){for(var m=n._reactName,v=[];a!==null&&a!==l;){var w=a,D=w.alternate,F=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||F===null||(D=F,h?(F=xs(a,m),F!=null&&v.unshift(ko(a,F,D))):h||(F=xs(a,m),F!=null&&v.push(ko(a,F,D)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var k2=/\r\n?/g,D2=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(D2,"")}function Dy(t,n){return n=ky(n),ky(t)===n}function yt(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&An(t,""+l);break;case"className":Vn(t,"class",l);break;case"tabIndex":Vn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,a,l);break;case"style":Xl(t,l,m);break;case"data":if(n!=="object"){Vn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&yt(t,n,"name",h.name,h,null),yt(t,n,"formEncType",h.formEncType,h,null),yt(t,n,"formMethod",h.formMethod,h,null),yt(t,n,"formTarget",h.formTarget,h,null)):(yt(t,n,"encType",h.encType,h,null),yt(t,n,"method",h.method,h,null),yt(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ys);break;case"onScroll":l!=null&&Xe("scroll",t);break;case"onScrollEnd":l!=null&&Xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Xe("beforetoggle",t),Xe("toggle",t),Ra(t,"popover",l);break;case"xlinkActuate":Bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Bt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Bt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Bt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Bt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ra(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Lc.get(a)||a,Ra(t,a,l))}}function Pf(t,n,a,l,h,m){switch(a){case"style":Xl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&Xe("scroll",t);break;case"onScrollEnd":l!=null&&Xe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[Jt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ra(t,a,l)}}}function hn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",t),Xe("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:yt(t,n,m,v,a,null)}}h&&yt(t,n,"srcSet",a.srcSet,a,null),l&&yt(t,n,"src",a.src,a,null);return;case"input":Xe("invalid",t);var w=m=v=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":h=se;break;case"type":v=se;break;case"checked":D=se;break;case"defaultChecked":F=se;break;case"value":m=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,n));break;default:yt(t,n,l,se,a,null)}}Mc(t,m,w,D,F,v,h,!1);return;case"select":Xe("invalid",t),l=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:yt(t,n,h,w,a,null)}n=m,a=v,t.multiple=!!l,n!=null?zr(t,!!l,n,!1):a!=null&&zr(t,!!l,a,!0);return;case"textarea":Xe("invalid",t),m=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:yt(t,n,v,w,a,null)}Br(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:yt(t,n,D,l,a,null)}return;case"dialog":Xe("beforetoggle",t),Xe("toggle",t),Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":Xe("load",t);break;case"video":case"audio":for(l=0;l<Io.length;l++)Xe(Io[l],t);break;case"image":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"embed":case"source":case"link":Xe("error",t),Xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:yt(t,n,F,l,a,null)}return;default:if(ka(n)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&Pf(t,n,se,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&yt(t,n,w,l,a,null))}function M2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,D=null,F=null,se=null;for($ in a){var oe=a[$];if(a.hasOwnProperty($)&&oe!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=oe;default:l.hasOwnProperty($)||yt(t,n,$,null,l,oe)}}for(var Y in l){var $=l[Y];if(oe=a[Y],l.hasOwnProperty(Y)&&($!=null||oe!=null))switch(Y){case"type":m=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":se=$;break;case"value":v=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,n));break;default:$!==oe&&yt(t,n,Y,$,l,oe)}}Ia(t,v,w,D,F,se,m,h);return;case"select":$=v=w=Y=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(m)||yt(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":Y=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==D&&yt(t,n,h,m,l,D)}n=w,a=v,l=$,Y!=null?zr(t,!!a,Y,!1):!!l!=!!a&&(n!=null?zr(t,!!a,n,!0):zr(t,!!a,a?[]:"",!1));return;case"textarea":$=Y=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:yt(t,n,w,null,l,h)}for(v in l)if(h=l[v],m=a[v],l.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":Y=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&yt(t,n,v,h,l,m)}Oc(t,Y,$);return;case"option":for(var Se in a)if(Y=a[Se],a.hasOwnProperty(Se)&&Y!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:yt(t,n,Se,null,l,Y)}for(D in l)if(Y=l[D],$=a[D],l.hasOwnProperty(D)&&Y!==$&&(Y!=null||$!=null))switch(D){case"selected":t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:yt(t,n,D,Y,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)Y=a[Oe],a.hasOwnProperty(Oe)&&Y!=null&&!l.hasOwnProperty(Oe)&&yt(t,n,Oe,null,l,Y);for(F in l)if(Y=l[F],$=a[F],l.hasOwnProperty(F)&&Y!==$&&(Y!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,n));break;default:yt(t,n,F,Y,l,$)}return;default:if(ka(n)){for(var xt in a)Y=a[xt],a.hasOwnProperty(xt)&&Y!==void 0&&!l.hasOwnProperty(xt)&&Pf(t,n,xt,void 0,l,Y);for(se in l)Y=l[se],$=a[se],!l.hasOwnProperty(se)||Y===$||Y===void 0&&$===void 0||Pf(t,n,se,Y,l,$);return}}for(var U in a)Y=a[U],a.hasOwnProperty(U)&&Y!=null&&!l.hasOwnProperty(U)&&yt(t,n,U,null,l,Y);for(oe in l)Y=l[oe],$=a[oe],!l.hasOwnProperty(oe)||Y===$||Y==null&&$==null||yt(t,n,oe,Y,l,$)}function My(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,v=h.initiatorType,w=h.duration;if(m&&w&&My(v)){for(v=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],F=D.startTime;if(F>w)break;var se=D.transferSize,oe=D.initiatorType;se&&My(oe)&&(D=D.responseEnd,v+=se*(D<w?1:(w-F)/(D-F)))}if(--l,n+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Uf=null,zf=null;function Pu(t){return t.nodeType===9?t:t.ownerDocument}function Oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qf=null;function V2(){var t=window.event;return t&&t.type==="popstate"?t===qf?!1:(qf=t,!0):(qf=null,!1)}var Ly=typeof setTimeout=="function"?setTimeout:void 0,L2=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(U2)}:Ly;function U2(t){setTimeout(function(){throw t})}function ui(t){return t==="head"}function Uy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),fl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Do(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Do(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Os]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Do(t.ownerDocument.body);a=h}while(a);fl(n)}function zy(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Hf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hf(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function z2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Os])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=is(t.nextSibling),t===null)break}return null}function B2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=is(t.nextSibling),t===null))return null;return t}function By(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=is(t.nextSibling),t===null))return null;return t}function Ff(t){return t.data==="$?"||t.data==="$~"}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function q2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function is(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Yf=null;function qy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return is(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Hy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Fy(t,n,a){switch(n=Pu(a),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Do(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ca(t)}var as=new Map,Gy=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sr=ge.d;ge.d={f:H2,r:F2,D:G2,C:Y2,L:K2,m:Q2,X:X2,S:$2,M:W2};function H2(){var t=Sr.f(),n=Ru();return t||n}function F2(t){var n=$n(t);n!==null&&n.tag===5&&n.type==="form"?o0(n):Sr.r(t)}var ul=typeof document>"u"?null:document;function Yy(t,n,a){var l=ul;if(l&&typeof n=="string"&&n){var h=Nn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gy.has(h)||(Gy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),hn(n,"link",t),zt(n),l.head.appendChild(n)))}}function G2(t){Sr.D(t),Yy("dns-prefetch",t,null)}function Y2(t,n){Sr.C(t,n),Yy("preconnect",t,n)}function K2(t,n,a){Sr.L(t,n,a);var l=ul;if(l&&t&&n){var h='link[rel="preload"][as="'+Nn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nn(a.imageSizes)+'"]')):h+='[href="'+Nn(t)+'"]';var m=h;switch(n){case"style":m=dl(t);break;case"script":m=hl(t)}as.has(m)||(t=E({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),as.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Mo(m))||n==="script"&&l.querySelector(Oo(m))||(n=l.createElement("link"),hn(n,"link",t),zt(n),l.head.appendChild(n)))}}function Q2(t,n){Sr.m(t,n);var a=ul;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Nn(l)+'"][href="'+Nn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=hl(t)}if(!as.has(m)&&(t=E({rel:"modulepreload",href:t},n),as.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Oo(m)))return}l=a.createElement("link"),hn(l,"link",t),zt(l),a.head.appendChild(l)}}}function $2(t,n,a){Sr.S(t,n,a);var l=ul;if(l&&t){var h=Ls(l).hoistableStyles,m=dl(t);n=n||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Mo(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},a),(a=as.get(m))&&Kf(t,a);var D=v=l.createElement("link");zt(D),hn(D,"link",t),D._p=new Promise(function(F,se){D.onload=F,D.onerror=se}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,zu(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function X2(t,n){Sr.X(t,n);var a=ul;if(a&&t){var l=Ls(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Oo(h)),m||(t=E({src:t,async:!0},n),(n=as.get(h))&&Qf(t,n),m=a.createElement("script"),zt(m),hn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function W2(t,n){Sr.M(t,n);var a=ul;if(a&&t){var l=Ls(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Oo(h)),m||(t=E({src:t,async:!0,type:"module"},n),(n=as.get(h))&&Qf(t,n),m=a.createElement("script"),zt(m),hn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Ky(t,n,a,l){var h=(h=Z.current)?Uu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=dl(a.href),a=Ls(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=dl(a.href);var m=Ls(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Mo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),as.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},as.set(t,a),m||Z2(h,t,a,v.state))),n&&l===null)throw Error(i(528,""));return v}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=hl(a),a=Ls(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function dl(t){return'href="'+Nn(t)+'"'}function Mo(t){return'link[rel="stylesheet"]['+t+"]"}function Qy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Z2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),hn(n,"link",a),zt(n),t.head.appendChild(n))}function hl(t){return'[src="'+Nn(t)+'"]'}function Oo(t){return"script[async]"+t}function $y(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Nn(a.href)+'"]');if(l)return n.instance=l,zt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),zt(l),hn(l,"style",h),zu(l,a.precedence,t),n.instance=l;case"stylesheet":h=dl(a.href);var m=t.querySelector(Mo(h));if(m)return n.state.loading|=4,n.instance=m,zt(m),m;l=Qy(a),(h=as.get(h))&&Kf(l,h),m=(t.ownerDocument||t).createElement("link"),zt(m);var v=m;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),hn(m,"link",l),n.state.loading|=4,zu(m,a.precedence,t),n.instance=m;case"script":return m=hl(a.src),(h=t.querySelector(Oo(m)))?(n.instance=h,zt(h),h):(l=a,(h=as.get(m))&&(l=E({},a),Qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),zt(h),hn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,zu(l,a.precedence,t));return n.instance}function zu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Bu=null;function Xy(t,n,a){if(Bu===null){var l=new Map,h=Bu=new Map;h.set(a,l)}else h=Bu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Os]||m[Ut]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=t+v;var w=l.get(v);w?w.push(m):l.set(v,[m])}}return l}function Wy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function J2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Zy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ew(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=dl(l.href),m=n.querySelector(Mo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=qu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,zt(m);return}m=n.ownerDocument||n,l=Qy(l),(h=as.get(h))&&Kf(l,h),m=m.createElement("link"),zt(m);var v=m;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),hn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=qu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var $f=0;function tw(t,n){return t.stylesheets&&t.count===0&&Fu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&$f===0&&($f=62500*O2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>$f?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hu=null;function Fu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hu=new Map,n.forEach(nw,t),Hu=null,qu.call(t))}function nw(t,n){if(!(n.state.loading&4)){var a=Hu.get(t);if(a)var l=a.get(null);else{a=new Map,Hu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,h),a.set(v,h),this.count++,l=qu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Vo={$$typeof:pe,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function sw(t,n,a,l,h,m,v,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Jy(t,n,a,l,h,m,v,w,D,F,se,oe){return t=new sw(t,n,a,v,D,F,se,oe,w),n=1,m===!0&&(n|=24),m=Pn(3,null,null,n),t.current=m,m.stateNode=t,n=Ah(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Ih(m),t}function ex(t){return t?(t=Ha,t):Ha}function tx(t,n,a,l,h,m){h=ex(h),l.context===null?l.context=h:l.pendingContext=h,l=Jr(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ei(t,l,n),a!==null&&(kn(a,t,n),mo(a,t,n))}function nx(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Xf(t,n){nx(t,n),(t=t.alternate)&&nx(t,n)}function sx(t){if(t.tag===13||t.tag===31){var n=ta(t,67108864);n!==null&&kn(n,t,67108864),Xf(t,67108864)}}function rx(t){if(t.tag===13||t.tag===31){var n=Hn();n=Hi(n);var a=ta(t,n);a!==null&&kn(a,t,n),Xf(t,n)}}var Gu=!0;function rw(t,n,a,l){var h=K.T;K.T=null;var m=ge.p;try{ge.p=2,Wf(t,n,a,l)}finally{ge.p=m,K.T=h}}function iw(t,n,a,l){var h=K.T;K.T=null;var m=ge.p;try{ge.p=8,Wf(t,n,a,l)}finally{ge.p=m,K.T=h}}function Wf(t,n,a,l){if(Gu){var h=Zf(l);if(h===null)Lf(t,n,l,Yu,a),ax(t,l);else if(lw(h,t,n,a,l))l.stopPropagation();else if(ax(t,l),n&4&&-1<aw.indexOf(t)){for(;h!==null;){var m=$n(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Is(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-It(v);w.entanglements[1]|=D,v&=~D}Xs(m),(ut&6)===0&&(ju=at()+500,Ro(0))}}break;case 31:case 13:w=ta(m,2),w!==null&&kn(w,m,2),Ru(),Xf(m,2)}if(m=Zf(l),m===null&&Lf(t,n,l,Yu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Lf(t,n,l,null,a)}}function Zf(t){return t=Xn(t),Jf(t)}var Yu=null;function Jf(t){if(Yu=null,t=Vs(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Yu=t,null}function ix(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xt()){case sn:return 2;case rn:return 8;case _n:case an:return 32;case hs:return 268435456;default:return 32}default:return 32}}var em=!1,di=null,hi=null,fi=null,Lo=new Map,Po=new Map,mi=[],aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ax(t,n){switch(t){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Lo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(n.pointerId)}}function Uo(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=$n(n),n!==null&&sx(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function lw(t,n,a,l,h){switch(n){case"focusin":return di=Uo(di,t,n,a,l,h),!0;case"dragenter":return hi=Uo(hi,t,n,a,l,h),!0;case"mouseover":return fi=Uo(fi,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Lo.set(m,Uo(Lo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Po.set(m,Uo(Po.get(m)||null,t,n,a,l,h)),!0}return!1}function lx(t){var n=Vs(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,gs(t.priority,function(){rx(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,gs(t.priority,function(){rx(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ku(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Zf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Wl=l,a.target.dispatchEvent(l),Wl=null}else return n=$n(a),n!==null&&sx(n),t.blockedOn=a,!1;n.shift()}return!0}function ox(t,n,a){Ku(t)&&a.delete(n)}function ow(){em=!1,di!==null&&Ku(di)&&(di=null),hi!==null&&Ku(hi)&&(hi=null),fi!==null&&Ku(fi)&&(fi=null),Lo.forEach(ox),Po.forEach(ox)}function Qu(t,n){t.blockedOn===n&&(t.blockedOn=null,em||(em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ow)))}var $u=null;function cx(t){$u!==t&&($u=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$u===t&&($u=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Jf(l||a)===null)continue;break}var m=$n(a);m!==null&&(t.splice(n,3),n-=3,Wh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function fl(t){function n(D){return Qu(D,t)}di!==null&&Qu(di,t),hi!==null&&Qu(hi,t),fi!==null&&Qu(fi,t),Lo.forEach(n),Po.forEach(n);for(var a=0;a<mi.length;a++){var l=mi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<mi.length&&(a=mi[0],a.blockedOn===null);)lx(a),a.blockedOn===null&&mi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],v=h[Jt]||null;if(typeof m=="function")v||cx(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[Jt]||null)w=v.formAction;else if(Jf(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),cx(a)}}}function ux(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function tm(t){this._internalRoot=t}Xu.prototype.render=tm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Hn();tx(a,l,t,n,null,null)},Xu.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;tx(t.current,2,null,t,null,null),Ru(),n[Ms]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Rc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<mi.length&&n!==0&&n<mi[a].priority;a++);mi.splice(a,0,t),a===0&&lx(t)}};var dx=e.version;if(dx!=="19.2.0")throw Error(i(527,dx,"19.2.0"));ge.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var cw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{fs=Wu.inject(cw),ln=Wu}catch{}}return Bo.createRoot=function(t,n){if(!o(t))throw Error(i(299));var a=!1,l="",h=x0,m=v0,v=b0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Jy(t,1,!1,null,null,a,l,null,h,m,v,ux),t[Ms]=n.current,Vf(t),new tm(n)},Bo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=x0,v=v0,w=b0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Jy(t,1,!0,n,a??null,l,h,D,m,v,w,ux),n.context=ex(null),a=n.current,l=Hn(),l=Hi(l),h=Jr(l),h.callback=null,ei(a,h,l),a=l,n.current.lanes=a,Bi(n,a),Xs(n),t[Ms]=n.current,Vf(t),new Xu(n)},Bo.version="19.2.0",Bo}var _x;function bw(){if(_x)return rm.exports;_x=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=vw(),rm.exports}var _w=bw();const ww=()=>{};var wx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=function(r){const e=[];let s=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},Ew=function(r){const e=[];let s=0,i=0;for(;s<r.length;){const o=r[s++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const d=r[s++];e[i++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=r[s++],f=r[s++],p=r[s++],x=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(x>>10)),e[i++]=String.fromCharCode(56320+(x&1023))}else{const d=r[s++],f=r[s++];e[i++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const d=r[o],f=o+1<r.length,p=f?r[o+1]:0,x=o+2<r.length,y=x?r[o+2]:0,_=d>>2,E=(d&3)<<4|p>>4;let A=(p&15)<<2|y>>6,q=y&63;x||(q=64,f||(A=64)),i.push(s[_],s[E],s[A],s[q])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ib(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Ew(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const d=s[r.charAt(o++)],p=o<r.length?s[r.charAt(o)]:0;++o;const y=o<r.length?s[r.charAt(o)]:64;++o;const E=o<r.length?s[r.charAt(o)]:64;if(++o,d==null||p==null||y==null||E==null)throw new Tw;const A=d<<2|p>>4;if(i.push(A),y!==64){const q=p<<4&240|y>>2;if(i.push(q),E!==64){const J=y<<6&192|E;i.push(J)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sw=function(r){const e=ib(r);return ab.encodeByteArray(e,!0)},pd=function(r){return Sw(r).replace(/\./g,"")},lb=function(r){try{return ab.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=()=>Nw().__FIREBASE_DEFAULTS__,jw=()=>{if(typeof process>"u"||typeof wx>"u")return;const r=wx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Cw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&lb(r[1]);return e&&JSON.parse(e)},Vd=()=>{try{return ww()||Aw()||jw()||Cw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ob=r=>Vd()?.emulatorHosts?.[r],Rw=r=>{const e=ob(r);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),i]:[e.substring(0,s),i]},cb=()=>Vd()?.config,ub=r=>Vd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function db(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[pd(JSON.stringify(s)),pd(JSON.stringify(f)),""].join(".")}const Qo={};function Dw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?r.emulator.push(e):r.prod.push(e);return r}function Mw(r){let e=document.getElementById(r),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),s=!0),{created:s,element:e}}let Ex=!1;function hb(r,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Qo[r]===e||Qo[r]||Ex)return;Qo[r]=e;function s(A){return`__firebase__banner__${A}`}const i="__firebase__banner",d=Dw().prod.length>0;function f(){const A=document.getElementById(i);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function x(A,q){A.setAttribute("width","24"),A.setAttribute("id",q),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ex=!0,f()},A}function _(A,q){A.setAttribute("id",q),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Mw(i),q=s("text"),J=document.getElementById(q)||document.createElement("span"),X=s("learnmore"),z=document.getElementById(X)||document.createElement("a"),te=s("preprendIcon"),W=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const pe=A.element;p(pe),_(z,X);const he=y();x(W,te),pe.append(W,J,z,he),document.body.appendChild(pe)}d?(J.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function Vw(){const r=Vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Uw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zw(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Bw(){return!Vw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Hw(){return new Promise((r,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="FirebaseError";class Vr extends Error{constructor(e,s,i){super(s),this.code=e,this.customData=i,this.name=Fw,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,s,i){this.service=e,this.serviceName=s,this.errors=i}create(e,...s){const i=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?Gw(d,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Vr(o,p,i)}}function Gw(r,e){return r.replace(Yw,(s,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Yw=/\{\$([^}]+)}/g;function Kw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const s=Object.keys(r),i=Object.keys(e);for(const o of s){if(!i.includes(o))return!1;const d=r[o],f=e[o];if(Tx(d)&&Tx(f)){if(!va(d,f))return!1}else if(d!==f)return!1}for(const o of i)if(!s.includes(o))return!1;return!0}function Tx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r){const e=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,d]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function Ho(r){const e=r.indexOf("?");if(!e)return"";const s=r.indexOf("#",e);return r.substring(e,s>0?s:void 0)}function Qw(r,e){const s=new $w(r,e);return s.subscribe.bind(s)}class $w{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,i){let o;if(e===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");Xw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:i},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xw(r,e){if(typeof r!="object"||r===null)return!1;for(const s of e)if(s in r&&typeof r[s]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r){return r&&r._delegate?r._delegate:r}class ba{constructor(e,s,i){this.name=e,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const i=new Iw;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jw(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});i.resolve(d)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);i===p&&f.resolve(o)}return o}onInit(e,s){const i=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const d=this.instances.get(i);return d&&e(d,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const i=this.onInitCallbacks.get(s);if(i)for(const o of i)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Zw(e),options:s}),this.instances.set(e,i),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zw(r){return r===ga?void 0:r}function Jw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Ww(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const tE={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},nE=Je.INFO,sE={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},rE=(r,e,...s)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=sE[e];if(o)console[o](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=nE,this._logHandler=rE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const iE=(r,e)=>e.some(s=>r instanceof s);let Sx,Nx;function aE(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lE(){return Nx||(Nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Sm=new WeakMap,mb=new WeakMap,cm=new WeakMap,eg=new WeakMap;function oE(r){const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{s(Ei(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&fb.set(s,r)}).catch(()=>{}),eg.set(e,r),e}function cE(r){if(Sm.has(r))return;const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});Sm.set(r,e)}let Nm={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return Sm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||mb.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ei(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function uE(r){Nm=r(Nm)}function dE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const i=r.call(um(this),e,...s);return mb.set(i,e.sort?e.sort():[e]),Ei(i)}:lE().includes(r)?function(...e){return r.apply(um(this),e),Ei(fb.get(this))}:function(...e){return Ei(r.apply(um(this),e))}}function hE(r){return typeof r=="function"?dE(r):(r instanceof IDBTransaction&&cE(r),iE(r,aE())?new Proxy(r,Nm):r)}function Ei(r){if(r instanceof IDBRequest)return oE(r);if(cm.has(r))return cm.get(r);const e=hE(r);return e!==r&&(cm.set(r,e),eg.set(e,r)),e}const um=r=>eg.get(r);function fE(r,e,{blocked:s,upgrade:i,blocking:o,terminated:d}={}){const f=indexedDB.open(r,e),p=Ei(f);return i&&f.addEventListener("upgradeneeded",x=>{i(Ei(f.result),x.oldVersion,x.newVersion,Ei(f.transaction),x)}),s&&f.addEventListener("blocked",x=>s(x.oldVersion,x.newVersion,x)),p.then(x=>{d&&x.addEventListener("close",()=>d()),o&&x.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const mE=["get","getKey","getAll","getAllKeys","count"],gE=["put","add","delete","clear"],dm=new Map;function Ax(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,o=gE.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(o||mE.includes(s)))return;const d=async function(f,...p){const x=this.transaction(f,o?"readwrite":"readonly");let y=x.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&x.done]))[0]};return dm.set(e,d),d}uE(r=>({...r,get:(e,s,i)=>Ax(e,s)||r.get(e,s,i),has:(e,s)=>!!Ax(e,s)||r.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(yE(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function yE(r){return r.getComponent()?.type==="VERSION"}const Am="@firebase/app",jx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Jm("@firebase/app"),xE="@firebase/app-compat",vE="@firebase/analytics-compat",bE="@firebase/analytics",_E="@firebase/app-check-compat",wE="@firebase/app-check",EE="@firebase/auth",TE="@firebase/auth-compat",SE="@firebase/database",NE="@firebase/data-connect",AE="@firebase/database-compat",jE="@firebase/functions",CE="@firebase/functions-compat",RE="@firebase/installations",IE="@firebase/installations-compat",kE="@firebase/messaging",DE="@firebase/messaging-compat",ME="@firebase/performance",OE="@firebase/performance-compat",VE="@firebase/remote-config",LE="@firebase/remote-config-compat",PE="@firebase/storage",UE="@firebase/storage-compat",zE="@firebase/firestore",BE="@firebase/ai",qE="@firebase/firestore-compat",HE="firebase",FE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",GE={[Am]:"fire-core",[xE]:"fire-core-compat",[bE]:"fire-analytics",[vE]:"fire-analytics-compat",[wE]:"fire-app-check",[_E]:"fire-app-check-compat",[EE]:"fire-auth",[TE]:"fire-auth-compat",[SE]:"fire-rtdb",[NE]:"fire-data-connect",[AE]:"fire-rtdb-compat",[jE]:"fire-fn",[CE]:"fire-fn-compat",[RE]:"fire-iid",[IE]:"fire-iid-compat",[kE]:"fire-fcm",[DE]:"fire-fcm-compat",[ME]:"fire-perf",[OE]:"fire-perf-compat",[VE]:"fire-rc",[LE]:"fire-rc-compat",[PE]:"fire-gcs",[UE]:"fire-gcs-compat",[zE]:"fire-fst",[qE]:"fire-fst-compat",[BE]:"fire-vertex","fire-js":"fire-js",[HE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,YE=new Map,Cm=new Map;function Cx(r,e){try{r.container.addComponent(e)}catch(s){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function Sl(r){const e=r.name;if(Cm.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,r);for(const s of yd.values())Cx(s,r);for(const s of YE.values())Cx(s,r);return!0}function tg(r,e){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(e)}function os(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new uc("app","Firebase",KE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,s,i){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=FE;function gb(r,e={}){let s=r;typeof e!="object"&&(e={name:e});const i={name:jm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ti.create("bad-app-name",{appName:String(o)});if(s||(s=cb()),!s)throw Ti.create("no-options");const d=yd.get(o);if(d){if(va(s,d.options)&&va(i,d.config))return d;throw Ti.create("duplicate-app",{appName:o})}const f=new eE(o);for(const x of Cm.values())f.addComponent(x);const p=new QE(s,i,f);return yd.set(o,p),p}function pb(r=jm){const e=yd.get(r);if(!e&&r===jm&&cb())return gb();if(!e)throw Ti.create("no-app",{appName:r});return e}function Si(r,e,s){let i=GE[r]??r;s&&(i+=`-${s}`);const o=i.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(f.join(" "));return}Sl(new ba(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",XE=1,ec="firebase-heartbeat-store";let hm=null;function yb(){return hm||(hm=fE($E,XE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ec)}catch(s){console.warn(s)}}}}).catch(r=>{throw Ti.create("idb-open",{originalErrorMessage:r.message})})),hm}async function WE(r){try{const s=(await yb()).transaction(ec),i=await s.objectStore(ec).get(xb(r));return await s.done,i}catch(e){if(e instanceof Vr)Ir.warn(e.message);else{const s=Ti.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(s.message)}}}async function Rx(r,e){try{const i=(await yb()).transaction(ec,"readwrite");await i.objectStore(ec).put(e,xb(r)),await i.done}catch(s){if(s instanceof Vr)Ir.warn(s.message);else{const i=Ti.create("idb-set",{originalErrorMessage:s?.message});Ir.warn(i.message)}}}function xb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1024,JE=30;class eT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new nT(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ix();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>JE){const o=sT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ix(),{heartbeatsToSend:s,unsentEntries:i}=tT(this._heartbeatsCache.heartbeats),o=pd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ir.warn(e),""}}}function Ix(){return new Date().toISOString().substring(0,10)}function tT(r,e=ZE){const s=[];let i=r.slice();for(const o of r){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),kx(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),kx(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class nT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qw()?Hw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await WE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function kx(r){return pd(JSON.stringify({version:2,heartbeats:r})).length}function sT(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(r){Sl(new ba("platform-logger",e=>new pE(e),"PRIVATE")),Sl(new ba("heartbeat",e=>new eT(e),"PRIVATE")),Si(Am,jx,r),Si(Am,jx,"esm2020"),Si("fire-js","")}rT("");function vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iT=vb,bb=new uc("auth","Firebase",vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Jm("@firebase/auth");function aT(r,...e){xd.logLevel<=Je.WARN&&xd.warn(`Auth (${Dl}): ${r}`,...e)}function ad(r,...e){xd.logLevel<=Je.ERROR&&xd.error(`Auth (${Dl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(r,...e){throw ng(r,...e)}function Js(r,...e){return ng(r,...e)}function _b(r,e,s){const i={...iT(),[e]:s};return new uc("auth","Firebase",i).create(e,{appName:r.name})}function Cr(r){return _b(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const s=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return bb.create(r,...e)}function Le(r,e,...s){if(!r)throw ng(e,...s)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ad(e),new Error(e)}function kr(r,e){r||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return typeof self<"u"&&self.location?.href||""}function lT(){return Dx()==="http:"||Dx()==="https:"}function Dx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lT()||Pw()||"connection"in navigator)?navigator.onLine:!0}function cT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,s){this.shortDelay=e,this.longDelay=s,kr(s>e,"Short delay should be less than long delay!"),this.isMobile=Ow()||Uw()}get(){return oT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r,e){kr(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static initialize(e,s,i){this.fetchImpl=e,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hT=new hc(3e4,6e4);function Lr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Pr(r,e,s,i,o={}){return Eb(r,o,async()=>{let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});const p=dc({key:r.config.apiKey,...f}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:x,...d};return Lw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&kl(r.emulatorConfig.host)&&(y.credentials="include"),wb.fetch()(await Tb(r,r.config.apiHost,s,p),y)})}async function Eb(r,e,s){r._canInitEmulator=!1;const i={...uT,...e};try{const o=new mT(r),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Zu(r,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[x,y]=p.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(r,"credential-already-in-use",f);if(x==="EMAIL_EXISTS")throw Zu(r,"email-already-in-use",f);if(x==="USER_DISABLED")throw Zu(r,"user-disabled",f);const _=i[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _b(r,_,y);js(r,_)}}catch(o){if(o instanceof Vr)throw o;js(r,"network-request-failed",{message:String(o)})}}async function fc(r,e,s,i,o={}){const d=await Pr(r,e,s,i,o);return"mfaPendingCredential"in d&&js(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function Tb(r,e,s,i){const o=`${e}${s}?${i}`,d=r,f=d.config.emulator?sg(r.config,o):`${r.config.apiScheme}://${o}`;return dT.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function fT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(Js(this.auth,"network-request-failed")),hT.get())})}}function Zu(r,e,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const o=Js(r,e,i);return o.customData._tokenResponse=s,o}function Mx(r){return r!==void 0&&r.enterprise!==void 0}class gT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return fT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pT(r,e){return Pr(r,"GET","/v2/recaptchaConfig",Lr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(r,e){return Pr(r,"POST","/v1/accounts:delete",e)}async function vd(r,e){return Pr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xT(r,e=!1){const s=Lt(r),i=await s.getIdToken(e),o=rg(i);Le(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:i,authTime:$o(fm(o.auth_time)),issuedAtTime:$o(fm(o.iat)),expirationTime:$o(fm(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function fm(r){return Number(r)*1e3}function rg(r){const[e,s,i]=r.split(".");if(e===void 0||s===void 0||i===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const o=lb(s);return o?JSON.parse(o):(ad("Failed to decode base64 JWT payload"),null)}catch(o){return ad("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ox(r){const e=rg(r);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(r,e,s=!1){if(s)return e;try{return await e}catch(i){throw i instanceof Vr&&vT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function vT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(r){const e=r.auth,s=await r.getIdToken(),i=await tc(r,vd(e,{idToken:s}));Le(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const d=o.providerUserInfo?.length?Sb(o.providerUserInfo):[],f=wT(r.providerData,d),p=r.isAnonymous,x=!(r.email&&o.passwordHash)&&!f?.length,y=p?x:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function _T(r){const e=Lt(r);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sb(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(r,e){const s=await Eb(r,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=r.config,f=await Tb(r,o,"/v1/token",`key=${d}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:p,body:i};return r.emulatorConfig&&kl(r.emulatorConfig.host)&&(x.credentials="include"),wb.fetch()(f,x)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function TT(r,e){return Pr(r,"POST","/v2/accounts:revokeToken",Lr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ox(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const s=Ox(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:i,refreshToken:o,expiresIn:d}=await ET(e,s);this.updateTokensAndExpiration(i,o,Number(d))}updateTokensAndExpiration(e,s,i){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,s){const{refreshToken:i,accessToken:o,expirationTime:d}=s,f=new bl;return i&&(Le(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(Le(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Le(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,e){Le(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class As{constructor({uid:e,auth:s,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new bT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await tc(this,this.stsTokenManager.getToken(this.auth,e));return Le(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return xT(this,e)}reload(){return _T(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new As({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),s&&await bd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await tc(this,yT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const i=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,x=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:q,providerData:J,stsTokenManager:X}=s;Le(E&&X,e,"internal-error");const z=bl.fromJSON(this.name,X);Le(typeof E=="string",e,"internal-error"),pi(i,e.name),pi(o,e.name),Le(typeof A=="boolean",e,"internal-error"),Le(typeof q=="boolean",e,"internal-error"),pi(d,e.name),pi(f,e.name),pi(p,e.name),pi(x,e.name),pi(y,e.name),pi(_,e.name);const te=new As({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:q,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:_});return J&&Array.isArray(J)&&(te.providerData=J.map(W=>({...W}))),x&&(te._redirectEventId=x),te}static async _fromIdTokenResponse(e,s,i=!1){const o=new bl;o.updateFromServerResponse(s);const d=new As({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await bd(d),d}static async _fromGetAccountInfoResponse(e,s,i){const o=s.users[0];Le(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new bl;p.updateFromIdToken(i);const x=new As({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(x,y),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new Map;function jr(r){kr(r instanceof Function,"Expected a class definition");let e=Vx.get(r);return e?(kr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Vx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Nb.type="NONE";const Lx=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(r,e,s){return`firebase:${r}:${e}:${s}`}class _l{constructor(e,s,i){this.persistence=e,this.auth=s,this.userKey=i;const{config:o,name:d}=this.auth;this.fullUserKey=ld(this.userKey,o.apiKey,d),this.fullPersistenceKey=ld("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await vd(this.auth,{idToken:e}).catch(()=>{});return s?As._fromGetAccountInfoResponse(this.auth,s,e):null}return As._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,i="authUser"){if(!s.length)return new _l(jr(Lx),e,i);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||jr(Lx);const f=ld(i,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let E;if(typeof _=="string"){const A=await vd(e,{idToken:_}).catch(()=>{});if(!A)break;E=await As._fromGetAccountInfoResponse(e,A,_)}else E=As._fromJSON(e,_);y!==d&&(p=E),d=y;break}}catch{}const x=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!x.length?new _l(d,e,i):(d=x[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new _l(d,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ab(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Db(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(Ib(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function Ab(r=bn()){return/firefox\//i.test(r)}function jb(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(r=bn()){return/crios\//i.test(r)}function Rb(r=bn()){return/iemobile/i.test(r)}function Ib(r=bn()){return/android/i.test(r)}function kb(r=bn()){return/blackberry/i.test(r)}function Db(r=bn()){return/webos/i.test(r)}function ig(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ST(r=bn()){return ig(r)&&!!window.navigator?.standalone}function NT(){return zw()&&document.documentMode===10}function Mb(r=bn()){return ig(r)||Ib(r)||Db(r)||kb(r)||/windows phone/i.test(r)||Rb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r,e=[]){let s;switch(r){case"Browser":s=Px(bn());break;case"Worker":s=`${Px(bn())}-${r}`;break;default:s=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Dl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const i=d=>new Promise((f,p)=>{try{const x=e(d);f(x)}catch(x){p(x)}});i.onAbort=s,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const i of this.queue)await i(e),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(r,e={}){return Pr(r,"GET","/v2/passwordPolicy",Lr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=6;class RT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??CT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=e.length>=i),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,s,i,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,s,i,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ux(this),this.idTokenSubscription=new Ux(this),this.beforeStateQueue=new AT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=jr(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await vd(this,{idToken:e}),i=await As._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(os(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(Cr(this));const s=e?Lt(e):null;return s&&Le(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jT(this),s=new RT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,s,i){return this.registerStateListener(this.authStateSubscription,e,s,i)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,i){return this.registerStateListener(this.idTokenSubscription,e,s,i)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await TT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const i=await this.getOrInitRedirectPersistenceManager(s);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&jr(e)||this._popupRedirectResolver;Le(s,this,"argument-error"),this.redirectPersistenceManager=await _l.create(this,[jr(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,i,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const x=e.addObserver(s,i,o);return()=>{f=!0,x()}}else{const x=e.addObserver(s);return()=>{f=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vi(r){return Lt(r)}class Ux{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qw(s=>this.observer=s)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kT(r){Ld=r}function Vb(r){return Ld.loadJS(r)}function DT(){return Ld.recaptchaEnterpriseScript}function MT(){return Ld.gapiScript}function OT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class VT{constructor(){this.enterprise=new LT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class LT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const PT="recaptcha-enterprise",Lb="NO_RECAPTCHA";class UT{constructor(e){this.type=PT,this.auth=Vi(e)}async verify(e="verify",s=!1){async function i(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{pT(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new gT(x);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(x=>{p(x)})})}function o(d,f,p){const x=window.grecaptcha;Mx(x)?x.enterprise.ready(()=>{x.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(Lb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{i(this.auth).then(p=>{if(!s&&Mx(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let x=DT();x.length!==0&&(x+=p),Vb(x).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function zx(r,e,s,i=!1,o=!1){const d=new UT(r);let f;if(o)f=Lb;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const x=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const x=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function _d(r,e,s,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await zx(r,e,s,s==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await zx(r,e,s,s==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r,e){const s=tg(r,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(va(d,e??{}))return o;js(o,"already-initialized")}return s.initialize({options:e})}function BT(r,e){const s=e?.persistence||[],i=(Array.isArray(s)?s:[s]).map(jr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function qT(r,e,s){const i=Vi(r);Le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,d=Pb(e),{host:f,port:p}=HT(e),x=p===null?"":`:${p}`,y={url:`${d}//${f}${x}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Le(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Le(va(y,i.config.emulator)&&va(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,kl(f)?(db(`${d}//${f}${x}`),hb("Auth",!0)):FT()}function Pb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function HT(r){const e=Pb(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const d=o[1];return{host:d,port:Bx(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:Bx(f)}}}function Bx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FT(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,s){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function GT(r,e){return Pr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(r,e){return fc(r,"POST","/v1/accounts:signInWithPassword",Lr(r,e))}async function KT(r,e){return Pr(r,"POST","/v1/accounts:sendOobCode",Lr(r,e))}async function QT(r,e){return KT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(r,e){return fc(r,"POST","/v1/accounts:signInWithEmailLink",Lr(r,e))}async function XT(r,e){return fc(r,"POST","/v1/accounts:signInWithEmailLink",Lr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends ag{constructor(e,s,i,o=null){super("password",i),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new nc(e,s,"password")}static _fromEmailAndCode(e,s,i=null){return new nc(e,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,s,"signInWithPassword",YT);case"emailLink":return $T(e,{email:this._email,oobCode:this._password});default:js(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,i,"signUpPassword",GT);case"emailLink":return XT(e,{idToken:s,email:this._email,oobCode:this._password});default:js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e){return fc(r,"POST","/v1/accounts:signInWithIdp",Lr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="http://localhost";class _a extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):js("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...d}=s;if(!i||!o)return null;const f=new _a(i,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return wl(e,s)}_linkToIdToken(e,s){const i=this.buildRequest();return i.idToken=s,wl(e,i)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,wl(e,s)}buildRequest(){const e={requestUri:WT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=dc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JT(r){const e=qo(Ho(r)).link,s=e?qo(Ho(e)).deep_link_id:null,i=qo(Ho(r)).deep_link_id;return(i?qo(Ho(i)).link:null)||i||s||e||r}class lg{constructor(e){const s=qo(Ho(e)),i=s.apiKey??null,o=s.oobCode??null,d=ZT(s.mode??null);Le(i&&o&&d,"argument-error"),this.apiKey=i,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=JT(e);try{return new lg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(e,s){return nc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const i=lg.parseLink(s);return Le(i,"argument-error"),nc._fromEmailAndCode(e,i.code,i.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends mc{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return _a._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:i}=e;if(!s&&!i)return null;try{return vi.credential(s,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends mc{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends mc{constructor(){super("twitter.com")}static credential(e,s){return _a._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=e;if(!s||!i)return null;try{return _i.credential(s,i)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e){return fc(r,"POST","/v1/accounts:signUp",Lr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,i,o=!1){const d=await As._fromIdTokenResponse(e,i,o),f=qx(i);return new wa({user:d,providerId:f,_tokenResponse:i,operationType:s})}static async _forOperation(e,s,i){await e._updateTokensIfNecessary(i,!0);const o=qx(i);return new wa({user:e,providerId:o,_tokenResponse:i,operationType:s})}}function qx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends Vr{constructor(e,s,i,o){super(s.code,s.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,s,i,o){return new wd(e,s,i,o)}}function zb(r,e,s,i){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(r,d,e,i):d})}async function tS(r,e,s=!1){const i=await tc(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return wa._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(r,e,s=!1){const{auth:i}=r;if(os(i.app))return Promise.reject(Cr(i));const o="reauthenticate";try{const d=await tc(r,zb(i,o,e,r),s);Le(d.idToken,i,"internal-error");const f=rg(d.idToken);Le(f,i,"internal-error");const{sub:p}=f;return Le(r.uid===p,i,"user-mismatch"),wa._forOperation(r,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&js(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(r,e,s=!1){if(os(r.app))return Promise.reject(Cr(r));const i="signIn",o=await zb(r,i,e),d=await wa._fromIdTokenResponse(r,i,o);return s||await r._updateCurrentUser(d.user),d}async function sS(r,e){return Bb(Vi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(r){const e=Vi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rS(r,e,s){const i=Vi(r);await _d(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",QT)}async function iS(r,e,s){if(os(r.app))return Promise.reject(Cr(r));const i=Vi(r),f=await _d(i,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eS).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&qb(r),x}),p=await wa._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function aS(r,e,s){return os(r.app)?Promise.reject(Cr(r)):sS(Lt(r),Ml.credential(e,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qb(r),i})}function lS(r,e,s,i){return Lt(r).onIdTokenChanged(e,s,i)}function oS(r,e,s){return Lt(r).beforeAuthStateChanged(e,s)}function cS(r,e,s,i){return Lt(r).onAuthStateChanged(e,s,i)}function uS(r){return Lt(r).signOut()}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1e3,hS=10;class Fb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),o=this.localCache[s];i!==o&&e(s,o,i)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,x)=>{this.notifyListeners(f,x)});return}const i=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!s&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);NT()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hS):o()}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:i}),!0)})},dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const fS=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Gb.type="SESSION";const Yb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const i=new Pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:i,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),x=await mS(p);s.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:x})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(r="",e=10){let s="";for(let i=0;i<e;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,x)=>{const y=og("",20);o.port1.start();const _=setTimeout(()=>{x(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(A.data.response);break;default:clearTimeout(_),clearTimeout(d),x(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function pS(r){er().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function yS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xS(){return navigator?.serviceWorker?.controller||null}function vS(){return Kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",bS=1,Td="firebaseLocalStorage",$b="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ud(r,e){return r.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function _S(){const r=indexedDB.deleteDatabase(Qb);return new gc(r).toPromise()}function km(){const r=indexedDB.open(Qb,bS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Td,{keyPath:$b})}catch(o){s(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Td)?e(i):(i.close(),await _S(),e(await km()))})})}async function Hx(r,e,s){const i=Ud(r,!0).put({[$b]:e,value:s});return new gc(i).toPromise()}async function wS(r,e){const s=Ud(r,!1).get(e),i=await new gc(s).toPromise();return i===void 0?null:i.value}function Fx(r,e){const s=Ud(r,!0).delete(e);return new gc(s).toPromise()}const ES=800,TS=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let s=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(s++>TS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(vS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Hx(e,Ed,"1"),await Fx(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>Hx(i,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(i=>wS(i,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fx(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Ud(o,!1).getAll();return new gc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const SS=Xb;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r,e){return e?jr(e):(Le(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return wl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function AS(r){return Bb(r.auth,new cg(r),r.bypassAuthState)}function jS(r){const{auth:e,user:s}=r;return Le(s,e,"internal-error"),nS(s,new cg(r),r.bypassAuthState)}async function CS(r){const{auth:e,user:s}=r;return Le(s,e,"internal-error"),tS(s,new cg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,s,i,o,d=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:i,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const x={auth:this.auth,requestUri:s,sessionId:i,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(x))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AS;case"linkViaPopup":case"linkViaRedirect":return CS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:js(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new hc(2e3,1e4);class vl extends Wb{constructor(e,s,i,o,d){super(e,s,o,d),this.provider=i,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",od=new Map;class kS extends Wb{constructor(e,s,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const i=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(s){e=()=>Promise.reject(s)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(r,e){const s=VS(e),i=OS(r);if(!await i._isAvailable())return!1;const o=await i._get(s)==="true";return await i._remove(s),o}function MS(r,e){od.set(r._key(),e)}function OS(r){return jr(r._redirectPersistence)}function VS(r){return ld(IS,r.config.apiKey,r.name)}async function LS(r,e,s=!1){if(os(r.app))return Promise.reject(Cr(r));const i=Vi(r),o=NS(i,e),f=await new kS(i,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=600*1e3;class US{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(s=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Zb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Js(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const i=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(e))}saveEventToCache(e){this.cachedEventUids.add(Gx(e)),this.lastProcessedEventTime=Date.now()}}function Gx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Zb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(r,e={}){return Pr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;async function FS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BS(r);for(const s of e)try{if(GS(s))return}catch{}js(r,"unauthorized-domain")}function GS(r){const e=Rm(),{protocol:s,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===i}if(!HS.test(s))return!1;if(qS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new hc(3e4,6e4);function Yx(){const r=er().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function KS(r){return new Promise((e,s)=>{function i(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),s(Js(r,"network-request-failed"))},timeout:YS.get()})}if(er().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(er().gapi?.load)i();else{const o=OT("iframefcb");return er()[o]=()=>{gapi.load?i():s(Js(r,"network-request-failed"))},Vb(`${MT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw cd=null,e})}let cd=null;function QS(r){return cd=cd||KS(r),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new hc(5e3,15e3),XS="__/auth/iframe",WS="emulator/auth/iframe",ZS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(r){const e=r.config;Le(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?sg(e,WS):`https://${r.config.authDomain}/${XS}`,i={apiKey:e.apiKey,appName:r.name,v:Dl},o=JS.get(r.config.apiHost);o&&(i.eid=o);const d=r._getFrameworks();return d.length&&(i.fw=d.join(",")),`${s}?${dc(i).slice(1)}`}async function tN(r){const e=await QS(r),s=er().gapi;return Le(s,r,"internal-error"),e.open({where:document.body,url:eN(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZS,dontclear:!0},i=>new Promise(async(o,d)=>{await i.restyle({setHideOnLeave:!1});const f=Js(r,"network-request-failed"),p=er().setTimeout(()=>{d(f)},$S.get());function x(){er().clearTimeout(p),o(i)}i.ping(x).then(x,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sN=500,rN=600,iN="_blank",aN="http://localhost";class Kx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(r,e,s,i=sN,o=rN){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const x={...nN,width:i.toString(),height:o.toString(),top:d,left:f},y=bn().toLowerCase();s&&(p=Cb(y)?iN:s),Ab(y)&&(e=e||aN,x.scrollbars="yes");const _=Object.entries(x).reduce((A,[q,J])=>`${A}${q}=${J},`,"");if(ST(y)&&p!=="_self")return oN(e||"",p),new Kx(null);const E=window.open(e||"",p,_);Le(E,r,"popup-blocked");try{E.focus()}catch{}return new Kx(E)}function oN(r,e){const s=document.createElement("a");s.href=r,s.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",uN="emulator/auth/handler",dN=encodeURIComponent("fac");async function Qx(r,e,s,i,o,d){Le(r.config.authDomain,r,"auth-domain-config-required"),Le(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Dl,eventId:o};if(e instanceof Ub){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Kw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof mc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const x=await r._getAppCheckToken(),y=x?`#${dN}=${encodeURIComponent(x)}`:"";return`${hN(r)}?${dc(p).slice(1)}${y}`}function hN({config:r}){return r.emulator?sg(r,uN):`https://${r.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=LS,this._overrideRedirectResult=MS}async _openPopup(e,s,i,o){kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Qx(e,s,i,Rm(),o);return lN(e,d,og())}async _openRedirect(e,s,i,o){await this._originValidation(e);const d=await Qx(e,s,i,Rm(),o);return pS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(kr(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(e);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(e){const s=await tN(e),i=new US(e);return s.register("authEvent",o=>(Le(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=s,i}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(mm,{type:mm},o=>{const d=o?.[0]?.[mm];d!==void 0&&s(!!d),js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=FS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Mb()||jb()||ig()}}const mN=fN;var $x="@firebase/auth",Xx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(r){Sl(new ba("auth",(e,{options:s})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;Le(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const x={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(r)},y=new IT(i,o,d,x);return BT(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,i)=>{e.getProvider("auth-internal").initialize()})),Sl(new ba("auth-internal",e=>{const s=Vi(e.getProvider("auth").getImmediate());return(i=>new gN(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si($x,Xx,pN(r)),Si($x,Xx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=300,vN=ub("authIdTokenMaxAge")||xN;let Wx=null;const bN=r=>async e=>{const s=e&&await e.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>vN)return;const o=s?.token;Wx!==o&&(Wx=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _N(r=pb()){const e=tg(r,"auth");if(e.isInitialized())return e.getImmediate();const s=zT(r,{popupRedirectResolver:mN,persistence:[SS,fS,Yb]}),i=ub("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(i,location.origin);if(location.origin===d.origin){const f=bN(d.toString());oS(s,f,()=>f(s.currentUser)),lS(s,p=>f(p))}}const o=ob("auth");return o&&qT(s,`http://${o}`),s}function wN(){return document.getElementsByTagName("head")?.[0]??document}kT({loadJS(r){return new Promise((e,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const d=Js("internal-error");d.customData=o,s(d)},i.type="text/javascript",i.charset="UTF-8",wN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");var EN="firebase",TN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(EN,TN,"app");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,Jb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function j(){}j.prototype=T.prototype,R.F=T.prototype,R.prototype=new j,R.prototype.constructor=R,R.D=function(k,C,V){for(var I=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)I[ce-2]=arguments[ce];return T.prototype[C].apply(k,I)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,j){j||(j=0);const k=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)k[C]=T.charCodeAt(j++)|T.charCodeAt(j++)<<8|T.charCodeAt(j++)<<16|T.charCodeAt(j++)<<24;else for(C=0;C<16;++C)k[C]=T[j++]|T[j++]<<8|T[j++]<<16|T[j++]<<24;T=R.g[0],j=R.g[1],C=R.g[2];let V=R.g[3],I;I=T+(V^j&(C^V))+k[0]+3614090360&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[1]+3905402710&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[2]+606105819&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[3]+3250441966&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[4]+4118548399&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[5]+1200080426&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[6]+2821735955&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[7]+4249261313&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[8]+1770035416&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[9]+2336552879&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[10]+4294925233&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[11]+2304563134&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[12]+1804603682&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[13]+4254626195&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[14]+2792965006&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[15]+1236535329&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(C^V&(j^C))+k[1]+4129170786&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[6]+3225465664&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[11]+643717713&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[0]+3921069994&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[5]+3593408605&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[10]+38016083&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[15]+3634488961&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[4]+3889429448&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[9]+568446438&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[14]+3275163606&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[3]+4107603335&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[8]+1163531501&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[13]+2850285829&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[2]+4243563512&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[7]+1735328473&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[12]+2368359562&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(j^C^V)+k[5]+4294588738&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[8]+2272392833&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[11]+1839030562&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[14]+4259657740&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[1]+2763975236&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[4]+1272893353&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[7]+4139469664&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[10]+3200236656&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[13]+681279174&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[0]+3936430074&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[3]+3572445317&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[6]+76029189&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[9]+3654602809&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[12]+3873151461&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[15]+530742520&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[2]+3299628645&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(C^(j|~V))+k[0]+4096336452&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[7]+1126891415&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[14]+2878612391&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[5]+4237533241&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[12]+1700485571&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[3]+2399980690&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[10]+4293915773&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[1]+2240044497&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[8]+1873313359&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[15]+4264355552&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[6]+2734768916&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[13]+1309151649&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[4]+4149444226&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[11]+3174756917&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[2]+718787259&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.v=function(R,T){T===void 0&&(T=R.length);const j=T-this.blockSize,k=this.C;let C=this.h,V=0;for(;V<T;){if(C==0)for(;V<=j;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<T;)if(k[C++]=R.charCodeAt(V++),C==this.blockSize){o(this,k),C=0;break}}else for(;V<T;)if(k[C++]=R[V++],C==this.blockSize){o(this,k),C=0;break}}this.h=C,this.o+=T},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var j=R.length-8;j<R.length;++j)R[j]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)R[T++]=this.g[j]>>>k&255;return R};function d(R,T){var j=p;return Object.prototype.hasOwnProperty.call(j,R)?j[R]:j[R]=T(R)}function f(R,T){this.h=T;const j=[];let k=!0;for(let C=R.length-1;C>=0;C--){const V=R[C]|0;k&&V==T||(j[C]=V,k=!1)}this.g=j}var p={};function x(R){return-128<=R&&R<128?d(R,function(T){return new f([T|0],T<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(y(-R));const T=[];let j=1;for(let k=0;R>=j;k++)T[k]=R/j|0,j*=4294967296;return new f(T,0)}function _(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return z(_(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=y(Math.pow(T,8));let k=E;for(let V=0;V<R.length;V+=8){var C=Math.min(8,R.length-V);const I=parseInt(R.substring(V,V+C),T);C<8?(C=y(Math.pow(T,C)),k=k.j(C).add(y(I))):(k=k.j(j),k=k.add(y(I)))}return k}var E=x(0),A=x(1),q=x(16777216);r=f.prototype,r.m=function(){if(X(this))return-z(this).m();let R=0,T=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);R+=(k>=0?k:4294967296+k)*T,T*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(J(this))return"0";if(X(this))return"-"+z(this).toString(R);const T=y(Math.pow(R,6));var j=this;let k="";for(;;){const C=he(j,T).g;j=te(j,C.j(T));let V=((j.g.length>0?j.g[0]:j.h)>>>0).toString(R);if(j=C,J(j))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function J(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function X(R){return R.h==-1}r.l=function(R){return R=te(this,R),X(R)?-1:J(R)?0:1};function z(R){const T=R.g.length,j=[];for(let k=0;k<T;k++)j[k]=~R.g[k];return new f(j,~R.h).add(A)}r.abs=function(){return X(this)?z(this):this},r.add=function(R){const T=Math.max(this.g.length,R.g.length),j=[];let k=0;for(let C=0;C<=T;C++){let V=k+(this.i(C)&65535)+(R.i(C)&65535),I=(V>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);k=I>>>16,V&=65535,I&=65535,j[C]=I<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function te(R,T){return R.add(z(T))}r.j=function(R){if(J(this)||J(R))return E;if(X(this))return X(R)?z(this).j(z(R)):z(z(this).j(R));if(X(R))return z(this.j(z(R)));if(this.l(q)<0&&R.l(q)<0)return y(this.m()*R.m());const T=this.g.length+R.g.length,j=[];for(var k=0;k<2*T;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let C=0;C<R.g.length;C++){const V=this.i(k)>>>16,I=this.i(k)&65535,ce=R.i(C)>>>16,Ie=R.i(C)&65535;j[2*k+2*C]+=I*Ie,W(j,2*k+2*C),j[2*k+2*C+1]+=V*Ie,W(j,2*k+2*C+1),j[2*k+2*C+1]+=I*ce,W(j,2*k+2*C+1),j[2*k+2*C+2]+=V*ce,W(j,2*k+2*C+2)}for(R=0;R<T;R++)j[R]=j[2*R+1]<<16|j[2*R];for(R=T;R<2*T;R++)j[R]=0;return new f(j,0)};function W(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function pe(R,T){this.g=R,this.h=T}function he(R,T){if(J(T))throw Error("division by zero");if(J(R))return new pe(E,E);if(X(R))return T=he(z(R),T),new pe(z(T.g),z(T.h));if(X(T))return T=he(R,z(T)),new pe(z(T.g),T.h);if(R.g.length>30){if(X(R)||X(T))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=T;k.l(R)<=0;)j=ve(j),k=ve(k);var C=Ee(j,1),V=Ee(k,1);for(k=Ee(k,2),j=Ee(j,2);!J(k);){var I=V.add(k);I.l(R)<=0&&(C=C.add(j),V=I),k=Ee(k,1),j=Ee(j,1)}return T=te(R,C.j(T)),new pe(C,T)}for(C=E;R.l(T)>=0;){for(j=Math.max(1,Math.floor(R.m()/T.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=y(j),I=V.j(T);X(I)||I.l(R)>0;)j-=k,V=y(j),I=V.j(T);J(V)&&(V=A),C=C.add(V),R=te(R,I)}return new pe(C,R)}r.B=function(R){return he(this,R).h},r.and=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)&R.i(k);return new f(j,this.h&R.h)},r.or=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)|R.i(k);return new f(j,this.h|R.h)},r.xor=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)^R.i(k);return new f(j,this.h^R.h)};function ve(R){const T=R.g.length+1,j=[];for(let k=0;k<T;k++)j[k]=R.i(k)<<1|R.i(k-1)>>>31;return new f(j,R.h)}function Ee(R,T){const j=T>>5;T%=32;const k=R.g.length-j,C=[];for(let V=0;V<k;V++)C[V]=T>0?R.i(V+j)>>>T|R.i(V+j+1)<<32-T:R.i(V+j);return new f(C,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Jb=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,Ni=f}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e_,Fo,t_,ud,Dm,n_,s_,r_;(function(){var r,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function o(u,g){if(g)e:{var b=i;u=u.split(".");for(var N=0;N<u.length-1;N++){var B=u[N];if(!(B in b))break e;b=b[B]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function x(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=x,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function E(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(N,B,Q){for(var xe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)xe[Ge-2]=arguments[Ge];return g.prototype[B].apply(N,xe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function q(u){const g=u.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function J(u,g){for(let N=1;N<arguments.length;N++){const B=arguments[N];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const Q=B.length||0;u.length=b+Q;for(let xe=0;xe<Q;xe++)u[b+xe]=B[xe]}else u.push(B)}}class X{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(u){f.setTimeout(()=>{throw u},0)}function te(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class W{constructor(){this.h=this.g=null}add(g,b){const N=pe.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var pe=new X(()=>new he,u=>u.reset());class he{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,Ee=!1,R=new W,T=()=>{const u=Promise.resolve(void 0);ve=()=>{u.then(j)}};function j(){for(var u;u=te();){try{u.h.call(u.g)}catch(b){z(b)}var g=pe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function ce(u,g){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(ce,C),ce.prototype.init=function(u,g){const b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),K=0;function ge(u,g,b,N,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=B,this.key=++K,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ue(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function Qe(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function S(u){const g={};for(const b in u)g[b]=u[b];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(u,g){let b,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(b in N)u[b]=N[b];for(let Q=0;Q<P.length;Q++)b=P[Q],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function L(u){this.src=u,this.g={},this.h=0}L.prototype.add=function(u,g,b,N,B){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const xe=Z(u,g,N,B);return xe>-1?(g=u[xe],b||(g.fa=!1)):(g=new ge(g,this.src,Q,!!N,B),g.fa=b,u.push(g)),g};function M(u,g){const b=g.type;if(b in u.g){var N=u.g[b],B=Array.prototype.indexOf.call(N,g,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(N,B,1),Q&&(_e(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Z(u,g,b,N){for(let B=0;B<u.length;++B){const Q=u[B];if(!Q.da&&Q.listener==g&&Q.capture==!!b&&Q.ha==N)return B}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),Ne={};function Re(u,g,b,N,B){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)Re(u,g[Q],b,N,B);return null}return b=ee(b),u&&u[Ie]?u.J(g,b,p(N)?!!N.capture:!1,B):Fe(u,g,b,!1,N,B)}function Fe(u,g,b,N,B,Q){if(!g)throw Error("Invalid event type");const xe=p(B)?!!B.capture:!!B;let Ge=Ce(u);if(Ge||(u[ue]=Ge=new L(u)),b=Ge.add(g,b,N,xe,Q),b.proxy)return b;if(N=vt(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)V||(B=xe),B===void 0&&(B=!1),u.addEventListener(g.toString(),N,B);else if(u.attachEvent)u.attachEvent(be(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function vt(){function u(b){return g.call(u.src,u.listener,b)}const g=fe;return u}function nt(u,g,b,N,B){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)nt(u,g[Q],b,N,B);else N=p(N)?!!N.capture:!!N,b=ee(b),u&&u[Ie]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],b=Z(g,b,N,B),b>-1&&(_e(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Ce(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Z(g,b,N,B)),(b=u>-1?g[u]:null)&&ae(b))}function ae(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ie])M(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(be(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=Ce(g))?(M(b,u),b.h==0&&(b.src=null,g[ue]=null)):_e(u)}}}function be(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function fe(u,g){if(u.da)u=!0;else{g=new ce(g,this);const b=u.listener,N=u.ha||u.src;u.fa&&ae(u),u=b.call(N,g)}return u}function Ce(u){return u=u[ue],u instanceof L?u:null}var G="__closure_events_fn_"+(Math.random()*1e9>>>0);function ee(u){return typeof u=="function"?u:(u[G]||(u[G]=function(g){return u.handleEvent(g)}),u[G])}function ye(){k.call(this),this.i=new L(this),this.M=this,this.G=null}E(ye,k),ye.prototype[Ie]=!0,ye.prototype.removeEventListener=function(u,g,b,N){nt(this,u,g,b,N)};function Ae(u,g){var b,N=u.G;if(N)for(b=[];N;N=N.G)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new C(g,u);else if(g instanceof C)g.target=g.target||u;else{var B=g;g=new C(N,u),re(g,B)}B=!0;let Q,xe;if(b)for(xe=b.length-1;xe>=0;xe--)Q=g.g=b[xe],B=me(Q,N,!0,g)&&B;if(Q=g.g=u,B=me(Q,N,!0,g)&&B,B=me(Q,N,!1,g)&&B,b)for(xe=0;xe<b.length;xe++)Q=g.g=b[xe],B=me(Q,N,!1,g)&&B}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let N=0;N<b.length;N++)_e(b[N]);delete u.g[g],u.h--}}this.G=null},ye.prototype.J=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},ye.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function me(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let Q=0;Q<g.length;++Q){const xe=g[Q];if(xe&&!xe.da&&xe.capture==b){const Ge=xe.listener,kt=xe.ha||xe.src;xe.fa&&M(u.i,xe),B=Ge.call(kt,N)!==!1&&B}}return B&&!N.defaultPrevented}function ke(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function it(u){u.g=ke(()=>{u.g=null,u.i&&(u.i=!1,it(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class at extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(u){k.call(this),this.h=u,this.g={}}E(Xt,k);var sn=[];function rn(u){Ue(u.g,function(g,b){this.g.hasOwnProperty(b)&&ae(g)},u),u.g={}}Xt.prototype.N=function(){Xt.Z.N.call(this),rn(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _n=f.JSON.stringify,an=f.JSON.parse,hs=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Sc(){}function Nc(){}var fs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){C.call(this,"d")}E(ln,C);function Qn(){C.call(this,"c")}E(Qn,C);var It={},Ac=null;function Aa(){return Ac=Ac||new ye}It.Ia="serverreachability";function jc(u){C.call(this,It.Ia,u)}E(jc,C);function Rs(u){const g=Aa();Ae(g,new jc(g))}It.STAT_EVENT="statevent";function zi(u,g){C.call(this,It.STAT_EVENT,u),this.stat=g}E(zi,C);function Pt(u){const g=Aa();Ae(g,new zi(g,u))}It.Ja="timingevent";function Is(u,g){C.call(this,It.Ja,u),this.size=g}E(Is,C);function ks(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function ms(){this.g=!0}ms.prototype.ua=function(){this.g=!1};function ih(u,g,b,N,B,Q){u.info(function(){if(u.g)if(Q){var xe="",Ge=Q.split("&");for(let ct=0;ct<Ge.length;ct++){var kt=Ge[ct].split("=");if(kt.length>1){const Nt=kt[0];kt=kt[1];const Zn=Nt.split("_");xe=Zn.length>=2&&Zn[1]=="type"?xe+(Nt+"="+kt+"&"):xe+(Nt+"=redacted&")}}}else xe=null;else xe=Q;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+g+`
`+b+`
`+xe})}function Cc(u,g,b,N,B,Q,xe){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+g+`
`+b+`
`+Q+" "+xe})}function Ds(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ah(u,b)+(N?" "+N:"")})}function Bi(u,g){u.info(function(){return"TIMEOUT: "+g})}ms.prototype.info=function(){};function ah(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var b=Q[u];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let xe=1;xe<N.length;xe++)N[xe]=""}}}}return _n(Q)}catch{return g}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bl;function Hi(){}E(Hi,Sc),Hi.prototype.g=function(){return new XMLHttpRequest},Bl=new Hi;function lr(u){return encodeURIComponent(String(u))}function Rc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function gs(u,g,b,N){this.j=u,this.i=g,this.l=b,this.S=N||1,this.V=new Xt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ps}function ps(){this.i=null,this.g="",this.h=!1}var Ut={},Jt={};function Ms(u,g,b){u.M=1,u.A=Fi(Bt(g)),u.u=b,u.R=!0,ja(u,null)}function ja(u,g){u.F=Date.now(),Os(u),u.B=Bt(u.A);var b=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),ka(b.i,"t",N),u.C=0,b=u.j.L,u.h=new ps,u.g=Gc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new at(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,N=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(sn[0]=B.toString()),B=sn);for(let Q=0;Q<B.length;Q++){const xe=Re(b,B[Q],N||g.handleEvent,!1,g.h||g);if(!xe)break;g.g[xe.key]=xe}g=u.J?S(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Rs(),ih(u.i,u.v,u.B,u.l,u.S,u.u)}gs.prototype.ba=function(u){u=u.target;const g=this.O;g&&vs(u)==3?g.j():this.Y(u)},gs.prototype.Y=function(u){try{if(u==this.g)e:{const Ge=vs(this.g),kt=this.g.ya(),ct=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Ge!=4||kt==7||(kt==8||ct<=0?Rs(3):Rs(2)),Vs(this);var g=this.g.ca();this.X=g;var b=lh(this);if(this.o=g==200,Cc(this.i,this.v,this.B,this.l,this.S,Ge,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var Q=N;break t}}Q=null}if(u=Q)Ds(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ls(this,u);else{this.o=!1,this.m=3,Pt(12),On(this),$n(this);break e}}if(this.R){u=!0;let Nt;for(;!this.K&&this.C<b.length;)if(Nt=kc(this,b),Nt==Jt){Ge==4&&(this.m=4,Pt(14),u=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Ut){this.m=4,Pt(15),Ds(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Ds(this.i,this.l,Nt,null),Ls(this,Nt);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||b.length!=0||this.h.h||(this.m=1,Pt(16),u=!1),this.o=this.o&&u,!u)Ds(this.i,this.l,b,"[Invalid Chunked Response]"),On(this),$n(this);else if(b.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),no(xe),xe.P=!0,Pt(11))}}else Ds(this.i,this.l,b,null),Ls(this,b);Ge==4&&On(this),this.o&&!this.K&&(Ge==4?Bc(this.j,this):(this.o=!1,Os(this)))}else cr(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),On(this),$n(this)}}}catch{}finally{}};function lh(u){if(!Ic(u))return u.g.la();const g=on(u.g);if(g==="")return"";let b="";const N=g.length,B=vs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return On(u),$n(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<N;Q++)u.h.h=!0,b+=u.h.i.decode(g[Q],{stream:!(B&&Q==N-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Ic(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kc(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?Jt:(b=Number(g.substring(b,N)),isNaN(b)?Ut:(N+=1,N+b>g.length?Jt:(g=g.slice(N,N+b),u.C=N+b,g)))}gs.prototype.cancel=function(){this.K=!0,On(this)};function Os(u){u.T=Date.now()+u.H,Ca(u,u.H)}function Ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ks(y(u.aa,u),g)}function Vs(u){u.D&&(f.clearTimeout(u.D),u.D=null)}gs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Bi(this.i,this.B),this.M!=2&&(Rs(),Pt(17)),On(this),this.m=2,$n(this)):Ca(this,this.T-u)};function $n(u){u.j.I==0||u.K||Bc(u.j,u)}function On(u){Vs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,rn(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ls(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Us(b.h,u))){if(!u.L&&Us(b.h,u)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)La(b),Yr(b);else break e;Wi(b),Pt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ks(y(b.Va,b),6e3));Ps(b.h)<=1&&b.ta&&(b.ta=void 0)}else Gs(b,11)}else if((u.L||b.g==u)&&La(b),!I(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let ct=B[g];const Nt=ct[0];if(!(Nt<=b.K))if(b.K=Nt,ct=ct[1],b.I==2)if(ct[0]=="c"){b.M=ct[1],b.ba=ct[2];const Zn=ct[3];Zn!=null&&(b.ka=Zn,b.j.info("VER="+b.ka));const Ys=ct[4];Ys!=null&&(b.za=Ys,b.j.info("SVER="+b.za));const bs=ct[5];bs!=null&&typeof bs=="number"&&bs>0&&(N=1.5*bs,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const _s=u.g;if(_s){const Zi=_s.g?_s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var Q=N.h;Q.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Fl(Q,Q.h),Q.h=null))}if(N.G){const Pa=_s.g?_s.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(N.wa=Pa,ht(N.J,N.G,Pa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var xe=u;if(N.na=Fc(N,N.L?N.ba:null,N.W),xe.L){Gl(N.h,xe);var Ge=xe,kt=N.O;kt&&(Ge.H=kt),Ge.D&&(Vs(Ge),Os(Ge)),N.g=xe}else Uc(N);b.i.length>0&&Fs(b)}else ct[0]!="stop"&&ct[0]!="close"||Gs(b,7);else b.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Gs(b,7):eo(b):ct[0]!="noop"&&b.l&&b.l.qa(ct),b.A=0)}}Rs(4)}catch{}}var zt=class{constructor(u,g){this.g=u,this.map=g}};function ql(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ps(u){return u.h?1:u.g?u.g.size:0}function Us(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Fl(u,g){u.g?u.g.add(g):u.h=g}function Gl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ql.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return q(u.i)}var Dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const N=u[b].indexOf("=");let B,Q=null;N>=0?(B=u[b].substring(0,N),Q=u[b].substring(N+1)):B=u[b],g(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Vn?(this.l=u.l,en(this,u.j),this.o=u.o,this.g=u.g,Ur(this,u.u),this.h=u.h,Kl(this,Lc(u.i)),this.m=u.m):u&&(g=String(u).match(Dc))?(this.l=!1,en(this,g[1]||"",!0),this.o=zs(g[2]||""),this.g=zs(g[3]||"",!0),Ur(this,g[4]),this.h=zs(g[5]||"",!0),Kl(this,g[6]||"",!0),this.m=zs(g[7]||"")):(this.l=!1,this.i=new Br(null,this.l))}Vn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Gi(g,Ia,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Gi(g,Ia,!0),"@"),u.push(lr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Gi(b,b.charAt(0)=="/"?Ql:Mc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Gi(b,Oc)),u.join("")},Vn.prototype.resolve=function(u){const g=Bt(this);let b=!!u.j;b?en(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var N=u.h;if(b)Ur(g,u.u);else if(b=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=g.h.lastIndexOf("/");B!=-1&&(N=g.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let xe=0;xe<B.length;){const Ge=B[xe++];Ge=="."?N&&xe==B.length&&Q.push(""):Ge==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),N&&xe==B.length&&Q.push("")):(Q.push(Ge),N=!0)}N=Q.join("/")}else N=B}return b?g.h=N:b=u.i.toString()!=="",b?Kl(g,Lc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Bt(u){return new Vn(u)}function en(u,g,b){u.j=b?zs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ur(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Kl(u,g,b){g instanceof Br?(u.i=g,Da(u.i,u.l)):(b||(g=Gi(g,zr)),u.i=new Br(g,u.l))}function ht(u,g,b){u.i.set(g,b)}function Fi(u){return ht(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gi(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,Nn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ia=/[#\/\?@]/g,Mc=/[#\?:]/g,Ql=/[#\?]/g,zr=/[#\?@]/g,Oc=/#/g;function Br(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&Ra(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=Br.prototype,r.add=function(u,g){An(this),this.i=null,u=qr(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Vc(u,g){An(u),g=qr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function $l(u,g){return An(u),g=qr(u,g),u.g.has(g)}r.forEach=function(u,g){An(this),this.g.forEach(function(b,N){b.forEach(function(B){u.call(g,B,N,this)},this)},this)};function Xl(u,g){An(u);let b=[];if(typeof g=="string")$l(u,g)&&(b=b.concat(u.g.get(qr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return An(this),this.i=null,u=qr(this,u),$l(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=Xl(this,u),u.length>0?String(u[0]):g):g};function ka(u,g,b){Vc(u,g),b.length>0&&(u.i=null,u.g.set(qr(u,g),q(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const B=lr(b);b=Xl(this,b);for(let Q=0;Q<b.length;Q++){let xe=B;b[Q]!==""&&(xe+="="+lr(b[Q])),u.push(xe)}}return this.i=u.join("&")};function Lc(u){const g=new Br;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function qr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Da(u,g){g&&!u.j&&(An(u),u.i=null,u.g.forEach(function(b,N){const B=N.toLowerCase();N!=B&&(Vc(this,N),ka(this,B,b))},u)),u.j=g}function ys(u,g){const b=new ms;if(f.Image){const N=new Image;N.onload=_(Xn,b,"TestLoadImage: loaded",!0,g,N),N.onerror=_(Xn,b,"TestLoadImage: error",!1,g,N),N.onabort=_(Xn,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=_(Xn,b,"TestLoadImage: timeout",!1,g,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function Wl(u,g){const b=new ms,N=new AbortController,B=setTimeout(()=>{N.abort(),Xn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(Q=>{clearTimeout(B),Q.ok?Xn(b,"TestPingServer: ok",!0,g):Xn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Xn(b,"TestPingServer: error",!1,g)})}function Xn(u,g,b,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(b)}catch{}}function Hr(){this.g=new hs}function Bs(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Bs,Sc),Bs.prototype.g=function(){return new Yi(this.i,this.h)};function Yi(u,g){ye.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Yi,ye),r=Yi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,xs(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Fr(this):xs(this),this.readyState==3&&Ma(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Fr(this))},r.Na=function(u){this.g&&(this.response=u,Fr(this))},r.ga=function(){this.g&&Fr(this)};function Fr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,xs(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function xs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wn(u){let g="";return Ue(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Ki(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Wn(b),typeof u=="string"?b!=null&&lr(b):ht(u,g,b))}function gt(u){ye.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(gt,ye);var qs=/^https?$/i,Zl=["POST","PUT"];r=gt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){Qi(this,Q);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)b.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())b.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Zl,g,void 0)>=0)||N||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,xe]of b)this.g.setRequestHeader(Q,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Qi(this,Q)}};function Qi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Jl(u),or(u)}function Jl(u){u.A||(u.A=!0,Ae(u,"complete"),Ae(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ae(this,"complete"),Ae(this,"abort"),or(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),gt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?$i(this):this.Xa())},r.Xa=function(){$i(this)};function $i(u){if(u.h&&typeof d<"u"){if(u.v&&vs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ae(u,"readystatechange"),vs(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=Q===0){let xe=String(u.D).match(Dc)[1]||null;!xe&&f.self&&f.self.location&&(xe=f.self.location.protocol.slice(0,-1)),N=!qs.test(xe?xe.toLowerCase():"")}b=N}if(b)Ae(u,"complete"),Ae(u,"success");else{u.o=6;try{var B=vs(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Jl(u)}}finally{or(u)}}}}function or(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Ae(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function vs(u){return u.g?u.g.readyState:0}r.ca=function(){try{return vs(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),an(g)}};function on(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cr(u){const g={};u=(u.g&&vs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(I(u[N]))continue;var b=Rc(u[N]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=g[B]||[];g[B]=Q,Q.push(b)}Qe(g,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Gr(u){this.za=0,this.i=[],this.j=new ms,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,u),this.Za=Hs("retryDelaySeedMs",1e4,u),this.Ta=Hs("forwardChannelMaxRetries",2,u),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ql(u&&u.concurrentRequestLimit),this.Ba=new Hr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Gr.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,N){Pt(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Fc(this,null,this.W),Fs(this)};function eo(u){if(Oa(u),u.I==3){var g=u.V++,b=Bt(u.J);if(ht(b,"SID",u.M),ht(b,"RID",g),ht(b,"TYPE","terminate"),Xi(u,b),g=new gs(u,u.j,g),g.M=2,g.A=Fi(Bt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Gc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Os(g)}Hc(u)}function Yr(u){u.g&&(no(u),u.g.cancel(),u.g=null)}function Oa(u){Yr(u),u.v&&(f.clearTimeout(u.v),u.v=null),La(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Fs(u){if(!Hl(u.h)&&!u.m){u.m=!0;var g=u.Ea;ve||T(),Ee||(ve(),Ee=!0),R.add(g,u),u.D=0}}function Va(u,g){return Ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ks(y(u.Ea,u,g),qc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new gs(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=S(Q),re(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Pc(this,B,g),b=Bt(this.J),ht(b,"RID",u),ht(b,"CVER",22),this.G&&ht(b,"X-HTTP-Session-Id",this.G),Xi(this,b),Q&&(this.R?g="headers="+lr(Wn(Q))+"&"+g:this.u&&Ki(b,this.u,Q)),Fl(this.h,B),this.Ra&&ht(b,"TYPE","init"),this.S?(ht(b,"$req",g),ht(b,"SID","null"),B.U=!0,Ms(B,b,null)):Ms(B,b,g),this.I=2}}else this.I==3&&(u?to(this,u):this.i.length==0||Hl(this.h)||to(this))};function to(u,g){var b;g?b=g.l:b=u.V++;const N=Bt(u.J);ht(N,"SID",u.M),ht(N,"RID",b),ht(N,"AID",u.K),Xi(u,N),u.u&&u.o&&Ki(N,u.u,u.o),b=new gs(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Pc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Fl(u.h,b),Ms(b,N,g)}function Xi(u,g){u.H&&Ue(u.H,function(b,N){ht(g,N,b)}),u.l&&Ue({},function(b,N){ht(g,N,b)})}function Pc(u,g,b){b=Math.min(u.i.length,b);const N=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let Ge=-1;for(;;){const kt=["count="+b];Ge==-1?b>0?(Ge=B[0].g,kt.push("ofs="+Ge)):Ge=0:kt.push("ofs="+Ge);let ct=!0;for(let Nt=0;Nt<b;Nt++){var Q=B[Nt].g;const Zn=B[Nt].map;if(Q-=Ge,Q<0)Ge=Math.max(0,B[Nt].g-100),ct=!1;else try{Q="req"+Q+"_"||"";try{var xe=Zn instanceof Map?Zn:Object.entries(Zn);for(const[Ys,bs]of xe){let _s=bs;p(bs)&&(_s=_n(bs)),kt.push(Q+Ys+"="+encodeURIComponent(_s))}}catch(Ys){throw kt.push(Q+"type="+encodeURIComponent("_badmap")),Ys}}catch{N&&N(Zn)}}if(ct){xe=kt.join("&");break e}}xe=void 0}return u=u.i.splice(0,b),g.G=u,xe}function Uc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ve||T(),Ee||(ve(),Ee=!0),R.add(g,u),u.A=0}}function Wi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ks(y(u.Da,u),qc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ks(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Yr(this),zc(this))};function no(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function zc(u){u.g=new gs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Bt(u.na);ht(g,"RID","rpc"),ht(g,"SID",u.M),ht(g,"AID",u.K),ht(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ht(g,"TO",u.ia),ht(g,"TYPE","xmlhttp"),Xi(u,g),u.u&&u.o&&Ki(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Fi(Bt(g)),b.u=null,b.R=!0,ja(b,u)}r.Va=function(){this.C!=null&&(this.C=null,Yr(this),Wi(this),Pt(19))};function La(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Bc(u,g){var b=null;if(u.g==g){La(u),no(u),u.g=null;var N=2}else if(Us(u.h,g))b=g.G,Gl(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;N=Aa(),Ae(N,new Is(N,b)),Fs(u)}else Uc(u);else if(B=g.m,B==3||B==0&&g.X>0||!(N==1&&Va(u,g)||N==2&&Wi(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Gs(u,5);break;case 4:Gs(u,10);break;case 3:Gs(u,6);break;default:Gs(u,2)}}}function qc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Gs(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),N=u.Ua;const B=!N;N=new Vn(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||en(N,"https"),Fi(N),B?ys(N.toString(),b):Wl(N.toString(),b)}else Pt(2);u.I=0,u.l&&u.l.pa(g),Hc(u),Oa(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Hc(u){if(u.I=0,u.ja=[],u.l){const g=Yl(u.h);(g.length!=0||u.i.length!=0)&&(J(u.ja,g),J(u.ja,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.oa()}}function Fc(u,g,b){var N=b instanceof Vn?Bt(b):new Vn(b);if(N.g!="")g&&(N.g=g+"."+N.g),Ur(N,N.u);else{var B=f.location;N=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const Q=new Vn(null);N&&en(Q,N),g&&(Q.g=g),B&&Ur(Q,B),b&&(Q.h=b),N=Q}return b=u.G,g=u.wa,b&&g&&ht(N,b,g),ht(N,"VER",u.ka),Xi(u,N),N}function Gc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new gt(new Bs({ab:b})):new gt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}r=Yc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Kr(){}Kr.prototype.g=function(u,g){return new wn(u,g)};function wn(u,g){ye.call(this),this.g=new Gr(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ur(this)}E(wn,ye),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){eo(this.g)},wn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=_n(u),u=b);g.i.push(new zt(g.Ya++,u)),g.I==3&&Fs(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,wn.Z.N.call(this)};function Kc(u){ln.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Kc,ln);function Qc(){Qn.call(this),this.status=1}E(Qc,Qn);function ur(u){this.g=u}E(ur,Yc),ur.prototype.ra=function(){Ae(this.g,"a")},ur.prototype.qa=function(u){Ae(this.g,new Kc(u))},ur.prototype.pa=function(u){Ae(this.g,new Qc)},ur.prototype.oa=function(){Ae(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,r_=function(){return new Kr},s_=function(){return Aa()},n_=It,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,ud=qi,zl.COMPLETE="complete",t_=zl,Nc.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",ye.prototype.listen=ye.prototype.J,Fo=Nc,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,e_=gt}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});const Jx="@firebase/firestore",ev="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Jm("@firebase/firestore");function gl(){return Ea.logLevel}function Te(r,...e){if(Ea.logLevel<=Je.DEBUG){const s=e.map(ug);Ea.debug(`Firestore (${Ol}): ${r}`,...s)}}function Dr(r,...e){if(Ea.logLevel<=Je.ERROR){const s=e.map(ug);Ea.error(`Firestore (${Ol}): ${r}`,...s)}}function Nl(r,...e){if(Ea.logLevel<=Je.WARN){const s=e.map(ug);Ea.warn(`Firestore (${Ol}): ${r}`,...s)}}function ug(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(r,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,i_(r,i,s)}function i_(r,e,s){let i=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw Dr(i),new Error(i)}function dt(r,e,s,i){let o="Unexpected state";typeof s=="string"?o=s:i=s,r||i_(e,o,i)}function He(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Vr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(xn.UNAUTHENTICATED)))}shutdown(){}}class NN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class AN{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){dt(this.o===void 0,42304);let i=this.i;const o=x=>this.i!==i?(i=this.i,s(x)):Promise.resolve();let d=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ai,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const x=d;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},p=x=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ai)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new a_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class jN{constructor(e,s,i){this.P=e,this.T=s,this.I=i,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CN{constructor(e,s,i){this.P=e,this.T=s,this.I=i}getToken(){return Promise.resolve(new jN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){dt(this.o===void 0,3512);const i=d=>{d.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>i(d)))};const o=d=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(dt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new tv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=IN(40);for(let d=0;d<o.length;++d)i.length<20&&o[d]<s&&(i+=e.charAt(o[d]%62))}return i}}function et(r,e){return r<e?-1:r>e?1:0}function Mm(r,e){const s=Math.min(r.length,e.length);for(let i=0;i<s;i++){const o=r.charAt(i),d=e.charAt(i);if(o!==d)return gm(o)===gm(d)?et(o,d):gm(o)?1:-1}return et(r.length,e.length)}const kN=55296,DN=57343;function gm(r){const e=r.charCodeAt(0);return e>=kN&&e<=DN}function Al(r,e,s){return r.length===e.length&&r.every(((i,o)=>s(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Zs{constructor(e,s,i){s===void 0?s=0:s>e.length&&Pe(637,{offset:s,range:e.length}),i===void 0?i=e.length-s:i>e.length-s&&Pe(1746,{length:i,range:e.length-s}),this.segments=e,this.offset=s,this.len=i}get length(){return this.len}isEqual(e){return Zs.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach((i=>{s.push(i)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,i=this.limit();s<i;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const i=Math.min(e.length,s.length);for(let o=0;o<i;o++){const d=Zs.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return et(e.length,s.length)}static compareSegments(e,s){const i=Zs.isNumericId(e),o=Zs.isNumericId(s);return i&&!o?-1:!i&&o?1:i&&o?Zs.extractNumericId(e).compare(Zs.extractNumericId(s)):Mm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class _t extends Zs{construct(e,s,i){return new _t(e,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((o=>o.length>0)))}return new _t(s)}static emptyPath(){return new _t([])}}const MN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Zs{construct(e,s,i){return new mn(e,s,i)}static isValidIdentifier(e){return MN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new mn([nv])}static fromServerFormat(e){const s=[];let i="",o=0;const d=()=>{if(i.length===0)throw new we(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new we(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new we(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=x,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(d(),o++)}if(d(),f)throw new we(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(s)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(_t.fromString(e))}static fromName(e){return new Me(_t.fromString(e).popFirst(5))}static empty(){return new Me(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return _t.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r,e,s){if(!s)throw new we(le.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ON(r,e,s,i){if(e===!0&&i===!0)throw new we(le.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function sv(r){if(!Me.isDocumentKey(r))throw new we(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rv(r){if(Me.isDocumentKey(r))throw new we(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function o_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Pe(12329,{type:typeof r})}function Yn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=zd(r);throw new we(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,e){const s={typeString:r};return e&&(s.value=e),s}function pc(r,e){if(!o_(r))throw new we(le.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in e)if(e[i]){const o=e[i].typeString,d="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){s=`JSON field '${i}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${i}' field to equal '${d.value}'`;break}}if(s)throw new we(le.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=-62135596800,av=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),i=Math.floor((e-1e3*s)*av);return new Tt(s,i)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<iv)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Qt("string",Tt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Tt(0,0))}static max(){return new ze(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;function VN(r,e){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ze.fromTimestamp(i===1e9?new Tt(s+1,0):new Tt(s,i));return new Ci(o,Me.empty(),e)}function LN(r){return new Ci(r.readTime,r.key,sc)}class Ci{constructor(e,s,i){this.readTime=e,this.documentKey=s,this.largestBatchId=i}static min(){return new Ci(ze.min(),Me.empty(),sc)}static max(){return new Ci(ze.max(),Me.empty(),sc)}}function PN(r,e){let s=r.readTime.compareTo(e.readTime);return s!==0?s:(s=Me.comparator(r.documentKey,e.documentKey),s!==0?s:et(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(r){if(r.code!==le.FAILED_PRECONDITION||r.message!==UN)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new de(((i,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(i,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(i,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof de?s:de.resolve(s)}catch(s){return de.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):de.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):de.reject(s)}static resolve(e){return new de(((s,i)=>{s(e)}))}static reject(e){return new de(((s,i)=>{i(e)}))}static waitFor(e){return new de(((s,i)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(x=>i(x)))})),f=!0,d===o&&s()}))}static or(e){let s=de.resolve(!1);for(const i of e)s=s.next((o=>o?de.resolve(o):i()));return s}static forEach(e,s){const i=[];return e.forEach(((o,d)=>{i.push(s.call(this,o,d))})),this.waitFor(i)}static mapArray(e,s){return new de(((i,o)=>{const d=e.length,f=new Array(d);let p=0;for(let x=0;x<d;x++){const y=x;s(e[y]).next((_=>{f[y]=_,++p,p===d&&i(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new de(((i,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):i()};d()}))}}function BN(r){const e=r.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ll(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function qd(r){return r==null}function Sd(r){return r===0&&1/r==-1/0}function qN(r){return typeof r=="number"&&Number.isInteger(r)&&!Sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function HN(r){let e="";for(let s=0;s<r.length;s++)e.length>0&&(e=lv(e)),e=FN(r.get(s),e);return lv(e)}function FN(r,e){let s=e;const i=r.length;for(let o=0;o<i;o++){const d=r.charAt(o);switch(d){case"\0":s+="";break;case c_:s+="";break;default:s+=d}}return s}function lv(r){return r+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(r){let e=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e++;return e}function Li(r,e){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e(s,r[s])}function u_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,s){this.comparator=e,this.root=s||fn.EMPTY}insert(e,s){return new jt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(e){let s=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return s+i.left.size;o<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,i)=>(e(s,i),!1)))}toString(){const e=[];return this.inorderTraversal(((s,i)=>(e.push(`${s}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,s,i,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?i(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,s,i,o,d){this.key=e,this.value=s,this.color=i??fn.RED,this.left=o??fn.EMPTY,this.right=d??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,i,o,d){return new fn(e??this.key,s??this.value,i??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,i){let o=this;const d=i(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,i),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let i,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return fn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,s,i,o,d){return this}insert(e,s,i){return new fn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,i)=>(e(s),!1)))}forEachInRange(e,s){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((i=>{s=s.add(i)})),s}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const s=this.data.getIterator(),i=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Zt(this.comparator);return s.data=e,s}}class cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Gn([])}unionWith(e){let s=new Zt(mn.comparator);for(const i of this.fields)s=s.add(i);for(const i of e)s=s.add(i);return new Gn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new d_("Invalid base64 string: "+d):d}})(e);return new gn(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new gn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const s=GN.exec(r);if(dt(!!s,46558,{timestamp:r}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ii(r){return typeof r=="string"?gn.fromBase64String(r):gn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="server_timestamp",f_="__type__",m_="__previous_value__",g_="__local_write_time__";function fg(r){return(r?.mapValue?.fields||{})[f_]?.stringValue===h_}function Hd(r){const e=r.mapValue.fields[m_];return fg(e)?Hd(e):e}function rc(r){const e=Ri(r.mapValue.fields[g_].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,s,i,o,d,f,p,x,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=i,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=y,this.isUsingEmulator=_}}const Nd="(default)";class ic{constructor(e,s){this.projectId=e,this.database=s||Nd}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",KN="__max__",td={mapValue:{}},y_="__vector__",Ad="value";function ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?fg(r)?4:$N(r)?9007199254740991:QN(r)?10:11:Pe(28295,{value:r})}function ir(r,e){if(r===e)return!0;const s=ki(r);if(s!==ki(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return rc(r).isEqual(rc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Ri(o.timestampValue),p=Ri(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,d){return Ii(o.bytesValue).isEqual(Ii(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,d){return Ot(o.geoPointValue.latitude)===Ot(d.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(d.geoPointValue.longitude)})(r,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return Ot(o.integerValue)===Ot(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=Ot(o.doubleValue),p=Ot(d.doubleValue);return f===p?Sd(f)===Sd(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return Al(r.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(ov(f)!==ov(p))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(p[x]===void 0||!ir(f[x],p[x])))return!1;return!0})(r,e);default:return Pe(52216,{left:r})}}function ac(r,e){return(r.values||[]).find((s=>ir(s,e)))!==void 0}function jl(r,e){if(r===e)return 0;const s=ki(r),i=ki(e);if(s!==i)return et(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return et(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=Ot(d.integerValue||d.doubleValue),x=Ot(f.integerValue||f.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(r,e);case 3:return uv(r.timestampValue,e.timestampValue);case 4:return uv(rc(r),rc(e));case 5:return Mm(r.stringValue,e.stringValue);case 6:return(function(d,f){const p=Ii(d),x=Ii(f);return p.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),x=f.split("/");for(let y=0;y<p.length&&y<x.length;y++){const _=et(p[y],x[y]);if(_!==0)return _}return et(p.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=et(Ot(d.latitude),Ot(f.latitude));return p!==0?p:et(Ot(d.longitude),Ot(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return dv(r.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},x=f.fields||{},y=p[Ad]?.arrayValue,_=x[Ad]?.arrayValue,E=et(y?.values?.length||0,_?.values?.length||0);return E!==0?E:dv(y,_)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===td.mapValue&&f===td.mapValue)return 0;if(d===td.mapValue)return 1;if(f===td.mapValue)return-1;const p=d.fields||{},x=Object.keys(p),y=f.fields||{},_=Object.keys(y);x.sort(),_.sort();for(let E=0;E<x.length&&E<_.length;++E){const A=Mm(x[E],_[E]);if(A!==0)return A;const q=jl(p[x[E]],y[_[E]]);if(q!==0)return q}return et(x.length,_.length)})(r.mapValue,e.mapValue);default:throw Pe(23264,{he:s})}}function uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return et(r,e);const s=Ri(r),i=Ri(e),o=et(s.seconds,i.seconds);return o!==0?o:et(s.nanos,i.nanos)}function dv(r,e){const s=r.values||[],i=e.values||[];for(let o=0;o<s.length&&o<i.length;++o){const d=jl(s[o],i[o]);if(d)return d}return et(s.length,i.length)}function Cl(r){return Om(r)}function Om(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ri(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ii(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Me.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",o=!0;for(const d of s.values||[])o?o=!1:i+=",",i+=Om(d);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of i)d?d=!1:o+=",",o+=`${f}:${Om(s.fields[f])}`;return o+"}"})(r.mapValue):Pe(61005,{value:r})}function dd(r){switch(ki(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(r);return e?16+dd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ii(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,d)=>o+dd(d)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Li(i.fields,((d,f)=>{o+=d.length+dd(f)})),o})(r.mapValue);default:throw Pe(13486,{value:r})}}function hv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Vm(r){return!!r&&"integerValue"in r}function mg(r){return!!r&&"arrayValue"in r}function fv(r){return!!r&&"nullValue"in r}function mv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hd(r){return!!r&&"mapValue"in r}function QN(r){return(r?.mapValue?.fields||{})[p_]?.stringValue===y_}function Xo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Li(r.mapValue.fields,((s,i)=>e.mapValue.fields[s]=Xo(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Xo(r.arrayValue.values[s]);return e}return{...r}}function $N(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===KN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let i=0;i<e.length-1;++i)if(s=(s.mapValue.fields||{})[e.get(i)],!hd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(s)}setAll(e){let s=mn.emptyPath(),i={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const x=this.getFieldsMap(s);this.applyChanges(x,i,o),i={},o=[],s=p.popLast()}f?i[p.lastSegment()]=Xo(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,i,o)}delete(e){const s=this.field(e.popLast());hd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=s.mapValue.fields[e.get(i)];hd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(i)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,i){Li(s,((o,d)=>e[o]=d));for(const o of i)delete e[o]}clone(){return new Mn(Xo(this.value))}}function x_(r){const e=[];return Li(r.fields,((s,i)=>{const o=new mn([s]);if(hd(i)){const d=x_(i.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,s,i,o,d,f,p){this.key=e,this.documentType=s,this.version=i,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new vn(e,0,ze.min(),ze.min(),ze.min(),Mn.empty(),0)}static newFoundDocument(e,s,i,o){return new vn(e,1,s,ze.min(),i,o,0)}static newNoDocument(e,s){return new vn(e,2,s,ze.min(),ze.min(),Mn.empty(),0)}static newUnknownDocument(e,s){return new vn(e,3,s,ze.min(),ze.min(),Mn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,s){this.position=e,this.inclusive=s}}function gv(r,e,s){let i=0;for(let o=0;o<r.position.length;o++){const d=e[o],f=r.position[o];if(d.field.isKeyField()?i=Me.comparator(Me.fromName(f.referenceValue),s.key):i=jl(f,s.data.field(d.field)),d.dir==="desc"&&(i*=-1),i!==0)break}return i}function pv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!ir(r.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,s="asc"){this.field=e,this.dir=s}}function XN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{}class Kt extends v_{constructor(e,s,i){super(),this.field=e,this.op=s,this.value=i}static create(e,s,i){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,i):new ZN(e,s,i):s==="array-contains"?new tA(e,i):s==="in"?new nA(e,i):s==="not-in"?new sA(e,i):s==="array-contains-any"?new rA(e,i):new Kt(e,s,i)}static createKeyFieldInFilter(e,s,i){return s==="in"?new JN(e,i):new eA(e,i)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(jl(s,this.value)):s!==null&&ki(this.value)===ki(s)&&this.matchesComparison(jl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends v_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Cs(e,s)}matches(e){return b_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b_(r){return r.op==="and"}function __(r){return WN(r)&&b_(r)}function WN(r){for(const e of r.filters)if(e instanceof Cs)return!1;return!0}function Lm(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+Cl(r.value);if(__(r))return r.filters.map((e=>Lm(e))).join(",");{const e=r.filters.map((s=>Lm(s))).join(",");return`${r.op}(${e})`}}function w_(r,e){return r instanceof Kt?(function(i,o){return o instanceof Kt&&i.op===o.op&&i.field.isEqual(o.field)&&ir(i.value,o.value)})(r,e):r instanceof Cs?(function(i,o){return o instanceof Cs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((d,f,p)=>d&&w_(f,o.filters[p])),!0):!1})(r,e):void Pe(19439)}function E_(r){return r instanceof Kt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Cl(s.value)}`})(r):r instanceof Cs?(function(s){return s.op.toString()+" {"+s.getFilters().map(E_).join(" ,")+"}"})(r):"Filter"}class ZN extends Kt{constructor(e,s,i){super(e,s,i),this.key=Me.fromName(i.referenceValue)}matches(e){const s=Me.comparator(e.key,this.key);return this.matchesComparison(s)}}class JN extends Kt{constructor(e,s){super(e,"in",s),this.keys=T_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class eA extends Kt{constructor(e,s){super(e,"not-in",s),this.keys=T_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function T_(r,e){return(e.arrayValue?.values||[]).map((s=>Me.fromName(s.referenceValue)))}class tA extends Kt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return mg(s)&&ac(s.arrayValue,this.value)}}class nA extends Kt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ac(this.value.arrayValue,s)}}class sA extends Kt{constructor(e,s){super(e,"not-in",s)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ac(this.value.arrayValue,s)}}class rA extends Kt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!mg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>ac(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,s=null,i=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=i,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function yv(r,e=null,s=[],i=[],o=null,d=null,f=null){return new iA(r,e,s,i,o,d,f)}function gg(r){const e=He(r);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((i=>Lm(i))).join(","),s+="|ob:",s+=e.orderBy.map((i=>(function(d){return d.field.canonicalString()+d.dir})(i))).join(","),qd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>Cl(i))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>Cl(i))).join(",")),e.Te=s}return e.Te}function pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!XN(r.orderBy[s],e.orderBy[s]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!w_(r.filters[s],e.filters[s]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pv(r.startAt,e.startAt)&&pv(r.endAt,e.endAt)}function Pm(r){return Me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,s=null,i=[],o=[],d=null,f="F",p=null,x=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aA(r,e,s,i,o,d,f,p){return new Pl(r,e,s,i,o,d,f,p)}function yg(r){return new Pl(r)}function xv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function S_(r){return r.collectionGroup!==null}function Wo(r){const e=He(r);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Zt(mn.comparator);return f.filters.forEach((x=>{x.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new lc(d,i))})),s.has(mn.keyField().canonicalString())||e.Ie.push(new lc(mn.keyField(),i))}return e.Ie}function tr(r){const e=He(r);return e.Ee||(e.Ee=lA(e,Wo(r))),e.Ee}function lA(r,e){if(r.limitType==="F")return yv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new lc(o.field,d)}));const s=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return yv(r.path,r.collectionGroup,e,r.filters,r.limit,s,i)}}function Um(r,e){const s=r.filters.concat([e]);return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function zm(r,e,s){return new Pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,s,r.startAt,r.endAt)}function Fd(r,e){return pg(tr(r),tr(e))&&r.limitType===e.limitType}function N_(r){return`${gg(tr(r))}|lt:${r.limitType}`}function pl(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((o=>E_(o))).join(", ")}]`),qd(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((o=>Cl(o))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((o=>Cl(o))).join(",")),`Target(${i})`})(tr(r))}; limitType=${r.limitType})`}function Gd(r,e){return e.isFoundDocument()&&(function(i,o){const d=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(d):Me.isDocumentKey(i.path)?i.path.isEqual(d):i.path.isImmediateParentOf(d)})(r,e)&&(function(i,o){for(const d of Wo(i))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const d of i.filters)if(!d.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,p,x){const y=gv(f,p,x);return f.inclusive?y<=0:y<0})(i.startAt,Wo(i),o)||i.endAt&&!(function(f,p,x){const y=gv(f,p,x);return f.inclusive?y>=0:y>0})(i.endAt,Wo(i),o))})(r,e)}function oA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function A_(r){return(e,s)=>{let i=!1;for(const o of Wo(r)){const d=cA(o,e,s);if(d!==0)return d;i=i||o.field.isKeyField()}return 0}}function cA(r,e,s){const i=r.field.isKeyField()?Me.comparator(e.key,s.key):(function(d,f,p){const x=f.data.field(d),y=p.data.field(d);return x!==null&&y!==null?jl(x,y):Pe(42886)})(r.field,e,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Pe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i!==void 0){for(const[o,d]of i)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[s]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,((s,i)=>{for(const[o,d]of i)e(o,d)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new jt(Me.comparator);function Mr(){return uA}const j_=new jt(Me.comparator);function Go(...r){let e=j_;for(const s of r)e=e.insert(s.key,s);return e}function C_(r){let e=j_;return r.forEach(((s,i)=>e=e.insert(s,i.overlayedDocument))),e}function pa(){return Zo()}function R_(){return Zo()}function Zo(){return new Sa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const dA=new jt(Me.comparator),hA=new Zt(Me.comparator);function tt(...r){let e=hA;for(const s of r)e=e.add(s);return e}const fA=new Zt(et);function mA(){return fA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function I_(r){return{integerValue:""+r}}function gA(r,e){return qN(e)?I_(e):xg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function pA(r,e,s){return r instanceof Cd?(function(o,d){const f={fields:{[f_]:{stringValue:h_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&fg(d)&&(d=Hd(d)),d&&(f.fields[m_]=d),{mapValue:f}})(s,e):r instanceof oc?D_(r,e):r instanceof cc?M_(r,e):(function(o,d){const f=k_(o,d),p=vv(f)+vv(o.Ae);return Vm(f)&&Vm(o.Ae)?I_(p):xg(o.serializer,p)})(r,e)}function yA(r,e,s){return r instanceof oc?D_(r,e):r instanceof cc?M_(r,e):s}function k_(r,e){return r instanceof Rd?(function(i){return Vm(i)||(function(d){return!!d&&"doubleValue"in d})(i)})(e)?e:{integerValue:0}:null}class Cd extends Yd{}class oc extends Yd{constructor(e){super(),this.elements=e}}function D_(r,e){const s=O_(e);for(const i of r.elements)s.some((o=>ir(o,i)))||s.push(i);return{arrayValue:{values:s}}}class cc extends Yd{constructor(e){super(),this.elements=e}}function M_(r,e){let s=O_(e);for(const i of r.elements)s=s.filter((o=>!ir(o,i)));return{arrayValue:{values:s}}}class Rd extends Yd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function vv(r){return Ot(r.integerValue||r.doubleValue)}function O_(r){return mg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function xA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof oc&&o instanceof oc||i instanceof cc&&o instanceof cc?Al(i.elements,o.elements,ir):i instanceof Rd&&o instanceof Rd?ir(i.Ae,o.Ae):i instanceof Cd&&o instanceof Cd})(r.transform,e.transform)}class vA{constructor(e,s){this.version=e,this.transformResults=s}}class Sn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kd{}function V_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qd(r.key,Sn.none()):new yc(r.key,r.data,Sn.none());{const s=r.data,i=Mn.empty();let o=new Zt(mn.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?i.delete(d):i.set(d,f),o=o.add(d)}return new Pi(r.key,i,new Gn(o.toArray()),Sn.none())}}function bA(r,e,s){r instanceof yc?(function(o,d,f){const p=o.value.clone(),x=_v(o.fieldTransforms,d,f.transformResults);p.setAll(x),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,s):r instanceof Pi?(function(o,d,f){if(!fd(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=_v(o.fieldTransforms,d,f.transformResults),x=d.data;x.setAll(L_(o)),x.setAll(p),d.convertToFoundDocument(f.version,x).setHasCommittedMutations()})(r,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Jo(r,e,s,i){return r instanceof yc?(function(d,f,p,x){if(!fd(d.precondition,f))return p;const y=d.value.clone(),_=wv(d.fieldTransforms,x,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,s,i):r instanceof Pi?(function(d,f,p,x){if(!fd(d.precondition,f))return p;const y=wv(d.fieldTransforms,x,f),_=f.data;return _.setAll(L_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((E=>E.field)))})(r,e,s,i):(function(d,f,p){return fd(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,s)}function _A(r,e){let s=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),d=k_(i.transform,o||null);d!=null&&(s===null&&(s=Mn.empty()),s.set(i.field,d))}return s||null}function bv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Al(i,o,((d,f)=>xA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yc extends Kd{constructor(e,s,i,o=[]){super(),this.key=e,this.value=s,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Pi extends Kd{constructor(e,s,i,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=i,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function L_(r){const e=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);e.set(s,i)}})),e}function _v(r,e,s){const i=new Map;dt(r.length===s.length,32656,{Re:s.length,Ve:r.length});for(let o=0;o<s.length;o++){const d=r[o],f=d.transform,p=e.data.field(d.field);i.set(d.field,yA(f,p,s[o]))}return i}function wv(r,e,s){const i=new Map;for(const o of r){const d=o.transform,f=s.data.field(o.field);i.set(o.field,pA(d,f,e))}return i}class Qd extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s,i,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,s){const i=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&bA(d,e,i[o])}}applyToLocalView(e,s){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(s=Jo(i,e,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(s=Jo(i,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const i=R_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const x=V_(f,p);x!==null&&i.set(o.key,x),f.isValidDocument()||f.convertToNoDocument(ze.min())})),i}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),tt())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((s,i)=>bv(s,i)))&&Al(this.baseMutations,e.baseMutations,((s,i)=>bv(s,i)))}}class vg{constructor(e,s,i,o){this.batch=e,this.commitVersion=s,this.mutationResults=i,this.docVersions=o}static from(e,s,i){dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return dA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,i[f].version);return new vg(e,s,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,rt;function NA(r){switch(r){case le.OK:return Pe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Pe(15467,{code:r})}}function P_(r){if(r===void 0)return Dr("GRPC error has no .code"),le.UNKNOWN;switch(r){case Yt.OK:return le.OK;case Yt.CANCELLED:return le.CANCELLED;case Yt.UNKNOWN:return le.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return le.INTERNAL;case Yt.UNAVAILABLE:return le.UNAVAILABLE;case Yt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Yt.NOT_FOUND:return le.NOT_FOUND;case Yt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Yt.ABORTED:return le.ABORTED;case Yt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Yt.DATA_LOSS:return le.DATA_LOSS;default:return Pe(39323,{code:r})}}(rt=Yt||(Yt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new Ni([4294967295,4294967295],0);function Ev(r){const e=AA().encode(r),s=new Jb;return s.update(e),new Uint8Array(s.digest())}function Tv(r){const e=new DataView(r.buffer),s=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Ni([s,i],0),new Ni([o,d],0)]}class bg{constructor(e,s,i){if(this.bitmap=e,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Yo(`Invalid padding: ${s}`);if(i<0)throw new Yo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${i}`);if(e.length===0&&s!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Ni.fromNumber(this.ge)}ye(e,s,i){let o=e.add(s.multiply(Ni.fromNumber(i)));return o.compare(jA)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Ev(e),[i,o]=Tv(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);if(!this.we(f))return!1}return!0}static create(e,s,i){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new bg(d,o,s);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=Ev(e),[i,o]=Tv(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),i=e%8;this.bitmap[s]|=1<<i}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,s,i,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,i){const o=new Map;return o.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,s,i)),new $d(ze.min(),o,new jt(et),Mr(),tt())}}class xc{constructor(e,s,i,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,i){return new xc(i,s,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,s,i,o){this.be=e,this.removedTargetIds=s,this.key=i,this.De=o}}class U_{constructor(e,s){this.targetId=e,this.Ce=s}}class z_{constructor(e,s,i=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=i,this.cause=o}}class Sv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),s=tt(),i=tt();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:i=i.add(o);break;default:Pe(38017,{changeType:d})}})),new xc(this.Me,this.xe,e,s,i)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.Je=nd(),this.He=nd(),this.Ye=new jt(et)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const i=this.nt(s);switch(e.state){case 0:this.rt(s)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((i,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,i=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Pm(d))if(i===0){const f=new Me(d.path);this.et(s,f,vn.newNoDocument(f,ze.min()))}else dt(i===1,20013,{expectedCount:i});else{const f=this._t(s);if(f!==i){const p=this.ut(e),x=p?this.ct(p,e,f):1;if(x!==0){this.it(s);const y=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Ii(i).toUint8Array()}catch(x){if(x instanceof d_)return Nl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new bg(f,o,d)}catch(x){return Nl(x instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(e,s,i){return s.Ce.count===i-this.Pt(e,s.targetId)?0:2}Pt(e,s){const i=this.Ge.getRemoteKeysForTarget(s);let o=0;return i.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Pm(p.target)){const x=new Me(p.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,vn.newNoDocument(x,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let i=tt();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((x=>{const y=this.ot(x);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new $d(e,s,this.Ye,this.je,i);return this.je=Mr(),this.Je=nd(),this.He=nd(),this.Ye=new jt(et),o}Xe(e,s){if(!this.rt(e))return;const i=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,i),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),i&&(this.je=this.je.insert(s,i))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Sv,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Zt(et),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Zt(et),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Te("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function nd(){return new jt(Me.comparator)}function Nv(){return new jt(Me.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},IA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kA={and:"AND",or:"OR"};class DA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Bm(r,e){return r.useProto3Json||qd(e)?e:{value:e}}function Id(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MA(r,e){return Id(r,e.toTimestamp())}function nr(r){return dt(!!r,49232),ze.fromTimestamp((function(s){const i=Ri(s);return new Tt(i.seconds,i.nanos)})(r))}function _g(r,e){return qm(r,e).canonicalString()}function qm(r,e){const s=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?s:s.child(e)}function q_(r){const e=_t.fromString(r);return dt(K_(e),10190,{key:e.toString()}),e}function Hm(r,e){return _g(r.databaseId,e.path)}function pm(r,e){const s=q_(e);if(s.get(1)!==r.databaseId.projectId)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Me(F_(s))}function H_(r,e){return _g(r.databaseId,e)}function OA(r){const e=q_(r);return e.length===4?_t.emptyPath():F_(e)}function Fm(r){return new _t(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function F_(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Av(r,e,s){return{name:Hm(r,e),fields:s.value.mapValue.fields}}function VA(r,e){let s;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(dt(_===void 0||typeof _=="string",58123),gn.fromBase64String(_||"")):(dt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),gn.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?le.UNKNOWN:P_(y.code);return new we(_,y.message||"")})(f);s=new z_(i,o,d,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(r,i.document.name),d=nr(i.document.updateTime),f=i.document.createTime?nr(i.document.createTime):ze.min(),p=new Mn({mapValue:{fields:i.document.fields}}),x=vn.newFoundDocument(o,d,f,p),y=i.targetIds||[],_=i.removedTargetIds||[];s=new md(y,_,x.key,x)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(r,i.document),d=i.readTime?nr(i.readTime):ze.min(),f=vn.newNoDocument(o,d),p=i.removedTargetIds||[];s=new md([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(r,i.document),d=i.removedTargetIds||[];s=new md([],d,o,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:d}=i,f=new SA(o,d),p=i.targetId;s=new U_(p,f)}}return s}function LA(r,e){let s;if(e instanceof yc)s={update:Av(r,e.key,e.value)};else if(e instanceof Qd)s={delete:Hm(r,e.key)};else if(e instanceof Pi)s={update:Av(r,e.key,e.data),updateMask:YA(e.fieldMask)};else{if(!(e instanceof wA))return Pe(16599,{Vt:e.type});s={verify:Hm(r,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((i=>(function(d,f){const p=f.transform;if(p instanceof Cd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof oc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof cc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Rd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Pe(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:MA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Pe(27497)})(r,e.precondition)),s}function PA(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map((s=>(function(o,d){let f=o.updateTime?nr(o.updateTime):nr(d);return f.isEqual(ze.min())&&(f=nr(d)),new vA(f,o.transformResults||[])})(s,e)))):[]}function UA(r,e){return{documents:[H_(r,e.path)]}}function zA(r,e){const s={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=H_(r,o);const d=(function(y){if(y.length!==0)return Y_(Cs.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:yl(A.field),direction:HA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=Bm(r,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function BA(r){let e=OA(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let o=null;if(i>0){dt(i===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(E){const A=G_(E);return A instanceof Cs&&__(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(E){return E.map((A=>(function(J){return new lc(xl(J.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(A)))})(s.orderBy));let p=null;s.limit&&(p=(function(E){let A;return A=typeof E=="object"?E.value:E,qd(A)?null:A})(s.limit));let x=null;s.startAt&&(x=(function(E){const A=!!E.before,q=E.values||[];return new jd(q,A)})(s.startAt));let y=null;return s.endAt&&(y=(function(E){const A=!E.before,q=E.values||[];return new jd(q,A)})(s.endAt)),aA(e,o,f,d,p,"F",x,y)}function qA(r,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function G_(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=xl(s.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=xl(s.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=xl(s.unaryFilter.field);return Kt.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=xl(s.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Kt.create(xl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return Cs.create(s.compositeFilter.filters.map((i=>G_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(s.compositeFilter.op))})(r):Pe(30097,{filter:r})}function HA(r){return RA[r]}function FA(r){return IA[r]}function GA(r){return kA[r]}function yl(r){return{fieldPath:r.canonicalString()}}function xl(r){return mn.fromServerFormat(r.fieldPath)}function Y_(r){return r instanceof Kt?(function(s){if(s.op==="=="){if(mv(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NAN"}};if(fv(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(mv(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NAN"}};if(fv(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(s.field),op:FA(s.op),value:s.value}}})(r):r instanceof Cs?(function(s){const i=s.getFilters().map((o=>Y_(o)));return i.length===1?i[0]:{compositeFilter:{op:GA(s.op),filters:i}}})(r):Pe(54877,{filter:r})}function YA(r){const e=[];return r.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function K_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,s,i,o,d=ze.min(),f=ze.min(),p=gn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=s,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.yt=e}}function QA(r){const e=BA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Cn=new XA}addToCollectionParentIndex(e,s){return this.Cn.add(s),de.resolve()}getCollectionParents(e,s){return de.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return de.resolve()}deleteFieldIndex(e,s){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,s){return de.resolve()}getDocumentsMatchingTarget(e,s){return de.resolve(null)}getIndexType(e,s){return de.resolve(0)}getFieldIndexes(e,s){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,s){return de.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,s){return de.resolve(Ci.min())}updateCollectionGroup(e,s,i){return de.resolve()}updateIndexEntries(e,s){return de.resolve()}}class XA{constructor(){this.index={}}add(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s]||new Zt(_t.comparator),d=!o.has(i);return this.index[s]=o.add(i),d}has(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Zt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(Q_,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rl(0)}static cr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",WA=1048576;function Rv([r,e],[s,i]){const o=et(r,s);return o===0?et(e,i):o}class ZA{constructor(e){this.Ir=e,this.buffer=new Zt(Rv),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Rv(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,s,i){this.garbageCollector=e,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(Cv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ll(s)?Te(Cv,"Ignoring IndexedDB error during garbage collection: ",s):await Vl(s)}await this.Vr(3e5)}))}}class ej{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(e,s){if(s===0)return de.resolve(Bd.ce);const i=new ZA(s);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,s,i){return this.mr.removeTargets(e,s,i)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(jv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let i,o,d,f,p,x,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,s)))).next((E=>(d=E,x=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),gl()<=Je.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(x-p)+`ms
	Removed ${E} documents in `+(y-x)+`ms
Total Duration: ${y-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:E}))))}}function tj(r,e){return new ej(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.changes=new Sa((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?de.resolve(i):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,s,i,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,s){let i=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(i!==null&&Jo(i.mutation,o,Gn.empty(),Tt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.getLocalViewOfDocuments(e,i,tt()).next((()=>i))))}getLocalViewOfDocuments(e,s,i=tt()){const o=pa();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,i).next((d=>{let f=Go();return d.forEach(((p,x)=>{f=f.insert(p,x.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const i=pa();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,tt())))}populateOverlays(e,s,i){const o=[];return i.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,i,o){let d=Mr();const f=Zo(),p=(function(){return Zo()})();return s.forEach(((x,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Pi)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Jo(_.mutation,y,_.mutation.getFieldMask(),Tt.now())):f.set(y.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,d).next((x=>(x.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new sj(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const i=Zo();let o=new jt(((f,p)=>f-p)),d=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((x=>{const y=s.get(x);if(y===null)return;let _=i.get(x)||Gn.empty();_=p.applyToLocalView(y,_),i.set(x,_);const E=(o.get(p.batchId)||tt()).add(x);o=o.insert(p.batchId,E)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),y=x.key,_=x.value,E=R_();_.forEach((A=>{if(!d.has(A)){const q=V_(s.get(A),i.get(A));q!==null&&E.set(A,q),d=d.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,E))}return de.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,s,i,o){return(function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):S_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,i,o):this.getDocumentsMatchingCollectionQuery(e,s,i,o)}getNextDocuments(e,s,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,i,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,i.largestBatchId,o-d.size):de.resolve(pa());let p=sc,x=d;return f.next((y=>de.forEach(y,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),d.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{x=x.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,x,y,tt()))).next((_=>({batchId:p,changes:C_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Me(s)).next((i=>{let o=Go();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,i,o){const d=s.collectionGroup;let f=Go();return this.indexManager.getCollectionParents(e,d).next((p=>de.forEach(p,(x=>{const y=(function(E,A){return new Pl(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,x.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,A)=>{f=f.insert(E,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,i,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,i.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,i,d,o)))).next((f=>{d.forEach(((x,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,vn.newInvalidDocument(_)))}));let p=Go();return f.forEach(((x,y)=>{const _=d.get(x);_!==void 0&&Jo(_.mutation,y,Gn.empty(),Tt.now()),Gd(s,y)&&(p=p.insert(x,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return de.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}})(s)),de.resolve()}getNamedQuery(e,s){return de.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:QA(o.bundledQuery),readTime:nr(o.readTime)}})(s)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.overlays=new jt(Me.comparator),this.qr=new Map}getOverlay(e,s){return de.resolve(this.overlays.get(s))}getOverlays(e,s){const i=pa();return de.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&i.set(o,d)})))).next((()=>i))}saveOverlays(e,s,i){return i.forEach(((o,d)=>{this.St(e,s,d)})),de.resolve()}removeOverlaysForBatchId(e,s,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(i)),de.resolve()}getOverlaysForCollection(e,s,i){const o=pa(),d=s.length+1,f=new Me(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const x=p.getNext().value,y=x.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&x.largestBatchId>i&&o.set(x.getKey(),x)}return de.resolve(o)}getOverlaysForCollectionGroup(e,s,i,o){let d=new jt(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>i){let _=d.get(y.largestBatchId);_===null&&(_=pa(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=pa(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return de.resolve(p)}St(e,s,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new TA(s,i));let d=this.qr.get(s);d===void 0&&(d=tt(),this.qr.set(s,d)),this.qr.set(s,d.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Qr=new Zt(nn.$r),this.Ur=new Zt(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const i=new nn(e,s);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,s){e.forEach((i=>this.addReference(i,s)))}removeReference(e,s){this.Gr(new nn(e,s))}zr(e,s){e.forEach((i=>this.removeReference(i,s)))}jr(e){const s=new Me(new _t([])),i=new nn(s,e),o=new nn(s,e+1),d=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Me(new _t([])),i=new nn(s,e),o=new nn(s,e+1);let d=tt();return this.Ur.forEachInRange([i,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new nn(e,0),i=this.Qr.firstAfterOrEqual(s);return i!==null&&e.isEqual(i.key)}}class nn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Me.comparator(e.key,s.key)||et(e.Yr,s.Yr)}static Kr(e,s){return et(e.Yr,s.Yr)||Me.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(nn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,i,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new EA(d,s,i,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new nn(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,s){return de.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const i=s+1,o=this.ei(i),d=o<0?0:o;return de.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const i=new nn(s,0),o=new nn(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([i,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),de.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let i=new Zt(et);return s.forEach((o=>{const d=new nn(o,0),f=new nn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{i=i.add(p.Yr)}))})),de.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,s){const i=s.path,o=i.length+1;let d=i;Me.isDocumentKey(d)||(d=d.child(""));const f=new nn(new Me(d),0);let p=new Zt(et);return this.Zr.forEachWhile((x=>{const y=x.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(x.Yr)),!0)}),f),de.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){dt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return de.forEach(s.mutations,(o=>{const d=new nn(o.key,s.batchId);return i=i.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,s){const i=new nn(s,0),o=this.Zr.firstAfterOrEqual(i);return de.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.ri=e,this.docs=(function(){return new jt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const i=s.key,o=this.docs.get(i),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const i=this.docs.get(s);return de.resolve(i?i.document.mutableCopy():vn.newInvalidDocument(s))}getEntries(e,s){let i=Mr();return s.forEach((o=>{const d=this.docs.get(o);i=i.insert(o,d?d.document.mutableCopy():vn.newInvalidDocument(o))})),de.resolve(i)}getDocumentsMatchingQuery(e,s,i,o){let d=Mr();const f=s.path,p=new Me(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:y,value:{document:_}}=x.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||PN(LN(_),i)<=0||(o.has(_.key)||Gd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return de.resolve(d)}getAllFromCollectionGroup(e,s,i,o){Pe(9500)}ii(e,s){return de.forEach(this.docs,(i=>s(i)))}newChangeBuffer(e){return new uj(this)}getSize(e){return de.resolve(this.size)}}class uj extends nj{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),de.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.si=new Sa((s=>gg(s)),pg),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=Rl.ur()}forEachTarget(e,s){return this.si.forEach(((i,o)=>s(o))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.oi&&(this.oi=s),de.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Rl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,de.resolve()}updateTargetData(e,s){return this.Pr(s),de.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,s,i){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),de.waitFor(d).next((()=>o))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,s){const i=this.si.get(s)||null;return de.resolve(i)}addMatchingKeys(e,s,i){return this._i.Wr(s,i),de.resolve()}removeMatchingKeys(e,s,i){this._i.zr(s,i);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),de.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),de.resolve()}getMatchingKeysForTargetId(e,s){const i=this._i.Hr(s);return de.resolve(i)}containsKey(e,s){return de.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Bd(0),this.li=!1,this.li=!0,this.hi=new lj,this.referenceDelegate=e(this),this.Pi=new dj(this),this.indexManager=new $A,this.remoteDocumentCache=(function(o){return new cj(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new KA(s),this.Ii=new ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new aj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let i=this.ui[e.toKey()];return i||(i=new oj(s,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,i){Te("MemoryPersistence","Starting transaction:",e);const o=new hj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return de.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,s))))}}class hj extends zN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new wg,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,s,i){return this.Ri.addReference(i,s),this.fi.delete(i.toString()),de.resolve()}removeReference(e,s,i){return this.Ri.removeReference(i,s),this.fi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),de.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>i.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(i=>{const o=Me.fromPath(i);return this.gi(e,o).next((d=>{d||s.removeEntry(o,ze.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((i=>{i?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return de.or([()=>de.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class kd{constructor(e,s){this.persistence=e,this.pi=new Sa((i=>HN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=tj(this,s)}static mi(e,s){return new kd(e,s)}Ei(){}di(e){return de.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>s.next((o=>i+o))))}wr(e){let s=0;return this.pr(e,(i=>{s++})).next((()=>s))}pr(e,s){return de.forEach(this.pi,((i,o)=>this.br(e,i,o).next((d=>d?de.resolve():s(o)))))}removeTargets(e,s,i){return this.persistence.getTargetCache().removeTargets(e,s,i)}removeOrphanedDocuments(e,s){let i=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(i++,d.removeEntry(f,ze.min()))})))).next((()=>d.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeTarget(e,s){const i=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=dd(e.data.value)),s}br(e,s,i){return de.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return de.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,s,i,o){this.targetId=e,this.fromCache=s,this.Es=i,this.ds=o}static As(e,s){let i=tt(),o=tt();for(const d of s.docChanges)switch(d.type){case 0:i=i.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new Tg(e,s.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Bw()?8:BN(bn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,i,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,i).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new fj;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,i,o){return i.documentReadCount<this.fs?(gl()<=Je.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",pl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(gl()<=Je.DEBUG&&Te("QueryEngine","Query:",pl(s),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(gl()<=Je.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",pl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(s))):de.resolve())}ys(e,s){if(xv(s))return de.resolve(null);let i=tr(s);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=zm(s,null,"F"),i=tr(s)),this.indexManager.getDocumentsMatchingTarget(e,i).next((d=>{const f=tt(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((x=>{const y=this.Ds(s,p);return this.Cs(s,y,f,x.readTime)?this.ys(e,zm(s,null,"F")):this.vs(e,y,s,x)}))))})))))}ws(e,s,i,o){return xv(s)||o.isEqual(ze.min())?de.resolve(null):this.ps.getDocuments(e,i).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,i,o)?de.resolve(null):(gl()<=Je.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pl(s)),this.vs(e,f,s,VN(o,sc)).next((p=>p)))}))}Ds(e,s){let i=new Zt(A_(e));return s.forEach(((o,d)=>{Gd(e,d)&&(i=i.add(d))})),i}Cs(e,s,i,o){if(e.limit===null)return!1;if(i.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,i){return gl()<=Je.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",pl(s)),this.ps.getDocumentsMatchingQuery(e,s,Ci.min(),i)}vs(e,s,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="LocalStore",gj=3e8;class pj{constructor(e,s,i,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new jt(et),this.xs=new Sa((d=>gg(d)),pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function yj(r,e,s,i){return new pj(r,e,s,i)}async function X_(r,e){const s=He(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return s.mutationQueue.getAllMutationBatches(i).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(i)))).next((d=>{const f=[],p=[];let x=tt();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}return s.localDocuments.getDocuments(i,x).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function xj(r,e){const s=He(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,x,y,_){const E=y.batch,A=E.keys();let q=de.resolve();return A.forEach((J=>{q=q.next((()=>_.getEntry(x,J))).next((X=>{const z=y.docVersions.get(J);dt(z!==null,48541),X.version.compareTo(z)<0&&(E.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),_.addEntry(X)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(x,E)))})(s,i,e,d).next((()=>d.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let x=tt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(x=x.add(p.batch.mutations[y].key));return x})(e)))).next((()=>s.localDocuments.getDocuments(i,o)))}))}function W_(r){const e=He(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function vj(r,e){const s=He(r),i=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,E))));let q=A.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(E)!==null?q=q.withResumeToken(gn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,i)),o=o.insert(E,q),(function(X,z,te){return X.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=gj?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(A,q,_)&&p.push(s.Pi.updateTargetData(d,q))}));let x=Mr(),y=tt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(bj(d,f,e.documentUpdates).next((_=>{x=_.ks,y=_.qs}))),!i.isEqual(ze.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((E=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,i)));p.push(_)}return de.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,x,y))).next((()=>x))})).then((d=>(s.Ms=o,d)))}function bj(r,e,s){let i=tt(),o=tt();return s.forEach((d=>i=i.add(d))),e.getEntries(r,i).next((d=>{let f=Mr();return s.forEach(((p,x)=>{const y=d.get(p);x.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),x.isNoDocument()&&x.version.isEqual(ze.min())?(e.removeEntry(p,x.readTime),f=f.insert(p,x)):!y.isValidDocument()||x.version.compareTo(y.version)>0||x.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(x),f=f.insert(p,x)):Te(Sg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",x.version)})),{ks:f,qs:o}}))}function _j(r,e){const s=He(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hg),s.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function wj(r,e){const s=He(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return s.Pi.getTargetData(i,e).next((d=>d?(o=d,de.resolve(o)):s.Pi.allocateTargetId(i).next((f=>(o=new wi(e,f,"TargetPurposeListen",i.currentSequenceNumber),s.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=s.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(i.targetId,i),s.xs.set(e,i.targetId)),i}))}async function Gm(r,e,s){const i=He(r),o=i.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",d,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ll(f))throw f;Te(Sg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Iv(r,e,s){const i=He(r);let o=ze.min(),d=tt();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(x,y,_){const E=He(x),A=E.xs.get(_);return A!==void 0?de.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,_)})(i,f,tr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,p.targetId).next((x=>{d=x}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,s?o:ze.min(),s?d:tt()))).next((p=>(Ej(i,oA(e),p),{documents:p,Qs:d})))))}function Ej(r,e,s){let i=r.Os.get(e)||ze.min();s.forEach(((o,d)=>{d.readTime.compareTo(i)>0&&(i=d.readTime)})),r.Os.set(e,i)}class kv{constructor(){this.activeTargetIds=mA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tj{constructor(){this.Mo=new kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,i){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,i){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kv,Promise.resolve()}handleUserChange(e,s,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="ConnectivityMonitor";class Mv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(Dv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(Dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function Ym(){return sd===null?sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,s,i,o,d){const f=Ym(),p=this.zo(e,s.toUriEncodedString());Te(ym,`Sending RPC '${e}' ${f}:`,p,i);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,d);const{host:y}=new URL(p),_=kl(y);return this.Jo(e,p,x,i,_).then((E=>(Te(ym,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Nl(ym,`RPC '${e}' ${f} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,s,i,o,d,f){return this.Go(e,s,i,o,d)}jo(e,s,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),i&&i.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const i=Nj[e];return`${this.Uo}/v1/${s}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class Cj extends Aj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,i,o,d){const f=Ym();return new Promise(((p,x)=>{const y=new e_;y.setWithCredentials(!0),y.listenOnce(t_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ud.NO_ERROR:const E=y.getResponseJson();Te(yn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),p(E);break;case ud.TIMEOUT:Te(yn,`RPC '${e}' ${f} timed out`),x(new we(le.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const A=y.getStatus();if(Te(yn,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const J=q?.error;if(J&&J.status&&J.message){const X=(function(te){const W=te.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(W)>=0?W:le.UNKNOWN})(J.status);x(new we(X,J.message))}else x(new we(le.UNKNOWN,"Server responded with status "+y.getStatus()))}else x(new we(le.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Te(yn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Te(yn,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,i,15)}))}T_(e,s,i){const o=Ym(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=r_(),p=s_(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(x.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,s,i),x.encodeInitMessageHeaders=!0;const _=d.join("");Te(yn,`Creating RPC '${e}' stream ${o}: ${_}`,x);const E=f.createWebChannel(_,x);this.I_(E);let A=!1,q=!1;const J=new jj({Yo:z=>{q?Te(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(Te(yn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),Te(yn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},Zo:()=>E.close()}),X=(z,te,W)=>{z.listen(te,(pe=>{try{W(pe)}catch(he){setTimeout((()=>{throw he}),0)}}))};return X(E,Fo.EventType.OPEN,(()=>{q||(Te(yn,`RPC '${e}' stream ${o} transport opened.`),J.o_())})),X(E,Fo.EventType.CLOSE,(()=>{q||(q=!0,Te(yn,`RPC '${e}' stream ${o} transport closed`),J.a_(),this.E_(E))})),X(E,Fo.EventType.ERROR,(z=>{q||(q=!0,Nl(yn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),J.a_(new we(le.UNAVAILABLE,"The operation could not be completed")))})),X(E,Fo.EventType.MESSAGE,(z=>{if(!q){const te=z.data[0];dt(!!te,16349);const W=te,pe=W?.error||W[0]?.error;if(pe){Te(yn,`RPC '${e}' stream ${o} received error:`,pe);const he=pe.status;let ve=(function(T){const j=Yt[T];if(j!==void 0)return P_(j)})(he),Ee=pe.message;ve===void 0&&(ve=le.INTERNAL,Ee="Unknown error status: "+he+" with message "+pe.message),q=!0,J.a_(new we(ve,Ee)),E.close()}else Te(yn,`RPC '${e}' stream ${o} received:`,te),J.u_(te)}})),X(p,n_.STAT_EVENT,(z=>{z.stat===Dm.PROXY?Te(yn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Dm.NOPROXY&&Te(yn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(r){return new DA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,s,i=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=i,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class J_{constructor(e,s,i,o,d,f,p,x){this.Mi=e,this.S_=i,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===le.RESOURCE_EXHAUSTED?(Dr(s.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===s&&this.G_(i,o)}),(i=>{e((()=>{const o=new we(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,s){const i=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Te(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rj extends J_{constructor(e,s,i,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=VA(this.serializer,e),i=(function(d){if(!("targetChange"in d))return ze.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?ze.min():f.readTime?nr(f.readTime):ze.min()})(e);return this.listener.H_(s,i)}Y_(e){const s={};s.database=Fm(this.serializer),s.addTarget=(function(d,f){let p;const x=f.target;if(p=Pm(x)?{documents:UA(d,x)}:{query:zA(d,x).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=B_(d,f.resumeToken);const y=Bm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(ze.min())>0){p.readTime=Id(d,f.snapshotVersion.toTimestamp());const y=Bm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=qA(this.serializer,e);i&&(s.labels=i),this.q_(s)}Z_(e){const s={};s.database=Fm(this.serializer),s.removeTarget=e,this.q_(s)}}class Ij extends J_{constructor(e,s,i,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=PA(e.writeResults,e.commitTime),i=nr(e.commitTime);return this.listener.na(i,s)}ra(){const e={};e.database=Fm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((i=>LA(this.serializer,i)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{}class Dj extends kj{constructor(e,s,i,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,qm(s,i),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new we(le.UNKNOWN,d.toString())}))}Ho(e,s,i,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,qm(s,i),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new we(le.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Mj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dr(s),this.aa=!1):Te("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class Oj{constructor(e,s,i,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{Na(this)&&(Te(Ta,"Restarting streams for network reachability change."),await(async function(x){const y=He(x);y.Ea.add(4),await vc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Wd(y)})(this))}))})),this.Ra=new Mj(i,o)}}async function Wd(r){if(Na(r))for(const e of r.da)await e(!0)}async function vc(r){for(const e of r.da)await e(!1)}function e1(r,e){const s=He(r);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Cg(s)?jg(s):Ul(s).O_()&&Ag(s,e))}function Ng(r,e){const s=He(r),i=Ul(s);s.Ia.delete(e),i.O_()&&t1(s,e),s.Ia.size===0&&(i.O_()?i.L_():Na(s)&&s.Ra.set("Unknown"))}function Ag(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ul(r).Y_(e)}function t1(r,e){r.Va.Ue(e),Ul(r).Z_(e)}function jg(r){r.Va=new CA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ul(r).start(),r.Ra.ua()}function Cg(r){return Na(r)&&!Ul(r).x_()&&r.Ia.size>0}function Na(r){return He(r).Ea.size===0}function n1(r){r.Va=void 0}async function Vj(r){r.Ra.set("Online")}async function Lj(r){r.Ia.forEach(((e,s)=>{Ag(r,e)}))}async function Pj(r,e){n1(r),Cg(r)?(r.Ra.ha(e),jg(r)):r.Ra.set("Unknown")}async function Uj(r,e,s){if(r.Ra.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){Te(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dd(r,i)}else if(e instanceof md?r.Va.Ze(e):e instanceof U_?r.Va.st(e):r.Va.tt(e),!s.isEqual(ze.min()))try{const i=await W_(r.localStore);s.compareTo(i)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((x,y)=>{if(x.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(x.resumeToken,f))}})),p.targetMismatches.forEach(((x,y)=>{const _=d.Ia.get(x);if(!_)return;d.Ia.set(x,_.withResumeToken(gn.EMPTY_BYTE_STRING,_.snapshotVersion)),t1(d,x);const E=new wi(_.target,x,y,_.sequenceNumber);Ag(d,E)})),d.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){Te(Ta,"Failed to raise snapshot:",i),await Dd(r,i)}}async function Dd(r,e,s){if(!Ll(e))throw e;r.Ea.add(1),await vc(r),r.Ra.set("Offline"),s||(s=()=>W_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Ta,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Wd(r)}))}function s1(r,e){return e().catch((s=>Dd(r,s,e)))}async function Zd(r){const e=He(r),s=Di(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;zj(e);)try{const o=await _j(e.localStore,i);if(o===null){e.Ta.length===0&&s.L_();break}i=o.batchId,Bj(e,o)}catch(o){await Dd(e,o)}r1(e)&&i1(e)}function zj(r){return Na(r)&&r.Ta.length<10}function Bj(r,e){r.Ta.push(e);const s=Di(r);s.O_()&&s.X_&&s.ea(e.mutations)}function r1(r){return Na(r)&&!Di(r).x_()&&r.Ta.length>0}function i1(r){Di(r).start()}async function qj(r){Di(r).ra()}async function Hj(r){const e=Di(r);for(const s of r.Ta)e.ea(s.mutations)}async function Fj(r,e,s){const i=r.Ta.shift(),o=vg.from(i,e,s);await s1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Zd(r)}async function Gj(r,e){e&&Di(r).X_&&await(async function(i,o){if((function(f){return NA(f)&&f!==le.ABORTED})(o.code)){const d=i.Ta.shift();Di(i).B_(),await s1(i,(()=>i.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Zd(i)}})(r,e),r1(r)&&i1(r)}async function Vv(r,e){const s=He(r);s.asyncQueue.verifyOperationInProgress(),Te(Ta,"RemoteStore received new credentials");const i=Na(s);s.Ea.add(3),await vc(s),i&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Wd(s)}async function Yj(r,e){const s=He(r);e?(s.Ea.delete(2),await Wd(s)):e||(s.Ea.add(2),await vc(s),s.Ra.set("Unknown"))}function Ul(r){return r.ma||(r.ma=(function(s,i,o){const d=He(s);return d.sa(),new Rj(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Vj.bind(null,r),t_:Lj.bind(null,r),r_:Pj.bind(null,r),H_:Uj.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?jg(r):r.Ra.set("Unknown")):(await r.ma.stop(),n1(r))}))),r.ma}function Di(r){return r.fa||(r.fa=(function(s,i,o){const d=He(s);return d.sa(),new Ij(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:qj.bind(null,r),r_:Gj.bind(null,r),ta:Hj.bind(null,r),na:Fj.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Zd(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(Ta,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,s,i,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=i,this.op=o,this.removalCallback=d,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,i,o,d){const f=Date.now()+i,p=new Rg(e,s,f,o,d);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),Ll(r))return new we(le.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(s,i)=>e(s,i)||Me.comparator(s.key,i.key):(s,i)=>Me.comparator(s.key,i.key),this.keyedMap=Go(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,i)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const i=new El;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ga=new jt(Me.comparator)}track(e){const s=e.doc.key,i=this.ga.get(s);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(s,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(s):e.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,i)=>{e.push(i)})),e}}class Il{constructor(e,s,i,o,d,f,p,x,y){this.query=e,this.docs=s,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=y}static fromInitialDocuments(e,s,i,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Il(e,s,El.emptySet(s),f,i,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,i=e.docChanges;if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==i[o].type||!s[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Qj{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const o=He(s),d=o.queries;o.queries=Pv(),d.forEach(((f,p)=>{for(const x of p.Sa)x.onError(i)}))})(this,new we(le.ABORTED,"Firestore shutting down"))}}function Pv(){return new Sa((r=>N_(r)),Fd)}async function a1(r,e){const s=He(r);let i=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(i=2):(d=new Kj,i=e.Da()?0:1);try{switch(i){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Ig(f,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&kg(s)}async function l1(r,e){const s=He(r),i=e.query;let o=3;const d=s.queries.get(i);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function $j(r,e){const s=He(r);let i=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(i=!0);f.wa=o}}i&&kg(s)}function Xj(r,e,s){const i=He(r),o=i.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);i.queries.delete(e)}function kg(r){r.Ca.forEach((e=>{e.next()}))}var Km,Uv;(Uv=Km||(Km={})).Ma="default",Uv.Cache="cache";class o1{constructor(e,s,i){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Wj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=A_(e),this.tu=new El(this.eu)}get nu(){return this.Ya}ru(e,s){const i=s?s.iu:new Lv,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),q=Gd(this.query,E)?E:null,J=!!A&&this.mutatedKeys.has(A.key),X=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let z=!1;A&&q?A.data.isEqual(q.data)?J!==X&&(i.track({type:3,doc:q}),z=!0):this.su(A,q)||(i.track({type:2,doc:q}),z=!0,(x&&this.eu(q,x)>0||y&&this.eu(q,y)<0)&&(p=!0)):!A&&q?(i.track({type:0,doc:q}),z=!0):A&&!q&&(i.track({type:1,doc:A}),z=!0,(x||y)&&(p=!0)),z&&(q?(f=f.add(q),d=X?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,i,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(q,J){const X=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:z})}};return X(q)-X(J)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const p=s&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,y=x!==this.Za;return this.Za=x,f.length!==0||y?{snapshot:new Il(this.query,e.tu,d,f,e.mutatedKeys,x===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const s=[];return e.forEach((i=>{this.Xa.has(i)||s.push(new u1(i))})),this.Xa.forEach((i=>{e.has(i)||s.push(new c1(i))})),s}cu(e){this.Ya=e.Qs,this.Xa=tt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class Zj{constructor(e,s,i){this.query=e,this.targetId=s,this.view=i}}class Jj{constructor(e){this.key=e,this.hu=!1}}class e4{constructor(e,s,i,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=i,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Sa((p=>N_(p)),Fd),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Me.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=Rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t4(r,e,s=!0){const i=p1(r);let o;const d=i.Tu.get(e);return d?(i.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await d1(i,e,s,!0),o}async function n4(r,e){const s=p1(r);await d1(s,e,!0,!1)}async function d1(r,e,s,i){const o=await wj(r.localStore,tr(e)),d=o.targetId,f=r.sharedClientState.addLocalQueryTarget(d,s);let p;return i&&(p=await s4(r,e,d,f==="current",o.resumeToken)),r.isPrimaryClient&&s&&e1(r.remoteStore,o),p}async function s4(r,e,s,i,o){r.pu=(E,A,q)=>(async function(X,z,te,W){let pe=z.view.ru(te);pe.Cs&&(pe=await Iv(X.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,pe))));const he=W&&W.targetChanges.get(z.targetId),ve=W&&W.targetMismatches.get(z.targetId)!=null,Ee=z.view.applyChanges(pe,X.isPrimaryClient,he,ve);return Bv(X,z.targetId,Ee.au),Ee.snapshot})(r,E,A,q);const d=await Iv(r.localStore,e,!0),f=new Wj(e,d.Qs),p=f.ru(d.documents),x=xc.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,x);Bv(r,s,y.au);const _=new Zj(e,s,f);return r.Tu.set(e,_),r.Iu.has(s)?r.Iu.get(s).push(e):r.Iu.set(s,[e]),y.snapshot}async function r4(r,e,s){const i=He(r),o=i.Tu.get(e),d=i.Iu.get(o.targetId);if(d.length>1)return i.Iu.set(o.targetId,d.filter((f=>!Fd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),s&&Ng(i.remoteStore,o.targetId),Qm(i,o.targetId)})).catch(Vl)):(Qm(i,o.targetId),await Gm(i.localStore,o.targetId,!0))}async function i4(r,e){const s=He(r),i=s.Tu.get(e),o=s.Iu.get(i.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Ng(s.remoteStore,i.targetId))}async function a4(r,e,s){const i=f4(r);try{const o=await(function(f,p){const x=He(f),y=Tt.now(),_=p.reduce(((q,J)=>q.add(J.key)),tt());let E,A;return x.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let J=Mr(),X=tt();return x.Ns.getEntries(q,_).next((z=>{J=z,J.forEach(((te,W)=>{W.isValidDocument()||(X=X.add(te))}))})).next((()=>x.localDocuments.getOverlayedDocuments(q,J))).next((z=>{E=z;const te=[];for(const W of p){const pe=_A(W,E.get(W.key).overlayedDocument);pe!=null&&te.push(new Pi(W.key,pe,x_(pe.value.mapValue),Sn.exists(!0)))}return x.mutationQueue.addMutationBatch(q,y,te,p)})).next((z=>{A=z;const te=z.applyToLocalDocumentSet(E,X);return x.documentOverlayCache.saveOverlays(q,z.batchId,te)}))})).then((()=>({batchId:A.batchId,changes:C_(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,p,x){let y=f.Vu[f.currentUser.toKey()];y||(y=new jt(et)),y=y.insert(p,x),f.Vu[f.currentUser.toKey()]=y})(i,o.batchId,s),await bc(i,o.changes),await Zd(i.remoteStore)}catch(o){const d=Ig(o,"Failed to persist write");s.reject(d)}}async function h1(r,e){const s=He(r);try{const i=await vj(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?dt(f.hu,14607):o.removedDocuments.size>0&&(dt(f.hu,42227),f.hu=!1))})),await bc(s,i,e)}catch(i){await Vl(i)}}function zv(r,e,s){const i=He(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const o=[];i.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const x=He(f);x.onlineState=p;let y=!1;x.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(p)&&(y=!0)})),y&&kg(x)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function l4(r,e,s){const i=He(r);i.sharedClientState.updateQueryState(e,"rejected",s);const o=i.Au.get(e),d=o&&o.key;if(d){let f=new jt(Me.comparator);f=f.insert(d,vn.newNoDocument(d,ze.min()));const p=tt().add(d),x=new $d(ze.min(),new Map,new jt(et),f,p);await h1(i,x),i.du=i.du.remove(d),i.Au.delete(e),Mg(i)}else await Gm(i.localStore,e,!1).then((()=>Qm(i,e,s))).catch(Vl)}async function o4(r,e){const s=He(r),i=e.batch.batchId;try{const o=await xj(s.localStore,e);m1(s,i,null),f1(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await bc(s,o)}catch(o){await Vl(o)}}async function c4(r,e,s){const i=He(r);try{const o=await(function(f,p){const x=He(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return x.mutationQueue.lookupMutationBatch(y,p).next((E=>(dt(E!==null,37113),_=E.keys(),x.mutationQueue.removeMutationBatch(y,E)))).next((()=>x.mutationQueue.performConsistencyCheck(y))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>x.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);m1(i,e,s),f1(i,e),i.sharedClientState.updateMutationState(e,"rejected",s),await bc(i,o)}catch(o){await Vl(o)}}function f1(r,e){(r.mu.get(e)||[]).forEach((s=>{s.resolve()})),r.mu.delete(e)}function m1(r,e,s){const i=He(r);let o=i.Vu[i.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Qm(r,e,s=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||g1(r,i)}))}function g1(r,e){r.Eu.delete(e.path.canonicalString());const s=r.du.get(e);s!==null&&(Ng(r.remoteStore,s),r.du=r.du.remove(e),r.Au.delete(s),Mg(r))}function Bv(r,e,s){for(const i of s)i instanceof c1?(r.Ru.addReference(i.key,e),u4(r,i)):i instanceof u1?(Te(Dg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||g1(r,i.key)):Pe(19791,{wu:i})}function u4(r,e){const s=e.key,i=s.path.canonicalString();r.du.get(s)||r.Eu.has(i)||(Te(Dg,"New document in limbo: "+s),r.Eu.add(i),Mg(r))}function Mg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const s=new Me(_t.fromString(e)),i=r.fu.next();r.Au.set(i,new Jj(s)),r.du=r.du.insert(s,i),e1(r.remoteStore,new wi(tr(yg(s.path)),i,"TargetPurposeLimboResolution",Bd.ce))}}async function bc(r,e,s){const i=He(r),o=[],d=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,x)=>{f.push(i.pu(x,e,s).then((y=>{if((y||s)&&i.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(x.targetId)?.current;i.sharedClientState.updateQueryState(x.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Tg.As(x.targetId,y);d.push(_)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(x,y){const _=He(x);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(y,(A=>de.forEach(A.Es,(q=>_.persistence.referenceDelegate.addReference(E,A.targetId,q))).next((()=>de.forEach(A.ds,(q=>_.persistence.referenceDelegate.removeReference(E,A.targetId,q)))))))))}catch(E){if(!Ll(E))throw E;Te(Sg,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const q=_.Ms.get(A),J=q.snapshotVersion,X=q.withLastLimboFreeSnapshotVersion(J);_.Ms=_.Ms.insert(A,X)}}})(i.localStore,d))}async function d4(r,e){const s=He(r);if(!s.currentUser.isEqual(e)){Te(Dg,"User change. New user:",e.toKey());const i=await X_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((x=>{x.reject(new we(le.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bc(s,i.Ls)}}function h4(r,e){const s=He(r),i=s.Au.get(e);if(i&&i.hu)return tt().add(i.key);{let o=tt();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function p1(r){const e=He(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l4.bind(null,e),e.Pu.H_=$j.bind(null,e.eventManager),e.Pu.yu=Xj.bind(null,e.eventManager),e}function f4(r){const e=He(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c4.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return yj(this.persistence,new mj,e.initialUser,this.serializer)}Cu(e){return new $_(Eg.mi,this.serializer)}Du(e){return new Tj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class m4 extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){dt(this.persistence.referenceDelegate instanceof kd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JA(i,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new $_((i=>kd.mi(i,s)),this.serializer)}}class $m{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d4.bind(null,this.syncEngine),await Yj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qj})()}createDatastore(e){const s=Xd(e.databaseInfo.databaseId),i=(function(d){return new Cj(d)})(e.databaseInfo);return(function(d,f,p,x){return new Dj(d,f,p,x)})(e.authCredentials,e.appCheckCredentials,i,s)}createRemoteStore(e){return(function(i,o,d,f,p){return new Oj(i,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>zv(this.syncEngine,s,0)),(function(){return Mv.v()?new Mv:new Sj})())}createSyncEngine(e,s){return(function(o,d,f,p,x,y,_){const E=new e4(o,d,f,p,x,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const i=He(s);Te(Ta,"RemoteStore shutting down."),i.Ea.add(5),await vc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class g4{constructor(e,s,i,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=i,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(i,(async f=>{Te(Mi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Te(Mi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const i=Ig(s,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function vm(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Mi,"Initializing OfflineComponentProvider");const s=r.configuration;await e.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await X_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function qv(r,e){r.asyncQueue.verifyOperationInProgress();const s=await p4(r);Te(Mi,"Initializing OnlineComponentProvider"),await e.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Vv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Vv(e.remoteStore,o))),r._onlineComponents=e}async function p4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Mi,"Using user provided OfflineComponentProvider");try{await vm(r,r._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Nl("Error using user provided cache. Falling back to memory cache: "+s),await vm(r,new Md)}}else Te(Mi,"Using default OfflineComponentProvider"),await vm(r,new m4(void 0));return r._offlineComponents}async function x1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Mi,"Using user provided OnlineComponentProvider"),await qv(r,r._uninitializedComponentsProvider._online)):(Te(Mi,"Using default OnlineComponentProvider"),await qv(r,new $m))),r._onlineComponents}function y4(r){return x1(r).then((e=>e.syncEngine))}async function Xm(r){const e=await x1(r),s=e.eventManager;return s.onListen=t4.bind(null,e.syncEngine),s.onUnlisten=r4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=n4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),s}function x4(r,e,s={}){const i=new Ai;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,x,y){const _=new y1({next:A=>{_.Nu(),f.enqueueAndForget((()=>l1(d,E))),A.fromCache&&x.source==="server"?y.reject(new we(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new o1(p,_,{includeMetadataChanges:!0,qa:!0});return a1(d,E)})(await Xm(r),r.asyncQueue,e,s,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firestore.googleapis.com",Fv=!0;class Gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b1,this.ssl=Fv}else this.host=e.host,this.ssl=e.ssl??Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WA)throw new we(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ON("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,s,i,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new SN;switch(i.type){case"firstParty":return new CN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=Hv.get(s);i&&(Te("ComponentProvider","Removing Datastore"),Hv.delete(s),i.terminate())})(this),Promise.resolve()}}function v4(r,e,s,i={}){r=Yn(r,Jd);const o=kl(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${s}`;o&&(db(`https://${p}`),hb("Firestore",!0)),d.host!==b1&&d.host!==p&&Nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...d,host:p,ssl:o,emulatorOptions:i};if(!va(x,f)&&(r._setSettings(x),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=xn.MOCK_USER;else{y=kw(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new we(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new xn(E)}r._authCredentials=new NN(new a_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Vt{constructor(e,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,i){if(pc(s,Vt._jsonSchema))return new Vt(e,i||null,new Me(_t.fromString(s.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Qt("string",Vt._jsonSchemaVersion),referencePath:Qt("string")};class ji extends Ui{constructor(e,s,i){super(e,s,yg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Me(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function St(r,e,...s){if(r=Lt(r),l_("collection","path",e),r instanceof Jd){const i=_t.fromString(e,...s);return rv(i),new ji(r,null,i)}{if(!(r instanceof Vt||r instanceof ji))throw new we(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(_t.fromString(e,...s));return rv(i),new ji(r.firestore,null,i)}}function $t(r,e,...s){if(r=Lt(r),arguments.length===1&&(e=dg.newId()),l_("doc","path",e),r instanceof Jd){const i=_t.fromString(e,...s);return sv(i),new Vt(r,null,new Me(i))}{if(!(r instanceof Vt||r instanceof ji))throw new we(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(_t.fromString(e,...s));return sv(i),new Vt(r.firestore,r instanceof ji?r.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";class Kv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z_(this,"async_queue_retry"),this._c=()=>{const i=xm();i&&Te(Yv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const s=xm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=xm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ll(e))throw e;Te(Yv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Dr("INTERNAL UNHANDLED ERROR: ",Qv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(e,s,i){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Rg.createAndSchedule(this,e,s,i,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Pe(47125,{Pc:Qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Qv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r){return(function(s,i){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of i)if(d in o&&typeof o[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Or extends Jd{constructor(e,s,i,o){super(e,s,i,o),this.type="firestore",this._queue=new Kv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function b4(r,e){const s=typeof r=="object"?r:pb(),i=typeof r=="string"?r:Nd,o=tg(s,"firestore").getImmediate({identifier:i});if(!o._initialized){const d=Rw("firestore");d&&v4(o,...d)}return o}function eh(r){if(r._terminated)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||_4(r),r._firestoreClient}function _4(r){const e=r._freezeSettings(),s=(function(o,d,f,p){return new YN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,v1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new g4(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cs(gn.fromBase64String(e))}catch(s){throw new we(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new cs(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,cs._jsonSchema))return cs.fromBase64String(e.bytes)}}cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:Qt("string",cs._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new we(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new we(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new we(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sr._jsonSchemaVersion}}static fromJSON(e){if(pc(e,sr._jsonSchema))return new sr(e.latitude,e.longitude)}}sr._jsonSchemaVersion="firestore/geoPoint/1.0",sr._jsonSchema={type:Qt("string",sr._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let d=0;d<i.length;++d)if(i[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new rr(e.vectorValues);throw new we(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rr._jsonSchemaVersion="firestore/vectorValue/1.0",rr._jsonSchema={type:Qt("string",rr._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^__.*__$/;class E4{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,s,this.fieldTransforms):new yc(e,this.data,s,this.fieldTransforms)}}class _1{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return new Pi(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function w1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:r})}}class Vg{constructor(e,s,i,o,d,f){this.settings=e,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w1(this.Ac)&&w4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T4{constructor(e,s,i){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=i||Xd(e)}Cc(e,s,i,o=!1){return new Vg({Ac:e,methodName:s,Dc:i,path:mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(r){const e=r._freezeSettings(),s=Xd(r._databaseId);return new T4(r._databaseId,!!e.ignoreUndefinedProperties,s)}function Lg(r,e,s,i,o,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,s,o);Pg("Data must be an object, but it was:",f,i);const p=S1(i,f);let x,y;if(d.merge)x=new Gn(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const E of d.mergeFields){const A=Wm(e,E,s);if(!f.contains(A))throw new we(le.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);A1(_,A)||_.push(A)}x=new Gn(_),y=f.fieldTransforms.filter((E=>x.covers(E.field)))}else x=null,y=f.fieldTransforms;return new E4(new Mn(p),x,y)}class th extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function E1(r,e,s,i){const o=r.Cc(1,e,s);Pg("Data must be an object, but it was:",o,i);const d=[],f=Mn.empty();Li(i,((x,y)=>{const _=Ug(e,x,s);y=Lt(y);const E=o.yc(_);if(y instanceof th)d.push(_);else{const A=Ec(y,E);A!=null&&(d.push(_),f.set(_,A))}}));const p=new Gn(d);return new _1(f,p,o.fieldTransforms)}function T1(r,e,s,i,o,d){const f=r.Cc(1,e,s),p=[Wm(e,i,s)],x=[o];if(d.length%2!=0)throw new we(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)p.push(Wm(e,d[A])),x.push(d[A+1]);const y=[],_=Mn.empty();for(let A=p.length-1;A>=0;--A)if(!A1(y,p[A])){const q=p[A];let J=x[A];J=Lt(J);const X=f.yc(q);if(J instanceof th)y.push(q);else{const z=Ec(J,X);z!=null&&(y.push(q),_.set(q,z))}}const E=new Gn(y);return new _1(_,E,f.fieldTransforms)}function S4(r,e,s,i=!1){return Ec(s,r.Cc(i?4:3,e))}function Ec(r,e){if(N1(r=Lt(r)))return Pg("Unsupported field value:",e,r),S1(r,e);if(r instanceof Og)return(function(i,o){if(!w1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const d=i._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const d=[];let f=0;for(const p of i){let x=Ec(p,o.wc(f));x==null&&(x={nullValue:"NULL_VALUE"}),d.push(x),f++}return{arrayValue:{values:d}}})(r,e)}return(function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const d=Tt.fromDate(i);return{timestampValue:Id(o.serializer,d)}}if(i instanceof Tt){const d=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Id(o.serializer,d)}}if(i instanceof sr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof cs)return{bytesValue:B_(o.serializer,i._byteString)};if(i instanceof Vt){const d=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:_g(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof rr)return(function(f,p){return{mapValue:{fields:{[p_]:{stringValue:y_},[Ad]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return xg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${zd(i)}`)})(r,e)}function S1(r,e){const s={};return u_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(r,((i,o)=>{const d=Ec(o,e.mc(i));d!=null&&(s[i]=d)})),{mapValue:{fields:s}}}function N1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Tt||r instanceof sr||r instanceof cs||r instanceof Vt||r instanceof Og||r instanceof rr)}function Pg(r,e,s){if(!N1(s)||!o_(s)){const i=zd(s);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Wm(r,e,s){if((e=Lt(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Ug(r,e);throw Od("Field path arguments must be of type string or ",r,!1,void 0,s)}const N4=new RegExp("[~\\*/\\[\\]]");function Ug(r,e,s){if(e.search(N4)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new _c(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Od(r,e,s,i,o){const d=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(d||f)&&(x+=" (found",d&&(x+=` in field ${i}`),f&&(x+=` in document ${o}`),x+=")"),new we(le.INVALID_ARGUMENT,p+r+x)}function A1(r,e){return r.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,i,o,d){this._firestore=e,this._userDataWriter=s,this._key=i,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(nh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class A4 extends j1{data(){return super.data()}}function nh(r,e){return typeof e=="string"?Ug(r,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class R1 extends zg{}function Kn(r,e,...s){let i=[];e instanceof zg&&i.push(e),i=i.concat(s),(function(d){const f=d.filter((x=>x instanceof Bg)).length,p=d.filter((x=>x instanceof sh)).length;if(f>1||f>0&&p>0)throw new we(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class sh extends R1{constructor(e,s,i){super(),this._field=e,this._op=s,this._value=i,this.type="where"}static _create(e,s,i){return new sh(e,s,i)}_apply(e){const s=this._parse(e);return I1(e._query,s),new Ui(e.firestore,e.converter,Um(e._query,s))}_parse(e){const s=wc(e.firestore);return(function(d,f,p,x,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Wv(E,_);const J=[];for(const X of E)J.push(Xv(x,d,X));A={arrayValue:{values:J}}}else A=Xv(x,d,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Wv(E,_),A=S4(p,f,E,_==="in"||_==="not-in");return Kt.create(y,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function j4(r,e,s){const i=e,o=nh("where",r);return sh._create(o,i,s)}class Bg extends zg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Bg(e,s)}_parse(e){const s=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:Cs.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const x of p)I1(f,x),f=Um(f,x)})(e._query,s),new Ui(e.firestore,e.converter,Um(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends R1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new qg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new we(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new we(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(d,f)})(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Pl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ds(r,e="asc"){const s=e,i=nh("orderBy",r);return qg._create(i,s)}function Xv(r,e,s){if(typeof(s=Lt(s))=="string"){if(s==="")throw new we(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&s.indexOf("/")!==-1)throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=e.path.child(_t.fromString(s));if(!Me.isDocumentKey(i))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hv(r,new Me(i))}if(s instanceof Vt)return hv(r,s._key);throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(s)}.`)}function Wv(r,e){if(!Array.isArray(r)||r.length===0)throw new we(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(r,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new we(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class C4{convertValue(e,s="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const i={};return Li(e,((o,d)=>{i[o]=this.convertValue(d,s)})),i}convertVectorValue(e){const s=e.fields?.[Ad].arrayValue?.values?.map((i=>Ot(i.doubleValue)));return new rr(s)}convertGeoPoint(e){return new sr(Ot(e.latitude),Ot(e.longitude))}convertArray(e,s){return(e.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const s=Ri(e);return new Tt(s.seconds,s.nanos)}convertDocumentKey(e,s){const i=_t.fromString(e);dt(K_(i),9688,{name:e});const o=new ic(i.get(1),i.get(3)),d=new Me(i.popFirst(5));return o.isEqual(s)||Dr(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(r,e,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(e,s):r.toFirestore(e):e,i}class Ko{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends j1{constructor(e,s,i,o,d,f){super(e,s,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const i=this._document.data.field(nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ya._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Qt("string",ya._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class gd extends ya{data(e={}){return super.data(e)}}class xa{constructor(e,s,i,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Ko(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((i=>{e.call(s,new gd(this._firestore,this._userDataWriter,i.key,i,new Ko(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new we(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const x=new gd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const x=new gd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:R4(p.type),doc:x,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),i.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:r})}}xa._jsonSchemaVersion="firestore/querySnapshot/1.0",xa._jsonSchema={type:Qt("string",xa._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Fg extends C4{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,s)}}function I4(r){r=Yn(r,Ui);const e=Yn(r.firestore,Or),s=eh(e),i=new Fg(e);return C1(r._query),x4(s,r._query).then((o=>new xa(e,i,r,o)))}function k4(r,e,s){r=Yn(r,Vt);const i=Yn(r.firestore,Or),o=Hg(r.converter,e,s);return Tc(i,[Lg(wc(i),"setDoc",r._key,o,r.converter!==null,s).toMutation(r._key,Sn.none())])}function ar(r,e,s,...i){r=Yn(r,Vt);const o=Yn(r.firestore,Or),d=wc(o);let f;return f=typeof(e=Lt(e))=="string"||e instanceof _c?T1(d,"updateDoc",r._key,e,s,i):E1(d,"updateDoc",r._key,e),Tc(o,[f.toMutation(r._key,Sn.exists(!0))])}function Oi(r){return Tc(Yn(r.firestore,Or),[new Qd(r._key,Sn.none())])}function Rr(r,e){const s=Yn(r.firestore,Or),i=$t(r),o=Hg(r.converter,e);return Tc(s,[Lg(wc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Sn.exists(!1))]).then((()=>i))}function Tn(r,...e){r=Lt(r);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||$v(e[i])||(s=e[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($v(e[i])){const x=e[i];e[i]=x.next?.bind(x),e[i+1]=x.error?.bind(x),e[i+2]=x.complete?.bind(x)}let d,f,p;if(r instanceof Vt)f=Yn(r.firestore,Or),p=yg(r._key.path),d={next:x=>{e[i]&&e[i](D4(f,r,x))},error:e[i+1],complete:e[i+2]};else{const x=Yn(r,Ui);f=Yn(x.firestore,Or),p=x._query;const y=new Fg(f);d={next:_=>{e[i]&&e[i](new xa(f,y,x,_))},error:e[i+1],complete:e[i+2]},C1(r._query)}return(function(y,_,E,A){const q=new y1(A),J=new o1(_,q,E);return y.asyncQueue.enqueueAndForget((async()=>a1(await Xm(y),J))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>l1(await Xm(y),J)))}})(eh(f),p,o,d)}function Tc(r,e){return(function(i,o){const d=new Ai;return i.asyncQueue.enqueueAndForget((async()=>a4(await y4(i),o,d))),d.promise})(eh(r),e)}function D4(r,e,s){const i=s.docs.get(e._key),o=new Fg(r);return new ya(r,o,e._key,i,new Ko(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=wc(e)}set(e,s,i){this._verifyNotCommitted();const o=bm(e,this._firestore),d=Hg(o.converter,s,i),f=Lg(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,Sn.none())),this}update(e,s,i,...o){this._verifyNotCommitted();const d=bm(e,this._firestore);let f;return f=typeof(s=Lt(s))=="string"||s instanceof _c?T1(this._dataReader,"WriteBatch.update",d._key,s,i,o):E1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=bm(e,this._firestore);return this._mutations=this._mutations.concat(new Qd(s._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(r,e){if((r=Lt(r)).firestore!==e)throw new we(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(r){return eh(r=Yn(r,Or)),new M4(r,(e=>Tc(r,e)))}(function(e,s=!0){(function(o){Ol=o})(Dl),Sl(new ba("firestore",((i,{instanceIdentifier:o,options:d})=>{const f=i.getProvider("app").getImmediate(),p=new Or(new AN(i.getProvider("auth-internal")),new RN(f,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),Si(Jx,ev,e),Si(Jx,ev,"esm2020")})();const V4={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},k1=gb(V4),us=_N(k1),Be=b4(k1),_m={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function L4(){const[r,e]=ne.useState(!0),[s,i]=ne.useState(""),[o,d]=ne.useState(""),[f,p]=ne.useState(""),[x,y]=ne.useState(""),[_,E]=ne.useState(!1),A=async X=>{X.preventDefault(),p(""),y(""),E(!0);try{if(r)await aS(us,s,o);else{const te=(await iS(us,s,o)).user;await k4($t(Be,"users",te.uid),{email:te.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(z){p(J(z.code))}finally{E(!1)}},q=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await rS(us,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(X){p(J(X.code))}},J=X=>{switch(X){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+X}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),x&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:x}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:X=>i(X.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(_m.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:X=>d(X.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:q,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(_m.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const yi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},P4=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,i=20,o=Math.max(...r.map(p=>p.value))||100,d=r.map((p,x)=>{const y=r.length>1?x/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return`${E},${A}`}).join(" "),f=`${d} ${s-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:s-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((p,x)=>{const y=r.length>1?x/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),E=isNaN(y)?i:y,A=isNaN(_)?e-i:_;return c.jsx("circle",{cx:E,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},x)})]})},rd=({title:r,value:e,subtext:s,icon:i,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(yi.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(i,{})})]});function Zv({onNavigate:r=()=>{}}){const[e,s]=ne.useState(null),[i,o]=ne.useState(!0),[d,f]=ne.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,x]=ne.useState([]),[y,_]=ne.useState([]),[E,A]=ne.useState([]),[q,J]=ne.useState([]);return ne.useEffect(()=>{const X=us.onAuthStateChanged(he=>{s(he),o(!1)}),z=Tn(Kn(St(Be,"siparisler"),ds("createdAt","desc")),he=>{const ve=he.docs.map(T=>T.data());_(ve.slice(0,5));const Ee={};ve.forEach(T=>{const j=T.date?T.date.slice(0,7):"N/A";Ee[j]=(Ee[j]||0)+1});const R=Object.entries(Ee).map(([T,j])=>({label:T,value:j})).sort((T,j)=>T.label.localeCompare(j.label));J(R),f(T=>({...T,activeOrders:ve.length}))}),te=Tn(St(Be,"teklifler"),he=>{f(ve=>({...ve,pendingProposals:he.size}))}),W=Tn(St(Be,"employees"),he=>{const ve=he.docs.map(T=>T.data());f(T=>({...T,totalWorkers:ve.length}));const Ee=new Date().toISOString().split("T")[0],R=ve.filter(T=>{const j=T.attendance?.[Ee];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});x(R)}),pe=Tn(St(Be,"inventory_movements"),he=>{const ve=he.docs.map(T=>T.data()),Ee={};ve.forEach(T=>{const j=Number(T.quantity)||0,k=T.action==="add"?j:-j;Ee[T.productName]||(Ee[T.productName]=0),Ee[T.productName]+=k});const R=Object.entries(Ee).filter(([T,j])=>j<100).map(([T,j])=>({name:T,qty:j}));A(R.slice(0,5)),f(T=>({...T,inventoryCount:Object.keys(Ee).length}))});return()=>{X(),z(),te(),W(),pe()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(yi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(rd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:yi.Cart,color:"bg-indigo-600"}),c.jsx(rd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:yi.Document,color:"bg-purple-600"}),c.jsx(rd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:yi.Box,color:"bg-emerald-600"}),c.jsx(rd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:yi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(P4,{data:q})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((X,z)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",X.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",X.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:X.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},z)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(yi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((X,z)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:X.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:X.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:X.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},z)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(yi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:E.length>0?E.map((X,z)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:X.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[X.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},z)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ve={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},Fn=rb.forwardRef(({className:r="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${r}
    `,...e})),U4=rb.forwardRef(({className:r="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${r}
    `,...e})),Nr=({children:r,variant:e="primary",className:s="",...i})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...i,children:r})},D1=({checked:r,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})})}),Tl=({options:r,selected:e,onChange:s,placeholder:i="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,x]=ne.useState(!1),[y,_]=ne.useState(""),E=ne.useRef(null);ne.useEffect(()=>{const z=te=>{E.current&&!E.current.contains(te.target)&&x(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const A=z=>{if(o){const te=e.includes(z)?e.filter(W=>W!==z):[...e,z];s(te)}else s(z),x(!1),_("")},q=z=>{_(z.target.value),f&&s(z.target.value)},J=o?e.length>0?`(${e.length})`:"":e||i,X=r.filter(z=>z.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Fn,{placeholder:i,value:e,onChange:q,onFocus:()=>x(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>x(!p),children:c.jsx(Ve.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>x(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Ve.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${i} ${J}`:J})]}),c.jsx(Ve.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:z=>_(z.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[X.map(z=>{const te=o?e.includes(z):e===z;return c.jsxs("div",{onClick:()=>f?s(z):A(z),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${te?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${te?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:te&&c.jsx(Ve.Check,{})}),c.jsx("span",{className:"truncate",children:z})]}),d&&c.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),d(z)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Ve.Trash,{})})]},z)}),X.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},M1=({isOpen:r,onClose:e,title:s,children:i,maxWidth:o="max-w-xl"})=>r?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:i})]})}):null,Gg=({children:r,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:r}),rh=({startDate:r,endDate:e,onStartChange:s,onEndChange:i})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:r,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>i(o.target.value)})]}),Ss=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",z4=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",B4=r=>{if(!r)return 0;const e=r.toString().replace(/\D/g,"");return parseFloat(e)/100},Jv=r=>r?new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)+" ":"";function q4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[x,y]=ne.useState(!1),[_,E]=ne.useState({start:"",end:""}),[A,q]=ne.useState({}),[J,X]=ne.useState(!1),[z,te]=ne.useState(!1),[W,pe]=ne.useState(!1),[he,ve]=ne.useState(null),[Ee,R]=ne.useState(null),[T,j]=ne.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[k,C]=ne.useState({name:"",company:"",phone:"",email:""}),[V,I]=ne.useState(null),[ce,Ie]=ne.useState({docNo:"",amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]});if(ne.useEffect(()=>{const G=us.onAuthStateChanged(ke=>{e(ke),i(!1)}),ee=Kn(St(Be,"customers"),ds("createdAt","desc")),ye=Tn(ee,ke=>{d(ke.docs.map(it=>({id:it.id,...it.data()})))}),Ae=Kn(St(Be,"sales"),ds("createdAt","desc")),me=Tn(Ae,ke=>{p(ke.docs.map(it=>({id:it.id,...it.data()})))});return()=>{G(),ye(),me()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ve.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const K=G=>{const ee=parseFloat(G.qty)||0,ye=parseFloat(G.unitPrice)||0,Ae=parseFloat(G.vatRate)||0,me=ee*ye,ke=me*(Ae/100);return me+ke},ge=G=>{if(!G)return{subtotal:0,totalVAT:0,grandTotal:0};const ee=G.reduce((Ae,me)=>Ae+(parseFloat(me.qty)||0)*(parseFloat(me.unitPrice)||0),0),ye=G.reduce((Ae,me)=>Ae+K(me),0);return{subtotal:ee,totalVAT:ye-ee,grandTotal:ye}},_e=G=>G?G.reduce((ee,ye)=>ee+K(ye),0):0,Ue=G=>{const ee=f.filter(me=>me.customerId===G);let ye=0,Ae=0;return ee.forEach(me=>{if(me.type==="payment"){const ke=parseFloat(me.amount)||0;me.direction==="out"?ye+=ke:Ae+=ke}else{const ke=_e(me.items);me.transactionType==="purchase"?Ae+=ke:ye+=ke}}),ye-Ae},Qe=G=>{q(ee=>({...ee,[G]:!ee[G]}))},S=G=>{let ee=f.filter(me=>me.customerId===G);ee.sort((me,ke)=>new Date(me.date)-new Date(ke.date));let ye=0;const Ae=[];return ee.forEach(me=>{if(me.type==="payment"){const ke=parseFloat(me.amount)||0,it=me.direction==="out",at=it?ke:0,Xt=it?0:ke;ye=ye+at-Xt,Ae.push({docNo:me.docNo||"-",date:me.date,action:it?"DEME YAPILDI":"DEME ALINDI",type:me.paymentMethod||"-",note:me.note||"",ek:"-",desc:it?"Firmamzdan k":"Firmamza Giri",qty:"-",unitPrice:"-",borc:at,alacak:Xt,balance:ye})}else{const ke=me.transactionType==="purchase",it=ke?"ALI":"SATI";me.items?.forEach(at=>{const Xt=K(at),sn=ke?0:Xt,rn=ke?Xt:0;ye=ye+sn-rn,Ae.push({docNo:me.docNo,date:me.date,action:it,type:"-",note:me.note||"",ek:at.ek||"",desc:at.name,qty:at.qty,unitPrice:at.unitPrice,borc:sn,alacak:rn,balance:ye})})}}),Ae},P=async G=>{G.preventDefault();try{await Rr(St(Be,"customers"),{...k,createdAt:new Date().toISOString()}),C({name:"",company:"",phone:"",email:""}),te(!1)}catch(ee){alert("Hata: "+ee.message)}},re=async G=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Oi($t(Be,"customers",G))},L=G=>{ve(G),I(null);const ee="TH-"+Date.now().toString().slice(-6);Ie({docNo:ee,amount:0,formattedAmount:"",type:"Nakit",direction:"in",note:"",date:new Date().toISOString().split("T")[0]}),pe(!0)},M=(G,ee)=>{ve(ee),I(G),Ie({docNo:G.docNo||"",amount:G.amount,formattedAmount:Jv(G.amount),type:G.paymentMethod,direction:G.direction||"in",note:G.note,date:G.date}),pe(!0)},Z=G=>{const ee=G.target.value,ye=B4(ee);Ie({...ce,amount:ye,formattedAmount:Jv(ye)})},ue=async G=>{if(G.preventDefault(),!!he)try{const ee={customerId:he.id,type:"payment",docNo:ce.docNo,amount:ce.amount,paymentMethod:ce.type,direction:ce.direction,note:ce.note,date:ce.date,createdAt:V?V.createdAt:new Date().toISOString()};V?await ar($t(Be,"sales",V.id),ee):await Rr(St(Be,"sales"),ee),pe(!1)}catch(ee){alert("Hata: "+ee.message)}},Ne=G=>{ve(G),R(null);const ee="DOC-"+Date.now().toString().slice(-6);j({docNo:ee,transactionType:"sale",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),X(!0)},Re=(G,ee)=>{ve(ee),R(G);const ye=(G.items||[]).map(Ae=>({...Ae,ek:Ae.ek||""}));j({docNo:G.docNo,transactionType:G.transactionType||"sale",date:G.date,description:G.description,status:G.status,items:ye}),X(!0)},Fe=async G=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Oi($t(Be,"sales",G))}catch(ee){alert("Hata: "+ee.message)}},vt=async G=>{G.preventDefault();try{const ee={customerId:he.id,...T,type:"sale",createdAt:Ee?Ee.createdAt:new Date().toISOString()};Ee?await ar($t(Be,"sales",Ee.id),ee):await Rr(St(Be,"sales"),ee),X(!1)}catch(ee){alert("Hata: "+ee.message)}},nt=(G,ee,ye)=>{const Ae=[...T.items];Ae[G][ee]=ye,j({...T,items:Ae})},ae=()=>j({...T,items:[...T.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),be=G=>j({...T,items:T.items.filter((ee,ye)=>ye!==G)}),fe=G=>{const ee=S(G.id);let ye="data:text/csv;charset=utf-8,\uFEFF";ye+=`Tarih,Belge No,Hareket,Tip,Not,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,ee.forEach(ke=>{const it=Xt=>Ss(Xt).replace(" ",""),at=[`"${ke.date}"`,`"${ke.docNo}"`,`"${ke.action}"`,`"${ke.type}"`,`"${ke.note}"`,`"${ke.ek}"`,`"${ke.desc}"`,`"${ke.qty}"`,`"${ke.unitPrice!=="-"?it(ke.unitPrice):"-"}"`,`"${it(ke.borc)}"`,`"${it(ke.alacak)}"`,`"${it(ke.balance)}"`].join(",");ye+=at+`
`});const Ae=encodeURI(ye),me=document.createElement("a");me.setAttribute("href",Ae),me.setAttribute("download",`${G.name}_Ekstre.csv`),document.body.appendChild(me),me.click(),document.body.removeChild(me)},Ce=G=>{const ee=S(G.id),ye=window.open("","","height=800,width=1000");if(!ye)return;const Ae=`
      <html><head><title>Ekstre - ${G.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:10px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:6px;text-align:left}
        td{border:1px solid #d1d5db;padding:5px}
        .right{text-align:right}
        .center{text-align:center}
        .payment-row-in{background-color:#f0fdf4} /* Green - Payment Received */
        .payment-row-out{background-color:#fef2f2} /* Red - Payment Made */
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
        .col-note { max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
      </style>
      </head><body>
        <h2>${G.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr>
              <th>Tarih</th>
              <th>Belge</th>
              <th>Hareket</th>
              <th>Tip</th>
              <th class="col-note">Not</th>
              <th>Ek</th>
              <th>Aklama</th>
              <th class="right">Miktar</th>
              <th class="right">B.Fiyat</th>
              <th class="right">deme (Alnan)</th>
              <th class="right">Tutar (Bor)</th>
              <th class="right">Bakiye</th>
            </tr>
          </thead>
          <tbody>
            ${ee.map(me=>{let ke="sale-row";return me.action==="DEME ALINDI"&&(ke="payment-row-in"),me.action==="DEME YAPILDI"&&(ke="payment-row-out"),`
              <tr class="${ke}">
                <td>${me.date}</td>
                <td>${me.docNo}</td>
                <td>${me.action}</td>
                <td>${me.type}</td>
                <td class="col-note" title="${me.note}">${me.note}</td>
                <td>${me.ek}</td>
                <td>${me.desc}</td>
                <td class="right">${me.qty}</td>
                <td class="right">${me.unitPrice!=="-"?Ss(me.unitPrice):"-"}</td>
                <td class="right">${me.borc>0?Ss(me.borc):"-"}</td>
                <td class="right">${me.alacak>0?Ss(me.alacak):"-"}</td>
                <td class="right bold" style="color:${me.balance>0?"#059669":"#dc2626"}">${Ss(me.balance)}</td>
              </tr>
            `}).join("")}
          </tbody>
        </table>
      </body></html>
    `;ye.document.write(Ae),setTimeout(()=>{ye.document.close(),ye.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:G=>E({..._,start:G}),onEndChange:G=>E({..._,end:G})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(D1,{checked:x,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>te(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ve.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(G=>{const ee=f.filter(me=>{const ke=me.customerId===G.id;let it=!0;return _.start&&me.date<_.start&&(it=!1),_.end&&me.date>_.end&&(it=!1),ke&&it}).sort((me,ke)=>new Date(ke.date)-new Date(me.date)),ye=Ue(G.id),Ae=A[G.id];return c.jsxs(Gg,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Qe(G.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ve.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:G.name}),c.jsx("p",{className:"text-xs text-gray-500",children:G.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Ae?c.jsx(Ve.ChevronDown,{className:"transform rotate-180"}):c.jsx(Ve.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${ye>0?"text-emerald-600":"text-red-500"}`,children:Ss(ye)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:ye>0?"(Alacaklyz)":"(Borluyuz/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Nr,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>L(G),children:[c.jsx(Ve.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"Tahsilat"})]}),c.jsxs(Nr,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>Ne(G),children:[c.jsx(Ve.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"lem Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>Ce(G),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ve.Printer,{})}),c.jsx("button",{onClick:()=>fe(G),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ve.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>re(G.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ve.Trash,{})})]})]})]})]}),Ae&&(ee.length>0?c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:ee.map(me=>{const ke=me.type==="payment",it=me.transactionType==="purchase",at=me.direction==="out",Xt=ke?me.amount:_e(me.items);let sn="",rn="",_n="bg-indigo-400",an=`SATI #${me.docNo}`,hs="+";return ke?at?(an="DEME YAPILDI",sn="bg-red-50/30",rn="text-red-500",_n="bg-red-400",hs="+"):(an="DEME ALINDI",sn="bg-emerald-50/30",rn="text-emerald-600",_n="bg-emerald-400",hs="-"):it?(sn="bg-amber-50/30",rn="text-amber-600",_n="bg-amber-400",an=`ALI #${me.docNo}`,hs="-"):rn="text-red-500",c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${sn}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${_n}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:an}),ke&&c.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded text-gray-500 border",children:me.paymentMethod}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:z4(me.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ke?me.note||"-":`${me.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${rn}`,children:[hs,Ss(Xt)]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[ke?c.jsx("button",{onClick:()=>M(me,G),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ve.Edit,{})}):c.jsx("button",{onClick:()=>Re(me,G),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ve.Edit,{})}),c.jsx("button",{onClick:()=>Fe(me.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ve.Trash,{})})]})]})]},me.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic bg-white/20",children:"Hareket bulunamad."}))]},G.id)})}),z&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.name,onChange:G=>C({...k,name:G.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.company,onChange:G=>C({...k,company:G.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.phone,onChange:G=>C({...k,phone:G.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:k.email,onChange:G=>C({...k,email:G.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>te(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),W&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:V?"deme Dzenle":"Tahsilat / deme"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:he?.name}),c.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>Ie({...ce,direction:"in"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${ce.direction==="in"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme AL (Giri)"}),c.jsx("button",{type:"button",onClick:()=>Ie({...ce,direction:"out"}),className:`flex-1 py-2.5 rounded-lg text-xs font-bold transition-all ${ce.direction==="out"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:text-gray-700"}`,children:"deme YAP (k)"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Kredi Kart","ek"].map(G=>c.jsx("button",{type:"button",onClick:()=>Ie({...ce,type:G}),className:`py-2 border rounded-lg text-xs font-bold transition-all ${ce.type===G?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:G},G))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"text",autoFocus:!0,required:!0,className:`w-full border rounded-2xl px-4 py-4 text-2xl font-bold text-center focus:ring-2 ${ce.direction==="in"?"text-emerald-700 border-emerald-200 focus:ring-emerald-500 bg-emerald-50/30":"text-red-700 border-red-200 focus:ring-red-500 bg-red-50/30"}`,placeholder:"0,00 ",value:ce.formattedAmount,onChange:Z})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx("input",{placeholder:"Belge/Makbuz No",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:ce.docNo,onChange:G=>Ie({...ce,docNo:G.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:ce.date,onChange:G=>Ie({...ce,date:G.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Not / Aklama (Opsiyonel)",value:ce.note,onChange:G=>Ie({...ce,note:G.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>pe(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:`px-8 py-2.5 text-white rounded-xl shadow-lg font-bold text-sm ${ce.direction==="in"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:"Kaydet"})]})]})]})}),J&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:vt,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Ee?"lemi Dzenle":"Yeni lem"}),"                                ",c.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{type:"button",onClick:()=>j({...T,transactionType:"sale"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${T.transactionType==="sale"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SATI YAP"}),c.jsx("button",{type:"button",onClick:()=>j({...T,transactionType:"purchase"}),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${T.transactionType==="purchase"?"bg-white text-amber-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"ALI YAP"})]})]}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Fn,{value:T.docNo,onChange:G=>j({...T,docNo:G.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Fn,{type:"date",required:!0,value:T.date,onChange:G=>j({...T,date:G.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Fn,{value:T.description,onChange:G=>j({...T,description:G.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:T.items.map((G,ee)=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:G.ek,onChange:ye=>nt(ee,"ek",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:G.name,onChange:ye=>nt(ee,"name",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:G.qty,onChange:ye=>nt(ee,"qty",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:G.unitPrice,onChange:ye=>nt(ee,"unitPrice",ye.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:G.vatRate,onChange:ye=>nt(ee,"vatRate",ye.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3",children:Ss(K(G))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>be(ee),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ve.Trash,{})})})]},ee))})]}),c.jsx("button",{type:"button",onClick:ae,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Ss(ge(T.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:Ss(ge(T.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:Ss(ge(T.items).grandTotal)})]})]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const eb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tb=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function H4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[x,y]=ne.useState({start:"",end:""}),[_,E]=ne.useState(!1),[A,q]=ne.useState(!1),[J,X]=ne.useState(!1),[z,te]=ne.useState({}),[W,pe]=ne.useState({}),he=ne.useRef(null),[ve,Ee]=ne.useState(null),[R,T]=ne.useState(null),[j,k]=ne.useState({en:6,boy:4}),[C,V]=ne.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]}),I=ne.useMemo(()=>f.map(ae=>ae.name).sort(),[f]);ne.useEffect(()=>{const ae=us.onAuthStateChanged(ee=>{e(ee),i(!1)}),be=Kn(St(Be,"customers"),ds("name","asc")),fe=Tn(be,ee=>{p(ee.docs.map(ye=>({id:ye.id,...ye.data()})))}),Ce=Kn(St(Be,"siparisler"),ds("createdAt","desc")),G=Tn(Ce,ee=>{d(ee.docs.map(ye=>({id:ye.id,...ye.data()})))});return()=>{ae(),fe(),G()}},[]);const ce=ne.useMemo(()=>{const ae=[...f],be=new Set(f.map(fe=>fe.id));return o.forEach(fe=>{fe.customerId&&!be.has(fe.customerId)&&(ae.find(Ce=>Ce.id===fe.customerId)||ae.push({id:fe.customerId,name:fe.customerId,company:"Kaytsz (Manuel)"}))}),ae.sort((fe,Ce)=>fe.name.localeCompare(Ce.name))},[o,f]);if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const Ie=r?.email==="furkan@avci.jp",K=ae=>{if(!ae)return;const be=new FileReader;be.onload=fe=>{const Ce=new Image;Ce.onload=()=>{const G=document.createElement("canvas"),ee=800,ye=800;let Ae=Ce.width,me=Ce.height;Ae>me?Ae>ee&&(me*=ee/Ae,Ae=ee):me>ye&&(Ae*=ye/me,me=ye),G.width=Ae,G.height=me,G.getContext("2d").drawImage(Ce,0,0,Ae,me);const it=G.toDataURL("image/jpeg",.8);V(at=>({...at,image:it}))},Ce.src=fe.target.result},be.readAsDataURL(ae)},ge=ae=>{ae.preventDefault(),X(!0)},_e=()=>X(!1),Ue=ae=>{ae.preventDefault(),X(!1),ae.dataTransfer.files&&ae.dataTransfer.files[0]&&K(ae.dataTransfer.files[0])},Qe=ae=>{ae.clipboardData.files&&ae.clipboardData.files[0]&&K(ae.clipboardData.files[0])},S=()=>{Ee(null);const ae="SP-"+Date.now().toString().slice(-6);V({siparisNo:ae,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),E(!0)},P=ae=>{Ee(ae);const be=f.find(Ce=>Ce.id===ae.customerId),fe=be?be.name:ae.customerId;V({siparisNo:ae.siparisNo,customerId:fe,date:ae.date,note:ae.note||"",image:ae.image,items:ae.items||[]}),E(!0)},re=async ae=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Oi($t(Be,"siparisler",ae))}catch(be){alert(be.message)}},L=async ae=>{if(ae.preventDefault(),!C.customerId){alert("Ltfen mteri giriniz.");return}try{const be=f.find(G=>G.name===C.customerId),fe=be?be.id:C.customerId,Ce={...C,customerId:fe,createdAt:ve?ve.createdAt:new Date().toISOString()};ve?await ar($t(Be,"siparisler",ve.id),Ce):await Rr(St(Be,"siparisler"),{...Ce,productionStatus:{}}),E(!1)}catch(be){alert(be.message)}},M=(ae,be,fe)=>{const Ce=[...C.items],G=Ce[ae];if(G[be]=fe,be==="en1"){const ee=parseFloat(fe);isNaN(ee)?fe===""&&(G.en2=""):G.en2=ee-j.en}if(be==="boy1"){const ee=parseFloat(fe);isNaN(ee)?fe===""&&(G.boy2=""):G.boy2=ee-j.boy}V({...C,items:Ce})},Z=()=>{V({...C,items:[...C.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},ue=()=>{if(C.items.length===0)return;const be={...C.items[C.items.length-1]};V({...C,items:[...C.items,be]})},Ne=ae=>{const be=C.items.filter((fe,Ce)=>Ce!==ae);V({...C,items:be})},Re=(ae,be)=>{const fe=parseFloat(be)||0,Ce={...j,[ae]:fe};k(Ce);const G=C.items.map(ee=>({...ee,en2:ee.en1?parseFloat(ee.en1)-Ce.en:ee.en2,boy2:ee.boy1?parseFloat(ee.boy1)-Ce.boy:ee.boy2}));V({...C,items:G})},Fe=ae=>{T(ae),q(!0)},vt=async(ae,be)=>{if(!R)return;const fe=R.productionStatus||{},Ce=fe[ae]||{},G={...fe,[ae]:{...Ce,[be]:!Ce[be]}};T({...R,productionStatus:G}),await ar($t(Be,"siparisler",R.id),{productionStatus:G})},nt=ae=>{const be=f.find(ee=>ee.id===ae.customerId),fe=be?be.name:ae.customerId||"simsiz";f.find(ee=>ee.id===ae.customerId);const Ce=window.open("","","height=800,width=1000");if(!Ce){alert("Pop-up engelleyiciyi kapatn.");return}const G=`
      <html><head><title>Sipari - ${ae.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 10px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; font-size: 18px;}
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${fe}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${ae.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${tb(ae.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 8%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 53%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Sekil -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${ae.items.map(ee=>`
              <tr>
                <td class="group-kasa">${ee.en1||"-"}</td>
                <td class="group-kasa">${ee.boy1||"-"}</td>
                <td class="group-kasa">${ee.genislik||"-"}</td>
                <td>${ee.takim||""}</td>
                <td class="col-desc">${ee.aciklama||""}</td>
                <td class="group-net"><strong>${ee.en2||""}</strong></td>
                <td class="group-net"><strong>${ee.boy2||""}</strong></td>
                <td>${ee.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${ae.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${ae.note}
          </div>
        `:""}

        ${ae.image?`
          <div class="door-image-container">
            <img src="${ae.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;Ce.document.write(G),Ce.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Qe,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:x.start,endDate:x.end,onStartChange:ae=>y({...x,start:ae}),onEndChange:ae=>y({...x,end:ae})}),Ie&&c.jsxs("button",{onClick:S,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ve.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:ce.map(ae=>{const be=o.filter(fe=>{const Ce=fe.customerId===ae.id;let G=!0;return x.start&&(G=G&&fe.date>=x.start),x.end&&(G=G&&fe.date<=x.end),Ce&&G});return be.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Ve.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:ae.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[be.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:be.map(fe=>{const Ce=z[fe.id],G=W[fe.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:fe.image?c.jsx("img",{src:fe.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",fe.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:tb(fe.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[fe.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>te(ee=>({...ee,[fe.id]:!ee[fe.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Ce?c.jsx(Ve.ChevronUp,{}):c.jsx(Ve.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>pe(ee=>({...ee,[fe.id]:!ee[fe.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[G?c.jsx(Ve.ChevronUp,{}):c.jsx(Ve.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>Fe(fe),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Ve.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>nt(fe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ve.Printer,{})}),Ie&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>P(fe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ve.Edit,{})}),c.jsx("button",{onClick:()=>re(fe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Ve.Trash,{})})]})]})]}),Ce&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.items?.map((ee,ye)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:ee.aciklama||"-"}),c.jsx("td",{className:"py-2",children:ee.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[ee.en1||"-"," x ",ee.boy1||"-"," x ",ee.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[ee.en2," x ",ee.boy2]}),c.jsx("td",{className:"py-2",children:ee.sekil||"-"})]},ye))})]})}),G&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(eb).map(([ee,ye])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:ye.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:ye.steps.map(Ae=>{const me=fe.productionStatus?.[ee]?.[Ae.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:me?"text-purple-700 font-medium":"text-gray-400",children:Ae.label}),me?c.jsx(Ve.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Ve.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},Ae.id)})})]},ee))})})]},fe.id)})})]},ae.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:L,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ve?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:C.siparisNo,onChange:ae=>V({...C,siparisNo:ae.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri"}),c.jsx(Tl,{options:I,selected:C.customerId,onChange:ae=>V({...C,customerId:ae}),placeholder:"Mteri Se veya Yaz",allowNew:!0})]}),"                                    ",c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:C.date,onChange:ae=>V({...C,date:ae.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${J?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:ge,onDragLeave:_e,onDrop:Ue,children:[c.jsx("input",{ref:he,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ae=>K(ae.target.files[0])}),C.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:C.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ve.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:J?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:C.note,onChange:ae=>V({...C,note:ae.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:ae=>Re("en",ae.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:ae=>Re("boy",ae.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:C.items.map((ae,be)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ae.en1,onChange:fe=>M(be,"en1",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:ae.boy1,onChange:fe=>M(be,"boy1",fe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:ae.genislik,onChange:fe=>M(be,"genislik",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:ae.takim,onChange:fe=>M(be,"takim",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:ae.aciklama,onChange:fe=>M(be,"aciklama",fe.target.value),onInput:fe=>{fe.target.style.height="auto",fe.target.style.height=fe.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${be}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:ae.sekil,onChange:fe=>M(be,"sekil",fe.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${be}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ae.en2,onChange:fe=>M(be,"en2",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:ae.boy2,onChange:fe=>M(be,"boy2",fe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>Ne(be),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},be))})]}),c.jsxs("button",{type:"button",onClick:ue,className:"w-full py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors text-xs font-bold uppercase tracking-wide border-t border-indigo-100 flex items-center justify-center gap-2",children:[c.jsx(Ve.Clipboard,{className:"w-4 h-4"})," Son Satr Klonla"]}),c.jsx("button",{type:"button",onClick:Z,className:"w-full py-3 border-2 border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50/30 transition-colors text-sm font-bold mt-0 rounded-b-xl",children:"+ Yeni Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:ve?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(eb).map(([ae,be])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:be.title}),c.jsx("div",{className:"space-y-2",children:be.steps.map(fe=>{const Ce=R.productionStatus?.[ae]?.[fe.id];return c.jsxs("button",{onClick:()=>vt(ae,fe.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Ce?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:fe.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Ce?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Ce&&c.jsx(Ve.Check,{})})]},fe.id)})})]},ae))})]})})]})}const F4=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",G4=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),nb=({item:r,isAdd:e,onEdit:s,onDelete:i})=>c.jsxs(Gg,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:F4(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ve.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Ve.Trash,{})})]})]})]});function Y4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState({start:"",end:""}),[x,y]=ne.useState(!1),[_,E]=ne.useState([]),[A,q]=ne.useState(!0),[J,X]=ne.useState(!0),[z,te]=ne.useState(null),[W,pe]=ne.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),he=ne.useMemo(()=>[...new Set(o.map(ce=>ce.productName))].sort(),[o]),ve=ne.useMemo(()=>{const ce=o.map(K=>K.unit).filter(Boolean),Ie=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Ie,...ce])].sort()},[o]);ne.useEffect(()=>{const ce=us.onAuthStateChanged(ge=>{e(ge),i(!1)}),Ie=Kn(St(Be,"inventory_movements"),ds("date","desc")),K=Tn(Ie,ge=>{d(ge.docs.map(_e=>({id:_e.id,..._e.data()})))});return()=>{ce(),K()}},[]);const Ee=ne.useMemo(()=>o.filter(ce=>{let Ie=!0;if(f.start&&(Ie=Ie&&ce.date>=f.start),f.end&&(Ie=Ie&&ce.date<=f.end),ce.productType==="raw"&&!A||(ce.productType==="manufactured"||ce.productType==="uretilmis")&&!J)return!1;let K=!0;return _.length>0&&(K=_.includes(ce.productName)),Ie&&K}),[o,f,A,J,_]),R=Ee.filter(ce=>ce.action==="add"),T=Ee.filter(ce=>ce.action==="remove"),j=async ce=>{ce.preventDefault();try{const Ie={...W,quantity:Number(W.quantity),createdAt:new Date().toISOString()};z?await ar($t(Be,"inventory_movements",z),Ie):await Rr(St(Be,"inventory_movements"),Ie),I()}catch(Ie){alert("Hata: "+Ie.message)}},k=async ce=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Oi($t(Be,"inventory_movements",ce))},C=async ce=>{if(window.confirm(`"${ce}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Ie=Kn(St(Be,"inventory_movements"),j4("productName","==",ce)),K=await I4(Ie),ge=O4(Be);K.forEach(_e=>{ge.delete(_e.ref)}),await ge.commit(),_.includes(ce)&&E(_e=>_e.filter(Ue=>Ue!==ce)),W.productName===ce&&pe(_e=>({..._e,productName:""}))}catch(Ie){alert("Silme hatas: "+Ie.message)}},V=ce=>{te(ce.id),pe({productType:ce.productType,productName:ce.productName,action:ce.action,quantity:ce.quantity,unit:ce.unit,date:ce.date}),y(!0)},I=()=>{y(!1),te(null),pe({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:ce=>p({...f,start:ce}),onEndChange:ce=>p({...f,end:ce})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(G4,{showRaw:A,setShowRaw:q,showManufactured:J,setShowManufactured:X}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Tl,{options:he,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Ve.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(ce=>c.jsx(nb,{item:ce,isAdd:!0,onEdit:V,onDelete:k},ce.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[T.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[T.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),T.map(ce=>c.jsx(nb,{item:ce,isAdd:!1,onEdit:V,onDelete:k},ce.id))]})]})]}),c.jsx(M1,{isOpen:x,onClose:I,title:z?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${W.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:W.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(D1,{checked:W.productType==="manufactured",onChange:ce=>pe({...W,productType:ce?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Tl,{options:he,selected:W.productName,onChange:ce=>pe({...W,productName:ce}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:C})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>pe({...W,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>pe({...W,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${W.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Fn,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:W.quantity,onChange:ce=>pe({...W,quantity:ce.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Tl,{options:ve,selected:W.unit,onChange:ce=>pe({...W,unit:ce}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Fn,{type:"date",required:!0,value:W.date,onChange:ce=>pe({...W,date:ce.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(Nr,{type:"submit",variant:"primary",children:z?"Gncelle":"Kaydet"}),c.jsx(Nr,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const K4=({showRaw:r,setShowRaw:e,showManufactured:s,setShowManufactured:i})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!r),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${r?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>i(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Q4=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,i=800,o=40,d=i-o*2,f=s-o*2,p=r.flatMap(_=>e.map(E=>_[E]||0)),x=Math.max(...p,10)*1.1,y=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:E,x2:i-o,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(x/4*_)})]},_)}),e.map((_,E)=>{const A=y[E%y.length],q=r.map((J,X)=>{const z=o+X*(d/(r.length-1||1)),te=J[_]||0,W=s-o-te/x*f,pe=isNaN(z)?o:z,he=isNaN(W)?s-o:W;return`${pe},${he}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),r.map((J,X)=>{const z=o+X*(d/(r.length-1||1)),te=J[_]||0,W=s-o-te/x*f,pe=isNaN(z)?o:z,he=isNaN(W)?s-o:W;return c.jsx("circle",{cx:pe,cy:he,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${J.month} - ${_}: ${te}`})},X)})]},_)}),r.map((_,E)=>{const A=o+E*(d/(r.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[E%y.length]}}),_]},_))})]})},$4=({name:r,qty:e,unit:s,type:i,change:o,changePercent:d})=>{const f=i==="raw",p=e<0,x=d>10;let y="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});d>10?(y="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(Ve.TrendingUp,{})):d<-10&&(y="text-red-600",_="bg-red-100/50",E=c.jsx(Ve.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",q=f?"text-pink-900":"text-purple-900",J=f?"text-pink-700/70":"text-purple-700/70";p?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",q="text-red-700",J="text-red-500"):x&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",q="text-emerald-800",J="text-emerald-600");const X=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:X}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:r,children:r})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${q}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${J} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${y} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(d).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function X4(){const[r,e]=ne.useState([]),[s,i]=ne.useState(!0),[o,d]=ne.useState(!0),[f,p]=ne.useState(!0),[x,y]=ne.useState([]),[_,E]=ne.useState("year");ne.useEffect(()=>{const z=Kn(St(Be,"inventory_movements"),ds("date","asc")),te=Tn(z,W=>{const pe=W.docs.map(he=>he.data());e(pe),i(!1)});return()=>te()},[]);const A=ne.useMemo(()=>{const z={},te=new Date;return te.setDate(te.getDate()-30),r.forEach(W=>{const pe=Number(W.quantity)||0,he=W.action==="add"?pe:-pe,ve=new Date(W.date);z[W.productName]||(z[W.productName]={name:W.productName,qty:0,unit:W.unit,type:W.productType||"raw",change30Days:0}),z[W.productName].qty+=he,z[W.productName].type=W.productType||z[W.productName].type,ve>=te&&(z[W.productName].change30Days+=he)}),Object.values(z).map(W=>{const pe=W.qty-W.change30Days;let he=0;return pe!==0?he=W.change30Days/Math.abs(pe)*100:W.change30Days!==0&&(he=100),{...W,changePercent:he}})},[r]),q=ne.useMemo(()=>A.filter(z=>!(z.type==="raw"&&!o||(z.type==="manufactured"||z.type==="uretilmis")&&!f||x.length>0&&!x.includes(z.name))),[A,o,f,x]),J=ne.useMemo(()=>A.map(z=>z.name).sort(),[A]),X=ne.useMemo(()=>{const z=q.sort((he,ve)=>Math.abs(ve.qty)-Math.abs(he.qty)).slice(0,5).map(he=>he.name);if(z.length===0)return{data:[],keys:[]};const te={},W={};return z.forEach(he=>W[he]=0),r.forEach(he=>{if(!z.includes(he.productName))return;const ve=he.date?he.date.slice(0,7):"N/A";if(ve==="N/A")return;if(_==="year"){const T=new Date().getFullYear();if(new Date(he.date).getFullYear()!==T)return}const Ee=Number(he.quantity)||0,R=he.action==="add"?Ee:-Ee;W[he.productName]||(W[he.productName]=0),W[he.productName]+=R,te[ve]={...W,month:ve}}),{data:Object.values(te).sort((he,ve)=>he.month.localeCompare(ve.month)),keys:z}},[r,q,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(K4,{showRaw:o,setShowRaw:d,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Tl,{options:J,selected:x,onChange:y,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:q.length>0?q.map((z,te)=>c.jsx($4,{name:z.name,qty:z.qty,unit:z.unit,type:z.type,change:z.change30Days,changePercent:z.changePercent},te)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Ve.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),X.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Ve.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:z=>E(z.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(Q4,{data:X.data,keys:X.keys})]})]})]})}const wm=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Ws=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",id=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function W4(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[x,y]=ne.useState({start:"",end:""}),[_,E]=ne.useState(!1),[A,q]=ne.useState(!1),J=ne.useRef(null),[X,z]=ne.useState(null),[te,W]=ne.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:wm,images:[],items:[]}),pe=ne.useMemo(()=>f.map(S=>S.name).sort(),[f]);if(ne.useEffect(()=>{const S=us.onAuthStateChanged(Z=>{e(Z),i(!1)}),P=Kn(St(Be,"teklifler"),ds("createdAt","desc")),re=Tn(P,Z=>{d(Z.docs.map(ue=>({id:ue.id,...ue.data()})))}),L=Kn(St(Be,"customers"),ds("name","asc")),M=Tn(L,Z=>{p(Z.docs.map(ue=>({id:ue.id,...ue.data()})))});return()=>{S(),re(),M()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Ve.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const he=(S,P,re)=>{const L=S*P,M=L*(re/100);return L+M},ve=S=>{if(!S)return{subtotal:0,totalVAT:0,grandTotal:0};const P=S.reduce((L,M)=>L+Number(M.quantity)*Number(M.price),0),re=S.reduce((L,M)=>L+Number(M.quantity)*Number(M.price)*(Number(M.vat)/100),0);return{subtotal:P,totalVAT:re,grandTotal:P+re}},Ee=S=>{const P=Array.from(S.target.files||S.dataTransfer.files);P.length&&P.forEach(re=>{if(!re.type.startsWith("image/"))return;const L=new FileReader;L.onload=M=>{const Z=new Image;Z.onload=()=>{const ue=document.createElement("canvas"),Ne=1e3;let Re=Z.width,Fe=Z.height;Re>Fe?Re>Ne&&(Fe*=Ne/Re,Re=Ne):Fe>Ne&&(Re*=Ne/Fe,Fe=Ne),ue.width=Re,ue.height=Fe,ue.getContext("2d").drawImage(Z,0,0,Re,Fe);const nt=ue.toDataURL("image/jpeg",.7);W(ae=>({...ae,images:[...ae.images,nt]}))},Z.src=M.target.result},L.readAsDataURL(re)})},R=S=>{W(P=>({...P,images:P.images.filter((re,L)=>L!==S)}))},T=(S,P)=>{const re=[...te.images];P===-1&&S>0?[re[S],re[S-1]]=[re[S-1],re[S]]:P===1&&S<re.length-1&&([re[S],re[S+1]]=[re[S+1],re[S]]),W({...te,images:re})},j=S=>{S.preventDefault(),q(!0)},k=()=>q(!1),C=S=>{S.preventDefault(),q(!1),Ee(S)},V=S=>{S.clipboardData.files&&S.clipboardData.files.length>0&&(S.preventDefault(),Ee({target:{files:S.clipboardData.files}}))},I=()=>{z(null);const S="TK-"+Date.now().toString().slice(-6),P=new Date;P.setDate(P.getDate()+7),W({teklifNo:S,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:P.toISOString().split("T")[0],note:wm,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},ce=S=>{z(S.id),W({teklifNo:S.teklifNo,teklifName:S.teklifName||"",customerName:S.customerName,date:S.date,validityDate:S.validityDate||"",note:S.note||wm,images:S.images||[],items:S.items||[]}),E(!0)},Ie=async S=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Oi($t(Be,"teklifler",S))}catch(P){alert(P.message)}},K=async S=>{if(S.preventDefault(),!te.customerName){alert("Ltfen mteri ad giriniz.");return}try{const P={...te,createdAt:new Date().toISOString()};X?await ar($t(Be,"teklifler",X),P):await Rr(St(Be,"teklifler"),P),E(!1)}catch(P){alert(P.message)}},ge=(S,P,re)=>{const L=[...te.items],M=L[S];M[P]=re;const Z=parseFloat(P==="quantity"?re:M.quantity),ue=parseFloat(P==="price"?re:M.price),Ne=parseFloat(P==="vat"?re:M.vat);!isNaN(Z)&&!isNaN(ue)&&!isNaN(Ne)&&(M.total=he(Z,ue,Ne)),W({...te,items:L})},_e=()=>{W({...te,items:[...te.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},Ue=S=>{W({...te,items:te.items.filter((P,re)=>re!==S)})},Qe=S=>{const P=window.open("","","height=800,width=1000");if(!P){alert("Pop-up engelleyiciyi kapatn.");return}const re=ve(S.items||[]),L=S.images||[],M=`
      <html><head><title>Teklif - ${S.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${S.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${id(S.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${id(S.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${S.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${S.items.map(Z=>`
                <tr>
                  <td>${Z.description}</td>
                  <td class="text-center">${Z.quantity}</td>
                  <td class="text-right">${Ws(Z.price)}</td>
                  <td class="text-center">%${Z.vat}</td>
                  <td class="text-right"><strong>${Ws(Z.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Ws(re.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Ws(re.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Ws(re.grandTotal)}</span></div>
            </div>
          </div>

          ${S.note?`<div class="notes-section"><strong>NOT:</strong><br/>${S.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${L.map(Z=>`<img src="${Z}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;P.document.write(M),P.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?V:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:x.start,endDate:x.end,onStartChange:S=>y({...x,start:S}),onEndChange:S=>y({...x,end:S})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Ve.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(S=>{let P=!0;return x.start&&S.date<x.start&&(P=!1),x.end&&S.date>x.end&&(P=!1),P}).map(S=>{const P=ve(S.items);return c.jsxs(Gg,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Ve.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:S.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",S.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:S.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",id(S.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",id(S.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Ws(P.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Nr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>Qe(S),children:c.jsx(Ve.Printer,{})}),c.jsx(Nr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>ce(S),children:c.jsx(Ve.Edit,{})}),c.jsx(Nr,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Ie(S.id),children:c.jsx(Ve.Trash,{})})]})]})]},S.id)})]}),c.jsx(M1,{isOpen:_,onClose:()=>E(!1),title:X?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:K,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(Fn,{value:te.teklifNo,onChange:S=>W({...te,teklifNo:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(Fn,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:te.teklifName,onChange:S=>W({...te,teklifName:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Tl,{options:pe,selected:te.customerName,onChange:S=>W({...te,customerName:S}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(Fn,{type:"date",required:!0,value:te.date,onChange:S=>W({...te,date:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(Fn,{type:"date",required:!0,value:te.validityDate,onChange:S=>W({...te,validityDate:S.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(U4,{rows:"4",value:te.note,onChange:S=>W({...te,note:S.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:C,children:[c.jsx("input",{ref:J,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Ee}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Ve.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:te.images.map((S,P)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:S,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>R(P),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>T(P,-1),disabled:P===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>T(P,1),disabled:P===te.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},P))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:te.items.map((S,P)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(Fn,{placeholder:"rn/Hizmet aklamas",value:S.description,onChange:re=>ge(P,"description",re.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(Fn,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.quantity,onChange:re=>ge(P,"quantity",re.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(Fn,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.price,onChange:re=>ge(P,"price",re.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:S.vat,onChange:re=>ge(P,"vat",re.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Ws(S.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Ue(P),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Ve.Trash,{})})})]},P))})]}),c.jsx("button",{type:"button",onClick:_e,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Ws(ve(te.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Ws(ve(te.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Ws(ve(te.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(Nr,{type:"submit",variant:"primary",children:X?"Kaydet":"Olutur"}),c.jsx(Nr,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const ls={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Z4="86715dfc9d1046e7e8a0d95a",J4=`https://v6.exchangerate-api.com/v6/${Z4}/latest/USD`,Em=({ops:r,onChange:e,allowRefs:s=!1,rows:i=[],constants:o=[],constantsMap:d})=>{const f=(y,_,E)=>{const A=[...r];A[y]={...A[y],[_]:E},_==="type"&&E!=="op"&&(A[y].value=""),e(A)},p=()=>{e([...r,{type:"op",value:"+"},{type:"num",value:0}])},x=y=>{if(y===0)return;const _=[...r];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[r.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>x(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:E=>f(_,"type",E.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:E=>f(_,"value",E.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),i.map(E=>c.jsx("option",{value:E.id,children:E.name||"simsiz Satr"},E.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(ls.Plus,{})})]})};function eC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState([]),[x,y]=ne.useState({TRY:1,USD:1,EUR:1}),[_,E]=ne.useState(null),[A,q]=ne.useState(!1),[J,X]=ne.useState(!1),[z,te]=ne.useState(null),[W,pe]=ne.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[he,ve]=ne.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});ne.useEffect(()=>{const M=us.onAuthStateChanged(Fe=>{e(Fe),i(!1)}),Z=Kn(St(Be,"pricing_constants"),ds("name","asc")),ue=Tn(Z,Fe=>{d(Fe.docs.map(vt=>({id:vt.id,...vt.data()})))}),Ne=Kn(St(Be,"pricing_items"),ds("updatedAt","desc")),Re=Tn(Ne,Fe=>{p(Fe.docs.map(vt=>({id:vt.id,...vt.data()})))});return Ee(),()=>{M(),ue(),Re()}},[]);const Ee=async()=>{try{const Z=await(await fetch(J4)).json();if(Z&&Z.conversion_rates){const ue=Z.conversion_rates.TRY,Ne=Z.conversion_rates.EUR,Re=ue/Ne;y({TRY:1,USD:ue,EUR:Re}),E(new Date().toLocaleTimeString())}}catch(M){console.error("Rate fetch error",M)}},R=(M,Z)=>{if(!Z||Z==="None"||Z==="TRY")return parseFloat(M)||0;const ue=x[Z]||1;return parseFloat(M)*ue},T=(M,Z)=>{if(Z==="TRY")return M;const ue=x[Z]||1;return M/ue},j=(M,Z={})=>{if(M.type==="num")return parseFloat(M.value)||0;if(M.type==="const"){const ue=o.find(Ne=>Ne.id===M.value);return ue?R(ue.value,ue.currency):0}return M.type==="ref"&&Z[M.value]||0},k=(M,Z={})=>{if(!M||M.length===0)return 0;let ue=j(M[0],Z);for(let Ne=1;Ne<M.length;Ne+=2){const Re=M[Ne].value,Fe=j(M[Ne+1],Z);switch(Re){case"+":ue+=Fe;break;case"-":ue-=Fe;break;case"*":ue*=Fe;break;case"/":ue=Fe!==0?ue/Fe:0;break}}return ue},C=M=>{const Z={};(M.rows||[]).forEach(Ne=>{Z[Ne.id]=k(Ne.ops,Z)});const ue=k(M.finalFormula?.ops,Z);return T(ue,M.finalCurrency||"TRY")},V=M=>k(M,{}),I=ne.useMemo(()=>C(he),[he,o,x]),ce=ne.useMemo(()=>V(W.ops),[W.ops,o,x]),Ie=async M=>{M.preventDefault();const Z=V(W.ops),ue={...W,value:Z};z?await ar($t(Be,"pricing_constants",z),ue):await Rr(St(Be,"pricing_constants"),ue),pe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),te(null),q(!1)},K=async M=>await Oi($t(Be,"pricing_constants",M)),ge=()=>{const M="row_"+Date.now();ve({...he,rows:[...he.rows,{id:M,name:"",ops:[{type:"num",value:0}]}]})},_e=M=>{const Z=[...he.rows];Z.splice(M,1),ve({...he,rows:Z})},Ue=(M,Z)=>{const ue=[...he.rows];ue[M].name=Z,ve({...he,rows:ue})},Qe=(M,Z)=>{const ue=[...he.rows];ue[M].ops=Z,ve({...he,rows:ue})},S=async M=>{M.preventDefault();const Z={...he,updatedAt:new Date().toISOString()};z?await ar($t(Be,"pricing_items",z),Z):await Rr(St(Be,"pricing_items"),Z),ve({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),te(null),X(!1)},P=M=>{const Z={...M,rows:M.rows||[],finalFormula:M.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:M.finalCurrency||"TRY"};ve(Z),te(M.id),X(!0)},re=async M=>{window.confirm("Silmek istediinize emin misiniz?")&&await Oi($t(Be,"pricing_items",M))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[x.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[x.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:Ee,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(ls.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{te(null),pe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),q(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(ls.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{te(null),ve({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),X(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(ls.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(ls.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(M=>{const Z=R(M.value,M.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:M.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[M.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",M.currency!=="None"?M.currency:"",M.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",M.unit]}):""]}),M.currency!=="TRY"&&M.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",Z.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{pe({...M,ops:M.ops||[{type:"num",value:M.value}]}),te(M.id),q(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(ls.Edit,{})}),c.jsx("button",{onClick:()=>K(M.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(ls.Trash,{})})]})]},M.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(M=>{const Z=C(M),ue=M.finalCurrency||"TRY",Ne=Math.random()>.5?"up":"down",Re=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(M.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:M.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:M.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[Z.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",ue]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ne==="up"?"text-emerald-500":"text-red-500"}`,children:[Ne==="up"?c.jsx(ls.TrendingUp,{}):c.jsx(ls.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",Re]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>P(M),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>re(M.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},M.id)})})]})]}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:Ie,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.name,onChange:M=>pe({...W,name:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:W.unit,onChange:M=>pe({...W,unit:M.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(Em,{ops:W.ops,onChange:M=>pe({...W,ops:M}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:ce.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:W.currency,onChange:M=>pe({...W,currency:M.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),J&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:he.title,onChange:M=>ve({...he,title:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:he.unitType,onChange:M=>ve({...he,unitType:M.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:ge,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),he.rows.map((M,Z)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:M.name,onChange:ue=>Ue(Z,ue.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(Em,{ops:M.ops,onChange:ue=>Qe(Z,ue),allowRefs:!0,rows:he.rows.slice(0,Z),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:k(M.ops,C({...he,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>_e(Z),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(ls.Trash,{})})]})]},M.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(ls.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:he.finalCurrency,onChange:M=>ve({...he,finalCurrency:M.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Em,{ops:he.finalFormula.ops,onChange:M=>ve({...he,finalFormula:{...he.finalFormula,ops:M}}),allowRefs:!0,rows:he.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[I.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:he.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:S,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>X(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ls.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]})}const ma={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},ml={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},sb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],tC=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Tm=2.5,Ns=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function nC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState([]),[f,p]=ne.useState(new Date),[x,y]=ne.useState(!1),[_,E]=ne.useState(!1),[A,q]=ne.useState(null),[J,X]=ne.useState(new Date),[z,te]=ne.useState(!1),[W,pe]=ne.useState(new Date().getFullYear()),[he,ve]=ne.useState(!1),[Ee,R]=ne.useState(null),[T,j]=ne.useState({type:"work",overtimeSlots:0,lateness:0}),[k,C]=ne.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});ne.useEffect(()=>{const L=us.onAuthStateChanged(Ne=>{e(Ne),i(!1)}),M=Kn(St(Be,"employees"),ds("name","asc")),Z=Tn(M,Ne=>{d(Ne.docs.map(Re=>({id:Re.id,...Re.data()})))}),ue=setInterval(()=>p(new Date),6e4);return()=>{L(),Z(),clearInterval(ue)}},[]);const V=L=>{const M=f.toISOString().split("T")[0],Z=f.getDay(),ue=f.getHours(),Ne=f.getMinutes(),Re=ue*60+Ne,Fe=L.attendance?.[M];if(Fe){if(["paid_leave","unpaid_leave"].includes(Fe.type))return ml.LEAVE;if(Fe.overtimeSlots>0)return ml.OVERTIME}const[vt,nt]=L.startHour.split(":").map(Number),[ae,be]=L.endHour.split(":").map(Number),fe=vt*60+nt,Ce=ae*60+be;return L.workDays.includes(Z)?Re>=fe&&Re<Ce?ml.ONLINE:Re>=Ce&&Fe?.overtimeSlots>0?ml.OVERTIME:ml.OFFLINE:ml.OFFLINE},I=L=>{if(!L.attendance)return{used:0,remaining:L.vacationTotal};let M=0;return Object.values(L.attendance).forEach(Z=>{Z.type==="paid_leave"&&M++}),{used:M,remaining:L.vacationTotal-M}},ce=(L,M)=>{const Z=M.getFullYear(),ue=M.getMonth(),Ne=new Date(Z,ue+1,0).getDate();let Re=0,Fe=0,vt=0,nt=0,ae=0;for(let sn=1;sn<=Ne;sn++){const rn=`${Z}-${String(ue+1).padStart(2,"0")}-${String(sn).padStart(2,"0")}`,_n=new Date(rn).getDay(),an=L.attendance?.[rn],hs=L.workDays.includes(_n);an?(an.type==="work"&&Re++,an.type==="paid_leave"&&ae++,an.type==="unpaid_leave"&&nt++,an.overtimeSlots&&(Fe+=parseInt(an.overtimeSlots)),an.lateness&&(vt+=parseFloat(an.lateness))):hs&&Re++}const be=parseFloat(L.salaryAmount)||0,fe=L.customDailyRate&&parseFloat(L.customDailyRate)>0?parseFloat(L.customDailyRate):be/30,Ce=parseFloat(L.customDeductionRate),G=!isNaN(Ce)&&Ce>0?Ce:fe,ee=fe/9,ye=L.customOvertimeMultiplier?parseFloat(L.customOvertimeMultiplier):1.5,Ae=Fe*Tm,me=Ae*(ee*ye),ke=nt*G,it=vt*ee,at=ke+it,Xt=be+me-at+(parseFloat(L.insurance)||0)+(parseFloat(L.allowance)||0);return{workedDays:Re,totalOvertimeSlots:Fe,totalOvertimeHours:Ae,unpaidLeaveDays:nt,paidLeaveDays:ae,overtimePay:me,totalLatenessHours:vt,latenessDeduction:it,totalDeduction:at,totalSalary:Xt,dailyRate:fe,hourlyRate:ee,deductionRate:G}},Ie=(L,M)=>{const Z=new Date(L,M,1);let ue=0;return o.forEach(Ne=>{ue+=ce(Ne,Z).totalSalary}),ue},K=ne.useMemo(()=>{let L=0,M=0;const Z=new Date(J);return Z.setMonth(J.getMonth()-1),o.forEach(ue=>{L+=ce(ue,J).totalSalary,M+=ce(ue,Z).totalSalary}),{thisMonthTotal:L,lastMonthTotal:M}},[o,J]),ge=()=>{E(!1),C({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},_e=()=>{A&&(E(!0),C({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),q(null),y(!0))},Ue=async L=>{L.preventDefault();try{const M={...k,updatedAt:new Date().toISOString()};_&&A?await ar($t(Be,"employees",A.id),M):await Rr(St(Be,"employees"),{...M,createdAt:new Date().toISOString()}),y(!1)}catch(M){alert("Hata: "+M.message)}},Qe=async L=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Oi($t(Be,"employees",L)),q(null))},S=(L,M)=>{R(L),j({type:M?.type||"work",overtimeSlots:M?.overtimeSlots||0,lateness:M?.lateness||0}),ve(!0)},P=async L=>{if(L.preventDefault(),!A||!Ee)return;const M={...A.attendance};M[Ee]={type:T.type,overtimeSlots:parseInt(T.overtimeSlots)||0,lateness:parseFloat(T.lateness)||0},await ar($t(Be,"employees",A.id),{attendance:M}),q({...A,attendance:M}),ve(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(ma.Lock,{})," Yetkisiz Eriim"]});const re=({employee:L,date:M,onDateClick:Z})=>{const ue=M.getFullYear(),Ne=M.getMonth(),Re=new Date(ue,Ne+1,0).getDate(),Fe=new Date(ue,Ne,1).getDay(),vt=[];for(let nt=0;nt<Fe;nt++)vt.push(null);for(let nt=1;nt<=Re;nt++)vt.push(nt);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:sb.map((nt,ae)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:nt.slice(0,3)},ae))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:vt.map((nt,ae)=>{if(!nt)return c.jsx("div",{},ae);const be=`${ue}-${String(Ne+1).padStart(2,"0")}-${String(nt).padStart(2,"0")}`,fe=L.attendance?.[be],Ce=new Date(be).getDay(),G=L.workDays.includes(Ce);let ee="bg-gray-50 text-gray-400 border-gray-100";return G&&(ee="bg-white border-emerald-200 text-gray-700 shadow-sm"),fe&&(fe.type==="paid_leave"&&(ee="bg-yellow-50 border-yellow-200 text-yellow-700"),fe.type==="unpaid_leave"&&(ee="bg-red-50 border-red-200 text-red-700"),fe.type==="work"&&(fe.overtimeSlots>0||fe.lateness>0)&&(ee="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),fe.type==="off"&&(ee="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>Z(be,fe),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${ee}`,children:[c.jsx("span",{className:"text-sm",children:nt}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[fe?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",fe.overtimeSlots,"M"]}),fe?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",fe.lateness,"s"]})]})]},ae)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>te(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",J.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:Ns(K.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(ma.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>te(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:Ns(K.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:ge,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(ma.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(L=>{const M=V(L),Z=I(L);return c.jsxs("div",{onClick:()=>q(L),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${M.color} ${M.ring} ring-offset-2 ring-2`,children:M.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(ma.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:L.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[L.startHour," - ",L.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[Z.remaining," gn kald"]})]})]})]},L.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:_e,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(ma.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Qe(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(ma.Trash,{})}),c.jsx("button",{onClick:()=>q(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",J.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const L=ce(A,J);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:Ns(L.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:Ns(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",L.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",Ns(L.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",L.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",Ns(L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",L.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",Ns(L.totalDeduction-L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",Ns(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Tm," Saat",c.jsx("br",{}),"Saatlik cret = ",Ns(L.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",Ns(L.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>X(new Date(J.setMonth(J.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:J.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>X(new Date(J.setMonth(J.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(re,{employee:A,date:J,onDateClick:S})]})]})]})}),z&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>te(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(ma.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>pe(L=>L-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:W}),c.jsx("button",{onClick:()=>pe(L=>L+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:tC.map((L,M)=>{const Z=Ie(W,M),ue=new Date().getMonth()===M&&new Date().getFullYear()===W;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${ue?"text-indigo-200":"text-gray-400"}`,children:L}),c.jsx("div",{className:`text-lg font-bold ${ue?"text-white":"text-gray-800"}`,children:Z>0?Ns(Z):"-"})]},L)})})]})}),x&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:Ue,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:L=>C({...k,name:L.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:L=>C({...k,role:L.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:L=>C({...k,salaryType:L.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:L=>C({...k,salaryAmount:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:L=>C({...k,insurance:L.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:L=>C({...k,allowance:L.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:L=>C({...k,customDailyRate:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:L=>C({...k,customOvertimeMultiplier:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:L=>C({...k,customDeductionRate:L.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:L=>C({...k,vacationTotal:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:L=>C({...k,startHour:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:L=>C({...k,endHour:L.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:sb.map((L,M)=>c.jsx("button",{type:"button",onClick:()=>{const Z=k.workDays.includes(M)?k.workDays.filter(ue=>ue!==M):[...k.workDays,M];C({...k,workDays:Z})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(M)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:L.slice(0,3)},L))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),he&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:Ee}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(L=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:L.id,checked:T.type===L.id,onChange:M=>j({...T,type:M.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:L.label})]},L.id))})]}),T.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Tm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(L=>c.jsx("button",{type:"button",onClick:()=>j({...T,overtimeSlots:T.overtimeSlots===L?0:L}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${T.overtimeSlots===L?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:L},L))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:T.lateness,onChange:L=>j({...T,lateness:L.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ve(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function sC(){const[r,e]=ne.useState(null),[s,i]=ne.useState(!0),[o,d]=ne.useState("dashboard"),[f,p]=ne.useState(!1);ne.useEffect(()=>{const A=cS(us,q=>{e(q),i(!1)});return()=>A()},[]);const x=async()=>{try{await uS(us)}catch(A){console.error("k yaplrken hata:",A)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],E=()=>{switch(o){case"dashboard":return c.jsx(Zv,{onNavigate:d});case"musteriler":return c.jsx(q4,{});case"urunler":return c.jsx(Y4,{});case"stok":return c.jsx(X4,{});case"siparis":return c.jsx(H4,{});case"teklif":return c.jsx(W4,{});case"fiyatlandirma":return c.jsx(eC,{});case"calisan":return c.jsx(nC,{});default:return c.jsx(Zv,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{d(A.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:E()})})]})]}):c.jsx(L4,{})}_w.createRoot(document.getElementById("root")).render(c.jsx(ne.StrictMode,{children:c.jsx(sC,{})}));
